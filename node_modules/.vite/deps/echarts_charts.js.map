{
  "version": 3,
  "sources": ["../../echarts/lib/chart/line/LineSeries.js", "../../echarts/lib/chart/line/helper.js", "../../echarts/lib/chart/line/lineAnimationDiff.js", "../../echarts/lib/chart/line/poly.js", "../../echarts/lib/chart/helper/createClipPathFromCoordSys.js", "../../echarts/lib/chart/line/LineView.js", "../../echarts/lib/layout/points.js", "../../echarts/lib/processor/dataSample.js", "../../echarts/lib/chart/line/install.js", "../../echarts/lib/chart/bar/BaseBarSeries.js", "../../echarts/lib/chart/bar/BarSeries.js", "../../echarts/lib/util/shape/sausage.js", "../../echarts/lib/label/sectorLabel.js", "../../echarts/lib/chart/helper/sectorHelper.js", "../../echarts/lib/chart/bar/BarView.js", "../../echarts/lib/chart/bar/install.js", "../../echarts/lib/chart/pie/pieLayout.js", "../../echarts/lib/processor/dataFilter.js", "../../echarts/lib/chart/pie/labelLayout.js", "../../echarts/lib/chart/pie/PieView.js", "../../echarts/lib/chart/helper/createSeriesDataSimply.js", "../../echarts/lib/visual/LegendVisualProvider.js", "../../echarts/lib/chart/pie/PieSeries.js", "../../echarts/lib/processor/negativeDataFilter.js", "../../echarts/lib/chart/pie/install.js", "../../echarts/lib/chart/scatter/ScatterSeries.js", "../../echarts/lib/chart/helper/LargeSymbolDraw.js", "../../echarts/lib/chart/scatter/ScatterView.js", "../../echarts/lib/chart/scatter/install.js", "../../echarts/lib/chart/radar/radarLayout.js", "../../echarts/lib/chart/radar/backwardCompat.js", "../../echarts/lib/chart/radar/RadarView.js", "../../echarts/lib/chart/radar/RadarSeries.js", "../../echarts/lib/chart/radar/install.js", "../../echarts/lib/chart/map/MapView.js", "../../echarts/lib/chart/map/MapSeries.js", "../../echarts/lib/chart/map/mapDataStatistic.js", "../../echarts/lib/chart/map/mapSymbolLayout.js", "../../echarts/lib/chart/map/install.js", "../../echarts/lib/chart/tree/layoutHelper.js", "../../echarts/lib/chart/tree/TreeView.js", "../../echarts/lib/data/helper/linkSeriesData.js", "../../echarts/lib/data/Tree.js", "../../echarts/lib/chart/helper/treeHelper.js", "../../echarts/lib/chart/tree/TreeSeries.js", "../../echarts/lib/chart/tree/traversalHelper.js", "../../echarts/lib/chart/tree/treeLayout.js", "../../echarts/lib/chart/tree/treeVisual.js", "../../echarts/lib/chart/tree/treeAction.js", "../../echarts/lib/chart/tree/install.js", "../../echarts/lib/chart/treemap/treemapAction.js", "../../echarts/lib/chart/helper/enableAriaDecalForTree.js", "../../echarts/lib/chart/treemap/TreemapSeries.js", "../../echarts/lib/chart/treemap/Breadcrumb.js", "../../echarts/lib/util/animation.js", "../../echarts/lib/chart/treemap/TreemapView.js", "../../echarts/lib/chart/treemap/treemapVisual.js", "../../echarts/lib/chart/treemap/treemapLayout.js", "../../echarts/lib/chart/treemap/install.js", "../../echarts/lib/chart/graph/categoryFilter.js", "../../echarts/lib/chart/graph/categoryVisual.js", "../../echarts/lib/chart/graph/edgeVisual.js", "../../echarts/lib/chart/helper/multipleGraphEdgeHelper.js", "../../echarts/lib/chart/graph/simpleLayoutHelper.js", "../../echarts/lib/chart/graph/simpleLayout.js", "../../echarts/lib/chart/graph/graphHelper.js", "../../echarts/lib/chart/graph/circularLayoutHelper.js", "../../echarts/lib/chart/graph/circularLayout.js", "../../echarts/lib/chart/graph/forceHelper.js", "../../echarts/lib/chart/graph/forceLayout.js", "../../echarts/lib/chart/graph/createView.js", "../../echarts/lib/chart/graph/adjustEdge.js", "../../echarts/lib/chart/graph/GraphView.js", "../../echarts/lib/data/Graph.js", "../../echarts/lib/chart/helper/createGraphFromNodeEdge.js", "../../echarts/lib/chart/graph/GraphSeries.js", "../../echarts/lib/chart/graph/install.js", "../../echarts/lib/chart/gauge/PointerPath.js", "../../echarts/lib/chart/gauge/GaugeView.js", "../../echarts/lib/chart/gauge/GaugeSeries.js", "../../echarts/lib/chart/gauge/install.js", "../../echarts/lib/chart/funnel/FunnelView.js", "../../echarts/lib/chart/funnel/FunnelSeries.js", "../../echarts/lib/chart/funnel/funnelLayout.js", "../../echarts/lib/chart/funnel/install.js", "../../echarts/lib/chart/parallel/ParallelView.js", "../../echarts/lib/chart/parallel/ParallelSeries.js", "../../echarts/lib/chart/parallel/parallelVisual.js", "../../echarts/lib/chart/parallel/install.js", "../../echarts/lib/chart/sankey/SankeyView.js", "../../echarts/lib/chart/sankey/SankeySeries.js", "../../echarts/lib/chart/sankey/sankeyLayout.js", "../../echarts/lib/chart/sankey/sankeyVisual.js", "../../echarts/lib/chart/sankey/install.js", "../../echarts/lib/chart/helper/whiskerBoxCommon.js", "../../echarts/lib/chart/boxplot/BoxplotSeries.js", "../../echarts/lib/chart/boxplot/BoxplotView.js", "../../echarts/lib/chart/boxplot/boxplotLayout.js", "../../echarts/lib/chart/boxplot/prepareBoxplotData.js", "../../echarts/lib/chart/boxplot/boxplotTransform.js", "../../echarts/lib/chart/boxplot/install.js", "../../echarts/lib/chart/candlestick/CandlestickView.js", "../../echarts/lib/chart/candlestick/CandlestickSeries.js", "../../echarts/lib/chart/candlestick/preprocessor.js", "../../echarts/lib/chart/candlestick/candlestickVisual.js", "../../echarts/lib/chart/candlestick/candlestickLayout.js", "../../echarts/lib/chart/candlestick/install.js", "../../echarts/lib/chart/helper/EffectSymbol.js", "../../echarts/lib/chart/effectScatter/EffectScatterView.js", "../../echarts/lib/chart/effectScatter/EffectScatterSeries.js", "../../echarts/lib/chart/effectScatter/install.js", "../../echarts/lib/chart/helper/EffectLine.js", "../../echarts/lib/chart/helper/Polyline.js", "../../echarts/lib/chart/helper/EffectPolyline.js", "../../echarts/lib/chart/helper/LargeLineDraw.js", "../../echarts/lib/chart/lines/linesLayout.js", "../../echarts/lib/chart/lines/LinesView.js", "../../echarts/lib/chart/lines/LinesSeries.js", "../../echarts/lib/chart/lines/linesVisual.js", "../../echarts/lib/chart/lines/install.js", "../../echarts/lib/chart/heatmap/HeatmapLayer.js", "../../echarts/lib/chart/heatmap/HeatmapView.js", "../../echarts/lib/chart/heatmap/HeatmapSeries.js", "../../echarts/lib/chart/heatmap/install.js", "../../echarts/lib/chart/bar/PictorialBarView.js", "../../echarts/lib/chart/bar/PictorialBarSeries.js", "../../echarts/lib/chart/bar/installPictorialBar.js", "../../echarts/lib/chart/themeRiver/ThemeRiverView.js", "../../echarts/lib/chart/themeRiver/ThemeRiverSeries.js", "../../echarts/lib/chart/themeRiver/themeRiverLayout.js", "../../echarts/lib/chart/themeRiver/install.js", "../../echarts/lib/chart/sunburst/SunburstPiece.js", "../../echarts/lib/chart/sunburst/sunburstAction.js", "../../echarts/lib/chart/sunburst/SunburstView.js", "../../echarts/lib/chart/sunburst/SunburstSeries.js", "../../echarts/lib/chart/sunburst/sunburstLayout.js", "../../echarts/lib/chart/sunburst/sunburstVisual.js", "../../echarts/lib/chart/sunburst/install.js", "../../echarts/lib/chart/custom/CustomSeries.js", "../../echarts/lib/coord/cartesian/prepareCustom.js", "../../echarts/lib/coord/geo/prepareCustom.js", "../../echarts/lib/coord/single/prepareCustom.js", "../../echarts/lib/coord/polar/prepareCustom.js", "../../echarts/lib/coord/calendar/prepareCustom.js", "../../echarts/lib/chart/custom/CustomView.js", "../../echarts/lib/chart/custom/install.js"],
  "sourcesContent": ["\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport createSeriesData from '../helper/createSeriesData.js';\r\nimport SeriesModel from '../../model/Series.js';\r\nimport { createSymbol } from '../../util/symbol.js';\r\nimport { Group } from '../../util/graphic.js';\r\n\r\nvar LineSeriesModel =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(LineSeriesModel, _super);\r\n\r\n  function LineSeriesModel() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = LineSeriesModel.type;\r\n    _this.hasSymbolVisual = true;\r\n    return _this;\r\n  }\r\n\r\n  LineSeriesModel.prototype.getInitialData = function (option) {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      var coordSys = option.coordinateSystem;\r\n\r\n      if (coordSys !== 'polar' && coordSys !== 'cartesian2d') {\r\n        throw new Error('Line not support coordinateSystem besides cartesian and polar');\r\n      }\r\n    }\r\n\r\n    return createSeriesData(null, this, {\r\n      useEncodeDefaulter: true\r\n    });\r\n  };\r\n\r\n  LineSeriesModel.prototype.getLegendIcon = function (opt) {\r\n    var group = new Group();\r\n    var line = createSymbol('line', 0, opt.itemHeight / 2, opt.itemWidth, 0, opt.lineStyle.stroke, false);\r\n    group.add(line);\r\n    line.setStyle(opt.lineStyle);\r\n    var visualType = this.getData().getVisual('symbol');\r\n    var visualRotate = this.getData().getVisual('symbolRotate');\r\n    var symbolType = visualType === 'none' ? 'circle' : visualType; // Symbol size is 80% when there is a line\r\n\r\n    var size = opt.itemHeight * 0.8;\r\n    var symbol = createSymbol(symbolType, (opt.itemWidth - size) / 2, (opt.itemHeight - size) / 2, size, size, opt.itemStyle.fill);\r\n    group.add(symbol);\r\n    symbol.setStyle(opt.itemStyle);\r\n    var symbolRotate = opt.iconRotate === 'inherit' ? visualRotate : opt.iconRotate || 0;\r\n    symbol.rotation = symbolRotate * Math.PI / 180;\r\n    symbol.setOrigin([opt.itemWidth / 2, opt.itemHeight / 2]);\r\n\r\n    if (symbolType.indexOf('empty') > -1) {\r\n      symbol.style.stroke = symbol.style.fill;\r\n      symbol.style.fill = '#fff';\r\n      symbol.style.lineWidth = 2;\r\n    }\r\n\r\n    return group;\r\n  };\r\n\r\n  LineSeriesModel.type = 'series.line';\r\n  LineSeriesModel.dependencies = ['grid', 'polar'];\r\n  LineSeriesModel.defaultOption = {\r\n    // zlevel: 0,\r\n    z: 3,\r\n    coordinateSystem: 'cartesian2d',\r\n    legendHoverLink: true,\r\n    clip: true,\r\n    label: {\r\n      position: 'top'\r\n    },\r\n    // itemStyle: {\r\n    // },\r\n    endLabel: {\r\n      show: false,\r\n      valueAnimation: true,\r\n      distance: 8\r\n    },\r\n    lineStyle: {\r\n      width: 2,\r\n      type: 'solid'\r\n    },\r\n    emphasis: {\r\n      scale: true\r\n    },\r\n    // areaStyle: {\r\n    // origin of areaStyle. Valid values:\r\n    // `'auto'/null/undefined`: from axisLine to data\r\n    // `'start'`: from min to data\r\n    // `'end'`: from data to max\r\n    // origin: 'auto'\r\n    // },\r\n    // false, 'start', 'end', 'middle'\r\n    step: false,\r\n    // Disabled if step is true\r\n    smooth: false,\r\n    smoothMonotone: null,\r\n    symbol: 'emptyCircle',\r\n    symbolSize: 4,\r\n    symbolRotate: null,\r\n    showSymbol: true,\r\n    // `false`: follow the label interval strategy.\r\n    // `true`: show all symbols.\r\n    // `'auto'`: If possible, show all symbols, otherwise\r\n    //           follow the label interval strategy.\r\n    showAllSymbol: 'auto',\r\n    // Whether to connect break point.\r\n    connectNulls: false,\r\n    // Sampling for large data. Can be: 'average', 'max', 'min', 'sum', 'lttb'.\r\n    sampling: 'none',\r\n    animationEasing: 'linear',\r\n    // Disable progressive\r\n    progressive: 0,\r\n    hoverLayerThreshold: Infinity,\r\n    universalTransition: {\r\n      divideShape: 'clone'\r\n    },\r\n    triggerLineEvent: false\r\n  };\r\n  return LineSeriesModel;\r\n}(SeriesModel);\r\n\r\nexport default LineSeriesModel;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { isDimensionStacked } from '../../data/helper/dataStackHelper.js';\r\nimport { isNumber, map } from 'zrender/lib/core/util.js';\r\nexport function prepareDataCoordInfo(coordSys, data, valueOrigin) {\r\n  var baseAxis = coordSys.getBaseAxis();\r\n  var valueAxis = coordSys.getOtherAxis(baseAxis);\r\n  var valueStart = getValueStart(valueAxis, valueOrigin);\r\n  var baseAxisDim = baseAxis.dim;\r\n  var valueAxisDim = valueAxis.dim;\r\n  var valueDim = data.mapDimension(valueAxisDim);\r\n  var baseDim = data.mapDimension(baseAxisDim);\r\n  var baseDataOffset = valueAxisDim === 'x' || valueAxisDim === 'radius' ? 1 : 0;\r\n  var dims = map(coordSys.dimensions, function (coordDim) {\r\n    return data.mapDimension(coordDim);\r\n  });\r\n  var stacked = false;\r\n  var stackResultDim = data.getCalculationInfo('stackResultDimension');\r\n\r\n  if (isDimensionStacked(data, dims[0]\r\n  /* , dims[1] */\r\n  )) {\r\n    // jshint ignore:line\r\n    stacked = true;\r\n    dims[0] = stackResultDim;\r\n  }\r\n\r\n  if (isDimensionStacked(data, dims[1]\r\n  /* , dims[0] */\r\n  )) {\r\n    // jshint ignore:line\r\n    stacked = true;\r\n    dims[1] = stackResultDim;\r\n  }\r\n\r\n  return {\r\n    dataDimsForPoint: dims,\r\n    valueStart: valueStart,\r\n    valueAxisDim: valueAxisDim,\r\n    baseAxisDim: baseAxisDim,\r\n    stacked: !!stacked,\r\n    valueDim: valueDim,\r\n    baseDim: baseDim,\r\n    baseDataOffset: baseDataOffset,\r\n    stackedOverDimension: data.getCalculationInfo('stackedOverDimension')\r\n  };\r\n}\r\n\r\nfunction getValueStart(valueAxis, valueOrigin) {\r\n  var valueStart = 0;\r\n  var extent = valueAxis.scale.getExtent();\r\n\r\n  if (valueOrigin === 'start') {\r\n    valueStart = extent[0];\r\n  } else if (valueOrigin === 'end') {\r\n    valueStart = extent[1];\r\n  } // If origin is specified as a number, use it as\r\n  // valueStart directly\r\n  else if (isNumber(valueOrigin) && !isNaN(valueOrigin)) {\r\n      valueStart = valueOrigin;\r\n    } // auto\r\n    else {\r\n        // Both positive\r\n        if (extent[0] > 0) {\r\n          valueStart = extent[0];\r\n        } // Both negative\r\n        else if (extent[1] < 0) {\r\n            valueStart = extent[1];\r\n          } // If is one positive, and one negative, onZero shall be true\r\n\r\n      }\r\n\r\n  return valueStart;\r\n}\r\n\r\nexport function getStackedOnPoint(dataCoordInfo, coordSys, data, idx) {\r\n  var value = NaN;\r\n\r\n  if (dataCoordInfo.stacked) {\r\n    value = data.get(data.getCalculationInfo('stackedOverDimension'), idx);\r\n  }\r\n\r\n  if (isNaN(value)) {\r\n    value = dataCoordInfo.valueStart;\r\n  }\r\n\r\n  var baseDataOffset = dataCoordInfo.baseDataOffset;\r\n  var stackedData = [];\r\n  stackedData[baseDataOffset] = data.get(dataCoordInfo.baseDim, idx);\r\n  stackedData[1 - baseDataOffset] = value;\r\n  return coordSys.dataToPoint(stackedData);\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { prepareDataCoordInfo, getStackedOnPoint } from './helper.js';\r\nimport { createFloat32Array } from '../../util/vendor.js';\r\n\r\nfunction diffData(oldData, newData) {\r\n  var diffResult = [];\r\n  newData.diff(oldData).add(function (idx) {\r\n    diffResult.push({\r\n      cmd: '+',\r\n      idx: idx\r\n    });\r\n  }).update(function (newIdx, oldIdx) {\r\n    diffResult.push({\r\n      cmd: '=',\r\n      idx: oldIdx,\r\n      idx1: newIdx\r\n    });\r\n  }).remove(function (idx) {\r\n    diffResult.push({\r\n      cmd: '-',\r\n      idx: idx\r\n    });\r\n  }).execute();\r\n  return diffResult;\r\n}\r\n\r\nexport default function lineAnimationDiff(oldData, newData, oldStackedOnPoints, newStackedOnPoints, oldCoordSys, newCoordSys, oldValueOrigin, newValueOrigin) {\r\n  var diff = diffData(oldData, newData); // let newIdList = newData.mapArray(newData.getId);\r\n  // let oldIdList = oldData.mapArray(oldData.getId);\r\n  // convertToIntId(newIdList, oldIdList);\r\n  // // FIXME One data ?\r\n  // diff = arrayDiff(oldIdList, newIdList);\r\n\r\n  var currPoints = [];\r\n  var nextPoints = []; // Points for stacking base line\r\n\r\n  var currStackedPoints = [];\r\n  var nextStackedPoints = [];\r\n  var status = [];\r\n  var sortedIndices = [];\r\n  var rawIndices = [];\r\n  var newDataOldCoordInfo = prepareDataCoordInfo(oldCoordSys, newData, oldValueOrigin); // const oldDataNewCoordInfo = prepareDataCoordInfo(newCoordSys, oldData, newValueOrigin);\r\n\r\n  var oldPoints = oldData.getLayout('points') || [];\r\n  var newPoints = newData.getLayout('points') || [];\r\n\r\n  for (var i = 0; i < diff.length; i++) {\r\n    var diffItem = diff[i];\r\n    var pointAdded = true;\r\n    var oldIdx2 = void 0;\r\n    var newIdx2 = void 0; // FIXME, animation is not so perfect when dataZoom window moves fast\r\n    // Which is in case remvoing or add more than one data in the tail or head\r\n\r\n    switch (diffItem.cmd) {\r\n      case '=':\r\n        oldIdx2 = diffItem.idx * 2;\r\n        newIdx2 = diffItem.idx1 * 2;\r\n        var currentX = oldPoints[oldIdx2];\r\n        var currentY = oldPoints[oldIdx2 + 1];\r\n        var nextX = newPoints[newIdx2];\r\n        var nextY = newPoints[newIdx2 + 1]; // If previous data is NaN, use next point directly\r\n\r\n        if (isNaN(currentX) || isNaN(currentY)) {\r\n          currentX = nextX;\r\n          currentY = nextY;\r\n        }\r\n\r\n        currPoints.push(currentX, currentY);\r\n        nextPoints.push(nextX, nextY);\r\n        currStackedPoints.push(oldStackedOnPoints[oldIdx2], oldStackedOnPoints[oldIdx2 + 1]);\r\n        nextStackedPoints.push(newStackedOnPoints[newIdx2], newStackedOnPoints[newIdx2 + 1]);\r\n        rawIndices.push(newData.getRawIndex(diffItem.idx1));\r\n        break;\r\n\r\n      case '+':\r\n        var newIdx = diffItem.idx;\r\n        var newDataDimsForPoint = newDataOldCoordInfo.dataDimsForPoint;\r\n        var oldPt = oldCoordSys.dataToPoint([newData.get(newDataDimsForPoint[0], newIdx), newData.get(newDataDimsForPoint[1], newIdx)]);\r\n        newIdx2 = newIdx * 2;\r\n        currPoints.push(oldPt[0], oldPt[1]);\r\n        nextPoints.push(newPoints[newIdx2], newPoints[newIdx2 + 1]);\r\n        var stackedOnPoint = getStackedOnPoint(newDataOldCoordInfo, oldCoordSys, newData, newIdx);\r\n        currStackedPoints.push(stackedOnPoint[0], stackedOnPoint[1]);\r\n        nextStackedPoints.push(newStackedOnPoints[newIdx2], newStackedOnPoints[newIdx2 + 1]);\r\n        rawIndices.push(newData.getRawIndex(newIdx));\r\n        break;\r\n\r\n      case '-':\r\n        pointAdded = false;\r\n    } // Original indices\r\n\r\n\r\n    if (pointAdded) {\r\n      status.push(diffItem);\r\n      sortedIndices.push(sortedIndices.length);\r\n    }\r\n  } // Diff result may be crossed if all items are changed\r\n  // Sort by data index\r\n\r\n\r\n  sortedIndices.sort(function (a, b) {\r\n    return rawIndices[a] - rawIndices[b];\r\n  });\r\n  var len = currPoints.length;\r\n  var sortedCurrPoints = createFloat32Array(len);\r\n  var sortedNextPoints = createFloat32Array(len);\r\n  var sortedCurrStackedPoints = createFloat32Array(len);\r\n  var sortedNextStackedPoints = createFloat32Array(len);\r\n  var sortedStatus = [];\r\n\r\n  for (var i = 0; i < sortedIndices.length; i++) {\r\n    var idx = sortedIndices[i];\r\n    var i2 = i * 2;\r\n    var idx2 = idx * 2;\r\n    sortedCurrPoints[i2] = currPoints[idx2];\r\n    sortedCurrPoints[i2 + 1] = currPoints[idx2 + 1];\r\n    sortedNextPoints[i2] = nextPoints[idx2];\r\n    sortedNextPoints[i2 + 1] = nextPoints[idx2 + 1];\r\n    sortedCurrStackedPoints[i2] = currStackedPoints[idx2];\r\n    sortedCurrStackedPoints[i2 + 1] = currStackedPoints[idx2 + 1];\r\n    sortedNextStackedPoints[i2] = nextStackedPoints[idx2];\r\n    sortedNextStackedPoints[i2 + 1] = nextStackedPoints[idx2 + 1];\r\n    sortedStatus[i] = status[idx];\r\n  }\r\n\r\n  return {\r\n    current: sortedCurrPoints,\r\n    next: sortedNextPoints,\r\n    stackedOnCurrent: sortedCurrStackedPoints,\r\n    stackedOnNext: sortedNextStackedPoints,\r\n    status: sortedStatus\r\n  };\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\"; // Poly path support NaN point\r\n\r\nimport Path from 'zrender/lib/graphic/Path.js';\r\nimport PathProxy from 'zrender/lib/core/PathProxy.js';\r\nimport { cubicRootAt, cubicAt } from 'zrender/lib/core/curve.js';\r\nvar mathMin = Math.min;\r\nvar mathMax = Math.max;\r\n\r\nfunction isPointNull(x, y) {\r\n  return isNaN(x) || isNaN(y);\r\n}\r\n/**\r\n * Draw smoothed line in non-monotone, in may cause undesired curve in extreme\r\n * situations. This should be used when points are non-monotone neither in x or\r\n * y dimension.\r\n */\r\n\r\n\r\nfunction drawSegment(ctx, points, start, segLen, allLen, dir, smooth, smoothMonotone, connectNulls) {\r\n  var prevX;\r\n  var prevY;\r\n  var cpx0;\r\n  var cpy0;\r\n  var cpx1;\r\n  var cpy1;\r\n  var idx = start;\r\n  var k = 0;\r\n\r\n  for (; k < segLen; k++) {\r\n    var x = points[idx * 2];\r\n    var y = points[idx * 2 + 1];\r\n\r\n    if (idx >= allLen || idx < 0) {\r\n      break;\r\n    }\r\n\r\n    if (isPointNull(x, y)) {\r\n      if (connectNulls) {\r\n        idx += dir;\r\n        continue;\r\n      }\r\n\r\n      break;\r\n    }\r\n\r\n    if (idx === start) {\r\n      ctx[dir > 0 ? 'moveTo' : 'lineTo'](x, y);\r\n      cpx0 = x;\r\n      cpy0 = y;\r\n    } else {\r\n      var dx = x - prevX;\r\n      var dy = y - prevY; // Ignore tiny segment.\r\n\r\n      if (dx * dx + dy * dy < 0.5) {\r\n        idx += dir;\r\n        continue;\r\n      }\r\n\r\n      if (smooth > 0) {\r\n        var nextIdx = idx + dir;\r\n        var nextX = points[nextIdx * 2];\r\n        var nextY = points[nextIdx * 2 + 1]; // Ignore duplicate point\r\n\r\n        while (nextX === x && nextY === y && k < segLen) {\r\n          k++;\r\n          nextIdx += dir;\r\n          idx += dir;\r\n          nextX = points[nextIdx * 2];\r\n          nextY = points[nextIdx * 2 + 1];\r\n          x = points[idx * 2];\r\n          y = points[idx * 2 + 1];\r\n          dx = x - prevX;\r\n          dy = y - prevY;\r\n        }\r\n\r\n        var tmpK = k + 1;\r\n\r\n        if (connectNulls) {\r\n          // Find next point not null\r\n          while (isPointNull(nextX, nextY) && tmpK < segLen) {\r\n            tmpK++;\r\n            nextIdx += dir;\r\n            nextX = points[nextIdx * 2];\r\n            nextY = points[nextIdx * 2 + 1];\r\n          }\r\n        }\r\n\r\n        var ratioNextSeg = 0.5;\r\n        var vx = 0;\r\n        var vy = 0;\r\n        var nextCpx0 = void 0;\r\n        var nextCpy0 = void 0; // Is last point\r\n\r\n        if (tmpK >= segLen || isPointNull(nextX, nextY)) {\r\n          cpx1 = x;\r\n          cpy1 = y;\r\n        } else {\r\n          vx = nextX - prevX;\r\n          vy = nextY - prevY;\r\n          var dx0 = x - prevX;\r\n          var dx1 = nextX - x;\r\n          var dy0 = y - prevY;\r\n          var dy1 = nextY - y;\r\n          var lenPrevSeg = void 0;\r\n          var lenNextSeg = void 0;\r\n\r\n          if (smoothMonotone === 'x') {\r\n            lenPrevSeg = Math.abs(dx0);\r\n            lenNextSeg = Math.abs(dx1);\r\n            var dir_1 = vx > 0 ? 1 : -1;\r\n            cpx1 = x - dir_1 * lenPrevSeg * smooth;\r\n            cpy1 = y;\r\n            nextCpx0 = x + dir_1 * lenNextSeg * smooth;\r\n            nextCpy0 = y;\r\n          } else if (smoothMonotone === 'y') {\r\n            lenPrevSeg = Math.abs(dy0);\r\n            lenNextSeg = Math.abs(dy1);\r\n            var dir_2 = vy > 0 ? 1 : -1;\r\n            cpx1 = x;\r\n            cpy1 = y - dir_2 * lenPrevSeg * smooth;\r\n            nextCpx0 = x;\r\n            nextCpy0 = y + dir_2 * lenNextSeg * smooth;\r\n          } else {\r\n            lenPrevSeg = Math.sqrt(dx0 * dx0 + dy0 * dy0);\r\n            lenNextSeg = Math.sqrt(dx1 * dx1 + dy1 * dy1); // Use ratio of seg length\r\n\r\n            ratioNextSeg = lenNextSeg / (lenNextSeg + lenPrevSeg);\r\n            cpx1 = x - vx * smooth * (1 - ratioNextSeg);\r\n            cpy1 = y - vy * smooth * (1 - ratioNextSeg); // cp0 of next segment\r\n\r\n            nextCpx0 = x + vx * smooth * ratioNextSeg;\r\n            nextCpy0 = y + vy * smooth * ratioNextSeg; // Smooth constraint between point and next point.\r\n            // Avoid exceeding extreme after smoothing.\r\n\r\n            nextCpx0 = mathMin(nextCpx0, mathMax(nextX, x));\r\n            nextCpy0 = mathMin(nextCpy0, mathMax(nextY, y));\r\n            nextCpx0 = mathMax(nextCpx0, mathMin(nextX, x));\r\n            nextCpy0 = mathMax(nextCpy0, mathMin(nextY, y)); // Reclaculate cp1 based on the adjusted cp0 of next seg.\r\n\r\n            vx = nextCpx0 - x;\r\n            vy = nextCpy0 - y;\r\n            cpx1 = x - vx * lenPrevSeg / lenNextSeg;\r\n            cpy1 = y - vy * lenPrevSeg / lenNextSeg; // Smooth constraint between point and prev point.\r\n            // Avoid exceeding extreme after smoothing.\r\n\r\n            cpx1 = mathMin(cpx1, mathMax(prevX, x));\r\n            cpy1 = mathMin(cpy1, mathMax(prevY, y));\r\n            cpx1 = mathMax(cpx1, mathMin(prevX, x));\r\n            cpy1 = mathMax(cpy1, mathMin(prevY, y)); // Adjust next cp0 again.\r\n\r\n            vx = x - cpx1;\r\n            vy = y - cpy1;\r\n            nextCpx0 = x + vx * lenNextSeg / lenPrevSeg;\r\n            nextCpy0 = y + vy * lenNextSeg / lenPrevSeg;\r\n          }\r\n        }\r\n\r\n        ctx.bezierCurveTo(cpx0, cpy0, cpx1, cpy1, x, y);\r\n        cpx0 = nextCpx0;\r\n        cpy0 = nextCpy0;\r\n      } else {\r\n        ctx.lineTo(x, y);\r\n      }\r\n    }\r\n\r\n    prevX = x;\r\n    prevY = y;\r\n    idx += dir;\r\n  }\r\n\r\n  return k;\r\n}\r\n\r\nvar ECPolylineShape =\r\n/** @class */\r\nfunction () {\r\n  function ECPolylineShape() {\r\n    this.smooth = 0;\r\n    this.smoothConstraint = true;\r\n  }\r\n\r\n  return ECPolylineShape;\r\n}();\r\n\r\nvar ECPolyline =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(ECPolyline, _super);\r\n\r\n  function ECPolyline(opts) {\r\n    var _this = _super.call(this, opts) || this;\r\n\r\n    _this.type = 'ec-polyline';\r\n    return _this;\r\n  }\r\n\r\n  ECPolyline.prototype.getDefaultStyle = function () {\r\n    return {\r\n      stroke: '#000',\r\n      fill: null\r\n    };\r\n  };\r\n\r\n  ECPolyline.prototype.getDefaultShape = function () {\r\n    return new ECPolylineShape();\r\n  };\r\n\r\n  ECPolyline.prototype.buildPath = function (ctx, shape) {\r\n    var points = shape.points;\r\n    var i = 0;\r\n    var len = points.length / 2; // const result = getBoundingBox(points, shape.smoothConstraint);\r\n\r\n    if (shape.connectNulls) {\r\n      // Must remove first and last null values avoid draw error in polygon\r\n      for (; len > 0; len--) {\r\n        if (!isPointNull(points[len * 2 - 2], points[len * 2 - 1])) {\r\n          break;\r\n        }\r\n      }\r\n\r\n      for (; i < len; i++) {\r\n        if (!isPointNull(points[i * 2], points[i * 2 + 1])) {\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    while (i < len) {\r\n      i += drawSegment(ctx, points, i, len, len, 1, shape.smooth, shape.smoothMonotone, shape.connectNulls) + 1;\r\n    }\r\n  };\r\n\r\n  ECPolyline.prototype.getPointOn = function (xOrY, dim) {\r\n    if (!this.path) {\r\n      this.createPathProxy();\r\n      this.buildPath(this.path, this.shape);\r\n    }\r\n\r\n    var path = this.path;\r\n    var data = path.data;\r\n    var CMD = PathProxy.CMD;\r\n    var x0;\r\n    var y0;\r\n    var isDimX = dim === 'x';\r\n    var roots = [];\r\n\r\n    for (var i = 0; i < data.length;) {\r\n      var cmd = data[i++];\r\n      var x = void 0;\r\n      var y = void 0;\r\n      var x2 = void 0;\r\n      var y2 = void 0;\r\n      var x3 = void 0;\r\n      var y3 = void 0;\r\n      var t = void 0;\r\n\r\n      switch (cmd) {\r\n        case CMD.M:\r\n          x0 = data[i++];\r\n          y0 = data[i++];\r\n          break;\r\n\r\n        case CMD.L:\r\n          x = data[i++];\r\n          y = data[i++];\r\n          t = isDimX ? (xOrY - x0) / (x - x0) : (xOrY - y0) / (y - y0);\r\n\r\n          if (t <= 1 && t >= 0) {\r\n            var val = isDimX ? (y - y0) * t + y0 : (x - x0) * t + x0;\r\n            return isDimX ? [xOrY, val] : [val, xOrY];\r\n          }\r\n\r\n          x0 = x;\r\n          y0 = y;\r\n          break;\r\n\r\n        case CMD.C:\r\n          x = data[i++];\r\n          y = data[i++];\r\n          x2 = data[i++];\r\n          y2 = data[i++];\r\n          x3 = data[i++];\r\n          y3 = data[i++];\r\n          var nRoot = isDimX ? cubicRootAt(x0, x, x2, x3, xOrY, roots) : cubicRootAt(y0, y, y2, y3, xOrY, roots);\r\n\r\n          if (nRoot > 0) {\r\n            for (var i_1 = 0; i_1 < nRoot; i_1++) {\r\n              var t_1 = roots[i_1];\r\n\r\n              if (t_1 <= 1 && t_1 >= 0) {\r\n                var val = isDimX ? cubicAt(y0, y, y2, y3, t_1) : cubicAt(x0, x, x2, x3, t_1);\r\n                return isDimX ? [xOrY, val] : [val, xOrY];\r\n              }\r\n            }\r\n          }\r\n\r\n          x0 = x3;\r\n          y0 = y3;\r\n          break;\r\n      }\r\n    }\r\n  };\r\n\r\n  return ECPolyline;\r\n}(Path);\r\n\r\nexport { ECPolyline };\r\n\r\nvar ECPolygonShape =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(ECPolygonShape, _super);\r\n\r\n  function ECPolygonShape() {\r\n    return _super !== null && _super.apply(this, arguments) || this;\r\n  }\r\n\r\n  return ECPolygonShape;\r\n}(ECPolylineShape);\r\n\r\nvar ECPolygon =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(ECPolygon, _super);\r\n\r\n  function ECPolygon(opts) {\r\n    var _this = _super.call(this, opts) || this;\r\n\r\n    _this.type = 'ec-polygon';\r\n    return _this;\r\n  }\r\n\r\n  ECPolygon.prototype.getDefaultShape = function () {\r\n    return new ECPolygonShape();\r\n  };\r\n\r\n  ECPolygon.prototype.buildPath = function (ctx, shape) {\r\n    var points = shape.points;\r\n    var stackedOnPoints = shape.stackedOnPoints;\r\n    var i = 0;\r\n    var len = points.length / 2;\r\n    var smoothMonotone = shape.smoothMonotone;\r\n\r\n    if (shape.connectNulls) {\r\n      // Must remove first and last null values avoid draw error in polygon\r\n      for (; len > 0; len--) {\r\n        if (!isPointNull(points[len * 2 - 2], points[len * 2 - 1])) {\r\n          break;\r\n        }\r\n      }\r\n\r\n      for (; i < len; i++) {\r\n        if (!isPointNull(points[i * 2], points[i * 2 + 1])) {\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    while (i < len) {\r\n      var k = drawSegment(ctx, points, i, len, len, 1, shape.smooth, smoothMonotone, shape.connectNulls);\r\n      drawSegment(ctx, stackedOnPoints, i + k - 1, k, len, -1, shape.stackedOnSmooth, smoothMonotone, shape.connectNulls);\r\n      i += k + 1;\r\n      ctx.closePath();\r\n    }\r\n  };\r\n\r\n  return ECPolygon;\r\n}(Path);\r\n\r\nexport { ECPolygon };", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as graphic from '../../util/graphic.js';\r\nimport { round } from '../../util/number.js';\r\nimport { isFunction } from 'zrender/lib/core/util.js';\r\n\r\nfunction createGridClipPath(cartesian, hasAnimation, seriesModel, done, during) {\r\n  var rect = cartesian.getArea();\r\n  var x = rect.x;\r\n  var y = rect.y;\r\n  var width = rect.width;\r\n  var height = rect.height;\r\n  var lineWidth = seriesModel.get(['lineStyle', 'width']) || 2; // Expand the clip path a bit to avoid the border is clipped and looks thinner\r\n\r\n  x -= lineWidth / 2;\r\n  y -= lineWidth / 2;\r\n  width += lineWidth;\r\n  height += lineWidth; // fix: https://github.com/apache/incubator-echarts/issues/11369\r\n\r\n  x = Math.floor(x);\r\n  width = Math.round(width);\r\n  var clipPath = new graphic.Rect({\r\n    shape: {\r\n      x: x,\r\n      y: y,\r\n      width: width,\r\n      height: height\r\n    }\r\n  });\r\n\r\n  if (hasAnimation) {\r\n    var baseAxis = cartesian.getBaseAxis();\r\n    var isHorizontal = baseAxis.isHorizontal();\r\n    var isAxisInversed = baseAxis.inverse;\r\n\r\n    if (isHorizontal) {\r\n      if (isAxisInversed) {\r\n        clipPath.shape.x += width;\r\n      }\r\n\r\n      clipPath.shape.width = 0;\r\n    } else {\r\n      if (!isAxisInversed) {\r\n        clipPath.shape.y += height;\r\n      }\r\n\r\n      clipPath.shape.height = 0;\r\n    }\r\n\r\n    var duringCb = isFunction(during) ? function (percent) {\r\n      during(percent, clipPath);\r\n    } : null;\r\n    graphic.initProps(clipPath, {\r\n      shape: {\r\n        width: width,\r\n        height: height,\r\n        x: x,\r\n        y: y\r\n      }\r\n    }, seriesModel, null, done, duringCb);\r\n  }\r\n\r\n  return clipPath;\r\n}\r\n\r\nfunction createPolarClipPath(polar, hasAnimation, seriesModel) {\r\n  var sectorArea = polar.getArea(); // Avoid float number rounding error for symbol on the edge of axis extent.\r\n\r\n  var r0 = round(sectorArea.r0, 1);\r\n  var r = round(sectorArea.r, 1);\r\n  var clipPath = new graphic.Sector({\r\n    shape: {\r\n      cx: round(polar.cx, 1),\r\n      cy: round(polar.cy, 1),\r\n      r0: r0,\r\n      r: r,\r\n      startAngle: sectorArea.startAngle,\r\n      endAngle: sectorArea.endAngle,\r\n      clockwise: sectorArea.clockwise\r\n    }\r\n  });\r\n\r\n  if (hasAnimation) {\r\n    var isRadial = polar.getBaseAxis().dim === 'angle';\r\n\r\n    if (isRadial) {\r\n      clipPath.shape.endAngle = sectorArea.startAngle;\r\n    } else {\r\n      clipPath.shape.r = r0;\r\n    }\r\n\r\n    graphic.initProps(clipPath, {\r\n      shape: {\r\n        endAngle: sectorArea.endAngle,\r\n        r: r\r\n      }\r\n    }, seriesModel);\r\n  }\r\n\r\n  return clipPath;\r\n}\r\n\r\nfunction createClipPath(coordSys, hasAnimation, seriesModel, done, during) {\r\n  if (!coordSys) {\r\n    return null;\r\n  } else if (coordSys.type === 'polar') {\r\n    return createPolarClipPath(coordSys, hasAnimation, seriesModel);\r\n  } else if (coordSys.type === 'cartesian2d') {\r\n    return createGridClipPath(coordSys, hasAnimation, seriesModel, done, during);\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\nexport { createGridClipPath, createPolarClipPath, createClipPath };", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\"; // FIXME step not support polar\r\n\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport SymbolDraw from '../helper/SymbolDraw.js';\r\nimport SymbolClz from '../helper/Symbol.js';\r\nimport lineAnimationDiff from './lineAnimationDiff.js';\r\nimport * as graphic from '../../util/graphic.js';\r\nimport * as modelUtil from '../../util/model.js';\r\nimport { ECPolyline, ECPolygon } from './poly.js';\r\nimport ChartView from '../../view/Chart.js';\r\nimport { prepareDataCoordInfo, getStackedOnPoint } from './helper.js';\r\nimport { createGridClipPath, createPolarClipPath } from '../helper/createClipPathFromCoordSys.js';\r\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem.js';\r\nimport { setStatesStylesFromModel, setStatesFlag, toggleHoverEmphasis, SPECIAL_STATES } from '../../util/states.js';\r\nimport { setLabelStyle, getLabelStatesModels, labelInner } from '../../label/labelStyle.js';\r\nimport { getDefaultLabel, getDefaultInterpolatedLabel } from '../helper/labelHelper.js';\r\nimport { getECData } from '../../util/innerStore.js';\r\nimport { createFloat32Array } from '../../util/vendor.js';\r\nimport { convertToColorString } from '../../util/format.js';\r\nimport { lerp } from 'zrender/lib/tool/color.js';\r\n\r\nfunction isPointsSame(points1, points2) {\r\n  if (points1.length !== points2.length) {\r\n    return;\r\n  }\r\n\r\n  for (var i = 0; i < points1.length; i++) {\r\n    if (points1[i] !== points2[i]) {\r\n      return;\r\n    }\r\n  }\r\n\r\n  return true;\r\n}\r\n\r\nfunction bboxFromPoints(points) {\r\n  var minX = Infinity;\r\n  var minY = Infinity;\r\n  var maxX = -Infinity;\r\n  var maxY = -Infinity;\r\n\r\n  for (var i = 0; i < points.length;) {\r\n    var x = points[i++];\r\n    var y = points[i++];\r\n\r\n    if (!isNaN(x)) {\r\n      minX = Math.min(x, minX);\r\n      maxX = Math.max(x, maxX);\r\n    }\r\n\r\n    if (!isNaN(y)) {\r\n      minY = Math.min(y, minY);\r\n      maxY = Math.max(y, maxY);\r\n    }\r\n  }\r\n\r\n  return [[minX, minY], [maxX, maxY]];\r\n}\r\n\r\nfunction getBoundingDiff(points1, points2) {\r\n  var _a = bboxFromPoints(points1),\r\n      min1 = _a[0],\r\n      max1 = _a[1];\r\n\r\n  var _b = bboxFromPoints(points2),\r\n      min2 = _b[0],\r\n      max2 = _b[1]; // Get a max value from each corner of two boundings.\r\n\r\n\r\n  return Math.max(Math.abs(min1[0] - min2[0]), Math.abs(min1[1] - min2[1]), Math.abs(max1[0] - max2[0]), Math.abs(max1[1] - max2[1]));\r\n}\r\n\r\nfunction getSmooth(smooth) {\r\n  return zrUtil.isNumber(smooth) ? smooth : smooth ? 0.5 : 0;\r\n}\r\n\r\nfunction getStackedOnPoints(coordSys, data, dataCoordInfo) {\r\n  if (!dataCoordInfo.valueDim) {\r\n    return [];\r\n  }\r\n\r\n  var len = data.count();\r\n  var points = createFloat32Array(len * 2);\r\n\r\n  for (var idx = 0; idx < len; idx++) {\r\n    var pt = getStackedOnPoint(dataCoordInfo, coordSys, data, idx);\r\n    points[idx * 2] = pt[0];\r\n    points[idx * 2 + 1] = pt[1];\r\n  }\r\n\r\n  return points;\r\n}\r\n\r\nfunction turnPointsIntoStep(points, coordSys, stepTurnAt, connectNulls) {\r\n  var baseAxis = coordSys.getBaseAxis();\r\n  var baseIndex = baseAxis.dim === 'x' || baseAxis.dim === 'radius' ? 0 : 1;\r\n  var stepPoints = [];\r\n  var i = 0;\r\n  var stepPt = [];\r\n  var pt = [];\r\n  var nextPt = [];\r\n  var filteredPoints = [];\r\n\r\n  if (connectNulls) {\r\n    for (i = 0; i < points.length; i += 2) {\r\n      if (!isNaN(points[i]) && !isNaN(points[i + 1])) {\r\n        filteredPoints.push(points[i], points[i + 1]);\r\n      }\r\n    }\r\n\r\n    points = filteredPoints;\r\n  }\r\n\r\n  for (i = 0; i < points.length - 2; i += 2) {\r\n    nextPt[0] = points[i + 2];\r\n    nextPt[1] = points[i + 3];\r\n    pt[0] = points[i];\r\n    pt[1] = points[i + 1];\r\n    stepPoints.push(pt[0], pt[1]);\r\n\r\n    switch (stepTurnAt) {\r\n      case 'end':\r\n        stepPt[baseIndex] = nextPt[baseIndex];\r\n        stepPt[1 - baseIndex] = pt[1 - baseIndex];\r\n        stepPoints.push(stepPt[0], stepPt[1]);\r\n        break;\r\n\r\n      case 'middle':\r\n        var middle = (pt[baseIndex] + nextPt[baseIndex]) / 2;\r\n        var stepPt2 = [];\r\n        stepPt[baseIndex] = stepPt2[baseIndex] = middle;\r\n        stepPt[1 - baseIndex] = pt[1 - baseIndex];\r\n        stepPt2[1 - baseIndex] = nextPt[1 - baseIndex];\r\n        stepPoints.push(stepPt[0], stepPt[1]);\r\n        stepPoints.push(stepPt2[0], stepPt2[1]);\r\n        break;\r\n\r\n      default:\r\n        // default is start\r\n        stepPt[baseIndex] = pt[baseIndex];\r\n        stepPt[1 - baseIndex] = nextPt[1 - baseIndex];\r\n        stepPoints.push(stepPt[0], stepPt[1]);\r\n    }\r\n  } // Last points\r\n\r\n\r\n  stepPoints.push(points[i++], points[i++]);\r\n  return stepPoints;\r\n}\r\n/**\r\n * Clip color stops to edge. Avoid creating too large gradients.\r\n * Which may lead to blurry when GPU acceleration is enabled. See #15680\r\n *\r\n * The stops has been sorted from small to large.\r\n */\r\n\r\n\r\nfunction clipColorStops(colorStops, maxSize) {\r\n  var newColorStops = [];\r\n  var len = colorStops.length; // coord will always < 0 in prevOutOfRangeColorStop.\r\n\r\n  var prevOutOfRangeColorStop;\r\n  var prevInRangeColorStop;\r\n\r\n  function lerpStop(stop0, stop1, clippedCoord) {\r\n    var coord0 = stop0.coord;\r\n    var p = (clippedCoord - coord0) / (stop1.coord - coord0);\r\n    var color = lerp(p, [stop0.color, stop1.color]);\r\n    return {\r\n      coord: clippedCoord,\r\n      color: color\r\n    };\r\n  }\r\n\r\n  for (var i = 0; i < len; i++) {\r\n    var stop_1 = colorStops[i];\r\n    var coord = stop_1.coord;\r\n\r\n    if (coord < 0) {\r\n      prevOutOfRangeColorStop = stop_1;\r\n    } else if (coord > maxSize) {\r\n      if (prevInRangeColorStop) {\r\n        newColorStops.push(lerpStop(prevInRangeColorStop, stop_1, maxSize));\r\n      } else if (prevOutOfRangeColorStop) {\r\n        // If there are two stops and coord range is between these two stops\r\n        newColorStops.push(lerpStop(prevOutOfRangeColorStop, stop_1, 0), lerpStop(prevOutOfRangeColorStop, stop_1, maxSize));\r\n      } // All following stop will be out of range. So just ignore them.\r\n\r\n\r\n      break;\r\n    } else {\r\n      if (prevOutOfRangeColorStop) {\r\n        newColorStops.push(lerpStop(prevOutOfRangeColorStop, stop_1, 0)); // Reset\r\n\r\n        prevOutOfRangeColorStop = null;\r\n      }\r\n\r\n      newColorStops.push(stop_1);\r\n      prevInRangeColorStop = stop_1;\r\n    }\r\n  }\r\n\r\n  return newColorStops;\r\n}\r\n\r\nfunction getVisualGradient(data, coordSys, api) {\r\n  var visualMetaList = data.getVisual('visualMeta');\r\n\r\n  if (!visualMetaList || !visualMetaList.length || !data.count()) {\r\n    // When data.count() is 0, gradient range can not be calculated.\r\n    return;\r\n  }\r\n\r\n  if (coordSys.type !== 'cartesian2d') {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      console.warn('Visual map on line style is only supported on cartesian2d.');\r\n    }\r\n\r\n    return;\r\n  }\r\n\r\n  var coordDim;\r\n  var visualMeta;\r\n\r\n  for (var i = visualMetaList.length - 1; i >= 0; i--) {\r\n    var dimInfo = data.getDimensionInfo(visualMetaList[i].dimension);\r\n    coordDim = dimInfo && dimInfo.coordDim; // Can only be x or y\r\n\r\n    if (coordDim === 'x' || coordDim === 'y') {\r\n      visualMeta = visualMetaList[i];\r\n      break;\r\n    }\r\n  }\r\n\r\n  if (!visualMeta) {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      console.warn('Visual map on line style only support x or y dimension.');\r\n    }\r\n\r\n    return;\r\n  } // If the area to be rendered is bigger than area defined by LinearGradient,\r\n  // the canvas spec prescribes that the color of the first stop and the last\r\n  // stop should be used. But if two stops are added at offset 0, in effect\r\n  // browsers use the color of the second stop to render area outside\r\n  // LinearGradient. So we can only infinitesimally extend area defined in\r\n  // LinearGradient to render `outerColors`.\r\n\r\n\r\n  var axis = coordSys.getAxis(coordDim); // dataToCoord mapping may not be linear, but must be monotonic.\r\n\r\n  var colorStops = zrUtil.map(visualMeta.stops, function (stop) {\r\n    // offset will be calculated later.\r\n    return {\r\n      coord: axis.toGlobalCoord(axis.dataToCoord(stop.value)),\r\n      color: stop.color\r\n    };\r\n  });\r\n  var stopLen = colorStops.length;\r\n  var outerColors = visualMeta.outerColors.slice();\r\n\r\n  if (stopLen && colorStops[0].coord > colorStops[stopLen - 1].coord) {\r\n    colorStops.reverse();\r\n    outerColors.reverse();\r\n  }\r\n\r\n  var colorStopsInRange = clipColorStops(colorStops, coordDim === 'x' ? api.getWidth() : api.getHeight());\r\n  var inRangeStopLen = colorStopsInRange.length;\r\n\r\n  if (!inRangeStopLen && stopLen) {\r\n    // All stops are out of range. All will be the same color.\r\n    return colorStops[0].coord < 0 ? outerColors[1] ? outerColors[1] : colorStops[stopLen - 1].color : outerColors[0] ? outerColors[0] : colorStops[0].color;\r\n  }\r\n\r\n  var tinyExtent = 10; // Arbitrary value: 10px\r\n\r\n  var minCoord = colorStopsInRange[0].coord - tinyExtent;\r\n  var maxCoord = colorStopsInRange[inRangeStopLen - 1].coord + tinyExtent;\r\n  var coordSpan = maxCoord - minCoord;\r\n\r\n  if (coordSpan < 1e-3) {\r\n    return 'transparent';\r\n  }\r\n\r\n  zrUtil.each(colorStopsInRange, function (stop) {\r\n    stop.offset = (stop.coord - minCoord) / coordSpan;\r\n  });\r\n  colorStopsInRange.push({\r\n    // NOTE: inRangeStopLen may still be 0 if stoplen is zero.\r\n    offset: inRangeStopLen ? colorStopsInRange[inRangeStopLen - 1].offset : 0.5,\r\n    color: outerColors[1] || 'transparent'\r\n  });\r\n  colorStopsInRange.unshift({\r\n    offset: inRangeStopLen ? colorStopsInRange[0].offset : 0.5,\r\n    color: outerColors[0] || 'transparent'\r\n  });\r\n  var gradient = new graphic.LinearGradient(0, 0, 0, 0, colorStopsInRange, true);\r\n  gradient[coordDim] = minCoord;\r\n  gradient[coordDim + '2'] = maxCoord;\r\n  return gradient;\r\n}\r\n\r\nfunction getIsIgnoreFunc(seriesModel, data, coordSys) {\r\n  var showAllSymbol = seriesModel.get('showAllSymbol');\r\n  var isAuto = showAllSymbol === 'auto';\r\n\r\n  if (showAllSymbol && !isAuto) {\r\n    return;\r\n  }\r\n\r\n  var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\r\n\r\n  if (!categoryAxis) {\r\n    return;\r\n  } // Note that category label interval strategy might bring some weird effect\r\n  // in some scenario: users may wonder why some of the symbols are not\r\n  // displayed. So we show all symbols as possible as we can.\r\n\r\n\r\n  if (isAuto // Simplify the logic, do not determine label overlap here.\r\n  && canShowAllSymbolForCategory(categoryAxis, data)) {\r\n    return;\r\n  } // Otherwise follow the label interval strategy on category axis.\r\n\r\n\r\n  var categoryDataDim = data.mapDimension(categoryAxis.dim);\r\n  var labelMap = {};\r\n  zrUtil.each(categoryAxis.getViewLabels(), function (labelItem) {\r\n    var ordinalNumber = categoryAxis.scale.getRawOrdinalNumber(labelItem.tickValue);\r\n    labelMap[ordinalNumber] = 1;\r\n  });\r\n  return function (dataIndex) {\r\n    return !labelMap.hasOwnProperty(data.get(categoryDataDim, dataIndex));\r\n  };\r\n}\r\n\r\nfunction canShowAllSymbolForCategory(categoryAxis, data) {\r\n  // In most cases, line is monotonous on category axis, and the label size\r\n  // is close with each other. So we check the symbol size and some of the\r\n  // label size alone with the category axis to estimate whether all symbol\r\n  // can be shown without overlap.\r\n  var axisExtent = categoryAxis.getExtent();\r\n  var availSize = Math.abs(axisExtent[1] - axisExtent[0]) / categoryAxis.scale.count();\r\n  isNaN(availSize) && (availSize = 0); // 0/0 is NaN.\r\n  // Sampling some points, max 5.\r\n\r\n  var dataLen = data.count();\r\n  var step = Math.max(1, Math.round(dataLen / 5));\r\n\r\n  for (var dataIndex = 0; dataIndex < dataLen; dataIndex += step) {\r\n    if (SymbolClz.getSymbolSize(data, dataIndex // Only for cartesian, where `isHorizontal` exists.\r\n    )[categoryAxis.isHorizontal() ? 1 : 0] // Empirical number\r\n    * 1.5 > availSize) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  return true;\r\n}\r\n\r\nfunction isPointNull(x, y) {\r\n  return isNaN(x) || isNaN(y);\r\n}\r\n\r\nfunction getLastIndexNotNull(points) {\r\n  var len = points.length / 2;\r\n\r\n  for (; len > 0; len--) {\r\n    if (!isPointNull(points[len * 2 - 2], points[len * 2 - 1])) {\r\n      break;\r\n    }\r\n  }\r\n\r\n  return len - 1;\r\n}\r\n\r\nfunction getPointAtIndex(points, idx) {\r\n  return [points[idx * 2], points[idx * 2 + 1]];\r\n}\r\n\r\nfunction getIndexRange(points, xOrY, dim) {\r\n  var len = points.length / 2;\r\n  var dimIdx = dim === 'x' ? 0 : 1;\r\n  var a;\r\n  var b;\r\n  var prevIndex = 0;\r\n  var nextIndex = -1;\r\n\r\n  for (var i = 0; i < len; i++) {\r\n    b = points[i * 2 + dimIdx];\r\n\r\n    if (isNaN(b) || isNaN(points[i * 2 + 1 - dimIdx])) {\r\n      continue;\r\n    }\r\n\r\n    if (i === 0) {\r\n      a = b;\r\n      continue;\r\n    }\r\n\r\n    if (a <= xOrY && b >= xOrY || a >= xOrY && b <= xOrY) {\r\n      nextIndex = i;\r\n      break;\r\n    }\r\n\r\n    prevIndex = i;\r\n    a = b;\r\n  }\r\n\r\n  return {\r\n    range: [prevIndex, nextIndex],\r\n    t: (xOrY - a) / (b - a)\r\n  };\r\n}\r\n\r\nfunction anyStateShowEndLabel(seriesModel) {\r\n  if (seriesModel.get(['endLabel', 'show'])) {\r\n    return true;\r\n  }\r\n\r\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\r\n    if (seriesModel.get([SPECIAL_STATES[i], 'endLabel', 'show'])) {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nfunction createLineClipPath(lineView, coordSys, hasAnimation, seriesModel) {\r\n  if (isCoordinateSystemType(coordSys, 'cartesian2d')) {\r\n    var endLabelModel_1 = seriesModel.getModel('endLabel');\r\n    var valueAnimation_1 = endLabelModel_1.get('valueAnimation');\r\n    var data_1 = seriesModel.getData();\r\n    var labelAnimationRecord_1 = {\r\n      lastFrameIndex: 0\r\n    };\r\n    var during = anyStateShowEndLabel(seriesModel) ? function (percent, clipRect) {\r\n      lineView._endLabelOnDuring(percent, clipRect, data_1, labelAnimationRecord_1, valueAnimation_1, endLabelModel_1, coordSys);\r\n    } : null;\r\n    var isHorizontal = coordSys.getBaseAxis().isHorizontal();\r\n    var clipPath = createGridClipPath(coordSys, hasAnimation, seriesModel, function () {\r\n      var endLabel = lineView._endLabel;\r\n\r\n      if (endLabel && hasAnimation) {\r\n        if (labelAnimationRecord_1.originalX != null) {\r\n          endLabel.attr({\r\n            x: labelAnimationRecord_1.originalX,\r\n            y: labelAnimationRecord_1.originalY\r\n          });\r\n        }\r\n      }\r\n    }, during); // Expand clip shape to avoid clipping when line value exceeds axis\r\n\r\n    if (!seriesModel.get('clip', true)) {\r\n      var rectShape = clipPath.shape;\r\n      var expandSize = Math.max(rectShape.width, rectShape.height);\r\n\r\n      if (isHorizontal) {\r\n        rectShape.y -= expandSize;\r\n        rectShape.height += expandSize * 2;\r\n      } else {\r\n        rectShape.x -= expandSize;\r\n        rectShape.width += expandSize * 2;\r\n      }\r\n    } // Set to the final frame. To make sure label layout is right.\r\n\r\n\r\n    if (during) {\r\n      during(1, clipPath);\r\n    }\r\n\r\n    return clipPath;\r\n  } else {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      if (seriesModel.get(['endLabel', 'show'])) {\r\n        console.warn('endLabel is not supported for lines in polar systems.');\r\n      }\r\n    }\r\n\r\n    return createPolarClipPath(coordSys, hasAnimation, seriesModel);\r\n  }\r\n}\r\n\r\nfunction getEndLabelStateSpecified(endLabelModel, coordSys) {\r\n  var baseAxis = coordSys.getBaseAxis();\r\n  var isHorizontal = baseAxis.isHorizontal();\r\n  var isBaseInversed = baseAxis.inverse;\r\n  var align = isHorizontal ? isBaseInversed ? 'right' : 'left' : 'center';\r\n  var verticalAlign = isHorizontal ? 'middle' : isBaseInversed ? 'top' : 'bottom';\r\n  return {\r\n    normal: {\r\n      align: endLabelModel.get('align') || align,\r\n      verticalAlign: endLabelModel.get('verticalAlign') || verticalAlign\r\n    }\r\n  };\r\n}\r\n\r\nvar LineView =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(LineView, _super);\r\n\r\n  function LineView() {\r\n    return _super !== null && _super.apply(this, arguments) || this;\r\n  }\r\n\r\n  LineView.prototype.init = function () {\r\n    var lineGroup = new graphic.Group();\r\n    var symbolDraw = new SymbolDraw();\r\n    this.group.add(symbolDraw.group);\r\n    this._symbolDraw = symbolDraw;\r\n    this._lineGroup = lineGroup;\r\n  };\r\n\r\n  LineView.prototype.render = function (seriesModel, ecModel, api) {\r\n    var _this = this;\r\n\r\n    var coordSys = seriesModel.coordinateSystem;\r\n    var group = this.group;\r\n    var data = seriesModel.getData();\r\n    var lineStyleModel = seriesModel.getModel('lineStyle');\r\n    var areaStyleModel = seriesModel.getModel('areaStyle');\r\n    var points = data.getLayout('points') || [];\r\n    var isCoordSysPolar = coordSys.type === 'polar';\r\n    var prevCoordSys = this._coordSys;\r\n    var symbolDraw = this._symbolDraw;\r\n    var polyline = this._polyline;\r\n    var polygon = this._polygon;\r\n    var lineGroup = this._lineGroup;\r\n    var hasAnimation = !ecModel.ssr && seriesModel.isAnimationEnabled();\r\n    var isAreaChart = !areaStyleModel.isEmpty();\r\n    var valueOrigin = areaStyleModel.get('origin');\r\n    var dataCoordInfo = prepareDataCoordInfo(coordSys, data, valueOrigin);\r\n    var stackedOnPoints = isAreaChart && getStackedOnPoints(coordSys, data, dataCoordInfo);\r\n    var showSymbol = seriesModel.get('showSymbol');\r\n    var connectNulls = seriesModel.get('connectNulls');\r\n    var isIgnoreFunc = showSymbol && !isCoordSysPolar && getIsIgnoreFunc(seriesModel, data, coordSys); // Remove temporary symbols\r\n\r\n    var oldData = this._data;\r\n    oldData && oldData.eachItemGraphicEl(function (el, idx) {\r\n      if (el.__temp) {\r\n        group.remove(el);\r\n        oldData.setItemGraphicEl(idx, null);\r\n      }\r\n    }); // Remove previous created symbols if showSymbol changed to false\r\n\r\n    if (!showSymbol) {\r\n      symbolDraw.remove();\r\n    }\r\n\r\n    group.add(lineGroup); // FIXME step not support polar\r\n\r\n    var step = !isCoordSysPolar ? seriesModel.get('step') : false;\r\n    var clipShapeForSymbol;\r\n\r\n    if (coordSys && coordSys.getArea && seriesModel.get('clip', true)) {\r\n      clipShapeForSymbol = coordSys.getArea(); // Avoid float number rounding error for symbol on the edge of axis extent.\r\n      // See #7913 and `test/dataZoom-clip.html`.\r\n\r\n      if (clipShapeForSymbol.width != null) {\r\n        clipShapeForSymbol.x -= 0.1;\r\n        clipShapeForSymbol.y -= 0.1;\r\n        clipShapeForSymbol.width += 0.2;\r\n        clipShapeForSymbol.height += 0.2;\r\n      } else if (clipShapeForSymbol.r0) {\r\n        clipShapeForSymbol.r0 -= 0.5;\r\n        clipShapeForSymbol.r += 0.5;\r\n      }\r\n    }\r\n\r\n    this._clipShapeForSymbol = clipShapeForSymbol;\r\n    var visualColor = getVisualGradient(data, coordSys, api) || data.getVisual('style')[data.getVisual('drawType')]; // Initialization animation or coordinate system changed\r\n\r\n    if (!(polyline && prevCoordSys.type === coordSys.type && step === this._step)) {\r\n      showSymbol && symbolDraw.updateData(data, {\r\n        isIgnore: isIgnoreFunc,\r\n        clipShape: clipShapeForSymbol,\r\n        disableAnimation: true,\r\n        getSymbolPoint: function (idx) {\r\n          return [points[idx * 2], points[idx * 2 + 1]];\r\n        }\r\n      });\r\n      hasAnimation && this._initSymbolLabelAnimation(data, coordSys, clipShapeForSymbol);\r\n\r\n      if (step) {\r\n        // TODO If stacked series is not step\r\n        points = turnPointsIntoStep(points, coordSys, step, connectNulls);\r\n\r\n        if (stackedOnPoints) {\r\n          stackedOnPoints = turnPointsIntoStep(stackedOnPoints, coordSys, step, connectNulls);\r\n        }\r\n      }\r\n\r\n      polyline = this._newPolyline(points);\r\n\r\n      if (isAreaChart) {\r\n        polygon = this._newPolygon(points, stackedOnPoints);\r\n      } // If areaStyle is removed\r\n      else if (polygon) {\r\n          lineGroup.remove(polygon);\r\n          polygon = this._polygon = null;\r\n        } // NOTE: Must update _endLabel before setClipPath.\r\n\r\n\r\n      if (!isCoordSysPolar) {\r\n        this._initOrUpdateEndLabel(seriesModel, coordSys, convertToColorString(visualColor));\r\n      }\r\n\r\n      lineGroup.setClipPath(createLineClipPath(this, coordSys, true, seriesModel));\r\n    } else {\r\n      if (isAreaChart && !polygon) {\r\n        // If areaStyle is added\r\n        polygon = this._newPolygon(points, stackedOnPoints);\r\n      } else if (polygon && !isAreaChart) {\r\n        // If areaStyle is removed\r\n        lineGroup.remove(polygon);\r\n        polygon = this._polygon = null;\r\n      } // NOTE: Must update _endLabel before setClipPath.\r\n\r\n\r\n      if (!isCoordSysPolar) {\r\n        this._initOrUpdateEndLabel(seriesModel, coordSys, convertToColorString(visualColor));\r\n      } // Update clipPath\r\n\r\n\r\n      var oldClipPath = lineGroup.getClipPath();\r\n\r\n      if (oldClipPath) {\r\n        var newClipPath = createLineClipPath(this, coordSys, false, seriesModel);\r\n        graphic.initProps(oldClipPath, {\r\n          shape: newClipPath.shape\r\n        }, seriesModel);\r\n      } else {\r\n        lineGroup.setClipPath(createLineClipPath(this, coordSys, true, seriesModel));\r\n      } // Always update, or it is wrong in the case turning on legend\r\n      // because points are not changed.\r\n\r\n\r\n      showSymbol && symbolDraw.updateData(data, {\r\n        isIgnore: isIgnoreFunc,\r\n        clipShape: clipShapeForSymbol,\r\n        disableAnimation: true,\r\n        getSymbolPoint: function (idx) {\r\n          return [points[idx * 2], points[idx * 2 + 1]];\r\n        }\r\n      }); // In the case data zoom triggered refreshing frequently\r\n      // Data may not change if line has a category axis. So it should animate nothing.\r\n\r\n      if (!isPointsSame(this._stackedOnPoints, stackedOnPoints) || !isPointsSame(this._points, points)) {\r\n        if (hasAnimation) {\r\n          this._doUpdateAnimation(data, stackedOnPoints, coordSys, api, step, valueOrigin, connectNulls);\r\n        } else {\r\n          // Not do it in update with animation\r\n          if (step) {\r\n            // TODO If stacked series is not step\r\n            points = turnPointsIntoStep(points, coordSys, step, connectNulls);\r\n\r\n            if (stackedOnPoints) {\r\n              stackedOnPoints = turnPointsIntoStep(stackedOnPoints, coordSys, step, connectNulls);\r\n            }\r\n          }\r\n\r\n          polyline.setShape({\r\n            points: points\r\n          });\r\n          polygon && polygon.setShape({\r\n            points: points,\r\n            stackedOnPoints: stackedOnPoints\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    var emphasisModel = seriesModel.getModel('emphasis');\r\n    var focus = emphasisModel.get('focus');\r\n    var blurScope = emphasisModel.get('blurScope');\r\n    var emphasisDisabled = emphasisModel.get('disabled');\r\n    polyline.useStyle(zrUtil.defaults( // Use color in lineStyle first\r\n    lineStyleModel.getLineStyle(), {\r\n      fill: 'none',\r\n      stroke: visualColor,\r\n      lineJoin: 'bevel'\r\n    }));\r\n    setStatesStylesFromModel(polyline, seriesModel, 'lineStyle');\r\n\r\n    if (polyline.style.lineWidth > 0 && seriesModel.get(['emphasis', 'lineStyle', 'width']) === 'bolder') {\r\n      var emphasisLineStyle = polyline.getState('emphasis').style;\r\n      emphasisLineStyle.lineWidth = +polyline.style.lineWidth + 1;\r\n    } // Needs seriesIndex for focus\r\n\r\n\r\n    getECData(polyline).seriesIndex = seriesModel.seriesIndex;\r\n    toggleHoverEmphasis(polyline, focus, blurScope, emphasisDisabled);\r\n    var smooth = getSmooth(seriesModel.get('smooth'));\r\n    var smoothMonotone = seriesModel.get('smoothMonotone');\r\n    polyline.setShape({\r\n      smooth: smooth,\r\n      smoothMonotone: smoothMonotone,\r\n      connectNulls: connectNulls\r\n    });\r\n\r\n    if (polygon) {\r\n      var stackedOnSeries = data.getCalculationInfo('stackedOnSeries');\r\n      var stackedOnSmooth = 0;\r\n      polygon.useStyle(zrUtil.defaults(areaStyleModel.getAreaStyle(), {\r\n        fill: visualColor,\r\n        opacity: 0.7,\r\n        lineJoin: 'bevel',\r\n        decal: data.getVisual('style').decal\r\n      }));\r\n\r\n      if (stackedOnSeries) {\r\n        stackedOnSmooth = getSmooth(stackedOnSeries.get('smooth'));\r\n      }\r\n\r\n      polygon.setShape({\r\n        smooth: smooth,\r\n        stackedOnSmooth: stackedOnSmooth,\r\n        smoothMonotone: smoothMonotone,\r\n        connectNulls: connectNulls\r\n      });\r\n      setStatesStylesFromModel(polygon, seriesModel, 'areaStyle'); // Needs seriesIndex for focus\r\n\r\n      getECData(polygon).seriesIndex = seriesModel.seriesIndex;\r\n      toggleHoverEmphasis(polygon, focus, blurScope, emphasisDisabled);\r\n    }\r\n\r\n    var changePolyState = function (toState) {\r\n      _this._changePolyState(toState);\r\n    };\r\n\r\n    data.eachItemGraphicEl(function (el) {\r\n      // Switch polyline / polygon state if element changed its state.\r\n      el && (el.onHoverStateChange = changePolyState);\r\n    });\r\n    this._polyline.onHoverStateChange = changePolyState;\r\n    this._data = data; // Save the coordinate system for transition animation when data changed\r\n\r\n    this._coordSys = coordSys;\r\n    this._stackedOnPoints = stackedOnPoints;\r\n    this._points = points;\r\n    this._step = step;\r\n    this._valueOrigin = valueOrigin;\r\n\r\n    if (seriesModel.get('triggerLineEvent')) {\r\n      this.packEventData(seriesModel, polyline);\r\n      polygon && this.packEventData(seriesModel, polygon);\r\n    }\r\n  };\r\n\r\n  LineView.prototype.packEventData = function (seriesModel, el) {\r\n    getECData(el).eventData = {\r\n      componentType: 'series',\r\n      componentSubType: 'line',\r\n      componentIndex: seriesModel.componentIndex,\r\n      seriesIndex: seriesModel.seriesIndex,\r\n      seriesName: seriesModel.name,\r\n      seriesType: 'line'\r\n    };\r\n  };\r\n\r\n  LineView.prototype.highlight = function (seriesModel, ecModel, api, payload) {\r\n    var data = seriesModel.getData();\r\n    var dataIndex = modelUtil.queryDataIndex(data, payload);\r\n\r\n    this._changePolyState('emphasis');\r\n\r\n    if (!(dataIndex instanceof Array) && dataIndex != null && dataIndex >= 0) {\r\n      var points = data.getLayout('points');\r\n      var symbol = data.getItemGraphicEl(dataIndex);\r\n\r\n      if (!symbol) {\r\n        // Create a temporary symbol if it is not exists\r\n        var x = points[dataIndex * 2];\r\n        var y = points[dataIndex * 2 + 1];\r\n\r\n        if (isNaN(x) || isNaN(y)) {\r\n          // Null data\r\n          return;\r\n        } // fix #11360: shouldn't draw symbol outside clipShapeForSymbol\r\n\r\n\r\n        if (this._clipShapeForSymbol && !this._clipShapeForSymbol.contain(x, y)) {\r\n          return;\r\n        }\r\n\r\n        var zlevel = seriesModel.get('zlevel') || 0;\r\n        var z = seriesModel.get('z') || 0;\r\n        symbol = new SymbolClz(data, dataIndex);\r\n        symbol.x = x;\r\n        symbol.y = y;\r\n        symbol.setZ(zlevel, z); // ensure label text of the temporary symbol is in front of line and area polygon\r\n\r\n        var symbolLabel = symbol.getSymbolPath().getTextContent();\r\n\r\n        if (symbolLabel) {\r\n          symbolLabel.zlevel = zlevel;\r\n          symbolLabel.z = z;\r\n          symbolLabel.z2 = this._polyline.z2 + 1;\r\n        }\r\n\r\n        symbol.__temp = true;\r\n        data.setItemGraphicEl(dataIndex, symbol); // Stop scale animation\r\n\r\n        symbol.stopSymbolAnimation(true);\r\n        this.group.add(symbol);\r\n      }\r\n\r\n      symbol.highlight();\r\n    } else {\r\n      // Highlight whole series\r\n      ChartView.prototype.highlight.call(this, seriesModel, ecModel, api, payload);\r\n    }\r\n  };\r\n\r\n  LineView.prototype.downplay = function (seriesModel, ecModel, api, payload) {\r\n    var data = seriesModel.getData();\r\n    var dataIndex = modelUtil.queryDataIndex(data, payload);\r\n\r\n    this._changePolyState('normal');\r\n\r\n    if (dataIndex != null && dataIndex >= 0) {\r\n      var symbol = data.getItemGraphicEl(dataIndex);\r\n\r\n      if (symbol) {\r\n        if (symbol.__temp) {\r\n          data.setItemGraphicEl(dataIndex, null);\r\n          this.group.remove(symbol);\r\n        } else {\r\n          symbol.downplay();\r\n        }\r\n      }\r\n    } else {\r\n      // FIXME\r\n      // can not downplay completely.\r\n      // Downplay whole series\r\n      ChartView.prototype.downplay.call(this, seriesModel, ecModel, api, payload);\r\n    }\r\n  };\r\n\r\n  LineView.prototype._changePolyState = function (toState) {\r\n    var polygon = this._polygon;\r\n    setStatesFlag(this._polyline, toState);\r\n    polygon && setStatesFlag(polygon, toState);\r\n  };\r\n\r\n  LineView.prototype._newPolyline = function (points) {\r\n    var polyline = this._polyline; // Remove previous created polyline\r\n\r\n    if (polyline) {\r\n      this._lineGroup.remove(polyline);\r\n    }\r\n\r\n    polyline = new ECPolyline({\r\n      shape: {\r\n        points: points\r\n      },\r\n      segmentIgnoreThreshold: 2,\r\n      z2: 10\r\n    });\r\n\r\n    this._lineGroup.add(polyline);\r\n\r\n    this._polyline = polyline;\r\n    return polyline;\r\n  };\r\n\r\n  LineView.prototype._newPolygon = function (points, stackedOnPoints) {\r\n    var polygon = this._polygon; // Remove previous created polygon\r\n\r\n    if (polygon) {\r\n      this._lineGroup.remove(polygon);\r\n    }\r\n\r\n    polygon = new ECPolygon({\r\n      shape: {\r\n        points: points,\r\n        stackedOnPoints: stackedOnPoints\r\n      },\r\n      segmentIgnoreThreshold: 2\r\n    });\r\n\r\n    this._lineGroup.add(polygon);\r\n\r\n    this._polygon = polygon;\r\n    return polygon;\r\n  };\r\n\r\n  LineView.prototype._initSymbolLabelAnimation = function (data, coordSys, clipShape) {\r\n    var isHorizontalOrRadial;\r\n    var isCoordSysPolar;\r\n    var baseAxis = coordSys.getBaseAxis();\r\n    var isAxisInverse = baseAxis.inverse;\r\n\r\n    if (coordSys.type === 'cartesian2d') {\r\n      isHorizontalOrRadial = baseAxis.isHorizontal();\r\n      isCoordSysPolar = false;\r\n    } else if (coordSys.type === 'polar') {\r\n      isHorizontalOrRadial = baseAxis.dim === 'angle';\r\n      isCoordSysPolar = true;\r\n    }\r\n\r\n    var seriesModel = data.hostModel;\r\n    var seriesDuration = seriesModel.get('animationDuration');\r\n\r\n    if (zrUtil.isFunction(seriesDuration)) {\r\n      seriesDuration = seriesDuration(null);\r\n    }\r\n\r\n    var seriesDelay = seriesModel.get('animationDelay') || 0;\r\n    var seriesDelayValue = zrUtil.isFunction(seriesDelay) ? seriesDelay(null) : seriesDelay;\r\n    data.eachItemGraphicEl(function (symbol, idx) {\r\n      var el = symbol;\r\n\r\n      if (el) {\r\n        var point = [symbol.x, symbol.y];\r\n        var start = void 0;\r\n        var end = void 0;\r\n        var current = void 0;\r\n\r\n        if (clipShape) {\r\n          if (isCoordSysPolar) {\r\n            var polarClip = clipShape;\r\n            var coord = coordSys.pointToCoord(point);\r\n\r\n            if (isHorizontalOrRadial) {\r\n              start = polarClip.startAngle;\r\n              end = polarClip.endAngle;\r\n              current = -coord[1] / 180 * Math.PI;\r\n            } else {\r\n              start = polarClip.r0;\r\n              end = polarClip.r;\r\n              current = coord[0];\r\n            }\r\n          } else {\r\n            var gridClip = clipShape;\r\n\r\n            if (isHorizontalOrRadial) {\r\n              start = gridClip.x;\r\n              end = gridClip.x + gridClip.width;\r\n              current = symbol.x;\r\n            } else {\r\n              start = gridClip.y + gridClip.height;\r\n              end = gridClip.y;\r\n              current = symbol.y;\r\n            }\r\n          }\r\n        }\r\n\r\n        var ratio = end === start ? 0 : (current - start) / (end - start);\r\n\r\n        if (isAxisInverse) {\r\n          ratio = 1 - ratio;\r\n        }\r\n\r\n        var delay = zrUtil.isFunction(seriesDelay) ? seriesDelay(idx) : seriesDuration * ratio + seriesDelayValue;\r\n        var symbolPath = el.getSymbolPath();\r\n        var text = symbolPath.getTextContent();\r\n        el.attr({\r\n          scaleX: 0,\r\n          scaleY: 0\r\n        });\r\n        el.animateTo({\r\n          scaleX: 1,\r\n          scaleY: 1\r\n        }, {\r\n          duration: 200,\r\n          setToFinal: true,\r\n          delay: delay\r\n        });\r\n\r\n        if (text) {\r\n          text.animateFrom({\r\n            style: {\r\n              opacity: 0\r\n            }\r\n          }, {\r\n            duration: 300,\r\n            delay: delay\r\n          });\r\n        }\r\n\r\n        symbolPath.disableLabelAnimation = true;\r\n      }\r\n    });\r\n  };\r\n\r\n  LineView.prototype._initOrUpdateEndLabel = function (seriesModel, coordSys, inheritColor) {\r\n    var endLabelModel = seriesModel.getModel('endLabel');\r\n\r\n    if (anyStateShowEndLabel(seriesModel)) {\r\n      var data_2 = seriesModel.getData();\r\n      var polyline = this._polyline; // series may be filtered.\r\n\r\n      var points = data_2.getLayout('points');\r\n\r\n      if (!points) {\r\n        polyline.removeTextContent();\r\n        this._endLabel = null;\r\n        return;\r\n      }\r\n\r\n      var endLabel = this._endLabel;\r\n\r\n      if (!endLabel) {\r\n        endLabel = this._endLabel = new graphic.Text({\r\n          z2: 200 // should be higher than item symbol\r\n\r\n        });\r\n        endLabel.ignoreClip = true;\r\n        polyline.setTextContent(this._endLabel);\r\n        polyline.disableLabelAnimation = true;\r\n      } // Find last non-NaN data to display data\r\n\r\n\r\n      var dataIndex = getLastIndexNotNull(points);\r\n\r\n      if (dataIndex >= 0) {\r\n        setLabelStyle(polyline, getLabelStatesModels(seriesModel, 'endLabel'), {\r\n          inheritColor: inheritColor,\r\n          labelFetcher: seriesModel,\r\n          labelDataIndex: dataIndex,\r\n          defaultText: function (dataIndex, opt, interpolatedValue) {\r\n            return interpolatedValue != null ? getDefaultInterpolatedLabel(data_2, interpolatedValue) : getDefaultLabel(data_2, dataIndex);\r\n          },\r\n          enableTextSetter: true\r\n        }, getEndLabelStateSpecified(endLabelModel, coordSys));\r\n        polyline.textConfig.position = null;\r\n      }\r\n    } else if (this._endLabel) {\r\n      this._polyline.removeTextContent();\r\n\r\n      this._endLabel = null;\r\n    }\r\n  };\r\n\r\n  LineView.prototype._endLabelOnDuring = function (percent, clipRect, data, animationRecord, valueAnimation, endLabelModel, coordSys) {\r\n    var endLabel = this._endLabel;\r\n    var polyline = this._polyline;\r\n\r\n    if (endLabel) {\r\n      // NOTE: Don't remove percent < 1. percent === 1 means the first frame during render.\r\n      // The label is not prepared at this time.\r\n      if (percent < 1 && animationRecord.originalX == null) {\r\n        animationRecord.originalX = endLabel.x;\r\n        animationRecord.originalY = endLabel.y;\r\n      }\r\n\r\n      var points = data.getLayout('points');\r\n      var seriesModel = data.hostModel;\r\n      var connectNulls = seriesModel.get('connectNulls');\r\n      var precision = endLabelModel.get('precision');\r\n      var distance = endLabelModel.get('distance') || 0;\r\n      var baseAxis = coordSys.getBaseAxis();\r\n      var isHorizontal = baseAxis.isHorizontal();\r\n      var isBaseInversed = baseAxis.inverse;\r\n      var clipShape = clipRect.shape;\r\n      var xOrY = isBaseInversed ? isHorizontal ? clipShape.x : clipShape.y + clipShape.height : isHorizontal ? clipShape.x + clipShape.width : clipShape.y;\r\n      var distanceX = (isHorizontal ? distance : 0) * (isBaseInversed ? -1 : 1);\r\n      var distanceY = (isHorizontal ? 0 : -distance) * (isBaseInversed ? -1 : 1);\r\n      var dim = isHorizontal ? 'x' : 'y';\r\n      var dataIndexRange = getIndexRange(points, xOrY, dim);\r\n      var indices = dataIndexRange.range;\r\n      var diff = indices[1] - indices[0];\r\n      var value = void 0;\r\n\r\n      if (diff >= 1) {\r\n        // diff > 1 && connectNulls, which is on the null data.\r\n        if (diff > 1 && !connectNulls) {\r\n          var pt = getPointAtIndex(points, indices[0]);\r\n          endLabel.attr({\r\n            x: pt[0] + distanceX,\r\n            y: pt[1] + distanceY\r\n          });\r\n          valueAnimation && (value = seriesModel.getRawValue(indices[0]));\r\n        } else {\r\n          var pt = polyline.getPointOn(xOrY, dim);\r\n          pt && endLabel.attr({\r\n            x: pt[0] + distanceX,\r\n            y: pt[1] + distanceY\r\n          });\r\n          var startValue = seriesModel.getRawValue(indices[0]);\r\n          var endValue = seriesModel.getRawValue(indices[1]);\r\n          valueAnimation && (value = modelUtil.interpolateRawValues(data, precision, startValue, endValue, dataIndexRange.t));\r\n        }\r\n\r\n        animationRecord.lastFrameIndex = indices[0];\r\n      } else {\r\n        // If diff <= 0, which is the range is not found(Include NaN)\r\n        // Choose the first point or last point.\r\n        var idx = percent === 1 || animationRecord.lastFrameIndex > 0 ? indices[0] : 0;\r\n        var pt = getPointAtIndex(points, idx);\r\n        valueAnimation && (value = seriesModel.getRawValue(idx));\r\n        endLabel.attr({\r\n          x: pt[0] + distanceX,\r\n          y: pt[1] + distanceY\r\n        });\r\n      }\r\n\r\n      if (valueAnimation) {\r\n        labelInner(endLabel).setLabelText(value);\r\n      }\r\n    }\r\n  };\r\n  /**\r\n   * @private\r\n   */\r\n  // FIXME Two value axis\r\n\r\n\r\n  LineView.prototype._doUpdateAnimation = function (data, stackedOnPoints, coordSys, api, step, valueOrigin, connectNulls) {\r\n    var polyline = this._polyline;\r\n    var polygon = this._polygon;\r\n    var seriesModel = data.hostModel;\r\n    var diff = lineAnimationDiff(this._data, data, this._stackedOnPoints, stackedOnPoints, this._coordSys, coordSys, this._valueOrigin, valueOrigin);\r\n    var current = diff.current;\r\n    var stackedOnCurrent = diff.stackedOnCurrent;\r\n    var next = diff.next;\r\n    var stackedOnNext = diff.stackedOnNext;\r\n\r\n    if (step) {\r\n      // TODO If stacked series is not step\r\n      current = turnPointsIntoStep(diff.current, coordSys, step, connectNulls);\r\n      stackedOnCurrent = turnPointsIntoStep(diff.stackedOnCurrent, coordSys, step, connectNulls);\r\n      next = turnPointsIntoStep(diff.next, coordSys, step, connectNulls);\r\n      stackedOnNext = turnPointsIntoStep(diff.stackedOnNext, coordSys, step, connectNulls);\r\n    } // Don't apply animation if diff is large.\r\n    // For better result and avoid memory explosion problems like\r\n    // https://github.com/apache/incubator-echarts/issues/12229\r\n\r\n\r\n    if (getBoundingDiff(current, next) > 3000 || polygon && getBoundingDiff(stackedOnCurrent, stackedOnNext) > 3000) {\r\n      polyline.stopAnimation();\r\n      polyline.setShape({\r\n        points: next\r\n      });\r\n\r\n      if (polygon) {\r\n        polygon.stopAnimation();\r\n        polygon.setShape({\r\n          points: next,\r\n          stackedOnPoints: stackedOnNext\r\n        });\r\n      }\r\n\r\n      return;\r\n    }\r\n\r\n    polyline.shape.__points = diff.current;\r\n    polyline.shape.points = current;\r\n    var target = {\r\n      shape: {\r\n        points: next\r\n      }\r\n    }; // Also animate the original points.\r\n    // If points reference is changed when turning into step line.\r\n\r\n    if (diff.current !== current) {\r\n      target.shape.__points = diff.next;\r\n    } // Stop previous animation.\r\n\r\n\r\n    polyline.stopAnimation();\r\n    graphic.updateProps(polyline, target, seriesModel);\r\n\r\n    if (polygon) {\r\n      polygon.setShape({\r\n        // Reuse the points with polyline.\r\n        points: current,\r\n        stackedOnPoints: stackedOnCurrent\r\n      });\r\n      polygon.stopAnimation();\r\n      graphic.updateProps(polygon, {\r\n        shape: {\r\n          stackedOnPoints: stackedOnNext\r\n        }\r\n      }, seriesModel); // If use attr directly in updateProps.\r\n\r\n      if (polyline.shape.points !== polygon.shape.points) {\r\n        polygon.shape.points = polyline.shape.points;\r\n      }\r\n    }\r\n\r\n    var updatedDataInfo = [];\r\n    var diffStatus = diff.status;\r\n\r\n    for (var i = 0; i < diffStatus.length; i++) {\r\n      var cmd = diffStatus[i].cmd;\r\n\r\n      if (cmd === '=') {\r\n        var el = data.getItemGraphicEl(diffStatus[i].idx1);\r\n\r\n        if (el) {\r\n          updatedDataInfo.push({\r\n            el: el,\r\n            ptIdx: i // Index of points\r\n\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    if (polyline.animators && polyline.animators.length) {\r\n      polyline.animators[0].during(function () {\r\n        polygon && polygon.dirtyShape();\r\n        var points = polyline.shape.__points;\r\n\r\n        for (var i = 0; i < updatedDataInfo.length; i++) {\r\n          var el = updatedDataInfo[i].el;\r\n          var offset = updatedDataInfo[i].ptIdx * 2;\r\n          el.x = points[offset];\r\n          el.y = points[offset + 1];\r\n          el.markRedraw();\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  LineView.prototype.remove = function (ecModel) {\r\n    var group = this.group;\r\n    var oldData = this._data;\r\n\r\n    this._lineGroup.removeAll();\r\n\r\n    this._symbolDraw.remove(true); // Remove temporary created elements when highlighting\r\n\r\n\r\n    oldData && oldData.eachItemGraphicEl(function (el, idx) {\r\n      if (el.__temp) {\r\n        group.remove(el);\r\n        oldData.setItemGraphicEl(idx, null);\r\n      }\r\n    });\r\n    this._polyline = this._polygon = this._coordSys = this._points = this._stackedOnPoints = this._endLabel = this._data = null;\r\n  };\r\n\r\n  LineView.type = 'line';\r\n  return LineView;\r\n}(ChartView);\r\n\r\nexport default LineView;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { map } from 'zrender/lib/core/util.js';\r\nimport createRenderPlanner from '../chart/helper/createRenderPlanner.js';\r\nimport { isDimensionStacked } from '../data/helper/dataStackHelper.js';\r\nimport { createFloat32Array } from '../util/vendor.js';\r\nexport default function pointsLayout(seriesType, forceStoreInTypedArray) {\r\n  return {\r\n    seriesType: seriesType,\r\n    plan: createRenderPlanner(),\r\n    reset: function (seriesModel) {\r\n      var data = seriesModel.getData();\r\n      var coordSys = seriesModel.coordinateSystem;\r\n      var pipelineContext = seriesModel.pipelineContext;\r\n      var useTypedArray = forceStoreInTypedArray || pipelineContext.large;\r\n\r\n      if (!coordSys) {\r\n        return;\r\n      }\r\n\r\n      var dims = map(coordSys.dimensions, function (dim) {\r\n        return data.mapDimension(dim);\r\n      }).slice(0, 2);\r\n      var dimLen = dims.length;\r\n      var stackResultDim = data.getCalculationInfo('stackResultDimension');\r\n\r\n      if (isDimensionStacked(data, dims[0])) {\r\n        dims[0] = stackResultDim;\r\n      }\r\n\r\n      if (isDimensionStacked(data, dims[1])) {\r\n        dims[1] = stackResultDim;\r\n      }\r\n\r\n      var store = data.getStore();\r\n      var dimIdx0 = data.getDimensionIndex(dims[0]);\r\n      var dimIdx1 = data.getDimensionIndex(dims[1]);\r\n      return dimLen && {\r\n        progress: function (params, data) {\r\n          var segCount = params.end - params.start;\r\n          var points = useTypedArray && createFloat32Array(segCount * dimLen);\r\n          var tmpIn = [];\r\n          var tmpOut = [];\r\n\r\n          for (var i = params.start, offset = 0; i < params.end; i++) {\r\n            var point = void 0;\r\n\r\n            if (dimLen === 1) {\r\n              var x = store.get(dimIdx0, i); // NOTE: Make sure the second parameter is null to use default strategy.\r\n\r\n              point = coordSys.dataToPoint(x, null, tmpOut);\r\n            } else {\r\n              tmpIn[0] = store.get(dimIdx0, i);\r\n              tmpIn[1] = store.get(dimIdx1, i); // Let coordinate system to handle the NaN data.\r\n\r\n              point = coordSys.dataToPoint(tmpIn, null, tmpOut);\r\n            }\r\n\r\n            if (useTypedArray) {\r\n              points[offset++] = point[0];\r\n              points[offset++] = point[1];\r\n            } else {\r\n              data.setItemLayout(i, point.slice());\r\n            }\r\n          }\r\n\r\n          useTypedArray && data.setLayout('points', points);\r\n        }\r\n      };\r\n    }\r\n  };\r\n}\r\n;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { isFunction, isString } from 'zrender/lib/core/util.js';\r\nvar samplers = {\r\n  average: function (frame) {\r\n    var sum = 0;\r\n    var count = 0;\r\n\r\n    for (var i = 0; i < frame.length; i++) {\r\n      if (!isNaN(frame[i])) {\r\n        sum += frame[i];\r\n        count++;\r\n      }\r\n    } // Return NaN if count is 0\r\n\r\n\r\n    return count === 0 ? NaN : sum / count;\r\n  },\r\n  sum: function (frame) {\r\n    var sum = 0;\r\n\r\n    for (var i = 0; i < frame.length; i++) {\r\n      // Ignore NaN\r\n      sum += frame[i] || 0;\r\n    }\r\n\r\n    return sum;\r\n  },\r\n  max: function (frame) {\r\n    var max = -Infinity;\r\n\r\n    for (var i = 0; i < frame.length; i++) {\r\n      frame[i] > max && (max = frame[i]);\r\n    } // NaN will cause illegal axis extent.\r\n\r\n\r\n    return isFinite(max) ? max : NaN;\r\n  },\r\n  min: function (frame) {\r\n    var min = Infinity;\r\n\r\n    for (var i = 0; i < frame.length; i++) {\r\n      frame[i] < min && (min = frame[i]);\r\n    } // NaN will cause illegal axis extent.\r\n\r\n\r\n    return isFinite(min) ? min : NaN;\r\n  },\r\n  // TODO\r\n  // Median\r\n  nearest: function (frame) {\r\n    return frame[0];\r\n  }\r\n};\r\n\r\nvar indexSampler = function (frame) {\r\n  return Math.round(frame.length / 2);\r\n};\r\n\r\nexport default function dataSample(seriesType) {\r\n  return {\r\n    seriesType: seriesType,\r\n    // FIXME:TS never used, so comment it\r\n    // modifyOutputEnd: true,\r\n    reset: function (seriesModel, ecModel, api) {\r\n      var data = seriesModel.getData();\r\n      var sampling = seriesModel.get('sampling');\r\n      var coordSys = seriesModel.coordinateSystem;\r\n      var count = data.count(); // Only cartesian2d support down sampling. Disable it when there is few data.\r\n\r\n      if (count > 10 && coordSys.type === 'cartesian2d' && sampling) {\r\n        var baseAxis = coordSys.getBaseAxis();\r\n        var valueAxis = coordSys.getOtherAxis(baseAxis);\r\n        var extent = baseAxis.getExtent();\r\n        var dpr = api.getDevicePixelRatio(); // Coordinste system has been resized\r\n\r\n        var size = Math.abs(extent[1] - extent[0]) * (dpr || 1);\r\n        var rate = Math.round(count / size);\r\n\r\n        if (isFinite(rate) && rate > 1) {\r\n          if (sampling === 'lttb') {\r\n            seriesModel.setData(data.lttbDownSample(data.mapDimension(valueAxis.dim), 1 / rate));\r\n          }\r\n\r\n          var sampler = void 0;\r\n\r\n          if (isString(sampling)) {\r\n            sampler = samplers[sampling];\r\n          } else if (isFunction(sampling)) {\r\n            sampler = sampling;\r\n          }\r\n\r\n          if (sampler) {\r\n            // Only support sample the first dim mapped from value axis.\r\n            seriesModel.setData(data.downSample(data.mapDimension(valueAxis.dim), 1 / rate, sampler, indexSampler));\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport LineSeries from './LineSeries.js';\r\nimport LineView from './LineView.js'; // In case developer forget to include grid component\r\n\r\nimport layoutPoints from '../../layout/points.js';\r\nimport dataSample from '../../processor/dataSample.js';\r\nexport function install(registers) {\r\n  registers.registerChartView(LineView);\r\n  registers.registerSeriesModel(LineSeries);\r\n  registers.registerLayout(layoutPoints('line', true));\r\n  registers.registerVisual({\r\n    seriesType: 'line',\r\n    reset: function (seriesModel) {\r\n      var data = seriesModel.getData(); // Visual coding for legend\r\n\r\n      var lineStyle = seriesModel.getModel('lineStyle').getLineStyle();\r\n\r\n      if (lineStyle && !lineStyle.stroke) {\r\n        // Fill in visual should be palette color if\r\n        // has color callback\r\n        lineStyle.stroke = data.getVisual('style').fill;\r\n      }\r\n\r\n      data.setVisual('legendLineStyle', lineStyle);\r\n    }\r\n  }); // Down sample after filter\r\n\r\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, dataSample('line'));\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport SeriesModel from '../../model/Series.js';\r\nimport createSeriesData from '../helper/createSeriesData.js';\r\nimport { each } from 'zrender/lib/core/util.js';\r\n\r\nvar BaseBarSeriesModel =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(BaseBarSeriesModel, _super);\r\n\r\n  function BaseBarSeriesModel() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = BaseBarSeriesModel.type;\r\n    return _this;\r\n  }\r\n\r\n  BaseBarSeriesModel.prototype.getInitialData = function (option, ecModel) {\r\n    return createSeriesData(null, this, {\r\n      useEncodeDefaulter: true\r\n    });\r\n  };\r\n\r\n  BaseBarSeriesModel.prototype.getMarkerPosition = function (value, dims, startingAtTick) {\r\n    var coordSys = this.coordinateSystem;\r\n\r\n    if (coordSys && coordSys.clampData) {\r\n      // PENDING if clamp ?\r\n      var clampData_1 = coordSys.clampData(value);\r\n      var pt_1 = coordSys.dataToPoint(clampData_1);\r\n\r\n      if (startingAtTick) {\r\n        each(coordSys.getAxes(), function (axis, idx) {\r\n          // If axis type is category, use tick coords instead\r\n          if (axis.type === 'category' && dims != null) {\r\n            var tickCoords = axis.getTicksCoords();\r\n            var targetTickId = clampData_1[idx]; // The index of rightmost tick of markArea is 1 larger than x1/y1 index\r\n\r\n            var isEnd = dims[idx] === 'x1' || dims[idx] === 'y1';\r\n\r\n            if (isEnd) {\r\n              targetTickId += 1;\r\n            } // The only contains one tick, tickCoords is\r\n            // like [{coord: 0, tickValue: 0}, {coord: 0}]\r\n            // to the length should always be larger than 1\r\n\r\n\r\n            if (tickCoords.length < 2) {\r\n              return;\r\n            } else if (tickCoords.length === 2) {\r\n              // The left value and right value of the axis are\r\n              // the same. coord is 0 in both items. Use the max\r\n              // value of the axis as the coord\r\n              pt_1[idx] = axis.toGlobalCoord(axis.getExtent()[isEnd ? 1 : 0]);\r\n              return;\r\n            }\r\n\r\n            var leftCoord = void 0;\r\n            var coord = void 0;\r\n            var stepTickValue = 1;\r\n\r\n            for (var i = 0; i < tickCoords.length; i++) {\r\n              var tickCoord = tickCoords[i].coord; // The last item of tickCoords doesn't contain\r\n              // tickValue\r\n\r\n              var tickValue = i === tickCoords.length - 1 ? tickCoords[i - 1].tickValue + stepTickValue : tickCoords[i].tickValue;\r\n\r\n              if (tickValue === targetTickId) {\r\n                coord = tickCoord;\r\n                break;\r\n              } else if (tickValue < targetTickId) {\r\n                leftCoord = tickCoord;\r\n              } else if (leftCoord != null && tickValue > targetTickId) {\r\n                coord = (tickCoord + leftCoord) / 2;\r\n                break;\r\n              }\r\n\r\n              if (i === 1) {\r\n                // Here we assume the step of category axes is\r\n                // the same\r\n                stepTickValue = tickValue - tickCoords[0].tickValue;\r\n              }\r\n            }\r\n\r\n            if (coord == null) {\r\n              if (!leftCoord) {\r\n                // targetTickId is smaller than all tick ids in the\r\n                // visible area, use the leftmost tick coord\r\n                coord = tickCoords[0].coord;\r\n              } else if (leftCoord) {\r\n                // targetTickId is larger than all tick ids in the\r\n                // visible area, use the rightmost tick coord\r\n                coord = tickCoords[tickCoords.length - 1].coord;\r\n              }\r\n            }\r\n\r\n            pt_1[idx] = axis.toGlobalCoord(coord);\r\n          }\r\n        });\r\n      } else {\r\n        var data = this.getData();\r\n        var offset = data.getLayout('offset');\r\n        var size = data.getLayout('size');\r\n        var offsetIndex = coordSys.getBaseAxis().isHorizontal() ? 0 : 1;\r\n        pt_1[offsetIndex] += offset + size / 2;\r\n      }\r\n\r\n      return pt_1;\r\n    }\r\n\r\n    return [NaN, NaN];\r\n  };\r\n\r\n  BaseBarSeriesModel.type = 'series.__base_bar__';\r\n  BaseBarSeriesModel.defaultOption = {\r\n    // zlevel: 0,\r\n    z: 2,\r\n    coordinateSystem: 'cartesian2d',\r\n    legendHoverLink: true,\r\n    // stack: null\r\n    // Cartesian coordinate system\r\n    // xAxisIndex: 0,\r\n    // yAxisIndex: 0,\r\n    barMinHeight: 0,\r\n    barMinAngle: 0,\r\n    // cursor: null,\r\n    large: false,\r\n    largeThreshold: 400,\r\n    progressive: 3e3,\r\n    progressiveChunkMode: 'mod'\r\n  };\r\n  return BaseBarSeriesModel;\r\n}(SeriesModel);\r\n\r\nSeriesModel.registerClass(BaseBarSeriesModel);\r\nexport default BaseBarSeriesModel;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport BaseBarSeriesModel from './BaseBarSeries.js';\r\nimport createSeriesData from '../helper/createSeriesData.js';\r\nimport { inheritDefaultOption } from '../../util/component.js';\r\n\r\nvar BarSeriesModel =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(BarSeriesModel, _super);\r\n\r\n  function BarSeriesModel() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = BarSeriesModel.type;\r\n    return _this;\r\n  }\r\n\r\n  BarSeriesModel.prototype.getInitialData = function () {\r\n    return createSeriesData(null, this, {\r\n      useEncodeDefaulter: true,\r\n      createInvertedIndices: !!this.get('realtimeSort', true) || null\r\n    });\r\n  };\r\n  /**\r\n   * @override\r\n   */\r\n\r\n\r\n  BarSeriesModel.prototype.getProgressive = function () {\r\n    // Do not support progressive in normal mode.\r\n    return this.get('large') ? this.get('progressive') : false;\r\n  };\r\n  /**\r\n   * @override\r\n   */\r\n\r\n\r\n  BarSeriesModel.prototype.getProgressiveThreshold = function () {\r\n    // Do not support progressive in normal mode.\r\n    var progressiveThreshold = this.get('progressiveThreshold');\r\n    var largeThreshold = this.get('largeThreshold');\r\n\r\n    if (largeThreshold > progressiveThreshold) {\r\n      progressiveThreshold = largeThreshold;\r\n    }\r\n\r\n    return progressiveThreshold;\r\n  };\r\n\r\n  BarSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\r\n    return selectors.rect(data.getItemLayout(dataIndex));\r\n  };\r\n\r\n  BarSeriesModel.type = 'series.bar';\r\n  BarSeriesModel.dependencies = ['grid', 'polar'];\r\n  BarSeriesModel.defaultOption = inheritDefaultOption(BaseBarSeriesModel.defaultOption, {\r\n    // If clipped\r\n    // Only available on cartesian2d\r\n    clip: true,\r\n    roundCap: false,\r\n    showBackground: false,\r\n    backgroundStyle: {\r\n      color: 'rgba(180, 180, 180, 0.2)',\r\n      borderColor: null,\r\n      borderWidth: 0,\r\n      borderType: 'solid',\r\n      borderRadius: 0,\r\n      shadowBlur: 0,\r\n      shadowColor: null,\r\n      shadowOffsetX: 0,\r\n      shadowOffsetY: 0,\r\n      opacity: 1\r\n    },\r\n    select: {\r\n      itemStyle: {\r\n        borderColor: '#212121'\r\n      }\r\n    },\r\n    realtimeSort: false\r\n  });\r\n  return BarSeriesModel;\r\n}(BaseBarSeriesModel);\r\n\r\nexport default BarSeriesModel;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport { Path } from '../graphic.js';\r\n/**\r\n * Sausage: similar to sector, but have half circle on both sides\r\n */\r\n\r\nvar SausageShape =\r\n/** @class */\r\nfunction () {\r\n  function SausageShape() {\r\n    this.cx = 0;\r\n    this.cy = 0;\r\n    this.r0 = 0;\r\n    this.r = 0;\r\n    this.startAngle = 0;\r\n    this.endAngle = Math.PI * 2;\r\n    this.clockwise = true;\r\n  }\r\n\r\n  return SausageShape;\r\n}();\r\n\r\nvar SausagePath =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(SausagePath, _super);\r\n\r\n  function SausagePath(opts) {\r\n    var _this = _super.call(this, opts) || this;\r\n\r\n    _this.type = 'sausage';\r\n    return _this;\r\n  }\r\n\r\n  SausagePath.prototype.getDefaultShape = function () {\r\n    return new SausageShape();\r\n  };\r\n\r\n  SausagePath.prototype.buildPath = function (ctx, shape) {\r\n    var cx = shape.cx;\r\n    var cy = shape.cy;\r\n    var r0 = Math.max(shape.r0 || 0, 0);\r\n    var r = Math.max(shape.r, 0);\r\n    var dr = (r - r0) * 0.5;\r\n    var rCenter = r0 + dr;\r\n    var startAngle = shape.startAngle;\r\n    var endAngle = shape.endAngle;\r\n    var clockwise = shape.clockwise;\r\n    var PI2 = Math.PI * 2;\r\n    var lessThanCircle = clockwise ? endAngle - startAngle < PI2 : startAngle - endAngle < PI2;\r\n\r\n    if (!lessThanCircle) {\r\n      // Normalize angles\r\n      startAngle = endAngle - (clockwise ? PI2 : -PI2);\r\n    }\r\n\r\n    var unitStartX = Math.cos(startAngle);\r\n    var unitStartY = Math.sin(startAngle);\r\n    var unitEndX = Math.cos(endAngle);\r\n    var unitEndY = Math.sin(endAngle);\r\n\r\n    if (lessThanCircle) {\r\n      ctx.moveTo(unitStartX * r0 + cx, unitStartY * r0 + cy);\r\n      ctx.arc(unitStartX * rCenter + cx, unitStartY * rCenter + cy, dr, -Math.PI + startAngle, startAngle, !clockwise);\r\n    } else {\r\n      ctx.moveTo(unitStartX * r + cx, unitStartY * r + cy);\r\n    }\r\n\r\n    ctx.arc(cx, cy, r, startAngle, endAngle, !clockwise);\r\n    ctx.arc(unitEndX * rCenter + cx, unitEndY * rCenter + cy, dr, endAngle - Math.PI * 2, endAngle - Math.PI, !clockwise);\r\n\r\n    if (r0 !== 0) {\r\n      ctx.arc(cx, cy, r0, endAngle, startAngle, clockwise);\r\n    } // ctx.closePath();\r\n\r\n  };\r\n\r\n  return SausagePath;\r\n}(Path);\r\n\r\nexport default SausagePath;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { calculateTextPosition } from 'zrender/lib/contain/text.js';\r\nimport { isArray, isNumber } from 'zrender/lib/core/util.js';\r\nexport function createSectorCalculateTextPosition(positionMapping, opts) {\r\n  opts = opts || {};\r\n  var isRoundCap = opts.isRoundCap;\r\n  return function (out, opts, boundingRect) {\r\n    var textPosition = opts.position;\r\n\r\n    if (!textPosition || textPosition instanceof Array) {\r\n      return calculateTextPosition(out, opts, boundingRect);\r\n    }\r\n\r\n    var mappedSectorPosition = positionMapping(textPosition);\r\n    var distance = opts.distance != null ? opts.distance : 5;\r\n    var sector = this.shape;\r\n    var cx = sector.cx;\r\n    var cy = sector.cy;\r\n    var r = sector.r;\r\n    var r0 = sector.r0;\r\n    var middleR = (r + r0) / 2;\r\n    var startAngle = sector.startAngle;\r\n    var endAngle = sector.endAngle;\r\n    var middleAngle = (startAngle + endAngle) / 2;\r\n    var extraDist = isRoundCap ? Math.abs(r - r0) / 2 : 0;\r\n    var mathCos = Math.cos;\r\n    var mathSin = Math.sin; // base position: top-left\r\n\r\n    var x = cx + r * mathCos(startAngle);\r\n    var y = cy + r * mathSin(startAngle);\r\n    var textAlign = 'left';\r\n    var textVerticalAlign = 'top';\r\n\r\n    switch (mappedSectorPosition) {\r\n      case 'startArc':\r\n        x = cx + (r0 - distance) * mathCos(middleAngle);\r\n        y = cy + (r0 - distance) * mathSin(middleAngle);\r\n        textAlign = 'center';\r\n        textVerticalAlign = 'top';\r\n        break;\r\n\r\n      case 'insideStartArc':\r\n        x = cx + (r0 + distance) * mathCos(middleAngle);\r\n        y = cy + (r0 + distance) * mathSin(middleAngle);\r\n        textAlign = 'center';\r\n        textVerticalAlign = 'bottom';\r\n        break;\r\n\r\n      case 'startAngle':\r\n        x = cx + middleR * mathCos(startAngle) + adjustAngleDistanceX(startAngle, distance + extraDist, false);\r\n        y = cy + middleR * mathSin(startAngle) + adjustAngleDistanceY(startAngle, distance + extraDist, false);\r\n        textAlign = 'right';\r\n        textVerticalAlign = 'middle';\r\n        break;\r\n\r\n      case 'insideStartAngle':\r\n        x = cx + middleR * mathCos(startAngle) + adjustAngleDistanceX(startAngle, -distance + extraDist, false);\r\n        y = cy + middleR * mathSin(startAngle) + adjustAngleDistanceY(startAngle, -distance + extraDist, false);\r\n        textAlign = 'left';\r\n        textVerticalAlign = 'middle';\r\n        break;\r\n\r\n      case 'middle':\r\n        x = cx + middleR * mathCos(middleAngle);\r\n        y = cy + middleR * mathSin(middleAngle);\r\n        textAlign = 'center';\r\n        textVerticalAlign = 'middle';\r\n        break;\r\n\r\n      case 'endArc':\r\n        x = cx + (r + distance) * mathCos(middleAngle);\r\n        y = cy + (r + distance) * mathSin(middleAngle);\r\n        textAlign = 'center';\r\n        textVerticalAlign = 'bottom';\r\n        break;\r\n\r\n      case 'insideEndArc':\r\n        x = cx + (r - distance) * mathCos(middleAngle);\r\n        y = cy + (r - distance) * mathSin(middleAngle);\r\n        textAlign = 'center';\r\n        textVerticalAlign = 'top';\r\n        break;\r\n\r\n      case 'endAngle':\r\n        x = cx + middleR * mathCos(endAngle) + adjustAngleDistanceX(endAngle, distance + extraDist, true);\r\n        y = cy + middleR * mathSin(endAngle) + adjustAngleDistanceY(endAngle, distance + extraDist, true);\r\n        textAlign = 'left';\r\n        textVerticalAlign = 'middle';\r\n        break;\r\n\r\n      case 'insideEndAngle':\r\n        x = cx + middleR * mathCos(endAngle) + adjustAngleDistanceX(endAngle, -distance + extraDist, true);\r\n        y = cy + middleR * mathSin(endAngle) + adjustAngleDistanceY(endAngle, -distance + extraDist, true);\r\n        textAlign = 'right';\r\n        textVerticalAlign = 'middle';\r\n        break;\r\n\r\n      default:\r\n        return calculateTextPosition(out, opts, boundingRect);\r\n    }\r\n\r\n    out = out || {};\r\n    out.x = x;\r\n    out.y = y;\r\n    out.align = textAlign;\r\n    out.verticalAlign = textVerticalAlign;\r\n    return out;\r\n  };\r\n}\r\nexport function setSectorTextRotation(sector, textPosition, positionMapping, rotateType) {\r\n  if (isNumber(rotateType)) {\r\n    // user-set rotation\r\n    sector.setTextConfig({\r\n      rotation: rotateType\r\n    });\r\n    return;\r\n  } else if (isArray(textPosition)) {\r\n    // user-set position, use 0 as auto rotation\r\n    sector.setTextConfig({\r\n      rotation: 0\r\n    });\r\n    return;\r\n  }\r\n\r\n  var shape = sector.shape;\r\n  var startAngle = shape.clockwise ? shape.startAngle : shape.endAngle;\r\n  var endAngle = shape.clockwise ? shape.endAngle : shape.startAngle;\r\n  var middleAngle = (startAngle + endAngle) / 2;\r\n  var anchorAngle;\r\n  var mappedSectorPosition = positionMapping(textPosition);\r\n\r\n  switch (mappedSectorPosition) {\r\n    case 'startArc':\r\n    case 'insideStartArc':\r\n    case 'middle':\r\n    case 'insideEndArc':\r\n    case 'endArc':\r\n      anchorAngle = middleAngle;\r\n      break;\r\n\r\n    case 'startAngle':\r\n    case 'insideStartAngle':\r\n      anchorAngle = startAngle;\r\n      break;\r\n\r\n    case 'endAngle':\r\n    case 'insideEndAngle':\r\n      anchorAngle = endAngle;\r\n      break;\r\n\r\n    default:\r\n      sector.setTextConfig({\r\n        rotation: 0\r\n      });\r\n      return;\r\n  }\r\n\r\n  var rotate = Math.PI * 1.5 - anchorAngle;\r\n  /**\r\n   * TODO: labels with rotate > Math.PI / 2 should be rotate another\r\n   * half round flipped to increase readability. However, only middle\r\n   * position supports this for now, because in other positions, the\r\n   * anchor point is not at the center of the text, so the positions\r\n   * after rotating is not as expected.\r\n   */\r\n\r\n  if (mappedSectorPosition === 'middle' && rotate > Math.PI / 2 && rotate < Math.PI * 1.5) {\r\n    rotate -= Math.PI;\r\n  }\r\n\r\n  sector.setTextConfig({\r\n    rotation: rotate\r\n  });\r\n}\r\n\r\nfunction adjustAngleDistanceX(angle, distance, isEnd) {\r\n  return distance * Math.sin(angle) * (isEnd ? -1 : 1);\r\n}\r\n\r\nfunction adjustAngleDistanceY(angle, distance, isEnd) {\r\n  return distance * Math.cos(angle) * (isEnd ? 1 : -1);\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { isArray, map } from 'zrender/lib/core/util.js';\r\nimport { parsePercent } from 'zrender/lib/contain/text.js';\r\nexport function getSectorCornerRadius(model, shape, zeroIfNull) {\r\n  var cornerRadius = model.get('borderRadius');\r\n\r\n  if (cornerRadius == null) {\r\n    return zeroIfNull ? {\r\n      cornerRadius: 0\r\n    } : null;\r\n  }\r\n\r\n  if (!isArray(cornerRadius)) {\r\n    cornerRadius = [cornerRadius, cornerRadius, cornerRadius, cornerRadius];\r\n  }\r\n\r\n  var dr = Math.abs(shape.r || 0 - shape.r0 || 0);\r\n  return {\r\n    cornerRadius: map(cornerRadius, function (cr) {\r\n      return parsePercent(cr, dr);\r\n    })\r\n  };\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport Path from 'zrender/lib/graphic/Path.js';\r\nimport Group from 'zrender/lib/graphic/Group.js';\r\nimport { extend, each, map } from 'zrender/lib/core/util.js';\r\nimport { Rect, Sector, updateProps, initProps, removeElementWithFadeOut, traverseElements } from '../../util/graphic.js';\r\nimport { getECData } from '../../util/innerStore.js';\r\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\r\nimport { setLabelStyle, getLabelStatesModels, setLabelValueAnimation, labelInner } from '../../label/labelStyle.js';\r\nimport { throttle } from '../../util/throttle.js';\r\nimport { createClipPath } from '../helper/createClipPathFromCoordSys.js';\r\nimport Sausage from '../../util/shape/sausage.js';\r\nimport ChartView from '../../view/Chart.js';\r\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem.js';\r\nimport { getDefaultLabel, getDefaultInterpolatedLabel } from '../helper/labelHelper.js';\r\nimport { warn } from '../../util/log.js';\r\nimport { createSectorCalculateTextPosition, setSectorTextRotation } from '../../label/sectorLabel.js';\r\nimport { saveOldStyle } from '../../animation/basicTransition.js';\r\nimport { getSectorCornerRadius } from '../helper/sectorHelper.js';\r\nvar mathMax = Math.max;\r\nvar mathMin = Math.min;\r\n\r\nfunction getClipArea(coord, data) {\r\n  var coordSysClipArea = coord.getArea && coord.getArea();\r\n\r\n  if (isCoordinateSystemType(coord, 'cartesian2d')) {\r\n    var baseAxis = coord.getBaseAxis(); // When boundaryGap is false or using time axis. bar may exceed the grid.\r\n    // We should not clip this part.\r\n    // See test/bar2.html\r\n\r\n    if (baseAxis.type !== 'category' || !baseAxis.onBand) {\r\n      var expandWidth = data.getLayout('bandWidth');\r\n\r\n      if (baseAxis.isHorizontal()) {\r\n        coordSysClipArea.x -= expandWidth;\r\n        coordSysClipArea.width += expandWidth * 2;\r\n      } else {\r\n        coordSysClipArea.y -= expandWidth;\r\n        coordSysClipArea.height += expandWidth * 2;\r\n      }\r\n    }\r\n  }\r\n\r\n  return coordSysClipArea;\r\n}\r\n\r\nvar BarView =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(BarView, _super);\r\n\r\n  function BarView() {\r\n    var _this = _super.call(this) || this;\r\n\r\n    _this.type = BarView.type;\r\n    _this._isFirstFrame = true;\r\n    return _this;\r\n  }\r\n\r\n  BarView.prototype.render = function (seriesModel, ecModel, api, payload) {\r\n    this._model = seriesModel;\r\n\r\n    this._removeOnRenderedListener(api);\r\n\r\n    this._updateDrawMode(seriesModel);\r\n\r\n    var coordinateSystemType = seriesModel.get('coordinateSystem');\r\n\r\n    if (coordinateSystemType === 'cartesian2d' || coordinateSystemType === 'polar') {\r\n      // Clear previously rendered progressive elements.\r\n      this._progressiveEls = null;\r\n      this._isLargeDraw ? this._renderLarge(seriesModel, ecModel, api) : this._renderNormal(seriesModel, ecModel, api, payload);\r\n    } else if (process.env.NODE_ENV !== 'production') {\r\n      warn('Only cartesian2d and polar supported for bar.');\r\n    }\r\n  };\r\n\r\n  BarView.prototype.incrementalPrepareRender = function (seriesModel) {\r\n    this._clear();\r\n\r\n    this._updateDrawMode(seriesModel); // incremental also need to clip, otherwise might be overlow.\r\n    // But must not set clip in each frame, otherwise all of the children will be marked redraw.\r\n\r\n\r\n    this._updateLargeClip(seriesModel);\r\n  };\r\n\r\n  BarView.prototype.incrementalRender = function (params, seriesModel) {\r\n    // Reset\r\n    this._progressiveEls = []; // Do not support progressive in normal mode.\r\n\r\n    this._incrementalRenderLarge(params, seriesModel);\r\n  };\r\n\r\n  BarView.prototype.eachRendered = function (cb) {\r\n    traverseElements(this._progressiveEls || this.group, cb);\r\n  };\r\n\r\n  BarView.prototype._updateDrawMode = function (seriesModel) {\r\n    var isLargeDraw = seriesModel.pipelineContext.large;\r\n\r\n    if (this._isLargeDraw == null || isLargeDraw !== this._isLargeDraw) {\r\n      this._isLargeDraw = isLargeDraw;\r\n\r\n      this._clear();\r\n    }\r\n  };\r\n\r\n  BarView.prototype._renderNormal = function (seriesModel, ecModel, api, payload) {\r\n    var group = this.group;\r\n    var data = seriesModel.getData();\r\n    var oldData = this._data;\r\n    var coord = seriesModel.coordinateSystem;\r\n    var baseAxis = coord.getBaseAxis();\r\n    var isHorizontalOrRadial;\r\n\r\n    if (coord.type === 'cartesian2d') {\r\n      isHorizontalOrRadial = baseAxis.isHorizontal();\r\n    } else if (coord.type === 'polar') {\r\n      isHorizontalOrRadial = baseAxis.dim === 'angle';\r\n    }\r\n\r\n    var animationModel = seriesModel.isAnimationEnabled() ? seriesModel : null;\r\n    var realtimeSortCfg = shouldRealtimeSort(seriesModel, coord);\r\n\r\n    if (realtimeSortCfg) {\r\n      this._enableRealtimeSort(realtimeSortCfg, data, api);\r\n    }\r\n\r\n    var needsClip = seriesModel.get('clip', true) || realtimeSortCfg;\r\n    var coordSysClipArea = getClipArea(coord, data); // If there is clipPath created in large mode. Remove it.\r\n\r\n    group.removeClipPath(); // We don't use clipPath in normal mode because we needs a perfect animation\r\n    // And don't want the label are clipped.\r\n\r\n    var roundCap = seriesModel.get('roundCap', true);\r\n    var drawBackground = seriesModel.get('showBackground', true);\r\n    var backgroundModel = seriesModel.getModel('backgroundStyle');\r\n    var barBorderRadius = backgroundModel.get('borderRadius') || 0;\r\n    var bgEls = [];\r\n    var oldBgEls = this._backgroundEls;\r\n    var isInitSort = payload && payload.isInitSort;\r\n    var isChangeOrder = payload && payload.type === 'changeAxisOrder';\r\n\r\n    function createBackground(dataIndex) {\r\n      var bgLayout = getLayout[coord.type](data, dataIndex);\r\n      var bgEl = createBackgroundEl(coord, isHorizontalOrRadial, bgLayout);\r\n      bgEl.useStyle(backgroundModel.getItemStyle()); // Only cartesian2d support borderRadius.\r\n\r\n      if (coord.type === 'cartesian2d') {\r\n        bgEl.setShape('r', barBorderRadius);\r\n      } else {\r\n        bgEl.setShape('cornerRadius', barBorderRadius);\r\n      }\r\n\r\n      bgEls[dataIndex] = bgEl;\r\n      return bgEl;\r\n    }\r\n\r\n    ;\r\n    data.diff(oldData).add(function (dataIndex) {\r\n      var itemModel = data.getItemModel(dataIndex);\r\n      var layout = getLayout[coord.type](data, dataIndex, itemModel);\r\n\r\n      if (drawBackground) {\r\n        createBackground(dataIndex);\r\n      } // If dataZoom in filteMode: 'empty', the baseValue can be set as NaN in \"axisProxy\".\r\n\r\n\r\n      if (!data.hasValue(dataIndex) || !isValidLayout[coord.type](layout)) {\r\n        return;\r\n      }\r\n\r\n      var isClipped = false;\r\n\r\n      if (needsClip) {\r\n        // Clip will modify the layout params.\r\n        // And return a boolean to determine if the shape are fully clipped.\r\n        isClipped = clip[coord.type](coordSysClipArea, layout);\r\n      }\r\n\r\n      var el = elementCreator[coord.type](seriesModel, data, dataIndex, layout, isHorizontalOrRadial, animationModel, baseAxis.model, false, roundCap);\r\n\r\n      if (realtimeSortCfg) {\r\n        /**\r\n         * Force label animation because even if the element is\r\n         * ignored because it's clipped, it may not be clipped after\r\n         * changing order. Then, if not using forceLabelAnimation,\r\n         * the label animation was never started, in which case,\r\n         * the label will be the final value and doesn't have label\r\n         * animation.\r\n         */\r\n        el.forceLabelAnimation = true;\r\n      }\r\n\r\n      updateStyle(el, data, dataIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, coord.type === 'polar');\r\n\r\n      if (isInitSort) {\r\n        el.attr({\r\n          shape: layout\r\n        });\r\n      } else if (realtimeSortCfg) {\r\n        updateRealtimeAnimation(realtimeSortCfg, animationModel, el, layout, dataIndex, isHorizontalOrRadial, false, false);\r\n      } else {\r\n        initProps(el, {\r\n          shape: layout\r\n        }, seriesModel, dataIndex);\r\n      }\r\n\r\n      data.setItemGraphicEl(dataIndex, el);\r\n      group.add(el);\r\n      el.ignore = isClipped;\r\n    }).update(function (newIndex, oldIndex) {\r\n      var itemModel = data.getItemModel(newIndex);\r\n      var layout = getLayout[coord.type](data, newIndex, itemModel);\r\n\r\n      if (drawBackground) {\r\n        var bgEl = void 0;\r\n\r\n        if (oldBgEls.length === 0) {\r\n          bgEl = createBackground(oldIndex);\r\n        } else {\r\n          bgEl = oldBgEls[oldIndex];\r\n          bgEl.useStyle(backgroundModel.getItemStyle()); // Only cartesian2d support borderRadius.\r\n\r\n          if (coord.type === 'cartesian2d') {\r\n            bgEl.setShape('r', barBorderRadius);\r\n          } else {\r\n            bgEl.setShape('cornerRadius', barBorderRadius);\r\n          }\r\n\r\n          bgEls[newIndex] = bgEl;\r\n        }\r\n\r\n        var bgLayout = getLayout[coord.type](data, newIndex);\r\n        var shape = createBackgroundShape(isHorizontalOrRadial, bgLayout, coord);\r\n        updateProps(bgEl, {\r\n          shape: shape\r\n        }, animationModel, newIndex);\r\n      }\r\n\r\n      var el = oldData.getItemGraphicEl(oldIndex);\r\n\r\n      if (!data.hasValue(newIndex) || !isValidLayout[coord.type](layout)) {\r\n        group.remove(el);\r\n        return;\r\n      }\r\n\r\n      var isClipped = false;\r\n\r\n      if (needsClip) {\r\n        isClipped = clip[coord.type](coordSysClipArea, layout);\r\n\r\n        if (isClipped) {\r\n          group.remove(el);\r\n        }\r\n      }\r\n\r\n      if (!el) {\r\n        el = elementCreator[coord.type](seriesModel, data, newIndex, layout, isHorizontalOrRadial, animationModel, baseAxis.model, !!el, roundCap);\r\n      } else {\r\n        saveOldStyle(el);\r\n      }\r\n\r\n      if (realtimeSortCfg) {\r\n        el.forceLabelAnimation = true;\r\n      }\r\n\r\n      if (isChangeOrder) {\r\n        var textEl = el.getTextContent();\r\n\r\n        if (textEl) {\r\n          var labelInnerStore = labelInner(textEl);\r\n\r\n          if (labelInnerStore.prevValue != null) {\r\n            /**\r\n             * Set preValue to be value so that no new label\r\n             * should be started, otherwise, it will take a full\r\n             * `animationDurationUpdate` time to finish the\r\n             * animation, which is not expected.\r\n             */\r\n            labelInnerStore.prevValue = labelInnerStore.value;\r\n          }\r\n        }\r\n      } // Not change anything if only order changed.\r\n      // Especially not change label.\r\n      else {\r\n          updateStyle(el, data, newIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, coord.type === 'polar');\r\n        }\r\n\r\n      if (isInitSort) {\r\n        el.attr({\r\n          shape: layout\r\n        });\r\n      } else if (realtimeSortCfg) {\r\n        updateRealtimeAnimation(realtimeSortCfg, animationModel, el, layout, newIndex, isHorizontalOrRadial, true, isChangeOrder);\r\n      } else {\r\n        updateProps(el, {\r\n          shape: layout\r\n        }, seriesModel, newIndex, null);\r\n      }\r\n\r\n      data.setItemGraphicEl(newIndex, el);\r\n      el.ignore = isClipped;\r\n      group.add(el);\r\n    }).remove(function (dataIndex) {\r\n      var el = oldData.getItemGraphicEl(dataIndex);\r\n      el && removeElementWithFadeOut(el, seriesModel, dataIndex);\r\n    }).execute();\r\n    var bgGroup = this._backgroundGroup || (this._backgroundGroup = new Group());\r\n    bgGroup.removeAll();\r\n\r\n    for (var i = 0; i < bgEls.length; ++i) {\r\n      bgGroup.add(bgEls[i]);\r\n    }\r\n\r\n    group.add(bgGroup);\r\n    this._backgroundEls = bgEls;\r\n    this._data = data;\r\n  };\r\n\r\n  BarView.prototype._renderLarge = function (seriesModel, ecModel, api) {\r\n    this._clear();\r\n\r\n    createLarge(seriesModel, this.group);\r\n\r\n    this._updateLargeClip(seriesModel);\r\n  };\r\n\r\n  BarView.prototype._incrementalRenderLarge = function (params, seriesModel) {\r\n    this._removeBackground();\r\n\r\n    createLarge(seriesModel, this.group, this._progressiveEls, true);\r\n  };\r\n\r\n  BarView.prototype._updateLargeClip = function (seriesModel) {\r\n    // Use clipPath in large mode.\r\n    var clipPath = seriesModel.get('clip', true) && createClipPath(seriesModel.coordinateSystem, false, seriesModel);\r\n    var group = this.group;\r\n\r\n    if (clipPath) {\r\n      group.setClipPath(clipPath);\r\n    } else {\r\n      group.removeClipPath();\r\n    }\r\n  };\r\n\r\n  BarView.prototype._enableRealtimeSort = function (realtimeSortCfg, data, api) {\r\n    var _this = this; // If no data in the first frame, wait for data to initSort\r\n\r\n\r\n    if (!data.count()) {\r\n      return;\r\n    }\r\n\r\n    var baseAxis = realtimeSortCfg.baseAxis;\r\n\r\n    if (this._isFirstFrame) {\r\n      this._dispatchInitSort(data, realtimeSortCfg, api);\r\n\r\n      this._isFirstFrame = false;\r\n    } else {\r\n      var orderMapping_1 = function (idx) {\r\n        var el = data.getItemGraphicEl(idx);\r\n        var shape = el && el.shape;\r\n        return shape && // The result should be consistent with the initial sort by data value.\r\n        // Do not support the case that both positive and negative exist.\r\n        Math.abs(baseAxis.isHorizontal() ? shape.height : shape.width) // If data is NaN, shape.xxx may be NaN, so use || 0 here in case\r\n        || 0;\r\n      };\r\n\r\n      this._onRendered = function () {\r\n        _this._updateSortWithinSameData(data, orderMapping_1, baseAxis, api);\r\n      };\r\n\r\n      api.getZr().on('rendered', this._onRendered);\r\n    }\r\n  };\r\n\r\n  BarView.prototype._dataSort = function (data, baseAxis, orderMapping) {\r\n    var info = [];\r\n    data.each(data.mapDimension(baseAxis.dim), function (ordinalNumber, dataIdx) {\r\n      var mappedValue = orderMapping(dataIdx);\r\n      mappedValue = mappedValue == null ? NaN : mappedValue;\r\n      info.push({\r\n        dataIndex: dataIdx,\r\n        mappedValue: mappedValue,\r\n        ordinalNumber: ordinalNumber\r\n      });\r\n    });\r\n    info.sort(function (a, b) {\r\n      // If NaN, it will be treated as min val.\r\n      return b.mappedValue - a.mappedValue;\r\n    });\r\n    return {\r\n      ordinalNumbers: map(info, function (item) {\r\n        return item.ordinalNumber;\r\n      })\r\n    };\r\n  };\r\n\r\n  BarView.prototype._isOrderChangedWithinSameData = function (data, orderMapping, baseAxis) {\r\n    var scale = baseAxis.scale;\r\n    var ordinalDataDim = data.mapDimension(baseAxis.dim);\r\n    var lastValue = Number.MAX_VALUE;\r\n\r\n    for (var tickNum = 0, len = scale.getOrdinalMeta().categories.length; tickNum < len; ++tickNum) {\r\n      var rawIdx = data.rawIndexOf(ordinalDataDim, scale.getRawOrdinalNumber(tickNum));\r\n      var value = rawIdx < 0 // If some tick have no bar, the tick will be treated as min.\r\n      ? Number.MIN_VALUE // PENDING: if dataZoom on baseAxis exits, is it a performance issue?\r\n      : orderMapping(data.indexOfRawIndex(rawIdx));\r\n\r\n      if (value > lastValue) {\r\n        return true;\r\n      }\r\n\r\n      lastValue = value;\r\n    }\r\n\r\n    return false;\r\n  };\r\n  /*\r\n   * Consider the case when A and B changed order, whose representing\r\n   * bars are both out of sight, we don't wish to trigger reorder action\r\n   * as long as the order in the view doesn't change.\r\n   */\r\n\r\n\r\n  BarView.prototype._isOrderDifferentInView = function (orderInfo, baseAxis) {\r\n    var scale = baseAxis.scale;\r\n    var extent = scale.getExtent();\r\n    var tickNum = Math.max(0, extent[0]);\r\n    var tickMax = Math.min(extent[1], scale.getOrdinalMeta().categories.length - 1);\r\n\r\n    for (; tickNum <= tickMax; ++tickNum) {\r\n      if (orderInfo.ordinalNumbers[tickNum] !== scale.getRawOrdinalNumber(tickNum)) {\r\n        return true;\r\n      }\r\n    }\r\n  };\r\n\r\n  BarView.prototype._updateSortWithinSameData = function (data, orderMapping, baseAxis, api) {\r\n    if (!this._isOrderChangedWithinSameData(data, orderMapping, baseAxis)) {\r\n      return;\r\n    }\r\n\r\n    var sortInfo = this._dataSort(data, baseAxis, orderMapping);\r\n\r\n    if (this._isOrderDifferentInView(sortInfo, baseAxis)) {\r\n      this._removeOnRenderedListener(api);\r\n\r\n      api.dispatchAction({\r\n        type: 'changeAxisOrder',\r\n        componentType: baseAxis.dim + 'Axis',\r\n        axisId: baseAxis.index,\r\n        sortInfo: sortInfo\r\n      });\r\n    }\r\n  };\r\n\r\n  BarView.prototype._dispatchInitSort = function (data, realtimeSortCfg, api) {\r\n    var baseAxis = realtimeSortCfg.baseAxis;\r\n\r\n    var sortResult = this._dataSort(data, baseAxis, function (dataIdx) {\r\n      return data.get(data.mapDimension(realtimeSortCfg.otherAxis.dim), dataIdx);\r\n    });\r\n\r\n    api.dispatchAction({\r\n      type: 'changeAxisOrder',\r\n      componentType: baseAxis.dim + 'Axis',\r\n      isInitSort: true,\r\n      axisId: baseAxis.index,\r\n      sortInfo: sortResult\r\n    });\r\n  };\r\n\r\n  BarView.prototype.remove = function (ecModel, api) {\r\n    this._clear(this._model);\r\n\r\n    this._removeOnRenderedListener(api);\r\n  };\r\n\r\n  BarView.prototype.dispose = function (ecModel, api) {\r\n    this._removeOnRenderedListener(api);\r\n  };\r\n\r\n  BarView.prototype._removeOnRenderedListener = function (api) {\r\n    if (this._onRendered) {\r\n      api.getZr().off('rendered', this._onRendered);\r\n      this._onRendered = null;\r\n    }\r\n  };\r\n\r\n  BarView.prototype._clear = function (model) {\r\n    var group = this.group;\r\n    var data = this._data;\r\n\r\n    if (model && model.isAnimationEnabled() && data && !this._isLargeDraw) {\r\n      this._removeBackground();\r\n\r\n      this._backgroundEls = [];\r\n      data.eachItemGraphicEl(function (el) {\r\n        removeElementWithFadeOut(el, model, getECData(el).dataIndex);\r\n      });\r\n    } else {\r\n      group.removeAll();\r\n    }\r\n\r\n    this._data = null;\r\n    this._isFirstFrame = true;\r\n  };\r\n\r\n  BarView.prototype._removeBackground = function () {\r\n    this.group.remove(this._backgroundGroup);\r\n    this._backgroundGroup = null;\r\n  };\r\n\r\n  BarView.type = 'bar';\r\n  return BarView;\r\n}(ChartView);\r\n\r\nvar clip = {\r\n  cartesian2d: function (coordSysBoundingRect, layout) {\r\n    var signWidth = layout.width < 0 ? -1 : 1;\r\n    var signHeight = layout.height < 0 ? -1 : 1; // Needs positive width and height\r\n\r\n    if (signWidth < 0) {\r\n      layout.x += layout.width;\r\n      layout.width = -layout.width;\r\n    }\r\n\r\n    if (signHeight < 0) {\r\n      layout.y += layout.height;\r\n      layout.height = -layout.height;\r\n    }\r\n\r\n    var coordSysX2 = coordSysBoundingRect.x + coordSysBoundingRect.width;\r\n    var coordSysY2 = coordSysBoundingRect.y + coordSysBoundingRect.height;\r\n    var x = mathMax(layout.x, coordSysBoundingRect.x);\r\n    var x2 = mathMin(layout.x + layout.width, coordSysX2);\r\n    var y = mathMax(layout.y, coordSysBoundingRect.y);\r\n    var y2 = mathMin(layout.y + layout.height, coordSysY2);\r\n    var xClipped = x2 < x;\r\n    var yClipped = y2 < y; // When xClipped or yClipped, the element will be marked as `ignore`.\r\n    // But we should also place the element at the edge of the coord sys bounding rect.\r\n    // Because if data changed and the bar shows again, its transition animation\r\n    // will begin at this place.\r\n\r\n    layout.x = xClipped && x > coordSysX2 ? x2 : x;\r\n    layout.y = yClipped && y > coordSysY2 ? y2 : y;\r\n    layout.width = xClipped ? 0 : x2 - x;\r\n    layout.height = yClipped ? 0 : y2 - y; // Reverse back\r\n\r\n    if (signWidth < 0) {\r\n      layout.x += layout.width;\r\n      layout.width = -layout.width;\r\n    }\r\n\r\n    if (signHeight < 0) {\r\n      layout.y += layout.height;\r\n      layout.height = -layout.height;\r\n    }\r\n\r\n    return xClipped || yClipped;\r\n  },\r\n  polar: function (coordSysClipArea, layout) {\r\n    var signR = layout.r0 <= layout.r ? 1 : -1; // Make sure r is larger than r0\r\n\r\n    if (signR < 0) {\r\n      var tmp = layout.r;\r\n      layout.r = layout.r0;\r\n      layout.r0 = tmp;\r\n    }\r\n\r\n    var r = mathMin(layout.r, coordSysClipArea.r);\r\n    var r0 = mathMax(layout.r0, coordSysClipArea.r0);\r\n    layout.r = r;\r\n    layout.r0 = r0;\r\n    var clipped = r - r0 < 0; // Reverse back\r\n\r\n    if (signR < 0) {\r\n      var tmp = layout.r;\r\n      layout.r = layout.r0;\r\n      layout.r0 = tmp;\r\n    }\r\n\r\n    return clipped;\r\n  }\r\n};\r\nvar elementCreator = {\r\n  cartesian2d: function (seriesModel, data, newIndex, layout, isHorizontal, animationModel, axisModel, isUpdate, roundCap) {\r\n    var rect = new Rect({\r\n      shape: extend({}, layout),\r\n      z2: 1\r\n    });\r\n    rect.__dataIndex = newIndex;\r\n    rect.name = 'item';\r\n\r\n    if (animationModel) {\r\n      var rectShape = rect.shape;\r\n      var animateProperty = isHorizontal ? 'height' : 'width';\r\n      rectShape[animateProperty] = 0;\r\n    }\r\n\r\n    return rect;\r\n  },\r\n  polar: function (seriesModel, data, newIndex, layout, isRadial, animationModel, axisModel, isUpdate, roundCap) {\r\n    var ShapeClass = !isRadial && roundCap ? Sausage : Sector;\r\n    var sector = new ShapeClass({\r\n      shape: layout,\r\n      z2: 1\r\n    });\r\n    sector.name = 'item';\r\n    var positionMap = createPolarPositionMapping(isRadial);\r\n    sector.calculateTextPosition = createSectorCalculateTextPosition(positionMap, {\r\n      isRoundCap: ShapeClass === Sausage\r\n    }); // Animation\r\n\r\n    if (animationModel) {\r\n      var sectorShape = sector.shape;\r\n      var animateProperty = isRadial ? 'r' : 'endAngle';\r\n      var animateTarget = {};\r\n      sectorShape[animateProperty] = isRadial ? layout.r0 : layout.startAngle;\r\n      animateTarget[animateProperty] = layout[animateProperty];\r\n      (isUpdate ? updateProps : initProps)(sector, {\r\n        shape: animateTarget // __value: typeof dataValue === 'string' ? parseInt(dataValue, 10) : dataValue\r\n\r\n      }, animationModel);\r\n    }\r\n\r\n    return sector;\r\n  }\r\n};\r\n\r\nfunction shouldRealtimeSort(seriesModel, coordSys) {\r\n  var realtimeSortOption = seriesModel.get('realtimeSort', true);\r\n  var baseAxis = coordSys.getBaseAxis();\r\n\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    if (realtimeSortOption) {\r\n      if (baseAxis.type !== 'category') {\r\n        warn('`realtimeSort` will not work because this bar series is not based on a category axis.');\r\n      }\r\n\r\n      if (coordSys.type !== 'cartesian2d') {\r\n        warn('`realtimeSort` will not work because this bar series is not on cartesian2d.');\r\n      }\r\n    }\r\n  }\r\n\r\n  if (realtimeSortOption && baseAxis.type === 'category' && coordSys.type === 'cartesian2d') {\r\n    return {\r\n      baseAxis: baseAxis,\r\n      otherAxis: coordSys.getOtherAxis(baseAxis)\r\n    };\r\n  }\r\n}\r\n\r\nfunction updateRealtimeAnimation(realtimeSortCfg, seriesAnimationModel, el, layout, newIndex, isHorizontal, isUpdate, isChangeOrder) {\r\n  var seriesTarget;\r\n  var axisTarget;\r\n\r\n  if (isHorizontal) {\r\n    axisTarget = {\r\n      x: layout.x,\r\n      width: layout.width\r\n    };\r\n    seriesTarget = {\r\n      y: layout.y,\r\n      height: layout.height\r\n    };\r\n  } else {\r\n    axisTarget = {\r\n      y: layout.y,\r\n      height: layout.height\r\n    };\r\n    seriesTarget = {\r\n      x: layout.x,\r\n      width: layout.width\r\n    };\r\n  }\r\n\r\n  if (!isChangeOrder) {\r\n    // Keep the original growth animation if only axis order changed.\r\n    // Not start a new animation.\r\n    (isUpdate ? updateProps : initProps)(el, {\r\n      shape: seriesTarget\r\n    }, seriesAnimationModel, newIndex, null);\r\n  }\r\n\r\n  var axisAnimationModel = seriesAnimationModel ? realtimeSortCfg.baseAxis.model : null;\r\n  (isUpdate ? updateProps : initProps)(el, {\r\n    shape: axisTarget\r\n  }, axisAnimationModel, newIndex);\r\n}\r\n\r\nfunction checkPropertiesNotValid(obj, props) {\r\n  for (var i = 0; i < props.length; i++) {\r\n    if (!isFinite(obj[props[i]])) {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nvar rectPropties = ['x', 'y', 'width', 'height'];\r\nvar polarPropties = ['cx', 'cy', 'r', 'startAngle', 'endAngle'];\r\nvar isValidLayout = {\r\n  cartesian2d: function (layout) {\r\n    return !checkPropertiesNotValid(layout, rectPropties);\r\n  },\r\n  polar: function (layout) {\r\n    return !checkPropertiesNotValid(layout, polarPropties);\r\n  }\r\n};\r\nvar getLayout = {\r\n  // itemModel is only used to get borderWidth, which is not needed\r\n  // when calculating bar background layout.\r\n  cartesian2d: function (data, dataIndex, itemModel) {\r\n    var layout = data.getItemLayout(dataIndex);\r\n    var fixedLineWidth = itemModel ? getLineWidth(itemModel, layout) : 0; // fix layout with lineWidth\r\n\r\n    var signX = layout.width > 0 ? 1 : -1;\r\n    var signY = layout.height > 0 ? 1 : -1;\r\n    return {\r\n      x: layout.x + signX * fixedLineWidth / 2,\r\n      y: layout.y + signY * fixedLineWidth / 2,\r\n      width: layout.width - signX * fixedLineWidth,\r\n      height: layout.height - signY * fixedLineWidth\r\n    };\r\n  },\r\n  polar: function (data, dataIndex, itemModel) {\r\n    var layout = data.getItemLayout(dataIndex);\r\n    return {\r\n      cx: layout.cx,\r\n      cy: layout.cy,\r\n      r0: layout.r0,\r\n      r: layout.r,\r\n      startAngle: layout.startAngle,\r\n      endAngle: layout.endAngle,\r\n      clockwise: layout.clockwise\r\n    };\r\n  }\r\n};\r\n\r\nfunction isZeroOnPolar(layout) {\r\n  return layout.startAngle != null && layout.endAngle != null && layout.startAngle === layout.endAngle;\r\n}\r\n\r\nfunction createPolarPositionMapping(isRadial) {\r\n  return function (isRadial) {\r\n    var arcOrAngle = isRadial ? 'Arc' : 'Angle';\r\n    return function (position) {\r\n      switch (position) {\r\n        case 'start':\r\n        case 'insideStart':\r\n        case 'end':\r\n        case 'insideEnd':\r\n          return position + arcOrAngle;\r\n\r\n        default:\r\n          return position;\r\n      }\r\n    };\r\n  }(isRadial);\r\n}\r\n\r\nfunction updateStyle(el, data, dataIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, isPolar) {\r\n  var style = data.getItemVisual(dataIndex, 'style');\r\n\r\n  if (!isPolar) {\r\n    var borderRadius = itemModel.get(['itemStyle', 'borderRadius']) || 0;\r\n    el.setShape('r', borderRadius);\r\n  } else if (!seriesModel.get('roundCap')) {\r\n    var sectorShape = el.shape;\r\n    var cornerRadius = getSectorCornerRadius(itemModel.getModel('itemStyle'), sectorShape, true);\r\n    extend(sectorShape, cornerRadius);\r\n    el.setShape(sectorShape);\r\n  }\r\n\r\n  el.useStyle(style);\r\n  var cursorStyle = itemModel.getShallow('cursor');\r\n  cursorStyle && el.attr('cursor', cursorStyle);\r\n  var labelPositionOutside = isPolar ? isHorizontalOrRadial ? layout.r >= layout.r0 ? 'endArc' : 'startArc' : layout.endAngle >= layout.startAngle ? 'endAngle' : 'startAngle' : isHorizontalOrRadial ? layout.height >= 0 ? 'bottom' : 'top' : layout.width >= 0 ? 'right' : 'left';\r\n  var labelStatesModels = getLabelStatesModels(itemModel);\r\n  setLabelStyle(el, labelStatesModels, {\r\n    labelFetcher: seriesModel,\r\n    labelDataIndex: dataIndex,\r\n    defaultText: getDefaultLabel(seriesModel.getData(), dataIndex),\r\n    inheritColor: style.fill,\r\n    defaultOpacity: style.opacity,\r\n    defaultOutsidePosition: labelPositionOutside\r\n  });\r\n  var label = el.getTextContent();\r\n\r\n  if (isPolar && label) {\r\n    var position = itemModel.get(['label', 'position']);\r\n    el.textConfig.inside = position === 'middle' ? true : null;\r\n    setSectorTextRotation(el, position === 'outside' ? labelPositionOutside : position, createPolarPositionMapping(isHorizontalOrRadial), itemModel.get(['label', 'rotate']));\r\n  }\r\n\r\n  setLabelValueAnimation(label, labelStatesModels, seriesModel.getRawValue(dataIndex), function (value) {\r\n    return getDefaultInterpolatedLabel(data, value);\r\n  });\r\n  var emphasisModel = itemModel.getModel(['emphasis']);\r\n  toggleHoverEmphasis(el, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\r\n  setStatesStylesFromModel(el, itemModel);\r\n\r\n  if (isZeroOnPolar(layout)) {\r\n    el.style.fill = 'none';\r\n    el.style.stroke = 'none';\r\n    each(el.states, function (state) {\r\n      if (state.style) {\r\n        state.style.fill = state.style.stroke = 'none';\r\n      }\r\n    });\r\n  }\r\n} // In case width or height are too small.\r\n\r\n\r\nfunction getLineWidth(itemModel, rawLayout) {\r\n  // Has no border.\r\n  var borderColor = itemModel.get(['itemStyle', 'borderColor']);\r\n\r\n  if (!borderColor || borderColor === 'none') {\r\n    return 0;\r\n  }\r\n\r\n  var lineWidth = itemModel.get(['itemStyle', 'borderWidth']) || 0; // width or height may be NaN for empty data\r\n\r\n  var width = isNaN(rawLayout.width) ? Number.MAX_VALUE : Math.abs(rawLayout.width);\r\n  var height = isNaN(rawLayout.height) ? Number.MAX_VALUE : Math.abs(rawLayout.height);\r\n  return Math.min(lineWidth, width, height);\r\n}\r\n\r\nvar LagePathShape =\r\n/** @class */\r\nfunction () {\r\n  function LagePathShape() {}\r\n\r\n  return LagePathShape;\r\n}();\r\n\r\nvar LargePath =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(LargePath, _super);\r\n\r\n  function LargePath(opts) {\r\n    var _this = _super.call(this, opts) || this;\r\n\r\n    _this.type = 'largeBar';\r\n    return _this;\r\n  }\r\n\r\n  LargePath.prototype.getDefaultShape = function () {\r\n    return new LagePathShape();\r\n  };\r\n\r\n  LargePath.prototype.buildPath = function (ctx, shape) {\r\n    // Drawing lines is more efficient than drawing\r\n    // a whole line or drawing rects.\r\n    var points = shape.points;\r\n    var baseDimIdx = this.baseDimIdx;\r\n    var valueDimIdx = 1 - this.baseDimIdx;\r\n    var startPoint = [];\r\n    var size = [];\r\n    var barWidth = this.barWidth;\r\n\r\n    for (var i = 0; i < points.length; i += 3) {\r\n      size[baseDimIdx] = barWidth;\r\n      size[valueDimIdx] = points[i + 2];\r\n      startPoint[baseDimIdx] = points[i + baseDimIdx];\r\n      startPoint[valueDimIdx] = points[i + valueDimIdx];\r\n      ctx.rect(startPoint[0], startPoint[1], size[0], size[1]);\r\n    }\r\n  };\r\n\r\n  return LargePath;\r\n}(Path);\r\n\r\nfunction createLarge(seriesModel, group, progressiveEls, incremental) {\r\n  // TODO support polar\r\n  var data = seriesModel.getData();\r\n  var baseDimIdx = data.getLayout('valueAxisHorizontal') ? 1 : 0;\r\n  var largeDataIndices = data.getLayout('largeDataIndices');\r\n  var barWidth = data.getLayout('size');\r\n  var backgroundModel = seriesModel.getModel('backgroundStyle');\r\n  var bgPoints = data.getLayout('largeBackgroundPoints');\r\n\r\n  if (bgPoints) {\r\n    var bgEl = new LargePath({\r\n      shape: {\r\n        points: bgPoints\r\n      },\r\n      incremental: !!incremental,\r\n      silent: true,\r\n      z2: 0\r\n    });\r\n    bgEl.baseDimIdx = baseDimIdx;\r\n    bgEl.largeDataIndices = largeDataIndices;\r\n    bgEl.barWidth = barWidth;\r\n    bgEl.useStyle(backgroundModel.getItemStyle());\r\n    group.add(bgEl);\r\n    progressiveEls && progressiveEls.push(bgEl);\r\n  }\r\n\r\n  var el = new LargePath({\r\n    shape: {\r\n      points: data.getLayout('largePoints')\r\n    },\r\n    incremental: !!incremental,\r\n    ignoreCoarsePointer: true,\r\n    z2: 1\r\n  });\r\n  el.baseDimIdx = baseDimIdx;\r\n  el.largeDataIndices = largeDataIndices;\r\n  el.barWidth = barWidth;\r\n  group.add(el);\r\n  el.useStyle(data.getVisual('style')); // Enable tooltip and user mouse/touch event handlers.\r\n\r\n  getECData(el).seriesIndex = seriesModel.seriesIndex;\r\n\r\n  if (!seriesModel.get('silent')) {\r\n    el.on('mousedown', largePathUpdateDataIndex);\r\n    el.on('mousemove', largePathUpdateDataIndex);\r\n  }\r\n\r\n  progressiveEls && progressiveEls.push(el);\r\n} // Use throttle to avoid frequently traverse to find dataIndex.\r\n\r\n\r\nvar largePathUpdateDataIndex = throttle(function (event) {\r\n  var largePath = this;\r\n  var dataIndex = largePathFindDataIndex(largePath, event.offsetX, event.offsetY);\r\n  getECData(largePath).dataIndex = dataIndex >= 0 ? dataIndex : null;\r\n}, 30, false);\r\n\r\nfunction largePathFindDataIndex(largePath, x, y) {\r\n  var baseDimIdx = largePath.baseDimIdx;\r\n  var valueDimIdx = 1 - baseDimIdx;\r\n  var points = largePath.shape.points;\r\n  var largeDataIndices = largePath.largeDataIndices;\r\n  var startPoint = [];\r\n  var size = [];\r\n  var barWidth = largePath.barWidth;\r\n\r\n  for (var i = 0, len = points.length / 3; i < len; i++) {\r\n    var ii = i * 3;\r\n    size[baseDimIdx] = barWidth;\r\n    size[valueDimIdx] = points[ii + 2];\r\n    startPoint[baseDimIdx] = points[ii + baseDimIdx];\r\n    startPoint[valueDimIdx] = points[ii + valueDimIdx];\r\n\r\n    if (size[valueDimIdx] < 0) {\r\n      startPoint[valueDimIdx] += size[valueDimIdx];\r\n      size[valueDimIdx] = -size[valueDimIdx];\r\n    }\r\n\r\n    if (x >= startPoint[0] && x <= startPoint[0] + size[0] && y >= startPoint[1] && y <= startPoint[1] + size[1]) {\r\n      return largeDataIndices[i];\r\n    }\r\n  }\r\n\r\n  return -1;\r\n}\r\n\r\nfunction createBackgroundShape(isHorizontalOrRadial, layout, coord) {\r\n  if (isCoordinateSystemType(coord, 'cartesian2d')) {\r\n    var rectShape = layout;\r\n    var coordLayout = coord.getArea();\r\n    return {\r\n      x: isHorizontalOrRadial ? rectShape.x : coordLayout.x,\r\n      y: isHorizontalOrRadial ? coordLayout.y : rectShape.y,\r\n      width: isHorizontalOrRadial ? rectShape.width : coordLayout.width,\r\n      height: isHorizontalOrRadial ? coordLayout.height : rectShape.height\r\n    };\r\n  } else {\r\n    var coordLayout = coord.getArea();\r\n    var sectorShape = layout;\r\n    return {\r\n      cx: coordLayout.cx,\r\n      cy: coordLayout.cy,\r\n      r0: isHorizontalOrRadial ? coordLayout.r0 : sectorShape.r0,\r\n      r: isHorizontalOrRadial ? coordLayout.r : sectorShape.r,\r\n      startAngle: isHorizontalOrRadial ? sectorShape.startAngle : 0,\r\n      endAngle: isHorizontalOrRadial ? sectorShape.endAngle : Math.PI * 2\r\n    };\r\n  }\r\n}\r\n\r\nfunction createBackgroundEl(coord, isHorizontalOrRadial, layout) {\r\n  var ElementClz = coord.type === 'polar' ? Sector : Rect;\r\n  return new ElementClz({\r\n    shape: createBackgroundShape(isHorizontalOrRadial, layout, coord),\r\n    silent: true,\r\n    z2: 0\r\n  });\r\n}\r\n\r\nexport default BarView;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport { layout, createProgressiveLayout } from '../../layout/barGrid.js';\r\nimport dataSample from '../../processor/dataSample.js';\r\nimport BarSeries from './BarSeries.js';\r\nimport BarView from './BarView.js';\r\nexport function install(registers) {\r\n  registers.registerChartView(BarView);\r\n  registers.registerSeriesModel(BarSeries);\r\n  registers.registerLayout(registers.PRIORITY.VISUAL.LAYOUT, zrUtil.curry(layout, 'bar')); // Do layout after other overall layout, which can prepare some information.\r\n\r\n  registers.registerLayout(registers.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT, createProgressiveLayout('bar')); // Down sample after filter\r\n\r\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, dataSample('bar'));\r\n  /**\r\n   * @payload\r\n   * @property {string} [componentType=series]\r\n   * @property {number} [dx]\r\n   * @property {number} [dy]\r\n   * @property {number} [zoom]\r\n   * @property {number} [originX]\r\n   * @property {number} [originY]\r\n   */\r\n\r\n  registers.registerAction({\r\n    type: 'changeAxisOrder',\r\n    event: 'changeAxisOrder',\r\n    update: 'update'\r\n  }, function (payload, ecModel) {\r\n    var componentType = payload.componentType || 'series';\r\n    ecModel.eachComponent({\r\n      mainType: componentType,\r\n      query: payload\r\n    }, function (componentModel) {\r\n      if (payload.sortInfo) {\r\n        componentModel.axis.setCategorySortInfo(payload.sortInfo);\r\n      }\r\n    });\r\n  });\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { parsePercent, linearMap } from '../../util/number.js';\r\nimport * as layout from '../../util/layout.js';\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nvar PI2 = Math.PI * 2;\r\nvar RADIAN = Math.PI / 180;\r\n\r\nfunction getViewRect(seriesModel, api) {\r\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\r\n    width: api.getWidth(),\r\n    height: api.getHeight()\r\n  });\r\n}\r\n\r\nexport function getBasicPieLayout(seriesModel, api) {\r\n  var viewRect = getViewRect(seriesModel, api); // center can be string or number when coordinateSystem is specified\r\n\r\n  var center = seriesModel.get('center');\r\n  var radius = seriesModel.get('radius');\r\n\r\n  if (!zrUtil.isArray(radius)) {\r\n    radius = [0, radius];\r\n  }\r\n\r\n  var width = parsePercent(viewRect.width, api.getWidth());\r\n  var height = parsePercent(viewRect.height, api.getHeight());\r\n  var size = Math.min(width, height);\r\n  var r0 = parsePercent(radius[0], size / 2);\r\n  var r = parsePercent(radius[1], size / 2);\r\n  var cx;\r\n  var cy;\r\n  var coordSys = seriesModel.coordinateSystem;\r\n\r\n  if (coordSys) {\r\n    // percentage is not allowed when coordinate system is specified\r\n    var point = coordSys.dataToPoint(center);\r\n    cx = point[0] || 0;\r\n    cy = point[1] || 0;\r\n  } else {\r\n    if (!zrUtil.isArray(center)) {\r\n      center = [center, center];\r\n    }\r\n\r\n    cx = parsePercent(center[0], width) + viewRect.x;\r\n    cy = parsePercent(center[1], height) + viewRect.y;\r\n  }\r\n\r\n  return {\r\n    cx: cx,\r\n    cy: cy,\r\n    r0: r0,\r\n    r: r\r\n  };\r\n}\r\nexport default function pieLayout(seriesType, ecModel, api) {\r\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\r\n    var data = seriesModel.getData();\r\n    var valueDim = data.mapDimension('value');\r\n    var viewRect = getViewRect(seriesModel, api);\r\n\r\n    var _a = getBasicPieLayout(seriesModel, api),\r\n        cx = _a.cx,\r\n        cy = _a.cy,\r\n        r = _a.r,\r\n        r0 = _a.r0;\r\n\r\n    var startAngle = -seriesModel.get('startAngle') * RADIAN;\r\n    var minAngle = seriesModel.get('minAngle') * RADIAN;\r\n    var validDataCount = 0;\r\n    data.each(valueDim, function (value) {\r\n      !isNaN(value) && validDataCount++;\r\n    });\r\n    var sum = data.getSum(valueDim); // Sum may be 0\r\n\r\n    var unitRadian = Math.PI / (sum || validDataCount) * 2;\r\n    var clockwise = seriesModel.get('clockwise');\r\n    var roseType = seriesModel.get('roseType');\r\n    var stillShowZeroSum = seriesModel.get('stillShowZeroSum'); // [0...max]\r\n\r\n    var extent = data.getDataExtent(valueDim);\r\n    extent[0] = 0; // In the case some sector angle is smaller than minAngle\r\n\r\n    var restAngle = PI2;\r\n    var valueSumLargerThanMinAngle = 0;\r\n    var currentAngle = startAngle;\r\n    var dir = clockwise ? 1 : -1;\r\n    data.setLayout({\r\n      viewRect: viewRect,\r\n      r: r\r\n    });\r\n    data.each(valueDim, function (value, idx) {\r\n      var angle;\r\n\r\n      if (isNaN(value)) {\r\n        data.setItemLayout(idx, {\r\n          angle: NaN,\r\n          startAngle: NaN,\r\n          endAngle: NaN,\r\n          clockwise: clockwise,\r\n          cx: cx,\r\n          cy: cy,\r\n          r0: r0,\r\n          r: roseType ? NaN : r\r\n        });\r\n        return;\r\n      } // FIXME \u517C\u5BB9 2.0 \u4F46\u662F roseType \u662F area \u7684\u65F6\u5019\u624D\u662F\u8FD9\u6837\uFF1F\r\n\r\n\r\n      if (roseType !== 'area') {\r\n        angle = sum === 0 && stillShowZeroSum ? unitRadian : value * unitRadian;\r\n      } else {\r\n        angle = PI2 / validDataCount;\r\n      }\r\n\r\n      if (angle < minAngle) {\r\n        angle = minAngle;\r\n        restAngle -= minAngle;\r\n      } else {\r\n        valueSumLargerThanMinAngle += value;\r\n      }\r\n\r\n      var endAngle = currentAngle + dir * angle;\r\n      data.setItemLayout(idx, {\r\n        angle: angle,\r\n        startAngle: currentAngle,\r\n        endAngle: endAngle,\r\n        clockwise: clockwise,\r\n        cx: cx,\r\n        cy: cy,\r\n        r0: r0,\r\n        r: roseType ? linearMap(value, extent, [r0, r]) : r\r\n      });\r\n      currentAngle = endAngle;\r\n    }); // Some sector is constrained by minAngle\r\n    // Rest sectors needs recalculate angle\r\n\r\n    if (restAngle < PI2 && validDataCount) {\r\n      // Average the angle if rest angle is not enough after all angles is\r\n      // Constrained by minAngle\r\n      if (restAngle <= 1e-3) {\r\n        var angle_1 = PI2 / validDataCount;\r\n        data.each(valueDim, function (value, idx) {\r\n          if (!isNaN(value)) {\r\n            var layout_1 = data.getItemLayout(idx);\r\n            layout_1.angle = angle_1;\r\n            layout_1.startAngle = startAngle + dir * idx * angle_1;\r\n            layout_1.endAngle = startAngle + dir * (idx + 1) * angle_1;\r\n          }\r\n        });\r\n      } else {\r\n        unitRadian = restAngle / valueSumLargerThanMinAngle;\r\n        currentAngle = startAngle;\r\n        data.each(valueDim, function (value, idx) {\r\n          if (!isNaN(value)) {\r\n            var layout_2 = data.getItemLayout(idx);\r\n            var angle = layout_2.angle === minAngle ? minAngle : value * unitRadian;\r\n            layout_2.startAngle = currentAngle;\r\n            layout_2.endAngle = currentAngle + dir * angle;\r\n            currentAngle += dir * angle;\r\n          }\r\n        });\r\n      }\r\n    }\r\n  });\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nexport default function dataFilter(seriesType) {\r\n  return {\r\n    seriesType: seriesType,\r\n    reset: function (seriesModel, ecModel) {\r\n      var legendModels = ecModel.findComponents({\r\n        mainType: 'legend'\r\n      });\r\n\r\n      if (!legendModels || !legendModels.length) {\r\n        return;\r\n      }\r\n\r\n      var data = seriesModel.getData();\r\n      data.filterSelf(function (idx) {\r\n        var name = data.getName(idx); // If in any legend component the status is not selected.\r\n\r\n        for (var i = 0; i < legendModels.length; i++) {\r\n          // @ts-ignore FIXME: LegendModel\r\n          if (!legendModels[i].isSelected(name)) {\r\n            return false;\r\n          }\r\n        }\r\n\r\n        return true;\r\n      });\r\n    }\r\n  };\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n// FIXME emphasis label position is not same with normal label position\r\nimport { parsePercent } from '../../util/number.js';\r\nimport { Point } from '../../util/graphic.js';\r\nimport { each, isNumber } from 'zrender/lib/core/util.js';\r\nimport { limitTurnAngle, limitSurfaceAngle } from '../../label/labelGuideHelper.js';\r\nimport { shiftLayoutOnY } from '../../label/labelLayoutHelper.js';\r\nvar RADIAN = Math.PI / 180;\r\n\r\nfunction adjustSingleSide(list, cx, cy, r, dir, viewWidth, viewHeight, viewLeft, viewTop, farthestX) {\r\n  if (list.length < 2) {\r\n    return;\r\n  }\r\n\r\n  ;\r\n\r\n  function recalculateXOnSemiToAlignOnEllipseCurve(semi) {\r\n    var rB = semi.rB;\r\n    var rB2 = rB * rB;\r\n\r\n    for (var i = 0; i < semi.list.length; i++) {\r\n      var item = semi.list[i];\r\n      var dy = Math.abs(item.label.y - cy); // horizontal r is always same with original r because x is not changed.\r\n\r\n      var rA = r + item.len;\r\n      var rA2 = rA * rA; // Use ellipse implicit function to calculate x\r\n\r\n      var dx = Math.sqrt((1 - Math.abs(dy * dy / rB2)) * rA2);\r\n      var newX = cx + (dx + item.len2) * dir;\r\n      var deltaX = newX - item.label.x;\r\n      var newTargetWidth = item.targetTextWidth - deltaX * dir; // text x is changed, so need to recalculate width.\r\n\r\n      constrainTextWidth(item, newTargetWidth, true);\r\n      item.label.x = newX;\r\n    }\r\n  } // Adjust X based on the shifted y. Make tight labels aligned on an ellipse curve.\r\n\r\n\r\n  function recalculateX(items) {\r\n    // Extremes of\r\n    var topSemi = {\r\n      list: [],\r\n      maxY: 0\r\n    };\r\n    var bottomSemi = {\r\n      list: [],\r\n      maxY: 0\r\n    };\r\n\r\n    for (var i = 0; i < items.length; i++) {\r\n      if (items[i].labelAlignTo !== 'none') {\r\n        continue;\r\n      }\r\n\r\n      var item = items[i];\r\n      var semi = item.label.y > cy ? bottomSemi : topSemi;\r\n      var dy = Math.abs(item.label.y - cy);\r\n\r\n      if (dy >= semi.maxY) {\r\n        var dx = item.label.x - cx - item.len2 * dir; // horizontal r is always same with original r because x is not changed.\r\n\r\n        var rA = r + item.len; // Canculate rB based on the topest / bottemest label.\r\n\r\n        var rB = Math.abs(dx) < rA ? Math.sqrt(dy * dy / (1 - dx * dx / rA / rA)) : rA;\r\n        semi.rB = rB;\r\n        semi.maxY = dy;\r\n      }\r\n\r\n      semi.list.push(item);\r\n    }\r\n\r\n    recalculateXOnSemiToAlignOnEllipseCurve(topSemi);\r\n    recalculateXOnSemiToAlignOnEllipseCurve(bottomSemi);\r\n  }\r\n\r\n  var len = list.length;\r\n\r\n  for (var i = 0; i < len; i++) {\r\n    if (list[i].position === 'outer' && list[i].labelAlignTo === 'labelLine') {\r\n      var dx = list[i].label.x - farthestX;\r\n      list[i].linePoints[1][0] += dx;\r\n      list[i].label.x = farthestX;\r\n    }\r\n  }\r\n\r\n  if (shiftLayoutOnY(list, viewTop, viewTop + viewHeight)) {\r\n    recalculateX(list);\r\n  }\r\n}\r\n\r\nfunction avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight, viewLeft, viewTop) {\r\n  var leftList = [];\r\n  var rightList = [];\r\n  var leftmostX = Number.MAX_VALUE;\r\n  var rightmostX = -Number.MAX_VALUE;\r\n\r\n  for (var i = 0; i < labelLayoutList.length; i++) {\r\n    var label = labelLayoutList[i].label;\r\n\r\n    if (isPositionCenter(labelLayoutList[i])) {\r\n      continue;\r\n    }\r\n\r\n    if (label.x < cx) {\r\n      leftmostX = Math.min(leftmostX, label.x);\r\n      leftList.push(labelLayoutList[i]);\r\n    } else {\r\n      rightmostX = Math.max(rightmostX, label.x);\r\n      rightList.push(labelLayoutList[i]);\r\n    }\r\n  }\r\n\r\n  for (var i = 0; i < labelLayoutList.length; i++) {\r\n    var layout = labelLayoutList[i];\r\n\r\n    if (!isPositionCenter(layout) && layout.linePoints) {\r\n      if (layout.labelStyleWidth != null) {\r\n        continue;\r\n      }\r\n\r\n      var label = layout.label;\r\n      var linePoints = layout.linePoints;\r\n      var targetTextWidth = void 0;\r\n\r\n      if (layout.labelAlignTo === 'edge') {\r\n        if (label.x < cx) {\r\n          targetTextWidth = linePoints[2][0] - layout.labelDistance - viewLeft - layout.edgeDistance;\r\n        } else {\r\n          targetTextWidth = viewLeft + viewWidth - layout.edgeDistance - linePoints[2][0] - layout.labelDistance;\r\n        }\r\n      } else if (layout.labelAlignTo === 'labelLine') {\r\n        if (label.x < cx) {\r\n          targetTextWidth = leftmostX - viewLeft - layout.bleedMargin;\r\n        } else {\r\n          targetTextWidth = viewLeft + viewWidth - rightmostX - layout.bleedMargin;\r\n        }\r\n      } else {\r\n        if (label.x < cx) {\r\n          targetTextWidth = label.x - viewLeft - layout.bleedMargin;\r\n        } else {\r\n          targetTextWidth = viewLeft + viewWidth - label.x - layout.bleedMargin;\r\n        }\r\n      }\r\n\r\n      layout.targetTextWidth = targetTextWidth;\r\n      constrainTextWidth(layout, targetTextWidth);\r\n    }\r\n  }\r\n\r\n  adjustSingleSide(rightList, cx, cy, r, 1, viewWidth, viewHeight, viewLeft, viewTop, rightmostX);\r\n  adjustSingleSide(leftList, cx, cy, r, -1, viewWidth, viewHeight, viewLeft, viewTop, leftmostX);\r\n\r\n  for (var i = 0; i < labelLayoutList.length; i++) {\r\n    var layout = labelLayoutList[i];\r\n\r\n    if (!isPositionCenter(layout) && layout.linePoints) {\r\n      var label = layout.label;\r\n      var linePoints = layout.linePoints;\r\n      var isAlignToEdge = layout.labelAlignTo === 'edge';\r\n      var padding = label.style.padding;\r\n      var paddingH = padding ? padding[1] + padding[3] : 0; // textRect.width already contains paddingH if bgColor is set\r\n\r\n      var extraPaddingH = label.style.backgroundColor ? 0 : paddingH;\r\n      var realTextWidth = layout.rect.width + extraPaddingH;\r\n      var dist = linePoints[1][0] - linePoints[2][0];\r\n\r\n      if (isAlignToEdge) {\r\n        if (label.x < cx) {\r\n          linePoints[2][0] = viewLeft + layout.edgeDistance + realTextWidth + layout.labelDistance;\r\n        } else {\r\n          linePoints[2][0] = viewLeft + viewWidth - layout.edgeDistance - realTextWidth - layout.labelDistance;\r\n        }\r\n      } else {\r\n        if (label.x < cx) {\r\n          linePoints[2][0] = label.x + layout.labelDistance;\r\n        } else {\r\n          linePoints[2][0] = label.x - layout.labelDistance;\r\n        }\r\n\r\n        linePoints[1][0] = linePoints[2][0] + dist;\r\n      }\r\n\r\n      linePoints[1][1] = linePoints[2][1] = label.y;\r\n    }\r\n  }\r\n}\r\n/**\r\n * Set max width of each label, and then wrap each label to the max width.\r\n *\r\n * @param layout label layout\r\n * @param availableWidth max width for the label to display\r\n * @param forceRecalculate recaculate the text layout even if the current width\r\n * is smaller than `availableWidth`. This is useful when the text was previously\r\n * wrapped by calling `constrainTextWidth` but now `availableWidth` changed, in\r\n * which case, previous wrapping should be redo.\r\n */\r\n\r\n\r\nfunction constrainTextWidth(layout, availableWidth, forceRecalculate) {\r\n  if (forceRecalculate === void 0) {\r\n    forceRecalculate = false;\r\n  }\r\n\r\n  if (layout.labelStyleWidth != null) {\r\n    // User-defined style.width has the highest priority.\r\n    return;\r\n  }\r\n\r\n  var label = layout.label;\r\n  var style = label.style;\r\n  var textRect = layout.rect;\r\n  var bgColor = style.backgroundColor;\r\n  var padding = style.padding;\r\n  var paddingH = padding ? padding[1] + padding[3] : 0;\r\n  var overflow = style.overflow; // textRect.width already contains paddingH if bgColor is set\r\n\r\n  var oldOuterWidth = textRect.width + (bgColor ? 0 : paddingH);\r\n\r\n  if (availableWidth < oldOuterWidth || forceRecalculate) {\r\n    var oldHeight = textRect.height;\r\n\r\n    if (overflow && overflow.match('break')) {\r\n      // Temporarily set background to be null to calculate\r\n      // the bounding box without background.\r\n      label.setStyle('backgroundColor', null); // Set constraining width\r\n\r\n      label.setStyle('width', availableWidth - paddingH); // This is the real bounding box of the text without padding.\r\n\r\n      var innerRect = label.getBoundingRect();\r\n      label.setStyle('width', Math.ceil(innerRect.width));\r\n      label.setStyle('backgroundColor', bgColor);\r\n    } else {\r\n      var availableInnerWidth = availableWidth - paddingH;\r\n      var newWidth = availableWidth < oldOuterWidth // Current text is too wide, use `availableWidth` as max width.\r\n      ? availableInnerWidth : // Current available width is enough, but the text may have\r\n      // already been wrapped with a smaller available width.\r\n      forceRecalculate ? availableInnerWidth > layout.unconstrainedWidth // Current available is larger than text width,\r\n      // so don't constrain width (otherwise it may have\r\n      // empty space in the background).\r\n      ? null // Current available is smaller than text width, so\r\n      // use the current available width as constraining\r\n      // width.\r\n      : availableInnerWidth : // Current available width is enough, so no need to\r\n      // constrain.\r\n      null;\r\n      label.setStyle('width', newWidth);\r\n    }\r\n\r\n    var newRect = label.getBoundingRect();\r\n    textRect.width = newRect.width;\r\n    var margin = (label.style.margin || 0) + 2.1;\r\n    textRect.height = newRect.height + margin;\r\n    textRect.y -= (textRect.height - oldHeight) / 2;\r\n  }\r\n}\r\n\r\nfunction isPositionCenter(sectorShape) {\r\n  // Not change x for center label\r\n  return sectorShape.position === 'center';\r\n}\r\n\r\nexport default function pieLabelLayout(seriesModel) {\r\n  var data = seriesModel.getData();\r\n  var labelLayoutList = [];\r\n  var cx;\r\n  var cy;\r\n  var hasLabelRotate = false;\r\n  var minShowLabelRadian = (seriesModel.get('minShowLabelAngle') || 0) * RADIAN;\r\n  var viewRect = data.getLayout('viewRect');\r\n  var r = data.getLayout('r');\r\n  var viewWidth = viewRect.width;\r\n  var viewLeft = viewRect.x;\r\n  var viewTop = viewRect.y;\r\n  var viewHeight = viewRect.height;\r\n\r\n  function setNotShow(el) {\r\n    el.ignore = true;\r\n  }\r\n\r\n  function isLabelShown(label) {\r\n    if (!label.ignore) {\r\n      return true;\r\n    }\r\n\r\n    for (var key in label.states) {\r\n      if (label.states[key].ignore === false) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  data.each(function (idx) {\r\n    var sector = data.getItemGraphicEl(idx);\r\n    var sectorShape = sector.shape;\r\n    var label = sector.getTextContent();\r\n    var labelLine = sector.getTextGuideLine();\r\n    var itemModel = data.getItemModel(idx);\r\n    var labelModel = itemModel.getModel('label'); // Use position in normal or emphasis\r\n\r\n    var labelPosition = labelModel.get('position') || itemModel.get(['emphasis', 'label', 'position']);\r\n    var labelDistance = labelModel.get('distanceToLabelLine');\r\n    var labelAlignTo = labelModel.get('alignTo');\r\n    var edgeDistance = parsePercent(labelModel.get('edgeDistance'), viewWidth);\r\n    var bleedMargin = labelModel.get('bleedMargin');\r\n    var labelLineModel = itemModel.getModel('labelLine');\r\n    var labelLineLen = labelLineModel.get('length');\r\n    labelLineLen = parsePercent(labelLineLen, viewWidth);\r\n    var labelLineLen2 = labelLineModel.get('length2');\r\n    labelLineLen2 = parsePercent(labelLineLen2, viewWidth);\r\n\r\n    if (Math.abs(sectorShape.endAngle - sectorShape.startAngle) < minShowLabelRadian) {\r\n      each(label.states, setNotShow);\r\n      label.ignore = true;\r\n\r\n      if (labelLine) {\r\n        each(labelLine.states, setNotShow);\r\n        labelLine.ignore = true;\r\n      }\r\n\r\n      return;\r\n    }\r\n\r\n    if (!isLabelShown(label)) {\r\n      return;\r\n    }\r\n\r\n    var midAngle = (sectorShape.startAngle + sectorShape.endAngle) / 2;\r\n    var nx = Math.cos(midAngle);\r\n    var ny = Math.sin(midAngle);\r\n    var textX;\r\n    var textY;\r\n    var linePoints;\r\n    var textAlign;\r\n    cx = sectorShape.cx;\r\n    cy = sectorShape.cy;\r\n    var isLabelInside = labelPosition === 'inside' || labelPosition === 'inner';\r\n\r\n    if (labelPosition === 'center') {\r\n      textX = sectorShape.cx;\r\n      textY = sectorShape.cy;\r\n      textAlign = 'center';\r\n    } else {\r\n      var x1 = (isLabelInside ? (sectorShape.r + sectorShape.r0) / 2 * nx : sectorShape.r * nx) + cx;\r\n      var y1 = (isLabelInside ? (sectorShape.r + sectorShape.r0) / 2 * ny : sectorShape.r * ny) + cy;\r\n      textX = x1 + nx * 3;\r\n      textY = y1 + ny * 3;\r\n\r\n      if (!isLabelInside) {\r\n        // For roseType\r\n        var x2 = x1 + nx * (labelLineLen + r - sectorShape.r);\r\n        var y2 = y1 + ny * (labelLineLen + r - sectorShape.r);\r\n        var x3 = x2 + (nx < 0 ? -1 : 1) * labelLineLen2;\r\n        var y3 = y2;\r\n\r\n        if (labelAlignTo === 'edge') {\r\n          // Adjust textX because text align of edge is opposite\r\n          textX = nx < 0 ? viewLeft + edgeDistance : viewLeft + viewWidth - edgeDistance;\r\n        } else {\r\n          textX = x3 + (nx < 0 ? -labelDistance : labelDistance);\r\n        }\r\n\r\n        textY = y3;\r\n        linePoints = [[x1, y1], [x2, y2], [x3, y3]];\r\n      }\r\n\r\n      textAlign = isLabelInside ? 'center' : labelAlignTo === 'edge' ? nx > 0 ? 'right' : 'left' : nx > 0 ? 'left' : 'right';\r\n    }\r\n\r\n    var PI = Math.PI;\r\n    var labelRotate = 0;\r\n    var rotate = labelModel.get('rotate');\r\n\r\n    if (isNumber(rotate)) {\r\n      labelRotate = rotate * (PI / 180);\r\n    } else if (labelPosition === 'center') {\r\n      labelRotate = 0;\r\n    } else if (rotate === 'radial' || rotate === true) {\r\n      var radialAngle = nx < 0 ? -midAngle + PI : -midAngle;\r\n      labelRotate = radialAngle;\r\n    } else if (rotate === 'tangential' && labelPosition !== 'outside' && labelPosition !== 'outer') {\r\n      var rad = Math.atan2(nx, ny);\r\n\r\n      if (rad < 0) {\r\n        rad = PI * 2 + rad;\r\n      }\r\n\r\n      var isDown = ny > 0;\r\n\r\n      if (isDown) {\r\n        rad = PI + rad;\r\n      }\r\n\r\n      labelRotate = rad - PI;\r\n    }\r\n\r\n    hasLabelRotate = !!labelRotate;\r\n    label.x = textX;\r\n    label.y = textY;\r\n    label.rotation = labelRotate;\r\n    label.setStyle({\r\n      verticalAlign: 'middle'\r\n    }); // Not sectorShape the inside label\r\n\r\n    if (!isLabelInside) {\r\n      var textRect = label.getBoundingRect().clone();\r\n      textRect.applyTransform(label.getComputedTransform()); // Text has a default 1px stroke. Exclude this.\r\n\r\n      var margin = (label.style.margin || 0) + 2.1;\r\n      textRect.y -= margin / 2;\r\n      textRect.height += margin;\r\n      labelLayoutList.push({\r\n        label: label,\r\n        labelLine: labelLine,\r\n        position: labelPosition,\r\n        len: labelLineLen,\r\n        len2: labelLineLen2,\r\n        minTurnAngle: labelLineModel.get('minTurnAngle'),\r\n        maxSurfaceAngle: labelLineModel.get('maxSurfaceAngle'),\r\n        surfaceNormal: new Point(nx, ny),\r\n        linePoints: linePoints,\r\n        textAlign: textAlign,\r\n        labelDistance: labelDistance,\r\n        labelAlignTo: labelAlignTo,\r\n        edgeDistance: edgeDistance,\r\n        bleedMargin: bleedMargin,\r\n        rect: textRect,\r\n        unconstrainedWidth: textRect.width,\r\n        labelStyleWidth: label.style.width\r\n      });\r\n    } else {\r\n      label.setStyle({\r\n        align: textAlign\r\n      });\r\n      var selectState = label.states.select;\r\n\r\n      if (selectState) {\r\n        selectState.x += label.x;\r\n        selectState.y += label.y;\r\n      }\r\n    }\r\n\r\n    sector.setTextConfig({\r\n      inside: isLabelInside\r\n    });\r\n  });\r\n\r\n  if (!hasLabelRotate && seriesModel.get('avoidLabelOverlap')) {\r\n    avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight, viewLeft, viewTop);\r\n  }\r\n\r\n  for (var i = 0; i < labelLayoutList.length; i++) {\r\n    var layout = labelLayoutList[i];\r\n    var label = layout.label;\r\n    var labelLine = layout.labelLine;\r\n    var notShowLabel = isNaN(label.x) || isNaN(label.y);\r\n\r\n    if (label) {\r\n      label.setStyle({\r\n        align: layout.textAlign\r\n      });\r\n\r\n      if (notShowLabel) {\r\n        each(label.states, setNotShow);\r\n        label.ignore = true;\r\n      }\r\n\r\n      var selectState = label.states.select;\r\n\r\n      if (selectState) {\r\n        selectState.x += label.x;\r\n        selectState.y += label.y;\r\n      }\r\n    }\r\n\r\n    if (labelLine) {\r\n      var linePoints = layout.linePoints;\r\n\r\n      if (notShowLabel || !linePoints) {\r\n        each(labelLine.states, setNotShow);\r\n        labelLine.ignore = true;\r\n      } else {\r\n        limitTurnAngle(linePoints, layout.minTurnAngle);\r\n        limitSurfaceAngle(linePoints, layout.surfaceNormal, layout.maxSurfaceAngle);\r\n        labelLine.setShape({\r\n          points: linePoints\r\n        }); // Set the anchor to the midpoint of sector\r\n\r\n        label.__hostTarget.textGuideLineConfig = {\r\n          anchor: new Point(linePoints[0][0], linePoints[0][1])\r\n        };\r\n      }\r\n    }\r\n  }\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport { extend, retrieve3 } from 'zrender/lib/core/util.js';\r\nimport * as graphic from '../../util/graphic.js';\r\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\r\nimport ChartView from '../../view/Chart.js';\r\nimport labelLayout from './labelLayout.js';\r\nimport { setLabelLineStyle, getLabelLineStatesModels } from '../../label/labelGuideHelper.js';\r\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\r\nimport { getSectorCornerRadius } from '../helper/sectorHelper.js';\r\nimport { saveOldStyle } from '../../animation/basicTransition.js';\r\nimport { getBasicPieLayout } from './pieLayout.js';\r\n/**\r\n * Piece of pie including Sector, Label, LabelLine\r\n */\r\n\r\nvar PiePiece =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(PiePiece, _super);\r\n\r\n  function PiePiece(data, idx, startAngle) {\r\n    var _this = _super.call(this) || this;\r\n\r\n    _this.z2 = 2;\r\n    var text = new graphic.Text();\r\n\r\n    _this.setTextContent(text);\r\n\r\n    _this.updateData(data, idx, startAngle, true);\r\n\r\n    return _this;\r\n  }\r\n\r\n  PiePiece.prototype.updateData = function (data, idx, startAngle, firstCreate) {\r\n    var sector = this;\r\n    var seriesModel = data.hostModel;\r\n    var itemModel = data.getItemModel(idx);\r\n    var emphasisModel = itemModel.getModel('emphasis');\r\n    var layout = data.getItemLayout(idx); // cornerRadius & innerCornerRadius doesn't exist in the item layout. Use `0` if null value is specified.\r\n    // see `setItemLayout` in `pieLayout.ts`.\r\n\r\n    var sectorShape = extend(getSectorCornerRadius(itemModel.getModel('itemStyle'), layout, true), layout); // Ignore NaN data.\r\n\r\n    if (isNaN(sectorShape.startAngle)) {\r\n      // Use NaN shape to avoid drawing shape.\r\n      sector.setShape(sectorShape);\r\n      return;\r\n    }\r\n\r\n    if (firstCreate) {\r\n      sector.setShape(sectorShape);\r\n      var animationType = seriesModel.getShallow('animationType');\r\n\r\n      if (seriesModel.ecModel.ssr) {\r\n        // Use scale animation in SSR mode(opacity?)\r\n        // Because CSS SVG animation doesn't support very customized shape animation.\r\n        graphic.initProps(sector, {\r\n          scaleX: 0,\r\n          scaleY: 0\r\n        }, seriesModel, {\r\n          dataIndex: idx,\r\n          isFrom: true\r\n        });\r\n        sector.originX = sectorShape.cx;\r\n        sector.originY = sectorShape.cy;\r\n      } else if (animationType === 'scale') {\r\n        sector.shape.r = layout.r0;\r\n        graphic.initProps(sector, {\r\n          shape: {\r\n            r: layout.r\r\n          }\r\n        }, seriesModel, idx);\r\n      } // Expansion\r\n      else {\r\n          if (startAngle != null) {\r\n            sector.setShape({\r\n              startAngle: startAngle,\r\n              endAngle: startAngle\r\n            });\r\n            graphic.initProps(sector, {\r\n              shape: {\r\n                startAngle: layout.startAngle,\r\n                endAngle: layout.endAngle\r\n              }\r\n            }, seriesModel, idx);\r\n          } else {\r\n            sector.shape.endAngle = layout.startAngle;\r\n            graphic.updateProps(sector, {\r\n              shape: {\r\n                endAngle: layout.endAngle\r\n              }\r\n            }, seriesModel, idx);\r\n          }\r\n        }\r\n    } else {\r\n      saveOldStyle(sector); // Transition animation from the old shape\r\n\r\n      graphic.updateProps(sector, {\r\n        shape: sectorShape\r\n      }, seriesModel, idx);\r\n    }\r\n\r\n    sector.useStyle(data.getItemVisual(idx, 'style'));\r\n    setStatesStylesFromModel(sector, itemModel);\r\n    var midAngle = (layout.startAngle + layout.endAngle) / 2;\r\n    var offset = seriesModel.get('selectedOffset');\r\n    var dx = Math.cos(midAngle) * offset;\r\n    var dy = Math.sin(midAngle) * offset;\r\n    var cursorStyle = itemModel.getShallow('cursor');\r\n    cursorStyle && sector.attr('cursor', cursorStyle);\r\n\r\n    this._updateLabel(seriesModel, data, idx);\r\n\r\n    sector.ensureState('emphasis').shape = extend({\r\n      r: layout.r + (emphasisModel.get('scale') ? emphasisModel.get('scaleSize') || 0 : 0)\r\n    }, getSectorCornerRadius(emphasisModel.getModel('itemStyle'), layout));\r\n    extend(sector.ensureState('select'), {\r\n      x: dx,\r\n      y: dy,\r\n      shape: getSectorCornerRadius(itemModel.getModel(['select', 'itemStyle']), layout)\r\n    });\r\n    extend(sector.ensureState('blur'), {\r\n      shape: getSectorCornerRadius(itemModel.getModel(['blur', 'itemStyle']), layout)\r\n    });\r\n    var labelLine = sector.getTextGuideLine();\r\n    var labelText = sector.getTextContent();\r\n    labelLine && extend(labelLine.ensureState('select'), {\r\n      x: dx,\r\n      y: dy\r\n    }); // TODO: needs dx, dy in zrender?\r\n\r\n    extend(labelText.ensureState('select'), {\r\n      x: dx,\r\n      y: dy\r\n    });\r\n    toggleHoverEmphasis(this, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\r\n  };\r\n\r\n  PiePiece.prototype._updateLabel = function (seriesModel, data, idx) {\r\n    var sector = this;\r\n    var itemModel = data.getItemModel(idx);\r\n    var labelLineModel = itemModel.getModel('labelLine');\r\n    var style = data.getItemVisual(idx, 'style');\r\n    var visualColor = style && style.fill;\r\n    var visualOpacity = style && style.opacity;\r\n    setLabelStyle(sector, getLabelStatesModels(itemModel), {\r\n      labelFetcher: data.hostModel,\r\n      labelDataIndex: idx,\r\n      inheritColor: visualColor,\r\n      defaultOpacity: visualOpacity,\r\n      defaultText: seriesModel.getFormattedLabel(idx, 'normal') || data.getName(idx)\r\n    });\r\n    var labelText = sector.getTextContent(); // Set textConfig on sector.\r\n\r\n    sector.setTextConfig({\r\n      // reset position, rotation\r\n      position: null,\r\n      rotation: null\r\n    }); // Make sure update style on labelText after setLabelStyle.\r\n    // Because setLabelStyle will replace a new style on it.\r\n\r\n    labelText.attr({\r\n      z2: 10\r\n    });\r\n    var labelPosition = seriesModel.get(['label', 'position']);\r\n\r\n    if (labelPosition !== 'outside' && labelPosition !== 'outer') {\r\n      sector.removeTextGuideLine();\r\n    } else {\r\n      var polyline = this.getTextGuideLine();\r\n\r\n      if (!polyline) {\r\n        polyline = new graphic.Polyline();\r\n        this.setTextGuideLine(polyline);\r\n      } // Default use item visual color\r\n\r\n\r\n      setLabelLineStyle(this, getLabelLineStatesModels(itemModel), {\r\n        stroke: visualColor,\r\n        opacity: retrieve3(labelLineModel.get(['lineStyle', 'opacity']), visualOpacity, 1)\r\n      });\r\n    }\r\n  };\r\n\r\n  return PiePiece;\r\n}(graphic.Sector); // Pie view\r\n\r\n\r\nvar PieView =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(PieView, _super);\r\n\r\n  function PieView() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.ignoreLabelLineUpdate = true;\r\n    return _this;\r\n  }\r\n\r\n  PieView.prototype.render = function (seriesModel, ecModel, api, payload) {\r\n    var data = seriesModel.getData();\r\n    var oldData = this._data;\r\n    var group = this.group;\r\n    var startAngle; // First render\r\n\r\n    if (!oldData && data.count() > 0) {\r\n      var shape = data.getItemLayout(0);\r\n\r\n      for (var s = 1; isNaN(shape && shape.startAngle) && s < data.count(); ++s) {\r\n        shape = data.getItemLayout(s);\r\n      }\r\n\r\n      if (shape) {\r\n        startAngle = shape.startAngle;\r\n      }\r\n    } // remove empty-circle if it exists\r\n\r\n\r\n    if (this._emptyCircleSector) {\r\n      group.remove(this._emptyCircleSector);\r\n    } // when all data are filtered, show lightgray empty circle\r\n\r\n\r\n    if (data.count() === 0 && seriesModel.get('showEmptyCircle')) {\r\n      var sector = new graphic.Sector({\r\n        shape: getBasicPieLayout(seriesModel, api)\r\n      });\r\n      sector.useStyle(seriesModel.getModel('emptyCircleStyle').getItemStyle());\r\n      this._emptyCircleSector = sector;\r\n      group.add(sector);\r\n    }\r\n\r\n    data.diff(oldData).add(function (idx) {\r\n      var piePiece = new PiePiece(data, idx, startAngle);\r\n      data.setItemGraphicEl(idx, piePiece);\r\n      group.add(piePiece);\r\n    }).update(function (newIdx, oldIdx) {\r\n      var piePiece = oldData.getItemGraphicEl(oldIdx);\r\n      piePiece.updateData(data, newIdx, startAngle);\r\n      piePiece.off('click');\r\n      group.add(piePiece);\r\n      data.setItemGraphicEl(newIdx, piePiece);\r\n    }).remove(function (idx) {\r\n      var piePiece = oldData.getItemGraphicEl(idx);\r\n      graphic.removeElementWithFadeOut(piePiece, seriesModel, idx);\r\n    }).execute();\r\n    labelLayout(seriesModel); // Always use initial animation.\r\n\r\n    if (seriesModel.get('animationTypeUpdate') !== 'expansion') {\r\n      this._data = data;\r\n    }\r\n  };\r\n\r\n  PieView.prototype.dispose = function () {};\r\n\r\n  PieView.prototype.containPoint = function (point, seriesModel) {\r\n    var data = seriesModel.getData();\r\n    var itemLayout = data.getItemLayout(0);\r\n\r\n    if (itemLayout) {\r\n      var dx = point[0] - itemLayout.cx;\r\n      var dy = point[1] - itemLayout.cy;\r\n      var radius = Math.sqrt(dx * dx + dy * dy);\r\n      return radius <= itemLayout.r && radius >= itemLayout.r0;\r\n    }\r\n  };\r\n\r\n  PieView.type = 'pie';\r\n  return PieView;\r\n}(ChartView);\r\n\r\nexport default PieView;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport prepareSeriesDataSchema from '../../data/helper/createDimensions.js';\r\nimport SeriesData from '../../data/SeriesData.js';\r\nimport { extend, isArray } from 'zrender/lib/core/util.js';\r\n/**\r\n * [Usage]:\r\n * (1)\r\n * createListSimply(seriesModel, ['value']);\r\n * (2)\r\n * createListSimply(seriesModel, {\r\n *     coordDimensions: ['value'],\r\n *     dimensionsCount: 5\r\n * });\r\n */\r\n\r\nexport default function createSeriesDataSimply(seriesModel, opt, nameList) {\r\n  opt = isArray(opt) && {\r\n    coordDimensions: opt\r\n  } || extend({\r\n    encodeDefine: seriesModel.getEncode()\r\n  }, opt);\r\n  var source = seriesModel.getSource();\r\n  var dimensions = prepareSeriesDataSchema(source, opt).dimensions;\r\n  var list = new SeriesData(dimensions, seriesModel);\r\n  list.initData(source, nameList);\r\n  return list;\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n/**\r\n * LegendVisualProvider is an bridge that pick encoded color from data and\r\n * provide to the legend component.\r\n */\r\nvar LegendVisualProvider =\r\n/** @class */\r\nfunction () {\r\n  function LegendVisualProvider( // Function to get data after filtered. It stores all the encoding info\r\n  getDataWithEncodedVisual, // Function to get raw data before filtered.\r\n  getRawData) {\r\n    this._getDataWithEncodedVisual = getDataWithEncodedVisual;\r\n    this._getRawData = getRawData;\r\n  }\r\n\r\n  LegendVisualProvider.prototype.getAllNames = function () {\r\n    var rawData = this._getRawData(); // We find the name from the raw data. In case it's filtered by the legend component.\r\n    // Normally, the name can be found in rawData, but can't be found in filtered data will display as gray.\r\n\r\n\r\n    return rawData.mapArray(rawData.getName);\r\n  };\r\n\r\n  LegendVisualProvider.prototype.containName = function (name) {\r\n    var rawData = this._getRawData();\r\n\r\n    return rawData.indexOfName(name) >= 0;\r\n  };\r\n\r\n  LegendVisualProvider.prototype.indexOfName = function (name) {\r\n    // Only get data when necessary.\r\n    // Because LegendVisualProvider constructor may be new in the stage that data is not prepared yet.\r\n    // Invoking Series#getData immediately will throw an error.\r\n    var dataWithEncodedVisual = this._getDataWithEncodedVisual();\r\n\r\n    return dataWithEncodedVisual.indexOfName(name);\r\n  };\r\n\r\n  LegendVisualProvider.prototype.getItemVisual = function (dataIndex, key) {\r\n    // Get encoded visual properties from final filtered data.\r\n    var dataWithEncodedVisual = this._getDataWithEncodedVisual();\r\n\r\n    return dataWithEncodedVisual.getItemVisual(dataIndex, key);\r\n  };\r\n\r\n  return LegendVisualProvider;\r\n}();\r\n\r\nexport default LegendVisualProvider;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport createSeriesDataSimply from '../helper/createSeriesDataSimply.js';\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport * as modelUtil from '../../util/model.js';\r\nimport { getPercentSeats } from '../../util/number.js';\r\nimport { makeSeriesEncodeForNameBased } from '../../data/helper/sourceHelper.js';\r\nimport LegendVisualProvider from '../../visual/LegendVisualProvider.js';\r\nimport SeriesModel from '../../model/Series.js';\r\nvar innerData = modelUtil.makeInner();\r\n\r\nvar PieSeriesModel =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(PieSeriesModel, _super);\r\n\r\n  function PieSeriesModel() {\r\n    return _super !== null && _super.apply(this, arguments) || this;\r\n  }\r\n  /**\r\n   * @overwrite\r\n   */\r\n\r\n\r\n  PieSeriesModel.prototype.init = function (option) {\r\n    _super.prototype.init.apply(this, arguments); // Enable legend selection for each data item\r\n    // Use a function instead of direct access because data reference may changed\r\n\r\n\r\n    this.legendVisualProvider = new LegendVisualProvider(zrUtil.bind(this.getData, this), zrUtil.bind(this.getRawData, this));\r\n\r\n    this._defaultLabelLine(option);\r\n  };\r\n  /**\r\n   * @overwrite\r\n   */\r\n\r\n\r\n  PieSeriesModel.prototype.mergeOption = function () {\r\n    _super.prototype.mergeOption.apply(this, arguments);\r\n  };\r\n  /**\r\n   * @overwrite\r\n   */\r\n\r\n\r\n  PieSeriesModel.prototype.getInitialData = function () {\r\n    return createSeriesDataSimply(this, {\r\n      coordDimensions: ['value'],\r\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForNameBased, this)\r\n    });\r\n  };\r\n  /**\r\n   * @overwrite\r\n   */\r\n\r\n\r\n  PieSeriesModel.prototype.getDataParams = function (dataIndex) {\r\n    var data = this.getData(); // update seats when data is changed\r\n\r\n    var dataInner = innerData(data);\r\n    var seats = dataInner.seats;\r\n\r\n    if (!seats) {\r\n      var valueList_1 = [];\r\n      data.each(data.mapDimension('value'), function (value) {\r\n        valueList_1.push(value);\r\n      });\r\n      seats = dataInner.seats = getPercentSeats(valueList_1, data.hostModel.get('percentPrecision'));\r\n    }\r\n\r\n    var params = _super.prototype.getDataParams.call(this, dataIndex); // seats may be empty when sum is 0\r\n\r\n\r\n    params.percent = seats[dataIndex] || 0;\r\n    params.$vars.push('percent');\r\n    return params;\r\n  };\r\n\r\n  PieSeriesModel.prototype._defaultLabelLine = function (option) {\r\n    // Extend labelLine emphasis\r\n    modelUtil.defaultEmphasis(option, 'labelLine', ['show']);\r\n    var labelLineNormalOpt = option.labelLine;\r\n    var labelLineEmphasisOpt = option.emphasis.labelLine; // Not show label line if `label.normal.show = false`\r\n\r\n    labelLineNormalOpt.show = labelLineNormalOpt.show && option.label.show;\r\n    labelLineEmphasisOpt.show = labelLineEmphasisOpt.show && option.emphasis.label.show;\r\n  };\r\n\r\n  PieSeriesModel.type = 'series.pie';\r\n  PieSeriesModel.defaultOption = {\r\n    // zlevel: 0,\r\n    z: 2,\r\n    legendHoverLink: true,\r\n    colorBy: 'data',\r\n    // \u9ED8\u8BA4\u5168\u5C40\u5C45\u4E2D\r\n    center: ['50%', '50%'],\r\n    radius: [0, '75%'],\r\n    // \u9ED8\u8BA4\u987A\u65F6\u9488\r\n    clockwise: true,\r\n    startAngle: 90,\r\n    // \u6700\u5C0F\u89D2\u5EA6\u6539\u4E3A0\r\n    minAngle: 0,\r\n    // If the angle of a sector less than `minShowLabelAngle`,\r\n    // the label will not be displayed.\r\n    minShowLabelAngle: 0,\r\n    // \u9009\u4E2D\u65F6\u6247\u533A\u504F\u79FB\u91CF\r\n    selectedOffset: 10,\r\n    // \u9009\u62E9\u6A21\u5F0F\uFF0C\u9ED8\u8BA4\u5173\u95ED\uFF0C\u53EF\u9009single\uFF0Cmultiple\r\n    // selectedMode: false,\r\n    // \u5357\u4E01\u683C\u5C14\u73AB\u7470\u56FE\u6A21\u5F0F\uFF0C'radius'\uFF08\u534A\u5F84\uFF09 | 'area'\uFF08\u9762\u79EF\uFF09\r\n    // roseType: null,\r\n    percentPrecision: 2,\r\n    // If still show when all data zero.\r\n    stillShowZeroSum: true,\r\n    // cursor: null,\r\n    left: 0,\r\n    top: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    width: null,\r\n    height: null,\r\n    label: {\r\n      // color: 'inherit',\r\n      // If rotate around circle\r\n      rotate: 0,\r\n      show: true,\r\n      overflow: 'truncate',\r\n      // 'outer', 'inside', 'center'\r\n      position: 'outer',\r\n      // 'none', 'labelLine', 'edge'. Works only when position is 'outer'\r\n      alignTo: 'none',\r\n      // Closest distance between label and chart edge.\r\n      // Works only position is 'outer' and alignTo is 'edge'.\r\n      edgeDistance: '25%',\r\n      // Works only position is 'outer' and alignTo is not 'edge'.\r\n      bleedMargin: 10,\r\n      // Distance between text and label line.\r\n      distanceToLabelLine: 5 // formatter: \u6807\u7B7E\u6587\u672C\u683C\u5F0F\u5668\uFF0C\u540C tooltip.formatter\uFF0C\u4E0D\u652F\u6301\u5F02\u6B65\u56DE\u8C03\r\n      // \u9ED8\u8BA4\u4F7F\u7528\u5168\u5C40\u6587\u672C\u6837\u5F0F\uFF0C\u8BE6\u89C1 textStyle\r\n      // distance: \u5F53position\u4E3Ainner\u65F6\u6709\u6548\uFF0C\u4E3Alabel\u4F4D\u7F6E\u5230\u5706\u5FC3\u7684\u8DDD\u79BB\u4E0E\u5706\u534A\u5F84(\u73AF\u72B6\u56FE\u4E3A\u5185\u5916\u534A\u5F84\u548C)\u7684\u6BD4\u4F8B\u7CFB\u6570\r\n\r\n    },\r\n    // Enabled when label.normal.position is 'outer'\r\n    labelLine: {\r\n      show: true,\r\n      // \u5F15\u5BFC\u7EBF\u4E24\u6BB5\u4E2D\u7684\u7B2C\u4E00\u6BB5\u957F\u5EA6\r\n      length: 15,\r\n      // \u5F15\u5BFC\u7EBF\u4E24\u6BB5\u4E2D\u7684\u7B2C\u4E8C\u6BB5\u957F\u5EA6\r\n      length2: 15,\r\n      smooth: false,\r\n      minTurnAngle: 90,\r\n      maxSurfaceAngle: 90,\r\n      lineStyle: {\r\n        // color: \u5404\u5F02,\r\n        width: 1,\r\n        type: 'solid'\r\n      }\r\n    },\r\n    itemStyle: {\r\n      borderWidth: 1,\r\n      borderJoin: 'round'\r\n    },\r\n    showEmptyCircle: true,\r\n    emptyCircleStyle: {\r\n      color: 'lightgray',\r\n      opacity: 1\r\n    },\r\n    labelLayout: {\r\n      // Hide the overlapped label.\r\n      hideOverlap: true\r\n    },\r\n    emphasis: {\r\n      scale: true,\r\n      scaleSize: 5\r\n    },\r\n    // If use strategy to avoid label overlapping\r\n    avoidLabelOverlap: true,\r\n    // Animation type. Valid values: expansion, scale\r\n    animationType: 'expansion',\r\n    animationDuration: 1000,\r\n    // Animation type when update. Valid values: transition, expansion\r\n    animationTypeUpdate: 'transition',\r\n    animationEasingUpdate: 'cubicInOut',\r\n    animationDurationUpdate: 500,\r\n    animationEasing: 'cubicInOut'\r\n  };\r\n  return PieSeriesModel;\r\n}(SeriesModel);\r\n\r\nexport default PieSeriesModel;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { isNumber } from 'zrender/lib/core/util.js';\r\nexport default function negativeDataFilter(seriesType) {\r\n  return {\r\n    seriesType: seriesType,\r\n    reset: function (seriesModel, ecModel) {\r\n      var data = seriesModel.getData();\r\n      data.filterSelf(function (idx) {\r\n        // handle negative value condition\r\n        var valueDim = data.mapDimension('value');\r\n        var curValue = data.get(valueDim, idx);\r\n\r\n        if (isNumber(curValue) && !isNaN(curValue) && curValue < 0) {\r\n          return false;\r\n        }\r\n\r\n        return true;\r\n      });\r\n    }\r\n  };\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { createLegacyDataSelectAction } from '../../legacy/dataSelectAction.js';\r\nimport pieLayout from '../pie/pieLayout.js';\r\nimport dataFilter from '../../processor/dataFilter.js';\r\nimport { curry } from 'zrender/lib/core/util.js';\r\nimport PieView from './PieView.js';\r\nimport PieSeriesModel from './PieSeries.js';\r\nimport negativeDataFilter from '../../processor/negativeDataFilter.js';\r\nexport function install(registers) {\r\n  registers.registerChartView(PieView);\r\n  registers.registerSeriesModel(PieSeriesModel);\r\n  createLegacyDataSelectAction('pie', registers.registerAction);\r\n  registers.registerLayout(curry(pieLayout, 'pie'));\r\n  registers.registerProcessor(dataFilter('pie'));\r\n  registers.registerProcessor(negativeDataFilter('pie'));\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport createSeriesData from '../helper/createSeriesData.js';\r\nimport SeriesModel from '../../model/Series.js';\r\n\r\nvar ScatterSeriesModel =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(ScatterSeriesModel, _super);\r\n\r\n  function ScatterSeriesModel() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = ScatterSeriesModel.type;\r\n    _this.hasSymbolVisual = true;\r\n    return _this;\r\n  }\r\n\r\n  ScatterSeriesModel.prototype.getInitialData = function (option, ecModel) {\r\n    return createSeriesData(null, this, {\r\n      useEncodeDefaulter: true\r\n    });\r\n  };\r\n\r\n  ScatterSeriesModel.prototype.getProgressive = function () {\r\n    var progressive = this.option.progressive;\r\n\r\n    if (progressive == null) {\r\n      // PENDING\r\n      return this.option.large ? 5e3 : this.get('progressive');\r\n    }\r\n\r\n    return progressive;\r\n  };\r\n\r\n  ScatterSeriesModel.prototype.getProgressiveThreshold = function () {\r\n    var progressiveThreshold = this.option.progressiveThreshold;\r\n\r\n    if (progressiveThreshold == null) {\r\n      // PENDING\r\n      return this.option.large ? 1e4 : this.get('progressiveThreshold');\r\n    }\r\n\r\n    return progressiveThreshold;\r\n  };\r\n\r\n  ScatterSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\r\n    return selectors.point(data.getItemLayout(dataIndex));\r\n  };\r\n\r\n  ScatterSeriesModel.prototype.getZLevelKey = function () {\r\n    // Each progressive series has individual key.\r\n    return this.getData().count() > this.getProgressiveThreshold() ? this.id : '';\r\n  };\r\n\r\n  ScatterSeriesModel.type = 'series.scatter';\r\n  ScatterSeriesModel.dependencies = ['grid', 'polar', 'geo', 'singleAxis', 'calendar'];\r\n  ScatterSeriesModel.defaultOption = {\r\n    coordinateSystem: 'cartesian2d',\r\n    // zlevel: 0,\r\n    z: 2,\r\n    legendHoverLink: true,\r\n    symbolSize: 10,\r\n    // symbolRotate: null,  // \u56FE\u5F62\u65CB\u8F6C\u63A7\u5236\r\n    large: false,\r\n    // Available when large is true\r\n    largeThreshold: 2000,\r\n    // cursor: null,\r\n    itemStyle: {\r\n      opacity: 0.8 // color: \u5404\u5F02\r\n\r\n    },\r\n    emphasis: {\r\n      scale: true\r\n    },\r\n    // If clip the overflow graphics\r\n    // Works on cartesian / polar series\r\n    clip: true,\r\n    select: {\r\n      itemStyle: {\r\n        borderColor: '#212121'\r\n      }\r\n    },\r\n    universalTransition: {\r\n      divideShape: 'clone'\r\n    } // progressive: null\r\n\r\n  };\r\n  return ScatterSeriesModel;\r\n}(SeriesModel);\r\n\r\nexport default ScatterSeriesModel;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\n/* global Float32Array */\r\n// TODO Batch by color\r\n\r\nimport * as graphic from '../../util/graphic.js';\r\nimport { createSymbol } from '../../util/symbol.js';\r\nimport { getECData } from '../../util/innerStore.js';\r\nvar BOOST_SIZE_THRESHOLD = 4;\r\n\r\nvar LargeSymbolPathShape =\r\n/** @class */\r\nfunction () {\r\n  function LargeSymbolPathShape() {}\r\n\r\n  return LargeSymbolPathShape;\r\n}();\r\n\r\nvar LargeSymbolPath =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(LargeSymbolPath, _super);\r\n\r\n  function LargeSymbolPath(opts) {\r\n    var _this = _super.call(this, opts) || this;\r\n\r\n    _this._off = 0;\r\n    _this.hoverDataIdx = -1;\r\n    return _this;\r\n  }\r\n\r\n  LargeSymbolPath.prototype.getDefaultShape = function () {\r\n    return new LargeSymbolPathShape();\r\n  };\r\n\r\n  LargeSymbolPath.prototype.reset = function () {\r\n    this.notClear = false;\r\n    this._off = 0;\r\n  };\r\n\r\n  LargeSymbolPath.prototype.buildPath = function (path, shape) {\r\n    var points = shape.points;\r\n    var size = shape.size;\r\n    var symbolProxy = this.symbolProxy;\r\n    var symbolProxyShape = symbolProxy.shape;\r\n    var ctx = path.getContext ? path.getContext() : path;\r\n    var canBoost = ctx && size[0] < BOOST_SIZE_THRESHOLD;\r\n    var softClipShape = this.softClipShape;\r\n    var i; // Do draw in afterBrush.\r\n\r\n    if (canBoost) {\r\n      this._ctx = ctx;\r\n      return;\r\n    }\r\n\r\n    this._ctx = null;\r\n\r\n    for (i = this._off; i < points.length;) {\r\n      var x = points[i++];\r\n      var y = points[i++];\r\n\r\n      if (isNaN(x) || isNaN(y)) {\r\n        continue;\r\n      }\r\n\r\n      if (softClipShape && !softClipShape.contain(x, y)) {\r\n        continue;\r\n      }\r\n\r\n      symbolProxyShape.x = x - size[0] / 2;\r\n      symbolProxyShape.y = y - size[1] / 2;\r\n      symbolProxyShape.width = size[0];\r\n      symbolProxyShape.height = size[1];\r\n      symbolProxy.buildPath(path, symbolProxyShape, true);\r\n    }\r\n\r\n    if (this.incremental) {\r\n      this._off = i;\r\n      this.notClear = true;\r\n    }\r\n  };\r\n\r\n  LargeSymbolPath.prototype.afterBrush = function () {\r\n    var shape = this.shape;\r\n    var points = shape.points;\r\n    var size = shape.size;\r\n    var ctx = this._ctx;\r\n    var softClipShape = this.softClipShape;\r\n    var i;\r\n\r\n    if (!ctx) {\r\n      return;\r\n    } // PENDING If style or other canvas status changed?\r\n\r\n\r\n    for (i = this._off; i < points.length;) {\r\n      var x = points[i++];\r\n      var y = points[i++];\r\n\r\n      if (isNaN(x) || isNaN(y)) {\r\n        continue;\r\n      }\r\n\r\n      if (softClipShape && !softClipShape.contain(x, y)) {\r\n        continue;\r\n      } // fillRect is faster than building a rect path and draw.\r\n      // And it support light globalCompositeOperation.\r\n\r\n\r\n      ctx.fillRect(x - size[0] / 2, y - size[1] / 2, size[0], size[1]);\r\n    }\r\n\r\n    if (this.incremental) {\r\n      this._off = i;\r\n      this.notClear = true;\r\n    }\r\n  };\r\n\r\n  LargeSymbolPath.prototype.findDataIndex = function (x, y) {\r\n    // TODO ???\r\n    // Consider transform\r\n    var shape = this.shape;\r\n    var points = shape.points;\r\n    var size = shape.size;\r\n    var w = Math.max(size[0], 4);\r\n    var h = Math.max(size[1], 4); // Not consider transform\r\n    // Treat each element as a rect\r\n    // top down traverse\r\n\r\n    for (var idx = points.length / 2 - 1; idx >= 0; idx--) {\r\n      var i = idx * 2;\r\n      var x0 = points[i] - w / 2;\r\n      var y0 = points[i + 1] - h / 2;\r\n\r\n      if (x >= x0 && y >= y0 && x <= x0 + w && y <= y0 + h) {\r\n        return idx;\r\n      }\r\n    }\r\n\r\n    return -1;\r\n  };\r\n\r\n  LargeSymbolPath.prototype.contain = function (x, y) {\r\n    var localPos = this.transformCoordToLocal(x, y);\r\n    var rect = this.getBoundingRect();\r\n    x = localPos[0];\r\n    y = localPos[1];\r\n\r\n    if (rect.contain(x, y)) {\r\n      // Cache found data index.\r\n      var dataIdx = this.hoverDataIdx = this.findDataIndex(x, y);\r\n      return dataIdx >= 0;\r\n    }\r\n\r\n    this.hoverDataIdx = -1;\r\n    return false;\r\n  };\r\n\r\n  LargeSymbolPath.prototype.getBoundingRect = function () {\r\n    // Ignore stroke for large symbol draw.\r\n    var rect = this._rect;\r\n\r\n    if (!rect) {\r\n      var shape = this.shape;\r\n      var points = shape.points;\r\n      var size = shape.size;\r\n      var w = size[0];\r\n      var h = size[1];\r\n      var minX = Infinity;\r\n      var minY = Infinity;\r\n      var maxX = -Infinity;\r\n      var maxY = -Infinity;\r\n\r\n      for (var i = 0; i < points.length;) {\r\n        var x = points[i++];\r\n        var y = points[i++];\r\n        minX = Math.min(x, minX);\r\n        maxX = Math.max(x, maxX);\r\n        minY = Math.min(y, minY);\r\n        maxY = Math.max(y, maxY);\r\n      }\r\n\r\n      rect = this._rect = new graphic.BoundingRect(minX - w / 2, minY - h / 2, maxX - minX + w, maxY - minY + h);\r\n    }\r\n\r\n    return rect;\r\n  };\r\n\r\n  return LargeSymbolPath;\r\n}(graphic.Path);\r\n\r\nvar LargeSymbolDraw =\r\n/** @class */\r\nfunction () {\r\n  function LargeSymbolDraw() {\r\n    this.group = new graphic.Group();\r\n  }\r\n  /**\r\n   * Update symbols draw by new data\r\n   */\r\n\r\n\r\n  LargeSymbolDraw.prototype.updateData = function (data, opt) {\r\n    this._clear();\r\n\r\n    var symbolEl = this._create();\r\n\r\n    symbolEl.setShape({\r\n      points: data.getLayout('points')\r\n    });\r\n\r\n    this._setCommon(symbolEl, data, opt);\r\n  };\r\n\r\n  LargeSymbolDraw.prototype.updateLayout = function (data) {\r\n    var points = data.getLayout('points');\r\n    this.group.eachChild(function (child) {\r\n      if (child.startIndex != null) {\r\n        var len = (child.endIndex - child.startIndex) * 2;\r\n        var byteOffset = child.startIndex * 4 * 2;\r\n        points = new Float32Array(points.buffer, byteOffset, len);\r\n      }\r\n\r\n      child.setShape('points', points); // Reset draw cursor.\r\n\r\n      child.reset();\r\n    });\r\n  };\r\n\r\n  LargeSymbolDraw.prototype.incrementalPrepareUpdate = function (data) {\r\n    this._clear();\r\n  };\r\n\r\n  LargeSymbolDraw.prototype.incrementalUpdate = function (taskParams, data, opt) {\r\n    var lastAdded = this._newAdded[0];\r\n    var points = data.getLayout('points');\r\n    var oldPoints = lastAdded && lastAdded.shape.points; // Merging the exists. Each element has 1e4 points.\r\n    // Consider the performance balance between too much elements and too much points in one shape(may affect hover optimization)\r\n\r\n    if (oldPoints && oldPoints.length < 2e4) {\r\n      var oldLen = oldPoints.length;\r\n      var newPoints = new Float32Array(oldLen + points.length); // Concat two array\r\n\r\n      newPoints.set(oldPoints);\r\n      newPoints.set(points, oldLen); // Update endIndex\r\n\r\n      lastAdded.endIndex = taskParams.end;\r\n      lastAdded.setShape({\r\n        points: newPoints\r\n      });\r\n    } else {\r\n      // Clear\r\n      this._newAdded = [];\r\n\r\n      var symbolEl = this._create();\r\n\r\n      symbolEl.startIndex = taskParams.start;\r\n      symbolEl.endIndex = taskParams.end;\r\n      symbolEl.incremental = true;\r\n      symbolEl.setShape({\r\n        points: points\r\n      });\r\n\r\n      this._setCommon(symbolEl, data, opt);\r\n    }\r\n  };\r\n\r\n  LargeSymbolDraw.prototype.eachRendered = function (cb) {\r\n    this._newAdded[0] && cb(this._newAdded[0]);\r\n  };\r\n\r\n  LargeSymbolDraw.prototype._create = function () {\r\n    var symbolEl = new LargeSymbolPath({\r\n      cursor: 'default'\r\n    });\r\n    symbolEl.ignoreCoarsePointer = true;\r\n    this.group.add(symbolEl);\r\n\r\n    this._newAdded.push(symbolEl);\r\n\r\n    return symbolEl;\r\n  };\r\n\r\n  LargeSymbolDraw.prototype._setCommon = function (symbolEl, data, opt) {\r\n    var hostModel = data.hostModel;\r\n    opt = opt || {};\r\n    var size = data.getVisual('symbolSize');\r\n    symbolEl.setShape('size', size instanceof Array ? size : [size, size]);\r\n    symbolEl.softClipShape = opt.clipShape || null; // Create symbolProxy to build path for each data\r\n\r\n    symbolEl.symbolProxy = createSymbol(data.getVisual('symbol'), 0, 0, 0, 0); // Use symbolProxy setColor method\r\n\r\n    symbolEl.setColor = symbolEl.symbolProxy.setColor;\r\n    var extrudeShadow = symbolEl.shape.size[0] < BOOST_SIZE_THRESHOLD;\r\n    symbolEl.useStyle( // Draw shadow when doing fillRect is extremely slow.\r\n    hostModel.getModel('itemStyle').getItemStyle(extrudeShadow ? ['color', 'shadowBlur', 'shadowColor'] : ['color']));\r\n    var globalStyle = data.getVisual('style');\r\n    var visualColor = globalStyle && globalStyle.fill;\r\n\r\n    if (visualColor) {\r\n      symbolEl.setColor(visualColor);\r\n    }\r\n\r\n    var ecData = getECData(symbolEl); // Enable tooltip\r\n    // PENDING May have performance issue when path is extremely large\r\n\r\n    ecData.seriesIndex = hostModel.seriesIndex;\r\n    symbolEl.on('mousemove', function (e) {\r\n      ecData.dataIndex = null;\r\n      var dataIndex = symbolEl.hoverDataIdx;\r\n\r\n      if (dataIndex >= 0) {\r\n        // Provide dataIndex for tooltip\r\n        ecData.dataIndex = dataIndex + (symbolEl.startIndex || 0);\r\n      }\r\n    });\r\n  };\r\n\r\n  LargeSymbolDraw.prototype.remove = function () {\r\n    this._clear();\r\n  };\r\n\r\n  LargeSymbolDraw.prototype._clear = function () {\r\n    this._newAdded = [];\r\n    this.group.removeAll();\r\n  };\r\n\r\n  return LargeSymbolDraw;\r\n}();\r\n\r\nexport default LargeSymbolDraw;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport SymbolDraw from '../helper/SymbolDraw.js';\r\nimport LargeSymbolDraw from '../helper/LargeSymbolDraw.js';\r\nimport pointsLayout from '../../layout/points.js';\r\nimport ChartView from '../../view/Chart.js';\r\n\r\nvar ScatterView =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(ScatterView, _super);\r\n\r\n  function ScatterView() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = ScatterView.type;\r\n    return _this;\r\n  }\r\n\r\n  ScatterView.prototype.render = function (seriesModel, ecModel, api) {\r\n    var data = seriesModel.getData();\r\n\r\n    var symbolDraw = this._updateSymbolDraw(data, seriesModel);\r\n\r\n    symbolDraw.updateData(data, {\r\n      // TODO\r\n      // If this parameter should be a shape or a bounding volume\r\n      // shape will be more general.\r\n      // But bounding volume like bounding rect will be much faster in the contain calculation\r\n      clipShape: this._getClipShape(seriesModel)\r\n    });\r\n    this._finished = true;\r\n  };\r\n\r\n  ScatterView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\r\n    var data = seriesModel.getData();\r\n\r\n    var symbolDraw = this._updateSymbolDraw(data, seriesModel);\r\n\r\n    symbolDraw.incrementalPrepareUpdate(data);\r\n    this._finished = false;\r\n  };\r\n\r\n  ScatterView.prototype.incrementalRender = function (taskParams, seriesModel, ecModel) {\r\n    this._symbolDraw.incrementalUpdate(taskParams, seriesModel.getData(), {\r\n      clipShape: this._getClipShape(seriesModel)\r\n    });\r\n\r\n    this._finished = taskParams.end === seriesModel.getData().count();\r\n  };\r\n\r\n  ScatterView.prototype.updateTransform = function (seriesModel, ecModel, api) {\r\n    var data = seriesModel.getData(); // Must mark group dirty and make sure the incremental layer will be cleared\r\n    // PENDING\r\n\r\n    this.group.dirty();\r\n\r\n    if (!this._finished || data.count() > 1e4) {\r\n      return {\r\n        update: true\r\n      };\r\n    } else {\r\n      var res = pointsLayout('').reset(seriesModel, ecModel, api);\r\n\r\n      if (res.progress) {\r\n        res.progress({\r\n          start: 0,\r\n          end: data.count(),\r\n          count: data.count()\r\n        }, data);\r\n      }\r\n\r\n      this._symbolDraw.updateLayout(data);\r\n    }\r\n  };\r\n\r\n  ScatterView.prototype.eachRendered = function (cb) {\r\n    this._symbolDraw && this._symbolDraw.eachRendered(cb);\r\n  };\r\n\r\n  ScatterView.prototype._getClipShape = function (seriesModel) {\r\n    var coordSys = seriesModel.coordinateSystem;\r\n    var clipArea = coordSys && coordSys.getArea && coordSys.getArea();\r\n    return seriesModel.get('clip', true) ? clipArea : null;\r\n  };\r\n\r\n  ScatterView.prototype._updateSymbolDraw = function (data, seriesModel) {\r\n    var symbolDraw = this._symbolDraw;\r\n    var pipelineContext = seriesModel.pipelineContext;\r\n    var isLargeDraw = pipelineContext.large;\r\n\r\n    if (!symbolDraw || isLargeDraw !== this._isLargeDraw) {\r\n      symbolDraw && symbolDraw.remove();\r\n      symbolDraw = this._symbolDraw = isLargeDraw ? new LargeSymbolDraw() : new SymbolDraw();\r\n      this._isLargeDraw = isLargeDraw;\r\n      this.group.removeAll();\r\n    }\r\n\r\n    this.group.add(symbolDraw.group);\r\n    return symbolDraw;\r\n  };\r\n\r\n  ScatterView.prototype.remove = function (ecModel, api) {\r\n    this._symbolDraw && this._symbolDraw.remove(true);\r\n    this._symbolDraw = null;\r\n  };\r\n\r\n  ScatterView.prototype.dispose = function () {};\r\n\r\n  ScatterView.type = 'scatter';\r\n  return ScatterView;\r\n}(ChartView);\r\n\r\nexport default ScatterView;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { use } from '../../extension.js';\r\nimport ScatterSeriesModel from './ScatterSeries.js';\r\nimport ScatterView from './ScatterView.js';\r\nimport { install as installGridSimple } from '../../component/grid/installSimple.js';\r\nimport layoutPoints from '../../layout/points.js';\r\nexport function install(registers) {\r\n  // In case developer forget to include grid component\r\n  use(installGridSimple);\r\n  registers.registerSeriesModel(ScatterSeriesModel);\r\n  registers.registerChartView(ScatterView);\r\n  registers.registerLayout(layoutPoints('scatter'));\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nexport default function radarLayout(ecModel) {\r\n  ecModel.eachSeriesByType('radar', function (seriesModel) {\r\n    var data = seriesModel.getData();\r\n    var points = [];\r\n    var coordSys = seriesModel.coordinateSystem;\r\n\r\n    if (!coordSys) {\r\n      return;\r\n    }\r\n\r\n    var axes = coordSys.getIndicatorAxes();\r\n    zrUtil.each(axes, function (axis, axisIndex) {\r\n      data.each(data.mapDimension(axes[axisIndex].dim), function (val, dataIndex) {\r\n        points[dataIndex] = points[dataIndex] || [];\r\n        var point = coordSys.dataToPoint(val, axisIndex);\r\n        points[dataIndex][axisIndex] = isValidPoint(point) ? point : getValueMissingPoint(coordSys);\r\n      });\r\n    }); // Close polygon\r\n\r\n    data.each(function (idx) {\r\n      // TODO\r\n      // Is it appropriate to connect to the next data when some data is missing?\r\n      // Or, should trade it like `connectNull` in line chart?\r\n      var firstPoint = zrUtil.find(points[idx], function (point) {\r\n        return isValidPoint(point);\r\n      }) || getValueMissingPoint(coordSys); // Copy the first actual point to the end of the array\r\n\r\n      points[idx].push(firstPoint.slice());\r\n      data.setItemLayout(idx, points[idx]);\r\n    });\r\n  });\r\n}\r\n\r\nfunction isValidPoint(point) {\r\n  return !isNaN(point[0]) && !isNaN(point[1]);\r\n}\r\n\r\nfunction getValueMissingPoint(coordSys) {\r\n  // It is error-prone to input [NaN, NaN] into polygon, polygon.\r\n  // (probably cause problem when refreshing or animating)\r\n  return [coordSys.cx, coordSys.cy];\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n// @ts-nocheck\r\n// Backward compat for radar chart in 2\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nexport default function radarBackwardCompat(option) {\r\n  var polarOptArr = option.polar;\r\n\r\n  if (polarOptArr) {\r\n    if (!zrUtil.isArray(polarOptArr)) {\r\n      polarOptArr = [polarOptArr];\r\n    }\r\n\r\n    var polarNotRadar_1 = [];\r\n    zrUtil.each(polarOptArr, function (polarOpt, idx) {\r\n      if (polarOpt.indicator) {\r\n        if (polarOpt.type && !polarOpt.shape) {\r\n          polarOpt.shape = polarOpt.type;\r\n        }\r\n\r\n        option.radar = option.radar || [];\r\n\r\n        if (!zrUtil.isArray(option.radar)) {\r\n          option.radar = [option.radar];\r\n        }\r\n\r\n        option.radar.push(polarOpt);\r\n      } else {\r\n        polarNotRadar_1.push(polarOpt);\r\n      }\r\n    });\r\n    option.polar = polarNotRadar_1;\r\n  }\r\n\r\n  zrUtil.each(option.series, function (seriesOpt) {\r\n    if (seriesOpt && seriesOpt.type === 'radar' && seriesOpt.polarIndex) {\r\n      seriesOpt.radarIndex = seriesOpt.polarIndex;\r\n    }\r\n  });\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport * as graphic from '../../util/graphic.js';\r\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport * as symbolUtil from '../../util/symbol.js';\r\nimport ChartView from '../../view/Chart.js';\r\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\r\nimport ZRImage from 'zrender/lib/graphic/Image.js';\r\nimport { saveOldStyle } from '../../animation/basicTransition.js';\r\n\r\nvar RadarView =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(RadarView, _super);\r\n\r\n  function RadarView() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = RadarView.type;\r\n    return _this;\r\n  }\r\n\r\n  RadarView.prototype.render = function (seriesModel, ecModel, api) {\r\n    var polar = seriesModel.coordinateSystem;\r\n    var group = this.group;\r\n    var data = seriesModel.getData();\r\n    var oldData = this._data;\r\n\r\n    function createSymbol(data, idx) {\r\n      var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\r\n\r\n      if (symbolType === 'none') {\r\n        return;\r\n      }\r\n\r\n      var symbolSize = symbolUtil.normalizeSymbolSize(data.getItemVisual(idx, 'symbolSize'));\r\n      var symbolPath = symbolUtil.createSymbol(symbolType, -1, -1, 2, 2);\r\n      var symbolRotate = data.getItemVisual(idx, 'symbolRotate') || 0;\r\n      symbolPath.attr({\r\n        style: {\r\n          strokeNoScale: true\r\n        },\r\n        z2: 100,\r\n        scaleX: symbolSize[0] / 2,\r\n        scaleY: symbolSize[1] / 2,\r\n        rotation: symbolRotate * Math.PI / 180 || 0\r\n      });\r\n      return symbolPath;\r\n    }\r\n\r\n    function updateSymbols(oldPoints, newPoints, symbolGroup, data, idx, isInit) {\r\n      // Simply rerender all\r\n      symbolGroup.removeAll();\r\n\r\n      for (var i = 0; i < newPoints.length - 1; i++) {\r\n        var symbolPath = createSymbol(data, idx);\r\n\r\n        if (symbolPath) {\r\n          symbolPath.__dimIdx = i;\r\n\r\n          if (oldPoints[i]) {\r\n            symbolPath.setPosition(oldPoints[i]);\r\n            graphic[isInit ? 'initProps' : 'updateProps'](symbolPath, {\r\n              x: newPoints[i][0],\r\n              y: newPoints[i][1]\r\n            }, seriesModel, idx);\r\n          } else {\r\n            symbolPath.setPosition(newPoints[i]);\r\n          }\r\n\r\n          symbolGroup.add(symbolPath);\r\n        }\r\n      }\r\n    }\r\n\r\n    function getInitialPoints(points) {\r\n      return zrUtil.map(points, function (pt) {\r\n        return [polar.cx, polar.cy];\r\n      });\r\n    }\r\n\r\n    data.diff(oldData).add(function (idx) {\r\n      var points = data.getItemLayout(idx);\r\n\r\n      if (!points) {\r\n        return;\r\n      }\r\n\r\n      var polygon = new graphic.Polygon();\r\n      var polyline = new graphic.Polyline();\r\n      var target = {\r\n        shape: {\r\n          points: points\r\n        }\r\n      };\r\n      polygon.shape.points = getInitialPoints(points);\r\n      polyline.shape.points = getInitialPoints(points);\r\n      graphic.initProps(polygon, target, seriesModel, idx);\r\n      graphic.initProps(polyline, target, seriesModel, idx);\r\n      var itemGroup = new graphic.Group();\r\n      var symbolGroup = new graphic.Group();\r\n      itemGroup.add(polyline);\r\n      itemGroup.add(polygon);\r\n      itemGroup.add(symbolGroup);\r\n      updateSymbols(polyline.shape.points, points, symbolGroup, data, idx, true);\r\n      data.setItemGraphicEl(idx, itemGroup);\r\n    }).update(function (newIdx, oldIdx) {\r\n      var itemGroup = oldData.getItemGraphicEl(oldIdx);\r\n      var polyline = itemGroup.childAt(0);\r\n      var polygon = itemGroup.childAt(1);\r\n      var symbolGroup = itemGroup.childAt(2);\r\n      var target = {\r\n        shape: {\r\n          points: data.getItemLayout(newIdx)\r\n        }\r\n      };\r\n\r\n      if (!target.shape.points) {\r\n        return;\r\n      }\r\n\r\n      updateSymbols(polyline.shape.points, target.shape.points, symbolGroup, data, newIdx, false);\r\n      saveOldStyle(polygon);\r\n      saveOldStyle(polyline);\r\n      graphic.updateProps(polyline, target, seriesModel);\r\n      graphic.updateProps(polygon, target, seriesModel);\r\n      data.setItemGraphicEl(newIdx, itemGroup);\r\n    }).remove(function (idx) {\r\n      group.remove(oldData.getItemGraphicEl(idx));\r\n    }).execute();\r\n    data.eachItemGraphicEl(function (itemGroup, idx) {\r\n      var itemModel = data.getItemModel(idx);\r\n      var polyline = itemGroup.childAt(0);\r\n      var polygon = itemGroup.childAt(1);\r\n      var symbolGroup = itemGroup.childAt(2); // Radar uses the visual encoded from itemStyle.\r\n\r\n      var itemStyle = data.getItemVisual(idx, 'style');\r\n      var color = itemStyle.fill;\r\n      group.add(itemGroup);\r\n      polyline.useStyle(zrUtil.defaults(itemModel.getModel('lineStyle').getLineStyle(), {\r\n        fill: 'none',\r\n        stroke: color\r\n      }));\r\n      setStatesStylesFromModel(polyline, itemModel, 'lineStyle');\r\n      setStatesStylesFromModel(polygon, itemModel, 'areaStyle');\r\n      var areaStyleModel = itemModel.getModel('areaStyle');\r\n      var polygonIgnore = areaStyleModel.isEmpty() && areaStyleModel.parentModel.isEmpty();\r\n      polygon.ignore = polygonIgnore;\r\n      zrUtil.each(['emphasis', 'select', 'blur'], function (stateName) {\r\n        var stateModel = itemModel.getModel([stateName, 'areaStyle']);\r\n        var stateIgnore = stateModel.isEmpty() && stateModel.parentModel.isEmpty(); // Won't be ignore if normal state is not ignore.\r\n\r\n        polygon.ensureState(stateName).ignore = stateIgnore && polygonIgnore;\r\n      });\r\n      polygon.useStyle(zrUtil.defaults(areaStyleModel.getAreaStyle(), {\r\n        fill: color,\r\n        opacity: 0.7,\r\n        decal: itemStyle.decal\r\n      }));\r\n      var emphasisModel = itemModel.getModel('emphasis');\r\n      var itemHoverStyle = emphasisModel.getModel('itemStyle').getItemStyle();\r\n      symbolGroup.eachChild(function (symbolPath) {\r\n        if (symbolPath instanceof ZRImage) {\r\n          var pathStyle = symbolPath.style;\r\n          symbolPath.useStyle(zrUtil.extend({\r\n            // TODO other properties like x, y ?\r\n            image: pathStyle.image,\r\n            x: pathStyle.x,\r\n            y: pathStyle.y,\r\n            width: pathStyle.width,\r\n            height: pathStyle.height\r\n          }, itemStyle));\r\n        } else {\r\n          symbolPath.useStyle(itemStyle);\r\n          symbolPath.setColor(color);\r\n          symbolPath.style.strokeNoScale = true;\r\n        }\r\n\r\n        var pathEmphasisState = symbolPath.ensureState('emphasis');\r\n        pathEmphasisState.style = zrUtil.clone(itemHoverStyle);\r\n        var defaultText = data.getStore().get(data.getDimensionIndex(symbolPath.__dimIdx), idx);\r\n        (defaultText == null || isNaN(defaultText)) && (defaultText = '');\r\n        setLabelStyle(symbolPath, getLabelStatesModels(itemModel), {\r\n          labelFetcher: data.hostModel,\r\n          labelDataIndex: idx,\r\n          labelDimIndex: symbolPath.__dimIdx,\r\n          defaultText: defaultText,\r\n          inheritColor: color,\r\n          defaultOpacity: itemStyle.opacity\r\n        });\r\n      });\r\n      toggleHoverEmphasis(itemGroup, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\r\n    });\r\n    this._data = data;\r\n  };\r\n\r\n  RadarView.prototype.remove = function () {\r\n    this.group.removeAll();\r\n    this._data = null;\r\n  };\r\n\r\n  RadarView.type = 'radar';\r\n  return RadarView;\r\n}(ChartView);\r\n\r\nexport default RadarView;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport SeriesModel from '../../model/Series.js';\r\nimport createSeriesDataSimply from '../helper/createSeriesDataSimply.js';\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport LegendVisualProvider from '../../visual/LegendVisualProvider.js';\r\nimport { createTooltipMarkup, retrieveVisualColorForTooltipMarker } from '../../component/tooltip/tooltipMarkup.js';\r\n\r\nvar RadarSeriesModel =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(RadarSeriesModel, _super);\r\n\r\n  function RadarSeriesModel() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = RadarSeriesModel.type;\r\n    _this.hasSymbolVisual = true;\r\n    return _this;\r\n  } // Overwrite\r\n\r\n\r\n  RadarSeriesModel.prototype.init = function (option) {\r\n    _super.prototype.init.apply(this, arguments); // Enable legend selection for each data item\r\n    // Use a function instead of direct access because data reference may changed\r\n\r\n\r\n    this.legendVisualProvider = new LegendVisualProvider(zrUtil.bind(this.getData, this), zrUtil.bind(this.getRawData, this));\r\n  };\r\n\r\n  RadarSeriesModel.prototype.getInitialData = function (option, ecModel) {\r\n    return createSeriesDataSimply(this, {\r\n      generateCoord: 'indicator_',\r\n      generateCoordCount: Infinity\r\n    });\r\n  };\r\n\r\n  RadarSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\r\n    var data = this.getData();\r\n    var coordSys = this.coordinateSystem;\r\n    var indicatorAxes = coordSys.getIndicatorAxes();\r\n    var name = this.getData().getName(dataIndex);\r\n    var nameToDisplay = name === '' ? this.name : name;\r\n    var markerColor = retrieveVisualColorForTooltipMarker(this, dataIndex);\r\n    return createTooltipMarkup('section', {\r\n      header: nameToDisplay,\r\n      sortBlocks: true,\r\n      blocks: zrUtil.map(indicatorAxes, function (axis) {\r\n        var val = data.get(data.mapDimension(axis.dim), dataIndex);\r\n        return createTooltipMarkup('nameValue', {\r\n          markerType: 'subItem',\r\n          markerColor: markerColor,\r\n          name: axis.name,\r\n          value: val,\r\n          sortParam: val\r\n        });\r\n      })\r\n    });\r\n  };\r\n\r\n  RadarSeriesModel.prototype.getTooltipPosition = function (dataIndex) {\r\n    if (dataIndex != null) {\r\n      var data_1 = this.getData();\r\n      var coordSys = this.coordinateSystem;\r\n      var values = data_1.getValues(zrUtil.map(coordSys.dimensions, function (dim) {\r\n        return data_1.mapDimension(dim);\r\n      }), dataIndex);\r\n\r\n      for (var i = 0, len = values.length; i < len; i++) {\r\n        if (!isNaN(values[i])) {\r\n          var indicatorAxes = coordSys.getIndicatorAxes();\r\n          return coordSys.coordToPoint(indicatorAxes[i].dataToCoord(values[i]), i);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  RadarSeriesModel.type = 'series.radar';\r\n  RadarSeriesModel.dependencies = ['radar'];\r\n  RadarSeriesModel.defaultOption = {\r\n    // zlevel: 0,\r\n    z: 2,\r\n    colorBy: 'data',\r\n    coordinateSystem: 'radar',\r\n    legendHoverLink: true,\r\n    radarIndex: 0,\r\n    lineStyle: {\r\n      width: 2,\r\n      type: 'solid',\r\n      join: 'round'\r\n    },\r\n    label: {\r\n      position: 'top'\r\n    },\r\n    // areaStyle: {\r\n    // },\r\n    // itemStyle: {}\r\n    symbolSize: 8 // symbolRotate: null\r\n\r\n  };\r\n  return RadarSeriesModel;\r\n}(SeriesModel);\r\n\r\nexport default RadarSeriesModel;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { use } from '../../extension.js';\r\nimport radarLayout from '../radar/radarLayout.js';\r\nimport dataFilter from '../../processor/dataFilter.js';\r\nimport backwardCompat from '../radar/backwardCompat.js';\r\nimport RadarView from './RadarView.js';\r\nimport RadarSeriesModel from './RadarSeries.js';\r\nimport { install as installRadarComponent } from '../../component/radar/install.js';\r\nexport function install(registers) {\r\n  use(installRadarComponent);\r\n  registers.registerChartView(RadarView);\r\n  registers.registerSeriesModel(RadarSeriesModel);\r\n  registers.registerLayout(radarLayout);\r\n  registers.registerProcessor(dataFilter('radar'));\r\n  registers.registerPreprocessor(backwardCompat);\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport * as graphic from '../../util/graphic.js';\r\nimport MapDraw from '../../component/helper/MapDraw.js';\r\nimport ChartView from '../../view/Chart.js';\r\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\r\nimport { setStatesFlag, Z2_EMPHASIS_LIFT } from '../../util/states.js';\r\n\r\nvar MapView =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(MapView, _super);\r\n\r\n  function MapView() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = MapView.type;\r\n    return _this;\r\n  }\r\n\r\n  MapView.prototype.render = function (mapModel, ecModel, api, payload) {\r\n    // Not render if it is an toggleSelect action from self\r\n    if (payload && payload.type === 'mapToggleSelect' && payload.from === this.uid) {\r\n      return;\r\n    }\r\n\r\n    var group = this.group;\r\n    group.removeAll();\r\n\r\n    if (mapModel.getHostGeoModel()) {\r\n      return;\r\n    }\r\n\r\n    if (this._mapDraw && payload && payload.type === 'geoRoam') {\r\n      this._mapDraw.resetForLabelLayout();\r\n    } // Not update map if it is an roam action from self\r\n\r\n\r\n    if (!(payload && payload.type === 'geoRoam' && payload.componentType === 'series' && payload.seriesId === mapModel.id)) {\r\n      if (mapModel.needsDrawMap) {\r\n        var mapDraw = this._mapDraw || new MapDraw(api);\r\n        group.add(mapDraw.group);\r\n        mapDraw.draw(mapModel, ecModel, api, this, payload);\r\n        this._mapDraw = mapDraw;\r\n      } else {\r\n        // Remove drawn map\r\n        this._mapDraw && this._mapDraw.remove();\r\n        this._mapDraw = null;\r\n      }\r\n    } else {\r\n      var mapDraw = this._mapDraw;\r\n      mapDraw && group.add(mapDraw.group);\r\n    }\r\n\r\n    mapModel.get('showLegendSymbol') && ecModel.getComponent('legend') && this._renderSymbols(mapModel, ecModel, api);\r\n  };\r\n\r\n  MapView.prototype.remove = function () {\r\n    this._mapDraw && this._mapDraw.remove();\r\n    this._mapDraw = null;\r\n    this.group.removeAll();\r\n  };\r\n\r\n  MapView.prototype.dispose = function () {\r\n    this._mapDraw && this._mapDraw.remove();\r\n    this._mapDraw = null;\r\n  };\r\n\r\n  MapView.prototype._renderSymbols = function (mapModel, ecModel, api) {\r\n    var originalData = mapModel.originalData;\r\n    var group = this.group;\r\n    originalData.each(originalData.mapDimension('value'), function (value, originalDataIndex) {\r\n      if (isNaN(value)) {\r\n        return;\r\n      }\r\n\r\n      var layout = originalData.getItemLayout(originalDataIndex);\r\n\r\n      if (!layout || !layout.point) {\r\n        // Not exists in map\r\n        return;\r\n      }\r\n\r\n      var point = layout.point;\r\n      var offset = layout.offset;\r\n      var circle = new graphic.Circle({\r\n        style: {\r\n          // Because the special of map draw.\r\n          // Which needs statistic of multiple series and draw on one map.\r\n          // And each series also need a symbol with legend color\r\n          //\r\n          // Layout and visual are put one the different data\r\n          // TODO\r\n          fill: mapModel.getData().getVisual('style').fill\r\n        },\r\n        shape: {\r\n          cx: point[0] + offset * 9,\r\n          cy: point[1],\r\n          r: 3\r\n        },\r\n        silent: true,\r\n        // Do not overlap the first series, on which labels are displayed.\r\n        z2: 8 + (!offset ? Z2_EMPHASIS_LIFT + 1 : 0)\r\n      }); // Only the series that has the first value on the same region is in charge of rendering the label.\r\n      // But consider the case:\r\n      // series: [\r\n      //     {id: 'X', type: 'map', map: 'm', {data: [{name: 'A', value: 11}, {name: 'B', {value: 22}]},\r\n      //     {id: 'Y', type: 'map', map: 'm', {data: [{name: 'A', value: 21}, {name: 'C', {value: 33}]}\r\n      // ]\r\n      // The offset `0` of item `A` is at series `X`, but of item `C` is at series `Y`.\r\n      // For backward compatibility, we follow the rule that render label `A` by the\r\n      // settings on series `X` but render label `C` by the settings on series `Y`.\r\n\r\n      if (!offset) {\r\n        var fullData = mapModel.mainSeries.getData();\r\n        var name_1 = originalData.getName(originalDataIndex);\r\n        var fullIndex_1 = fullData.indexOfName(name_1);\r\n        var itemModel = originalData.getItemModel(originalDataIndex);\r\n        var labelModel = itemModel.getModel('label');\r\n        var regionGroup = fullData.getItemGraphicEl(fullIndex_1); // `getFormattedLabel` needs to use `getData` inside. Here\r\n        // `mapModel.getData()` is shallow cloned from `mainSeries.getData()`.\r\n        // FIXME\r\n        // If this is not the `mainSeries`, the item model (like label formatter)\r\n        // set on original data item will never get. But it has been working\r\n        // like that from the beginning, and this scenario is rarely encountered.\r\n        // So it won't be fixed until we have to.\r\n\r\n        setLabelStyle(circle, getLabelStatesModels(itemModel), {\r\n          labelFetcher: {\r\n            getFormattedLabel: function (idx, state) {\r\n              return mapModel.getFormattedLabel(fullIndex_1, state);\r\n            }\r\n          },\r\n          defaultText: name_1\r\n        });\r\n        circle.disableLabelAnimation = true;\r\n\r\n        if (!labelModel.get('position')) {\r\n          circle.setTextConfig({\r\n            position: 'bottom'\r\n          });\r\n        }\r\n\r\n        regionGroup.onHoverStateChange = function (toState) {\r\n          setStatesFlag(circle, toState);\r\n        };\r\n      }\r\n\r\n      group.add(circle);\r\n    });\r\n  };\r\n\r\n  MapView.type = 'map';\r\n  return MapView;\r\n}(ChartView);\r\n\r\nexport default MapView;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport createSeriesDataSimply from '../helper/createSeriesDataSimply.js';\r\nimport SeriesModel from '../../model/Series.js';\r\nimport geoSourceManager from '../../coord/geo/geoSourceManager.js';\r\nimport { makeSeriesEncodeForNameBased } from '../../data/helper/sourceHelper.js';\r\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\r\nimport { createSymbol } from '../../util/symbol.js';\r\n\r\nvar MapSeries =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(MapSeries, _super);\r\n\r\n  function MapSeries() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = MapSeries.type; // Only first map series of same mapType will drawMap.\r\n\r\n    _this.needsDrawMap = false; // Group of all map series with same mapType\r\n\r\n    _this.seriesGroup = [];\r\n\r\n    _this.getTooltipPosition = function (dataIndex) {\r\n      if (dataIndex != null) {\r\n        var name_1 = this.getData().getName(dataIndex);\r\n        var geo = this.coordinateSystem;\r\n        var region = geo.getRegion(name_1);\r\n        return region && geo.dataToPoint(region.getCenter());\r\n      }\r\n    };\r\n\r\n    return _this;\r\n  }\r\n\r\n  MapSeries.prototype.getInitialData = function (option) {\r\n    var data = createSeriesDataSimply(this, {\r\n      coordDimensions: ['value'],\r\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForNameBased, this)\r\n    });\r\n    var dataNameMap = zrUtil.createHashMap();\r\n    var toAppendNames = [];\r\n\r\n    for (var i = 0, len = data.count(); i < len; i++) {\r\n      var name_2 = data.getName(i);\r\n      dataNameMap.set(name_2, true);\r\n    }\r\n\r\n    var geoSource = geoSourceManager.load(this.getMapType(), this.option.nameMap, this.option.nameProperty);\r\n    zrUtil.each(geoSource.regions, function (region) {\r\n      var name = region.name;\r\n\r\n      if (!dataNameMap.get(name)) {\r\n        toAppendNames.push(name);\r\n      }\r\n    }); // Complete data with missing regions. The consequent processes (like visual\r\n    // map and render) can not be performed without a \"full data\". For example,\r\n    // find `dataIndex` by name.\r\n\r\n    data.appendValues([], toAppendNames);\r\n    return data;\r\n  };\r\n  /**\r\n   * If no host geo model, return null, which means using a\r\n   * inner exclusive geo model.\r\n   */\r\n\r\n\r\n  MapSeries.prototype.getHostGeoModel = function () {\r\n    var geoIndex = this.option.geoIndex;\r\n    return geoIndex != null ? this.ecModel.getComponent('geo', geoIndex) : null;\r\n  };\r\n\r\n  MapSeries.prototype.getMapType = function () {\r\n    return (this.getHostGeoModel() || this).option.map;\r\n  }; // _fillOption(option, mapName) {\r\n  // Shallow clone\r\n  // option = zrUtil.extend({}, option);\r\n  // option.data = geoCreator.getFilledRegions(option.data, mapName, option.nameMap);\r\n  // return option;\r\n  // }\r\n\r\n\r\n  MapSeries.prototype.getRawValue = function (dataIndex) {\r\n    // Use value stored in data instead because it is calculated from multiple series\r\n    // FIXME Provide all value of multiple series ?\r\n    var data = this.getData();\r\n    return data.get(data.mapDimension('value'), dataIndex);\r\n  };\r\n  /**\r\n   * Get model of region\r\n   */\r\n\r\n\r\n  MapSeries.prototype.getRegionModel = function (regionName) {\r\n    var data = this.getData();\r\n    return data.getItemModel(data.indexOfName(regionName));\r\n  };\r\n  /**\r\n   * Map tooltip formatter\r\n   */\r\n\r\n\r\n  MapSeries.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\r\n    // FIXME orignalData and data is a bit confusing\r\n    var data = this.getData();\r\n    var value = this.getRawValue(dataIndex);\r\n    var name = data.getName(dataIndex);\r\n    var seriesGroup = this.seriesGroup;\r\n    var seriesNames = [];\r\n\r\n    for (var i = 0; i < seriesGroup.length; i++) {\r\n      var otherIndex = seriesGroup[i].originalData.indexOfName(name);\r\n      var valueDim = data.mapDimension('value');\r\n\r\n      if (!isNaN(seriesGroup[i].originalData.get(valueDim, otherIndex))) {\r\n        seriesNames.push(seriesGroup[i].name);\r\n      }\r\n    }\r\n\r\n    return createTooltipMarkup('section', {\r\n      header: seriesNames.join(', '),\r\n      noHeader: !seriesNames.length,\r\n      blocks: [createTooltipMarkup('nameValue', {\r\n        name: name,\r\n        value: value\r\n      })]\r\n    });\r\n  };\r\n\r\n  MapSeries.prototype.setZoom = function (zoom) {\r\n    this.option.zoom = zoom;\r\n  };\r\n\r\n  MapSeries.prototype.setCenter = function (center) {\r\n    this.option.center = center;\r\n  };\r\n\r\n  MapSeries.prototype.getLegendIcon = function (opt) {\r\n    var iconType = opt.icon || 'roundRect';\r\n    var icon = createSymbol(iconType, 0, 0, opt.itemWidth, opt.itemHeight, opt.itemStyle.fill);\r\n    icon.setStyle(opt.itemStyle); // Map do not use itemStyle.borderWidth as border width\r\n\r\n    icon.style.stroke = 'none'; // No rotation because no series visual symbol for map\r\n\r\n    if (iconType.indexOf('empty') > -1) {\r\n      icon.style.stroke = icon.style.fill;\r\n      icon.style.fill = '#fff';\r\n      icon.style.lineWidth = 2;\r\n    }\r\n\r\n    return icon;\r\n  };\r\n\r\n  MapSeries.type = 'series.map';\r\n  MapSeries.dependencies = ['geo'];\r\n  MapSeries.layoutMode = 'box';\r\n  MapSeries.defaultOption = {\r\n    // \u4E00\u7EA7\u5C42\u53E0\r\n    // zlevel: 0,\r\n    // \u4E8C\u7EA7\u5C42\u53E0\r\n    z: 2,\r\n    coordinateSystem: 'geo',\r\n    // map should be explicitly specified since ec3.\r\n    map: '',\r\n    // If `geoIndex` is not specified, a exclusive geo will be\r\n    // created. Otherwise use the specified geo component, and\r\n    // `map` and `mapType` are ignored.\r\n    // geoIndex: 0,\r\n    // 'center' | 'left' | 'right' | 'x%' | {number}\r\n    left: 'center',\r\n    // 'center' | 'top' | 'bottom' | 'x%' | {number}\r\n    top: 'center',\r\n    // right\r\n    // bottom\r\n    // width:\r\n    // height\r\n    // Aspect is width / height. Inited to be geoJson bbox aspect\r\n    // This parameter is used for scale this aspect\r\n    // Default value:\r\n    // for geoSVG source: 1,\r\n    // for geoJSON source: 0.75.\r\n    aspectScale: null,\r\n    // Layout with center and size\r\n    // If you want to put map in a fixed size box with right aspect ratio\r\n    // This two properties may be more convenient.\r\n    // layoutCenter: [50%, 50%]\r\n    // layoutSize: 100\r\n    showLegendSymbol: true,\r\n    // Define left-top, right-bottom coords to control view\r\n    // For example, [ [180, 90], [-180, -90] ],\r\n    // higher priority than center and zoom\r\n    boundingCoords: null,\r\n    // Default on center of map\r\n    center: null,\r\n    zoom: 1,\r\n    scaleLimit: null,\r\n    selectedMode: true,\r\n    label: {\r\n      show: false,\r\n      color: '#000'\r\n    },\r\n    // scaleLimit: null,\r\n    itemStyle: {\r\n      borderWidth: 0.5,\r\n      borderColor: '#444',\r\n      areaColor: '#eee'\r\n    },\r\n    emphasis: {\r\n      label: {\r\n        show: true,\r\n        color: 'rgb(100,0,0)'\r\n      },\r\n      itemStyle: {\r\n        areaColor: 'rgba(255,215,0,0.8)'\r\n      }\r\n    },\r\n    select: {\r\n      label: {\r\n        show: true,\r\n        color: 'rgb(100,0,0)'\r\n      },\r\n      itemStyle: {\r\n        color: 'rgba(255,215,0,0.8)'\r\n      }\r\n    },\r\n    nameProperty: 'name'\r\n  };\r\n  return MapSeries;\r\n}(SeriesModel);\r\n\r\nexport default MapSeries;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as zrUtil from 'zrender/lib/core/util.js'; // FIXME \u516C\u7528\uFF1F\r\n\r\nfunction dataStatistics(datas, statisticType) {\r\n  var dataNameMap = {};\r\n  zrUtil.each(datas, function (data) {\r\n    data.each(data.mapDimension('value'), function (value, idx) {\r\n      // Add prefix to avoid conflict with Object.prototype.\r\n      var mapKey = 'ec-' + data.getName(idx);\r\n      dataNameMap[mapKey] = dataNameMap[mapKey] || [];\r\n\r\n      if (!isNaN(value)) {\r\n        dataNameMap[mapKey].push(value);\r\n      }\r\n    });\r\n  });\r\n  return datas[0].map(datas[0].mapDimension('value'), function (value, idx) {\r\n    var mapKey = 'ec-' + datas[0].getName(idx);\r\n    var sum = 0;\r\n    var min = Infinity;\r\n    var max = -Infinity;\r\n    var len = dataNameMap[mapKey].length;\r\n\r\n    for (var i = 0; i < len; i++) {\r\n      min = Math.min(min, dataNameMap[mapKey][i]);\r\n      max = Math.max(max, dataNameMap[mapKey][i]);\r\n      sum += dataNameMap[mapKey][i];\r\n    }\r\n\r\n    var result;\r\n\r\n    if (statisticType === 'min') {\r\n      result = min;\r\n    } else if (statisticType === 'max') {\r\n      result = max;\r\n    } else if (statisticType === 'average') {\r\n      result = sum / len;\r\n    } else {\r\n      result = sum;\r\n    }\r\n\r\n    return len === 0 ? NaN : result;\r\n  });\r\n}\r\n\r\nexport default function mapDataStatistic(ecModel) {\r\n  var seriesGroups = {};\r\n  ecModel.eachSeriesByType('map', function (seriesModel) {\r\n    var hostGeoModel = seriesModel.getHostGeoModel();\r\n    var key = hostGeoModel ? 'o' + hostGeoModel.id : 'i' + seriesModel.getMapType();\r\n    (seriesGroups[key] = seriesGroups[key] || []).push(seriesModel);\r\n  });\r\n  zrUtil.each(seriesGroups, function (seriesList, key) {\r\n    var data = dataStatistics(zrUtil.map(seriesList, function (seriesModel) {\r\n      return seriesModel.getData();\r\n    }), seriesList[0].get('mapValueCalculation'));\r\n\r\n    for (var i = 0; i < seriesList.length; i++) {\r\n      seriesList[i].originalData = seriesList[i].getData();\r\n    } // FIXME Put where?\r\n\r\n\r\n    for (var i = 0; i < seriesList.length; i++) {\r\n      seriesList[i].seriesGroup = seriesList;\r\n      seriesList[i].needsDrawMap = i === 0 && !seriesList[i].getHostGeoModel();\r\n      seriesList[i].setData(data.cloneShallow());\r\n      seriesList[i].mainSeries = seriesList[0];\r\n    }\r\n  });\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nexport default function mapSymbolLayout(ecModel) {\r\n  var processedMapType = {};\r\n  ecModel.eachSeriesByType('map', function (mapSeries) {\r\n    var mapType = mapSeries.getMapType();\r\n\r\n    if (mapSeries.getHostGeoModel() || processedMapType[mapType]) {\r\n      return;\r\n    }\r\n\r\n    var mapSymbolOffsets = {};\r\n    zrUtil.each(mapSeries.seriesGroup, function (subMapSeries) {\r\n      var geo = subMapSeries.coordinateSystem;\r\n      var data = subMapSeries.originalData;\r\n\r\n      if (subMapSeries.get('showLegendSymbol') && ecModel.getComponent('legend')) {\r\n        data.each(data.mapDimension('value'), function (value, idx) {\r\n          var name = data.getName(idx);\r\n          var region = geo.getRegion(name); // If input series.data is [11, 22, '-'/null/undefined, 44],\r\n          // it will be filled with NaN: [11, 22, NaN, 44] and NaN will\r\n          // not be drawn. So here must validate if value is NaN.\r\n\r\n          if (!region || isNaN(value)) {\r\n            return;\r\n          }\r\n\r\n          var offset = mapSymbolOffsets[name] || 0;\r\n          var point = geo.dataToPoint(region.getCenter());\r\n          mapSymbolOffsets[name] = offset + 1;\r\n          data.setItemLayout(idx, {\r\n            point: point,\r\n            offset: offset\r\n          });\r\n        });\r\n      }\r\n    }); // Show label of those region not has legendIcon (which is offset 0)\r\n\r\n    var data = mapSeries.getData();\r\n    data.each(function (idx) {\r\n      var name = data.getName(idx);\r\n      var layout = data.getItemLayout(idx) || {};\r\n      layout.showLabel = !mapSymbolOffsets[name];\r\n      data.setItemLayout(idx, layout);\r\n    });\r\n    processedMapType[mapType] = true;\r\n  });\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { use } from '../../extension.js';\r\nimport MapView from './MapView.js';\r\nimport MapSeries from './MapSeries.js';\r\nimport mapDataStatistic from './mapDataStatistic.js';\r\nimport mapSymbolLayout from './mapSymbolLayout.js';\r\nimport { createLegacyDataSelectAction } from '../../legacy/dataSelectAction.js';\r\nimport { install as installGeo } from '../../component/geo/install.js';\r\nexport function install(registers) {\r\n  use(installGeo);\r\n  registers.registerChartView(MapView);\r\n  registers.registerSeriesModel(MapSeries);\r\n  registers.registerLayout(mapSymbolLayout);\r\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, mapDataStatistic);\r\n  createLegacyDataSelectAction('map', registers.registerAction);\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n/*\r\n* A third-party license is embedded for some of the code in this file:\r\n* The tree layoutHelper implementation was originally copied from\r\n* \"d3.js\"(https://github.com/d3/d3-hierarchy) with\r\n* some modifications made for this project.\r\n* (see more details in the comment of the specific method below.)\r\n* The use of the source code of this file is also subject to the terms\r\n* and consitions of the licence of \"d3.js\" (BSD-3Clause, see\r\n* </licenses/LICENSE-d3>).\r\n*/\r\n\r\n/**\r\n * @file The layout algorithm of node-link tree diagrams. Here we using Reingold-Tilford algorithm to drawing\r\n *       the tree.\r\n */\r\nimport * as layout from '../../util/layout.js';\r\n/**\r\n * Initialize all computational message for following algorithm.\r\n */\r\n\r\nexport function init(inRoot) {\r\n  var root = inRoot;\r\n  root.hierNode = {\r\n    defaultAncestor: null,\r\n    ancestor: root,\r\n    prelim: 0,\r\n    modifier: 0,\r\n    change: 0,\r\n    shift: 0,\r\n    i: 0,\r\n    thread: null\r\n  };\r\n  var nodes = [root];\r\n  var node;\r\n  var children;\r\n\r\n  while (node = nodes.pop()) {\r\n    // jshint ignore:line\r\n    children = node.children;\r\n\r\n    if (node.isExpand && children.length) {\r\n      var n = children.length;\r\n\r\n      for (var i = n - 1; i >= 0; i--) {\r\n        var child = children[i];\r\n        child.hierNode = {\r\n          defaultAncestor: null,\r\n          ancestor: child,\r\n          prelim: 0,\r\n          modifier: 0,\r\n          change: 0,\r\n          shift: 0,\r\n          i: i,\r\n          thread: null\r\n        };\r\n        nodes.push(child);\r\n      }\r\n    }\r\n  }\r\n}\r\n/**\r\n * The implementation of this function was originally copied from \"d3.js\"\r\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\r\n * with some modifications made for this program.\r\n * See the license statement at the head of this file.\r\n *\r\n * Computes a preliminary x coordinate for node. Before that, this function is\r\n * applied recursively to the children of node, as well as the function\r\n * apportion(). After spacing out the children by calling executeShifts(), the\r\n * node is placed to the midpoint of its outermost children.\r\n */\r\n\r\nexport function firstWalk(node, separation) {\r\n  var children = node.isExpand ? node.children : [];\r\n  var siblings = node.parentNode.children;\r\n  var subtreeW = node.hierNode.i ? siblings[node.hierNode.i - 1] : null;\r\n\r\n  if (children.length) {\r\n    executeShifts(node);\r\n    var midPoint = (children[0].hierNode.prelim + children[children.length - 1].hierNode.prelim) / 2;\r\n\r\n    if (subtreeW) {\r\n      node.hierNode.prelim = subtreeW.hierNode.prelim + separation(node, subtreeW);\r\n      node.hierNode.modifier = node.hierNode.prelim - midPoint;\r\n    } else {\r\n      node.hierNode.prelim = midPoint;\r\n    }\r\n  } else if (subtreeW) {\r\n    node.hierNode.prelim = subtreeW.hierNode.prelim + separation(node, subtreeW);\r\n  }\r\n\r\n  node.parentNode.hierNode.defaultAncestor = apportion(node, subtreeW, node.parentNode.hierNode.defaultAncestor || siblings[0], separation);\r\n}\r\n/**\r\n * The implementation of this function was originally copied from \"d3.js\"\r\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\r\n * with some modifications made for this program.\r\n * See the license statement at the head of this file.\r\n *\r\n * Computes all real x-coordinates by summing up the modifiers recursively.\r\n */\r\n\r\nexport function secondWalk(node) {\r\n  var nodeX = node.hierNode.prelim + node.parentNode.hierNode.modifier;\r\n  node.setLayout({\r\n    x: nodeX\r\n  }, true);\r\n  node.hierNode.modifier += node.parentNode.hierNode.modifier;\r\n}\r\nexport function separation(cb) {\r\n  return arguments.length ? cb : defaultSeparation;\r\n}\r\n/**\r\n * Transform the common coordinate to radial coordinate.\r\n */\r\n\r\nexport function radialCoordinate(rad, r) {\r\n  rad -= Math.PI / 2;\r\n  return {\r\n    x: r * Math.cos(rad),\r\n    y: r * Math.sin(rad)\r\n  };\r\n}\r\n/**\r\n * Get the layout position of the whole view.\r\n */\r\n\r\nexport function getViewRect(seriesModel, api) {\r\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\r\n    width: api.getWidth(),\r\n    height: api.getHeight()\r\n  });\r\n}\r\n/**\r\n * All other shifts, applied to the smaller subtrees between w- and w+, are\r\n * performed by this function.\r\n *\r\n * The implementation of this function was originally copied from \"d3.js\"\r\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\r\n * with some modifications made for this program.\r\n * See the license statement at the head of this file.\r\n */\r\n\r\nfunction executeShifts(node) {\r\n  var children = node.children;\r\n  var n = children.length;\r\n  var shift = 0;\r\n  var change = 0;\r\n\r\n  while (--n >= 0) {\r\n    var child = children[n];\r\n    child.hierNode.prelim += shift;\r\n    child.hierNode.modifier += shift;\r\n    change += child.hierNode.change;\r\n    shift += child.hierNode.shift + change;\r\n  }\r\n}\r\n/**\r\n * The implementation of this function was originally copied from \"d3.js\"\r\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\r\n * with some modifications made for this program.\r\n * See the license statement at the head of this file.\r\n *\r\n * The core of the algorithm. Here, a new subtree is combined with the\r\n * previous subtrees. Threads are used to traverse the inside and outside\r\n * contours of the left and right subtree up to the highest common level.\r\n * Whenever two nodes of the inside contours conflict, we compute the left\r\n * one of the greatest uncommon ancestors using the function nextAncestor()\r\n * and call moveSubtree() to shift the subtree and prepare the shifts of\r\n * smaller subtrees. Finally, we add a new thread (if necessary).\r\n */\r\n\r\n\r\nfunction apportion(subtreeV, subtreeW, ancestor, separation) {\r\n  if (subtreeW) {\r\n    var nodeOutRight = subtreeV;\r\n    var nodeInRight = subtreeV;\r\n    var nodeOutLeft = nodeInRight.parentNode.children[0];\r\n    var nodeInLeft = subtreeW;\r\n    var sumOutRight = nodeOutRight.hierNode.modifier;\r\n    var sumInRight = nodeInRight.hierNode.modifier;\r\n    var sumOutLeft = nodeOutLeft.hierNode.modifier;\r\n    var sumInLeft = nodeInLeft.hierNode.modifier;\r\n\r\n    while (nodeInLeft = nextRight(nodeInLeft), nodeInRight = nextLeft(nodeInRight), nodeInLeft && nodeInRight) {\r\n      nodeOutRight = nextRight(nodeOutRight);\r\n      nodeOutLeft = nextLeft(nodeOutLeft);\r\n      nodeOutRight.hierNode.ancestor = subtreeV;\r\n      var shift = nodeInLeft.hierNode.prelim + sumInLeft - nodeInRight.hierNode.prelim - sumInRight + separation(nodeInLeft, nodeInRight);\r\n\r\n      if (shift > 0) {\r\n        moveSubtree(nextAncestor(nodeInLeft, subtreeV, ancestor), subtreeV, shift);\r\n        sumInRight += shift;\r\n        sumOutRight += shift;\r\n      }\r\n\r\n      sumInLeft += nodeInLeft.hierNode.modifier;\r\n      sumInRight += nodeInRight.hierNode.modifier;\r\n      sumOutRight += nodeOutRight.hierNode.modifier;\r\n      sumOutLeft += nodeOutLeft.hierNode.modifier;\r\n    }\r\n\r\n    if (nodeInLeft && !nextRight(nodeOutRight)) {\r\n      nodeOutRight.hierNode.thread = nodeInLeft;\r\n      nodeOutRight.hierNode.modifier += sumInLeft - sumOutRight;\r\n    }\r\n\r\n    if (nodeInRight && !nextLeft(nodeOutLeft)) {\r\n      nodeOutLeft.hierNode.thread = nodeInRight;\r\n      nodeOutLeft.hierNode.modifier += sumInRight - sumOutLeft;\r\n      ancestor = subtreeV;\r\n    }\r\n  }\r\n\r\n  return ancestor;\r\n}\r\n/**\r\n * This function is used to traverse the right contour of a subtree.\r\n * It returns the rightmost child of node or the thread of node. The function\r\n * returns null if and only if node is on the highest depth of its subtree.\r\n */\r\n\r\n\r\nfunction nextRight(node) {\r\n  var children = node.children;\r\n  return children.length && node.isExpand ? children[children.length - 1] : node.hierNode.thread;\r\n}\r\n/**\r\n * This function is used to traverse the left contour of a subtree (or a subforest).\r\n * It returns the leftmost child of node or the thread of node. The function\r\n * returns null if and only if node is on the highest depth of its subtree.\r\n */\r\n\r\n\r\nfunction nextLeft(node) {\r\n  var children = node.children;\r\n  return children.length && node.isExpand ? children[0] : node.hierNode.thread;\r\n}\r\n/**\r\n * If nodeInLeft\u2019s ancestor is a sibling of node, returns nodeInLeft\u2019s ancestor.\r\n * Otherwise, returns the specified ancestor.\r\n */\r\n\r\n\r\nfunction nextAncestor(nodeInLeft, node, ancestor) {\r\n  return nodeInLeft.hierNode.ancestor.parentNode === node.parentNode ? nodeInLeft.hierNode.ancestor : ancestor;\r\n}\r\n/**\r\n * The implementation of this function was originally copied from \"d3.js\"\r\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\r\n * with some modifications made for this program.\r\n * See the license statement at the head of this file.\r\n *\r\n * Shifts the current subtree rooted at wr.\r\n * This is done by increasing prelim(w+) and modifier(w+) by shift.\r\n */\r\n\r\n\r\nfunction moveSubtree(wl, wr, shift) {\r\n  var change = shift / (wr.hierNode.i - wl.hierNode.i);\r\n  wr.hierNode.change -= change;\r\n  wr.hierNode.shift += shift;\r\n  wr.hierNode.modifier += shift;\r\n  wr.hierNode.prelim += shift;\r\n  wl.hierNode.change += change;\r\n}\r\n/**\r\n * The implementation of this function was originally copied from \"d3.js\"\r\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\r\n * with some modifications made for this program.\r\n * See the license statement at the head of this file.\r\n */\r\n\r\n\r\nfunction defaultSeparation(node1, node2) {\r\n  return node1.parentNode === node2.parentNode ? 1 : 2;\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport * as graphic from '../../util/graphic.js';\r\nimport { getECData } from '../../util/innerStore.js';\r\nimport SymbolClz from '../helper/Symbol.js';\r\nimport { radialCoordinate } from './layoutHelper.js';\r\nimport * as bbox from 'zrender/lib/core/bbox.js';\r\nimport View from '../../coord/View.js';\r\nimport * as roamHelper from '../../component/helper/roamHelper.js';\r\nimport RoamController from '../../component/helper/RoamController.js';\r\nimport { onIrrelevantElement } from '../../component/helper/cursorHelper.js';\r\nimport { parsePercent } from '../../util/number.js';\r\nimport ChartView from '../../view/Chart.js';\r\nimport Path from 'zrender/lib/graphic/Path.js';\r\nimport { setStatesStylesFromModel, setStatesFlag, setDefaultStateProxy, HOVER_STATE_BLUR } from '../../util/states.js';\r\n\r\nvar TreeEdgeShape =\r\n/** @class */\r\nfunction () {\r\n  function TreeEdgeShape() {\r\n    this.parentPoint = [];\r\n    this.childPoints = [];\r\n  }\r\n\r\n  return TreeEdgeShape;\r\n}();\r\n\r\nvar TreePath =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(TreePath, _super);\r\n\r\n  function TreePath(opts) {\r\n    return _super.call(this, opts) || this;\r\n  }\r\n\r\n  TreePath.prototype.getDefaultStyle = function () {\r\n    return {\r\n      stroke: '#000',\r\n      fill: null\r\n    };\r\n  };\r\n\r\n  TreePath.prototype.getDefaultShape = function () {\r\n    return new TreeEdgeShape();\r\n  };\r\n\r\n  TreePath.prototype.buildPath = function (ctx, shape) {\r\n    var childPoints = shape.childPoints;\r\n    var childLen = childPoints.length;\r\n    var parentPoint = shape.parentPoint;\r\n    var firstChildPos = childPoints[0];\r\n    var lastChildPos = childPoints[childLen - 1];\r\n\r\n    if (childLen === 1) {\r\n      ctx.moveTo(parentPoint[0], parentPoint[1]);\r\n      ctx.lineTo(firstChildPos[0], firstChildPos[1]);\r\n      return;\r\n    }\r\n\r\n    var orient = shape.orient;\r\n    var forkDim = orient === 'TB' || orient === 'BT' ? 0 : 1;\r\n    var otherDim = 1 - forkDim;\r\n    var forkPosition = parsePercent(shape.forkPosition, 1);\r\n    var tmpPoint = [];\r\n    tmpPoint[forkDim] = parentPoint[forkDim];\r\n    tmpPoint[otherDim] = parentPoint[otherDim] + (lastChildPos[otherDim] - parentPoint[otherDim]) * forkPosition;\r\n    ctx.moveTo(parentPoint[0], parentPoint[1]);\r\n    ctx.lineTo(tmpPoint[0], tmpPoint[1]);\r\n    ctx.moveTo(firstChildPos[0], firstChildPos[1]);\r\n    tmpPoint[forkDim] = firstChildPos[forkDim];\r\n    ctx.lineTo(tmpPoint[0], tmpPoint[1]);\r\n    tmpPoint[forkDim] = lastChildPos[forkDim];\r\n    ctx.lineTo(tmpPoint[0], tmpPoint[1]);\r\n    ctx.lineTo(lastChildPos[0], lastChildPos[1]);\r\n\r\n    for (var i = 1; i < childLen - 1; i++) {\r\n      var point = childPoints[i];\r\n      ctx.moveTo(point[0], point[1]);\r\n      tmpPoint[forkDim] = point[forkDim];\r\n      ctx.lineTo(tmpPoint[0], tmpPoint[1]);\r\n    }\r\n  };\r\n\r\n  return TreePath;\r\n}(Path);\r\n\r\nvar TreeView =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(TreeView, _super);\r\n\r\n  function TreeView() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = TreeView.type;\r\n    _this._mainGroup = new graphic.Group();\r\n    return _this;\r\n  }\r\n\r\n  TreeView.prototype.init = function (ecModel, api) {\r\n    this._controller = new RoamController(api.getZr());\r\n    this._controllerHost = {\r\n      target: this.group\r\n    };\r\n    this.group.add(this._mainGroup);\r\n  };\r\n\r\n  TreeView.prototype.render = function (seriesModel, ecModel, api) {\r\n    var data = seriesModel.getData();\r\n    var layoutInfo = seriesModel.layoutInfo;\r\n    var group = this._mainGroup;\r\n    var layout = seriesModel.get('layout');\r\n\r\n    if (layout === 'radial') {\r\n      group.x = layoutInfo.x + layoutInfo.width / 2;\r\n      group.y = layoutInfo.y + layoutInfo.height / 2;\r\n    } else {\r\n      group.x = layoutInfo.x;\r\n      group.y = layoutInfo.y;\r\n    }\r\n\r\n    this._updateViewCoordSys(seriesModel, api);\r\n\r\n    this._updateController(seriesModel, ecModel, api);\r\n\r\n    var oldData = this._data;\r\n    data.diff(oldData).add(function (newIdx) {\r\n      if (symbolNeedsDraw(data, newIdx)) {\r\n        // Create node and edge\r\n        updateNode(data, newIdx, null, group, seriesModel);\r\n      }\r\n    }).update(function (newIdx, oldIdx) {\r\n      var symbolEl = oldData.getItemGraphicEl(oldIdx);\r\n\r\n      if (!symbolNeedsDraw(data, newIdx)) {\r\n        symbolEl && removeNode(oldData, oldIdx, symbolEl, group, seriesModel);\r\n        return;\r\n      } // Update node and edge\r\n\r\n\r\n      updateNode(data, newIdx, symbolEl, group, seriesModel);\r\n    }).remove(function (oldIdx) {\r\n      var symbolEl = oldData.getItemGraphicEl(oldIdx); // When remove a collapsed node of subtree, since the collapsed\r\n      // node haven't been initialized with a symbol element,\r\n      // you can't found it's symbol element through index.\r\n      // so if we want to remove the symbol element we should insure\r\n      // that the symbol element is not null.\r\n\r\n      if (symbolEl) {\r\n        removeNode(oldData, oldIdx, symbolEl, group, seriesModel);\r\n      }\r\n    }).execute();\r\n    this._nodeScaleRatio = seriesModel.get('nodeScaleRatio');\r\n\r\n    this._updateNodeAndLinkScale(seriesModel);\r\n\r\n    if (seriesModel.get('expandAndCollapse') === true) {\r\n      data.eachItemGraphicEl(function (el, dataIndex) {\r\n        el.off('click').on('click', function () {\r\n          api.dispatchAction({\r\n            type: 'treeExpandAndCollapse',\r\n            seriesId: seriesModel.id,\r\n            dataIndex: dataIndex\r\n          });\r\n        });\r\n      });\r\n    }\r\n\r\n    this._data = data;\r\n  };\r\n\r\n  TreeView.prototype._updateViewCoordSys = function (seriesModel, api) {\r\n    var data = seriesModel.getData();\r\n    var points = [];\r\n    data.each(function (idx) {\r\n      var layout = data.getItemLayout(idx);\r\n\r\n      if (layout && !isNaN(layout.x) && !isNaN(layout.y)) {\r\n        points.push([+layout.x, +layout.y]);\r\n      }\r\n    });\r\n    var min = [];\r\n    var max = [];\r\n    bbox.fromPoints(points, min, max); // If don't Store min max when collapse the root node after roam,\r\n    // the root node will disappear.\r\n\r\n    var oldMin = this._min;\r\n    var oldMax = this._max; // If width or height is 0\r\n\r\n    if (max[0] - min[0] === 0) {\r\n      min[0] = oldMin ? oldMin[0] : min[0] - 1;\r\n      max[0] = oldMax ? oldMax[0] : max[0] + 1;\r\n    }\r\n\r\n    if (max[1] - min[1] === 0) {\r\n      min[1] = oldMin ? oldMin[1] : min[1] - 1;\r\n      max[1] = oldMax ? oldMax[1] : max[1] + 1;\r\n    }\r\n\r\n    var viewCoordSys = seriesModel.coordinateSystem = new View();\r\n    viewCoordSys.zoomLimit = seriesModel.get('scaleLimit');\r\n    viewCoordSys.setBoundingRect(min[0], min[1], max[0] - min[0], max[1] - min[1]);\r\n    viewCoordSys.setCenter(seriesModel.get('center'), api);\r\n    viewCoordSys.setZoom(seriesModel.get('zoom')); // Here we use viewCoordSys just for computing the 'position' and 'scale' of the group\r\n\r\n    this.group.attr({\r\n      x: viewCoordSys.x,\r\n      y: viewCoordSys.y,\r\n      scaleX: viewCoordSys.scaleX,\r\n      scaleY: viewCoordSys.scaleY\r\n    });\r\n    this._min = min;\r\n    this._max = max;\r\n  };\r\n\r\n  TreeView.prototype._updateController = function (seriesModel, ecModel, api) {\r\n    var _this = this;\r\n\r\n    var controller = this._controller;\r\n    var controllerHost = this._controllerHost;\r\n    var group = this.group;\r\n    controller.setPointerChecker(function (e, x, y) {\r\n      var rect = group.getBoundingRect();\r\n      rect.applyTransform(group.transform);\r\n      return rect.contain(x, y) && !onIrrelevantElement(e, api, seriesModel);\r\n    });\r\n    controller.enable(seriesModel.get('roam'));\r\n    controllerHost.zoomLimit = seriesModel.get('scaleLimit');\r\n    controllerHost.zoom = seriesModel.coordinateSystem.getZoom();\r\n    controller.off('pan').off('zoom').on('pan', function (e) {\r\n      roamHelper.updateViewOnPan(controllerHost, e.dx, e.dy);\r\n      api.dispatchAction({\r\n        seriesId: seriesModel.id,\r\n        type: 'treeRoam',\r\n        dx: e.dx,\r\n        dy: e.dy\r\n      });\r\n    }).on('zoom', function (e) {\r\n      roamHelper.updateViewOnZoom(controllerHost, e.scale, e.originX, e.originY);\r\n      api.dispatchAction({\r\n        seriesId: seriesModel.id,\r\n        type: 'treeRoam',\r\n        zoom: e.scale,\r\n        originX: e.originX,\r\n        originY: e.originY\r\n      });\r\n\r\n      _this._updateNodeAndLinkScale(seriesModel); // Only update label layout on zoom\r\n\r\n\r\n      api.updateLabelLayout();\r\n    });\r\n  };\r\n\r\n  TreeView.prototype._updateNodeAndLinkScale = function (seriesModel) {\r\n    var data = seriesModel.getData();\r\n\r\n    var nodeScale = this._getNodeGlobalScale(seriesModel);\r\n\r\n    data.eachItemGraphicEl(function (el, idx) {\r\n      el.setSymbolScale(nodeScale);\r\n    });\r\n  };\r\n\r\n  TreeView.prototype._getNodeGlobalScale = function (seriesModel) {\r\n    var coordSys = seriesModel.coordinateSystem;\r\n\r\n    if (coordSys.type !== 'view') {\r\n      return 1;\r\n    }\r\n\r\n    var nodeScaleRatio = this._nodeScaleRatio;\r\n    var groupZoom = coordSys.scaleX || 1; // Scale node when zoom changes\r\n\r\n    var roamZoom = coordSys.getZoom();\r\n    var nodeScale = (roamZoom - 1) * nodeScaleRatio + 1;\r\n    return nodeScale / groupZoom;\r\n  };\r\n\r\n  TreeView.prototype.dispose = function () {\r\n    this._controller && this._controller.dispose();\r\n    this._controllerHost = null;\r\n  };\r\n\r\n  TreeView.prototype.remove = function () {\r\n    this._mainGroup.removeAll();\r\n\r\n    this._data = null;\r\n  };\r\n\r\n  TreeView.type = 'tree';\r\n  return TreeView;\r\n}(ChartView);\r\n\r\nfunction symbolNeedsDraw(data, dataIndex) {\r\n  var layout = data.getItemLayout(dataIndex);\r\n  return layout && !isNaN(layout.x) && !isNaN(layout.y);\r\n}\r\n\r\nfunction updateNode(data, dataIndex, symbolEl, group, seriesModel) {\r\n  var isInit = !symbolEl;\r\n  var node = data.tree.getNodeByDataIndex(dataIndex);\r\n  var itemModel = node.getModel();\r\n  var visualColor = node.getVisual('style').fill;\r\n  var symbolInnerColor = node.isExpand === false && node.children.length !== 0 ? visualColor : '#fff';\r\n  var virtualRoot = data.tree.root;\r\n  var source = node.parentNode === virtualRoot ? node : node.parentNode || node;\r\n  var sourceSymbolEl = data.getItemGraphicEl(source.dataIndex);\r\n  var sourceLayout = source.getLayout();\r\n  var sourceOldLayout = sourceSymbolEl ? {\r\n    x: sourceSymbolEl.__oldX,\r\n    y: sourceSymbolEl.__oldY,\r\n    rawX: sourceSymbolEl.__radialOldRawX,\r\n    rawY: sourceSymbolEl.__radialOldRawY\r\n  } : sourceLayout;\r\n  var targetLayout = node.getLayout();\r\n\r\n  if (isInit) {\r\n    symbolEl = new SymbolClz(data, dataIndex, null, {\r\n      symbolInnerColor: symbolInnerColor,\r\n      useNameLabel: true\r\n    });\r\n    symbolEl.x = sourceOldLayout.x;\r\n    symbolEl.y = sourceOldLayout.y;\r\n  } else {\r\n    symbolEl.updateData(data, dataIndex, null, {\r\n      symbolInnerColor: symbolInnerColor,\r\n      useNameLabel: true\r\n    });\r\n  }\r\n\r\n  symbolEl.__radialOldRawX = symbolEl.__radialRawX;\r\n  symbolEl.__radialOldRawY = symbolEl.__radialRawY;\r\n  symbolEl.__radialRawX = targetLayout.rawX;\r\n  symbolEl.__radialRawY = targetLayout.rawY;\r\n  group.add(symbolEl);\r\n  data.setItemGraphicEl(dataIndex, symbolEl);\r\n  symbolEl.__oldX = symbolEl.x;\r\n  symbolEl.__oldY = symbolEl.y;\r\n  graphic.updateProps(symbolEl, {\r\n    x: targetLayout.x,\r\n    y: targetLayout.y\r\n  }, seriesModel);\r\n  var symbolPath = symbolEl.getSymbolPath();\r\n\r\n  if (seriesModel.get('layout') === 'radial') {\r\n    var realRoot = virtualRoot.children[0];\r\n    var rootLayout = realRoot.getLayout();\r\n    var length_1 = realRoot.children.length;\r\n    var rad = void 0;\r\n    var isLeft = void 0;\r\n\r\n    if (targetLayout.x === rootLayout.x && node.isExpand === true && realRoot.children.length) {\r\n      var center = {\r\n        x: (realRoot.children[0].getLayout().x + realRoot.children[length_1 - 1].getLayout().x) / 2,\r\n        y: (realRoot.children[0].getLayout().y + realRoot.children[length_1 - 1].getLayout().y) / 2\r\n      };\r\n      rad = Math.atan2(center.y - rootLayout.y, center.x - rootLayout.x);\r\n\r\n      if (rad < 0) {\r\n        rad = Math.PI * 2 + rad;\r\n      }\r\n\r\n      isLeft = center.x < rootLayout.x;\r\n\r\n      if (isLeft) {\r\n        rad = rad - Math.PI;\r\n      }\r\n    } else {\r\n      rad = Math.atan2(targetLayout.y - rootLayout.y, targetLayout.x - rootLayout.x);\r\n\r\n      if (rad < 0) {\r\n        rad = Math.PI * 2 + rad;\r\n      }\r\n\r\n      if (node.children.length === 0 || node.children.length !== 0 && node.isExpand === false) {\r\n        isLeft = targetLayout.x < rootLayout.x;\r\n\r\n        if (isLeft) {\r\n          rad = rad - Math.PI;\r\n        }\r\n      } else {\r\n        isLeft = targetLayout.x > rootLayout.x;\r\n\r\n        if (!isLeft) {\r\n          rad = rad - Math.PI;\r\n        }\r\n      }\r\n    }\r\n\r\n    var textPosition = isLeft ? 'left' : 'right';\r\n    var normalLabelModel = itemModel.getModel('label');\r\n    var rotate = normalLabelModel.get('rotate');\r\n    var labelRotateRadian = rotate * (Math.PI / 180);\r\n    var textContent = symbolPath.getTextContent();\r\n\r\n    if (textContent) {\r\n      symbolPath.setTextConfig({\r\n        position: normalLabelModel.get('position') || textPosition,\r\n        rotation: rotate == null ? -rad : labelRotateRadian,\r\n        origin: 'center'\r\n      });\r\n      textContent.setStyle('verticalAlign', 'middle');\r\n    }\r\n  } // Handle status\r\n\r\n\r\n  var focus = itemModel.get(['emphasis', 'focus']);\r\n  var focusDataIndices = focus === 'relative' ? zrUtil.concatArray(node.getAncestorsIndices(), node.getDescendantIndices()) : focus === 'ancestor' ? node.getAncestorsIndices() : focus === 'descendant' ? node.getDescendantIndices() : null;\r\n\r\n  if (focusDataIndices) {\r\n    // Modify the focus to data indices.\r\n    getECData(symbolEl).focus = focusDataIndices;\r\n  }\r\n\r\n  drawEdge(seriesModel, node, virtualRoot, symbolEl, sourceOldLayout, sourceLayout, targetLayout, group);\r\n\r\n  if (symbolEl.__edge) {\r\n    symbolEl.onHoverStateChange = function (toState) {\r\n      if (toState !== 'blur') {\r\n        // NOTE: Ensure the parent elements will been blurred firstly.\r\n        // According to the return of getAncestorsIndices and getDescendantIndices\r\n        // TODO: A bit tricky.\r\n        var parentEl = node.parentNode && data.getItemGraphicEl(node.parentNode.dataIndex);\r\n\r\n        if (!(parentEl && parentEl.hoverState === HOVER_STATE_BLUR)) {\r\n          setStatesFlag(symbolEl.__edge, toState);\r\n        }\r\n      }\r\n    };\r\n  }\r\n}\r\n\r\nfunction drawEdge(seriesModel, node, virtualRoot, symbolEl, sourceOldLayout, sourceLayout, targetLayout, group) {\r\n  var itemModel = node.getModel();\r\n  var edgeShape = seriesModel.get('edgeShape');\r\n  var layout = seriesModel.get('layout');\r\n  var orient = seriesModel.getOrient();\r\n  var curvature = seriesModel.get(['lineStyle', 'curveness']);\r\n  var edgeForkPosition = seriesModel.get('edgeForkPosition');\r\n  var lineStyle = itemModel.getModel('lineStyle').getLineStyle();\r\n  var edge = symbolEl.__edge; // curve edge from node -> parent\r\n  // polyline edge from node -> children\r\n\r\n  if (edgeShape === 'curve') {\r\n    if (node.parentNode && node.parentNode !== virtualRoot) {\r\n      if (!edge) {\r\n        edge = symbolEl.__edge = new graphic.BezierCurve({\r\n          shape: getEdgeShape(layout, orient, curvature, sourceOldLayout, sourceOldLayout)\r\n        });\r\n      }\r\n\r\n      graphic.updateProps(edge, {\r\n        shape: getEdgeShape(layout, orient, curvature, sourceLayout, targetLayout)\r\n      }, seriesModel);\r\n    }\r\n  } else if (edgeShape === 'polyline') {\r\n    if (layout === 'orthogonal') {\r\n      if (node !== virtualRoot && node.children && node.children.length !== 0 && node.isExpand === true) {\r\n        var children = node.children;\r\n        var childPoints = [];\r\n\r\n        for (var i = 0; i < children.length; i++) {\r\n          var childLayout = children[i].getLayout();\r\n          childPoints.push([childLayout.x, childLayout.y]);\r\n        }\r\n\r\n        if (!edge) {\r\n          edge = symbolEl.__edge = new TreePath({\r\n            shape: {\r\n              parentPoint: [targetLayout.x, targetLayout.y],\r\n              childPoints: [[targetLayout.x, targetLayout.y]],\r\n              orient: orient,\r\n              forkPosition: edgeForkPosition\r\n            }\r\n          });\r\n        }\r\n\r\n        graphic.updateProps(edge, {\r\n          shape: {\r\n            parentPoint: [targetLayout.x, targetLayout.y],\r\n            childPoints: childPoints\r\n          }\r\n        }, seriesModel);\r\n      }\r\n    } else {\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        throw new Error('The polyline edgeShape can only be used in orthogonal layout');\r\n      }\r\n    }\r\n  } // show all edge when edgeShape is 'curve', filter node `isExpand` is false when edgeShape is 'polyline'\r\n\r\n\r\n  if (edge && !(edgeShape === 'polyline' && !node.isExpand)) {\r\n    edge.useStyle(zrUtil.defaults({\r\n      strokeNoScale: true,\r\n      fill: null\r\n    }, lineStyle));\r\n    setStatesStylesFromModel(edge, itemModel, 'lineStyle');\r\n    setDefaultStateProxy(edge);\r\n    group.add(edge);\r\n  }\r\n}\r\n\r\nfunction removeNodeEdge(node, data, group, seriesModel, removeAnimationOpt) {\r\n  var virtualRoot = data.tree.root;\r\n\r\n  var _a = getSourceNode(virtualRoot, node),\r\n      source = _a.source,\r\n      sourceLayout = _a.sourceLayout;\r\n\r\n  var symbolEl = data.getItemGraphicEl(node.dataIndex);\r\n\r\n  if (!symbolEl) {\r\n    return;\r\n  }\r\n\r\n  var sourceSymbolEl = data.getItemGraphicEl(source.dataIndex);\r\n  var sourceEdge = sourceSymbolEl.__edge; // 1. when expand the sub tree, delete the children node should delete the edge of\r\n  // the source at the same time. because the polyline edge shape is only owned by the source.\r\n  // 2.when the node is the only children of the source, delete the node should delete the edge of\r\n  // the source at the same time. the same reason as above.\r\n\r\n  var edge = symbolEl.__edge || (source.isExpand === false || source.children.length === 1 ? sourceEdge : undefined);\r\n  var edgeShape = seriesModel.get('edgeShape');\r\n  var layoutOpt = seriesModel.get('layout');\r\n  var orient = seriesModel.get('orient');\r\n  var curvature = seriesModel.get(['lineStyle', 'curveness']);\r\n\r\n  if (edge) {\r\n    if (edgeShape === 'curve') {\r\n      graphic.removeElement(edge, {\r\n        shape: getEdgeShape(layoutOpt, orient, curvature, sourceLayout, sourceLayout),\r\n        style: {\r\n          opacity: 0\r\n        }\r\n      }, seriesModel, {\r\n        cb: function () {\r\n          group.remove(edge);\r\n        },\r\n        removeOpt: removeAnimationOpt\r\n      });\r\n    } else if (edgeShape === 'polyline' && seriesModel.get('layout') === 'orthogonal') {\r\n      graphic.removeElement(edge, {\r\n        shape: {\r\n          parentPoint: [sourceLayout.x, sourceLayout.y],\r\n          childPoints: [[sourceLayout.x, sourceLayout.y]]\r\n        },\r\n        style: {\r\n          opacity: 0\r\n        }\r\n      }, seriesModel, {\r\n        cb: function () {\r\n          group.remove(edge);\r\n        },\r\n        removeOpt: removeAnimationOpt\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nfunction getSourceNode(virtualRoot, node) {\r\n  var source = node.parentNode === virtualRoot ? node : node.parentNode || node;\r\n  var sourceLayout;\r\n\r\n  while (sourceLayout = source.getLayout(), sourceLayout == null) {\r\n    source = source.parentNode === virtualRoot ? source : source.parentNode || source;\r\n  }\r\n\r\n  return {\r\n    source: source,\r\n    sourceLayout: sourceLayout\r\n  };\r\n}\r\n\r\nfunction removeNode(data, dataIndex, symbolEl, group, seriesModel) {\r\n  var node = data.tree.getNodeByDataIndex(dataIndex);\r\n  var virtualRoot = data.tree.root;\r\n  var sourceLayout = getSourceNode(virtualRoot, node).sourceLayout; // Use same duration and easing with update to have more consistent animation.\r\n\r\n  var removeAnimationOpt = {\r\n    duration: seriesModel.get('animationDurationUpdate'),\r\n    easing: seriesModel.get('animationEasingUpdate')\r\n  };\r\n  graphic.removeElement(symbolEl, {\r\n    x: sourceLayout.x + 1,\r\n    y: sourceLayout.y + 1\r\n  }, seriesModel, {\r\n    cb: function () {\r\n      group.remove(symbolEl);\r\n      data.setItemGraphicEl(dataIndex, null);\r\n    },\r\n    removeOpt: removeAnimationOpt\r\n  });\r\n  symbolEl.fadeOut(null, data.hostModel, {\r\n    fadeLabel: true,\r\n    animation: removeAnimationOpt\r\n  }); // remove edge as parent node\r\n\r\n  node.children.forEach(function (childNode) {\r\n    removeNodeEdge(childNode, data, group, seriesModel, removeAnimationOpt);\r\n  }); // remove edge as child node\r\n\r\n  removeNodeEdge(node, data, group, seriesModel, removeAnimationOpt);\r\n}\r\n\r\nfunction getEdgeShape(layoutOpt, orient, curvature, sourceLayout, targetLayout) {\r\n  var cpx1;\r\n  var cpy1;\r\n  var cpx2;\r\n  var cpy2;\r\n  var x1;\r\n  var x2;\r\n  var y1;\r\n  var y2;\r\n\r\n  if (layoutOpt === 'radial') {\r\n    x1 = sourceLayout.rawX;\r\n    y1 = sourceLayout.rawY;\r\n    x2 = targetLayout.rawX;\r\n    y2 = targetLayout.rawY;\r\n    var radialCoor1 = radialCoordinate(x1, y1);\r\n    var radialCoor2 = radialCoordinate(x1, y1 + (y2 - y1) * curvature);\r\n    var radialCoor3 = radialCoordinate(x2, y2 + (y1 - y2) * curvature);\r\n    var radialCoor4 = radialCoordinate(x2, y2);\r\n    return {\r\n      x1: radialCoor1.x || 0,\r\n      y1: radialCoor1.y || 0,\r\n      x2: radialCoor4.x || 0,\r\n      y2: radialCoor4.y || 0,\r\n      cpx1: radialCoor2.x || 0,\r\n      cpy1: radialCoor2.y || 0,\r\n      cpx2: radialCoor3.x || 0,\r\n      cpy2: radialCoor3.y || 0\r\n    };\r\n  } else {\r\n    x1 = sourceLayout.x;\r\n    y1 = sourceLayout.y;\r\n    x2 = targetLayout.x;\r\n    y2 = targetLayout.y;\r\n\r\n    if (orient === 'LR' || orient === 'RL') {\r\n      cpx1 = x1 + (x2 - x1) * curvature;\r\n      cpy1 = y1;\r\n      cpx2 = x2 + (x1 - x2) * curvature;\r\n      cpy2 = y2;\r\n    }\r\n\r\n    if (orient === 'TB' || orient === 'BT') {\r\n      cpx1 = x1;\r\n      cpy1 = y1 + (y2 - y1) * curvature;\r\n      cpx2 = x2;\r\n      cpy2 = y2 + (y1 - y2) * curvature;\r\n    }\r\n  }\r\n\r\n  return {\r\n    x1: x1,\r\n    y1: y1,\r\n    x2: x2,\r\n    y2: y2,\r\n    cpx1: cpx1,\r\n    cpy1: cpy1,\r\n    cpx2: cpx2,\r\n    cpy2: cpy2\r\n  };\r\n}\r\n\r\nexport default TreeView;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n/**\r\n * Link lists and struct (graph or tree)\r\n */\r\nimport { curry, each, assert, extend, map, keys } from 'zrender/lib/core/util.js';\r\nimport { makeInner } from '../../util/model.js';\r\nvar inner = makeInner();\r\n\r\nfunction linkSeriesData(opt) {\r\n  var mainData = opt.mainData;\r\n  var datas = opt.datas;\r\n\r\n  if (!datas) {\r\n    datas = {\r\n      main: mainData\r\n    };\r\n    opt.datasAttr = {\r\n      main: 'data'\r\n    };\r\n  }\r\n\r\n  opt.datas = opt.mainData = null;\r\n  linkAll(mainData, datas, opt); // Porxy data original methods.\r\n\r\n  each(datas, function (data) {\r\n    each(mainData.TRANSFERABLE_METHODS, function (methodName) {\r\n      data.wrapMethod(methodName, curry(transferInjection, opt));\r\n    });\r\n  }); // Beyond transfer, additional features should be added to `cloneShallow`.\r\n\r\n  mainData.wrapMethod('cloneShallow', curry(cloneShallowInjection, opt)); // Only mainData trigger change, because struct.update may trigger\r\n  // another changable methods, which may bring about dead lock.\r\n\r\n  each(mainData.CHANGABLE_METHODS, function (methodName) {\r\n    mainData.wrapMethod(methodName, curry(changeInjection, opt));\r\n  }); // Make sure datas contains mainData.\r\n\r\n  assert(datas[mainData.dataType] === mainData);\r\n}\r\n\r\nfunction transferInjection(opt, res) {\r\n  if (isMainData(this)) {\r\n    // Transfer datas to new main data.\r\n    var datas = extend({}, inner(this).datas);\r\n    datas[this.dataType] = res;\r\n    linkAll(res, datas, opt);\r\n  } else {\r\n    // Modify the reference in main data to point newData.\r\n    linkSingle(res, this.dataType, inner(this).mainData, opt);\r\n  }\r\n\r\n  return res;\r\n}\r\n\r\nfunction changeInjection(opt, res) {\r\n  opt.struct && opt.struct.update();\r\n  return res;\r\n}\r\n\r\nfunction cloneShallowInjection(opt, res) {\r\n  // cloneShallow, which brings about some fragilities, may be inappropriate\r\n  // to be exposed as an API. So for implementation simplicity we can make\r\n  // the restriction that cloneShallow of not-mainData should not be invoked\r\n  // outside, but only be invoked here.\r\n  each(inner(res).datas, function (data, dataType) {\r\n    data !== res && linkSingle(data.cloneShallow(), dataType, res, opt);\r\n  });\r\n  return res;\r\n}\r\n/**\r\n * Supplement method to List.\r\n *\r\n * @public\r\n * @param [dataType] If not specified, return mainData.\r\n */\r\n\r\n\r\nfunction getLinkedData(dataType) {\r\n  var mainData = inner(this).mainData;\r\n  return dataType == null || mainData == null ? mainData : inner(mainData).datas[dataType];\r\n}\r\n/**\r\n * Get list of all linked data\r\n */\r\n\r\n\r\nfunction getLinkedDataAll() {\r\n  var mainData = inner(this).mainData;\r\n  return mainData == null ? [{\r\n    data: mainData\r\n  }] : map(keys(inner(mainData).datas), function (type) {\r\n    return {\r\n      type: type,\r\n      data: inner(mainData).datas[type]\r\n    };\r\n  });\r\n}\r\n\r\nfunction isMainData(data) {\r\n  return inner(data).mainData === data;\r\n}\r\n\r\nfunction linkAll(mainData, datas, opt) {\r\n  inner(mainData).datas = {};\r\n  each(datas, function (data, dataType) {\r\n    linkSingle(data, dataType, mainData, opt);\r\n  });\r\n}\r\n\r\nfunction linkSingle(data, dataType, mainData, opt) {\r\n  inner(mainData).datas[dataType] = data;\r\n  inner(data).mainData = mainData;\r\n  data.dataType = dataType;\r\n\r\n  if (opt.struct) {\r\n    data[opt.structAttr] = opt.struct;\r\n    opt.struct[opt.datasAttr[dataType]] = data;\r\n  } // Supplement method.\r\n\r\n\r\n  data.getLinkedData = getLinkedData;\r\n  data.getLinkedDataAll = getLinkedDataAll;\r\n}\r\n\r\nexport default linkSeriesData;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n/**\r\n * Tree data structure\r\n */\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport linkSeriesData from './helper/linkSeriesData.js';\r\nimport SeriesData from './SeriesData.js';\r\nimport prepareSeriesDataSchema from './helper/createDimensions.js';\r\nimport { convertOptionIdName } from '../util/model.js';\r\n\r\nvar TreeNode =\r\n/** @class */\r\nfunction () {\r\n  function TreeNode(name, hostTree) {\r\n    this.depth = 0;\r\n    this.height = 0;\r\n    /**\r\n     * Reference to list item.\r\n     * Do not persistent dataIndex outside,\r\n     * besause it may be changed by list.\r\n     * If dataIndex -1,\r\n     * this node is logical deleted (filtered) in list.\r\n     */\r\n\r\n    this.dataIndex = -1;\r\n    this.children = [];\r\n    this.viewChildren = [];\r\n    this.isExpand = false;\r\n    this.name = name || '';\r\n    this.hostTree = hostTree;\r\n  }\r\n  /**\r\n   * The node is removed.\r\n   */\r\n\r\n\r\n  TreeNode.prototype.isRemoved = function () {\r\n    return this.dataIndex < 0;\r\n  };\r\n\r\n  TreeNode.prototype.eachNode = function (options, cb, context) {\r\n    if (zrUtil.isFunction(options)) {\r\n      context = cb;\r\n      cb = options;\r\n      options = null;\r\n    }\r\n\r\n    options = options || {};\r\n\r\n    if (zrUtil.isString(options)) {\r\n      options = {\r\n        order: options\r\n      };\r\n    }\r\n\r\n    var order = options.order || 'preorder';\r\n    var children = this[options.attr || 'children'];\r\n    var suppressVisitSub;\r\n    order === 'preorder' && (suppressVisitSub = cb.call(context, this));\r\n\r\n    for (var i = 0; !suppressVisitSub && i < children.length; i++) {\r\n      children[i].eachNode(options, cb, context);\r\n    }\r\n\r\n    order === 'postorder' && cb.call(context, this);\r\n  };\r\n  /**\r\n   * Update depth and height of this subtree.\r\n   */\r\n\r\n\r\n  TreeNode.prototype.updateDepthAndHeight = function (depth) {\r\n    var height = 0;\r\n    this.depth = depth;\r\n\r\n    for (var i = 0; i < this.children.length; i++) {\r\n      var child = this.children[i];\r\n      child.updateDepthAndHeight(depth + 1);\r\n\r\n      if (child.height > height) {\r\n        height = child.height;\r\n      }\r\n    }\r\n\r\n    this.height = height + 1;\r\n  };\r\n\r\n  TreeNode.prototype.getNodeById = function (id) {\r\n    if (this.getId() === id) {\r\n      return this;\r\n    }\r\n\r\n    for (var i = 0, children = this.children, len = children.length; i < len; i++) {\r\n      var res = children[i].getNodeById(id);\r\n\r\n      if (res) {\r\n        return res;\r\n      }\r\n    }\r\n  };\r\n\r\n  TreeNode.prototype.contains = function (node) {\r\n    if (node === this) {\r\n      return true;\r\n    }\r\n\r\n    for (var i = 0, children = this.children, len = children.length; i < len; i++) {\r\n      var res = children[i].contains(node);\r\n\r\n      if (res) {\r\n        return res;\r\n      }\r\n    }\r\n  };\r\n  /**\r\n   * @param includeSelf Default false.\r\n   * @return order: [root, child, grandchild, ...]\r\n   */\r\n\r\n\r\n  TreeNode.prototype.getAncestors = function (includeSelf) {\r\n    var ancestors = [];\r\n    var node = includeSelf ? this : this.parentNode;\r\n\r\n    while (node) {\r\n      ancestors.push(node);\r\n      node = node.parentNode;\r\n    }\r\n\r\n    ancestors.reverse();\r\n    return ancestors;\r\n  };\r\n\r\n  TreeNode.prototype.getAncestorsIndices = function () {\r\n    var indices = [];\r\n    var currNode = this;\r\n\r\n    while (currNode) {\r\n      indices.push(currNode.dataIndex);\r\n      currNode = currNode.parentNode;\r\n    }\r\n\r\n    indices.reverse();\r\n    return indices;\r\n  };\r\n\r\n  TreeNode.prototype.getDescendantIndices = function () {\r\n    var indices = [];\r\n    this.eachNode(function (childNode) {\r\n      indices.push(childNode.dataIndex);\r\n    });\r\n    return indices;\r\n  };\r\n\r\n  TreeNode.prototype.getValue = function (dimension) {\r\n    var data = this.hostTree.data;\r\n    return data.getStore().get(data.getDimensionIndex(dimension || 'value'), this.dataIndex);\r\n  };\r\n\r\n  TreeNode.prototype.setLayout = function (layout, merge) {\r\n    this.dataIndex >= 0 && this.hostTree.data.setItemLayout(this.dataIndex, layout, merge);\r\n  };\r\n  /**\r\n   * @return {Object} layout\r\n   */\r\n\r\n\r\n  TreeNode.prototype.getLayout = function () {\r\n    return this.hostTree.data.getItemLayout(this.dataIndex);\r\n  }; // @depcrecated\r\n  // getModel<T = unknown, S extends keyof T = keyof T>(path: S): Model<T[S]>\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n\r\n\r\n  TreeNode.prototype.getModel = function (path) {\r\n    if (this.dataIndex < 0) {\r\n      return;\r\n    }\r\n\r\n    var hostTree = this.hostTree;\r\n    var itemModel = hostTree.data.getItemModel(this.dataIndex);\r\n    return itemModel.getModel(path);\r\n  }; // TODO: TYPE More specific model\r\n\r\n\r\n  TreeNode.prototype.getLevelModel = function () {\r\n    return (this.hostTree.levelModels || [])[this.depth];\r\n  };\r\n\r\n  TreeNode.prototype.setVisual = function (key, value) {\r\n    this.dataIndex >= 0 && this.hostTree.data.setItemVisual(this.dataIndex, key, value);\r\n  };\r\n  /**\r\n   * Get item visual\r\n   * FIXME: make return type better\r\n   */\r\n\r\n\r\n  TreeNode.prototype.getVisual = function (key) {\r\n    return this.hostTree.data.getItemVisual(this.dataIndex, key);\r\n  };\r\n\r\n  TreeNode.prototype.getRawIndex = function () {\r\n    return this.hostTree.data.getRawIndex(this.dataIndex);\r\n  };\r\n\r\n  TreeNode.prototype.getId = function () {\r\n    return this.hostTree.data.getId(this.dataIndex);\r\n  };\r\n  /**\r\n   * index in parent's children\r\n   */\r\n\r\n\r\n  TreeNode.prototype.getChildIndex = function () {\r\n    if (this.parentNode) {\r\n      var children = this.parentNode.children;\r\n\r\n      for (var i = 0; i < children.length; ++i) {\r\n        if (children[i] === this) {\r\n          return i;\r\n        }\r\n      }\r\n\r\n      return -1;\r\n    }\r\n\r\n    return -1;\r\n  };\r\n  /**\r\n   * if this is an ancestor of another node\r\n   *\r\n   * @param node another node\r\n   * @return if is ancestor\r\n   */\r\n\r\n\r\n  TreeNode.prototype.isAncestorOf = function (node) {\r\n    var parent = node.parentNode;\r\n\r\n    while (parent) {\r\n      if (parent === this) {\r\n        return true;\r\n      }\r\n\r\n      parent = parent.parentNode;\r\n    }\r\n\r\n    return false;\r\n  };\r\n  /**\r\n   * if this is an descendant of another node\r\n   *\r\n   * @param node another node\r\n   * @return if is descendant\r\n   */\r\n\r\n\r\n  TreeNode.prototype.isDescendantOf = function (node) {\r\n    return node !== this && node.isAncestorOf(this);\r\n  };\r\n\r\n  return TreeNode;\r\n}();\r\n\r\nexport { TreeNode };\r\n;\r\n\r\nvar Tree =\r\n/** @class */\r\nfunction () {\r\n  function Tree(hostModel) {\r\n    this.type = 'tree';\r\n    this._nodes = [];\r\n    this.hostModel = hostModel;\r\n  }\r\n\r\n  Tree.prototype.eachNode = function (options, cb, context) {\r\n    this.root.eachNode(options, cb, context);\r\n  };\r\n\r\n  Tree.prototype.getNodeByDataIndex = function (dataIndex) {\r\n    var rawIndex = this.data.getRawIndex(dataIndex);\r\n    return this._nodes[rawIndex];\r\n  };\r\n\r\n  Tree.prototype.getNodeById = function (name) {\r\n    return this.root.getNodeById(name);\r\n  };\r\n  /**\r\n   * Update item available by list,\r\n   * when list has been performed options like 'filterSelf' or 'map'.\r\n   */\r\n\r\n\r\n  Tree.prototype.update = function () {\r\n    var data = this.data;\r\n    var nodes = this._nodes;\r\n\r\n    for (var i = 0, len = nodes.length; i < len; i++) {\r\n      nodes[i].dataIndex = -1;\r\n    }\r\n\r\n    for (var i = 0, len = data.count(); i < len; i++) {\r\n      nodes[data.getRawIndex(i)].dataIndex = i;\r\n    }\r\n  };\r\n  /**\r\n   * Clear all layouts\r\n   */\r\n\r\n\r\n  Tree.prototype.clearLayouts = function () {\r\n    this.data.clearItemLayouts();\r\n  };\r\n  /**\r\n   * data node format:\r\n   * {\r\n   *     name: ...\r\n   *     value: ...\r\n   *     children: [\r\n   *         {\r\n   *             name: ...\r\n   *             value: ...\r\n   *             children: ...\r\n   *         },\r\n   *         ...\r\n   *     ]\r\n   * }\r\n   */\r\n\r\n\r\n  Tree.createTree = function (dataRoot, hostModel, beforeLink) {\r\n    var tree = new Tree(hostModel);\r\n    var listData = [];\r\n    var dimMax = 1;\r\n    buildHierarchy(dataRoot);\r\n\r\n    function buildHierarchy(dataNode, parentNode) {\r\n      var value = dataNode.value;\r\n      dimMax = Math.max(dimMax, zrUtil.isArray(value) ? value.length : 1);\r\n      listData.push(dataNode);\r\n      var node = new TreeNode(convertOptionIdName(dataNode.name, ''), tree);\r\n      parentNode ? addChild(node, parentNode) : tree.root = node;\r\n\r\n      tree._nodes.push(node);\r\n\r\n      var children = dataNode.children;\r\n\r\n      if (children) {\r\n        for (var i = 0; i < children.length; i++) {\r\n          buildHierarchy(children[i], node);\r\n        }\r\n      }\r\n    }\r\n\r\n    tree.root.updateDepthAndHeight(0);\r\n    var dimensions = prepareSeriesDataSchema(listData, {\r\n      coordDimensions: ['value'],\r\n      dimensionsCount: dimMax\r\n    }).dimensions;\r\n    var list = new SeriesData(dimensions, hostModel);\r\n    list.initData(listData);\r\n    beforeLink && beforeLink(list);\r\n    linkSeriesData({\r\n      mainData: list,\r\n      struct: tree,\r\n      structAttr: 'tree'\r\n    });\r\n    tree.update();\r\n    return tree;\r\n  };\r\n\r\n  return Tree;\r\n}();\r\n/**\r\n * It is needed to consider the mess of 'list', 'hostModel' when creating a TreeNote,\r\n * so this function is not ready and not necessary to be public.\r\n */\r\n\r\n\r\nfunction addChild(child, node) {\r\n  var children = node.children;\r\n\r\n  if (child.parentNode === node) {\r\n    return;\r\n  }\r\n\r\n  children.push(child);\r\n  child.parentNode = node;\r\n}\r\n\r\nexport default Tree;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nexport function retrieveTargetInfo(payload, validPayloadTypes, seriesModel) {\r\n  if (payload && zrUtil.indexOf(validPayloadTypes, payload.type) >= 0) {\r\n    var root = seriesModel.getData().tree.root;\r\n    var targetNode = payload.targetNode;\r\n\r\n    if (zrUtil.isString(targetNode)) {\r\n      targetNode = root.getNodeById(targetNode);\r\n    }\r\n\r\n    if (targetNode && root.contains(targetNode)) {\r\n      return {\r\n        node: targetNode\r\n      };\r\n    }\r\n\r\n    var targetNodeId = payload.targetNodeId;\r\n\r\n    if (targetNodeId != null && (targetNode = root.getNodeById(targetNodeId))) {\r\n      return {\r\n        node: targetNode\r\n      };\r\n    }\r\n  }\r\n} // Not includes the given node at the last item.\r\n\r\nexport function getPathToRoot(node) {\r\n  var path = [];\r\n\r\n  while (node) {\r\n    node = node.parentNode;\r\n    node && path.push(node);\r\n  }\r\n\r\n  return path.reverse();\r\n}\r\nexport function aboveViewRoot(viewRoot, node) {\r\n  var viewPath = getPathToRoot(viewRoot);\r\n  return zrUtil.indexOf(viewPath, node) >= 0;\r\n} // From root to the input node (the input node will be included).\r\n\r\nexport function wrapTreePathInfo(node, seriesModel) {\r\n  var treePathInfo = [];\r\n\r\n  while (node) {\r\n    var nodeDataIndex = node.dataIndex;\r\n    treePathInfo.push({\r\n      name: node.name,\r\n      dataIndex: nodeDataIndex,\r\n      value: seriesModel.getRawValue(nodeDataIndex)\r\n    });\r\n    node = node.parentNode;\r\n  }\r\n\r\n  treePathInfo.reverse();\r\n  return treePathInfo;\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport SeriesModel from '../../model/Series.js';\r\nimport Tree from '../../data/Tree.js';\r\nimport Model from '../../model/Model.js';\r\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\r\nimport { wrapTreePathInfo } from '../helper/treeHelper.js';\r\n\r\nvar TreeSeriesModel =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(TreeSeriesModel, _super);\r\n\r\n  function TreeSeriesModel() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.hasSymbolVisual = true; // Do it self.\r\n\r\n    _this.ignoreStyleOnData = true;\r\n    return _this;\r\n  }\r\n  /**\r\n   * Init a tree data structure from data in option series\r\n   */\r\n\r\n\r\n  TreeSeriesModel.prototype.getInitialData = function (option) {\r\n    // create a virtual root\r\n    var root = {\r\n      name: option.name,\r\n      children: option.data\r\n    };\r\n    var leaves = option.leaves || {};\r\n    var leavesModel = new Model(leaves, this, this.ecModel);\r\n    var tree = Tree.createTree(root, this, beforeLink);\r\n\r\n    function beforeLink(nodeData) {\r\n      nodeData.wrapMethod('getItemModel', function (model, idx) {\r\n        var node = tree.getNodeByDataIndex(idx);\r\n\r\n        if (!(node && node.children.length && node.isExpand)) {\r\n          model.parentModel = leavesModel;\r\n        }\r\n\r\n        return model;\r\n      });\r\n    }\r\n\r\n    var treeDepth = 0;\r\n    tree.eachNode('preorder', function (node) {\r\n      if (node.depth > treeDepth) {\r\n        treeDepth = node.depth;\r\n      }\r\n    });\r\n    var expandAndCollapse = option.expandAndCollapse;\r\n    var expandTreeDepth = expandAndCollapse && option.initialTreeDepth >= 0 ? option.initialTreeDepth : treeDepth;\r\n    tree.root.eachNode('preorder', function (node) {\r\n      var item = node.hostTree.data.getRawDataItem(node.dataIndex); // Add item.collapsed != null, because users can collapse node original in the series.data.\r\n\r\n      node.isExpand = item && item.collapsed != null ? !item.collapsed : node.depth <= expandTreeDepth;\r\n    });\r\n    return tree.data;\r\n  };\r\n  /**\r\n   * Make the configuration 'orient' backward compatibly, with 'horizontal = LR', 'vertical = TB'.\r\n   * @returns {string} orient\r\n   */\r\n\r\n\r\n  TreeSeriesModel.prototype.getOrient = function () {\r\n    var orient = this.get('orient');\r\n\r\n    if (orient === 'horizontal') {\r\n      orient = 'LR';\r\n    } else if (orient === 'vertical') {\r\n      orient = 'TB';\r\n    }\r\n\r\n    return orient;\r\n  };\r\n\r\n  TreeSeriesModel.prototype.setZoom = function (zoom) {\r\n    this.option.zoom = zoom;\r\n  };\r\n\r\n  TreeSeriesModel.prototype.setCenter = function (center) {\r\n    this.option.center = center;\r\n  };\r\n\r\n  TreeSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\r\n    var tree = this.getData().tree;\r\n    var realRoot = tree.root.children[0];\r\n    var node = tree.getNodeByDataIndex(dataIndex);\r\n    var value = node.getValue();\r\n    var name = node.name;\r\n\r\n    while (node && node !== realRoot) {\r\n      name = node.parentNode.name + '.' + name;\r\n      node = node.parentNode;\r\n    }\r\n\r\n    return createTooltipMarkup('nameValue', {\r\n      name: name,\r\n      value: value,\r\n      noValue: isNaN(value) || value == null\r\n    });\r\n  }; // Add tree path to tooltip param\r\n\r\n\r\n  TreeSeriesModel.prototype.getDataParams = function (dataIndex) {\r\n    var params = _super.prototype.getDataParams.apply(this, arguments);\r\n\r\n    var node = this.getData().tree.getNodeByDataIndex(dataIndex);\r\n    params.treeAncestors = wrapTreePathInfo(node, this);\r\n    params.collapsed = !node.isExpand;\r\n    return params;\r\n  };\r\n\r\n  TreeSeriesModel.type = 'series.tree'; // can support the position parameters 'left', 'top','right','bottom', 'width',\r\n  // 'height' in the setOption() with 'merge' mode normal.\r\n\r\n  TreeSeriesModel.layoutMode = 'box';\r\n  TreeSeriesModel.defaultOption = {\r\n    // zlevel: 0,\r\n    z: 2,\r\n    coordinateSystem: 'view',\r\n    // the position of the whole view\r\n    left: '12%',\r\n    top: '12%',\r\n    right: '12%',\r\n    bottom: '12%',\r\n    // the layout of the tree, two value can be selected, 'orthogonal' or 'radial'\r\n    layout: 'orthogonal',\r\n    // value can be 'polyline'\r\n    edgeShape: 'curve',\r\n    edgeForkPosition: '50%',\r\n    // true | false | 'move' | 'scale', see module:component/helper/RoamController.\r\n    roam: false,\r\n    // Symbol size scale ratio in roam\r\n    nodeScaleRatio: 0.4,\r\n    // Default on center of graph\r\n    center: null,\r\n    zoom: 1,\r\n    orient: 'LR',\r\n    symbol: 'emptyCircle',\r\n    symbolSize: 7,\r\n    expandAndCollapse: true,\r\n    initialTreeDepth: 2,\r\n    lineStyle: {\r\n      color: '#ccc',\r\n      width: 1.5,\r\n      curveness: 0.5\r\n    },\r\n    itemStyle: {\r\n      color: 'lightsteelblue',\r\n      // borderColor: '#c23531',\r\n      borderWidth: 1.5\r\n    },\r\n    label: {\r\n      show: true\r\n    },\r\n    animationEasing: 'linear',\r\n    animationDuration: 700,\r\n    animationDurationUpdate: 500\r\n  };\r\n  return TreeSeriesModel;\r\n}(SeriesModel);\r\n\r\nexport default TreeSeriesModel;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n/**\r\n * Traverse the tree from bottom to top and do something\r\n */\r\nfunction eachAfter(root, callback, separation) {\r\n  var nodes = [root];\r\n  var next = [];\r\n  var node;\r\n\r\n  while (node = nodes.pop()) {\r\n    // jshint ignore:line\r\n    next.push(node);\r\n\r\n    if (node.isExpand) {\r\n      var children = node.children;\r\n\r\n      if (children.length) {\r\n        for (var i = 0; i < children.length; i++) {\r\n          nodes.push(children[i]);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  while (node = next.pop()) {\r\n    // jshint ignore:line\r\n    callback(node, separation);\r\n  }\r\n}\r\n/**\r\n * Traverse the tree from top to bottom and do something\r\n */\r\n\r\n\r\nfunction eachBefore(root, callback) {\r\n  var nodes = [root];\r\n  var node;\r\n\r\n  while (node = nodes.pop()) {\r\n    // jshint ignore:line\r\n    callback(node);\r\n\r\n    if (node.isExpand) {\r\n      var children = node.children;\r\n\r\n      if (children.length) {\r\n        for (var i = children.length - 1; i >= 0; i--) {\r\n          nodes.push(children[i]);\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport { eachAfter, eachBefore };", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { eachAfter, eachBefore } from './traversalHelper.js';\r\nimport { init, firstWalk, secondWalk, separation as sep, radialCoordinate, getViewRect } from './layoutHelper.js';\r\nexport default function treeLayout(ecModel, api) {\r\n  ecModel.eachSeriesByType('tree', function (seriesModel) {\r\n    commonLayout(seriesModel, api);\r\n  });\r\n}\r\n\r\nfunction commonLayout(seriesModel, api) {\r\n  var layoutInfo = getViewRect(seriesModel, api);\r\n  seriesModel.layoutInfo = layoutInfo;\r\n  var layout = seriesModel.get('layout');\r\n  var width = 0;\r\n  var height = 0;\r\n  var separation = null;\r\n\r\n  if (layout === 'radial') {\r\n    width = 2 * Math.PI;\r\n    height = Math.min(layoutInfo.height, layoutInfo.width) / 2;\r\n    separation = sep(function (node1, node2) {\r\n      return (node1.parentNode === node2.parentNode ? 1 : 2) / node1.depth;\r\n    });\r\n  } else {\r\n    width = layoutInfo.width;\r\n    height = layoutInfo.height;\r\n    separation = sep();\r\n  }\r\n\r\n  var virtualRoot = seriesModel.getData().tree.root;\r\n  var realRoot = virtualRoot.children[0];\r\n\r\n  if (realRoot) {\r\n    init(virtualRoot);\r\n    eachAfter(realRoot, firstWalk, separation);\r\n    virtualRoot.hierNode.modifier = -realRoot.hierNode.prelim;\r\n    eachBefore(realRoot, secondWalk);\r\n    var left_1 = realRoot;\r\n    var right_1 = realRoot;\r\n    var bottom_1 = realRoot;\r\n    eachBefore(realRoot, function (node) {\r\n      var x = node.getLayout().x;\r\n\r\n      if (x < left_1.getLayout().x) {\r\n        left_1 = node;\r\n      }\r\n\r\n      if (x > right_1.getLayout().x) {\r\n        right_1 = node;\r\n      }\r\n\r\n      if (node.depth > bottom_1.depth) {\r\n        bottom_1 = node;\r\n      }\r\n    });\r\n    var delta = left_1 === right_1 ? 1 : separation(left_1, right_1) / 2;\r\n    var tx_1 = delta - left_1.getLayout().x;\r\n    var kx_1 = 0;\r\n    var ky_1 = 0;\r\n    var coorX_1 = 0;\r\n    var coorY_1 = 0;\r\n\r\n    if (layout === 'radial') {\r\n      kx_1 = width / (right_1.getLayout().x + delta + tx_1); // here we use (node.depth - 1), bucause the real root's depth is 1\r\n\r\n      ky_1 = height / (bottom_1.depth - 1 || 1);\r\n      eachBefore(realRoot, function (node) {\r\n        coorX_1 = (node.getLayout().x + tx_1) * kx_1;\r\n        coorY_1 = (node.depth - 1) * ky_1;\r\n        var finalCoor = radialCoordinate(coorX_1, coorY_1);\r\n        node.setLayout({\r\n          x: finalCoor.x,\r\n          y: finalCoor.y,\r\n          rawX: coorX_1,\r\n          rawY: coorY_1\r\n        }, true);\r\n      });\r\n    } else {\r\n      var orient_1 = seriesModel.getOrient();\r\n\r\n      if (orient_1 === 'RL' || orient_1 === 'LR') {\r\n        ky_1 = height / (right_1.getLayout().x + delta + tx_1);\r\n        kx_1 = width / (bottom_1.depth - 1 || 1);\r\n        eachBefore(realRoot, function (node) {\r\n          coorY_1 = (node.getLayout().x + tx_1) * ky_1;\r\n          coorX_1 = orient_1 === 'LR' ? (node.depth - 1) * kx_1 : width - (node.depth - 1) * kx_1;\r\n          node.setLayout({\r\n            x: coorX_1,\r\n            y: coorY_1\r\n          }, true);\r\n        });\r\n      } else if (orient_1 === 'TB' || orient_1 === 'BT') {\r\n        kx_1 = width / (right_1.getLayout().x + delta + tx_1);\r\n        ky_1 = height / (bottom_1.depth - 1 || 1);\r\n        eachBefore(realRoot, function (node) {\r\n          coorX_1 = (node.getLayout().x + tx_1) * kx_1;\r\n          coorY_1 = orient_1 === 'TB' ? (node.depth - 1) * ky_1 : height - (node.depth - 1) * ky_1;\r\n          node.setLayout({\r\n            x: coorX_1,\r\n            y: coorY_1\r\n          }, true);\r\n        });\r\n      }\r\n    }\r\n  }\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { extend } from 'zrender/lib/core/util.js';\r\nexport default function treeVisual(ecModel) {\r\n  ecModel.eachSeriesByType('tree', function (seriesModel) {\r\n    var data = seriesModel.getData();\r\n    var tree = data.tree;\r\n    tree.eachNode(function (node) {\r\n      var model = node.getModel(); // TODO Optimize\r\n\r\n      var style = model.getModel('itemStyle').getItemStyle();\r\n      var existsStyle = data.ensureUniqueItemVisual(node.dataIndex, 'style');\r\n      extend(existsStyle, style);\r\n    });\r\n  });\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { updateCenterAndZoom } from '../../action/roamHelper.js';\r\nexport function installTreeAction(registers) {\r\n  registers.registerAction({\r\n    type: 'treeExpandAndCollapse',\r\n    event: 'treeExpandAndCollapse',\r\n    update: 'update'\r\n  }, function (payload, ecModel) {\r\n    ecModel.eachComponent({\r\n      mainType: 'series',\r\n      subType: 'tree',\r\n      query: payload\r\n    }, function (seriesModel) {\r\n      var dataIndex = payload.dataIndex;\r\n      var tree = seriesModel.getData().tree;\r\n      var node = tree.getNodeByDataIndex(dataIndex);\r\n      node.isExpand = !node.isExpand;\r\n    });\r\n  });\r\n  registers.registerAction({\r\n    type: 'treeRoam',\r\n    event: 'treeRoam',\r\n    // Here we set 'none' instead of 'update', because roam action\r\n    // just need to update the transform matrix without having to recalculate\r\n    // the layout. So don't need to go through the whole update process, such\r\n    // as 'dataPrcocess', 'coordSystemUpdate', 'layout' and so on.\r\n    update: 'none'\r\n  }, function (payload, ecModel, api) {\r\n    ecModel.eachComponent({\r\n      mainType: 'series',\r\n      subType: 'tree',\r\n      query: payload\r\n    }, function (seriesModel) {\r\n      var coordSys = seriesModel.coordinateSystem;\r\n      var res = updateCenterAndZoom(coordSys, payload, undefined, api);\r\n      seriesModel.setCenter && seriesModel.setCenter(res.center);\r\n      seriesModel.setZoom && seriesModel.setZoom(res.zoom);\r\n    });\r\n  });\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport TreeView from './TreeView.js';\r\nimport TreeSeriesModel from './TreeSeries.js';\r\nimport treeLayout from './treeLayout.js';\r\nimport treeVisual from './treeVisual.js';\r\nimport { installTreeAction } from './treeAction.js';\r\nexport function install(registers) {\r\n  registers.registerChartView(TreeView);\r\n  registers.registerSeriesModel(TreeSeriesModel);\r\n  registers.registerLayout(treeLayout);\r\n  registers.registerVisual(treeVisual);\r\n  installTreeAction(registers);\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as helper from '../helper/treeHelper.js';\r\nimport { noop } from 'zrender/lib/core/util.js';\r\nvar actionTypes = ['treemapZoomToNode', 'treemapRender', 'treemapMove'];\r\nexport function installTreemapAction(registers) {\r\n  for (var i = 0; i < actionTypes.length; i++) {\r\n    registers.registerAction({\r\n      type: actionTypes[i],\r\n      update: 'updateView'\r\n    }, noop);\r\n  }\r\n\r\n  registers.registerAction({\r\n    type: 'treemapRootToNode',\r\n    update: 'updateView'\r\n  }, function (payload, ecModel) {\r\n    ecModel.eachComponent({\r\n      mainType: 'series',\r\n      subType: 'treemap',\r\n      query: payload\r\n    }, handleRootToNode);\r\n\r\n    function handleRootToNode(model, index) {\r\n      var types = ['treemapZoomToNode', 'treemapRootToNode'];\r\n      var targetInfo = helper.retrieveTargetInfo(payload, types, model);\r\n\r\n      if (targetInfo) {\r\n        var originViewRoot = model.getViewRoot();\r\n\r\n        if (originViewRoot) {\r\n          payload.direction = helper.aboveViewRoot(originViewRoot, targetInfo.node) ? 'rollUp' : 'drillDown';\r\n        }\r\n\r\n        model.resetViewRoot(targetInfo.node);\r\n      }\r\n    }\r\n  });\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { getDecalFromPalette } from '../../model/mixin/palette.js';\r\nexport default function enableAriaDecalForTree(seriesModel) {\r\n  var data = seriesModel.getData();\r\n  var tree = data.tree;\r\n  var decalPaletteScope = {};\r\n  tree.eachNode(function (node) {\r\n    // Use decal of level 1 node\r\n    var current = node;\r\n\r\n    while (current && current.depth > 1) {\r\n      current = current.parentNode;\r\n    }\r\n\r\n    var decal = getDecalFromPalette(seriesModel.ecModel, current.name || current.dataIndex + '', decalPaletteScope);\r\n    node.setVisual('decal', decal);\r\n  });\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport SeriesModel from '../../model/Series.js';\r\nimport Tree from '../../data/Tree.js';\r\nimport Model from '../../model/Model.js';\r\nimport { wrapTreePathInfo } from '../helper/treeHelper.js';\r\nimport { normalizeToArray } from '../../util/model.js';\r\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\r\nimport enableAriaDecalForTree from '../helper/enableAriaDecalForTree.js';\r\n\r\nvar TreemapSeriesModel =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(TreemapSeriesModel, _super);\r\n\r\n  function TreemapSeriesModel() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = TreemapSeriesModel.type;\r\n    _this.preventUsingHoverLayer = true;\r\n    return _this;\r\n  }\r\n  /**\r\n   * @override\r\n   */\r\n\r\n\r\n  TreemapSeriesModel.prototype.getInitialData = function (option, ecModel) {\r\n    // Create a virtual root.\r\n    var root = {\r\n      name: option.name,\r\n      children: option.data\r\n    };\r\n    completeTreeValue(root);\r\n    var levels = option.levels || []; // Used in \"visual priority\" in `treemapVisual.js`.\r\n    // This way is a little tricky, must satisfy the precondition:\r\n    //   1. There is no `treeNode.getModel('itemStyle.xxx')` used.\r\n    //   2. The `Model.prototype.getModel()` will not use any clone-like way.\r\n\r\n    var designatedVisualItemStyle = this.designatedVisualItemStyle = {};\r\n    var designatedVisualModel = new Model({\r\n      itemStyle: designatedVisualItemStyle\r\n    }, this, ecModel);\r\n    levels = option.levels = setDefault(levels, ecModel);\r\n    var levelModels = zrUtil.map(levels || [], function (levelDefine) {\r\n      return new Model(levelDefine, designatedVisualModel, ecModel);\r\n    }, this); // Make sure always a new tree is created when setOption,\r\n    // in TreemapView, we check whether oldTree === newTree\r\n    // to choose mappings approach among old shapes and new shapes.\r\n\r\n    var tree = Tree.createTree(root, this, beforeLink);\r\n\r\n    function beforeLink(nodeData) {\r\n      nodeData.wrapMethod('getItemModel', function (model, idx) {\r\n        var node = tree.getNodeByDataIndex(idx);\r\n        var levelModel = node ? levelModels[node.depth] : null; // If no levelModel, we also need `designatedVisualModel`.\r\n\r\n        model.parentModel = levelModel || designatedVisualModel;\r\n        return model;\r\n      });\r\n    }\r\n\r\n    return tree.data;\r\n  };\r\n\r\n  TreemapSeriesModel.prototype.optionUpdated = function () {\r\n    this.resetViewRoot();\r\n  };\r\n  /**\r\n   * @override\r\n   * @param {number} dataIndex\r\n   * @param {boolean} [mutipleSeries=false]\r\n   */\r\n\r\n\r\n  TreemapSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\r\n    var data = this.getData();\r\n    var value = this.getRawValue(dataIndex);\r\n    var name = data.getName(dataIndex);\r\n    return createTooltipMarkup('nameValue', {\r\n      name: name,\r\n      value: value\r\n    });\r\n  };\r\n  /**\r\n   * Add tree path to tooltip param\r\n   *\r\n   * @override\r\n   * @param {number} dataIndex\r\n   * @return {Object}\r\n   */\r\n\r\n\r\n  TreemapSeriesModel.prototype.getDataParams = function (dataIndex) {\r\n    var params = _super.prototype.getDataParams.apply(this, arguments);\r\n\r\n    var node = this.getData().tree.getNodeByDataIndex(dataIndex);\r\n    params.treeAncestors = wrapTreePathInfo(node, this); // compatitable the previous code.\r\n\r\n    params.treePathInfo = params.treeAncestors;\r\n    return params;\r\n  };\r\n  /**\r\n   * @public\r\n   * @param {Object} layoutInfo {\r\n   *                                x: containerGroup x\r\n   *                                y: containerGroup y\r\n   *                                width: containerGroup width\r\n   *                                height: containerGroup height\r\n   *                            }\r\n   */\r\n\r\n\r\n  TreemapSeriesModel.prototype.setLayoutInfo = function (layoutInfo) {\r\n    /**\r\n     * @readOnly\r\n     * @type {Object}\r\n     */\r\n    this.layoutInfo = this.layoutInfo || {};\r\n    zrUtil.extend(this.layoutInfo, layoutInfo);\r\n  };\r\n  /**\r\n   * @param  {string} id\r\n   * @return {number} index\r\n   */\r\n\r\n\r\n  TreemapSeriesModel.prototype.mapIdToIndex = function (id) {\r\n    // A feature is implemented:\r\n    // index is monotone increasing with the sequence of\r\n    // input id at the first time.\r\n    // This feature can make sure that each data item and its\r\n    // mapped color have the same index between data list and\r\n    // color list at the beginning, which is useful for user\r\n    // to adjust data-color mapping.\r\n\r\n    /**\r\n     * @private\r\n     * @type {Object}\r\n     */\r\n    var idIndexMap = this._idIndexMap;\r\n\r\n    if (!idIndexMap) {\r\n      idIndexMap = this._idIndexMap = zrUtil.createHashMap();\r\n      /**\r\n       * @private\r\n       * @type {number}\r\n       */\r\n\r\n      this._idIndexMapCount = 0;\r\n    }\r\n\r\n    var index = idIndexMap.get(id);\r\n\r\n    if (index == null) {\r\n      idIndexMap.set(id, index = this._idIndexMapCount++);\r\n    }\r\n\r\n    return index;\r\n  };\r\n\r\n  TreemapSeriesModel.prototype.getViewRoot = function () {\r\n    return this._viewRoot;\r\n  };\r\n\r\n  TreemapSeriesModel.prototype.resetViewRoot = function (viewRoot) {\r\n    viewRoot ? this._viewRoot = viewRoot : viewRoot = this._viewRoot;\r\n    var root = this.getRawData().tree.root;\r\n\r\n    if (!viewRoot || viewRoot !== root && !root.contains(viewRoot)) {\r\n      this._viewRoot = root;\r\n    }\r\n  };\r\n\r\n  TreemapSeriesModel.prototype.enableAriaDecal = function () {\r\n    enableAriaDecalForTree(this);\r\n  };\r\n\r\n  TreemapSeriesModel.type = 'series.treemap';\r\n  TreemapSeriesModel.layoutMode = 'box';\r\n  TreemapSeriesModel.defaultOption = {\r\n    // Disable progressive rendering\r\n    progressive: 0,\r\n    // size: ['80%', '80%'],            // deprecated, compatible with ec2.\r\n    left: 'center',\r\n    top: 'middle',\r\n    width: '80%',\r\n    height: '80%',\r\n    sort: true,\r\n    clipWindow: 'origin',\r\n    squareRatio: 0.5 * (1 + Math.sqrt(5)),\r\n    leafDepth: null,\r\n    drillDownIcon: '\u25B6',\r\n    // to align specialized icon. \u25B7\u25B6\u2752\u2750\u25BC\u271A\r\n    zoomToNodeRatio: 0.32 * 0.32,\r\n    roam: true,\r\n    nodeClick: 'zoomToNode',\r\n    animation: true,\r\n    animationDurationUpdate: 900,\r\n    animationEasing: 'quinticInOut',\r\n    breadcrumb: {\r\n      show: true,\r\n      height: 22,\r\n      left: 'center',\r\n      top: 'bottom',\r\n      // right\r\n      // bottom\r\n      emptyItemWidth: 25,\r\n      itemStyle: {\r\n        color: 'rgba(0,0,0,0.7)',\r\n        textStyle: {\r\n          color: '#fff'\r\n        }\r\n      },\r\n      emphasis: {\r\n        itemStyle: {\r\n          color: 'rgba(0,0,0,0.9)' // '#5793f3',\r\n\r\n        }\r\n      }\r\n    },\r\n    label: {\r\n      show: true,\r\n      // Do not use textDistance, for ellipsis rect just the same as treemap node rect.\r\n      distance: 0,\r\n      padding: 5,\r\n      position: 'inside',\r\n      // formatter: null,\r\n      color: '#fff',\r\n      overflow: 'truncate' // align\r\n      // verticalAlign\r\n\r\n    },\r\n    upperLabel: {\r\n      show: false,\r\n      position: [0, '50%'],\r\n      height: 20,\r\n      // formatter: null,\r\n      // color: '#fff',\r\n      overflow: 'truncate',\r\n      // align: null,\r\n      verticalAlign: 'middle'\r\n    },\r\n    itemStyle: {\r\n      color: null,\r\n      colorAlpha: null,\r\n      colorSaturation: null,\r\n      borderWidth: 0,\r\n      gapWidth: 0,\r\n      borderColor: '#fff',\r\n      borderColorSaturation: null // If specified, borderColor will be ineffective, and the\r\n      // border color is evaluated by color of current node and\r\n      // borderColorSaturation.\r\n\r\n    },\r\n    emphasis: {\r\n      upperLabel: {\r\n        show: true,\r\n        position: [0, '50%'],\r\n        overflow: 'truncate',\r\n        verticalAlign: 'middle'\r\n      }\r\n    },\r\n    visualDimension: 0,\r\n    visualMin: null,\r\n    visualMax: null,\r\n    color: [],\r\n    // level[n].color (if necessary).\r\n    // + Specify color list of each level. level[0].color would be global\r\n    // color list if not specified. (see method `setDefault`).\r\n    // + But set as a empty array to forbid fetch color from global palette\r\n    // when using nodeModel.get('color'), otherwise nodes on deep level\r\n    // will always has color palette set and are not able to inherit color\r\n    // from parent node.\r\n    // + TreemapSeries.color can not be set as 'none', otherwise effect\r\n    // legend color fetching (see seriesColor.js).\r\n    colorAlpha: null,\r\n    colorSaturation: null,\r\n    colorMappingBy: 'index',\r\n    visibleMin: 10,\r\n    // be rendered. Only works when sort is 'asc' or 'desc'.\r\n    childrenVisibleMin: null,\r\n    // grandchildren will not show.\r\n    // Why grandchildren? If not grandchildren but children,\r\n    // some siblings show children and some not,\r\n    // the appearance may be mess and not consistent,\r\n    levels: [] // Each item: {\r\n    //     visibleMin, itemStyle, visualDimension, label\r\n    // }\r\n\r\n  };\r\n  return TreemapSeriesModel;\r\n}(SeriesModel);\r\n/**\r\n * @param {Object} dataNode\r\n */\r\n\r\n\r\nfunction completeTreeValue(dataNode) {\r\n  // Postorder travel tree.\r\n  // If value of none-leaf node is not set,\r\n  // calculate it by suming up the value of all children.\r\n  var sum = 0;\r\n  zrUtil.each(dataNode.children, function (child) {\r\n    completeTreeValue(child);\r\n    var childValue = child.value;\r\n    zrUtil.isArray(childValue) && (childValue = childValue[0]);\r\n    sum += childValue;\r\n  });\r\n  var thisValue = dataNode.value;\r\n\r\n  if (zrUtil.isArray(thisValue)) {\r\n    thisValue = thisValue[0];\r\n  }\r\n\r\n  if (thisValue == null || isNaN(thisValue)) {\r\n    thisValue = sum;\r\n  } // Value should not less than 0.\r\n\r\n\r\n  if (thisValue < 0) {\r\n    thisValue = 0;\r\n  }\r\n\r\n  zrUtil.isArray(dataNode.value) ? dataNode.value[0] = thisValue : dataNode.value = thisValue;\r\n}\r\n/**\r\n * set default to level configuration\r\n */\r\n\r\n\r\nfunction setDefault(levels, ecModel) {\r\n  var globalColorList = normalizeToArray(ecModel.get('color'));\r\n  var globalDecalList = normalizeToArray(ecModel.get(['aria', 'decal', 'decals']));\r\n\r\n  if (!globalColorList) {\r\n    return;\r\n  }\r\n\r\n  levels = levels || [];\r\n  var hasColorDefine;\r\n  var hasDecalDefine;\r\n  zrUtil.each(levels, function (levelDefine) {\r\n    var model = new Model(levelDefine);\r\n    var modelColor = model.get('color');\r\n    var modelDecal = model.get('decal');\r\n\r\n    if (model.get(['itemStyle', 'color']) || modelColor && modelColor !== 'none') {\r\n      hasColorDefine = true;\r\n    }\r\n\r\n    if (model.get(['itemStyle', 'decal']) || modelDecal && modelDecal !== 'none') {\r\n      hasDecalDefine = true;\r\n    }\r\n  });\r\n  var level0 = levels[0] || (levels[0] = {});\r\n\r\n  if (!hasColorDefine) {\r\n    level0.color = globalColorList.slice();\r\n  }\r\n\r\n  if (!hasDecalDefine && globalDecalList) {\r\n    level0.decal = globalDecalList.slice();\r\n  }\r\n\r\n  return levels;\r\n}\r\n\r\nexport default TreemapSeriesModel;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as graphic from '../../util/graphic.js';\r\nimport { getECData } from '../../util/innerStore.js';\r\nimport * as layout from '../../util/layout.js';\r\nimport { wrapTreePathInfo } from '../helper/treeHelper.js';\r\nimport { curry, defaults } from 'zrender/lib/core/util.js';\r\nimport { convertOptionIdName } from '../../util/model.js';\r\nimport { toggleHoverEmphasis, Z2_EMPHASIS_LIFT } from '../../util/states.js';\r\nimport { createTextStyle } from '../../label/labelStyle.js';\r\nvar TEXT_PADDING = 8;\r\nvar ITEM_GAP = 8;\r\nvar ARRAY_LENGTH = 5;\r\n\r\nvar Breadcrumb =\r\n/** @class */\r\nfunction () {\r\n  function Breadcrumb(containerGroup) {\r\n    this.group = new graphic.Group();\r\n    containerGroup.add(this.group);\r\n  }\r\n\r\n  Breadcrumb.prototype.render = function (seriesModel, api, targetNode, onSelect) {\r\n    var model = seriesModel.getModel('breadcrumb');\r\n    var thisGroup = this.group;\r\n    thisGroup.removeAll();\r\n\r\n    if (!model.get('show') || !targetNode) {\r\n      return;\r\n    }\r\n\r\n    var normalStyleModel = model.getModel('itemStyle');\r\n    var emphasisModel = model.getModel('emphasis');\r\n    var textStyleModel = normalStyleModel.getModel('textStyle');\r\n    var emphasisTextStyleModel = emphasisModel.getModel(['itemStyle', 'textStyle']);\r\n    var layoutParam = {\r\n      pos: {\r\n        left: model.get('left'),\r\n        right: model.get('right'),\r\n        top: model.get('top'),\r\n        bottom: model.get('bottom')\r\n      },\r\n      box: {\r\n        width: api.getWidth(),\r\n        height: api.getHeight()\r\n      },\r\n      emptyItemWidth: model.get('emptyItemWidth'),\r\n      totalWidth: 0,\r\n      renderList: []\r\n    };\r\n\r\n    this._prepare(targetNode, layoutParam, textStyleModel);\r\n\r\n    this._renderContent(seriesModel, layoutParam, normalStyleModel, emphasisModel, textStyleModel, emphasisTextStyleModel, onSelect);\r\n\r\n    layout.positionElement(thisGroup, layoutParam.pos, layoutParam.box);\r\n  };\r\n  /**\r\n   * Prepare render list and total width\r\n   * @private\r\n   */\r\n\r\n\r\n  Breadcrumb.prototype._prepare = function (targetNode, layoutParam, textStyleModel) {\r\n    for (var node = targetNode; node; node = node.parentNode) {\r\n      var text = convertOptionIdName(node.getModel().get('name'), '');\r\n      var textRect = textStyleModel.getTextRect(text);\r\n      var itemWidth = Math.max(textRect.width + TEXT_PADDING * 2, layoutParam.emptyItemWidth);\r\n      layoutParam.totalWidth += itemWidth + ITEM_GAP;\r\n      layoutParam.renderList.push({\r\n        node: node,\r\n        text: text,\r\n        width: itemWidth\r\n      });\r\n    }\r\n  };\r\n  /**\r\n   * @private\r\n   */\r\n\r\n\r\n  Breadcrumb.prototype._renderContent = function (seriesModel, layoutParam, normalStyleModel, emphasisModel, textStyleModel, emphasisTextStyleModel, onSelect) {\r\n    // Start rendering.\r\n    var lastX = 0;\r\n    var emptyItemWidth = layoutParam.emptyItemWidth;\r\n    var height = seriesModel.get(['breadcrumb', 'height']);\r\n    var availableSize = layout.getAvailableSize(layoutParam.pos, layoutParam.box);\r\n    var totalWidth = layoutParam.totalWidth;\r\n    var renderList = layoutParam.renderList;\r\n    var emphasisItemStyle = emphasisModel.getModel('itemStyle').getItemStyle();\r\n\r\n    for (var i = renderList.length - 1; i >= 0; i--) {\r\n      var item = renderList[i];\r\n      var itemNode = item.node;\r\n      var itemWidth = item.width;\r\n      var text = item.text; // Hdie text and shorten width if necessary.\r\n\r\n      if (totalWidth > availableSize.width) {\r\n        totalWidth -= itemWidth - emptyItemWidth;\r\n        itemWidth = emptyItemWidth;\r\n        text = null;\r\n      }\r\n\r\n      var el = new graphic.Polygon({\r\n        shape: {\r\n          points: makeItemPoints(lastX, 0, itemWidth, height, i === renderList.length - 1, i === 0)\r\n        },\r\n        style: defaults(normalStyleModel.getItemStyle(), {\r\n          lineJoin: 'bevel'\r\n        }),\r\n        textContent: new graphic.Text({\r\n          style: createTextStyle(textStyleModel, {\r\n            text: text\r\n          })\r\n        }),\r\n        textConfig: {\r\n          position: 'inside'\r\n        },\r\n        z2: Z2_EMPHASIS_LIFT * 1e4,\r\n        onclick: curry(onSelect, itemNode)\r\n      });\r\n      el.disableLabelAnimation = true;\r\n      el.getTextContent().ensureState('emphasis').style = createTextStyle(emphasisTextStyleModel, {\r\n        text: text\r\n      });\r\n      el.ensureState('emphasis').style = emphasisItemStyle;\r\n      toggleHoverEmphasis(el, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\r\n      this.group.add(el);\r\n      packEventData(el, seriesModel, itemNode);\r\n      lastX += itemWidth + ITEM_GAP;\r\n    }\r\n  };\r\n\r\n  Breadcrumb.prototype.remove = function () {\r\n    this.group.removeAll();\r\n  };\r\n\r\n  return Breadcrumb;\r\n}();\r\n\r\nfunction makeItemPoints(x, y, itemWidth, itemHeight, head, tail) {\r\n  var points = [[head ? x : x - ARRAY_LENGTH, y], [x + itemWidth, y], [x + itemWidth, y + itemHeight], [head ? x : x - ARRAY_LENGTH, y + itemHeight]];\r\n  !tail && points.splice(2, 0, [x + itemWidth + ARRAY_LENGTH, y + itemHeight / 2]);\r\n  !head && points.push([x, y + itemHeight / 2]);\r\n  return points;\r\n} // Package custom mouse event.\r\n\r\n\r\nfunction packEventData(el, seriesModel, itemNode) {\r\n  getECData(el).eventData = {\r\n    componentType: 'series',\r\n    componentSubType: 'treemap',\r\n    componentIndex: seriesModel.componentIndex,\r\n    seriesIndex: seriesModel.seriesIndex,\r\n    seriesName: seriesModel.name,\r\n    seriesType: 'treemap',\r\n    selfType: 'breadcrumb',\r\n    nodeData: {\r\n      dataIndex: itemNode && itemNode.dataIndex,\r\n      name: itemNode && itemNode.name\r\n    },\r\n    treePathInfo: itemNode && wrapTreePathInfo(itemNode, seriesModel)\r\n  };\r\n}\r\n\r\nexport default Breadcrumb;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n/**\r\n * Animate multiple elements with a single done-callback.\r\n *\r\n * @example\r\n *  animation\r\n *      .createWrap()\r\n *      .add(el1, {x: 10, y: 10})\r\n *      .add(el2, {shape: {width: 500}, style: {fill: 'red'}}, 400)\r\n *      .done(function () { // done })\r\n *      .start('cubicOut');\r\n */\r\nvar AnimationWrap =\r\n/** @class */\r\nfunction () {\r\n  function AnimationWrap() {\r\n    this._storage = [];\r\n    this._elExistsMap = {};\r\n  }\r\n  /**\r\n   * Caution: a el can only be added once, otherwise 'done'\r\n   * might not be called. This method checks this (by el.id),\r\n   * suppresses adding and returns false when existing el found.\r\n   *\r\n   * @return Whether adding succeeded.\r\n   */\r\n\r\n\r\n  AnimationWrap.prototype.add = function (el, target, duration, delay, easing) {\r\n    if (this._elExistsMap[el.id]) {\r\n      return false;\r\n    }\r\n\r\n    this._elExistsMap[el.id] = true;\r\n\r\n    this._storage.push({\r\n      el: el,\r\n      target: target,\r\n      duration: duration,\r\n      delay: delay,\r\n      easing: easing\r\n    });\r\n\r\n    return true;\r\n  };\r\n  /**\r\n   * Only execute when animation done/aborted.\r\n   */\r\n\r\n\r\n  AnimationWrap.prototype.finished = function (callback) {\r\n    this._finishedCallback = callback;\r\n    return this;\r\n  };\r\n  /**\r\n   * Will stop exist animation firstly.\r\n   */\r\n\r\n\r\n  AnimationWrap.prototype.start = function () {\r\n    var _this = this;\r\n\r\n    var count = this._storage.length;\r\n\r\n    var checkTerminate = function () {\r\n      count--;\r\n\r\n      if (count <= 0) {\r\n        // Guard.\r\n        _this._storage.length = 0;\r\n        _this._elExistsMap = {};\r\n        _this._finishedCallback && _this._finishedCallback();\r\n      }\r\n    };\r\n\r\n    for (var i = 0, len = this._storage.length; i < len; i++) {\r\n      var item = this._storage[i];\r\n      item.el.animateTo(item.target, {\r\n        duration: item.duration,\r\n        delay: item.delay,\r\n        easing: item.easing,\r\n        setToFinal: true,\r\n        done: checkTerminate,\r\n        aborted: checkTerminate\r\n      });\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  return AnimationWrap;\r\n}();\r\n\r\nexport function createWrap() {\r\n  return new AnimationWrap();\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport { bind, each, indexOf, curry, extend, normalizeCssArray, isFunction } from 'zrender/lib/core/util.js';\r\nimport * as graphic from '../../util/graphic.js';\r\nimport { getECData } from '../../util/innerStore.js';\r\nimport { isHighDownDispatcher, setAsHighDownDispatcher, setDefaultStateProxy, enableHoverFocus, Z2_EMPHASIS_LIFT } from '../../util/states.js';\r\nimport DataDiffer from '../../data/DataDiffer.js';\r\nimport * as helper from '../helper/treeHelper.js';\r\nimport Breadcrumb from './Breadcrumb.js';\r\nimport RoamController from '../../component/helper/RoamController.js';\r\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\r\nimport * as matrix from 'zrender/lib/core/matrix.js';\r\nimport * as animationUtil from '../../util/animation.js';\r\nimport makeStyleMapper from '../../model/mixin/makeStyleMapper.js';\r\nimport ChartView from '../../view/Chart.js';\r\nimport Displayable from 'zrender/lib/graphic/Displayable.js';\r\nimport { makeInner, convertOptionIdName } from '../../util/model.js';\r\nimport { windowOpen } from '../../util/format.js';\r\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\r\nvar Group = graphic.Group;\r\nvar Rect = graphic.Rect;\r\nvar DRAG_THRESHOLD = 3;\r\nvar PATH_LABEL_NOAMAL = 'label';\r\nvar PATH_UPPERLABEL_NORMAL = 'upperLabel'; // Should larger than emphasis states lift z\r\n\r\nvar Z2_BASE = Z2_EMPHASIS_LIFT * 10; // Should bigger than every z2.\r\n\r\nvar Z2_BG = Z2_EMPHASIS_LIFT * 2;\r\nvar Z2_CONTENT = Z2_EMPHASIS_LIFT * 3;\r\nvar getStateItemStyle = makeStyleMapper([['fill', 'color'], // `borderColor` and `borderWidth` has been occupied,\r\n// so use `stroke` to indicate the stroke of the rect.\r\n['stroke', 'strokeColor'], ['lineWidth', 'strokeWidth'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor'] // Option decal is in `DecalObject` but style.decal is in `PatternObject`.\r\n// So do not transfer decal directly.\r\n]);\r\n\r\nvar getItemStyleNormal = function (model) {\r\n  // Normal style props should include emphasis style props.\r\n  var itemStyle = getStateItemStyle(model); // Clear styles set by emphasis.\r\n\r\n  itemStyle.stroke = itemStyle.fill = itemStyle.lineWidth = null;\r\n  return itemStyle;\r\n};\r\n\r\nvar inner = makeInner();\r\n\r\nvar TreemapView =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(TreemapView, _super);\r\n\r\n  function TreemapView() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = TreemapView.type;\r\n    _this._state = 'ready';\r\n    _this._storage = createStorage();\r\n    return _this;\r\n  }\r\n  /**\r\n   * @override\r\n   */\r\n\r\n\r\n  TreemapView.prototype.render = function (seriesModel, ecModel, api, payload) {\r\n    var models = ecModel.findComponents({\r\n      mainType: 'series',\r\n      subType: 'treemap',\r\n      query: payload\r\n    });\r\n\r\n    if (indexOf(models, seriesModel) < 0) {\r\n      return;\r\n    }\r\n\r\n    this.seriesModel = seriesModel;\r\n    this.api = api;\r\n    this.ecModel = ecModel;\r\n    var types = ['treemapZoomToNode', 'treemapRootToNode'];\r\n    var targetInfo = helper.retrieveTargetInfo(payload, types, seriesModel);\r\n    var payloadType = payload && payload.type;\r\n    var layoutInfo = seriesModel.layoutInfo;\r\n    var isInit = !this._oldTree;\r\n    var thisStorage = this._storage; // Mark new root when action is treemapRootToNode.\r\n\r\n    var reRoot = payloadType === 'treemapRootToNode' && targetInfo && thisStorage ? {\r\n      rootNodeGroup: thisStorage.nodeGroup[targetInfo.node.getRawIndex()],\r\n      direction: payload.direction\r\n    } : null;\r\n\r\n    var containerGroup = this._giveContainerGroup(layoutInfo);\r\n\r\n    var hasAnimation = seriesModel.get('animation');\r\n\r\n    var renderResult = this._doRender(containerGroup, seriesModel, reRoot);\r\n\r\n    hasAnimation && !isInit && (!payloadType || payloadType === 'treemapZoomToNode' || payloadType === 'treemapRootToNode') ? this._doAnimation(containerGroup, renderResult, seriesModel, reRoot) : renderResult.renderFinally();\r\n\r\n    this._resetController(api);\r\n\r\n    this._renderBreadcrumb(seriesModel, api, targetInfo);\r\n  };\r\n\r\n  TreemapView.prototype._giveContainerGroup = function (layoutInfo) {\r\n    var containerGroup = this._containerGroup;\r\n\r\n    if (!containerGroup) {\r\n      // FIXME\r\n      // \u52A0\u4E00\u5C42containerGroup\u662F\u4E3A\u4E86clip\uFF0C\u4F46\u662F\u73B0\u5728clip\u529F\u80FD\u5E76\u6CA1\u6709\u5B9E\u73B0\u3002\r\n      containerGroup = this._containerGroup = new Group();\r\n\r\n      this._initEvents(containerGroup);\r\n\r\n      this.group.add(containerGroup);\r\n    }\r\n\r\n    containerGroup.x = layoutInfo.x;\r\n    containerGroup.y = layoutInfo.y;\r\n    return containerGroup;\r\n  };\r\n\r\n  TreemapView.prototype._doRender = function (containerGroup, seriesModel, reRoot) {\r\n    var thisTree = seriesModel.getData().tree;\r\n    var oldTree = this._oldTree; // Clear last shape records.\r\n\r\n    var lastsForAnimation = createStorage();\r\n    var thisStorage = createStorage();\r\n    var oldStorage = this._storage;\r\n    var willInvisibleEls = [];\r\n\r\n    function doRenderNode(thisNode, oldNode, parentGroup, depth) {\r\n      return renderNode(seriesModel, thisStorage, oldStorage, reRoot, lastsForAnimation, willInvisibleEls, thisNode, oldNode, parentGroup, depth);\r\n    } // Notice: When thisTree and oldTree are the same tree (see list.cloneShallow),\r\n    // the oldTree is actually losted, so we cannot find all of the old graphic\r\n    // elements from tree. So we use this strategy: make element storage, move\r\n    // from old storage to new storage, clear old storage.\r\n\r\n\r\n    dualTravel(thisTree.root ? [thisTree.root] : [], oldTree && oldTree.root ? [oldTree.root] : [], containerGroup, thisTree === oldTree || !oldTree, 0); // Process all removing.\r\n\r\n    var willDeleteEls = clearStorage(oldStorage);\r\n    this._oldTree = thisTree;\r\n    this._storage = thisStorage;\r\n    return {\r\n      lastsForAnimation: lastsForAnimation,\r\n      willDeleteEls: willDeleteEls,\r\n      renderFinally: renderFinally\r\n    };\r\n\r\n    function dualTravel(thisViewChildren, oldViewChildren, parentGroup, sameTree, depth) {\r\n      // When 'render' is triggered by action,\r\n      // 'this' and 'old' may be the same tree,\r\n      // we use rawIndex in that case.\r\n      if (sameTree) {\r\n        oldViewChildren = thisViewChildren;\r\n        each(thisViewChildren, function (child, index) {\r\n          !child.isRemoved() && processNode(index, index);\r\n        });\r\n      } // Diff hierarchically (diff only in each subtree, but not whole).\r\n      // because, consistency of view is important.\r\n      else {\r\n          new DataDiffer(oldViewChildren, thisViewChildren, getKey, getKey).add(processNode).update(processNode).remove(curry(processNode, null)).execute();\r\n        }\r\n\r\n      function getKey(node) {\r\n        // Identify by name or raw index.\r\n        return node.getId();\r\n      }\r\n\r\n      function processNode(newIndex, oldIndex) {\r\n        var thisNode = newIndex != null ? thisViewChildren[newIndex] : null;\r\n        var oldNode = oldIndex != null ? oldViewChildren[oldIndex] : null;\r\n        var group = doRenderNode(thisNode, oldNode, parentGroup, depth);\r\n        group && dualTravel(thisNode && thisNode.viewChildren || [], oldNode && oldNode.viewChildren || [], group, sameTree, depth + 1);\r\n      }\r\n    }\r\n\r\n    function clearStorage(storage) {\r\n      var willDeleteEls = createStorage();\r\n      storage && each(storage, function (store, storageName) {\r\n        var delEls = willDeleteEls[storageName];\r\n        each(store, function (el) {\r\n          el && (delEls.push(el), inner(el).willDelete = true);\r\n        });\r\n      });\r\n      return willDeleteEls;\r\n    }\r\n\r\n    function renderFinally() {\r\n      each(willDeleteEls, function (els) {\r\n        each(els, function (el) {\r\n          el.parent && el.parent.remove(el);\r\n        });\r\n      });\r\n      each(willInvisibleEls, function (el) {\r\n        el.invisible = true; // Setting invisible is for optimizing, so no need to set dirty,\r\n        // just mark as invisible.\r\n\r\n        el.dirty();\r\n      });\r\n    }\r\n  };\r\n\r\n  TreemapView.prototype._doAnimation = function (containerGroup, renderResult, seriesModel, reRoot) {\r\n    var durationOption = seriesModel.get('animationDurationUpdate');\r\n    var easingOption = seriesModel.get('animationEasing'); // TODO: do not support function until necessary.\r\n\r\n    var duration = (isFunction(durationOption) ? 0 : durationOption) || 0;\r\n    var easing = (isFunction(easingOption) ? null : easingOption) || 'cubicOut';\r\n    var animationWrap = animationUtil.createWrap(); // Make delete animations.\r\n\r\n    each(renderResult.willDeleteEls, function (store, storageName) {\r\n      each(store, function (el, rawIndex) {\r\n        if (el.invisible) {\r\n          return;\r\n        }\r\n\r\n        var parent = el.parent; // Always has parent, and parent is nodeGroup.\r\n\r\n        var target;\r\n        var innerStore = inner(parent);\r\n\r\n        if (reRoot && reRoot.direction === 'drillDown') {\r\n          target = parent === reRoot.rootNodeGroup // This is the content element of view root.\r\n          // Only `content` will enter this branch, because\r\n          // `background` and `nodeGroup` will not be deleted.\r\n          ? {\r\n            shape: {\r\n              x: 0,\r\n              y: 0,\r\n              width: innerStore.nodeWidth,\r\n              height: innerStore.nodeHeight\r\n            },\r\n            style: {\r\n              opacity: 0\r\n            }\r\n          } // Others.\r\n          : {\r\n            style: {\r\n              opacity: 0\r\n            }\r\n          };\r\n        } else {\r\n          var targetX = 0;\r\n          var targetY = 0;\r\n\r\n          if (!innerStore.willDelete) {\r\n            // Let node animate to right-bottom corner, cooperating with fadeout,\r\n            // which is appropriate for user understanding.\r\n            // Divided by 2 for reRoot rolling up effect.\r\n            targetX = innerStore.nodeWidth / 2;\r\n            targetY = innerStore.nodeHeight / 2;\r\n          }\r\n\r\n          target = storageName === 'nodeGroup' ? {\r\n            x: targetX,\r\n            y: targetY,\r\n            style: {\r\n              opacity: 0\r\n            }\r\n          } : {\r\n            shape: {\r\n              x: targetX,\r\n              y: targetY,\r\n              width: 0,\r\n              height: 0\r\n            },\r\n            style: {\r\n              opacity: 0\r\n            }\r\n          };\r\n        } // TODO: do not support delay until necessary.\r\n\r\n\r\n        target && animationWrap.add(el, target, duration, 0, easing);\r\n      });\r\n    }); // Make other animations\r\n\r\n    each(this._storage, function (store, storageName) {\r\n      each(store, function (el, rawIndex) {\r\n        var last = renderResult.lastsForAnimation[storageName][rawIndex];\r\n        var target = {};\r\n\r\n        if (!last) {\r\n          return;\r\n        }\r\n\r\n        if (el instanceof graphic.Group) {\r\n          if (last.oldX != null) {\r\n            target.x = el.x;\r\n            target.y = el.y;\r\n            el.x = last.oldX;\r\n            el.y = last.oldY;\r\n          }\r\n        } else {\r\n          if (last.oldShape) {\r\n            target.shape = extend({}, el.shape);\r\n            el.setShape(last.oldShape);\r\n          }\r\n\r\n          if (last.fadein) {\r\n            el.setStyle('opacity', 0);\r\n            target.style = {\r\n              opacity: 1\r\n            };\r\n          } // When animation is stopped for succedent animation starting,\r\n          // el.style.opacity might not be 1\r\n          else if (el.style.opacity !== 1) {\r\n              target.style = {\r\n                opacity: 1\r\n              };\r\n            }\r\n        }\r\n\r\n        animationWrap.add(el, target, duration, 0, easing);\r\n      });\r\n    }, this);\r\n    this._state = 'animating';\r\n    animationWrap.finished(bind(function () {\r\n      this._state = 'ready';\r\n      renderResult.renderFinally();\r\n    }, this)).start();\r\n  };\r\n\r\n  TreemapView.prototype._resetController = function (api) {\r\n    var controller = this._controller; // Init controller.\r\n\r\n    if (!controller) {\r\n      controller = this._controller = new RoamController(api.getZr());\r\n      controller.enable(this.seriesModel.get('roam'));\r\n      controller.on('pan', bind(this._onPan, this));\r\n      controller.on('zoom', bind(this._onZoom, this));\r\n    }\r\n\r\n    var rect = new BoundingRect(0, 0, api.getWidth(), api.getHeight());\r\n    controller.setPointerChecker(function (e, x, y) {\r\n      return rect.contain(x, y);\r\n    });\r\n  };\r\n\r\n  TreemapView.prototype._clearController = function () {\r\n    var controller = this._controller;\r\n\r\n    if (controller) {\r\n      controller.dispose();\r\n      controller = null;\r\n    }\r\n  };\r\n\r\n  TreemapView.prototype._onPan = function (e) {\r\n    if (this._state !== 'animating' && (Math.abs(e.dx) > DRAG_THRESHOLD || Math.abs(e.dy) > DRAG_THRESHOLD)) {\r\n      // These param must not be cached.\r\n      var root = this.seriesModel.getData().tree.root;\r\n\r\n      if (!root) {\r\n        return;\r\n      }\r\n\r\n      var rootLayout = root.getLayout();\r\n\r\n      if (!rootLayout) {\r\n        return;\r\n      }\r\n\r\n      this.api.dispatchAction({\r\n        type: 'treemapMove',\r\n        from: this.uid,\r\n        seriesId: this.seriesModel.id,\r\n        rootRect: {\r\n          x: rootLayout.x + e.dx,\r\n          y: rootLayout.y + e.dy,\r\n          width: rootLayout.width,\r\n          height: rootLayout.height\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  TreemapView.prototype._onZoom = function (e) {\r\n    var mouseX = e.originX;\r\n    var mouseY = e.originY;\r\n\r\n    if (this._state !== 'animating') {\r\n      // These param must not be cached.\r\n      var root = this.seriesModel.getData().tree.root;\r\n\r\n      if (!root) {\r\n        return;\r\n      }\r\n\r\n      var rootLayout = root.getLayout();\r\n\r\n      if (!rootLayout) {\r\n        return;\r\n      }\r\n\r\n      var rect = new BoundingRect(rootLayout.x, rootLayout.y, rootLayout.width, rootLayout.height);\r\n      var layoutInfo = this.seriesModel.layoutInfo; // Transform mouse coord from global to containerGroup.\r\n\r\n      mouseX -= layoutInfo.x;\r\n      mouseY -= layoutInfo.y; // Scale root bounding rect.\r\n\r\n      var m = matrix.create();\r\n      matrix.translate(m, m, [-mouseX, -mouseY]);\r\n      matrix.scale(m, m, [e.scale, e.scale]);\r\n      matrix.translate(m, m, [mouseX, mouseY]);\r\n      rect.applyTransform(m);\r\n      this.api.dispatchAction({\r\n        type: 'treemapRender',\r\n        from: this.uid,\r\n        seriesId: this.seriesModel.id,\r\n        rootRect: {\r\n          x: rect.x,\r\n          y: rect.y,\r\n          width: rect.width,\r\n          height: rect.height\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  TreemapView.prototype._initEvents = function (containerGroup) {\r\n    var _this = this;\r\n\r\n    containerGroup.on('click', function (e) {\r\n      if (_this._state !== 'ready') {\r\n        return;\r\n      }\r\n\r\n      var nodeClick = _this.seriesModel.get('nodeClick', true);\r\n\r\n      if (!nodeClick) {\r\n        return;\r\n      }\r\n\r\n      var targetInfo = _this.findTarget(e.offsetX, e.offsetY);\r\n\r\n      if (!targetInfo) {\r\n        return;\r\n      }\r\n\r\n      var node = targetInfo.node;\r\n\r\n      if (node.getLayout().isLeafRoot) {\r\n        _this._rootToNode(targetInfo);\r\n      } else {\r\n        if (nodeClick === 'zoomToNode') {\r\n          _this._zoomToNode(targetInfo);\r\n        } else if (nodeClick === 'link') {\r\n          var itemModel = node.hostTree.data.getItemModel(node.dataIndex);\r\n          var link = itemModel.get('link', true);\r\n          var linkTarget = itemModel.get('target', true) || 'blank';\r\n          link && windowOpen(link, linkTarget);\r\n        }\r\n      }\r\n    }, this);\r\n  };\r\n\r\n  TreemapView.prototype._renderBreadcrumb = function (seriesModel, api, targetInfo) {\r\n    var _this = this;\r\n\r\n    if (!targetInfo) {\r\n      targetInfo = seriesModel.get('leafDepth', true) != null ? {\r\n        node: seriesModel.getViewRoot()\r\n      } // FIXME\r\n      // better way?\r\n      // Find breadcrumb tail on center of containerGroup.\r\n      : this.findTarget(api.getWidth() / 2, api.getHeight() / 2);\r\n\r\n      if (!targetInfo) {\r\n        targetInfo = {\r\n          node: seriesModel.getData().tree.root\r\n        };\r\n      }\r\n    }\r\n\r\n    (this._breadcrumb || (this._breadcrumb = new Breadcrumb(this.group))).render(seriesModel, api, targetInfo.node, function (node) {\r\n      if (_this._state !== 'animating') {\r\n        helper.aboveViewRoot(seriesModel.getViewRoot(), node) ? _this._rootToNode({\r\n          node: node\r\n        }) : _this._zoomToNode({\r\n          node: node\r\n        });\r\n      }\r\n    });\r\n  };\r\n  /**\r\n   * @override\r\n   */\r\n\r\n\r\n  TreemapView.prototype.remove = function () {\r\n    this._clearController();\r\n\r\n    this._containerGroup && this._containerGroup.removeAll();\r\n    this._storage = createStorage();\r\n    this._state = 'ready';\r\n    this._breadcrumb && this._breadcrumb.remove();\r\n  };\r\n\r\n  TreemapView.prototype.dispose = function () {\r\n    this._clearController();\r\n  };\r\n\r\n  TreemapView.prototype._zoomToNode = function (targetInfo) {\r\n    this.api.dispatchAction({\r\n      type: 'treemapZoomToNode',\r\n      from: this.uid,\r\n      seriesId: this.seriesModel.id,\r\n      targetNode: targetInfo.node\r\n    });\r\n  };\r\n\r\n  TreemapView.prototype._rootToNode = function (targetInfo) {\r\n    this.api.dispatchAction({\r\n      type: 'treemapRootToNode',\r\n      from: this.uid,\r\n      seriesId: this.seriesModel.id,\r\n      targetNode: targetInfo.node\r\n    });\r\n  };\r\n  /**\r\n   * @public\r\n   * @param {number} x Global coord x.\r\n   * @param {number} y Global coord y.\r\n   * @return {Object} info If not found, return undefined;\r\n   * @return {number} info.node Target node.\r\n   * @return {number} info.offsetX x refer to target node.\r\n   * @return {number} info.offsetY y refer to target node.\r\n   */\r\n\r\n\r\n  TreemapView.prototype.findTarget = function (x, y) {\r\n    var targetInfo;\r\n    var viewRoot = this.seriesModel.getViewRoot();\r\n    viewRoot.eachNode({\r\n      attr: 'viewChildren',\r\n      order: 'preorder'\r\n    }, function (node) {\r\n      var bgEl = this._storage.background[node.getRawIndex()]; // If invisible, there might be no element.\r\n\r\n\r\n      if (bgEl) {\r\n        var point = bgEl.transformCoordToLocal(x, y);\r\n        var shape = bgEl.shape; // For performance consideration, don't use 'getBoundingRect'.\r\n\r\n        if (shape.x <= point[0] && point[0] <= shape.x + shape.width && shape.y <= point[1] && point[1] <= shape.y + shape.height) {\r\n          targetInfo = {\r\n            node: node,\r\n            offsetX: point[0],\r\n            offsetY: point[1]\r\n          };\r\n        } else {\r\n          return false; // Suppress visit subtree.\r\n        }\r\n      }\r\n    }, this);\r\n    return targetInfo;\r\n  };\r\n\r\n  TreemapView.type = 'treemap';\r\n  return TreemapView;\r\n}(ChartView);\r\n/**\r\n * @inner\r\n */\r\n\r\n\r\nfunction createStorage() {\r\n  return {\r\n    nodeGroup: [],\r\n    background: [],\r\n    content: []\r\n  };\r\n}\r\n/**\r\n * @inner\r\n * @return Return undefined means do not travel further.\r\n */\r\n\r\n\r\nfunction renderNode(seriesModel, thisStorage, oldStorage, reRoot, lastsForAnimation, willInvisibleEls, thisNode, oldNode, parentGroup, depth) {\r\n  // Whether under viewRoot.\r\n  if (!thisNode) {\r\n    // Deleting nodes will be performed finally. This method just find\r\n    // element from old storage, or create new element, set them to new\r\n    // storage, and set styles.\r\n    return;\r\n  } // -------------------------------------------------------------------\r\n  // Start of closure variables available in \"Procedures in renderNode\".\r\n\r\n\r\n  var thisLayout = thisNode.getLayout();\r\n  var data = seriesModel.getData();\r\n  var nodeModel = thisNode.getModel(); // Only for enabling highlight/downplay. Clear firstly.\r\n  // Because some node will not be rendered.\r\n\r\n  data.setItemGraphicEl(thisNode.dataIndex, null);\r\n\r\n  if (!thisLayout || !thisLayout.isInView) {\r\n    return;\r\n  }\r\n\r\n  var thisWidth = thisLayout.width;\r\n  var thisHeight = thisLayout.height;\r\n  var borderWidth = thisLayout.borderWidth;\r\n  var thisInvisible = thisLayout.invisible;\r\n  var thisRawIndex = thisNode.getRawIndex();\r\n  var oldRawIndex = oldNode && oldNode.getRawIndex();\r\n  var thisViewChildren = thisNode.viewChildren;\r\n  var upperHeight = thisLayout.upperHeight;\r\n  var isParent = thisViewChildren && thisViewChildren.length;\r\n  var itemStyleNormalModel = nodeModel.getModel('itemStyle');\r\n  var itemStyleEmphasisModel = nodeModel.getModel(['emphasis', 'itemStyle']);\r\n  var itemStyleBlurModel = nodeModel.getModel(['blur', 'itemStyle']);\r\n  var itemStyleSelectModel = nodeModel.getModel(['select', 'itemStyle']);\r\n  var borderRadius = itemStyleNormalModel.get('borderRadius') || 0; // End of closure ariables available in \"Procedures in renderNode\".\r\n  // -----------------------------------------------------------------\r\n  // Node group\r\n\r\n  var group = giveGraphic('nodeGroup', Group);\r\n\r\n  if (!group) {\r\n    return;\r\n  }\r\n\r\n  parentGroup.add(group); // x,y are not set when el is above view root.\r\n\r\n  group.x = thisLayout.x || 0;\r\n  group.y = thisLayout.y || 0;\r\n  group.markRedraw();\r\n  inner(group).nodeWidth = thisWidth;\r\n  inner(group).nodeHeight = thisHeight;\r\n\r\n  if (thisLayout.isAboveViewRoot) {\r\n    return group;\r\n  } // Background\r\n\r\n\r\n  var bg = giveGraphic('background', Rect, depth, Z2_BG);\r\n  bg && renderBackground(group, bg, isParent && thisLayout.upperLabelHeight);\r\n  var emphasisModel = nodeModel.getModel('emphasis');\r\n  var focus = emphasisModel.get('focus');\r\n  var blurScope = emphasisModel.get('blurScope');\r\n  var isDisabled = emphasisModel.get('disabled');\r\n  var focusOrIndices = focus === 'ancestor' ? thisNode.getAncestorsIndices() : focus === 'descendant' ? thisNode.getDescendantIndices() : focus; // No children, render content.\r\n\r\n  if (isParent) {\r\n    // Because of the implementation about \"traverse\" in graphic hover style, we\r\n    // can not set hover listener on the \"group\" of non-leaf node. Otherwise the\r\n    // hover event from the descendents will be listenered.\r\n    if (isHighDownDispatcher(group)) {\r\n      setAsHighDownDispatcher(group, false);\r\n    }\r\n\r\n    if (bg) {\r\n      setAsHighDownDispatcher(bg, !isDisabled); // Only for enabling highlight/downplay.\r\n\r\n      data.setItemGraphicEl(thisNode.dataIndex, bg);\r\n      enableHoverFocus(bg, focusOrIndices, blurScope);\r\n    }\r\n  } else {\r\n    var content = giveGraphic('content', Rect, depth, Z2_CONTENT);\r\n    content && renderContent(group, content);\r\n    bg.disableMorphing = true;\r\n\r\n    if (bg && isHighDownDispatcher(bg)) {\r\n      setAsHighDownDispatcher(bg, false);\r\n    }\r\n\r\n    setAsHighDownDispatcher(group, !isDisabled); // Only for enabling highlight/downplay.\r\n\r\n    data.setItemGraphicEl(thisNode.dataIndex, group);\r\n    enableHoverFocus(group, focusOrIndices, blurScope);\r\n  }\r\n\r\n  return group; // ----------------------------\r\n  // | Procedures in renderNode |\r\n  // ----------------------------\r\n\r\n  function renderBackground(group, bg, useUpperLabel) {\r\n    var ecData = getECData(bg); // For tooltip.\r\n\r\n    ecData.dataIndex = thisNode.dataIndex;\r\n    ecData.seriesIndex = seriesModel.seriesIndex;\r\n    bg.setShape({\r\n      x: 0,\r\n      y: 0,\r\n      width: thisWidth,\r\n      height: thisHeight,\r\n      r: borderRadius\r\n    });\r\n\r\n    if (thisInvisible) {\r\n      // If invisible, do not set visual, otherwise the element will\r\n      // change immediately before animation. We think it is OK to\r\n      // remain its origin color when moving out of the view window.\r\n      processInvisible(bg);\r\n    } else {\r\n      bg.invisible = false;\r\n      var style = thisNode.getVisual('style');\r\n      var visualBorderColor = style.stroke;\r\n      var normalStyle = getItemStyleNormal(itemStyleNormalModel);\r\n      normalStyle.fill = visualBorderColor;\r\n      var emphasisStyle = getStateItemStyle(itemStyleEmphasisModel);\r\n      emphasisStyle.fill = itemStyleEmphasisModel.get('borderColor');\r\n      var blurStyle = getStateItemStyle(itemStyleBlurModel);\r\n      blurStyle.fill = itemStyleBlurModel.get('borderColor');\r\n      var selectStyle = getStateItemStyle(itemStyleSelectModel);\r\n      selectStyle.fill = itemStyleSelectModel.get('borderColor');\r\n\r\n      if (useUpperLabel) {\r\n        var upperLabelWidth = thisWidth - 2 * borderWidth;\r\n        prepareText( // PENDING: convert ZRColor to ColorString for text.\r\n        bg, visualBorderColor, style.opacity, {\r\n          x: borderWidth,\r\n          y: 0,\r\n          width: upperLabelWidth,\r\n          height: upperHeight\r\n        });\r\n      } // For old bg.\r\n      else {\r\n          bg.removeTextContent();\r\n        }\r\n\r\n      bg.setStyle(normalStyle);\r\n      bg.ensureState('emphasis').style = emphasisStyle;\r\n      bg.ensureState('blur').style = blurStyle;\r\n      bg.ensureState('select').style = selectStyle;\r\n      setDefaultStateProxy(bg);\r\n    }\r\n\r\n    group.add(bg);\r\n  }\r\n\r\n  function renderContent(group, content) {\r\n    var ecData = getECData(content); // For tooltip.\r\n\r\n    ecData.dataIndex = thisNode.dataIndex;\r\n    ecData.seriesIndex = seriesModel.seriesIndex;\r\n    var contentWidth = Math.max(thisWidth - 2 * borderWidth, 0);\r\n    var contentHeight = Math.max(thisHeight - 2 * borderWidth, 0);\r\n    content.culling = true;\r\n    content.setShape({\r\n      x: borderWidth,\r\n      y: borderWidth,\r\n      width: contentWidth,\r\n      height: contentHeight,\r\n      r: borderRadius\r\n    });\r\n\r\n    if (thisInvisible) {\r\n      // If invisible, do not set visual, otherwise the element will\r\n      // change immediately before animation. We think it is OK to\r\n      // remain its origin color when moving out of the view window.\r\n      processInvisible(content);\r\n    } else {\r\n      content.invisible = false;\r\n      var nodeStyle = thisNode.getVisual('style');\r\n      var visualColor = nodeStyle.fill;\r\n      var normalStyle = getItemStyleNormal(itemStyleNormalModel);\r\n      normalStyle.fill = visualColor;\r\n      normalStyle.decal = nodeStyle.decal;\r\n      var emphasisStyle = getStateItemStyle(itemStyleEmphasisModel);\r\n      var blurStyle = getStateItemStyle(itemStyleBlurModel);\r\n      var selectStyle = getStateItemStyle(itemStyleSelectModel); // PENDING: convert ZRColor to ColorString for text.\r\n\r\n      prepareText(content, visualColor, nodeStyle.opacity, null);\r\n      content.setStyle(normalStyle);\r\n      content.ensureState('emphasis').style = emphasisStyle;\r\n      content.ensureState('blur').style = blurStyle;\r\n      content.ensureState('select').style = selectStyle;\r\n      setDefaultStateProxy(content);\r\n    }\r\n\r\n    group.add(content);\r\n  }\r\n\r\n  function processInvisible(element) {\r\n    // Delay invisible setting utill animation finished,\r\n    // avoid element vanish suddenly before animation.\r\n    !element.invisible && willInvisibleEls.push(element);\r\n  }\r\n\r\n  function prepareText(rectEl, visualColor, visualOpacity, // Can be null/undefined\r\n  upperLabelRect) {\r\n    var normalLabelModel = nodeModel.getModel(upperLabelRect ? PATH_UPPERLABEL_NORMAL : PATH_LABEL_NOAMAL);\r\n    var defaultText = convertOptionIdName(nodeModel.get('name'), null);\r\n    var isShow = normalLabelModel.getShallow('show');\r\n    setLabelStyle(rectEl, getLabelStatesModels(nodeModel, upperLabelRect ? PATH_UPPERLABEL_NORMAL : PATH_LABEL_NOAMAL), {\r\n      defaultText: isShow ? defaultText : null,\r\n      inheritColor: visualColor,\r\n      defaultOpacity: visualOpacity,\r\n      labelFetcher: seriesModel,\r\n      labelDataIndex: thisNode.dataIndex\r\n    });\r\n    var textEl = rectEl.getTextContent();\r\n\r\n    if (!textEl) {\r\n      return;\r\n    }\r\n\r\n    var textStyle = textEl.style;\r\n    var textPadding = normalizeCssArray(textStyle.padding || 0);\r\n\r\n    if (upperLabelRect) {\r\n      rectEl.setTextConfig({\r\n        layoutRect: upperLabelRect\r\n      });\r\n      textEl.disableLabelLayout = true;\r\n    }\r\n\r\n    textEl.beforeUpdate = function () {\r\n      var width = Math.max((upperLabelRect ? upperLabelRect.width : rectEl.shape.width) - textPadding[1] - textPadding[3], 0);\r\n      var height = Math.max((upperLabelRect ? upperLabelRect.height : rectEl.shape.height) - textPadding[0] - textPadding[2], 0);\r\n\r\n      if (textStyle.width !== width || textStyle.height !== height) {\r\n        textEl.setStyle({\r\n          width: width,\r\n          height: height\r\n        });\r\n      }\r\n    };\r\n\r\n    textStyle.truncateMinChar = 2;\r\n    textStyle.lineOverflow = 'truncate';\r\n    addDrillDownIcon(textStyle, upperLabelRect, thisLayout);\r\n    var textEmphasisState = textEl.getState('emphasis');\r\n    addDrillDownIcon(textEmphasisState ? textEmphasisState.style : null, upperLabelRect, thisLayout);\r\n  }\r\n\r\n  function addDrillDownIcon(style, upperLabelRect, thisLayout) {\r\n    var text = style ? style.text : null;\r\n\r\n    if (!upperLabelRect && thisLayout.isLeafRoot && text != null) {\r\n      var iconChar = seriesModel.get('drillDownIcon', true);\r\n      style.text = iconChar ? iconChar + ' ' + text : text;\r\n    }\r\n  }\r\n\r\n  function giveGraphic(storageName, Ctor, depth, z) {\r\n    var element = oldRawIndex != null && oldStorage[storageName][oldRawIndex];\r\n    var lasts = lastsForAnimation[storageName];\r\n\r\n    if (element) {\r\n      // Remove from oldStorage\r\n      oldStorage[storageName][oldRawIndex] = null;\r\n      prepareAnimationWhenHasOld(lasts, element);\r\n    } // If invisible and no old element, do not create new element (for optimizing).\r\n    else if (!thisInvisible) {\r\n        element = new Ctor();\r\n\r\n        if (element instanceof Displayable) {\r\n          element.z2 = calculateZ2(depth, z);\r\n        }\r\n\r\n        prepareAnimationWhenNoOld(lasts, element);\r\n      } // Set to thisStorage\r\n\r\n\r\n    return thisStorage[storageName][thisRawIndex] = element;\r\n  }\r\n\r\n  function prepareAnimationWhenHasOld(lasts, element) {\r\n    var lastCfg = lasts[thisRawIndex] = {};\r\n\r\n    if (element instanceof Group) {\r\n      lastCfg.oldX = element.x;\r\n      lastCfg.oldY = element.y;\r\n    } else {\r\n      lastCfg.oldShape = extend({}, element.shape);\r\n    }\r\n  } // If a element is new, we need to find the animation start point carefully,\r\n  // otherwise it will looks strange when 'zoomToNode'.\r\n\r\n\r\n  function prepareAnimationWhenNoOld(lasts, element) {\r\n    var lastCfg = lasts[thisRawIndex] = {};\r\n    var parentNode = thisNode.parentNode;\r\n    var isGroup = element instanceof graphic.Group;\r\n\r\n    if (parentNode && (!reRoot || reRoot.direction === 'drillDown')) {\r\n      var parentOldX = 0;\r\n      var parentOldY = 0; // New nodes appear from right-bottom corner in 'zoomToNode' animation.\r\n      // For convenience, get old bounding rect from background.\r\n\r\n      var parentOldBg = lastsForAnimation.background[parentNode.getRawIndex()];\r\n\r\n      if (!reRoot && parentOldBg && parentOldBg.oldShape) {\r\n        parentOldX = parentOldBg.oldShape.width;\r\n        parentOldY = parentOldBg.oldShape.height;\r\n      } // When no parent old shape found, its parent is new too,\r\n      // so we can just use {x:0, y:0}.\r\n\r\n\r\n      if (isGroup) {\r\n        lastCfg.oldX = 0;\r\n        lastCfg.oldY = parentOldY;\r\n      } else {\r\n        lastCfg.oldShape = {\r\n          x: parentOldX,\r\n          y: parentOldY,\r\n          width: 0,\r\n          height: 0\r\n        };\r\n      }\r\n    } // Fade in, user can be aware that these nodes are new.\r\n\r\n\r\n    lastCfg.fadein = !isGroup;\r\n  }\r\n} // We cannot set all background with the same z, because the behaviour of\r\n// drill down and roll up differ background creation sequence from tree\r\n// hierarchy sequence, which cause lower background elements to overlap\r\n// upper ones. So we calculate z based on depth.\r\n// Moreover, we try to shrink down z interval to [0, 1] to avoid that\r\n// treemap with large z overlaps other components.\r\n\r\n\r\nfunction calculateZ2(depth, z2InLevel) {\r\n  return depth * Z2_BASE + z2InLevel;\r\n}\r\n\r\nexport default TreemapView;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport VisualMapping from '../../visual/VisualMapping.js';\r\nimport { each, extend, isArray } from 'zrender/lib/core/util.js';\r\nimport { modifyHSL, modifyAlpha } from 'zrender/lib/tool/color.js';\r\nimport { makeInner } from '../../util/model.js';\r\nvar ITEM_STYLE_NORMAL = 'itemStyle';\r\nvar inner = makeInner();\r\nexport default {\r\n  seriesType: 'treemap',\r\n  reset: function (seriesModel) {\r\n    var tree = seriesModel.getData().tree;\r\n    var root = tree.root;\r\n\r\n    if (root.isRemoved()) {\r\n      return;\r\n    }\r\n\r\n    travelTree(root, // Visual should calculate from tree root but not view root.\r\n    {}, seriesModel.getViewRoot().getAncestors(), seriesModel);\r\n  }\r\n};\r\n\r\nfunction travelTree(node, designatedVisual, viewRootAncestors, seriesModel) {\r\n  var nodeModel = node.getModel();\r\n  var nodeLayout = node.getLayout();\r\n  var data = node.hostTree.data; // Optimize\r\n\r\n  if (!nodeLayout || nodeLayout.invisible || !nodeLayout.isInView) {\r\n    return;\r\n  }\r\n\r\n  var nodeItemStyleModel = nodeModel.getModel(ITEM_STYLE_NORMAL);\r\n  var visuals = buildVisuals(nodeItemStyleModel, designatedVisual, seriesModel);\r\n  var existsStyle = data.ensureUniqueItemVisual(node.dataIndex, 'style'); // calculate border color\r\n\r\n  var borderColor = nodeItemStyleModel.get('borderColor');\r\n  var borderColorSaturation = nodeItemStyleModel.get('borderColorSaturation');\r\n  var thisNodeColor;\r\n\r\n  if (borderColorSaturation != null) {\r\n    // For performance, do not always execute 'calculateColor'.\r\n    thisNodeColor = calculateColor(visuals);\r\n    borderColor = calculateBorderColor(borderColorSaturation, thisNodeColor);\r\n  }\r\n\r\n  existsStyle.stroke = borderColor;\r\n  var viewChildren = node.viewChildren;\r\n\r\n  if (!viewChildren || !viewChildren.length) {\r\n    thisNodeColor = calculateColor(visuals); // Apply visual to this node.\r\n\r\n    existsStyle.fill = thisNodeColor;\r\n  } else {\r\n    var mapping_1 = buildVisualMapping(node, nodeModel, nodeLayout, nodeItemStyleModel, visuals, viewChildren); // Designate visual to children.\r\n\r\n    each(viewChildren, function (child, index) {\r\n      // If higher than viewRoot, only ancestors of viewRoot is needed to visit.\r\n      if (child.depth >= viewRootAncestors.length || child === viewRootAncestors[child.depth]) {\r\n        var childVisual = mapVisual(nodeModel, visuals, child, index, mapping_1, seriesModel);\r\n        travelTree(child, childVisual, viewRootAncestors, seriesModel);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction buildVisuals(nodeItemStyleModel, designatedVisual, seriesModel) {\r\n  var visuals = extend({}, designatedVisual);\r\n  var designatedVisualItemStyle = seriesModel.designatedVisualItemStyle;\r\n  each(['color', 'colorAlpha', 'colorSaturation'], function (visualName) {\r\n    // Priority: thisNode > thisLevel > parentNodeDesignated > seriesModel\r\n    designatedVisualItemStyle[visualName] = designatedVisual[visualName];\r\n    var val = nodeItemStyleModel.get(visualName);\r\n    designatedVisualItemStyle[visualName] = null;\r\n    val != null && (visuals[visualName] = val);\r\n  });\r\n  return visuals;\r\n}\r\n\r\nfunction calculateColor(visuals) {\r\n  var color = getValueVisualDefine(visuals, 'color');\r\n\r\n  if (color) {\r\n    var colorAlpha = getValueVisualDefine(visuals, 'colorAlpha');\r\n    var colorSaturation = getValueVisualDefine(visuals, 'colorSaturation');\r\n\r\n    if (colorSaturation) {\r\n      color = modifyHSL(color, null, null, colorSaturation);\r\n    }\r\n\r\n    if (colorAlpha) {\r\n      color = modifyAlpha(color, colorAlpha);\r\n    }\r\n\r\n    return color;\r\n  }\r\n}\r\n\r\nfunction calculateBorderColor(borderColorSaturation, thisNodeColor) {\r\n  return thisNodeColor != null // Can only be string\r\n  ? modifyHSL(thisNodeColor, null, null, borderColorSaturation) : null;\r\n}\r\n\r\nfunction getValueVisualDefine(visuals, name) {\r\n  var value = visuals[name];\r\n\r\n  if (value != null && value !== 'none') {\r\n    return value;\r\n  }\r\n}\r\n\r\nfunction buildVisualMapping(node, nodeModel, nodeLayout, nodeItemStyleModel, visuals, viewChildren) {\r\n  if (!viewChildren || !viewChildren.length) {\r\n    return;\r\n  }\r\n\r\n  var rangeVisual = getRangeVisual(nodeModel, 'color') || visuals.color != null && visuals.color !== 'none' && (getRangeVisual(nodeModel, 'colorAlpha') || getRangeVisual(nodeModel, 'colorSaturation'));\r\n\r\n  if (!rangeVisual) {\r\n    return;\r\n  }\r\n\r\n  var visualMin = nodeModel.get('visualMin');\r\n  var visualMax = nodeModel.get('visualMax');\r\n  var dataExtent = nodeLayout.dataExtent.slice();\r\n  visualMin != null && visualMin < dataExtent[0] && (dataExtent[0] = visualMin);\r\n  visualMax != null && visualMax > dataExtent[1] && (dataExtent[1] = visualMax);\r\n  var colorMappingBy = nodeModel.get('colorMappingBy');\r\n  var opt = {\r\n    type: rangeVisual.name,\r\n    dataExtent: dataExtent,\r\n    visual: rangeVisual.range\r\n  };\r\n\r\n  if (opt.type === 'color' && (colorMappingBy === 'index' || colorMappingBy === 'id')) {\r\n    opt.mappingMethod = 'category';\r\n    opt.loop = true; // categories is ordinal, so do not set opt.categories.\r\n  } else {\r\n    opt.mappingMethod = 'linear';\r\n  }\r\n\r\n  var mapping = new VisualMapping(opt);\r\n  inner(mapping).drColorMappingBy = colorMappingBy;\r\n  return mapping;\r\n} // Notice: If we don't have the attribute 'colorRange', but only use\r\n// attribute 'color' to represent both concepts of 'colorRange' and 'color',\r\n// (It means 'colorRange' when 'color' is Array, means 'color' when not array),\r\n// this problem will be encountered:\r\n// If a level-1 node doesn't have children, and its siblings have children,\r\n// and colorRange is set on level-1, then the node cannot be colored.\r\n// So we separate 'colorRange' and 'color' to different attributes.\r\n\r\n\r\nfunction getRangeVisual(nodeModel, name) {\r\n  // 'colorRange', 'colorARange', 'colorSRange'.\r\n  // If not exists on this node, fetch from levels and series.\r\n  var range = nodeModel.get(name);\r\n  return isArray(range) && range.length ? {\r\n    name: name,\r\n    range: range\r\n  } : null;\r\n}\r\n\r\nfunction mapVisual(nodeModel, visuals, child, index, mapping, seriesModel) {\r\n  var childVisuals = extend({}, visuals);\r\n\r\n  if (mapping) {\r\n    // Only support color, colorAlpha, colorSaturation.\r\n    var mappingType = mapping.type;\r\n    var colorMappingBy = mappingType === 'color' && inner(mapping).drColorMappingBy;\r\n    var value = colorMappingBy === 'index' ? index : colorMappingBy === 'id' ? seriesModel.mapIdToIndex(child.getId()) : child.getValue(nodeModel.get('visualDimension'));\r\n    childVisuals[mappingType] = mapping.mapValueToVisual(value);\r\n  }\r\n\r\n  return childVisuals;\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n/*\r\n* A third-party license is embedded for some of the code in this file:\r\n* The treemap layout implementation was originally copied from\r\n* \"d3.js\" with some modifications made for this project.\r\n* (See more details in the comment of the method \"squarify\" below.)\r\n* The use of the source code of this file is also subject to the terms\r\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\r\n* </licenses/LICENSE-d3>).\r\n*/\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\r\nimport { parsePercent, MAX_SAFE_INTEGER } from '../../util/number.js';\r\nimport * as layout from '../../util/layout.js';\r\nimport * as helper from '../helper/treeHelper.js';\r\nvar mathMax = Math.max;\r\nvar mathMin = Math.min;\r\nvar retrieveValue = zrUtil.retrieve;\r\nvar each = zrUtil.each;\r\nvar PATH_BORDER_WIDTH = ['itemStyle', 'borderWidth'];\r\nvar PATH_GAP_WIDTH = ['itemStyle', 'gapWidth'];\r\nvar PATH_UPPER_LABEL_SHOW = ['upperLabel', 'show'];\r\nvar PATH_UPPER_LABEL_HEIGHT = ['upperLabel', 'height'];\r\n;\r\n/**\r\n * @public\r\n */\r\n\r\nexport default {\r\n  seriesType: 'treemap',\r\n  reset: function (seriesModel, ecModel, api, payload) {\r\n    // Layout result in each node:\r\n    // {x, y, width, height, area, borderWidth}\r\n    var ecWidth = api.getWidth();\r\n    var ecHeight = api.getHeight();\r\n    var seriesOption = seriesModel.option;\r\n    var layoutInfo = layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\r\n      width: api.getWidth(),\r\n      height: api.getHeight()\r\n    });\r\n    var size = seriesOption.size || []; // Compatible with ec2.\r\n\r\n    var containerWidth = parsePercent(retrieveValue(layoutInfo.width, size[0]), ecWidth);\r\n    var containerHeight = parsePercent(retrieveValue(layoutInfo.height, size[1]), ecHeight); // Fetch payload info.\r\n\r\n    var payloadType = payload && payload.type;\r\n    var types = ['treemapZoomToNode', 'treemapRootToNode'];\r\n    var targetInfo = helper.retrieveTargetInfo(payload, types, seriesModel);\r\n    var rootRect = payloadType === 'treemapRender' || payloadType === 'treemapMove' ? payload.rootRect : null;\r\n    var viewRoot = seriesModel.getViewRoot();\r\n    var viewAbovePath = helper.getPathToRoot(viewRoot);\r\n\r\n    if (payloadType !== 'treemapMove') {\r\n      var rootSize = payloadType === 'treemapZoomToNode' ? estimateRootSize(seriesModel, targetInfo, viewRoot, containerWidth, containerHeight) : rootRect ? [rootRect.width, rootRect.height] : [containerWidth, containerHeight];\r\n      var sort_1 = seriesOption.sort;\r\n\r\n      if (sort_1 && sort_1 !== 'asc' && sort_1 !== 'desc') {\r\n        // Default to be desc order.\r\n        sort_1 = 'desc';\r\n      }\r\n\r\n      var options = {\r\n        squareRatio: seriesOption.squareRatio,\r\n        sort: sort_1,\r\n        leafDepth: seriesOption.leafDepth\r\n      }; // layout should be cleared because using updateView but not update.\r\n\r\n      viewRoot.hostTree.clearLayouts(); // TODO\r\n      // optimize: if out of view clip, do not layout.\r\n      // But take care that if do not render node out of view clip,\r\n      // how to calculate start po\r\n\r\n      var viewRootLayout_1 = {\r\n        x: 0,\r\n        y: 0,\r\n        width: rootSize[0],\r\n        height: rootSize[1],\r\n        area: rootSize[0] * rootSize[1]\r\n      };\r\n      viewRoot.setLayout(viewRootLayout_1);\r\n      squarify(viewRoot, options, false, 0); // Supplement layout.\r\n\r\n      viewRootLayout_1 = viewRoot.getLayout();\r\n      each(viewAbovePath, function (node, index) {\r\n        var childValue = (viewAbovePath[index + 1] || viewRoot).getValue();\r\n        node.setLayout(zrUtil.extend({\r\n          dataExtent: [childValue, childValue],\r\n          borderWidth: 0,\r\n          upperHeight: 0\r\n        }, viewRootLayout_1));\r\n      });\r\n    }\r\n\r\n    var treeRoot = seriesModel.getData().tree.root;\r\n    treeRoot.setLayout(calculateRootPosition(layoutInfo, rootRect, targetInfo), true);\r\n    seriesModel.setLayoutInfo(layoutInfo); // FIXME\r\n    // \u73B0\u5728\u6CA1\u6709clip\u529F\u80FD\uFF0C\u6682\u65F6\u53D6ec\u9AD8\u5BBD\u3002\r\n\r\n    prunning(treeRoot, // Transform to base element coordinate system.\r\n    new BoundingRect(-layoutInfo.x, -layoutInfo.y, ecWidth, ecHeight), viewAbovePath, viewRoot, 0);\r\n  }\r\n};\r\n/**\r\n * Layout treemap with squarify algorithm.\r\n * The original presentation of this algorithm\r\n * was made by Mark Bruls, Kees Huizing, and Jarke J. van Wijk\r\n * <https://graphics.ethz.ch/teaching/scivis_common/Literature/squarifiedTreeMaps.pdf>.\r\n * The implementation of this algorithm was originally copied from \"d3.js\"\r\n * <https://github.com/d3/d3/blob/9cc9a875e636a1dcf36cc1e07bdf77e1ad6e2c74/src/layout/treemap.js>\r\n * with some modifications made for this program.\r\n * See the license statement at the head of this file.\r\n *\r\n * @protected\r\n * @param {module:echarts/data/Tree~TreeNode} node\r\n * @param {Object} options\r\n * @param {string} options.sort 'asc' or 'desc'\r\n * @param {number} options.squareRatio\r\n * @param {boolean} hideChildren\r\n * @param {number} depth\r\n */\r\n\r\nfunction squarify(node, options, hideChildren, depth) {\r\n  var width;\r\n  var height;\r\n\r\n  if (node.isRemoved()) {\r\n    return;\r\n  }\r\n\r\n  var thisLayout = node.getLayout();\r\n  width = thisLayout.width;\r\n  height = thisLayout.height; // Considering border and gap\r\n\r\n  var nodeModel = node.getModel();\r\n  var borderWidth = nodeModel.get(PATH_BORDER_WIDTH);\r\n  var halfGapWidth = nodeModel.get(PATH_GAP_WIDTH) / 2;\r\n  var upperLabelHeight = getUpperLabelHeight(nodeModel);\r\n  var upperHeight = Math.max(borderWidth, upperLabelHeight);\r\n  var layoutOffset = borderWidth - halfGapWidth;\r\n  var layoutOffsetUpper = upperHeight - halfGapWidth;\r\n  node.setLayout({\r\n    borderWidth: borderWidth,\r\n    upperHeight: upperHeight,\r\n    upperLabelHeight: upperLabelHeight\r\n  }, true);\r\n  width = mathMax(width - 2 * layoutOffset, 0);\r\n  height = mathMax(height - layoutOffset - layoutOffsetUpper, 0);\r\n  var totalArea = width * height;\r\n  var viewChildren = initChildren(node, nodeModel, totalArea, options, hideChildren, depth);\r\n\r\n  if (!viewChildren.length) {\r\n    return;\r\n  }\r\n\r\n  var rect = {\r\n    x: layoutOffset,\r\n    y: layoutOffsetUpper,\r\n    width: width,\r\n    height: height\r\n  };\r\n  var rowFixedLength = mathMin(width, height);\r\n  var best = Infinity; // the best row score so far\r\n\r\n  var row = [];\r\n  row.area = 0;\r\n\r\n  for (var i = 0, len = viewChildren.length; i < len;) {\r\n    var child = viewChildren[i];\r\n    row.push(child);\r\n    row.area += child.getLayout().area;\r\n    var score = worst(row, rowFixedLength, options.squareRatio); // continue with this orientation\r\n\r\n    if (score <= best) {\r\n      i++;\r\n      best = score;\r\n    } // abort, and try a different orientation\r\n    else {\r\n        row.area -= row.pop().getLayout().area;\r\n        position(row, rowFixedLength, rect, halfGapWidth, false);\r\n        rowFixedLength = mathMin(rect.width, rect.height);\r\n        row.length = row.area = 0;\r\n        best = Infinity;\r\n      }\r\n  }\r\n\r\n  if (row.length) {\r\n    position(row, rowFixedLength, rect, halfGapWidth, true);\r\n  }\r\n\r\n  if (!hideChildren) {\r\n    var childrenVisibleMin = nodeModel.get('childrenVisibleMin');\r\n\r\n    if (childrenVisibleMin != null && totalArea < childrenVisibleMin) {\r\n      hideChildren = true;\r\n    }\r\n  }\r\n\r\n  for (var i = 0, len = viewChildren.length; i < len; i++) {\r\n    squarify(viewChildren[i], options, hideChildren, depth + 1);\r\n  }\r\n}\r\n/**\r\n * Set area to each child, and calculate data extent for visual coding.\r\n */\r\n\r\n\r\nfunction initChildren(node, nodeModel, totalArea, options, hideChildren, depth) {\r\n  var viewChildren = node.children || [];\r\n  var orderBy = options.sort;\r\n  orderBy !== 'asc' && orderBy !== 'desc' && (orderBy = null);\r\n  var overLeafDepth = options.leafDepth != null && options.leafDepth <= depth; // leafDepth has higher priority.\r\n\r\n  if (hideChildren && !overLeafDepth) {\r\n    return node.viewChildren = [];\r\n  } // Sort children, order by desc.\r\n\r\n\r\n  viewChildren = zrUtil.filter(viewChildren, function (child) {\r\n    return !child.isRemoved();\r\n  });\r\n  sort(viewChildren, orderBy);\r\n  var info = statistic(nodeModel, viewChildren, orderBy);\r\n\r\n  if (info.sum === 0) {\r\n    return node.viewChildren = [];\r\n  }\r\n\r\n  info.sum = filterByThreshold(nodeModel, totalArea, info.sum, orderBy, viewChildren);\r\n\r\n  if (info.sum === 0) {\r\n    return node.viewChildren = [];\r\n  } // Set area to each child.\r\n\r\n\r\n  for (var i = 0, len = viewChildren.length; i < len; i++) {\r\n    var area = viewChildren[i].getValue() / info.sum * totalArea; // Do not use setLayout({...}, true), because it is needed to clear last layout.\r\n\r\n    viewChildren[i].setLayout({\r\n      area: area\r\n    });\r\n  }\r\n\r\n  if (overLeafDepth) {\r\n    viewChildren.length && node.setLayout({\r\n      isLeafRoot: true\r\n    }, true);\r\n    viewChildren.length = 0;\r\n  }\r\n\r\n  node.viewChildren = viewChildren;\r\n  node.setLayout({\r\n    dataExtent: info.dataExtent\r\n  }, true);\r\n  return viewChildren;\r\n}\r\n/**\r\n * Consider 'visibleMin'. Modify viewChildren and get new sum.\r\n */\r\n\r\n\r\nfunction filterByThreshold(nodeModel, totalArea, sum, orderBy, orderedChildren) {\r\n  // visibleMin is not supported yet when no option.sort.\r\n  if (!orderBy) {\r\n    return sum;\r\n  }\r\n\r\n  var visibleMin = nodeModel.get('visibleMin');\r\n  var len = orderedChildren.length;\r\n  var deletePoint = len; // Always travel from little value to big value.\r\n\r\n  for (var i = len - 1; i >= 0; i--) {\r\n    var value = orderedChildren[orderBy === 'asc' ? len - i - 1 : i].getValue();\r\n\r\n    if (value / sum * totalArea < visibleMin) {\r\n      deletePoint = i;\r\n      sum -= value;\r\n    }\r\n  }\r\n\r\n  orderBy === 'asc' ? orderedChildren.splice(0, len - deletePoint) : orderedChildren.splice(deletePoint, len - deletePoint);\r\n  return sum;\r\n}\r\n/**\r\n * Sort\r\n */\r\n\r\n\r\nfunction sort(viewChildren, orderBy) {\r\n  if (orderBy) {\r\n    viewChildren.sort(function (a, b) {\r\n      var diff = orderBy === 'asc' ? a.getValue() - b.getValue() : b.getValue() - a.getValue();\r\n      return diff === 0 ? orderBy === 'asc' ? a.dataIndex - b.dataIndex : b.dataIndex - a.dataIndex : diff;\r\n    });\r\n  }\r\n\r\n  return viewChildren;\r\n}\r\n/**\r\n * Statistic\r\n */\r\n\r\n\r\nfunction statistic(nodeModel, children, orderBy) {\r\n  // Calculate sum.\r\n  var sum = 0;\r\n\r\n  for (var i = 0, len = children.length; i < len; i++) {\r\n    sum += children[i].getValue();\r\n  } // Statistic data extent for latter visual coding.\r\n  // Notice: data extent should be calculate based on raw children\r\n  // but not filtered view children, otherwise visual mapping will not\r\n  // be stable when zoom (where children is filtered by visibleMin).\r\n\r\n\r\n  var dimension = nodeModel.get('visualDimension');\r\n  var dataExtent; // The same as area dimension.\r\n\r\n  if (!children || !children.length) {\r\n    dataExtent = [NaN, NaN];\r\n  } else if (dimension === 'value' && orderBy) {\r\n    dataExtent = [children[children.length - 1].getValue(), children[0].getValue()];\r\n    orderBy === 'asc' && dataExtent.reverse();\r\n  } // Other dimension.\r\n  else {\r\n      dataExtent = [Infinity, -Infinity];\r\n      each(children, function (child) {\r\n        var value = child.getValue(dimension);\r\n        value < dataExtent[0] && (dataExtent[0] = value);\r\n        value > dataExtent[1] && (dataExtent[1] = value);\r\n      });\r\n    }\r\n\r\n  return {\r\n    sum: sum,\r\n    dataExtent: dataExtent\r\n  };\r\n}\r\n/**\r\n * Computes the score for the specified row,\r\n * as the worst aspect ratio.\r\n */\r\n\r\n\r\nfunction worst(row, rowFixedLength, ratio) {\r\n  var areaMax = 0;\r\n  var areaMin = Infinity;\r\n\r\n  for (var i = 0, area = void 0, len = row.length; i < len; i++) {\r\n    area = row[i].getLayout().area;\r\n\r\n    if (area) {\r\n      area < areaMin && (areaMin = area);\r\n      area > areaMax && (areaMax = area);\r\n    }\r\n  }\r\n\r\n  var squareArea = row.area * row.area;\r\n  var f = rowFixedLength * rowFixedLength * ratio;\r\n  return squareArea ? mathMax(f * areaMax / squareArea, squareArea / (f * areaMin)) : Infinity;\r\n}\r\n/**\r\n * Positions the specified row of nodes. Modifies `rect`.\r\n */\r\n\r\n\r\nfunction position(row, rowFixedLength, rect, halfGapWidth, flush) {\r\n  // When rowFixedLength === rect.width,\r\n  // it is horizontal subdivision,\r\n  // rowFixedLength is the width of the subdivision,\r\n  // rowOtherLength is the height of the subdivision,\r\n  // and nodes will be positioned from left to right.\r\n  // wh[idx0WhenH] means: when horizontal,\r\n  //      wh[idx0WhenH] => wh[0] => 'width'.\r\n  //      xy[idx1WhenH] => xy[1] => 'y'.\r\n  var idx0WhenH = rowFixedLength === rect.width ? 0 : 1;\r\n  var idx1WhenH = 1 - idx0WhenH;\r\n  var xy = ['x', 'y'];\r\n  var wh = ['width', 'height'];\r\n  var last = rect[xy[idx0WhenH]];\r\n  var rowOtherLength = rowFixedLength ? row.area / rowFixedLength : 0;\r\n\r\n  if (flush || rowOtherLength > rect[wh[idx1WhenH]]) {\r\n    rowOtherLength = rect[wh[idx1WhenH]]; // over+underflow\r\n  }\r\n\r\n  for (var i = 0, rowLen = row.length; i < rowLen; i++) {\r\n    var node = row[i];\r\n    var nodeLayout = {};\r\n    var step = rowOtherLength ? node.getLayout().area / rowOtherLength : 0;\r\n    var wh1 = nodeLayout[wh[idx1WhenH]] = mathMax(rowOtherLength - 2 * halfGapWidth, 0); // We use Math.max/min to avoid negative width/height when considering gap width.\r\n\r\n    var remain = rect[xy[idx0WhenH]] + rect[wh[idx0WhenH]] - last;\r\n    var modWH = i === rowLen - 1 || remain < step ? remain : step;\r\n    var wh0 = nodeLayout[wh[idx0WhenH]] = mathMax(modWH - 2 * halfGapWidth, 0);\r\n    nodeLayout[xy[idx1WhenH]] = rect[xy[idx1WhenH]] + mathMin(halfGapWidth, wh1 / 2);\r\n    nodeLayout[xy[idx0WhenH]] = last + mathMin(halfGapWidth, wh0 / 2);\r\n    last += modWH;\r\n    node.setLayout(nodeLayout, true);\r\n  }\r\n\r\n  rect[xy[idx1WhenH]] += rowOtherLength;\r\n  rect[wh[idx1WhenH]] -= rowOtherLength;\r\n} // Return [containerWidth, containerHeight] as default.\r\n\r\n\r\nfunction estimateRootSize(seriesModel, targetInfo, viewRoot, containerWidth, containerHeight) {\r\n  // If targetInfo.node exists, we zoom to the node,\r\n  // so estimate whole width and height by target node.\r\n  var currNode = (targetInfo || {}).node;\r\n  var defaultSize = [containerWidth, containerHeight];\r\n\r\n  if (!currNode || currNode === viewRoot) {\r\n    return defaultSize;\r\n  }\r\n\r\n  var parent;\r\n  var viewArea = containerWidth * containerHeight;\r\n  var area = viewArea * seriesModel.option.zoomToNodeRatio;\r\n\r\n  while (parent = currNode.parentNode) {\r\n    // jshint ignore:line\r\n    var sum = 0;\r\n    var siblings = parent.children;\r\n\r\n    for (var i = 0, len = siblings.length; i < len; i++) {\r\n      sum += siblings[i].getValue();\r\n    }\r\n\r\n    var currNodeValue = currNode.getValue();\r\n\r\n    if (currNodeValue === 0) {\r\n      return defaultSize;\r\n    }\r\n\r\n    area *= sum / currNodeValue; // Considering border, suppose aspect ratio is 1.\r\n\r\n    var parentModel = parent.getModel();\r\n    var borderWidth = parentModel.get(PATH_BORDER_WIDTH);\r\n    var upperHeight = Math.max(borderWidth, getUpperLabelHeight(parentModel));\r\n    area += 4 * borderWidth * borderWidth + (3 * borderWidth + upperHeight) * Math.pow(area, 0.5);\r\n    area > MAX_SAFE_INTEGER && (area = MAX_SAFE_INTEGER);\r\n    currNode = parent;\r\n  }\r\n\r\n  area < viewArea && (area = viewArea);\r\n  var scale = Math.pow(area / viewArea, 0.5);\r\n  return [containerWidth * scale, containerHeight * scale];\r\n} // Root position based on coord of containerGroup\r\n\r\n\r\nfunction calculateRootPosition(layoutInfo, rootRect, targetInfo) {\r\n  if (rootRect) {\r\n    return {\r\n      x: rootRect.x,\r\n      y: rootRect.y\r\n    };\r\n  }\r\n\r\n  var defaultPosition = {\r\n    x: 0,\r\n    y: 0\r\n  };\r\n\r\n  if (!targetInfo) {\r\n    return defaultPosition;\r\n  } // If targetInfo is fetched by 'retrieveTargetInfo',\r\n  // old tree and new tree are the same tree,\r\n  // so the node still exists and we can visit it.\r\n\r\n\r\n  var targetNode = targetInfo.node;\r\n  var layout = targetNode.getLayout();\r\n\r\n  if (!layout) {\r\n    return defaultPosition;\r\n  } // Transform coord from local to container.\r\n\r\n\r\n  var targetCenter = [layout.width / 2, layout.height / 2];\r\n  var node = targetNode;\r\n\r\n  while (node) {\r\n    var nodeLayout = node.getLayout();\r\n    targetCenter[0] += nodeLayout.x;\r\n    targetCenter[1] += nodeLayout.y;\r\n    node = node.parentNode;\r\n  }\r\n\r\n  return {\r\n    x: layoutInfo.width / 2 - targetCenter[0],\r\n    y: layoutInfo.height / 2 - targetCenter[1]\r\n  };\r\n} // Mark nodes visible for prunning when visual coding and rendering.\r\n// Prunning depends on layout and root position, so we have to do it after layout.\r\n\r\n\r\nfunction prunning(node, clipRect, viewAbovePath, viewRoot, depth) {\r\n  var nodeLayout = node.getLayout();\r\n  var nodeInViewAbovePath = viewAbovePath[depth];\r\n  var isAboveViewRoot = nodeInViewAbovePath && nodeInViewAbovePath === node;\r\n\r\n  if (nodeInViewAbovePath && !isAboveViewRoot || depth === viewAbovePath.length && node !== viewRoot) {\r\n    return;\r\n  }\r\n\r\n  node.setLayout({\r\n    // isInView means: viewRoot sub tree + viewAbovePath\r\n    isInView: true,\r\n    // invisible only means: outside view clip so that the node can not\r\n    // see but still layout for animation preparation but not render.\r\n    invisible: !isAboveViewRoot && !clipRect.intersect(nodeLayout),\r\n    isAboveViewRoot: isAboveViewRoot\r\n  }, true); // Transform to child coordinate.\r\n\r\n  var childClipRect = new BoundingRect(clipRect.x - nodeLayout.x, clipRect.y - nodeLayout.y, clipRect.width, clipRect.height);\r\n  each(node.viewChildren || [], function (child) {\r\n    prunning(child, childClipRect, viewAbovePath, viewRoot, depth + 1);\r\n  });\r\n}\r\n\r\nfunction getUpperLabelHeight(model) {\r\n  return model.get(PATH_UPPER_LABEL_SHOW) ? model.get(PATH_UPPER_LABEL_HEIGHT) : 0;\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { installTreemapAction } from './treemapAction.js';\r\nimport TreemapSeriesModel from './TreemapSeries.js';\r\nimport TreemapView from './TreemapView.js';\r\nimport treemapVisual from './treemapVisual.js';\r\nimport treemapLayout from './treemapLayout.js';\r\nexport function install(registers) {\r\n  registers.registerSeriesModel(TreemapSeriesModel);\r\n  registers.registerChartView(TreemapView);\r\n  registers.registerVisual(treemapVisual);\r\n  registers.registerLayout(treemapLayout);\r\n  installTreemapAction(registers);\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { isNumber } from 'zrender/lib/core/util.js';\r\nexport default function categoryFilter(ecModel) {\r\n  var legendModels = ecModel.findComponents({\r\n    mainType: 'legend'\r\n  });\r\n\r\n  if (!legendModels || !legendModels.length) {\r\n    return;\r\n  }\r\n\r\n  ecModel.eachSeriesByType('graph', function (graphSeries) {\r\n    var categoriesData = graphSeries.getCategoriesData();\r\n    var graph = graphSeries.getGraph();\r\n    var data = graph.data;\r\n    var categoryNames = categoriesData.mapArray(categoriesData.getName);\r\n    data.filterSelf(function (idx) {\r\n      var model = data.getItemModel(idx);\r\n      var category = model.getShallow('category');\r\n\r\n      if (category != null) {\r\n        if (isNumber(category)) {\r\n          category = categoryNames[category];\r\n        } // If in any legend component the status is not selected.\r\n\r\n\r\n        for (var i = 0; i < legendModels.length; i++) {\r\n          if (!legendModels[i].isSelected(category)) {\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n\r\n      return true;\r\n    });\r\n  });\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { extend, isString } from 'zrender/lib/core/util.js';\r\nexport default function categoryVisual(ecModel) {\r\n  var paletteScope = {};\r\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\r\n    var categoriesData = seriesModel.getCategoriesData();\r\n    var data = seriesModel.getData();\r\n    var categoryNameIdxMap = {};\r\n    categoriesData.each(function (idx) {\r\n      var name = categoriesData.getName(idx); // Add prefix to avoid conflict with Object.prototype.\r\n\r\n      categoryNameIdxMap['ec-' + name] = idx;\r\n      var itemModel = categoriesData.getItemModel(idx);\r\n      var style = itemModel.getModel('itemStyle').getItemStyle();\r\n\r\n      if (!style.fill) {\r\n        // Get color from palette.\r\n        style.fill = seriesModel.getColorFromPalette(name, paletteScope);\r\n      }\r\n\r\n      categoriesData.setItemVisual(idx, 'style', style);\r\n      var symbolVisualList = ['symbol', 'symbolSize', 'symbolKeepAspect'];\r\n\r\n      for (var i = 0; i < symbolVisualList.length; i++) {\r\n        var symbolVisual = itemModel.getShallow(symbolVisualList[i], true);\r\n\r\n        if (symbolVisual != null) {\r\n          categoriesData.setItemVisual(idx, symbolVisualList[i], symbolVisual);\r\n        }\r\n      }\r\n    }); // Assign category color to visual\r\n\r\n    if (categoriesData.count()) {\r\n      data.each(function (idx) {\r\n        var model = data.getItemModel(idx);\r\n        var categoryIdx = model.getShallow('category');\r\n\r\n        if (categoryIdx != null) {\r\n          if (isString(categoryIdx)) {\r\n            categoryIdx = categoryNameIdxMap['ec-' + categoryIdx];\r\n          }\r\n\r\n          var categoryStyle = categoriesData.getItemVisual(categoryIdx, 'style');\r\n          var style = data.ensureUniqueItemVisual(idx, 'style');\r\n          extend(style, categoryStyle);\r\n          var visualList = ['symbol', 'symbolSize', 'symbolKeepAspect'];\r\n\r\n          for (var i = 0; i < visualList.length; i++) {\r\n            data.setItemVisual(idx, visualList[i], categoriesData.getItemVisual(categoryIdx, visualList[i]));\r\n          }\r\n        }\r\n      });\r\n    }\r\n  });\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { extend } from 'zrender/lib/core/util.js';\r\n\r\nfunction normalize(a) {\r\n  if (!(a instanceof Array)) {\r\n    a = [a, a];\r\n  }\r\n\r\n  return a;\r\n}\r\n\r\nexport default function graphEdgeVisual(ecModel) {\r\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\r\n    var graph = seriesModel.getGraph();\r\n    var edgeData = seriesModel.getEdgeData();\r\n    var symbolType = normalize(seriesModel.get('edgeSymbol'));\r\n    var symbolSize = normalize(seriesModel.get('edgeSymbolSize')); // const colorQuery = ['lineStyle', 'color'] as const;\r\n    // const opacityQuery = ['lineStyle', 'opacity'] as const;\r\n\r\n    edgeData.setVisual('fromSymbol', symbolType && symbolType[0]);\r\n    edgeData.setVisual('toSymbol', symbolType && symbolType[1]);\r\n    edgeData.setVisual('fromSymbolSize', symbolSize && symbolSize[0]);\r\n    edgeData.setVisual('toSymbolSize', symbolSize && symbolSize[1]);\r\n    edgeData.setVisual('style', seriesModel.getModel('lineStyle').getLineStyle());\r\n    edgeData.each(function (idx) {\r\n      var itemModel = edgeData.getItemModel(idx);\r\n      var edge = graph.getEdgeByIndex(idx);\r\n      var symbolType = normalize(itemModel.getShallow('symbol', true));\r\n      var symbolSize = normalize(itemModel.getShallow('symbolSize', true)); // Edge visual must after node visual\r\n\r\n      var style = itemModel.getModel('lineStyle').getLineStyle();\r\n      var existsStyle = edgeData.ensureUniqueItemVisual(idx, 'style');\r\n      extend(existsStyle, style);\r\n\r\n      switch (existsStyle.stroke) {\r\n        case 'source':\r\n          {\r\n            var nodeStyle = edge.node1.getVisual('style');\r\n            existsStyle.stroke = nodeStyle && nodeStyle.fill;\r\n            break;\r\n          }\r\n\r\n        case 'target':\r\n          {\r\n            var nodeStyle = edge.node2.getVisual('style');\r\n            existsStyle.stroke = nodeStyle && nodeStyle.fill;\r\n            break;\r\n          }\r\n      }\r\n\r\n      symbolType[0] && edge.setVisual('fromSymbol', symbolType[0]);\r\n      symbolType[1] && edge.setVisual('toSymbol', symbolType[1]);\r\n      symbolSize[0] && edge.setVisual('fromSymbolSize', symbolSize[0]);\r\n      symbolSize[1] && edge.setVisual('toSymbolSize', symbolSize[1]);\r\n    });\r\n  });\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n// @ts-nocheck\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nvar KEY_DELIMITER = '-->';\r\n/**\r\n * params handler\r\n * @param {module:echarts/model/SeriesModel} seriesModel\r\n * @returns {*}\r\n */\r\n\r\nvar getAutoCurvenessParams = function (seriesModel) {\r\n  return seriesModel.get('autoCurveness') || null;\r\n};\r\n/**\r\n * Generate a list of edge curvatures, 20 is the default\r\n * @param {module:echarts/model/SeriesModel} seriesModel\r\n * @param {number} appendLength\r\n * @return  20 => [0, -0.2, 0.2, -0.4, 0.4, -0.6, 0.6, -0.8, 0.8, -1, 1, -1.2, 1.2, -1.4, 1.4, -1.6, 1.6, -1.8, 1.8, -2]\r\n */\r\n\r\n\r\nvar createCurveness = function (seriesModel, appendLength) {\r\n  var autoCurvenessParmas = getAutoCurvenessParams(seriesModel);\r\n  var length = 20;\r\n  var curvenessList = []; // handler the function set\r\n\r\n  if (zrUtil.isNumber(autoCurvenessParmas)) {\r\n    length = autoCurvenessParmas;\r\n  } else if (zrUtil.isArray(autoCurvenessParmas)) {\r\n    seriesModel.__curvenessList = autoCurvenessParmas;\r\n    return;\r\n  } // append length\r\n\r\n\r\n  if (appendLength > length) {\r\n    length = appendLength;\r\n  } // make sure the length is even\r\n\r\n\r\n  var len = length % 2 ? length + 2 : length + 3;\r\n  curvenessList = [];\r\n\r\n  for (var i = 0; i < len; i++) {\r\n    curvenessList.push((i % 2 ? i + 1 : i) / 10 * (i % 2 ? -1 : 1));\r\n  }\r\n\r\n  seriesModel.__curvenessList = curvenessList;\r\n};\r\n/**\r\n * Create different cache key data in the positive and negative directions, in order to set the curvature later\r\n * @param {number|string|module:echarts/data/Graph.Node} n1\r\n * @param {number|string|module:echarts/data/Graph.Node} n2\r\n * @param {module:echarts/model/SeriesModel} seriesModel\r\n * @returns {string} key\r\n */\r\n\r\n\r\nvar getKeyOfEdges = function (n1, n2, seriesModel) {\r\n  var source = [n1.id, n1.dataIndex].join('.');\r\n  var target = [n2.id, n2.dataIndex].join('.');\r\n  return [seriesModel.uid, source, target].join(KEY_DELIMITER);\r\n};\r\n/**\r\n * get opposite key\r\n * @param {string} key\r\n * @returns {string}\r\n */\r\n\r\n\r\nvar getOppositeKey = function (key) {\r\n  var keys = key.split(KEY_DELIMITER);\r\n  return [keys[0], keys[2], keys[1]].join(KEY_DELIMITER);\r\n};\r\n/**\r\n * get edgeMap with key\r\n * @param edge\r\n * @param {module:echarts/model/SeriesModel} seriesModel\r\n */\r\n\r\n\r\nvar getEdgeFromMap = function (edge, seriesModel) {\r\n  var key = getKeyOfEdges(edge.node1, edge.node2, seriesModel);\r\n  return seriesModel.__edgeMap[key];\r\n};\r\n/**\r\n * calculate all cases total length\r\n * @param edge\r\n * @param seriesModel\r\n * @returns {number}\r\n */\r\n\r\n\r\nvar getTotalLengthBetweenNodes = function (edge, seriesModel) {\r\n  var len = getEdgeMapLengthWithKey(getKeyOfEdges(edge.node1, edge.node2, seriesModel), seriesModel);\r\n  var lenV = getEdgeMapLengthWithKey(getKeyOfEdges(edge.node2, edge.node1, seriesModel), seriesModel);\r\n  return len + lenV;\r\n};\r\n/**\r\n *\r\n * @param key\r\n */\r\n\r\n\r\nvar getEdgeMapLengthWithKey = function (key, seriesModel) {\r\n  var edgeMap = seriesModel.__edgeMap;\r\n  return edgeMap[key] ? edgeMap[key].length : 0;\r\n};\r\n/**\r\n * Count the number of edges between the same two points, used to obtain the curvature table and the parity of the edge\r\n * @see /graph/GraphSeries.js@getInitialData\r\n * @param {module:echarts/model/SeriesModel} seriesModel\r\n */\r\n\r\n\r\nexport function initCurvenessList(seriesModel) {\r\n  if (!getAutoCurvenessParams(seriesModel)) {\r\n    return;\r\n  }\r\n\r\n  seriesModel.__curvenessList = [];\r\n  seriesModel.__edgeMap = {}; // calc the array of curveness List\r\n\r\n  createCurveness(seriesModel);\r\n}\r\n/**\r\n * set edgeMap with key\r\n * @param {number|string|module:echarts/data/Graph.Node} n1\r\n * @param {number|string|module:echarts/data/Graph.Node} n2\r\n * @param {module:echarts/model/SeriesModel} seriesModel\r\n * @param {number} index\r\n */\r\n\r\nexport function createEdgeMapForCurveness(n1, n2, seriesModel, index) {\r\n  if (!getAutoCurvenessParams(seriesModel)) {\r\n    return;\r\n  }\r\n\r\n  var key = getKeyOfEdges(n1, n2, seriesModel);\r\n  var edgeMap = seriesModel.__edgeMap;\r\n  var oppositeEdges = edgeMap[getOppositeKey(key)]; // set direction\r\n\r\n  if (edgeMap[key] && !oppositeEdges) {\r\n    edgeMap[key].isForward = true;\r\n  } else if (oppositeEdges && edgeMap[key]) {\r\n    oppositeEdges.isForward = true;\r\n    edgeMap[key].isForward = false;\r\n  }\r\n\r\n  edgeMap[key] = edgeMap[key] || [];\r\n  edgeMap[key].push(index);\r\n}\r\n/**\r\n * get curvature for edge\r\n * @param edge\r\n * @param {module:echarts/model/SeriesModel} seriesModel\r\n * @param index\r\n */\r\n\r\nexport function getCurvenessForEdge(edge, seriesModel, index, needReverse) {\r\n  var autoCurvenessParams = getAutoCurvenessParams(seriesModel);\r\n  var isArrayParam = zrUtil.isArray(autoCurvenessParams);\r\n\r\n  if (!autoCurvenessParams) {\r\n    return null;\r\n  }\r\n\r\n  var edgeArray = getEdgeFromMap(edge, seriesModel);\r\n\r\n  if (!edgeArray) {\r\n    return null;\r\n  }\r\n\r\n  var edgeIndex = -1;\r\n\r\n  for (var i = 0; i < edgeArray.length; i++) {\r\n    if (edgeArray[i] === index) {\r\n      edgeIndex = i;\r\n      break;\r\n    }\r\n  } // if totalLen is Longer createCurveness\r\n\r\n\r\n  var totalLen = getTotalLengthBetweenNodes(edge, seriesModel);\r\n  createCurveness(seriesModel, totalLen);\r\n  edge.lineStyle = edge.lineStyle || {}; // if is opposite edge, must set curvenss to opposite number\r\n\r\n  var curKey = getKeyOfEdges(edge.node1, edge.node2, seriesModel);\r\n  var curvenessList = seriesModel.__curvenessList; // if pass array no need parity\r\n\r\n  var parityCorrection = isArrayParam ? 0 : totalLen % 2 ? 0 : 1;\r\n\r\n  if (!edgeArray.isForward) {\r\n    // the opposite edge show outside\r\n    var oppositeKey = getOppositeKey(curKey);\r\n    var len = getEdgeMapLengthWithKey(oppositeKey, seriesModel);\r\n    var resValue = curvenessList[edgeIndex + len + parityCorrection]; // isNeedReverse, simple, force type need reverse the curveness in the junction of the forword and the opposite\r\n\r\n    if (needReverse) {\r\n      // set as array may make the parity handle with the len of opposite\r\n      if (isArrayParam) {\r\n        if (autoCurvenessParams && autoCurvenessParams[0] === 0) {\r\n          return (len + parityCorrection) % 2 ? resValue : -resValue;\r\n        } else {\r\n          return ((len % 2 ? 0 : 1) + parityCorrection) % 2 ? resValue : -resValue;\r\n        }\r\n      } else {\r\n        return (len + parityCorrection) % 2 ? resValue : -resValue;\r\n      }\r\n    } else {\r\n      return curvenessList[edgeIndex + len + parityCorrection];\r\n    }\r\n  } else {\r\n    return curvenessList[parityCorrection + edgeIndex];\r\n  }\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as vec2 from 'zrender/lib/core/vector.js';\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport { getCurvenessForEdge } from '../helper/multipleGraphEdgeHelper.js';\r\nexport function simpleLayout(seriesModel) {\r\n  var coordSys = seriesModel.coordinateSystem;\r\n\r\n  if (coordSys && coordSys.type !== 'view') {\r\n    return;\r\n  }\r\n\r\n  var graph = seriesModel.getGraph();\r\n  graph.eachNode(function (node) {\r\n    var model = node.getModel();\r\n    node.setLayout([+model.get('x'), +model.get('y')]);\r\n  });\r\n  simpleLayoutEdge(graph, seriesModel);\r\n}\r\nexport function simpleLayoutEdge(graph, seriesModel) {\r\n  graph.eachEdge(function (edge, index) {\r\n    var curveness = zrUtil.retrieve3(edge.getModel().get(['lineStyle', 'curveness']), -getCurvenessForEdge(edge, seriesModel, index, true), 0);\r\n    var p1 = vec2.clone(edge.node1.getLayout());\r\n    var p2 = vec2.clone(edge.node2.getLayout());\r\n    var points = [p1, p2];\r\n\r\n    if (+curveness) {\r\n      points.push([(p1[0] + p2[0]) / 2 - (p1[1] - p2[1]) * curveness, (p1[1] + p2[1]) / 2 - (p2[0] - p1[0]) * curveness]);\r\n    }\r\n\r\n    edge.setLayout(points);\r\n  });\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { each } from 'zrender/lib/core/util.js';\r\nimport { simpleLayout, simpleLayoutEdge } from './simpleLayoutHelper.js';\r\nexport default function graphSimpleLayout(ecModel, api) {\r\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\r\n    var layout = seriesModel.get('layout');\r\n    var coordSys = seriesModel.coordinateSystem;\r\n\r\n    if (coordSys && coordSys.type !== 'view') {\r\n      var data_1 = seriesModel.getData();\r\n      var dimensions_1 = [];\r\n      each(coordSys.dimensions, function (coordDim) {\r\n        dimensions_1 = dimensions_1.concat(data_1.mapDimensionsAll(coordDim));\r\n      });\r\n\r\n      for (var dataIndex = 0; dataIndex < data_1.count(); dataIndex++) {\r\n        var value = [];\r\n        var hasValue = false;\r\n\r\n        for (var i = 0; i < dimensions_1.length; i++) {\r\n          var val = data_1.get(dimensions_1[i], dataIndex);\r\n\r\n          if (!isNaN(val)) {\r\n            hasValue = true;\r\n          }\r\n\r\n          value.push(val);\r\n        }\r\n\r\n        if (hasValue) {\r\n          data_1.setItemLayout(dataIndex, coordSys.dataToPoint(value));\r\n        } else {\r\n          // Also {Array.<number>}, not undefined to avoid if...else... statement\r\n          data_1.setItemLayout(dataIndex, [NaN, NaN]);\r\n        }\r\n      }\r\n\r\n      simpleLayoutEdge(data_1.graph, seriesModel);\r\n    } else if (!layout || layout === 'none') {\r\n      simpleLayout(seriesModel);\r\n    }\r\n  });\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nexport function getNodeGlobalScale(seriesModel) {\r\n  var coordSys = seriesModel.coordinateSystem;\r\n\r\n  if (coordSys.type !== 'view') {\r\n    return 1;\r\n  }\r\n\r\n  var nodeScaleRatio = seriesModel.option.nodeScaleRatio;\r\n  var groupZoom = coordSys.scaleX; // Scale node when zoom changes\r\n\r\n  var roamZoom = coordSys.getZoom();\r\n  var nodeScale = (roamZoom - 1) * nodeScaleRatio + 1;\r\n  return nodeScale / groupZoom;\r\n}\r\nexport function getSymbolSize(node) {\r\n  var symbolSize = node.getVisual('symbolSize');\r\n\r\n  if (symbolSize instanceof Array) {\r\n    symbolSize = (symbolSize[0] + symbolSize[1]) / 2;\r\n  }\r\n\r\n  return +symbolSize;\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as vec2 from 'zrender/lib/core/vector.js';\r\nimport { getSymbolSize, getNodeGlobalScale } from './graphHelper.js';\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport { getCurvenessForEdge } from '../helper/multipleGraphEdgeHelper.js';\r\nvar PI = Math.PI;\r\nvar _symbolRadiansHalf = [];\r\n/**\r\n * `basedOn` can be:\r\n * 'value':\r\n *     This layout is not accurate and have same bad case. For example,\r\n *     if the min value is very smaller than the max value, the nodes\r\n *     with the min value probably overlap even though there is enough\r\n *     space to layout them. So we only use this approach in the as the\r\n *     init layout of the force layout.\r\n *     FIXME\r\n *     Probably we do not need this method any more but use\r\n *     `basedOn: 'symbolSize'` in force layout if\r\n *     delay its init operations to GraphView.\r\n * 'symbolSize':\r\n *     This approach work only if all of the symbol size calculated.\r\n *     That is, the progressive rendering is not applied to graph.\r\n *     FIXME\r\n *     If progressive rendering is applied to graph some day,\r\n *     probably we have to use `basedOn: 'value'`.\r\n */\r\n\r\nexport function circularLayout(seriesModel, basedOn, draggingNode, pointer) {\r\n  var coordSys = seriesModel.coordinateSystem;\r\n\r\n  if (coordSys && coordSys.type !== 'view') {\r\n    return;\r\n  }\r\n\r\n  var rect = coordSys.getBoundingRect();\r\n  var nodeData = seriesModel.getData();\r\n  var graph = nodeData.graph;\r\n  var cx = rect.width / 2 + rect.x;\r\n  var cy = rect.height / 2 + rect.y;\r\n  var r = Math.min(rect.width, rect.height) / 2;\r\n  var count = nodeData.count();\r\n  nodeData.setLayout({\r\n    cx: cx,\r\n    cy: cy\r\n  });\r\n\r\n  if (!count) {\r\n    return;\r\n  }\r\n\r\n  if (draggingNode) {\r\n    var _a = coordSys.pointToData(pointer),\r\n        tempX = _a[0],\r\n        tempY = _a[1];\r\n\r\n    var v = [tempX - cx, tempY - cy];\r\n    vec2.normalize(v, v);\r\n    vec2.scale(v, v, r);\r\n    draggingNode.setLayout([cx + v[0], cy + v[1]], true);\r\n    var circularRotateLabel = seriesModel.get(['circular', 'rotateLabel']);\r\n    rotateNodeLabel(draggingNode, circularRotateLabel, cx, cy);\r\n  }\r\n\r\n  _layoutNodesBasedOn[basedOn](seriesModel, graph, nodeData, r, cx, cy, count);\r\n\r\n  graph.eachEdge(function (edge, index) {\r\n    var curveness = zrUtil.retrieve3(edge.getModel().get(['lineStyle', 'curveness']), getCurvenessForEdge(edge, seriesModel, index), 0);\r\n    var p1 = vec2.clone(edge.node1.getLayout());\r\n    var p2 = vec2.clone(edge.node2.getLayout());\r\n    var cp1;\r\n    var x12 = (p1[0] + p2[0]) / 2;\r\n    var y12 = (p1[1] + p2[1]) / 2;\r\n\r\n    if (+curveness) {\r\n      curveness *= 3;\r\n      cp1 = [cx * curveness + x12 * (1 - curveness), cy * curveness + y12 * (1 - curveness)];\r\n    }\r\n\r\n    edge.setLayout([p1, p2, cp1]);\r\n  });\r\n}\r\nvar _layoutNodesBasedOn = {\r\n  value: function (seriesModel, graph, nodeData, r, cx, cy, count) {\r\n    var angle = 0;\r\n    var sum = nodeData.getSum('value');\r\n    var unitAngle = Math.PI * 2 / (sum || count);\r\n    graph.eachNode(function (node) {\r\n      var value = node.getValue('value');\r\n      var radianHalf = unitAngle * (sum ? value : 1) / 2;\r\n      angle += radianHalf;\r\n      node.setLayout([r * Math.cos(angle) + cx, r * Math.sin(angle) + cy]);\r\n      angle += radianHalf;\r\n    });\r\n  },\r\n  symbolSize: function (seriesModel, graph, nodeData, r, cx, cy, count) {\r\n    var sumRadian = 0;\r\n    _symbolRadiansHalf.length = count;\r\n    var nodeScale = getNodeGlobalScale(seriesModel);\r\n    graph.eachNode(function (node) {\r\n      var symbolSize = getSymbolSize(node); // Normally this case will not happen, but we still add\r\n      // some the defensive code (2px is an arbitrary value).\r\n\r\n      isNaN(symbolSize) && (symbolSize = 2);\r\n      symbolSize < 0 && (symbolSize = 0);\r\n      symbolSize *= nodeScale;\r\n      var symbolRadianHalf = Math.asin(symbolSize / 2 / r); // when `symbolSize / 2` is bigger than `r`.\r\n\r\n      isNaN(symbolRadianHalf) && (symbolRadianHalf = PI / 2);\r\n      _symbolRadiansHalf[node.dataIndex] = symbolRadianHalf;\r\n      sumRadian += symbolRadianHalf * 2;\r\n    });\r\n    var halfRemainRadian = (2 * PI - sumRadian) / count / 2;\r\n    var angle = 0;\r\n    graph.eachNode(function (node) {\r\n      var radianHalf = halfRemainRadian + _symbolRadiansHalf[node.dataIndex];\r\n      angle += radianHalf; // init circular layout for\r\n      // 1. layout undefined node\r\n      // 2. not fixed node\r\n\r\n      (!node.getLayout() || !node.getLayout().fixed) && node.setLayout([r * Math.cos(angle) + cx, r * Math.sin(angle) + cy]);\r\n      angle += radianHalf;\r\n    });\r\n  }\r\n};\r\nexport function rotateNodeLabel(node, circularRotateLabel, cx, cy) {\r\n  var el = node.getGraphicEl(); // need to check if el exists. '-' value may not create node element.\r\n\r\n  if (!el) {\r\n    return;\r\n  }\r\n\r\n  var nodeModel = node.getModel();\r\n  var labelRotate = nodeModel.get(['label', 'rotate']) || 0;\r\n  var symbolPath = el.getSymbolPath();\r\n\r\n  if (circularRotateLabel) {\r\n    var pos = node.getLayout();\r\n    var rad = Math.atan2(pos[1] - cy, pos[0] - cx);\r\n\r\n    if (rad < 0) {\r\n      rad = Math.PI * 2 + rad;\r\n    }\r\n\r\n    var isLeft = pos[0] < cx;\r\n\r\n    if (isLeft) {\r\n      rad = rad - Math.PI;\r\n    }\r\n\r\n    var textPosition = isLeft ? 'left' : 'right';\r\n    symbolPath.setTextConfig({\r\n      rotation: -rad,\r\n      position: textPosition,\r\n      origin: 'center'\r\n    });\r\n    var emphasisState = symbolPath.ensureState('emphasis');\r\n    zrUtil.extend(emphasisState.textConfig || (emphasisState.textConfig = {}), {\r\n      position: textPosition\r\n    });\r\n  } else {\r\n    symbolPath.setTextConfig({\r\n      rotation: labelRotate *= Math.PI / 180\r\n    });\r\n  }\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { circularLayout } from './circularLayoutHelper.js';\r\nexport default function graphCircularLayout(ecModel) {\r\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\r\n    if (seriesModel.get('layout') === 'circular') {\r\n      circularLayout(seriesModel, 'symbolSize');\r\n    }\r\n  });\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n/*\r\n* A third-party license is embedded for some of the code in this file:\r\n* Some formulas were originally copied from \"d3.js\" with some\r\n* modifications made for this project.\r\n* (See more details in the comment of the method \"step\" below.)\r\n* The use of the source code of this file is also subject to the terms\r\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\r\n* </licenses/LICENSE-d3>).\r\n*/\r\nimport * as vec2 from 'zrender/lib/core/vector.js';\r\nvar scaleAndAdd = vec2.scaleAndAdd; // function adjacentNode(n, e) {\r\n//     return e.n1 === n ? e.n2 : e.n1;\r\n// }\r\n\r\nexport function forceLayout(inNodes, inEdges, opts) {\r\n  var nodes = inNodes;\r\n  var edges = inEdges;\r\n  var rect = opts.rect;\r\n  var width = rect.width;\r\n  var height = rect.height;\r\n  var center = [rect.x + width / 2, rect.y + height / 2]; // let scale = opts.scale || 1;\r\n\r\n  var gravity = opts.gravity == null ? 0.1 : opts.gravity; // for (let i = 0; i < edges.length; i++) {\r\n  //     let e = edges[i];\r\n  //     let n1 = e.n1;\r\n  //     let n2 = e.n2;\r\n  //     n1.edges = n1.edges || [];\r\n  //     n2.edges = n2.edges || [];\r\n  //     n1.edges.push(e);\r\n  //     n2.edges.push(e);\r\n  // }\r\n  // Init position\r\n\r\n  for (var i = 0; i < nodes.length; i++) {\r\n    var n = nodes[i];\r\n\r\n    if (!n.p) {\r\n      n.p = vec2.create(width * (Math.random() - 0.5) + center[0], height * (Math.random() - 0.5) + center[1]);\r\n    }\r\n\r\n    n.pp = vec2.clone(n.p);\r\n    n.edges = null;\r\n  } // Formula in 'Graph Drawing by Force-directed Placement'\r\n  // let k = scale * Math.sqrt(width * height / nodes.length);\r\n  // let k2 = k * k;\r\n\r\n\r\n  var initialFriction = opts.friction == null ? 0.6 : opts.friction;\r\n  var friction = initialFriction;\r\n  var beforeStepCallback;\r\n  var afterStepCallback;\r\n  return {\r\n    warmUp: function () {\r\n      friction = initialFriction * 0.8;\r\n    },\r\n    setFixed: function (idx) {\r\n      nodes[idx].fixed = true;\r\n    },\r\n    setUnfixed: function (idx) {\r\n      nodes[idx].fixed = false;\r\n    },\r\n\r\n    /**\r\n     * Before step hook\r\n     */\r\n    beforeStep: function (cb) {\r\n      beforeStepCallback = cb;\r\n    },\r\n\r\n    /**\r\n     * After step hook\r\n     */\r\n    afterStep: function (cb) {\r\n      afterStepCallback = cb;\r\n    },\r\n\r\n    /**\r\n     * Some formulas were originally copied from \"d3.js\"\r\n     * https://github.com/d3/d3/blob/b516d77fb8566b576088e73410437494717ada26/src/layout/force.js\r\n     * with some modifications made for this project.\r\n     * See the license statement at the head of this file.\r\n     */\r\n    step: function (cb) {\r\n      beforeStepCallback && beforeStepCallback(nodes, edges);\r\n      var v12 = [];\r\n      var nLen = nodes.length;\r\n\r\n      for (var i = 0; i < edges.length; i++) {\r\n        var e = edges[i];\r\n\r\n        if (e.ignoreForceLayout) {\r\n          continue;\r\n        }\r\n\r\n        var n1 = e.n1;\r\n        var n2 = e.n2;\r\n        vec2.sub(v12, n2.p, n1.p);\r\n        var d = vec2.len(v12) - e.d;\r\n        var w = n2.w / (n1.w + n2.w);\r\n\r\n        if (isNaN(w)) {\r\n          w = 0;\r\n        }\r\n\r\n        vec2.normalize(v12, v12);\r\n        !n1.fixed && scaleAndAdd(n1.p, n1.p, v12, w * d * friction);\r\n        !n2.fixed && scaleAndAdd(n2.p, n2.p, v12, -(1 - w) * d * friction);\r\n      } // Gravity\r\n\r\n\r\n      for (var i = 0; i < nLen; i++) {\r\n        var n = nodes[i];\r\n\r\n        if (!n.fixed) {\r\n          vec2.sub(v12, center, n.p); // let d = vec2.len(v12);\r\n          // vec2.scale(v12, v12, 1 / d);\r\n          // let gravityFactor = gravity;\r\n\r\n          scaleAndAdd(n.p, n.p, v12, gravity * friction);\r\n        }\r\n      } // Repulsive\r\n      // PENDING\r\n\r\n\r\n      for (var i = 0; i < nLen; i++) {\r\n        var n1 = nodes[i];\r\n\r\n        for (var j = i + 1; j < nLen; j++) {\r\n          var n2 = nodes[j];\r\n          vec2.sub(v12, n2.p, n1.p);\r\n          var d = vec2.len(v12);\r\n\r\n          if (d === 0) {\r\n            // Random repulse\r\n            vec2.set(v12, Math.random() - 0.5, Math.random() - 0.5);\r\n            d = 1;\r\n          }\r\n\r\n          var repFact = (n1.rep + n2.rep) / d / d;\r\n          !n1.fixed && scaleAndAdd(n1.pp, n1.pp, v12, repFact);\r\n          !n2.fixed && scaleAndAdd(n2.pp, n2.pp, v12, -repFact);\r\n        }\r\n      }\r\n\r\n      var v = [];\r\n\r\n      for (var i = 0; i < nLen; i++) {\r\n        var n = nodes[i];\r\n\r\n        if (!n.fixed) {\r\n          vec2.sub(v, n.p, n.pp);\r\n          scaleAndAdd(n.p, n.p, v, friction);\r\n          vec2.copy(n.pp, n.p);\r\n        }\r\n      }\r\n\r\n      friction = friction * 0.992;\r\n      var finished = friction < 0.01;\r\n      afterStepCallback && afterStepCallback(nodes, edges, finished);\r\n      cb && cb(finished);\r\n    }\r\n  };\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { forceLayout } from './forceHelper.js';\r\nimport { simpleLayout } from './simpleLayoutHelper.js';\r\nimport { circularLayout } from './circularLayoutHelper.js';\r\nimport { linearMap } from '../../util/number.js';\r\nimport * as vec2 from 'zrender/lib/core/vector.js';\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport { getCurvenessForEdge } from '../helper/multipleGraphEdgeHelper.js';\r\nexport default function graphForceLayout(ecModel) {\r\n  ecModel.eachSeriesByType('graph', function (graphSeries) {\r\n    var coordSys = graphSeries.coordinateSystem;\r\n\r\n    if (coordSys && coordSys.type !== 'view') {\r\n      return;\r\n    }\r\n\r\n    if (graphSeries.get('layout') === 'force') {\r\n      var preservedPoints_1 = graphSeries.preservedPoints || {};\r\n      var graph_1 = graphSeries.getGraph();\r\n      var nodeData_1 = graph_1.data;\r\n      var edgeData = graph_1.edgeData;\r\n      var forceModel = graphSeries.getModel('force');\r\n      var initLayout = forceModel.get('initLayout');\r\n\r\n      if (graphSeries.preservedPoints) {\r\n        nodeData_1.each(function (idx) {\r\n          var id = nodeData_1.getId(idx);\r\n          nodeData_1.setItemLayout(idx, preservedPoints_1[id] || [NaN, NaN]);\r\n        });\r\n      } else if (!initLayout || initLayout === 'none') {\r\n        simpleLayout(graphSeries);\r\n      } else if (initLayout === 'circular') {\r\n        circularLayout(graphSeries, 'value');\r\n      }\r\n\r\n      var nodeDataExtent_1 = nodeData_1.getDataExtent('value');\r\n      var edgeDataExtent_1 = edgeData.getDataExtent('value'); // let edgeDataExtent = edgeData.getDataExtent('value');\r\n\r\n      var repulsion = forceModel.get('repulsion');\r\n      var edgeLength = forceModel.get('edgeLength');\r\n      var repulsionArr_1 = zrUtil.isArray(repulsion) ? repulsion : [repulsion, repulsion];\r\n      var edgeLengthArr_1 = zrUtil.isArray(edgeLength) ? edgeLength : [edgeLength, edgeLength]; // Larger value has smaller length\r\n\r\n      edgeLengthArr_1 = [edgeLengthArr_1[1], edgeLengthArr_1[0]];\r\n      var nodes_1 = nodeData_1.mapArray('value', function (value, idx) {\r\n        var point = nodeData_1.getItemLayout(idx);\r\n        var rep = linearMap(value, nodeDataExtent_1, repulsionArr_1);\r\n\r\n        if (isNaN(rep)) {\r\n          rep = (repulsionArr_1[0] + repulsionArr_1[1]) / 2;\r\n        }\r\n\r\n        return {\r\n          w: rep,\r\n          rep: rep,\r\n          fixed: nodeData_1.getItemModel(idx).get('fixed'),\r\n          p: !point || isNaN(point[0]) || isNaN(point[1]) ? null : point\r\n        };\r\n      });\r\n      var edges = edgeData.mapArray('value', function (value, idx) {\r\n        var edge = graph_1.getEdgeByIndex(idx);\r\n        var d = linearMap(value, edgeDataExtent_1, edgeLengthArr_1);\r\n\r\n        if (isNaN(d)) {\r\n          d = (edgeLengthArr_1[0] + edgeLengthArr_1[1]) / 2;\r\n        }\r\n\r\n        var edgeModel = edge.getModel();\r\n        var curveness = zrUtil.retrieve3(edge.getModel().get(['lineStyle', 'curveness']), -getCurvenessForEdge(edge, graphSeries, idx, true), 0);\r\n        return {\r\n          n1: nodes_1[edge.node1.dataIndex],\r\n          n2: nodes_1[edge.node2.dataIndex],\r\n          d: d,\r\n          curveness: curveness,\r\n          ignoreForceLayout: edgeModel.get('ignoreForceLayout')\r\n        };\r\n      }); // let coordSys = graphSeries.coordinateSystem;\r\n\r\n      var rect = coordSys.getBoundingRect();\r\n      var forceInstance = forceLayout(nodes_1, edges, {\r\n        rect: rect,\r\n        gravity: forceModel.get('gravity'),\r\n        friction: forceModel.get('friction')\r\n      });\r\n      forceInstance.beforeStep(function (nodes, edges) {\r\n        for (var i = 0, l = nodes.length; i < l; i++) {\r\n          if (nodes[i].fixed) {\r\n            // Write back to layout instance\r\n            vec2.copy(nodes[i].p, graph_1.getNodeByIndex(i).getLayout());\r\n          }\r\n        }\r\n      });\r\n      forceInstance.afterStep(function (nodes, edges, stopped) {\r\n        for (var i = 0, l = nodes.length; i < l; i++) {\r\n          if (!nodes[i].fixed) {\r\n            graph_1.getNodeByIndex(i).setLayout(nodes[i].p);\r\n          }\r\n\r\n          preservedPoints_1[nodeData_1.getId(i)] = nodes[i].p;\r\n        }\r\n\r\n        for (var i = 0, l = edges.length; i < l; i++) {\r\n          var e = edges[i];\r\n          var edge = graph_1.getEdgeByIndex(i);\r\n          var p1 = e.n1.p;\r\n          var p2 = e.n2.p;\r\n          var points = edge.getLayout();\r\n          points = points ? points.slice() : [];\r\n          points[0] = points[0] || [];\r\n          points[1] = points[1] || [];\r\n          vec2.copy(points[0], p1);\r\n          vec2.copy(points[1], p2);\r\n\r\n          if (+e.curveness) {\r\n            points[2] = [(p1[0] + p2[0]) / 2 - (p1[1] - p2[1]) * e.curveness, (p1[1] + p2[1]) / 2 - (p2[0] - p1[0]) * e.curveness];\r\n          }\r\n\r\n          edge.setLayout(points);\r\n        }\r\n      });\r\n      graphSeries.forceLayout = forceInstance;\r\n      graphSeries.preservedPoints = preservedPoints_1; // Step to get the layout\r\n\r\n      forceInstance.step();\r\n    } else {\r\n      // Remove prev injected forceLayout instance\r\n      graphSeries.forceLayout = null;\r\n    }\r\n  });\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n// FIXME Where to create the simple view coordinate system\r\nimport View from '../../coord/View.js';\r\nimport { getLayoutRect } from '../../util/layout.js';\r\nimport * as bbox from 'zrender/lib/core/bbox.js';\r\nimport { extend } from 'zrender/lib/core/util.js';\r\n\r\nfunction getViewRect(seriesModel, api, aspect) {\r\n  var option = extend(seriesModel.getBoxLayoutParams(), {\r\n    aspect: aspect\r\n  });\r\n  return getLayoutRect(option, {\r\n    width: api.getWidth(),\r\n    height: api.getHeight()\r\n  });\r\n}\r\n\r\nexport default function createViewCoordSys(ecModel, api) {\r\n  var viewList = [];\r\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\r\n    var coordSysType = seriesModel.get('coordinateSystem');\r\n\r\n    if (!coordSysType || coordSysType === 'view') {\r\n      var data_1 = seriesModel.getData();\r\n      var positions = data_1.mapArray(function (idx) {\r\n        var itemModel = data_1.getItemModel(idx);\r\n        return [+itemModel.get('x'), +itemModel.get('y')];\r\n      });\r\n      var min = [];\r\n      var max = [];\r\n      bbox.fromPoints(positions, min, max); // If width or height is 0\r\n\r\n      if (max[0] - min[0] === 0) {\r\n        max[0] += 1;\r\n        min[0] -= 1;\r\n      }\r\n\r\n      if (max[1] - min[1] === 0) {\r\n        max[1] += 1;\r\n        min[1] -= 1;\r\n      }\r\n\r\n      var aspect = (max[0] - min[0]) / (max[1] - min[1]); // FIXME If get view rect after data processed?\r\n\r\n      var viewRect = getViewRect(seriesModel, api, aspect); // Position may be NaN, use view rect instead\r\n\r\n      if (isNaN(aspect)) {\r\n        min = [viewRect.x, viewRect.y];\r\n        max = [viewRect.x + viewRect.width, viewRect.y + viewRect.height];\r\n      }\r\n\r\n      var bbWidth = max[0] - min[0];\r\n      var bbHeight = max[1] - min[1];\r\n      var viewWidth = viewRect.width;\r\n      var viewHeight = viewRect.height;\r\n      var viewCoordSys = seriesModel.coordinateSystem = new View();\r\n      viewCoordSys.zoomLimit = seriesModel.get('scaleLimit');\r\n      viewCoordSys.setBoundingRect(min[0], min[1], bbWidth, bbHeight);\r\n      viewCoordSys.setViewRect(viewRect.x, viewRect.y, viewWidth, viewHeight); // Update roam info\r\n\r\n      viewCoordSys.setCenter(seriesModel.get('center'), api);\r\n      viewCoordSys.setZoom(seriesModel.get('zoom'));\r\n      viewList.push(viewCoordSys);\r\n    }\r\n  });\r\n  return viewList;\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as curveTool from 'zrender/lib/core/curve.js';\r\nimport * as vec2 from 'zrender/lib/core/vector.js';\r\nimport { getSymbolSize } from './graphHelper.js';\r\nvar v1 = [];\r\nvar v2 = [];\r\nvar v3 = [];\r\nvar quadraticAt = curveTool.quadraticAt;\r\nvar v2DistSquare = vec2.distSquare;\r\nvar mathAbs = Math.abs;\r\n\r\nfunction intersectCurveCircle(curvePoints, center, radius) {\r\n  var p0 = curvePoints[0];\r\n  var p1 = curvePoints[1];\r\n  var p2 = curvePoints[2];\r\n  var d = Infinity;\r\n  var t;\r\n  var radiusSquare = radius * radius;\r\n  var interval = 0.1;\r\n\r\n  for (var _t = 0.1; _t <= 0.9; _t += 0.1) {\r\n    v1[0] = quadraticAt(p0[0], p1[0], p2[0], _t);\r\n    v1[1] = quadraticAt(p0[1], p1[1], p2[1], _t);\r\n    var diff = mathAbs(v2DistSquare(v1, center) - radiusSquare);\r\n\r\n    if (diff < d) {\r\n      d = diff;\r\n      t = _t;\r\n    }\r\n  } // Assume the segment is monotone\uFF0CFind root through Bisection method\r\n  // At most 32 iteration\r\n\r\n\r\n  for (var i = 0; i < 32; i++) {\r\n    // let prev = t - interval;\r\n    var next = t + interval; // v1[0] = quadraticAt(p0[0], p1[0], p2[0], prev);\r\n    // v1[1] = quadraticAt(p0[1], p1[1], p2[1], prev);\r\n\r\n    v2[0] = quadraticAt(p0[0], p1[0], p2[0], t);\r\n    v2[1] = quadraticAt(p0[1], p1[1], p2[1], t);\r\n    v3[0] = quadraticAt(p0[0], p1[0], p2[0], next);\r\n    v3[1] = quadraticAt(p0[1], p1[1], p2[1], next);\r\n    var diff = v2DistSquare(v2, center) - radiusSquare;\r\n\r\n    if (mathAbs(diff) < 1e-2) {\r\n      break;\r\n    } // let prevDiff = v2DistSquare(v1, center) - radiusSquare;\r\n\r\n\r\n    var nextDiff = v2DistSquare(v3, center) - radiusSquare;\r\n    interval /= 2;\r\n\r\n    if (diff < 0) {\r\n      if (nextDiff >= 0) {\r\n        t = t + interval;\r\n      } else {\r\n        t = t - interval;\r\n      }\r\n    } else {\r\n      if (nextDiff >= 0) {\r\n        t = t - interval;\r\n      } else {\r\n        t = t + interval;\r\n      }\r\n    }\r\n  }\r\n\r\n  return t;\r\n} // Adjust edge to avoid\r\n\r\n\r\nexport default function adjustEdge(graph, scale) {\r\n  var tmp0 = [];\r\n  var quadraticSubdivide = curveTool.quadraticSubdivide;\r\n  var pts = [[], [], []];\r\n  var pts2 = [[], []];\r\n  var v = [];\r\n  scale /= 2;\r\n  graph.eachEdge(function (edge, idx) {\r\n    var linePoints = edge.getLayout();\r\n    var fromSymbol = edge.getVisual('fromSymbol');\r\n    var toSymbol = edge.getVisual('toSymbol');\r\n\r\n    if (!linePoints.__original) {\r\n      linePoints.__original = [vec2.clone(linePoints[0]), vec2.clone(linePoints[1])];\r\n\r\n      if (linePoints[2]) {\r\n        linePoints.__original.push(vec2.clone(linePoints[2]));\r\n      }\r\n    }\r\n\r\n    var originalPoints = linePoints.__original; // Quadratic curve\r\n\r\n    if (linePoints[2] != null) {\r\n      vec2.copy(pts[0], originalPoints[0]);\r\n      vec2.copy(pts[1], originalPoints[2]);\r\n      vec2.copy(pts[2], originalPoints[1]);\r\n\r\n      if (fromSymbol && fromSymbol !== 'none') {\r\n        var symbolSize = getSymbolSize(edge.node1);\r\n        var t = intersectCurveCircle(pts, originalPoints[0], symbolSize * scale); // Subdivide and get the second\r\n\r\n        quadraticSubdivide(pts[0][0], pts[1][0], pts[2][0], t, tmp0);\r\n        pts[0][0] = tmp0[3];\r\n        pts[1][0] = tmp0[4];\r\n        quadraticSubdivide(pts[0][1], pts[1][1], pts[2][1], t, tmp0);\r\n        pts[0][1] = tmp0[3];\r\n        pts[1][1] = tmp0[4];\r\n      }\r\n\r\n      if (toSymbol && toSymbol !== 'none') {\r\n        var symbolSize = getSymbolSize(edge.node2);\r\n        var t = intersectCurveCircle(pts, originalPoints[1], symbolSize * scale); // Subdivide and get the first\r\n\r\n        quadraticSubdivide(pts[0][0], pts[1][0], pts[2][0], t, tmp0);\r\n        pts[1][0] = tmp0[1];\r\n        pts[2][0] = tmp0[2];\r\n        quadraticSubdivide(pts[0][1], pts[1][1], pts[2][1], t, tmp0);\r\n        pts[1][1] = tmp0[1];\r\n        pts[2][1] = tmp0[2];\r\n      } // Copy back to layout\r\n\r\n\r\n      vec2.copy(linePoints[0], pts[0]);\r\n      vec2.copy(linePoints[1], pts[2]);\r\n      vec2.copy(linePoints[2], pts[1]);\r\n    } // Line\r\n    else {\r\n        vec2.copy(pts2[0], originalPoints[0]);\r\n        vec2.copy(pts2[1], originalPoints[1]);\r\n        vec2.sub(v, pts2[1], pts2[0]);\r\n        vec2.normalize(v, v);\r\n\r\n        if (fromSymbol && fromSymbol !== 'none') {\r\n          var symbolSize = getSymbolSize(edge.node1);\r\n          vec2.scaleAndAdd(pts2[0], pts2[0], v, symbolSize * scale);\r\n        }\r\n\r\n        if (toSymbol && toSymbol !== 'none') {\r\n          var symbolSize = getSymbolSize(edge.node2);\r\n          vec2.scaleAndAdd(pts2[1], pts2[1], v, -symbolSize * scale);\r\n        }\r\n\r\n        vec2.copy(linePoints[0], pts2[0]);\r\n        vec2.copy(linePoints[1], pts2[1]);\r\n      }\r\n  });\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport SymbolDraw from '../helper/SymbolDraw.js';\r\nimport LineDraw from '../helper/LineDraw.js';\r\nimport RoamController from '../../component/helper/RoamController.js';\r\nimport * as roamHelper from '../../component/helper/roamHelper.js';\r\nimport { onIrrelevantElement } from '../../component/helper/cursorHelper.js';\r\nimport * as graphic from '../../util/graphic.js';\r\nimport adjustEdge from './adjustEdge.js';\r\nimport { getNodeGlobalScale } from './graphHelper.js';\r\nimport ChartView from '../../view/Chart.js';\r\nimport { getECData } from '../../util/innerStore.js';\r\nimport { simpleLayoutEdge } from './simpleLayoutHelper.js';\r\nimport { circularLayout, rotateNodeLabel } from './circularLayoutHelper.js';\r\n\r\nfunction isViewCoordSys(coordSys) {\r\n  return coordSys.type === 'view';\r\n}\r\n\r\nvar GraphView =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(GraphView, _super);\r\n\r\n  function GraphView() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = GraphView.type;\r\n    return _this;\r\n  }\r\n\r\n  GraphView.prototype.init = function (ecModel, api) {\r\n    var symbolDraw = new SymbolDraw();\r\n    var lineDraw = new LineDraw();\r\n    var group = this.group;\r\n    this._controller = new RoamController(api.getZr());\r\n    this._controllerHost = {\r\n      target: group\r\n    };\r\n    group.add(symbolDraw.group);\r\n    group.add(lineDraw.group);\r\n    this._symbolDraw = symbolDraw;\r\n    this._lineDraw = lineDraw;\r\n    this._firstRender = true;\r\n  };\r\n\r\n  GraphView.prototype.render = function (seriesModel, ecModel, api) {\r\n    var _this = this;\r\n\r\n    var coordSys = seriesModel.coordinateSystem;\r\n    this._model = seriesModel;\r\n    var symbolDraw = this._symbolDraw;\r\n    var lineDraw = this._lineDraw;\r\n    var group = this.group;\r\n\r\n    if (isViewCoordSys(coordSys)) {\r\n      var groupNewProp = {\r\n        x: coordSys.x,\r\n        y: coordSys.y,\r\n        scaleX: coordSys.scaleX,\r\n        scaleY: coordSys.scaleY\r\n      };\r\n\r\n      if (this._firstRender) {\r\n        group.attr(groupNewProp);\r\n      } else {\r\n        graphic.updateProps(group, groupNewProp, seriesModel);\r\n      }\r\n    } // Fix edge contact point with node\r\n\r\n\r\n    adjustEdge(seriesModel.getGraph(), getNodeGlobalScale(seriesModel));\r\n    var data = seriesModel.getData();\r\n    symbolDraw.updateData(data);\r\n    var edgeData = seriesModel.getEdgeData(); // TODO: TYPE\r\n\r\n    lineDraw.updateData(edgeData);\r\n\r\n    this._updateNodeAndLinkScale();\r\n\r\n    this._updateController(seriesModel, ecModel, api);\r\n\r\n    clearTimeout(this._layoutTimeout);\r\n    var forceLayout = seriesModel.forceLayout;\r\n    var layoutAnimation = seriesModel.get(['force', 'layoutAnimation']);\r\n\r\n    if (forceLayout) {\r\n      this._startForceLayoutIteration(forceLayout, layoutAnimation);\r\n    }\r\n\r\n    var layout = seriesModel.get('layout');\r\n    data.graph.eachNode(function (node) {\r\n      var idx = node.dataIndex;\r\n      var el = node.getGraphicEl();\r\n      var itemModel = node.getModel();\r\n\r\n      if (!el) {\r\n        return;\r\n      } // Update draggable\r\n\r\n\r\n      el.off('drag').off('dragend');\r\n      var draggable = itemModel.get('draggable');\r\n\r\n      if (draggable) {\r\n        el.on('drag', function (e) {\r\n          switch (layout) {\r\n            case 'force':\r\n              forceLayout.warmUp();\r\n              !_this._layouting && _this._startForceLayoutIteration(forceLayout, layoutAnimation);\r\n              forceLayout.setFixed(idx); // Write position back to layout\r\n\r\n              data.setItemLayout(idx, [el.x, el.y]);\r\n              break;\r\n\r\n            case 'circular':\r\n              data.setItemLayout(idx, [el.x, el.y]); // mark node fixed\r\n\r\n              node.setLayout({\r\n                fixed: true\r\n              }, true); // recalculate circular layout\r\n\r\n              circularLayout(seriesModel, 'symbolSize', node, [e.offsetX, e.offsetY]);\r\n\r\n              _this.updateLayout(seriesModel);\r\n\r\n              break;\r\n\r\n            case 'none':\r\n            default:\r\n              data.setItemLayout(idx, [el.x, el.y]); // update edge\r\n\r\n              simpleLayoutEdge(seriesModel.getGraph(), seriesModel);\r\n\r\n              _this.updateLayout(seriesModel);\r\n\r\n              break;\r\n          }\r\n        }).on('dragend', function () {\r\n          if (forceLayout) {\r\n            forceLayout.setUnfixed(idx);\r\n          }\r\n        });\r\n      }\r\n\r\n      el.setDraggable(draggable, !!itemModel.get('cursor'));\r\n      var focus = itemModel.get(['emphasis', 'focus']);\r\n\r\n      if (focus === 'adjacency') {\r\n        getECData(el).focus = node.getAdjacentDataIndices();\r\n      }\r\n    });\r\n    data.graph.eachEdge(function (edge) {\r\n      var el = edge.getGraphicEl();\r\n      var focus = edge.getModel().get(['emphasis', 'focus']);\r\n\r\n      if (!el) {\r\n        return;\r\n      }\r\n\r\n      if (focus === 'adjacency') {\r\n        getECData(el).focus = {\r\n          edge: [edge.dataIndex],\r\n          node: [edge.node1.dataIndex, edge.node2.dataIndex]\r\n        };\r\n      }\r\n    });\r\n    var circularRotateLabel = seriesModel.get('layout') === 'circular' && seriesModel.get(['circular', 'rotateLabel']);\r\n    var cx = data.getLayout('cx');\r\n    var cy = data.getLayout('cy');\r\n    data.graph.eachNode(function (node) {\r\n      rotateNodeLabel(node, circularRotateLabel, cx, cy);\r\n    });\r\n    this._firstRender = false;\r\n  };\r\n\r\n  GraphView.prototype.dispose = function () {\r\n    this._controller && this._controller.dispose();\r\n    this._controllerHost = null;\r\n  };\r\n\r\n  GraphView.prototype._startForceLayoutIteration = function (forceLayout, layoutAnimation) {\r\n    var self = this;\r\n\r\n    (function step() {\r\n      forceLayout.step(function (stopped) {\r\n        self.updateLayout(self._model);\r\n        (self._layouting = !stopped) && (layoutAnimation ? self._layoutTimeout = setTimeout(step, 16) : step());\r\n      });\r\n    })();\r\n  };\r\n\r\n  GraphView.prototype._updateController = function (seriesModel, ecModel, api) {\r\n    var _this = this;\r\n\r\n    var controller = this._controller;\r\n    var controllerHost = this._controllerHost;\r\n    var group = this.group;\r\n    controller.setPointerChecker(function (e, x, y) {\r\n      var rect = group.getBoundingRect();\r\n      rect.applyTransform(group.transform);\r\n      return rect.contain(x, y) && !onIrrelevantElement(e, api, seriesModel);\r\n    });\r\n\r\n    if (!isViewCoordSys(seriesModel.coordinateSystem)) {\r\n      controller.disable();\r\n      return;\r\n    }\r\n\r\n    controller.enable(seriesModel.get('roam'));\r\n    controllerHost.zoomLimit = seriesModel.get('scaleLimit');\r\n    controllerHost.zoom = seriesModel.coordinateSystem.getZoom();\r\n    controller.off('pan').off('zoom').on('pan', function (e) {\r\n      roamHelper.updateViewOnPan(controllerHost, e.dx, e.dy);\r\n      api.dispatchAction({\r\n        seriesId: seriesModel.id,\r\n        type: 'graphRoam',\r\n        dx: e.dx,\r\n        dy: e.dy\r\n      });\r\n    }).on('zoom', function (e) {\r\n      roamHelper.updateViewOnZoom(controllerHost, e.scale, e.originX, e.originY);\r\n      api.dispatchAction({\r\n        seriesId: seriesModel.id,\r\n        type: 'graphRoam',\r\n        zoom: e.scale,\r\n        originX: e.originX,\r\n        originY: e.originY\r\n      });\r\n\r\n      _this._updateNodeAndLinkScale();\r\n\r\n      adjustEdge(seriesModel.getGraph(), getNodeGlobalScale(seriesModel));\r\n\r\n      _this._lineDraw.updateLayout(); // Only update label layout on zoom\r\n\r\n\r\n      api.updateLabelLayout();\r\n    });\r\n  };\r\n\r\n  GraphView.prototype._updateNodeAndLinkScale = function () {\r\n    var seriesModel = this._model;\r\n    var data = seriesModel.getData();\r\n    var nodeScale = getNodeGlobalScale(seriesModel);\r\n    data.eachItemGraphicEl(function (el, idx) {\r\n      el && el.setSymbolScale(nodeScale);\r\n    });\r\n  };\r\n\r\n  GraphView.prototype.updateLayout = function (seriesModel) {\r\n    adjustEdge(seriesModel.getGraph(), getNodeGlobalScale(seriesModel));\r\n\r\n    this._symbolDraw.updateLayout();\r\n\r\n    this._lineDraw.updateLayout();\r\n  };\r\n\r\n  GraphView.prototype.remove = function (ecModel, api) {\r\n    this._symbolDraw && this._symbolDraw.remove();\r\n    this._lineDraw && this._lineDraw.remove();\r\n  };\r\n\r\n  GraphView.type = 'graph';\r\n  return GraphView;\r\n}(ChartView);\r\n\r\nexport default GraphView;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as zrUtil from 'zrender/lib/core/util.js'; // id may be function name of Object, add a prefix to avoid this problem.\r\n\r\nfunction generateNodeKey(id) {\r\n  return '_EC_' + id;\r\n}\r\n\r\nvar Graph =\r\n/** @class */\r\nfunction () {\r\n  function Graph(directed) {\r\n    this.type = 'graph';\r\n    this.nodes = [];\r\n    this.edges = [];\r\n    this._nodesMap = {};\r\n    /**\r\n     * @type {Object.<string, module:echarts/data/Graph.Edge>}\r\n     * @private\r\n     */\r\n\r\n    this._edgesMap = {};\r\n    this._directed = directed || false;\r\n  }\r\n  /**\r\n   * If is directed graph\r\n   */\r\n\r\n\r\n  Graph.prototype.isDirected = function () {\r\n    return this._directed;\r\n  };\r\n\r\n  ;\r\n  /**\r\n   * Add a new node\r\n   */\r\n\r\n  Graph.prototype.addNode = function (id, dataIndex) {\r\n    id = id == null ? '' + dataIndex : '' + id;\r\n    var nodesMap = this._nodesMap;\r\n\r\n    if (nodesMap[generateNodeKey(id)]) {\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        console.error('Graph nodes have duplicate name or id');\r\n      }\r\n\r\n      return;\r\n    }\r\n\r\n    var node = new GraphNode(id, dataIndex);\r\n    node.hostGraph = this;\r\n    this.nodes.push(node);\r\n    nodesMap[generateNodeKey(id)] = node;\r\n    return node;\r\n  };\r\n\r\n  ;\r\n  /**\r\n   * Get node by data index\r\n   */\r\n\r\n  Graph.prototype.getNodeByIndex = function (dataIndex) {\r\n    var rawIdx = this.data.getRawIndex(dataIndex);\r\n    return this.nodes[rawIdx];\r\n  };\r\n\r\n  ;\r\n  /**\r\n   * Get node by id\r\n   */\r\n\r\n  Graph.prototype.getNodeById = function (id) {\r\n    return this._nodesMap[generateNodeKey(id)];\r\n  };\r\n\r\n  ;\r\n  /**\r\n   * Add a new edge\r\n   */\r\n\r\n  Graph.prototype.addEdge = function (n1, n2, dataIndex) {\r\n    var nodesMap = this._nodesMap;\r\n    var edgesMap = this._edgesMap; // PENDING\r\n\r\n    if (zrUtil.isNumber(n1)) {\r\n      n1 = this.nodes[n1];\r\n    }\r\n\r\n    if (zrUtil.isNumber(n2)) {\r\n      n2 = this.nodes[n2];\r\n    }\r\n\r\n    if (!(n1 instanceof GraphNode)) {\r\n      n1 = nodesMap[generateNodeKey(n1)];\r\n    }\r\n\r\n    if (!(n2 instanceof GraphNode)) {\r\n      n2 = nodesMap[generateNodeKey(n2)];\r\n    }\r\n\r\n    if (!n1 || !n2) {\r\n      return;\r\n    }\r\n\r\n    var key = n1.id + '-' + n2.id;\r\n    var edge = new GraphEdge(n1, n2, dataIndex);\r\n    edge.hostGraph = this;\r\n\r\n    if (this._directed) {\r\n      n1.outEdges.push(edge);\r\n      n2.inEdges.push(edge);\r\n    }\r\n\r\n    n1.edges.push(edge);\r\n\r\n    if (n1 !== n2) {\r\n      n2.edges.push(edge);\r\n    }\r\n\r\n    this.edges.push(edge);\r\n    edgesMap[key] = edge;\r\n    return edge;\r\n  };\r\n\r\n  ;\r\n  /**\r\n   * Get edge by data index\r\n   */\r\n\r\n  Graph.prototype.getEdgeByIndex = function (dataIndex) {\r\n    var rawIdx = this.edgeData.getRawIndex(dataIndex);\r\n    return this.edges[rawIdx];\r\n  };\r\n\r\n  ;\r\n  /**\r\n   * Get edge by two linked nodes\r\n   */\r\n\r\n  Graph.prototype.getEdge = function (n1, n2) {\r\n    if (n1 instanceof GraphNode) {\r\n      n1 = n1.id;\r\n    }\r\n\r\n    if (n2 instanceof GraphNode) {\r\n      n2 = n2.id;\r\n    }\r\n\r\n    var edgesMap = this._edgesMap;\r\n\r\n    if (this._directed) {\r\n      return edgesMap[n1 + '-' + n2];\r\n    } else {\r\n      return edgesMap[n1 + '-' + n2] || edgesMap[n2 + '-' + n1];\r\n    }\r\n  };\r\n\r\n  ;\r\n  /**\r\n   * Iterate all nodes\r\n   */\r\n\r\n  Graph.prototype.eachNode = function (cb, context) {\r\n    var nodes = this.nodes;\r\n    var len = nodes.length;\r\n\r\n    for (var i = 0; i < len; i++) {\r\n      if (nodes[i].dataIndex >= 0) {\r\n        cb.call(context, nodes[i], i);\r\n      }\r\n    }\r\n  };\r\n\r\n  ;\r\n  /**\r\n   * Iterate all edges\r\n   */\r\n\r\n  Graph.prototype.eachEdge = function (cb, context) {\r\n    var edges = this.edges;\r\n    var len = edges.length;\r\n\r\n    for (var i = 0; i < len; i++) {\r\n      if (edges[i].dataIndex >= 0 && edges[i].node1.dataIndex >= 0 && edges[i].node2.dataIndex >= 0) {\r\n        cb.call(context, edges[i], i);\r\n      }\r\n    }\r\n  };\r\n\r\n  ;\r\n  /**\r\n   * Breadth first traverse\r\n   * Return true to stop traversing\r\n   */\r\n\r\n  Graph.prototype.breadthFirstTraverse = function (cb, startNode, direction, context) {\r\n    if (!(startNode instanceof GraphNode)) {\r\n      startNode = this._nodesMap[generateNodeKey(startNode)];\r\n    }\r\n\r\n    if (!startNode) {\r\n      return;\r\n    }\r\n\r\n    var edgeType = direction === 'out' ? 'outEdges' : direction === 'in' ? 'inEdges' : 'edges';\r\n\r\n    for (var i = 0; i < this.nodes.length; i++) {\r\n      this.nodes[i].__visited = false;\r\n    }\r\n\r\n    if (cb.call(context, startNode, null)) {\r\n      return;\r\n    }\r\n\r\n    var queue = [startNode];\r\n\r\n    while (queue.length) {\r\n      var currentNode = queue.shift();\r\n      var edges = currentNode[edgeType];\r\n\r\n      for (var i = 0; i < edges.length; i++) {\r\n        var e = edges[i];\r\n        var otherNode = e.node1 === currentNode ? e.node2 : e.node1;\r\n\r\n        if (!otherNode.__visited) {\r\n          if (cb.call(context, otherNode, currentNode)) {\r\n            // Stop traversing\r\n            return;\r\n          }\r\n\r\n          queue.push(otherNode);\r\n          otherNode.__visited = true;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  ; // TODO\r\n  // depthFirstTraverse(\r\n  //     cb, startNode, direction, context\r\n  // ) {\r\n  // };\r\n  // Filter update\r\n\r\n  Graph.prototype.update = function () {\r\n    var data = this.data;\r\n    var edgeData = this.edgeData;\r\n    var nodes = this.nodes;\r\n    var edges = this.edges;\r\n\r\n    for (var i = 0, len = nodes.length; i < len; i++) {\r\n      nodes[i].dataIndex = -1;\r\n    }\r\n\r\n    for (var i = 0, len = data.count(); i < len; i++) {\r\n      nodes[data.getRawIndex(i)].dataIndex = i;\r\n    }\r\n\r\n    edgeData.filterSelf(function (idx) {\r\n      var edge = edges[edgeData.getRawIndex(idx)];\r\n      return edge.node1.dataIndex >= 0 && edge.node2.dataIndex >= 0;\r\n    }); // Update edge\r\n\r\n    for (var i = 0, len = edges.length; i < len; i++) {\r\n      edges[i].dataIndex = -1;\r\n    }\r\n\r\n    for (var i = 0, len = edgeData.count(); i < len; i++) {\r\n      edges[edgeData.getRawIndex(i)].dataIndex = i;\r\n    }\r\n  };\r\n\r\n  ;\r\n  /**\r\n   * @return {module:echarts/data/Graph}\r\n   */\r\n\r\n  Graph.prototype.clone = function () {\r\n    var graph = new Graph(this._directed);\r\n    var nodes = this.nodes;\r\n    var edges = this.edges;\r\n\r\n    for (var i = 0; i < nodes.length; i++) {\r\n      graph.addNode(nodes[i].id, nodes[i].dataIndex);\r\n    }\r\n\r\n    for (var i = 0; i < edges.length; i++) {\r\n      var e = edges[i];\r\n      graph.addEdge(e.node1.id, e.node2.id, e.dataIndex);\r\n    }\r\n\r\n    return graph;\r\n  };\r\n\r\n  ;\r\n  return Graph;\r\n}();\r\n\r\nvar GraphNode =\r\n/** @class */\r\nfunction () {\r\n  function GraphNode(id, dataIndex) {\r\n    this.inEdges = [];\r\n    this.outEdges = [];\r\n    this.edges = [];\r\n    this.dataIndex = -1;\r\n    this.id = id == null ? '' : id;\r\n    this.dataIndex = dataIndex == null ? -1 : dataIndex;\r\n  }\r\n  /**\r\n   * @return {number}\r\n   */\r\n\r\n\r\n  GraphNode.prototype.degree = function () {\r\n    return this.edges.length;\r\n  };\r\n  /**\r\n   * @return {number}\r\n   */\r\n\r\n\r\n  GraphNode.prototype.inDegree = function () {\r\n    return this.inEdges.length;\r\n  };\r\n  /**\r\n  * @return {number}\r\n  */\r\n\r\n\r\n  GraphNode.prototype.outDegree = function () {\r\n    return this.outEdges.length;\r\n  };\r\n\r\n  GraphNode.prototype.getModel = function (path) {\r\n    if (this.dataIndex < 0) {\r\n      return;\r\n    }\r\n\r\n    var graph = this.hostGraph;\r\n    var itemModel = graph.data.getItemModel(this.dataIndex);\r\n    return itemModel.getModel(path);\r\n  };\r\n\r\n  GraphNode.prototype.getAdjacentDataIndices = function () {\r\n    var dataIndices = {\r\n      edge: [],\r\n      node: []\r\n    };\r\n\r\n    for (var i = 0; i < this.edges.length; i++) {\r\n      var adjacentEdge = this.edges[i];\r\n\r\n      if (adjacentEdge.dataIndex < 0) {\r\n        continue;\r\n      }\r\n\r\n      dataIndices.edge.push(adjacentEdge.dataIndex);\r\n      dataIndices.node.push(adjacentEdge.node1.dataIndex, adjacentEdge.node2.dataIndex);\r\n    }\r\n\r\n    return dataIndices;\r\n  };\r\n\r\n  return GraphNode;\r\n}();\r\n\r\nvar GraphEdge =\r\n/** @class */\r\nfunction () {\r\n  function GraphEdge(n1, n2, dataIndex) {\r\n    this.dataIndex = -1;\r\n    this.node1 = n1;\r\n    this.node2 = n2;\r\n    this.dataIndex = dataIndex == null ? -1 : dataIndex;\r\n  } // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n\r\n\r\n  GraphEdge.prototype.getModel = function (path) {\r\n    if (this.dataIndex < 0) {\r\n      return;\r\n    }\r\n\r\n    var graph = this.hostGraph;\r\n    var itemModel = graph.edgeData.getItemModel(this.dataIndex);\r\n    return itemModel.getModel(path);\r\n  };\r\n\r\n  GraphEdge.prototype.getAdjacentDataIndices = function () {\r\n    return {\r\n      edge: [this.dataIndex],\r\n      node: [this.node1.dataIndex, this.node2.dataIndex]\r\n    };\r\n  };\r\n\r\n  return GraphEdge;\r\n}();\r\n\r\nfunction createGraphDataProxyMixin(hostName, dataName) {\r\n  return {\r\n    /**\r\n     * @param Default 'value'. can be 'a', 'b', 'c', 'd', 'e'.\r\n     */\r\n    getValue: function (dimension) {\r\n      var data = this[hostName][dataName];\r\n      return data.getStore().get(data.getDimensionIndex(dimension || 'value'), this.dataIndex);\r\n    },\r\n    // TODO: TYPE stricter type.\r\n    setVisual: function (key, value) {\r\n      this.dataIndex >= 0 && this[hostName][dataName].setItemVisual(this.dataIndex, key, value);\r\n    },\r\n    getVisual: function (key) {\r\n      return this[hostName][dataName].getItemVisual(this.dataIndex, key);\r\n    },\r\n    setLayout: function (layout, merge) {\r\n      this.dataIndex >= 0 && this[hostName][dataName].setItemLayout(this.dataIndex, layout, merge);\r\n    },\r\n    getLayout: function () {\r\n      return this[hostName][dataName].getItemLayout(this.dataIndex);\r\n    },\r\n    getGraphicEl: function () {\r\n      return this[hostName][dataName].getItemGraphicEl(this.dataIndex);\r\n    },\r\n    getRawIndex: function () {\r\n      return this[hostName][dataName].getRawIndex(this.dataIndex);\r\n    }\r\n  };\r\n}\r\n\r\n;\r\n;\r\n;\r\nzrUtil.mixin(GraphNode, createGraphDataProxyMixin('hostGraph', 'data'));\r\nzrUtil.mixin(GraphEdge, createGraphDataProxyMixin('hostGraph', 'edgeData'));\r\nexport default Graph;\r\nexport { GraphNode, GraphEdge };", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport SeriesData from '../../data/SeriesData.js';\r\nimport Graph from '../../data/Graph.js';\r\nimport linkSeriesData from '../../data/helper/linkSeriesData.js';\r\nimport prepareSeriesDataSchema from '../../data/helper/createDimensions.js';\r\nimport CoordinateSystem from '../../core/CoordinateSystem.js';\r\nimport createSeriesData from './createSeriesData.js';\r\nimport { convertOptionIdName } from '../../util/model.js';\r\nexport default function createGraphFromNodeEdge(nodes, edges, seriesModel, directed, beforeLink) {\r\n  // ??? TODO\r\n  // support dataset?\r\n  var graph = new Graph(directed);\r\n\r\n  for (var i = 0; i < nodes.length; i++) {\r\n    graph.addNode(zrUtil.retrieve( // Id, name, dataIndex\r\n    nodes[i].id, nodes[i].name, i), i);\r\n  }\r\n\r\n  var linkNameList = [];\r\n  var validEdges = [];\r\n  var linkCount = 0;\r\n\r\n  for (var i = 0; i < edges.length; i++) {\r\n    var link = edges[i];\r\n    var source = link.source;\r\n    var target = link.target; // addEdge may fail when source or target not exists\r\n\r\n    if (graph.addEdge(source, target, linkCount)) {\r\n      validEdges.push(link);\r\n      linkNameList.push(zrUtil.retrieve(convertOptionIdName(link.id, null), source + ' > ' + target));\r\n      linkCount++;\r\n    }\r\n  }\r\n\r\n  var coordSys = seriesModel.get('coordinateSystem');\r\n  var nodeData;\r\n\r\n  if (coordSys === 'cartesian2d' || coordSys === 'polar') {\r\n    nodeData = createSeriesData(nodes, seriesModel);\r\n  } else {\r\n    var coordSysCtor = CoordinateSystem.get(coordSys);\r\n    var coordDimensions = coordSysCtor ? coordSysCtor.dimensions || [] : []; // FIXME: Some geo do not need `value` dimenson, whereas `calendar` needs\r\n    // `value` dimension, but graph need `value` dimension. It's better to\r\n    // uniform this behavior.\r\n\r\n    if (zrUtil.indexOf(coordDimensions, 'value') < 0) {\r\n      coordDimensions.concat(['value']);\r\n    }\r\n\r\n    var dimensions = prepareSeriesDataSchema(nodes, {\r\n      coordDimensions: coordDimensions,\r\n      encodeDefine: seriesModel.getEncode()\r\n    }).dimensions;\r\n    nodeData = new SeriesData(dimensions, seriesModel);\r\n    nodeData.initData(nodes);\r\n  }\r\n\r\n  var edgeData = new SeriesData(['value'], seriesModel);\r\n  edgeData.initData(validEdges, linkNameList);\r\n  beforeLink && beforeLink(nodeData, edgeData);\r\n  linkSeriesData({\r\n    mainData: nodeData,\r\n    struct: graph,\r\n    structAttr: 'graph',\r\n    datas: {\r\n      node: nodeData,\r\n      edge: edgeData\r\n    },\r\n    datasAttr: {\r\n      node: 'data',\r\n      edge: 'edgeData'\r\n    }\r\n  }); // Update dataIndex of nodes and edges because invalid edge may be removed\r\n\r\n  graph.update();\r\n  return graph;\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport SeriesData from '../../data/SeriesData.js';\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport { defaultEmphasis } from '../../util/model.js';\r\nimport Model from '../../model/Model.js';\r\nimport createGraphFromNodeEdge from '../helper/createGraphFromNodeEdge.js';\r\nimport LegendVisualProvider from '../../visual/LegendVisualProvider.js';\r\nimport SeriesModel from '../../model/Series.js';\r\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\r\nimport { defaultSeriesFormatTooltip } from '../../component/tooltip/seriesFormatTooltip.js';\r\nimport { initCurvenessList, createEdgeMapForCurveness } from '../helper/multipleGraphEdgeHelper.js';\r\n\r\nvar GraphSeriesModel =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(GraphSeriesModel, _super);\r\n\r\n  function GraphSeriesModel() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = GraphSeriesModel.type;\r\n    _this.hasSymbolVisual = true;\r\n    return _this;\r\n  }\r\n\r\n  GraphSeriesModel.prototype.init = function (option) {\r\n    _super.prototype.init.apply(this, arguments);\r\n\r\n    var self = this;\r\n\r\n    function getCategoriesData() {\r\n      return self._categoriesData;\r\n    } // Provide data for legend select\r\n\r\n\r\n    this.legendVisualProvider = new LegendVisualProvider(getCategoriesData, getCategoriesData);\r\n    this.fillDataTextStyle(option.edges || option.links);\r\n\r\n    this._updateCategoriesData();\r\n  };\r\n\r\n  GraphSeriesModel.prototype.mergeOption = function (option) {\r\n    _super.prototype.mergeOption.apply(this, arguments);\r\n\r\n    this.fillDataTextStyle(option.edges || option.links);\r\n\r\n    this._updateCategoriesData();\r\n  };\r\n\r\n  GraphSeriesModel.prototype.mergeDefaultAndTheme = function (option) {\r\n    _super.prototype.mergeDefaultAndTheme.apply(this, arguments);\r\n\r\n    defaultEmphasis(option, 'edgeLabel', ['show']);\r\n  };\r\n\r\n  GraphSeriesModel.prototype.getInitialData = function (option, ecModel) {\r\n    var edges = option.edges || option.links || [];\r\n    var nodes = option.data || option.nodes || [];\r\n    var self = this;\r\n\r\n    if (nodes && edges) {\r\n      // auto curveness\r\n      initCurvenessList(this);\r\n      var graph = createGraphFromNodeEdge(nodes, edges, this, true, beforeLink);\r\n      zrUtil.each(graph.edges, function (edge) {\r\n        createEdgeMapForCurveness(edge.node1, edge.node2, this, edge.dataIndex);\r\n      }, this);\r\n      return graph.data;\r\n    }\r\n\r\n    function beforeLink(nodeData, edgeData) {\r\n      // Overwrite nodeData.getItemModel to\r\n      nodeData.wrapMethod('getItemModel', function (model) {\r\n        var categoriesModels = self._categoriesModels;\r\n        var categoryIdx = model.getShallow('category');\r\n        var categoryModel = categoriesModels[categoryIdx];\r\n\r\n        if (categoryModel) {\r\n          categoryModel.parentModel = model.parentModel;\r\n          model.parentModel = categoryModel;\r\n        }\r\n\r\n        return model;\r\n      }); // TODO Inherit resolveParentPath by default in Model#getModel?\r\n\r\n      var oldGetModel = Model.prototype.getModel;\r\n\r\n      function newGetModel(path, parentModel) {\r\n        var model = oldGetModel.call(this, path, parentModel);\r\n        model.resolveParentPath = resolveParentPath;\r\n        return model;\r\n      }\r\n\r\n      edgeData.wrapMethod('getItemModel', function (model) {\r\n        model.resolveParentPath = resolveParentPath;\r\n        model.getModel = newGetModel;\r\n        return model;\r\n      });\r\n\r\n      function resolveParentPath(pathArr) {\r\n        if (pathArr && (pathArr[0] === 'label' || pathArr[1] === 'label')) {\r\n          var newPathArr = pathArr.slice();\r\n\r\n          if (pathArr[0] === 'label') {\r\n            newPathArr[0] = 'edgeLabel';\r\n          } else if (pathArr[1] === 'label') {\r\n            newPathArr[1] = 'edgeLabel';\r\n          }\r\n\r\n          return newPathArr;\r\n        }\r\n\r\n        return pathArr;\r\n      }\r\n    }\r\n  };\r\n\r\n  GraphSeriesModel.prototype.getGraph = function () {\r\n    return this.getData().graph;\r\n  };\r\n\r\n  GraphSeriesModel.prototype.getEdgeData = function () {\r\n    return this.getGraph().edgeData;\r\n  };\r\n\r\n  GraphSeriesModel.prototype.getCategoriesData = function () {\r\n    return this._categoriesData;\r\n  };\r\n\r\n  GraphSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\r\n    if (dataType === 'edge') {\r\n      var nodeData = this.getData();\r\n      var params = this.getDataParams(dataIndex, dataType);\r\n      var edge = nodeData.graph.getEdgeByIndex(dataIndex);\r\n      var sourceName = nodeData.getName(edge.node1.dataIndex);\r\n      var targetName = nodeData.getName(edge.node2.dataIndex);\r\n      var nameArr = [];\r\n      sourceName != null && nameArr.push(sourceName);\r\n      targetName != null && nameArr.push(targetName);\r\n      return createTooltipMarkup('nameValue', {\r\n        name: nameArr.join(' > '),\r\n        value: params.value,\r\n        noValue: params.value == null\r\n      });\r\n    } // dataType === 'node' or empty\r\n\r\n\r\n    var nodeMarkup = defaultSeriesFormatTooltip({\r\n      series: this,\r\n      dataIndex: dataIndex,\r\n      multipleSeries: multipleSeries\r\n    });\r\n    return nodeMarkup;\r\n  };\r\n\r\n  GraphSeriesModel.prototype._updateCategoriesData = function () {\r\n    var categories = zrUtil.map(this.option.categories || [], function (category) {\r\n      // Data must has value\r\n      return category.value != null ? category : zrUtil.extend({\r\n        value: 0\r\n      }, category);\r\n    });\r\n    var categoriesData = new SeriesData(['value'], this);\r\n    categoriesData.initData(categories);\r\n    this._categoriesData = categoriesData;\r\n    this._categoriesModels = categoriesData.mapArray(function (idx) {\r\n      return categoriesData.getItemModel(idx);\r\n    });\r\n  };\r\n\r\n  GraphSeriesModel.prototype.setZoom = function (zoom) {\r\n    this.option.zoom = zoom;\r\n  };\r\n\r\n  GraphSeriesModel.prototype.setCenter = function (center) {\r\n    this.option.center = center;\r\n  };\r\n\r\n  GraphSeriesModel.prototype.isAnimationEnabled = function () {\r\n    return _super.prototype.isAnimationEnabled.call(this) // Not enable animation when do force layout\r\n    && !(this.get('layout') === 'force' && this.get(['force', 'layoutAnimation']));\r\n  };\r\n\r\n  GraphSeriesModel.type = 'series.graph';\r\n  GraphSeriesModel.dependencies = ['grid', 'polar', 'geo', 'singleAxis', 'calendar'];\r\n  GraphSeriesModel.defaultOption = {\r\n    // zlevel: 0,\r\n    z: 2,\r\n    coordinateSystem: 'view',\r\n    // Default option for all coordinate systems\r\n    // xAxisIndex: 0,\r\n    // yAxisIndex: 0,\r\n    // polarIndex: 0,\r\n    // geoIndex: 0,\r\n    legendHoverLink: true,\r\n    layout: null,\r\n    // Configuration of circular layout\r\n    circular: {\r\n      rotateLabel: false\r\n    },\r\n    // Configuration of force directed layout\r\n    force: {\r\n      initLayout: null,\r\n      // Node repulsion. Can be an array to represent range.\r\n      repulsion: [0, 50],\r\n      gravity: 0.1,\r\n      // Initial friction\r\n      friction: 0.6,\r\n      // Edge length. Can be an array to represent range.\r\n      edgeLength: 30,\r\n      layoutAnimation: true\r\n    },\r\n    left: 'center',\r\n    top: 'center',\r\n    // right: null,\r\n    // bottom: null,\r\n    // width: '80%',\r\n    // height: '80%',\r\n    symbol: 'circle',\r\n    symbolSize: 10,\r\n    edgeSymbol: ['none', 'none'],\r\n    edgeSymbolSize: 10,\r\n    edgeLabel: {\r\n      position: 'middle',\r\n      distance: 5\r\n    },\r\n    draggable: false,\r\n    roam: false,\r\n    // Default on center of graph\r\n    center: null,\r\n    zoom: 1,\r\n    // Symbol size scale ratio in roam\r\n    nodeScaleRatio: 0.6,\r\n    // cursor: null,\r\n    // categories: [],\r\n    // data: []\r\n    // Or\r\n    // nodes: []\r\n    //\r\n    // links: []\r\n    // Or\r\n    // edges: []\r\n    label: {\r\n      show: false,\r\n      formatter: '{b}'\r\n    },\r\n    itemStyle: {},\r\n    lineStyle: {\r\n      color: '#aaa',\r\n      width: 1,\r\n      opacity: 0.5\r\n    },\r\n    emphasis: {\r\n      scale: true,\r\n      label: {\r\n        show: true\r\n      }\r\n    },\r\n    select: {\r\n      itemStyle: {\r\n        borderColor: '#212121'\r\n      }\r\n    }\r\n  };\r\n  return GraphSeriesModel;\r\n}(SeriesModel);\r\n\r\nexport default GraphSeriesModel;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport categoryFilter from './categoryFilter.js';\r\nimport categoryVisual from './categoryVisual.js';\r\nimport edgeVisual from './edgeVisual.js';\r\nimport simpleLayout from './simpleLayout.js';\r\nimport circularLayout from './circularLayout.js';\r\nimport forceLayout from './forceLayout.js';\r\nimport createView from './createView.js';\r\nimport View from '../../coord/View.js';\r\nimport GraphView from './GraphView.js';\r\nimport GraphSeriesModel from './GraphSeries.js';\r\nimport { updateCenterAndZoom } from '../../action/roamHelper.js';\r\nimport { noop } from 'zrender/lib/core/util.js';\r\nvar actionInfo = {\r\n  type: 'graphRoam',\r\n  event: 'graphRoam',\r\n  update: 'none'\r\n};\r\nexport function install(registers) {\r\n  registers.registerChartView(GraphView);\r\n  registers.registerSeriesModel(GraphSeriesModel);\r\n  registers.registerProcessor(categoryFilter);\r\n  registers.registerVisual(categoryVisual);\r\n  registers.registerVisual(edgeVisual);\r\n  registers.registerLayout(simpleLayout);\r\n  registers.registerLayout(registers.PRIORITY.VISUAL.POST_CHART_LAYOUT, circularLayout);\r\n  registers.registerLayout(forceLayout);\r\n  registers.registerCoordinateSystem('graphView', {\r\n    dimensions: View.dimensions,\r\n    create: createView\r\n  }); // Register legacy focus actions\r\n\r\n  registers.registerAction({\r\n    type: 'focusNodeAdjacency',\r\n    event: 'focusNodeAdjacency',\r\n    update: 'series:focusNodeAdjacency'\r\n  }, noop);\r\n  registers.registerAction({\r\n    type: 'unfocusNodeAdjacency',\r\n    event: 'unfocusNodeAdjacency',\r\n    update: 'series:unfocusNodeAdjacency'\r\n  }, noop); // Register roam action.\r\n\r\n  registers.registerAction(actionInfo, function (payload, ecModel, api) {\r\n    ecModel.eachComponent({\r\n      mainType: 'series',\r\n      query: payload\r\n    }, function (seriesModel) {\r\n      var coordSys = seriesModel.coordinateSystem;\r\n      var res = updateCenterAndZoom(coordSys, payload, undefined, api);\r\n      seriesModel.setCenter && seriesModel.setCenter(res.center);\r\n      seriesModel.setZoom && seriesModel.setZoom(res.zoom);\r\n    });\r\n  });\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport Path from 'zrender/lib/graphic/Path.js';\r\n\r\nvar PointerShape =\r\n/** @class */\r\nfunction () {\r\n  function PointerShape() {\r\n    this.angle = 0;\r\n    this.width = 10;\r\n    this.r = 10;\r\n    this.x = 0;\r\n    this.y = 0;\r\n  }\r\n\r\n  return PointerShape;\r\n}();\r\n\r\nvar PointerPath =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(PointerPath, _super);\r\n\r\n  function PointerPath(opts) {\r\n    var _this = _super.call(this, opts) || this;\r\n\r\n    _this.type = 'pointer';\r\n    return _this;\r\n  }\r\n\r\n  PointerPath.prototype.getDefaultShape = function () {\r\n    return new PointerShape();\r\n  };\r\n\r\n  PointerPath.prototype.buildPath = function (ctx, shape) {\r\n    var mathCos = Math.cos;\r\n    var mathSin = Math.sin;\r\n    var r = shape.r;\r\n    var width = shape.width;\r\n    var angle = shape.angle;\r\n    var x = shape.x - mathCos(angle) * width * (width >= r / 3 ? 1 : 2);\r\n    var y = shape.y - mathSin(angle) * width * (width >= r / 3 ? 1 : 2);\r\n    angle = shape.angle - Math.PI / 2;\r\n    ctx.moveTo(x, y);\r\n    ctx.lineTo(shape.x + mathCos(angle) * width, shape.y + mathSin(angle) * width);\r\n    ctx.lineTo(shape.x + mathCos(shape.angle) * r, shape.y + mathSin(shape.angle) * r);\r\n    ctx.lineTo(shape.x - mathCos(angle) * width, shape.y - mathSin(angle) * width);\r\n    ctx.lineTo(x, y);\r\n  };\r\n\r\n  return PointerPath;\r\n}(Path);\r\n\r\nexport default PointerPath;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport PointerPath from './PointerPath.js';\r\nimport * as graphic from '../../util/graphic.js';\r\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\r\nimport { createTextStyle, setLabelValueAnimation, animateLabelValue } from '../../label/labelStyle.js';\r\nimport ChartView from '../../view/Chart.js';\r\nimport { parsePercent, round, linearMap } from '../../util/number.js';\r\nimport Sausage from '../../util/shape/sausage.js';\r\nimport { createSymbol } from '../../util/symbol.js';\r\nimport ZRImage from 'zrender/lib/graphic/Image.js';\r\nimport { extend, isFunction, isString, isNumber, each } from 'zrender/lib/core/util.js';\r\nimport { setCommonECData } from '../../util/innerStore.js';\r\nimport { normalizeArcAngles } from 'zrender/lib/core/PathProxy.js';\r\n\r\nfunction parsePosition(seriesModel, api) {\r\n  var center = seriesModel.get('center');\r\n  var width = api.getWidth();\r\n  var height = api.getHeight();\r\n  var size = Math.min(width, height);\r\n  var cx = parsePercent(center[0], api.getWidth());\r\n  var cy = parsePercent(center[1], api.getHeight());\r\n  var r = parsePercent(seriesModel.get('radius'), size / 2);\r\n  return {\r\n    cx: cx,\r\n    cy: cy,\r\n    r: r\r\n  };\r\n}\r\n\r\nfunction formatLabel(value, labelFormatter) {\r\n  var label = value == null ? '' : value + '';\r\n\r\n  if (labelFormatter) {\r\n    if (isString(labelFormatter)) {\r\n      label = labelFormatter.replace('{value}', label);\r\n    } else if (isFunction(labelFormatter)) {\r\n      label = labelFormatter(value);\r\n    }\r\n  }\r\n\r\n  return label;\r\n}\r\n\r\nvar GaugeView =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(GaugeView, _super);\r\n\r\n  function GaugeView() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = GaugeView.type;\r\n    return _this;\r\n  }\r\n\r\n  GaugeView.prototype.render = function (seriesModel, ecModel, api) {\r\n    this.group.removeAll();\r\n    var colorList = seriesModel.get(['axisLine', 'lineStyle', 'color']);\r\n    var posInfo = parsePosition(seriesModel, api);\r\n\r\n    this._renderMain(seriesModel, ecModel, api, colorList, posInfo);\r\n\r\n    this._data = seriesModel.getData();\r\n  };\r\n\r\n  GaugeView.prototype.dispose = function () {};\r\n\r\n  GaugeView.prototype._renderMain = function (seriesModel, ecModel, api, colorList, posInfo) {\r\n    var group = this.group;\r\n    var clockwise = seriesModel.get('clockwise');\r\n    var startAngle = -seriesModel.get('startAngle') / 180 * Math.PI;\r\n    var endAngle = -seriesModel.get('endAngle') / 180 * Math.PI;\r\n    var axisLineModel = seriesModel.getModel('axisLine');\r\n    var roundCap = axisLineModel.get('roundCap');\r\n    var MainPath = roundCap ? Sausage : graphic.Sector;\r\n    var showAxis = axisLineModel.get('show');\r\n    var lineStyleModel = axisLineModel.getModel('lineStyle');\r\n    var axisLineWidth = lineStyleModel.get('width');\r\n    var angles = [startAngle, endAngle];\r\n    normalizeArcAngles(angles, !clockwise);\r\n    startAngle = angles[0];\r\n    endAngle = angles[1];\r\n    var angleRangeSpan = endAngle - startAngle;\r\n    var prevEndAngle = startAngle;\r\n    var sectors = [];\r\n\r\n    for (var i = 0; showAxis && i < colorList.length; i++) {\r\n      // Clamp\r\n      var percent = Math.min(Math.max(colorList[i][0], 0), 1);\r\n      endAngle = startAngle + angleRangeSpan * percent;\r\n      var sector = new MainPath({\r\n        shape: {\r\n          startAngle: prevEndAngle,\r\n          endAngle: endAngle,\r\n          cx: posInfo.cx,\r\n          cy: posInfo.cy,\r\n          clockwise: clockwise,\r\n          r0: posInfo.r - axisLineWidth,\r\n          r: posInfo.r\r\n        },\r\n        silent: true\r\n      });\r\n      sector.setStyle({\r\n        fill: colorList[i][1]\r\n      });\r\n      sector.setStyle(lineStyleModel.getLineStyle( // Because we use sector to simulate arc\r\n      // so the properties for stroking are useless\r\n      ['color', 'width']));\r\n      sectors.push(sector);\r\n      prevEndAngle = endAngle;\r\n    }\r\n\r\n    sectors.reverse();\r\n    each(sectors, function (sector) {\r\n      return group.add(sector);\r\n    });\r\n\r\n    var getColor = function (percent) {\r\n      // Less than 0\r\n      if (percent <= 0) {\r\n        return colorList[0][1];\r\n      }\r\n\r\n      var i;\r\n\r\n      for (i = 0; i < colorList.length; i++) {\r\n        if (colorList[i][0] >= percent && (i === 0 ? 0 : colorList[i - 1][0]) < percent) {\r\n          return colorList[i][1];\r\n        }\r\n      } // More than 1\r\n\r\n\r\n      return colorList[i - 1][1];\r\n    };\r\n\r\n    this._renderTicks(seriesModel, ecModel, api, getColor, posInfo, startAngle, endAngle, clockwise, axisLineWidth);\r\n\r\n    this._renderTitleAndDetail(seriesModel, ecModel, api, getColor, posInfo);\r\n\r\n    this._renderAnchor(seriesModel, posInfo);\r\n\r\n    this._renderPointer(seriesModel, ecModel, api, getColor, posInfo, startAngle, endAngle, clockwise, axisLineWidth);\r\n  };\r\n\r\n  GaugeView.prototype._renderTicks = function (seriesModel, ecModel, api, getColor, posInfo, startAngle, endAngle, clockwise, axisLineWidth) {\r\n    var group = this.group;\r\n    var cx = posInfo.cx;\r\n    var cy = posInfo.cy;\r\n    var r = posInfo.r;\r\n    var minVal = +seriesModel.get('min');\r\n    var maxVal = +seriesModel.get('max');\r\n    var splitLineModel = seriesModel.getModel('splitLine');\r\n    var tickModel = seriesModel.getModel('axisTick');\r\n    var labelModel = seriesModel.getModel('axisLabel');\r\n    var splitNumber = seriesModel.get('splitNumber');\r\n    var subSplitNumber = tickModel.get('splitNumber');\r\n    var splitLineLen = parsePercent(splitLineModel.get('length'), r);\r\n    var tickLen = parsePercent(tickModel.get('length'), r);\r\n    var angle = startAngle;\r\n    var step = (endAngle - startAngle) / splitNumber;\r\n    var subStep = step / subSplitNumber;\r\n    var splitLineStyle = splitLineModel.getModel('lineStyle').getLineStyle();\r\n    var tickLineStyle = tickModel.getModel('lineStyle').getLineStyle();\r\n    var splitLineDistance = splitLineModel.get('distance');\r\n    var unitX;\r\n    var unitY;\r\n\r\n    for (var i = 0; i <= splitNumber; i++) {\r\n      unitX = Math.cos(angle);\r\n      unitY = Math.sin(angle); // Split line\r\n\r\n      if (splitLineModel.get('show')) {\r\n        var distance = splitLineDistance ? splitLineDistance + axisLineWidth : axisLineWidth;\r\n        var splitLine = new graphic.Line({\r\n          shape: {\r\n            x1: unitX * (r - distance) + cx,\r\n            y1: unitY * (r - distance) + cy,\r\n            x2: unitX * (r - splitLineLen - distance) + cx,\r\n            y2: unitY * (r - splitLineLen - distance) + cy\r\n          },\r\n          style: splitLineStyle,\r\n          silent: true\r\n        });\r\n\r\n        if (splitLineStyle.stroke === 'auto') {\r\n          splitLine.setStyle({\r\n            stroke: getColor(i / splitNumber)\r\n          });\r\n        }\r\n\r\n        group.add(splitLine);\r\n      } // Label\r\n\r\n\r\n      if (labelModel.get('show')) {\r\n        var distance = labelModel.get('distance') + splitLineDistance;\r\n        var label = formatLabel(round(i / splitNumber * (maxVal - minVal) + minVal), labelModel.get('formatter'));\r\n        var autoColor = getColor(i / splitNumber);\r\n        var textStyleX = unitX * (r - splitLineLen - distance) + cx;\r\n        var textStyleY = unitY * (r - splitLineLen - distance) + cy;\r\n        var rotateType = labelModel.get('rotate');\r\n        var rotate = 0;\r\n\r\n        if (rotateType === 'radial') {\r\n          rotate = -angle + 2 * Math.PI;\r\n\r\n          if (rotate > Math.PI / 2) {\r\n            rotate += Math.PI;\r\n          }\r\n        } else if (rotateType === 'tangential') {\r\n          rotate = -angle - Math.PI / 2;\r\n        } else if (isNumber(rotateType)) {\r\n          rotate = rotateType * Math.PI / 180;\r\n        }\r\n\r\n        if (rotate === 0) {\r\n          group.add(new graphic.Text({\r\n            style: createTextStyle(labelModel, {\r\n              text: label,\r\n              x: textStyleX,\r\n              y: textStyleY,\r\n              verticalAlign: unitY < -0.8 ? 'top' : unitY > 0.8 ? 'bottom' : 'middle',\r\n              align: unitX < -0.4 ? 'left' : unitX > 0.4 ? 'right' : 'center'\r\n            }, {\r\n              inheritColor: autoColor\r\n            }),\r\n            silent: true\r\n          }));\r\n        } else {\r\n          group.add(new graphic.Text({\r\n            style: createTextStyle(labelModel, {\r\n              text: label,\r\n              x: textStyleX,\r\n              y: textStyleY,\r\n              verticalAlign: 'middle',\r\n              align: 'center'\r\n            }, {\r\n              inheritColor: autoColor\r\n            }),\r\n            silent: true,\r\n            originX: textStyleX,\r\n            originY: textStyleY,\r\n            rotation: rotate\r\n          }));\r\n        }\r\n      } // Axis tick\r\n\r\n\r\n      if (tickModel.get('show') && i !== splitNumber) {\r\n        var distance = tickModel.get('distance');\r\n        distance = distance ? distance + axisLineWidth : axisLineWidth;\r\n\r\n        for (var j = 0; j <= subSplitNumber; j++) {\r\n          unitX = Math.cos(angle);\r\n          unitY = Math.sin(angle);\r\n          var tickLine = new graphic.Line({\r\n            shape: {\r\n              x1: unitX * (r - distance) + cx,\r\n              y1: unitY * (r - distance) + cy,\r\n              x2: unitX * (r - tickLen - distance) + cx,\r\n              y2: unitY * (r - tickLen - distance) + cy\r\n            },\r\n            silent: true,\r\n            style: tickLineStyle\r\n          });\r\n\r\n          if (tickLineStyle.stroke === 'auto') {\r\n            tickLine.setStyle({\r\n              stroke: getColor((i + j / subSplitNumber) / splitNumber)\r\n            });\r\n          }\r\n\r\n          group.add(tickLine);\r\n          angle += subStep;\r\n        }\r\n\r\n        angle -= subStep;\r\n      } else {\r\n        angle += step;\r\n      }\r\n    }\r\n  };\r\n\r\n  GaugeView.prototype._renderPointer = function (seriesModel, ecModel, api, getColor, posInfo, startAngle, endAngle, clockwise, axisLineWidth) {\r\n    var group = this.group;\r\n    var oldData = this._data;\r\n    var oldProgressData = this._progressEls;\r\n    var progressList = [];\r\n    var showPointer = seriesModel.get(['pointer', 'show']);\r\n    var progressModel = seriesModel.getModel('progress');\r\n    var showProgress = progressModel.get('show');\r\n    var data = seriesModel.getData();\r\n    var valueDim = data.mapDimension('value');\r\n    var minVal = +seriesModel.get('min');\r\n    var maxVal = +seriesModel.get('max');\r\n    var valueExtent = [minVal, maxVal];\r\n    var angleExtent = [startAngle, endAngle];\r\n\r\n    function createPointer(idx, angle) {\r\n      var itemModel = data.getItemModel(idx);\r\n      var pointerModel = itemModel.getModel('pointer');\r\n      var pointerWidth = parsePercent(pointerModel.get('width'), posInfo.r);\r\n      var pointerLength = parsePercent(pointerModel.get('length'), posInfo.r);\r\n      var pointerStr = seriesModel.get(['pointer', 'icon']);\r\n      var pointerOffset = pointerModel.get('offsetCenter');\r\n      var pointerOffsetX = parsePercent(pointerOffset[0], posInfo.r);\r\n      var pointerOffsetY = parsePercent(pointerOffset[1], posInfo.r);\r\n      var pointerKeepAspect = pointerModel.get('keepAspect');\r\n      var pointer; // not exist icon type will be set 'rect'\r\n\r\n      if (pointerStr) {\r\n        pointer = createSymbol(pointerStr, pointerOffsetX - pointerWidth / 2, pointerOffsetY - pointerLength, pointerWidth, pointerLength, null, pointerKeepAspect);\r\n      } else {\r\n        pointer = new PointerPath({\r\n          shape: {\r\n            angle: -Math.PI / 2,\r\n            width: pointerWidth,\r\n            r: pointerLength,\r\n            x: pointerOffsetX,\r\n            y: pointerOffsetY\r\n          }\r\n        });\r\n      }\r\n\r\n      pointer.rotation = -(angle + Math.PI / 2);\r\n      pointer.x = posInfo.cx;\r\n      pointer.y = posInfo.cy;\r\n      return pointer;\r\n    }\r\n\r\n    function createProgress(idx, endAngle) {\r\n      var roundCap = progressModel.get('roundCap');\r\n      var ProgressPath = roundCap ? Sausage : graphic.Sector;\r\n      var isOverlap = progressModel.get('overlap');\r\n      var progressWidth = isOverlap ? progressModel.get('width') : axisLineWidth / data.count();\r\n      var r0 = isOverlap ? posInfo.r - progressWidth : posInfo.r - (idx + 1) * progressWidth;\r\n      var r = isOverlap ? posInfo.r : posInfo.r - idx * progressWidth;\r\n      var progress = new ProgressPath({\r\n        shape: {\r\n          startAngle: startAngle,\r\n          endAngle: endAngle,\r\n          cx: posInfo.cx,\r\n          cy: posInfo.cy,\r\n          clockwise: clockwise,\r\n          r0: r0,\r\n          r: r\r\n        }\r\n      });\r\n      isOverlap && (progress.z2 = maxVal - data.get(valueDim, idx) % maxVal);\r\n      return progress;\r\n    }\r\n\r\n    if (showProgress || showPointer) {\r\n      data.diff(oldData).add(function (idx) {\r\n        var val = data.get(valueDim, idx);\r\n\r\n        if (showPointer) {\r\n          var pointer = createPointer(idx, startAngle); // TODO hide pointer on NaN value?\r\n\r\n          graphic.initProps(pointer, {\r\n            rotation: -((isNaN(+val) ? angleExtent[0] : linearMap(val, valueExtent, angleExtent, true)) + Math.PI / 2)\r\n          }, seriesModel);\r\n          group.add(pointer);\r\n          data.setItemGraphicEl(idx, pointer);\r\n        }\r\n\r\n        if (showProgress) {\r\n          var progress = createProgress(idx, startAngle);\r\n          var isClip = progressModel.get('clip');\r\n          graphic.initProps(progress, {\r\n            shape: {\r\n              endAngle: linearMap(val, valueExtent, angleExtent, isClip)\r\n            }\r\n          }, seriesModel);\r\n          group.add(progress); // Add data index and series index for indexing the data by element\r\n          // Useful in tooltip\r\n\r\n          setCommonECData(seriesModel.seriesIndex, data.dataType, idx, progress);\r\n          progressList[idx] = progress;\r\n        }\r\n      }).update(function (newIdx, oldIdx) {\r\n        var val = data.get(valueDim, newIdx);\r\n\r\n        if (showPointer) {\r\n          var previousPointer = oldData.getItemGraphicEl(oldIdx);\r\n          var previousRotate = previousPointer ? previousPointer.rotation : startAngle;\r\n          var pointer = createPointer(newIdx, previousRotate);\r\n          pointer.rotation = previousRotate;\r\n          graphic.updateProps(pointer, {\r\n            rotation: -((isNaN(+val) ? angleExtent[0] : linearMap(val, valueExtent, angleExtent, true)) + Math.PI / 2)\r\n          }, seriesModel);\r\n          group.add(pointer);\r\n          data.setItemGraphicEl(newIdx, pointer);\r\n        }\r\n\r\n        if (showProgress) {\r\n          var previousProgress = oldProgressData[oldIdx];\r\n          var previousEndAngle = previousProgress ? previousProgress.shape.endAngle : startAngle;\r\n          var progress = createProgress(newIdx, previousEndAngle);\r\n          var isClip = progressModel.get('clip');\r\n          graphic.updateProps(progress, {\r\n            shape: {\r\n              endAngle: linearMap(val, valueExtent, angleExtent, isClip)\r\n            }\r\n          }, seriesModel);\r\n          group.add(progress); // Add data index and series index for indexing the data by element\r\n          // Useful in tooltip\r\n\r\n          setCommonECData(seriesModel.seriesIndex, data.dataType, newIdx, progress);\r\n          progressList[newIdx] = progress;\r\n        }\r\n      }).execute();\r\n      data.each(function (idx) {\r\n        var itemModel = data.getItemModel(idx);\r\n        var emphasisModel = itemModel.getModel('emphasis');\r\n        var focus = emphasisModel.get('focus');\r\n        var blurScope = emphasisModel.get('blurScope');\r\n        var emphasisDisabled = emphasisModel.get('disabled');\r\n\r\n        if (showPointer) {\r\n          var pointer = data.getItemGraphicEl(idx);\r\n          var symbolStyle = data.getItemVisual(idx, 'style');\r\n          var visualColor = symbolStyle.fill;\r\n\r\n          if (pointer instanceof ZRImage) {\r\n            var pathStyle = pointer.style;\r\n            pointer.useStyle(extend({\r\n              image: pathStyle.image,\r\n              x: pathStyle.x,\r\n              y: pathStyle.y,\r\n              width: pathStyle.width,\r\n              height: pathStyle.height\r\n            }, symbolStyle));\r\n          } else {\r\n            pointer.useStyle(symbolStyle);\r\n            pointer.type !== 'pointer' && pointer.setColor(visualColor);\r\n          }\r\n\r\n          pointer.setStyle(itemModel.getModel(['pointer', 'itemStyle']).getItemStyle());\r\n\r\n          if (pointer.style.fill === 'auto') {\r\n            pointer.setStyle('fill', getColor(linearMap(data.get(valueDim, idx), valueExtent, [0, 1], true)));\r\n          }\r\n\r\n          pointer.z2EmphasisLift = 0;\r\n          setStatesStylesFromModel(pointer, itemModel);\r\n          toggleHoverEmphasis(pointer, focus, blurScope, emphasisDisabled);\r\n        }\r\n\r\n        if (showProgress) {\r\n          var progress = progressList[idx];\r\n          progress.useStyle(data.getItemVisual(idx, 'style'));\r\n          progress.setStyle(itemModel.getModel(['progress', 'itemStyle']).getItemStyle());\r\n          progress.z2EmphasisLift = 0;\r\n          setStatesStylesFromModel(progress, itemModel);\r\n          toggleHoverEmphasis(progress, focus, blurScope, emphasisDisabled);\r\n        }\r\n      });\r\n      this._progressEls = progressList;\r\n    }\r\n  };\r\n\r\n  GaugeView.prototype._renderAnchor = function (seriesModel, posInfo) {\r\n    var anchorModel = seriesModel.getModel('anchor');\r\n    var showAnchor = anchorModel.get('show');\r\n\r\n    if (showAnchor) {\r\n      var anchorSize = anchorModel.get('size');\r\n      var anchorType = anchorModel.get('icon');\r\n      var offsetCenter = anchorModel.get('offsetCenter');\r\n      var anchorKeepAspect = anchorModel.get('keepAspect');\r\n      var anchor = createSymbol(anchorType, posInfo.cx - anchorSize / 2 + parsePercent(offsetCenter[0], posInfo.r), posInfo.cy - anchorSize / 2 + parsePercent(offsetCenter[1], posInfo.r), anchorSize, anchorSize, null, anchorKeepAspect);\r\n      anchor.z2 = anchorModel.get('showAbove') ? 1 : 0;\r\n      anchor.setStyle(anchorModel.getModel('itemStyle').getItemStyle());\r\n      this.group.add(anchor);\r\n    }\r\n  };\r\n\r\n  GaugeView.prototype._renderTitleAndDetail = function (seriesModel, ecModel, api, getColor, posInfo) {\r\n    var _this = this;\r\n\r\n    var data = seriesModel.getData();\r\n    var valueDim = data.mapDimension('value');\r\n    var minVal = +seriesModel.get('min');\r\n    var maxVal = +seriesModel.get('max');\r\n    var contentGroup = new graphic.Group();\r\n    var newTitleEls = [];\r\n    var newDetailEls = [];\r\n    var hasAnimation = seriesModel.isAnimationEnabled();\r\n    var showPointerAbove = seriesModel.get(['pointer', 'showAbove']);\r\n    data.diff(this._data).add(function (idx) {\r\n      newTitleEls[idx] = new graphic.Text({\r\n        silent: true\r\n      });\r\n      newDetailEls[idx] = new graphic.Text({\r\n        silent: true\r\n      });\r\n    }).update(function (idx, oldIdx) {\r\n      newTitleEls[idx] = _this._titleEls[oldIdx];\r\n      newDetailEls[idx] = _this._detailEls[oldIdx];\r\n    }).execute();\r\n    data.each(function (idx) {\r\n      var itemModel = data.getItemModel(idx);\r\n      var value = data.get(valueDim, idx);\r\n      var itemGroup = new graphic.Group();\r\n      var autoColor = getColor(linearMap(value, [minVal, maxVal], [0, 1], true));\r\n      var itemTitleModel = itemModel.getModel('title');\r\n\r\n      if (itemTitleModel.get('show')) {\r\n        var titleOffsetCenter = itemTitleModel.get('offsetCenter');\r\n        var titleX = posInfo.cx + parsePercent(titleOffsetCenter[0], posInfo.r);\r\n        var titleY = posInfo.cy + parsePercent(titleOffsetCenter[1], posInfo.r);\r\n        var labelEl = newTitleEls[idx];\r\n        labelEl.attr({\r\n          z2: showPointerAbove ? 0 : 2,\r\n          style: createTextStyle(itemTitleModel, {\r\n            x: titleX,\r\n            y: titleY,\r\n            text: data.getName(idx),\r\n            align: 'center',\r\n            verticalAlign: 'middle'\r\n          }, {\r\n            inheritColor: autoColor\r\n          })\r\n        });\r\n        itemGroup.add(labelEl);\r\n      }\r\n\r\n      var itemDetailModel = itemModel.getModel('detail');\r\n\r\n      if (itemDetailModel.get('show')) {\r\n        var detailOffsetCenter = itemDetailModel.get('offsetCenter');\r\n        var detailX = posInfo.cx + parsePercent(detailOffsetCenter[0], posInfo.r);\r\n        var detailY = posInfo.cy + parsePercent(detailOffsetCenter[1], posInfo.r);\r\n        var width = parsePercent(itemDetailModel.get('width'), posInfo.r);\r\n        var height = parsePercent(itemDetailModel.get('height'), posInfo.r);\r\n        var detailColor = seriesModel.get(['progress', 'show']) ? data.getItemVisual(idx, 'style').fill : autoColor;\r\n        var labelEl = newDetailEls[idx];\r\n        var formatter_1 = itemDetailModel.get('formatter');\r\n        labelEl.attr({\r\n          z2: showPointerAbove ? 0 : 2,\r\n          style: createTextStyle(itemDetailModel, {\r\n            x: detailX,\r\n            y: detailY,\r\n            text: formatLabel(value, formatter_1),\r\n            width: isNaN(width) ? null : width,\r\n            height: isNaN(height) ? null : height,\r\n            align: 'center',\r\n            verticalAlign: 'middle'\r\n          }, {\r\n            inheritColor: detailColor\r\n          })\r\n        });\r\n        setLabelValueAnimation(labelEl, {\r\n          normal: itemDetailModel\r\n        }, value, function (value) {\r\n          return formatLabel(value, formatter_1);\r\n        });\r\n        hasAnimation && animateLabelValue(labelEl, idx, data, seriesModel, {\r\n          getFormattedLabel: function (labelDataIndex, status, dataType, labelDimIndex, fmt, extendParams) {\r\n            return formatLabel(extendParams ? extendParams.interpolatedValue : value, formatter_1);\r\n          }\r\n        });\r\n        itemGroup.add(labelEl);\r\n      }\r\n\r\n      contentGroup.add(itemGroup);\r\n    });\r\n    this.group.add(contentGroup);\r\n    this._titleEls = newTitleEls;\r\n    this._detailEls = newDetailEls;\r\n  };\r\n\r\n  GaugeView.type = 'gauge';\r\n  return GaugeView;\r\n}(ChartView);\r\n\r\nexport default GaugeView;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport createSeriesDataSimply from '../helper/createSeriesDataSimply.js';\r\nimport SeriesModel from '../../model/Series.js';\r\n\r\nvar GaugeSeriesModel =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(GaugeSeriesModel, _super);\r\n\r\n  function GaugeSeriesModel() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = GaugeSeriesModel.type;\r\n    _this.visualStyleAccessPath = 'itemStyle';\r\n    return _this;\r\n  }\r\n\r\n  GaugeSeriesModel.prototype.getInitialData = function (option, ecModel) {\r\n    return createSeriesDataSimply(this, ['value']);\r\n  };\r\n\r\n  GaugeSeriesModel.type = 'series.gauge';\r\n  GaugeSeriesModel.defaultOption = {\r\n    // zlevel: 0,\r\n    z: 2,\r\n    colorBy: 'data',\r\n    // \u9ED8\u8BA4\u5168\u5C40\u5C45\u4E2D\r\n    center: ['50%', '50%'],\r\n    legendHoverLink: true,\r\n    radius: '75%',\r\n    startAngle: 225,\r\n    endAngle: -45,\r\n    clockwise: true,\r\n    // \u6700\u5C0F\u503C\r\n    min: 0,\r\n    // \u6700\u5927\u503C\r\n    max: 100,\r\n    // \u5206\u5272\u6BB5\u6570\uFF0C\u9ED8\u8BA4\u4E3A10\r\n    splitNumber: 10,\r\n    // \u5750\u6807\u8F74\u7EBF\r\n    axisLine: {\r\n      // \u9ED8\u8BA4\u663E\u793A\uFF0C\u5C5E\u6027show\u63A7\u5236\u663E\u793A\u4E0E\u5426\r\n      show: true,\r\n      roundCap: false,\r\n      lineStyle: {\r\n        color: [[1, '#E6EBF8']],\r\n        width: 10\r\n      }\r\n    },\r\n    // \u5750\u6807\u8F74\u7EBF\r\n    progress: {\r\n      // \u9ED8\u8BA4\u663E\u793A\uFF0C\u5C5E\u6027show\u63A7\u5236\u663E\u793A\u4E0E\u5426\r\n      show: false,\r\n      overlap: true,\r\n      width: 10,\r\n      roundCap: false,\r\n      clip: true\r\n    },\r\n    // \u5206\u9694\u7EBF\r\n    splitLine: {\r\n      // \u9ED8\u8BA4\u663E\u793A\uFF0C\u5C5E\u6027show\u63A7\u5236\u663E\u793A\u4E0E\u5426\r\n      show: true,\r\n      // \u5C5E\u6027length\u63A7\u5236\u7EBF\u957F\r\n      length: 10,\r\n      distance: 10,\r\n      // \u5C5E\u6027lineStyle\uFF08\u8BE6\u89C1lineStyle\uFF09\u63A7\u5236\u7EBF\u6761\u6837\u5F0F\r\n      lineStyle: {\r\n        color: '#63677A',\r\n        width: 3,\r\n        type: 'solid'\r\n      }\r\n    },\r\n    // \u5750\u6807\u8F74\u5C0F\u6807\u8BB0\r\n    axisTick: {\r\n      // \u5C5E\u6027show\u63A7\u5236\u663E\u793A\u4E0E\u5426\uFF0C\u9ED8\u8BA4\u4E0D\u663E\u793A\r\n      show: true,\r\n      // \u6BCF\u4EFDsplit\u7EC6\u5206\u591A\u5C11\u6BB5\r\n      splitNumber: 5,\r\n      // \u5C5E\u6027length\u63A7\u5236\u7EBF\u957F\r\n      length: 6,\r\n      distance: 10,\r\n      // \u5C5E\u6027lineStyle\u63A7\u5236\u7EBF\u6761\u6837\u5F0F\r\n      lineStyle: {\r\n        color: '#63677A',\r\n        width: 1,\r\n        type: 'solid'\r\n      }\r\n    },\r\n    axisLabel: {\r\n      show: true,\r\n      distance: 15,\r\n      // formatter: null,\r\n      color: '#464646',\r\n      fontSize: 12,\r\n      rotate: 0\r\n    },\r\n    pointer: {\r\n      icon: null,\r\n      offsetCenter: [0, 0],\r\n      show: true,\r\n      showAbove: true,\r\n      length: '60%',\r\n      width: 6,\r\n      keepAspect: false\r\n    },\r\n    anchor: {\r\n      show: false,\r\n      showAbove: false,\r\n      size: 6,\r\n      icon: 'circle',\r\n      offsetCenter: [0, 0],\r\n      keepAspect: false,\r\n      itemStyle: {\r\n        color: '#fff',\r\n        borderWidth: 0,\r\n        borderColor: '#5470c6'\r\n      }\r\n    },\r\n    title: {\r\n      show: true,\r\n      // x, y\uFF0C\u5355\u4F4Dpx\r\n      offsetCenter: [0, '20%'],\r\n      // \u5176\u4F59\u5C5E\u6027\u9ED8\u8BA4\u4F7F\u7528\u5168\u5C40\u6587\u672C\u6837\u5F0F\uFF0C\u8BE6\u89C1TEXTSTYLE\r\n      color: '#464646',\r\n      fontSize: 16,\r\n      valueAnimation: false\r\n    },\r\n    detail: {\r\n      show: true,\r\n      backgroundColor: 'rgba(0,0,0,0)',\r\n      borderWidth: 0,\r\n      borderColor: '#ccc',\r\n      width: 100,\r\n      height: null,\r\n      padding: [5, 10],\r\n      // x, y\uFF0C\u5355\u4F4Dpx\r\n      offsetCenter: [0, '40%'],\r\n      // formatter: null,\r\n      // \u5176\u4F59\u5C5E\u6027\u9ED8\u8BA4\u4F7F\u7528\u5168\u5C40\u6587\u672C\u6837\u5F0F\uFF0C\u8BE6\u89C1TEXTSTYLE\r\n      color: '#464646',\r\n      fontSize: 30,\r\n      fontWeight: 'bold',\r\n      lineHeight: 30,\r\n      valueAnimation: false\r\n    }\r\n  };\r\n  return GaugeSeriesModel;\r\n}(SeriesModel);\r\n\r\nexport default GaugeSeriesModel;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport GaugeView from './GaugeView.js';\r\nimport GaugeSeriesModel from './GaugeSeries.js';\r\nexport function install(registers) {\r\n  registers.registerChartView(GaugeView);\r\n  registers.registerSeriesModel(GaugeSeriesModel);\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport * as graphic from '../../util/graphic.js';\r\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\r\nimport ChartView from '../../view/Chart.js';\r\nimport { setLabelLineStyle, getLabelLineStatesModels } from '../../label/labelGuideHelper.js';\r\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\r\nimport { saveOldStyle } from '../../animation/basicTransition.js';\r\nvar opacityAccessPath = ['itemStyle', 'opacity'];\r\n/**\r\n * Piece of pie including Sector, Label, LabelLine\r\n */\r\n\r\nvar FunnelPiece =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(FunnelPiece, _super);\r\n\r\n  function FunnelPiece(data, idx) {\r\n    var _this = _super.call(this) || this;\r\n\r\n    var polygon = _this;\r\n    var labelLine = new graphic.Polyline();\r\n    var text = new graphic.Text();\r\n    polygon.setTextContent(text);\r\n\r\n    _this.setTextGuideLine(labelLine);\r\n\r\n    _this.updateData(data, idx, true);\r\n\r\n    return _this;\r\n  }\r\n\r\n  FunnelPiece.prototype.updateData = function (data, idx, firstCreate) {\r\n    var polygon = this;\r\n    var seriesModel = data.hostModel;\r\n    var itemModel = data.getItemModel(idx);\r\n    var layout = data.getItemLayout(idx);\r\n    var emphasisModel = itemModel.getModel('emphasis');\r\n    var opacity = itemModel.get(opacityAccessPath);\r\n    opacity = opacity == null ? 1 : opacity;\r\n\r\n    if (!firstCreate) {\r\n      saveOldStyle(polygon);\r\n    } // Update common style\r\n\r\n\r\n    polygon.useStyle(data.getItemVisual(idx, 'style'));\r\n    polygon.style.lineJoin = 'round';\r\n\r\n    if (firstCreate) {\r\n      polygon.setShape({\r\n        points: layout.points\r\n      });\r\n      polygon.style.opacity = 0;\r\n      graphic.initProps(polygon, {\r\n        style: {\r\n          opacity: opacity\r\n        }\r\n      }, seriesModel, idx);\r\n    } else {\r\n      graphic.updateProps(polygon, {\r\n        style: {\r\n          opacity: opacity\r\n        },\r\n        shape: {\r\n          points: layout.points\r\n        }\r\n      }, seriesModel, idx);\r\n    }\r\n\r\n    setStatesStylesFromModel(polygon, itemModel);\r\n\r\n    this._updateLabel(data, idx);\r\n\r\n    toggleHoverEmphasis(this, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\r\n  };\r\n\r\n  FunnelPiece.prototype._updateLabel = function (data, idx) {\r\n    var polygon = this;\r\n    var labelLine = this.getTextGuideLine();\r\n    var labelText = polygon.getTextContent();\r\n    var seriesModel = data.hostModel;\r\n    var itemModel = data.getItemModel(idx);\r\n    var layout = data.getItemLayout(idx);\r\n    var labelLayout = layout.label;\r\n    var style = data.getItemVisual(idx, 'style');\r\n    var visualColor = style.fill;\r\n    setLabelStyle( // position will not be used in setLabelStyle\r\n    labelText, getLabelStatesModels(itemModel), {\r\n      labelFetcher: data.hostModel,\r\n      labelDataIndex: idx,\r\n      defaultOpacity: style.opacity,\r\n      defaultText: data.getName(idx)\r\n    }, {\r\n      normal: {\r\n        align: labelLayout.textAlign,\r\n        verticalAlign: labelLayout.verticalAlign\r\n      }\r\n    });\r\n    polygon.setTextConfig({\r\n      local: true,\r\n      inside: !!labelLayout.inside,\r\n      insideStroke: visualColor,\r\n      // insideFill: 'auto',\r\n      outsideFill: visualColor\r\n    });\r\n    var linePoints = labelLayout.linePoints;\r\n    labelLine.setShape({\r\n      points: linePoints\r\n    });\r\n    polygon.textGuideLineConfig = {\r\n      anchor: linePoints ? new graphic.Point(linePoints[0][0], linePoints[0][1]) : null\r\n    }; // Make sure update style on labelText after setLabelStyle.\r\n    // Because setLabelStyle will replace a new style on it.\r\n\r\n    graphic.updateProps(labelText, {\r\n      style: {\r\n        x: labelLayout.x,\r\n        y: labelLayout.y\r\n      }\r\n    }, seriesModel, idx);\r\n    labelText.attr({\r\n      rotation: labelLayout.rotation,\r\n      originX: labelLayout.x,\r\n      originY: labelLayout.y,\r\n      z2: 10\r\n    });\r\n    setLabelLineStyle(polygon, getLabelLineStatesModels(itemModel), {\r\n      // Default use item visual color\r\n      stroke: visualColor\r\n    });\r\n  };\r\n\r\n  return FunnelPiece;\r\n}(graphic.Polygon);\r\n\r\nvar FunnelView =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(FunnelView, _super);\r\n\r\n  function FunnelView() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = FunnelView.type;\r\n    _this.ignoreLabelLineUpdate = true;\r\n    return _this;\r\n  }\r\n\r\n  FunnelView.prototype.render = function (seriesModel, ecModel, api) {\r\n    var data = seriesModel.getData();\r\n    var oldData = this._data;\r\n    var group = this.group;\r\n    data.diff(oldData).add(function (idx) {\r\n      var funnelPiece = new FunnelPiece(data, idx);\r\n      data.setItemGraphicEl(idx, funnelPiece);\r\n      group.add(funnelPiece);\r\n    }).update(function (newIdx, oldIdx) {\r\n      var piece = oldData.getItemGraphicEl(oldIdx);\r\n      piece.updateData(data, newIdx);\r\n      group.add(piece);\r\n      data.setItemGraphicEl(newIdx, piece);\r\n    }).remove(function (idx) {\r\n      var piece = oldData.getItemGraphicEl(idx);\r\n      graphic.removeElementWithFadeOut(piece, seriesModel, idx);\r\n    }).execute();\r\n    this._data = data;\r\n  };\r\n\r\n  FunnelView.prototype.remove = function () {\r\n    this.group.removeAll();\r\n    this._data = null;\r\n  };\r\n\r\n  FunnelView.prototype.dispose = function () {};\r\n\r\n  FunnelView.type = 'funnel';\r\n  return FunnelView;\r\n}(ChartView);\r\n\r\nexport default FunnelView;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport createSeriesDataSimply from '../helper/createSeriesDataSimply.js';\r\nimport { defaultEmphasis } from '../../util/model.js';\r\nimport { makeSeriesEncodeForNameBased } from '../../data/helper/sourceHelper.js';\r\nimport LegendVisualProvider from '../../visual/LegendVisualProvider.js';\r\nimport SeriesModel from '../../model/Series.js';\r\n\r\nvar FunnelSeriesModel =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(FunnelSeriesModel, _super);\r\n\r\n  function FunnelSeriesModel() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = FunnelSeriesModel.type;\r\n    return _this;\r\n  }\r\n\r\n  FunnelSeriesModel.prototype.init = function (option) {\r\n    _super.prototype.init.apply(this, arguments); // Enable legend selection for each data item\r\n    // Use a function instead of direct access because data reference may changed\r\n\r\n\r\n    this.legendVisualProvider = new LegendVisualProvider(zrUtil.bind(this.getData, this), zrUtil.bind(this.getRawData, this)); // Extend labelLine emphasis\r\n\r\n    this._defaultLabelLine(option);\r\n  };\r\n\r\n  FunnelSeriesModel.prototype.getInitialData = function (option, ecModel) {\r\n    return createSeriesDataSimply(this, {\r\n      coordDimensions: ['value'],\r\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForNameBased, this)\r\n    });\r\n  };\r\n\r\n  FunnelSeriesModel.prototype._defaultLabelLine = function (option) {\r\n    // Extend labelLine emphasis\r\n    defaultEmphasis(option, 'labelLine', ['show']);\r\n    var labelLineNormalOpt = option.labelLine;\r\n    var labelLineEmphasisOpt = option.emphasis.labelLine; // Not show label line if `label.normal.show = false`\r\n\r\n    labelLineNormalOpt.show = labelLineNormalOpt.show && option.label.show;\r\n    labelLineEmphasisOpt.show = labelLineEmphasisOpt.show && option.emphasis.label.show;\r\n  }; // Overwrite\r\n\r\n\r\n  FunnelSeriesModel.prototype.getDataParams = function (dataIndex) {\r\n    var data = this.getData();\r\n\r\n    var params = _super.prototype.getDataParams.call(this, dataIndex);\r\n\r\n    var valueDim = data.mapDimension('value');\r\n    var sum = data.getSum(valueDim); // Percent is 0 if sum is 0\r\n\r\n    params.percent = !sum ? 0 : +(data.get(valueDim, dataIndex) / sum * 100).toFixed(2);\r\n    params.$vars.push('percent');\r\n    return params;\r\n  };\r\n\r\n  FunnelSeriesModel.type = 'series.funnel';\r\n  FunnelSeriesModel.defaultOption = {\r\n    // zlevel: 0,                  // \u4E00\u7EA7\u5C42\u53E0\r\n    z: 2,\r\n    legendHoverLink: true,\r\n    colorBy: 'data',\r\n    left: 80,\r\n    top: 60,\r\n    right: 80,\r\n    bottom: 60,\r\n    // width: {totalWidth} - left - right,\r\n    // height: {totalHeight} - top - bottom,\r\n    // \u9ED8\u8BA4\u53D6\u6570\u636E\u6700\u5C0F\u6700\u5927\u503C\r\n    // min: 0,\r\n    // max: 100,\r\n    minSize: '0%',\r\n    maxSize: '100%',\r\n    sort: 'descending',\r\n    orient: 'vertical',\r\n    gap: 0,\r\n    funnelAlign: 'center',\r\n    label: {\r\n      show: true,\r\n      position: 'outer' // formatter: \u6807\u7B7E\u6587\u672C\u683C\u5F0F\u5668\uFF0C\u540CTooltip.formatter\uFF0C\u4E0D\u652F\u6301\u5F02\u6B65\u56DE\u8C03\r\n\r\n    },\r\n    labelLine: {\r\n      show: true,\r\n      length: 20,\r\n      lineStyle: {\r\n        // color: \u5404\u5F02,\r\n        width: 1\r\n      }\r\n    },\r\n    itemStyle: {\r\n      // color: \u5404\u5F02,\r\n      borderColor: '#fff',\r\n      borderWidth: 1\r\n    },\r\n    emphasis: {\r\n      label: {\r\n        show: true\r\n      }\r\n    },\r\n    select: {\r\n      itemStyle: {\r\n        borderColor: '#212121'\r\n      }\r\n    }\r\n  };\r\n  return FunnelSeriesModel;\r\n}(SeriesModel);\r\n\r\nexport default FunnelSeriesModel;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as layout from '../../util/layout.js';\r\nimport { parsePercent, linearMap } from '../../util/number.js';\r\nimport { isFunction } from 'zrender/lib/core/util.js';\r\n\r\nfunction getViewRect(seriesModel, api) {\r\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\r\n    width: api.getWidth(),\r\n    height: api.getHeight()\r\n  });\r\n}\r\n\r\nfunction getSortedIndices(data, sort) {\r\n  var valueDim = data.mapDimension('value');\r\n  var valueArr = data.mapArray(valueDim, function (val) {\r\n    return val;\r\n  });\r\n  var indices = [];\r\n  var isAscending = sort === 'ascending';\r\n\r\n  for (var i = 0, len = data.count(); i < len; i++) {\r\n    indices[i] = i;\r\n  } // Add custom sortable function & none sortable opetion by \"options.sort\"\r\n\r\n\r\n  if (isFunction(sort)) {\r\n    indices.sort(sort);\r\n  } else if (sort !== 'none') {\r\n    indices.sort(function (a, b) {\r\n      return isAscending ? valueArr[a] - valueArr[b] : valueArr[b] - valueArr[a];\r\n    });\r\n  }\r\n\r\n  return indices;\r\n}\r\n\r\nfunction labelLayout(data) {\r\n  var seriesModel = data.hostModel;\r\n  var orient = seriesModel.get('orient');\r\n  data.each(function (idx) {\r\n    var itemModel = data.getItemModel(idx);\r\n    var labelModel = itemModel.getModel('label');\r\n    var labelPosition = labelModel.get('position');\r\n    var labelLineModel = itemModel.getModel('labelLine');\r\n    var layout = data.getItemLayout(idx);\r\n    var points = layout.points;\r\n    var isLabelInside = labelPosition === 'inner' || labelPosition === 'inside' || labelPosition === 'center' || labelPosition === 'insideLeft' || labelPosition === 'insideRight';\r\n    var textAlign;\r\n    var textX;\r\n    var textY;\r\n    var linePoints;\r\n\r\n    if (isLabelInside) {\r\n      if (labelPosition === 'insideLeft') {\r\n        textX = (points[0][0] + points[3][0]) / 2 + 5;\r\n        textY = (points[0][1] + points[3][1]) / 2;\r\n        textAlign = 'left';\r\n      } else if (labelPosition === 'insideRight') {\r\n        textX = (points[1][0] + points[2][0]) / 2 - 5;\r\n        textY = (points[1][1] + points[2][1]) / 2;\r\n        textAlign = 'right';\r\n      } else {\r\n        textX = (points[0][0] + points[1][0] + points[2][0] + points[3][0]) / 4;\r\n        textY = (points[0][1] + points[1][1] + points[2][1] + points[3][1]) / 4;\r\n        textAlign = 'center';\r\n      }\r\n\r\n      linePoints = [[textX, textY], [textX, textY]];\r\n    } else {\r\n      var x1 = void 0;\r\n      var y1 = void 0;\r\n      var x2 = void 0;\r\n      var y2 = void 0;\r\n      var labelLineLen = labelLineModel.get('length');\r\n\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        if (orient === 'vertical' && ['top', 'bottom'].indexOf(labelPosition) > -1) {\r\n          labelPosition = 'left';\r\n          console.warn('Position error: Funnel chart on vertical orient dose not support top and bottom.');\r\n        }\r\n\r\n        if (orient === 'horizontal' && ['left', 'right'].indexOf(labelPosition) > -1) {\r\n          labelPosition = 'bottom';\r\n          console.warn('Position error: Funnel chart on horizontal orient dose not support left and right.');\r\n        }\r\n      }\r\n\r\n      if (labelPosition === 'left') {\r\n        // Left side\r\n        x1 = (points[3][0] + points[0][0]) / 2;\r\n        y1 = (points[3][1] + points[0][1]) / 2;\r\n        x2 = x1 - labelLineLen;\r\n        textX = x2 - 5;\r\n        textAlign = 'right';\r\n      } else if (labelPosition === 'right') {\r\n        // Right side\r\n        x1 = (points[1][0] + points[2][0]) / 2;\r\n        y1 = (points[1][1] + points[2][1]) / 2;\r\n        x2 = x1 + labelLineLen;\r\n        textX = x2 + 5;\r\n        textAlign = 'left';\r\n      } else if (labelPosition === 'top') {\r\n        // Top side\r\n        x1 = (points[3][0] + points[0][0]) / 2;\r\n        y1 = (points[3][1] + points[0][1]) / 2;\r\n        y2 = y1 - labelLineLen;\r\n        textY = y2 - 5;\r\n        textAlign = 'center';\r\n      } else if (labelPosition === 'bottom') {\r\n        // Bottom side\r\n        x1 = (points[1][0] + points[2][0]) / 2;\r\n        y1 = (points[1][1] + points[2][1]) / 2;\r\n        y2 = y1 + labelLineLen;\r\n        textY = y2 + 5;\r\n        textAlign = 'center';\r\n      } else if (labelPosition === 'rightTop') {\r\n        // RightTop side\r\n        x1 = orient === 'horizontal' ? points[3][0] : points[1][0];\r\n        y1 = orient === 'horizontal' ? points[3][1] : points[1][1];\r\n\r\n        if (orient === 'horizontal') {\r\n          y2 = y1 - labelLineLen;\r\n          textY = y2 - 5;\r\n          textAlign = 'center';\r\n        } else {\r\n          x2 = x1 + labelLineLen;\r\n          textX = x2 + 5;\r\n          textAlign = 'top';\r\n        }\r\n      } else if (labelPosition === 'rightBottom') {\r\n        // RightBottom side\r\n        x1 = points[2][0];\r\n        y1 = points[2][1];\r\n\r\n        if (orient === 'horizontal') {\r\n          y2 = y1 + labelLineLen;\r\n          textY = y2 + 5;\r\n          textAlign = 'center';\r\n        } else {\r\n          x2 = x1 + labelLineLen;\r\n          textX = x2 + 5;\r\n          textAlign = 'bottom';\r\n        }\r\n      } else if (labelPosition === 'leftTop') {\r\n        // LeftTop side\r\n        x1 = points[0][0];\r\n        y1 = orient === 'horizontal' ? points[0][1] : points[1][1];\r\n\r\n        if (orient === 'horizontal') {\r\n          y2 = y1 - labelLineLen;\r\n          textY = y2 - 5;\r\n          textAlign = 'center';\r\n        } else {\r\n          x2 = x1 - labelLineLen;\r\n          textX = x2 - 5;\r\n          textAlign = 'right';\r\n        }\r\n      } else if (labelPosition === 'leftBottom') {\r\n        // LeftBottom side\r\n        x1 = orient === 'horizontal' ? points[1][0] : points[3][0];\r\n        y1 = orient === 'horizontal' ? points[1][1] : points[2][1];\r\n\r\n        if (orient === 'horizontal') {\r\n          y2 = y1 + labelLineLen;\r\n          textY = y2 + 5;\r\n          textAlign = 'center';\r\n        } else {\r\n          x2 = x1 - labelLineLen;\r\n          textX = x2 - 5;\r\n          textAlign = 'right';\r\n        }\r\n      } else {\r\n        // Right side or Bottom side\r\n        x1 = (points[1][0] + points[2][0]) / 2;\r\n        y1 = (points[1][1] + points[2][1]) / 2;\r\n\r\n        if (orient === 'horizontal') {\r\n          y2 = y1 + labelLineLen;\r\n          textY = y2 + 5;\r\n          textAlign = 'center';\r\n        } else {\r\n          x2 = x1 + labelLineLen;\r\n          textX = x2 + 5;\r\n          textAlign = 'left';\r\n        }\r\n      }\r\n\r\n      if (orient === 'horizontal') {\r\n        x2 = x1;\r\n        textX = x2;\r\n      } else {\r\n        y2 = y1;\r\n        textY = y2;\r\n      }\r\n\r\n      linePoints = [[x1, y1], [x2, y2]];\r\n    }\r\n\r\n    layout.label = {\r\n      linePoints: linePoints,\r\n      x: textX,\r\n      y: textY,\r\n      verticalAlign: 'middle',\r\n      textAlign: textAlign,\r\n      inside: isLabelInside\r\n    };\r\n  });\r\n}\r\n\r\nexport default function funnelLayout(ecModel, api) {\r\n  ecModel.eachSeriesByType('funnel', function (seriesModel) {\r\n    var data = seriesModel.getData();\r\n    var valueDim = data.mapDimension('value');\r\n    var sort = seriesModel.get('sort');\r\n    var viewRect = getViewRect(seriesModel, api);\r\n    var orient = seriesModel.get('orient');\r\n    var viewWidth = viewRect.width;\r\n    var viewHeight = viewRect.height;\r\n    var indices = getSortedIndices(data, sort);\r\n    var x = viewRect.x;\r\n    var y = viewRect.y;\r\n    var sizeExtent = orient === 'horizontal' ? [parsePercent(seriesModel.get('minSize'), viewHeight), parsePercent(seriesModel.get('maxSize'), viewHeight)] : [parsePercent(seriesModel.get('minSize'), viewWidth), parsePercent(seriesModel.get('maxSize'), viewWidth)];\r\n    var dataExtent = data.getDataExtent(valueDim);\r\n    var min = seriesModel.get('min');\r\n    var max = seriesModel.get('max');\r\n\r\n    if (min == null) {\r\n      min = Math.min(dataExtent[0], 0);\r\n    }\r\n\r\n    if (max == null) {\r\n      max = dataExtent[1];\r\n    }\r\n\r\n    var funnelAlign = seriesModel.get('funnelAlign');\r\n    var gap = seriesModel.get('gap');\r\n    var viewSize = orient === 'horizontal' ? viewWidth : viewHeight;\r\n    var itemSize = (viewSize - gap * (data.count() - 1)) / data.count();\r\n\r\n    var getLinePoints = function (idx, offset) {\r\n      // End point index is data.count() and we assign it 0\r\n      if (orient === 'horizontal') {\r\n        var val_1 = data.get(valueDim, idx) || 0;\r\n        var itemHeight = linearMap(val_1, [min, max], sizeExtent, true);\r\n        var y0 = void 0;\r\n\r\n        switch (funnelAlign) {\r\n          case 'top':\r\n            y0 = y;\r\n            break;\r\n\r\n          case 'center':\r\n            y0 = y + (viewHeight - itemHeight) / 2;\r\n            break;\r\n\r\n          case 'bottom':\r\n            y0 = y + (viewHeight - itemHeight);\r\n            break;\r\n        }\r\n\r\n        return [[offset, y0], [offset, y0 + itemHeight]];\r\n      }\r\n\r\n      var val = data.get(valueDim, idx) || 0;\r\n      var itemWidth = linearMap(val, [min, max], sizeExtent, true);\r\n      var x0;\r\n\r\n      switch (funnelAlign) {\r\n        case 'left':\r\n          x0 = x;\r\n          break;\r\n\r\n        case 'center':\r\n          x0 = x + (viewWidth - itemWidth) / 2;\r\n          break;\r\n\r\n        case 'right':\r\n          x0 = x + viewWidth - itemWidth;\r\n          break;\r\n      }\r\n\r\n      return [[x0, offset], [x0 + itemWidth, offset]];\r\n    };\r\n\r\n    if (sort === 'ascending') {\r\n      // From bottom to top\r\n      itemSize = -itemSize;\r\n      gap = -gap;\r\n\r\n      if (orient === 'horizontal') {\r\n        x += viewWidth;\r\n      } else {\r\n        y += viewHeight;\r\n      }\r\n\r\n      indices = indices.reverse();\r\n    }\r\n\r\n    for (var i = 0; i < indices.length; i++) {\r\n      var idx = indices[i];\r\n      var nextIdx = indices[i + 1];\r\n      var itemModel = data.getItemModel(idx);\r\n\r\n      if (orient === 'horizontal') {\r\n        var width = itemModel.get(['itemStyle', 'width']);\r\n\r\n        if (width == null) {\r\n          width = itemSize;\r\n        } else {\r\n          width = parsePercent(width, viewWidth);\r\n\r\n          if (sort === 'ascending') {\r\n            width = -width;\r\n          }\r\n        }\r\n\r\n        var start = getLinePoints(idx, x);\r\n        var end = getLinePoints(nextIdx, x + width);\r\n        x += width + gap;\r\n        data.setItemLayout(idx, {\r\n          points: start.concat(end.slice().reverse())\r\n        });\r\n      } else {\r\n        var height = itemModel.get(['itemStyle', 'height']);\r\n\r\n        if (height == null) {\r\n          height = itemSize;\r\n        } else {\r\n          height = parsePercent(height, viewHeight);\r\n\r\n          if (sort === 'ascending') {\r\n            height = -height;\r\n          }\r\n        }\r\n\r\n        var start = getLinePoints(idx, y);\r\n        var end = getLinePoints(nextIdx, y + height);\r\n        y += height + gap;\r\n        data.setItemLayout(idx, {\r\n          points: start.concat(end.slice().reverse())\r\n        });\r\n      }\r\n    }\r\n\r\n    labelLayout(data);\r\n  });\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport FunnelView from './FunnelView.js';\r\nimport FunnelSeriesModel from './FunnelSeries.js';\r\nimport funnelLayout from './funnelLayout.js';\r\nimport dataFilter from '../../processor/dataFilter.js';\r\nexport function install(registers) {\r\n  registers.registerChartView(FunnelView);\r\n  registers.registerSeriesModel(FunnelSeriesModel);\r\n  registers.registerLayout(funnelLayout);\r\n  registers.registerProcessor(dataFilter('funnel'));\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport * as graphic from '../../util/graphic.js';\r\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\r\nimport ChartView from '../../view/Chart.js';\r\nimport { numericToNumber } from '../../util/number.js';\r\nimport { eqNaN } from 'zrender/lib/core/util.js';\r\nimport { saveOldStyle } from '../../animation/basicTransition.js';\r\nvar DEFAULT_SMOOTH = 0.3;\r\n\r\nvar ParallelView =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(ParallelView, _super);\r\n\r\n  function ParallelView() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = ParallelView.type;\r\n    _this._dataGroup = new graphic.Group();\r\n    _this._initialized = false;\r\n    return _this;\r\n  }\r\n\r\n  ParallelView.prototype.init = function () {\r\n    this.group.add(this._dataGroup);\r\n  };\r\n  /**\r\n   * @override\r\n   */\r\n\r\n\r\n  ParallelView.prototype.render = function (seriesModel, ecModel, api, payload) {\r\n    // Clear previously rendered progressive elements.\r\n    this._progressiveEls = null;\r\n    var dataGroup = this._dataGroup;\r\n    var data = seriesModel.getData();\r\n    var oldData = this._data;\r\n    var coordSys = seriesModel.coordinateSystem;\r\n    var dimensions = coordSys.dimensions;\r\n    var seriesScope = makeSeriesScope(seriesModel);\r\n    data.diff(oldData).add(add).update(update).remove(remove).execute();\r\n\r\n    function add(newDataIndex) {\r\n      var line = addEl(data, dataGroup, newDataIndex, dimensions, coordSys);\r\n      updateElCommon(line, data, newDataIndex, seriesScope);\r\n    }\r\n\r\n    function update(newDataIndex, oldDataIndex) {\r\n      var line = oldData.getItemGraphicEl(oldDataIndex);\r\n      var points = createLinePoints(data, newDataIndex, dimensions, coordSys);\r\n      data.setItemGraphicEl(newDataIndex, line);\r\n      graphic.updateProps(line, {\r\n        shape: {\r\n          points: points\r\n        }\r\n      }, seriesModel, newDataIndex);\r\n      saveOldStyle(line);\r\n      updateElCommon(line, data, newDataIndex, seriesScope);\r\n    }\r\n\r\n    function remove(oldDataIndex) {\r\n      var line = oldData.getItemGraphicEl(oldDataIndex);\r\n      dataGroup.remove(line);\r\n    } // First create\r\n\r\n\r\n    if (!this._initialized) {\r\n      this._initialized = true;\r\n      var clipPath = createGridClipShape(coordSys, seriesModel, function () {\r\n        // Callback will be invoked immediately if there is no animation\r\n        setTimeout(function () {\r\n          dataGroup.removeClipPath();\r\n        });\r\n      });\r\n      dataGroup.setClipPath(clipPath);\r\n    }\r\n\r\n    this._data = data;\r\n  };\r\n\r\n  ParallelView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\r\n    this._initialized = true;\r\n    this._data = null;\r\n\r\n    this._dataGroup.removeAll();\r\n  };\r\n\r\n  ParallelView.prototype.incrementalRender = function (taskParams, seriesModel, ecModel) {\r\n    var data = seriesModel.getData();\r\n    var coordSys = seriesModel.coordinateSystem;\r\n    var dimensions = coordSys.dimensions;\r\n    var seriesScope = makeSeriesScope(seriesModel);\r\n    var progressiveEls = this._progressiveEls = [];\r\n\r\n    for (var dataIndex = taskParams.start; dataIndex < taskParams.end; dataIndex++) {\r\n      var line = addEl(data, this._dataGroup, dataIndex, dimensions, coordSys);\r\n      line.incremental = true;\r\n      updateElCommon(line, data, dataIndex, seriesScope);\r\n      progressiveEls.push(line);\r\n    }\r\n  };\r\n\r\n  ParallelView.prototype.remove = function () {\r\n    this._dataGroup && this._dataGroup.removeAll();\r\n    this._data = null;\r\n  };\r\n\r\n  ParallelView.type = 'parallel';\r\n  return ParallelView;\r\n}(ChartView);\r\n\r\nfunction createGridClipShape(coordSys, seriesModel, cb) {\r\n  var parallelModel = coordSys.model;\r\n  var rect = coordSys.getRect();\r\n  var rectEl = new graphic.Rect({\r\n    shape: {\r\n      x: rect.x,\r\n      y: rect.y,\r\n      width: rect.width,\r\n      height: rect.height\r\n    }\r\n  });\r\n  var dim = parallelModel.get('layout') === 'horizontal' ? 'width' : 'height';\r\n  rectEl.setShape(dim, 0);\r\n  graphic.initProps(rectEl, {\r\n    shape: {\r\n      width: rect.width,\r\n      height: rect.height\r\n    }\r\n  }, seriesModel, cb);\r\n  return rectEl;\r\n}\r\n\r\nfunction createLinePoints(data, dataIndex, dimensions, coordSys) {\r\n  var points = [];\r\n\r\n  for (var i = 0; i < dimensions.length; i++) {\r\n    var dimName = dimensions[i];\r\n    var value = data.get(data.mapDimension(dimName), dataIndex);\r\n\r\n    if (!isEmptyValue(value, coordSys.getAxis(dimName).type)) {\r\n      points.push(coordSys.dataToPoint(value, dimName));\r\n    }\r\n  }\r\n\r\n  return points;\r\n}\r\n\r\nfunction addEl(data, dataGroup, dataIndex, dimensions, coordSys) {\r\n  var points = createLinePoints(data, dataIndex, dimensions, coordSys);\r\n  var line = new graphic.Polyline({\r\n    shape: {\r\n      points: points\r\n    },\r\n    // silent: true,\r\n    z2: 10\r\n  });\r\n  dataGroup.add(line);\r\n  data.setItemGraphicEl(dataIndex, line);\r\n  return line;\r\n}\r\n\r\nfunction makeSeriesScope(seriesModel) {\r\n  var smooth = seriesModel.get('smooth', true);\r\n  smooth === true && (smooth = DEFAULT_SMOOTH);\r\n  smooth = numericToNumber(smooth);\r\n  eqNaN(smooth) && (smooth = 0);\r\n  return {\r\n    smooth: smooth\r\n  };\r\n}\r\n\r\nfunction updateElCommon(el, data, dataIndex, seriesScope) {\r\n  el.useStyle(data.getItemVisual(dataIndex, 'style'));\r\n  el.style.fill = null;\r\n  el.setShape('smooth', seriesScope.smooth);\r\n  var itemModel = data.getItemModel(dataIndex);\r\n  var emphasisModel = itemModel.getModel('emphasis');\r\n  setStatesStylesFromModel(el, itemModel, 'lineStyle');\r\n  toggleHoverEmphasis(el, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\r\n} // function simpleDiff(oldData, newData, dimensions) {\r\n//     let oldLen;\r\n//     if (!oldData\r\n//         || !oldData.__plProgressive\r\n//         || (oldLen = oldData.count()) !== newData.count()\r\n//     ) {\r\n//         return true;\r\n//     }\r\n//     let dimLen = dimensions.length;\r\n//     for (let i = 0; i < oldLen; i++) {\r\n//         for (let j = 0; j < dimLen; j++) {\r\n//             if (oldData.get(dimensions[j], i) !== newData.get(dimensions[j], i)) {\r\n//                 return true;\r\n//             }\r\n//         }\r\n//     }\r\n//     return false;\r\n// }\r\n// FIXME put in common util?\r\n\r\n\r\nfunction isEmptyValue(val, axisType) {\r\n  return axisType === 'category' ? val == null : val == null || isNaN(val); // axisType === 'value'\r\n}\r\n\r\nexport default ParallelView;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport { each, bind } from 'zrender/lib/core/util.js';\r\nimport SeriesModel from '../../model/Series.js';\r\nimport createSeriesData from '../helper/createSeriesData.js';\r\n\r\nvar ParallelSeriesModel =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(ParallelSeriesModel, _super);\r\n\r\n  function ParallelSeriesModel() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = ParallelSeriesModel.type;\r\n    _this.visualStyleAccessPath = 'lineStyle';\r\n    _this.visualDrawType = 'stroke';\r\n    return _this;\r\n  }\r\n\r\n  ParallelSeriesModel.prototype.getInitialData = function (option, ecModel) {\r\n    return createSeriesData(null, this, {\r\n      useEncodeDefaulter: bind(makeDefaultEncode, null, this)\r\n    });\r\n  };\r\n  /**\r\n   * User can get data raw indices on 'axisAreaSelected' event received.\r\n   *\r\n   * @return Raw indices\r\n   */\r\n\r\n\r\n  ParallelSeriesModel.prototype.getRawIndicesByActiveState = function (activeState) {\r\n    var coordSys = this.coordinateSystem;\r\n    var data = this.getData();\r\n    var indices = [];\r\n    coordSys.eachActiveState(data, function (theActiveState, dataIndex) {\r\n      if (activeState === theActiveState) {\r\n        indices.push(data.getRawIndex(dataIndex));\r\n      }\r\n    });\r\n    return indices;\r\n  };\r\n\r\n  ParallelSeriesModel.type = 'series.parallel';\r\n  ParallelSeriesModel.dependencies = ['parallel'];\r\n  ParallelSeriesModel.defaultOption = {\r\n    // zlevel: 0,\r\n    z: 2,\r\n    coordinateSystem: 'parallel',\r\n    parallelIndex: 0,\r\n    label: {\r\n      show: false\r\n    },\r\n    inactiveOpacity: 0.05,\r\n    activeOpacity: 1,\r\n    lineStyle: {\r\n      width: 1,\r\n      opacity: 0.45,\r\n      type: 'solid'\r\n    },\r\n    emphasis: {\r\n      label: {\r\n        show: false\r\n      }\r\n    },\r\n    progressive: 500,\r\n    smooth: false,\r\n    animationEasing: 'linear'\r\n  };\r\n  return ParallelSeriesModel;\r\n}(SeriesModel);\r\n\r\nfunction makeDefaultEncode(seriesModel) {\r\n  // The mapping of parallelAxis dimension to data dimension can\r\n  // be specified in parallelAxis.option.dim. For example, if\r\n  // parallelAxis.option.dim is 'dim3', it mapping to the third\r\n  // dimension of data. But `data.encode` has higher priority.\r\n  // Moreover, parallelModel.dimension should not be regarded as data\r\n  // dimensions. Consider dimensions = ['dim4', 'dim2', 'dim6'];\r\n  var parallelModel = seriesModel.ecModel.getComponent('parallel', seriesModel.get('parallelIndex'));\r\n\r\n  if (!parallelModel) {\r\n    return;\r\n  }\r\n\r\n  var encodeDefine = {};\r\n  each(parallelModel.dimensions, function (axisDim) {\r\n    var dataDimIndex = convertDimNameToNumber(axisDim);\r\n    encodeDefine[axisDim] = dataDimIndex;\r\n  });\r\n  return encodeDefine;\r\n}\r\n\r\nfunction convertDimNameToNumber(dimName) {\r\n  return +dimName.replace('dim', '');\r\n}\r\n\r\nexport default ParallelSeriesModel;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nvar opacityAccessPath = ['lineStyle', 'opacity'];\r\nvar parallelVisual = {\r\n  seriesType: 'parallel',\r\n  reset: function (seriesModel, ecModel) {\r\n    var coordSys = seriesModel.coordinateSystem;\r\n    var opacityMap = {\r\n      normal: seriesModel.get(['lineStyle', 'opacity']),\r\n      active: seriesModel.get('activeOpacity'),\r\n      inactive: seriesModel.get('inactiveOpacity')\r\n    };\r\n    return {\r\n      progress: function (params, data) {\r\n        coordSys.eachActiveState(data, function (activeState, dataIndex) {\r\n          var opacity = opacityMap[activeState];\r\n\r\n          if (activeState === 'normal' && data.hasItemOption) {\r\n            var itemOpacity = data.getItemModel(dataIndex).get(opacityAccessPath, true);\r\n            itemOpacity != null && (opacity = itemOpacity);\r\n          }\r\n\r\n          var existsStyle = data.ensureUniqueItemVisual(dataIndex, 'style');\r\n          existsStyle.opacity = opacity;\r\n        }, params.start, params.end);\r\n      }\r\n    };\r\n  }\r\n};\r\nexport default parallelVisual;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { use } from '../../extension.js';\r\nimport ParallelView from './ParallelView.js';\r\nimport ParallelSeriesModel from './ParallelSeries.js';\r\nimport parallelVisual from './parallelVisual.js';\r\nimport { install as installParallelComponent } from '../../component/parallel/install.js';\r\nexport function install(registers) {\r\n  use(installParallelComponent);\r\n  registers.registerChartView(ParallelView);\r\n  registers.registerSeriesModel(ParallelSeriesModel);\r\n  registers.registerVisual(registers.PRIORITY.VISUAL.BRUSH, parallelVisual);\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport * as graphic from '../../util/graphic.js';\r\nimport { enterEmphasis, leaveEmphasis, toggleHoverEmphasis, setStatesStylesFromModel } from '../../util/states.js';\r\nimport ChartView from '../../view/Chart.js';\r\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\r\nimport { getECData } from '../../util/innerStore.js';\r\nimport { isString } from 'zrender/lib/core/util.js';\r\n\r\nvar SankeyPathShape =\r\n/** @class */\r\nfunction () {\r\n  function SankeyPathShape() {\r\n    this.x1 = 0;\r\n    this.y1 = 0;\r\n    this.x2 = 0;\r\n    this.y2 = 0;\r\n    this.cpx1 = 0;\r\n    this.cpy1 = 0;\r\n    this.cpx2 = 0;\r\n    this.cpy2 = 0;\r\n    this.extent = 0;\r\n  }\r\n\r\n  return SankeyPathShape;\r\n}();\r\n\r\nvar SankeyPath =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(SankeyPath, _super);\r\n\r\n  function SankeyPath(opts) {\r\n    return _super.call(this, opts) || this;\r\n  }\r\n\r\n  SankeyPath.prototype.getDefaultShape = function () {\r\n    return new SankeyPathShape();\r\n  };\r\n\r\n  SankeyPath.prototype.buildPath = function (ctx, shape) {\r\n    var extent = shape.extent;\r\n    ctx.moveTo(shape.x1, shape.y1);\r\n    ctx.bezierCurveTo(shape.cpx1, shape.cpy1, shape.cpx2, shape.cpy2, shape.x2, shape.y2);\r\n\r\n    if (shape.orient === 'vertical') {\r\n      ctx.lineTo(shape.x2 + extent, shape.y2);\r\n      ctx.bezierCurveTo(shape.cpx2 + extent, shape.cpy2, shape.cpx1 + extent, shape.cpy1, shape.x1 + extent, shape.y1);\r\n    } else {\r\n      ctx.lineTo(shape.x2, shape.y2 + extent);\r\n      ctx.bezierCurveTo(shape.cpx2, shape.cpy2 + extent, shape.cpx1, shape.cpy1 + extent, shape.x1, shape.y1 + extent);\r\n    }\r\n\r\n    ctx.closePath();\r\n  };\r\n\r\n  SankeyPath.prototype.highlight = function () {\r\n    enterEmphasis(this);\r\n  };\r\n\r\n  SankeyPath.prototype.downplay = function () {\r\n    leaveEmphasis(this);\r\n  };\r\n\r\n  return SankeyPath;\r\n}(graphic.Path);\r\n\r\nvar SankeyView =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(SankeyView, _super);\r\n\r\n  function SankeyView() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = SankeyView.type;\r\n    _this._focusAdjacencyDisabled = false;\r\n    return _this;\r\n  }\r\n\r\n  SankeyView.prototype.render = function (seriesModel, ecModel, api) {\r\n    var sankeyView = this;\r\n    var graph = seriesModel.getGraph();\r\n    var group = this.group;\r\n    var layoutInfo = seriesModel.layoutInfo; // view width\r\n\r\n    var width = layoutInfo.width; // view height\r\n\r\n    var height = layoutInfo.height;\r\n    var nodeData = seriesModel.getData();\r\n    var edgeData = seriesModel.getData('edge');\r\n    var orient = seriesModel.get('orient');\r\n    this._model = seriesModel;\r\n    group.removeAll();\r\n    group.x = layoutInfo.x;\r\n    group.y = layoutInfo.y; // generate a bezire Curve for each edge\r\n\r\n    graph.eachEdge(function (edge) {\r\n      var curve = new SankeyPath();\r\n      var ecData = getECData(curve);\r\n      ecData.dataIndex = edge.dataIndex;\r\n      ecData.seriesIndex = seriesModel.seriesIndex;\r\n      ecData.dataType = 'edge';\r\n      var edgeModel = edge.getModel();\r\n      var lineStyleModel = edgeModel.getModel('lineStyle');\r\n      var curvature = lineStyleModel.get('curveness');\r\n      var n1Layout = edge.node1.getLayout();\r\n      var node1Model = edge.node1.getModel();\r\n      var dragX1 = node1Model.get('localX');\r\n      var dragY1 = node1Model.get('localY');\r\n      var n2Layout = edge.node2.getLayout();\r\n      var node2Model = edge.node2.getModel();\r\n      var dragX2 = node2Model.get('localX');\r\n      var dragY2 = node2Model.get('localY');\r\n      var edgeLayout = edge.getLayout();\r\n      var x1;\r\n      var y1;\r\n      var x2;\r\n      var y2;\r\n      var cpx1;\r\n      var cpy1;\r\n      var cpx2;\r\n      var cpy2;\r\n      curve.shape.extent = Math.max(1, edgeLayout.dy);\r\n      curve.shape.orient = orient;\r\n\r\n      if (orient === 'vertical') {\r\n        x1 = (dragX1 != null ? dragX1 * width : n1Layout.x) + edgeLayout.sy;\r\n        y1 = (dragY1 != null ? dragY1 * height : n1Layout.y) + n1Layout.dy;\r\n        x2 = (dragX2 != null ? dragX2 * width : n2Layout.x) + edgeLayout.ty;\r\n        y2 = dragY2 != null ? dragY2 * height : n2Layout.y;\r\n        cpx1 = x1;\r\n        cpy1 = y1 * (1 - curvature) + y2 * curvature;\r\n        cpx2 = x2;\r\n        cpy2 = y1 * curvature + y2 * (1 - curvature);\r\n      } else {\r\n        x1 = (dragX1 != null ? dragX1 * width : n1Layout.x) + n1Layout.dx;\r\n        y1 = (dragY1 != null ? dragY1 * height : n1Layout.y) + edgeLayout.sy;\r\n        x2 = dragX2 != null ? dragX2 * width : n2Layout.x;\r\n        y2 = (dragY2 != null ? dragY2 * height : n2Layout.y) + edgeLayout.ty;\r\n        cpx1 = x1 * (1 - curvature) + x2 * curvature;\r\n        cpy1 = y1;\r\n        cpx2 = x1 * curvature + x2 * (1 - curvature);\r\n        cpy2 = y2;\r\n      }\r\n\r\n      curve.setShape({\r\n        x1: x1,\r\n        y1: y1,\r\n        x2: x2,\r\n        y2: y2,\r\n        cpx1: cpx1,\r\n        cpy1: cpy1,\r\n        cpx2: cpx2,\r\n        cpy2: cpy2\r\n      });\r\n      curve.useStyle(lineStyleModel.getItemStyle()); // Special color, use source node color or target node color\r\n\r\n      switch (curve.style.fill) {\r\n        case 'source':\r\n          curve.style.fill = edge.node1.getVisual('color');\r\n          curve.style.decal = edge.node1.getVisual('style').decal;\r\n          break;\r\n\r\n        case 'target':\r\n          curve.style.fill = edge.node2.getVisual('color');\r\n          curve.style.decal = edge.node2.getVisual('style').decal;\r\n          break;\r\n\r\n        case 'gradient':\r\n          var sourceColor = edge.node1.getVisual('color');\r\n          var targetColor = edge.node2.getVisual('color');\r\n\r\n          if (isString(sourceColor) && isString(targetColor)) {\r\n            curve.style.fill = new graphic.LinearGradient(0, 0, +(orient === 'horizontal'), +(orient === 'vertical'), [{\r\n              color: sourceColor,\r\n              offset: 0\r\n            }, {\r\n              color: targetColor,\r\n              offset: 1\r\n            }]);\r\n          }\r\n\r\n      }\r\n\r\n      setLabelStyle(curve, getLabelStatesModels(edgeModel, 'edgeLabel'), {\r\n        labelFetcher: seriesModel,\r\n        labelDataIndex: edge.dataIndex,\r\n        defaultText: \"\" + edgeModel.get('value')\r\n      });\r\n      curve.setTextConfig({\r\n        position: 'inside'\r\n      });\r\n      var emphasisModel = edgeModel.getModel('emphasis');\r\n      setStatesStylesFromModel(curve, edgeModel, 'lineStyle', function (model) {\r\n        return model.getItemStyle();\r\n      });\r\n      group.add(curve);\r\n      edgeData.setItemGraphicEl(edge.dataIndex, curve);\r\n      var focus = emphasisModel.get('focus');\r\n      toggleHoverEmphasis(curve, focus === 'adjacency' ? edge.getAdjacentDataIndices() : focus, emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\r\n      getECData(curve).dataType = 'edge';\r\n    }); // Generate a rect for each node\r\n\r\n    graph.eachNode(function (node) {\r\n      var layout = node.getLayout();\r\n      var itemModel = node.getModel();\r\n      var dragX = itemModel.get('localX');\r\n      var dragY = itemModel.get('localY');\r\n      var emphasisModel = itemModel.getModel('emphasis');\r\n      var rect = new graphic.Rect({\r\n        shape: {\r\n          x: dragX != null ? dragX * width : layout.x,\r\n          y: dragY != null ? dragY * height : layout.y,\r\n          width: layout.dx,\r\n          height: layout.dy\r\n        },\r\n        style: itemModel.getModel('itemStyle').getItemStyle(),\r\n        z2: 10\r\n      });\r\n      setLabelStyle(rect, getLabelStatesModels(itemModel), {\r\n        labelFetcher: seriesModel,\r\n        labelDataIndex: node.dataIndex,\r\n        defaultText: node.id\r\n      });\r\n      rect.disableLabelAnimation = true;\r\n      rect.setStyle('fill', node.getVisual('color'));\r\n      rect.setStyle('decal', node.getVisual('style').decal);\r\n      setStatesStylesFromModel(rect, itemModel);\r\n      group.add(rect);\r\n      nodeData.setItemGraphicEl(node.dataIndex, rect);\r\n      getECData(rect).dataType = 'node';\r\n      var focus = emphasisModel.get('focus');\r\n      toggleHoverEmphasis(rect, focus === 'adjacency' ? node.getAdjacentDataIndices() : focus, emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\r\n    });\r\n    nodeData.eachItemGraphicEl(function (el, dataIndex) {\r\n      var itemModel = nodeData.getItemModel(dataIndex);\r\n\r\n      if (itemModel.get('draggable')) {\r\n        el.drift = function (dx, dy) {\r\n          sankeyView._focusAdjacencyDisabled = true;\r\n          this.shape.x += dx;\r\n          this.shape.y += dy;\r\n          this.dirty();\r\n          api.dispatchAction({\r\n            type: 'dragNode',\r\n            seriesId: seriesModel.id,\r\n            dataIndex: nodeData.getRawIndex(dataIndex),\r\n            localX: this.shape.x / width,\r\n            localY: this.shape.y / height\r\n          });\r\n        };\r\n\r\n        el.ondragend = function () {\r\n          sankeyView._focusAdjacencyDisabled = false;\r\n        };\r\n\r\n        el.draggable = true;\r\n        el.cursor = 'move';\r\n      }\r\n    });\r\n\r\n    if (!this._data && seriesModel.isAnimationEnabled()) {\r\n      group.setClipPath(createGridClipShape(group.getBoundingRect(), seriesModel, function () {\r\n        group.removeClipPath();\r\n      }));\r\n    }\r\n\r\n    this._data = seriesModel.getData();\r\n  };\r\n\r\n  SankeyView.prototype.dispose = function () {};\r\n\r\n  SankeyView.type = 'sankey';\r\n  return SankeyView;\r\n}(ChartView); // Add animation to the view\r\n\r\n\r\nfunction createGridClipShape(rect, seriesModel, cb) {\r\n  var rectEl = new graphic.Rect({\r\n    shape: {\r\n      x: rect.x - 10,\r\n      y: rect.y - 10,\r\n      width: 0,\r\n      height: rect.height + 20\r\n    }\r\n  });\r\n  graphic.initProps(rectEl, {\r\n    shape: {\r\n      width: rect.width + 20\r\n    }\r\n  }, seriesModel, cb);\r\n  return rectEl;\r\n}\r\n\r\nexport default SankeyView;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport SeriesModel from '../../model/Series.js';\r\nimport createGraphFromNodeEdge from '../helper/createGraphFromNodeEdge.js';\r\nimport Model from '../../model/Model.js';\r\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\r\n\r\nvar SankeySeriesModel =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(SankeySeriesModel, _super);\r\n\r\n  function SankeySeriesModel() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = SankeySeriesModel.type;\r\n    return _this;\r\n  }\r\n  /**\r\n   * Init a graph data structure from data in option series\r\n   */\r\n\r\n\r\n  SankeySeriesModel.prototype.getInitialData = function (option, ecModel) {\r\n    var links = option.edges || option.links;\r\n    var nodes = option.data || option.nodes;\r\n    var levels = option.levels;\r\n    this.levelModels = [];\r\n    var levelModels = this.levelModels;\r\n\r\n    for (var i = 0; i < levels.length; i++) {\r\n      if (levels[i].depth != null && levels[i].depth >= 0) {\r\n        levelModels[levels[i].depth] = new Model(levels[i], this, ecModel);\r\n      } else {\r\n        if (process.env.NODE_ENV !== 'production') {\r\n          throw new Error('levels[i].depth is mandatory and should be natural number');\r\n        }\r\n      }\r\n    }\r\n\r\n    if (nodes && links) {\r\n      var graph = createGraphFromNodeEdge(nodes, links, this, true, beforeLink);\r\n      return graph.data;\r\n    }\r\n\r\n    function beforeLink(nodeData, edgeData) {\r\n      nodeData.wrapMethod('getItemModel', function (model, idx) {\r\n        var seriesModel = model.parentModel;\r\n        var layout = seriesModel.getData().getItemLayout(idx);\r\n\r\n        if (layout) {\r\n          var nodeDepth = layout.depth;\r\n          var levelModel = seriesModel.levelModels[nodeDepth];\r\n\r\n          if (levelModel) {\r\n            model.parentModel = levelModel;\r\n          }\r\n        }\r\n\r\n        return model;\r\n      });\r\n      edgeData.wrapMethod('getItemModel', function (model, idx) {\r\n        var seriesModel = model.parentModel;\r\n        var edge = seriesModel.getGraph().getEdgeByIndex(idx);\r\n        var layout = edge.node1.getLayout();\r\n\r\n        if (layout) {\r\n          var depth = layout.depth;\r\n          var levelModel = seriesModel.levelModels[depth];\r\n\r\n          if (levelModel) {\r\n            model.parentModel = levelModel;\r\n          }\r\n        }\r\n\r\n        return model;\r\n      });\r\n    }\r\n  };\r\n\r\n  SankeySeriesModel.prototype.setNodePosition = function (dataIndex, localPosition) {\r\n    var nodes = this.option.data || this.option.nodes;\r\n    var dataItem = nodes[dataIndex];\r\n    dataItem.localX = localPosition[0];\r\n    dataItem.localY = localPosition[1];\r\n  };\r\n  /**\r\n   * Return the graphic data structure\r\n   *\r\n   * @return graphic data structure\r\n   */\r\n\r\n\r\n  SankeySeriesModel.prototype.getGraph = function () {\r\n    return this.getData().graph;\r\n  };\r\n  /**\r\n   * Get edge data of graphic data structure\r\n   *\r\n   * @return data structure of list\r\n   */\r\n\r\n\r\n  SankeySeriesModel.prototype.getEdgeData = function () {\r\n    return this.getGraph().edgeData;\r\n  };\r\n\r\n  SankeySeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\r\n    function noValue(val) {\r\n      return isNaN(val) || val == null;\r\n    } // dataType === 'node' or empty do not show tooltip by default\r\n\r\n\r\n    if (dataType === 'edge') {\r\n      var params = this.getDataParams(dataIndex, dataType);\r\n      var rawDataOpt = params.data;\r\n      var edgeValue = params.value;\r\n      var edgeName = rawDataOpt.source + ' -- ' + rawDataOpt.target;\r\n      return createTooltipMarkup('nameValue', {\r\n        name: edgeName,\r\n        value: edgeValue,\r\n        noValue: noValue(edgeValue)\r\n      });\r\n    } // dataType === 'node'\r\n    else {\r\n        var node = this.getGraph().getNodeByIndex(dataIndex);\r\n        var value = node.getLayout().value;\r\n        var name_1 = this.getDataParams(dataIndex, dataType).data.name;\r\n        return createTooltipMarkup('nameValue', {\r\n          name: name_1 != null ? name_1 + '' : null,\r\n          value: value,\r\n          noValue: noValue(value)\r\n        });\r\n      }\r\n  };\r\n\r\n  SankeySeriesModel.prototype.optionUpdated = function () {}; // Override Series.getDataParams()\r\n\r\n\r\n  SankeySeriesModel.prototype.getDataParams = function (dataIndex, dataType) {\r\n    var params = _super.prototype.getDataParams.call(this, dataIndex, dataType);\r\n\r\n    if (params.value == null && dataType === 'node') {\r\n      var node = this.getGraph().getNodeByIndex(dataIndex);\r\n      var nodeValue = node.getLayout().value;\r\n      params.value = nodeValue;\r\n    }\r\n\r\n    return params;\r\n  };\r\n\r\n  SankeySeriesModel.type = 'series.sankey';\r\n  SankeySeriesModel.defaultOption = {\r\n    // zlevel: 0,\r\n    z: 2,\r\n    coordinateSystem: 'view',\r\n    left: '5%',\r\n    top: '5%',\r\n    right: '20%',\r\n    bottom: '5%',\r\n    orient: 'horizontal',\r\n    nodeWidth: 20,\r\n    nodeGap: 8,\r\n    draggable: true,\r\n    layoutIterations: 32,\r\n    label: {\r\n      show: true,\r\n      position: 'right',\r\n      fontSize: 12\r\n    },\r\n    edgeLabel: {\r\n      show: false,\r\n      fontSize: 12\r\n    },\r\n    levels: [],\r\n    nodeAlign: 'justify',\r\n    lineStyle: {\r\n      color: '#314656',\r\n      opacity: 0.2,\r\n      curveness: 0.5\r\n    },\r\n    emphasis: {\r\n      label: {\r\n        show: true\r\n      },\r\n      lineStyle: {\r\n        opacity: 0.5\r\n      }\r\n    },\r\n    select: {\r\n      itemStyle: {\r\n        borderColor: '#212121'\r\n      }\r\n    },\r\n    animationEasing: 'linear',\r\n    animationDuration: 1000\r\n  };\r\n  return SankeySeriesModel;\r\n}(SeriesModel);\r\n\r\nexport default SankeySeriesModel;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as layout from '../../util/layout.js';\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport { groupData } from '../../util/model.js';\r\nexport default function sankeyLayout(ecModel, api) {\r\n  ecModel.eachSeriesByType('sankey', function (seriesModel) {\r\n    var nodeWidth = seriesModel.get('nodeWidth');\r\n    var nodeGap = seriesModel.get('nodeGap');\r\n    var layoutInfo = getViewRect(seriesModel, api);\r\n    seriesModel.layoutInfo = layoutInfo;\r\n    var width = layoutInfo.width;\r\n    var height = layoutInfo.height;\r\n    var graph = seriesModel.getGraph();\r\n    var nodes = graph.nodes;\r\n    var edges = graph.edges;\r\n    computeNodeValues(nodes);\r\n    var filteredNodes = zrUtil.filter(nodes, function (node) {\r\n      return node.getLayout().value === 0;\r\n    });\r\n    var iterations = filteredNodes.length !== 0 ? 0 : seriesModel.get('layoutIterations');\r\n    var orient = seriesModel.get('orient');\r\n    var nodeAlign = seriesModel.get('nodeAlign');\r\n    layoutSankey(nodes, edges, nodeWidth, nodeGap, width, height, iterations, orient, nodeAlign);\r\n  });\r\n}\r\n/**\r\n * Get the layout position of the whole view\r\n */\r\n\r\nfunction getViewRect(seriesModel, api) {\r\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\r\n    width: api.getWidth(),\r\n    height: api.getHeight()\r\n  });\r\n}\r\n\r\nfunction layoutSankey(nodes, edges, nodeWidth, nodeGap, width, height, iterations, orient, nodeAlign) {\r\n  computeNodeBreadths(nodes, edges, nodeWidth, width, height, orient, nodeAlign);\r\n  computeNodeDepths(nodes, edges, height, width, nodeGap, iterations, orient);\r\n  computeEdgeDepths(nodes, orient);\r\n}\r\n/**\r\n * Compute the value of each node by summing the associated edge's value\r\n */\r\n\r\n\r\nfunction computeNodeValues(nodes) {\r\n  zrUtil.each(nodes, function (node) {\r\n    var value1 = sum(node.outEdges, getEdgeValue);\r\n    var value2 = sum(node.inEdges, getEdgeValue);\r\n    var nodeRawValue = node.getValue() || 0;\r\n    var value = Math.max(value1, value2, nodeRawValue);\r\n    node.setLayout({\r\n      value: value\r\n    }, true);\r\n  });\r\n}\r\n/**\r\n * Compute the x-position for each node.\r\n *\r\n * Here we use Kahn algorithm to detect cycle when we traverse\r\n * the node to computer the initial x position.\r\n */\r\n\r\n\r\nfunction computeNodeBreadths(nodes, edges, nodeWidth, width, height, orient, nodeAlign) {\r\n  // Used to mark whether the edge is deleted. if it is deleted,\r\n  // the value is 0, otherwise it is 1.\r\n  var remainEdges = []; // Storage each node's indegree.\r\n\r\n  var indegreeArr = []; // Used to storage the node with indegree is equal to 0.\r\n\r\n  var zeroIndegrees = [];\r\n  var nextTargetNode = [];\r\n  var x = 0; // let kx = 0;\r\n\r\n  for (var i = 0; i < edges.length; i++) {\r\n    remainEdges[i] = 1;\r\n  }\r\n\r\n  for (var i = 0; i < nodes.length; i++) {\r\n    indegreeArr[i] = nodes[i].inEdges.length;\r\n\r\n    if (indegreeArr[i] === 0) {\r\n      zeroIndegrees.push(nodes[i]);\r\n    }\r\n  }\r\n\r\n  var maxNodeDepth = -1; // Traversing nodes using topological sorting to calculate the\r\n  // horizontal(if orient === 'horizontal') or vertical(if orient === 'vertical')\r\n  // position of the nodes.\r\n\r\n  while (zeroIndegrees.length) {\r\n    for (var idx = 0; idx < zeroIndegrees.length; idx++) {\r\n      var node = zeroIndegrees[idx];\r\n      var item = node.hostGraph.data.getRawDataItem(node.dataIndex);\r\n      var isItemDepth = item.depth != null && item.depth >= 0;\r\n\r\n      if (isItemDepth && item.depth > maxNodeDepth) {\r\n        maxNodeDepth = item.depth;\r\n      }\r\n\r\n      node.setLayout({\r\n        depth: isItemDepth ? item.depth : x\r\n      }, true);\r\n      orient === 'vertical' ? node.setLayout({\r\n        dy: nodeWidth\r\n      }, true) : node.setLayout({\r\n        dx: nodeWidth\r\n      }, true);\r\n\r\n      for (var edgeIdx = 0; edgeIdx < node.outEdges.length; edgeIdx++) {\r\n        var edge = node.outEdges[edgeIdx];\r\n        var indexEdge = edges.indexOf(edge);\r\n        remainEdges[indexEdge] = 0;\r\n        var targetNode = edge.node2;\r\n        var nodeIndex = nodes.indexOf(targetNode);\r\n\r\n        if (--indegreeArr[nodeIndex] === 0 && nextTargetNode.indexOf(targetNode) < 0) {\r\n          nextTargetNode.push(targetNode);\r\n        }\r\n      }\r\n    }\r\n\r\n    ++x;\r\n    zeroIndegrees = nextTargetNode;\r\n    nextTargetNode = [];\r\n  }\r\n\r\n  for (var i = 0; i < remainEdges.length; i++) {\r\n    if (remainEdges[i] === 1) {\r\n      throw new Error('Sankey is a DAG, the original data has cycle!');\r\n    }\r\n  }\r\n\r\n  var maxDepth = maxNodeDepth > x - 1 ? maxNodeDepth : x - 1;\r\n\r\n  if (nodeAlign && nodeAlign !== 'left') {\r\n    adjustNodeWithNodeAlign(nodes, nodeAlign, orient, maxDepth);\r\n  }\r\n\r\n  var kx = orient === 'vertical' ? (height - nodeWidth) / maxDepth : (width - nodeWidth) / maxDepth;\r\n  scaleNodeBreadths(nodes, kx, orient);\r\n}\r\n\r\nfunction isNodeDepth(node) {\r\n  var item = node.hostGraph.data.getRawDataItem(node.dataIndex);\r\n  return item.depth != null && item.depth >= 0;\r\n}\r\n\r\nfunction adjustNodeWithNodeAlign(nodes, nodeAlign, orient, maxDepth) {\r\n  if (nodeAlign === 'right') {\r\n    var nextSourceNode = [];\r\n    var remainNodes = nodes;\r\n    var nodeHeight = 0;\r\n\r\n    while (remainNodes.length) {\r\n      for (var i = 0; i < remainNodes.length; i++) {\r\n        var node = remainNodes[i];\r\n        node.setLayout({\r\n          skNodeHeight: nodeHeight\r\n        }, true);\r\n\r\n        for (var j = 0; j < node.inEdges.length; j++) {\r\n          var edge = node.inEdges[j];\r\n\r\n          if (nextSourceNode.indexOf(edge.node1) < 0) {\r\n            nextSourceNode.push(edge.node1);\r\n          }\r\n        }\r\n      }\r\n\r\n      remainNodes = nextSourceNode;\r\n      nextSourceNode = [];\r\n      ++nodeHeight;\r\n    }\r\n\r\n    zrUtil.each(nodes, function (node) {\r\n      if (!isNodeDepth(node)) {\r\n        node.setLayout({\r\n          depth: Math.max(0, maxDepth - node.getLayout().skNodeHeight)\r\n        }, true);\r\n      }\r\n    });\r\n  } else if (nodeAlign === 'justify') {\r\n    moveSinksRight(nodes, maxDepth);\r\n  }\r\n}\r\n/**\r\n * All the node without outEgdes are assigned maximum x-position and\r\n *     be aligned in the last column.\r\n *\r\n * @param nodes.  node of sankey view.\r\n * @param maxDepth.  use to assign to node without outEdges as x-position.\r\n */\r\n\r\n\r\nfunction moveSinksRight(nodes, maxDepth) {\r\n  zrUtil.each(nodes, function (node) {\r\n    if (!isNodeDepth(node) && !node.outEdges.length) {\r\n      node.setLayout({\r\n        depth: maxDepth\r\n      }, true);\r\n    }\r\n  });\r\n}\r\n/**\r\n * Scale node x-position to the width\r\n *\r\n * @param nodes  node of sankey view\r\n * @param kx   multiple used to scale nodes\r\n */\r\n\r\n\r\nfunction scaleNodeBreadths(nodes, kx, orient) {\r\n  zrUtil.each(nodes, function (node) {\r\n    var nodeDepth = node.getLayout().depth * kx;\r\n    orient === 'vertical' ? node.setLayout({\r\n      y: nodeDepth\r\n    }, true) : node.setLayout({\r\n      x: nodeDepth\r\n    }, true);\r\n  });\r\n}\r\n/**\r\n * Using Gauss-Seidel iterations method to compute the node depth(y-position)\r\n *\r\n * @param nodes  node of sankey view\r\n * @param edges  edge of sankey view\r\n * @param height  the whole height of the area to draw the view\r\n * @param nodeGap  the vertical distance between two nodes\r\n *     in the same column.\r\n * @param iterations  the number of iterations for the algorithm\r\n */\r\n\r\n\r\nfunction computeNodeDepths(nodes, edges, height, width, nodeGap, iterations, orient) {\r\n  var nodesByBreadth = prepareNodesByBreadth(nodes, orient);\r\n  initializeNodeDepth(nodesByBreadth, edges, height, width, nodeGap, orient);\r\n  resolveCollisions(nodesByBreadth, nodeGap, height, width, orient);\r\n\r\n  for (var alpha = 1; iterations > 0; iterations--) {\r\n    // 0.99 is a experience parameter, ensure that each iterations of\r\n    // changes as small as possible.\r\n    alpha *= 0.99;\r\n    relaxRightToLeft(nodesByBreadth, alpha, orient);\r\n    resolveCollisions(nodesByBreadth, nodeGap, height, width, orient);\r\n    relaxLeftToRight(nodesByBreadth, alpha, orient);\r\n    resolveCollisions(nodesByBreadth, nodeGap, height, width, orient);\r\n  }\r\n}\r\n\r\nfunction prepareNodesByBreadth(nodes, orient) {\r\n  var nodesByBreadth = [];\r\n  var keyAttr = orient === 'vertical' ? 'y' : 'x';\r\n  var groupResult = groupData(nodes, function (node) {\r\n    return node.getLayout()[keyAttr];\r\n  });\r\n  groupResult.keys.sort(function (a, b) {\r\n    return a - b;\r\n  });\r\n  zrUtil.each(groupResult.keys, function (key) {\r\n    nodesByBreadth.push(groupResult.buckets.get(key));\r\n  });\r\n  return nodesByBreadth;\r\n}\r\n/**\r\n * Compute the original y-position for each node\r\n */\r\n\r\n\r\nfunction initializeNodeDepth(nodesByBreadth, edges, height, width, nodeGap, orient) {\r\n  var minKy = Infinity;\r\n  zrUtil.each(nodesByBreadth, function (nodes) {\r\n    var n = nodes.length;\r\n    var sum = 0;\r\n    zrUtil.each(nodes, function (node) {\r\n      sum += node.getLayout().value;\r\n    });\r\n    var ky = orient === 'vertical' ? (width - (n - 1) * nodeGap) / sum : (height - (n - 1) * nodeGap) / sum;\r\n\r\n    if (ky < minKy) {\r\n      minKy = ky;\r\n    }\r\n  });\r\n  zrUtil.each(nodesByBreadth, function (nodes) {\r\n    zrUtil.each(nodes, function (node, i) {\r\n      var nodeDy = node.getLayout().value * minKy;\r\n\r\n      if (orient === 'vertical') {\r\n        node.setLayout({\r\n          x: i\r\n        }, true);\r\n        node.setLayout({\r\n          dx: nodeDy\r\n        }, true);\r\n      } else {\r\n        node.setLayout({\r\n          y: i\r\n        }, true);\r\n        node.setLayout({\r\n          dy: nodeDy\r\n        }, true);\r\n      }\r\n    });\r\n  });\r\n  zrUtil.each(edges, function (edge) {\r\n    var edgeDy = +edge.getValue() * minKy;\r\n    edge.setLayout({\r\n      dy: edgeDy\r\n    }, true);\r\n  });\r\n}\r\n/**\r\n * Resolve the collision of initialized depth (y-position)\r\n */\r\n\r\n\r\nfunction resolveCollisions(nodesByBreadth, nodeGap, height, width, orient) {\r\n  var keyAttr = orient === 'vertical' ? 'x' : 'y';\r\n  zrUtil.each(nodesByBreadth, function (nodes) {\r\n    nodes.sort(function (a, b) {\r\n      return a.getLayout()[keyAttr] - b.getLayout()[keyAttr];\r\n    });\r\n    var nodeX;\r\n    var node;\r\n    var dy;\r\n    var y0 = 0;\r\n    var n = nodes.length;\r\n    var nodeDyAttr = orient === 'vertical' ? 'dx' : 'dy';\r\n\r\n    for (var i = 0; i < n; i++) {\r\n      node = nodes[i];\r\n      dy = y0 - node.getLayout()[keyAttr];\r\n\r\n      if (dy > 0) {\r\n        nodeX = node.getLayout()[keyAttr] + dy;\r\n        orient === 'vertical' ? node.setLayout({\r\n          x: nodeX\r\n        }, true) : node.setLayout({\r\n          y: nodeX\r\n        }, true);\r\n      }\r\n\r\n      y0 = node.getLayout()[keyAttr] + node.getLayout()[nodeDyAttr] + nodeGap;\r\n    }\r\n\r\n    var viewWidth = orient === 'vertical' ? width : height; // If the bottommost node goes outside the bounds, push it back up\r\n\r\n    dy = y0 - nodeGap - viewWidth;\r\n\r\n    if (dy > 0) {\r\n      nodeX = node.getLayout()[keyAttr] - dy;\r\n      orient === 'vertical' ? node.setLayout({\r\n        x: nodeX\r\n      }, true) : node.setLayout({\r\n        y: nodeX\r\n      }, true);\r\n      y0 = nodeX;\r\n\r\n      for (var i = n - 2; i >= 0; --i) {\r\n        node = nodes[i];\r\n        dy = node.getLayout()[keyAttr] + node.getLayout()[nodeDyAttr] + nodeGap - y0;\r\n\r\n        if (dy > 0) {\r\n          nodeX = node.getLayout()[keyAttr] - dy;\r\n          orient === 'vertical' ? node.setLayout({\r\n            x: nodeX\r\n          }, true) : node.setLayout({\r\n            y: nodeX\r\n          }, true);\r\n        }\r\n\r\n        y0 = node.getLayout()[keyAttr];\r\n      }\r\n    }\r\n  });\r\n}\r\n/**\r\n * Change the y-position of the nodes, except most the right side nodes\r\n * @param nodesByBreadth\r\n * @param alpha  parameter used to adjust the nodes y-position\r\n */\r\n\r\n\r\nfunction relaxRightToLeft(nodesByBreadth, alpha, orient) {\r\n  zrUtil.each(nodesByBreadth.slice().reverse(), function (nodes) {\r\n    zrUtil.each(nodes, function (node) {\r\n      if (node.outEdges.length) {\r\n        var y = sum(node.outEdges, weightedTarget, orient) / sum(node.outEdges, getEdgeValue);\r\n\r\n        if (isNaN(y)) {\r\n          var len = node.outEdges.length;\r\n          y = len ? sum(node.outEdges, centerTarget, orient) / len : 0;\r\n        }\r\n\r\n        if (orient === 'vertical') {\r\n          var nodeX = node.getLayout().x + (y - center(node, orient)) * alpha;\r\n          node.setLayout({\r\n            x: nodeX\r\n          }, true);\r\n        } else {\r\n          var nodeY = node.getLayout().y + (y - center(node, orient)) * alpha;\r\n          node.setLayout({\r\n            y: nodeY\r\n          }, true);\r\n        }\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\nfunction weightedTarget(edge, orient) {\r\n  return center(edge.node2, orient) * edge.getValue();\r\n}\r\n\r\nfunction centerTarget(edge, orient) {\r\n  return center(edge.node2, orient);\r\n}\r\n\r\nfunction weightedSource(edge, orient) {\r\n  return center(edge.node1, orient) * edge.getValue();\r\n}\r\n\r\nfunction centerSource(edge, orient) {\r\n  return center(edge.node1, orient);\r\n}\r\n\r\nfunction center(node, orient) {\r\n  return orient === 'vertical' ? node.getLayout().x + node.getLayout().dx / 2 : node.getLayout().y + node.getLayout().dy / 2;\r\n}\r\n\r\nfunction getEdgeValue(edge) {\r\n  return edge.getValue();\r\n}\r\n\r\nfunction sum(array, cb, orient) {\r\n  var sum = 0;\r\n  var len = array.length;\r\n  var i = -1;\r\n\r\n  while (++i < len) {\r\n    var value = +cb(array[i], orient);\r\n\r\n    if (!isNaN(value)) {\r\n      sum += value;\r\n    }\r\n  }\r\n\r\n  return sum;\r\n}\r\n/**\r\n * Change the y-position of the nodes, except most the left side nodes\r\n */\r\n\r\n\r\nfunction relaxLeftToRight(nodesByBreadth, alpha, orient) {\r\n  zrUtil.each(nodesByBreadth, function (nodes) {\r\n    zrUtil.each(nodes, function (node) {\r\n      if (node.inEdges.length) {\r\n        var y = sum(node.inEdges, weightedSource, orient) / sum(node.inEdges, getEdgeValue);\r\n\r\n        if (isNaN(y)) {\r\n          var len = node.inEdges.length;\r\n          y = len ? sum(node.inEdges, centerSource, orient) / len : 0;\r\n        }\r\n\r\n        if (orient === 'vertical') {\r\n          var nodeX = node.getLayout().x + (y - center(node, orient)) * alpha;\r\n          node.setLayout({\r\n            x: nodeX\r\n          }, true);\r\n        } else {\r\n          var nodeY = node.getLayout().y + (y - center(node, orient)) * alpha;\r\n          node.setLayout({\r\n            y: nodeY\r\n          }, true);\r\n        }\r\n      }\r\n    });\r\n  });\r\n}\r\n/**\r\n * Compute the depth(y-position) of each edge\r\n */\r\n\r\n\r\nfunction computeEdgeDepths(nodes, orient) {\r\n  var keyAttr = orient === 'vertical' ? 'x' : 'y';\r\n  zrUtil.each(nodes, function (node) {\r\n    node.outEdges.sort(function (a, b) {\r\n      return a.node2.getLayout()[keyAttr] - b.node2.getLayout()[keyAttr];\r\n    });\r\n    node.inEdges.sort(function (a, b) {\r\n      return a.node1.getLayout()[keyAttr] - b.node1.getLayout()[keyAttr];\r\n    });\r\n  });\r\n  zrUtil.each(nodes, function (node) {\r\n    var sy = 0;\r\n    var ty = 0;\r\n    zrUtil.each(node.outEdges, function (edge) {\r\n      edge.setLayout({\r\n        sy: sy\r\n      }, true);\r\n      sy += edge.getLayout().dy;\r\n    });\r\n    zrUtil.each(node.inEdges, function (edge) {\r\n      edge.setLayout({\r\n        ty: ty\r\n      }, true);\r\n      ty += edge.getLayout().dy;\r\n    });\r\n  });\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport VisualMapping from '../../visual/VisualMapping.js';\r\nexport default function sankeyVisual(ecModel) {\r\n  ecModel.eachSeriesByType('sankey', function (seriesModel) {\r\n    var graph = seriesModel.getGraph();\r\n    var nodes = graph.nodes;\r\n    var edges = graph.edges;\r\n\r\n    if (nodes.length) {\r\n      var minValue_1 = Infinity;\r\n      var maxValue_1 = -Infinity;\r\n      zrUtil.each(nodes, function (node) {\r\n        var nodeValue = node.getLayout().value;\r\n\r\n        if (nodeValue < minValue_1) {\r\n          minValue_1 = nodeValue;\r\n        }\r\n\r\n        if (nodeValue > maxValue_1) {\r\n          maxValue_1 = nodeValue;\r\n        }\r\n      });\r\n      zrUtil.each(nodes, function (node) {\r\n        var mapping = new VisualMapping({\r\n          type: 'color',\r\n          mappingMethod: 'linear',\r\n          dataExtent: [minValue_1, maxValue_1],\r\n          visual: seriesModel.get('color')\r\n        });\r\n        var mapValueToColor = mapping.mapValueToVisual(node.getLayout().value);\r\n        var customColor = node.getModel().get(['itemStyle', 'color']);\r\n\r\n        if (customColor != null) {\r\n          node.setVisual('color', customColor);\r\n          node.setVisual('style', {\r\n            fill: customColor\r\n          });\r\n        } else {\r\n          node.setVisual('color', mapValueToColor);\r\n          node.setVisual('style', {\r\n            fill: mapValueToColor\r\n          });\r\n        }\r\n      });\r\n    }\r\n\r\n    if (edges.length) {\r\n      zrUtil.each(edges, function (edge) {\r\n        var edgeStyle = edge.getModel().get('lineStyle');\r\n        edge.setVisual('style', edgeStyle);\r\n      });\r\n    }\r\n  });\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport SankeyView from './SankeyView.js';\r\nimport SankeySeriesModel from './SankeySeries.js';\r\nimport sankeyLayout from './sankeyLayout.js';\r\nimport sankeyVisual from './sankeyVisual.js';\r\nexport function install(registers) {\r\n  registers.registerChartView(SankeyView);\r\n  registers.registerSeriesModel(SankeySeriesModel);\r\n  registers.registerLayout(sankeyLayout);\r\n  registers.registerVisual(sankeyVisual);\r\n  registers.registerAction({\r\n    type: 'dragNode',\r\n    event: 'dragnode',\r\n    // here can only use 'update' now, other value is not support in echarts.\r\n    update: 'update'\r\n  }, function (payload, ecModel) {\r\n    ecModel.eachComponent({\r\n      mainType: 'series',\r\n      subType: 'sankey',\r\n      query: payload\r\n    }, function (seriesModel) {\r\n      seriesModel.setNodePosition(payload.dataIndex, [payload.localX, payload.localY]);\r\n    });\r\n  });\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport createSeriesDataSimply from './createSeriesDataSimply.js';\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport { getDimensionTypeByAxis } from '../../data/helper/dimensionHelper.js';\r\nimport { makeSeriesEncodeForAxisCoordSys } from '../../data/helper/sourceHelper.js';\r\n\r\nvar WhiskerBoxCommonMixin =\r\n/** @class */\r\nfunction () {\r\n  function WhiskerBoxCommonMixin() {}\r\n  /**\r\n   * @override\r\n   */\r\n\r\n\r\n  WhiskerBoxCommonMixin.prototype.getInitialData = function (option, ecModel) {\r\n    // When both types of xAxis and yAxis are 'value', layout is\r\n    // needed to be specified by user. Otherwise, layout can be\r\n    // judged by which axis is category.\r\n    var ordinalMeta;\r\n    var xAxisModel = ecModel.getComponent('xAxis', this.get('xAxisIndex'));\r\n    var yAxisModel = ecModel.getComponent('yAxis', this.get('yAxisIndex'));\r\n    var xAxisType = xAxisModel.get('type');\r\n    var yAxisType = yAxisModel.get('type');\r\n    var addOrdinal; // FIXME\r\n    // Consider time axis.\r\n\r\n    if (xAxisType === 'category') {\r\n      option.layout = 'horizontal';\r\n      ordinalMeta = xAxisModel.getOrdinalMeta();\r\n      addOrdinal = true;\r\n    } else if (yAxisType === 'category') {\r\n      option.layout = 'vertical';\r\n      ordinalMeta = yAxisModel.getOrdinalMeta();\r\n      addOrdinal = true;\r\n    } else {\r\n      option.layout = option.layout || 'horizontal';\r\n    }\r\n\r\n    var coordDims = ['x', 'y'];\r\n    var baseAxisDimIndex = option.layout === 'horizontal' ? 0 : 1;\r\n    var baseAxisDim = this._baseAxisDim = coordDims[baseAxisDimIndex];\r\n    var otherAxisDim = coordDims[1 - baseAxisDimIndex];\r\n    var axisModels = [xAxisModel, yAxisModel];\r\n    var baseAxisType = axisModels[baseAxisDimIndex].get('type');\r\n    var otherAxisType = axisModels[1 - baseAxisDimIndex].get('type');\r\n    var data = option.data; // Clone a new data for next setOption({}) usage.\r\n    // Avoid modifying current data will affect further update.\r\n\r\n    if (data && addOrdinal) {\r\n      var newOptionData_1 = [];\r\n      zrUtil.each(data, function (item, index) {\r\n        var newItem;\r\n\r\n        if (zrUtil.isArray(item)) {\r\n          newItem = item.slice(); // Modify current using data.\r\n\r\n          item.unshift(index);\r\n        } else if (zrUtil.isArray(item.value)) {\r\n          newItem = zrUtil.extend({}, item);\r\n          newItem.value = newItem.value.slice(); // Modify current using data.\r\n\r\n          item.value.unshift(index);\r\n        } else {\r\n          newItem = item;\r\n        }\r\n\r\n        newOptionData_1.push(newItem);\r\n      });\r\n      option.data = newOptionData_1;\r\n    }\r\n\r\n    var defaultValueDimensions = this.defaultValueDimensions;\r\n    var coordDimensions = [{\r\n      name: baseAxisDim,\r\n      type: getDimensionTypeByAxis(baseAxisType),\r\n      ordinalMeta: ordinalMeta,\r\n      otherDims: {\r\n        tooltip: false,\r\n        itemName: 0\r\n      },\r\n      dimsDef: ['base']\r\n    }, {\r\n      name: otherAxisDim,\r\n      type: getDimensionTypeByAxis(otherAxisType),\r\n      dimsDef: defaultValueDimensions.slice()\r\n    }];\r\n    return createSeriesDataSimply(this, {\r\n      coordDimensions: coordDimensions,\r\n      dimensionsCount: defaultValueDimensions.length + 1,\r\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForAxisCoordSys, coordDimensions, this)\r\n    });\r\n  };\r\n  /**\r\n   * If horizontal, base axis is x, otherwise y.\r\n   * @override\r\n   */\r\n\r\n\r\n  WhiskerBoxCommonMixin.prototype.getBaseAxis = function () {\r\n    var dim = this._baseAxisDim;\r\n    return this.ecModel.getComponent(dim + 'Axis', this.get(dim + 'AxisIndex')).axis;\r\n  };\r\n\r\n  return WhiskerBoxCommonMixin;\r\n}();\r\n\r\n;\r\nexport { WhiskerBoxCommonMixin };", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport SeriesModel from '../../model/Series.js';\r\nimport { WhiskerBoxCommonMixin } from '../helper/whiskerBoxCommon.js';\r\nimport { mixin } from 'zrender/lib/core/util.js';\r\n\r\nvar BoxplotSeriesModel =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(BoxplotSeriesModel, _super);\r\n\r\n  function BoxplotSeriesModel() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = BoxplotSeriesModel.type; // TODO\r\n    // box width represents group size, so dimension should have 'size'.\r\n\r\n    /**\r\n     * @see <https://en.wikipedia.org/wiki/Box_plot>\r\n     * The meanings of 'min' and 'max' depend on user,\r\n     * and echarts do not need to know it.\r\n     * @readOnly\r\n     */\r\n\r\n    _this.defaultValueDimensions = [{\r\n      name: 'min',\r\n      defaultTooltip: true\r\n    }, {\r\n      name: 'Q1',\r\n      defaultTooltip: true\r\n    }, {\r\n      name: 'median',\r\n      defaultTooltip: true\r\n    }, {\r\n      name: 'Q3',\r\n      defaultTooltip: true\r\n    }, {\r\n      name: 'max',\r\n      defaultTooltip: true\r\n    }];\r\n    _this.visualDrawType = 'stroke';\r\n    return _this;\r\n  }\r\n\r\n  BoxplotSeriesModel.type = 'series.boxplot';\r\n  BoxplotSeriesModel.dependencies = ['xAxis', 'yAxis', 'grid'];\r\n  BoxplotSeriesModel.defaultOption = {\r\n    // zlevel: 0,\r\n    z: 2,\r\n    coordinateSystem: 'cartesian2d',\r\n    legendHoverLink: true,\r\n    layout: null,\r\n    boxWidth: [7, 50],\r\n    itemStyle: {\r\n      color: '#fff',\r\n      borderWidth: 1\r\n    },\r\n    emphasis: {\r\n      scale: true,\r\n      itemStyle: {\r\n        borderWidth: 2,\r\n        shadowBlur: 5,\r\n        shadowOffsetX: 1,\r\n        shadowOffsetY: 1,\r\n        shadowColor: 'rgba(0,0,0,0.2)'\r\n      }\r\n    },\r\n    animationDuration: 800\r\n  };\r\n  return BoxplotSeriesModel;\r\n}(SeriesModel);\r\n\r\nmixin(BoxplotSeriesModel, WhiskerBoxCommonMixin, true);\r\nexport default BoxplotSeriesModel;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport ChartView from '../../view/Chart.js';\r\nimport * as graphic from '../../util/graphic.js';\r\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\r\nimport Path from 'zrender/lib/graphic/Path.js';\r\nimport { saveOldStyle } from '../../animation/basicTransition.js';\r\n\r\nvar BoxplotView =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(BoxplotView, _super);\r\n\r\n  function BoxplotView() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = BoxplotView.type;\r\n    return _this;\r\n  }\r\n\r\n  BoxplotView.prototype.render = function (seriesModel, ecModel, api) {\r\n    var data = seriesModel.getData();\r\n    var group = this.group;\r\n    var oldData = this._data; // There is no old data only when first rendering or switching from\r\n    // stream mode to normal mode, where previous elements should be removed.\r\n\r\n    if (!this._data) {\r\n      group.removeAll();\r\n    }\r\n\r\n    var constDim = seriesModel.get('layout') === 'horizontal' ? 1 : 0;\r\n    data.diff(oldData).add(function (newIdx) {\r\n      if (data.hasValue(newIdx)) {\r\n        var itemLayout = data.getItemLayout(newIdx);\r\n        var symbolEl = createNormalBox(itemLayout, data, newIdx, constDim, true);\r\n        data.setItemGraphicEl(newIdx, symbolEl);\r\n        group.add(symbolEl);\r\n      }\r\n    }).update(function (newIdx, oldIdx) {\r\n      var symbolEl = oldData.getItemGraphicEl(oldIdx); // Empty data\r\n\r\n      if (!data.hasValue(newIdx)) {\r\n        group.remove(symbolEl);\r\n        return;\r\n      }\r\n\r\n      var itemLayout = data.getItemLayout(newIdx);\r\n\r\n      if (!symbolEl) {\r\n        symbolEl = createNormalBox(itemLayout, data, newIdx, constDim);\r\n      } else {\r\n        saveOldStyle(symbolEl);\r\n        updateNormalBoxData(itemLayout, symbolEl, data, newIdx);\r\n      }\r\n\r\n      group.add(symbolEl);\r\n      data.setItemGraphicEl(newIdx, symbolEl);\r\n    }).remove(function (oldIdx) {\r\n      var el = oldData.getItemGraphicEl(oldIdx);\r\n      el && group.remove(el);\r\n    }).execute();\r\n    this._data = data;\r\n  };\r\n\r\n  BoxplotView.prototype.remove = function (ecModel) {\r\n    var group = this.group;\r\n    var data = this._data;\r\n    this._data = null;\r\n    data && data.eachItemGraphicEl(function (el) {\r\n      el && group.remove(el);\r\n    });\r\n  };\r\n\r\n  BoxplotView.type = 'boxplot';\r\n  return BoxplotView;\r\n}(ChartView);\r\n\r\nvar BoxPathShape =\r\n/** @class */\r\nfunction () {\r\n  function BoxPathShape() {}\r\n\r\n  return BoxPathShape;\r\n}();\r\n\r\nvar BoxPath =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(BoxPath, _super);\r\n\r\n  function BoxPath(opts) {\r\n    var _this = _super.call(this, opts) || this;\r\n\r\n    _this.type = 'boxplotBoxPath';\r\n    return _this;\r\n  }\r\n\r\n  BoxPath.prototype.getDefaultShape = function () {\r\n    return new BoxPathShape();\r\n  };\r\n\r\n  BoxPath.prototype.buildPath = function (ctx, shape) {\r\n    var ends = shape.points;\r\n    var i = 0;\r\n    ctx.moveTo(ends[i][0], ends[i][1]);\r\n    i++;\r\n\r\n    for (; i < 4; i++) {\r\n      ctx.lineTo(ends[i][0], ends[i][1]);\r\n    }\r\n\r\n    ctx.closePath();\r\n\r\n    for (; i < ends.length; i++) {\r\n      ctx.moveTo(ends[i][0], ends[i][1]);\r\n      i++;\r\n      ctx.lineTo(ends[i][0], ends[i][1]);\r\n    }\r\n  };\r\n\r\n  return BoxPath;\r\n}(Path);\r\n\r\nfunction createNormalBox(itemLayout, data, dataIndex, constDim, isInit) {\r\n  var ends = itemLayout.ends;\r\n  var el = new BoxPath({\r\n    shape: {\r\n      points: isInit ? transInit(ends, constDim, itemLayout) : ends\r\n    }\r\n  });\r\n  updateNormalBoxData(itemLayout, el, data, dataIndex, isInit);\r\n  return el;\r\n}\r\n\r\nfunction updateNormalBoxData(itemLayout, el, data, dataIndex, isInit) {\r\n  var seriesModel = data.hostModel;\r\n  var updateMethod = graphic[isInit ? 'initProps' : 'updateProps'];\r\n  updateMethod(el, {\r\n    shape: {\r\n      points: itemLayout.ends\r\n    }\r\n  }, seriesModel, dataIndex);\r\n  el.useStyle(data.getItemVisual(dataIndex, 'style'));\r\n  el.style.strokeNoScale = true;\r\n  el.z2 = 100;\r\n  var itemModel = data.getItemModel(dataIndex);\r\n  var emphasisModel = itemModel.getModel('emphasis');\r\n  setStatesStylesFromModel(el, itemModel);\r\n  toggleHoverEmphasis(el, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\r\n}\r\n\r\nfunction transInit(points, dim, itemLayout) {\r\n  return zrUtil.map(points, function (point) {\r\n    point = point.slice();\r\n    point[dim] = itemLayout.initBaseline;\r\n    return point;\r\n  });\r\n}\r\n\r\nexport default BoxplotView;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport { parsePercent } from '../../util/number.js';\r\nvar each = zrUtil.each;\r\nexport default function boxplotLayout(ecModel) {\r\n  var groupResult = groupSeriesByAxis(ecModel);\r\n  each(groupResult, function (groupItem) {\r\n    var seriesModels = groupItem.seriesModels;\r\n\r\n    if (!seriesModels.length) {\r\n      return;\r\n    }\r\n\r\n    calculateBase(groupItem);\r\n    each(seriesModels, function (seriesModel, idx) {\r\n      layoutSingleSeries(seriesModel, groupItem.boxOffsetList[idx], groupItem.boxWidthList[idx]);\r\n    });\r\n  });\r\n}\r\n/**\r\n * Group series by axis.\r\n */\r\n\r\nfunction groupSeriesByAxis(ecModel) {\r\n  var result = [];\r\n  var axisList = [];\r\n  ecModel.eachSeriesByType('boxplot', function (seriesModel) {\r\n    var baseAxis = seriesModel.getBaseAxis();\r\n    var idx = zrUtil.indexOf(axisList, baseAxis);\r\n\r\n    if (idx < 0) {\r\n      idx = axisList.length;\r\n      axisList[idx] = baseAxis;\r\n      result[idx] = {\r\n        axis: baseAxis,\r\n        seriesModels: []\r\n      };\r\n    }\r\n\r\n    result[idx].seriesModels.push(seriesModel);\r\n  });\r\n  return result;\r\n}\r\n/**\r\n * Calculate offset and box width for each series.\r\n */\r\n\r\n\r\nfunction calculateBase(groupItem) {\r\n  var baseAxis = groupItem.axis;\r\n  var seriesModels = groupItem.seriesModels;\r\n  var seriesCount = seriesModels.length;\r\n  var boxWidthList = groupItem.boxWidthList = [];\r\n  var boxOffsetList = groupItem.boxOffsetList = [];\r\n  var boundList = [];\r\n  var bandWidth;\r\n\r\n  if (baseAxis.type === 'category') {\r\n    bandWidth = baseAxis.getBandWidth();\r\n  } else {\r\n    var maxDataCount_1 = 0;\r\n    each(seriesModels, function (seriesModel) {\r\n      maxDataCount_1 = Math.max(maxDataCount_1, seriesModel.getData().count());\r\n    });\r\n    var extent = baseAxis.getExtent();\r\n    bandWidth = Math.abs(extent[1] - extent[0]) / maxDataCount_1;\r\n  }\r\n\r\n  each(seriesModels, function (seriesModel) {\r\n    var boxWidthBound = seriesModel.get('boxWidth');\r\n\r\n    if (!zrUtil.isArray(boxWidthBound)) {\r\n      boxWidthBound = [boxWidthBound, boxWidthBound];\r\n    }\r\n\r\n    boundList.push([parsePercent(boxWidthBound[0], bandWidth) || 0, parsePercent(boxWidthBound[1], bandWidth) || 0]);\r\n  });\r\n  var availableWidth = bandWidth * 0.8 - 2;\r\n  var boxGap = availableWidth / seriesCount * 0.3;\r\n  var boxWidth = (availableWidth - boxGap * (seriesCount - 1)) / seriesCount;\r\n  var base = boxWidth / 2 - availableWidth / 2;\r\n  each(seriesModels, function (seriesModel, idx) {\r\n    boxOffsetList.push(base);\r\n    base += boxGap + boxWidth;\r\n    boxWidthList.push(Math.min(Math.max(boxWidth, boundList[idx][0]), boundList[idx][1]));\r\n  });\r\n}\r\n/**\r\n * Calculate points location for each series.\r\n */\r\n\r\n\r\nfunction layoutSingleSeries(seriesModel, offset, boxWidth) {\r\n  var coordSys = seriesModel.coordinateSystem;\r\n  var data = seriesModel.getData();\r\n  var halfWidth = boxWidth / 2;\r\n  var cDimIdx = seriesModel.get('layout') === 'horizontal' ? 0 : 1;\r\n  var vDimIdx = 1 - cDimIdx;\r\n  var coordDims = ['x', 'y'];\r\n  var cDim = data.mapDimension(coordDims[cDimIdx]);\r\n  var vDims = data.mapDimensionsAll(coordDims[vDimIdx]);\r\n\r\n  if (cDim == null || vDims.length < 5) {\r\n    return;\r\n  }\r\n\r\n  for (var dataIndex = 0; dataIndex < data.count(); dataIndex++) {\r\n    var axisDimVal = data.get(cDim, dataIndex);\r\n    var median = getPoint(axisDimVal, vDims[2], dataIndex);\r\n    var end1 = getPoint(axisDimVal, vDims[0], dataIndex);\r\n    var end2 = getPoint(axisDimVal, vDims[1], dataIndex);\r\n    var end4 = getPoint(axisDimVal, vDims[3], dataIndex);\r\n    var end5 = getPoint(axisDimVal, vDims[4], dataIndex);\r\n    var ends = [];\r\n    addBodyEnd(ends, end2, false);\r\n    addBodyEnd(ends, end4, true);\r\n    ends.push(end1, end2, end5, end4);\r\n    layEndLine(ends, end1);\r\n    layEndLine(ends, end5);\r\n    layEndLine(ends, median);\r\n    data.setItemLayout(dataIndex, {\r\n      initBaseline: median[vDimIdx],\r\n      ends: ends\r\n    });\r\n  }\r\n\r\n  function getPoint(axisDimVal, dim, dataIndex) {\r\n    var val = data.get(dim, dataIndex);\r\n    var p = [];\r\n    p[cDimIdx] = axisDimVal;\r\n    p[vDimIdx] = val;\r\n    var point;\r\n\r\n    if (isNaN(axisDimVal) || isNaN(val)) {\r\n      point = [NaN, NaN];\r\n    } else {\r\n      point = coordSys.dataToPoint(p);\r\n      point[cDimIdx] += offset;\r\n    }\r\n\r\n    return point;\r\n  }\r\n\r\n  function addBodyEnd(ends, point, start) {\r\n    var point1 = point.slice();\r\n    var point2 = point.slice();\r\n    point1[cDimIdx] += halfWidth;\r\n    point2[cDimIdx] -= halfWidth;\r\n    start ? ends.push(point1, point2) : ends.push(point2, point1);\r\n  }\r\n\r\n  function layEndLine(ends, endCenter) {\r\n    var from = endCenter.slice();\r\n    var to = endCenter.slice();\r\n    from[cDimIdx] -= halfWidth;\r\n    to[cDimIdx] += halfWidth;\r\n    ends.push(from, to);\r\n  }\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { quantile, asc } from '../../util/number.js';\r\nimport { isFunction, isString } from 'zrender/lib/core/util.js';\r\n/**\r\n * See:\r\n *  <https://en.wikipedia.org/wiki/Box_plot#cite_note-frigge_hoaglin_iglewicz-2>\r\n *  <http://stat.ethz.ch/R-manual/R-devel/library/grDevices/html/boxplot.stats.html>\r\n *\r\n * Helper method for preparing data.\r\n *\r\n * @param rawData like\r\n *        [\r\n *            [12,232,443], (raw data set for the first box)\r\n *            [3843,5545,1232], (raw data set for the second box)\r\n *            ...\r\n *        ]\r\n * @param opt.boundIQR=1.5 Data less than min bound is outlier.\r\n *      default 1.5, means Q1 - 1.5 * (Q3 - Q1).\r\n *      If 'none'/0 passed, min bound will not be used.\r\n */\r\n\r\nexport default function prepareBoxplotData(rawData, opt) {\r\n  opt = opt || {};\r\n  var boxData = [];\r\n  var outliers = [];\r\n  var boundIQR = opt.boundIQR;\r\n  var useExtreme = boundIQR === 'none' || boundIQR === 0;\r\n\r\n  for (var i = 0; i < rawData.length; i++) {\r\n    var ascList = asc(rawData[i].slice());\r\n    var Q1 = quantile(ascList, 0.25);\r\n    var Q2 = quantile(ascList, 0.5);\r\n    var Q3 = quantile(ascList, 0.75);\r\n    var min = ascList[0];\r\n    var max = ascList[ascList.length - 1];\r\n    var bound = (boundIQR == null ? 1.5 : boundIQR) * (Q3 - Q1);\r\n    var low = useExtreme ? min : Math.max(min, Q1 - bound);\r\n    var high = useExtreme ? max : Math.min(max, Q3 + bound);\r\n    var itemNameFormatter = opt.itemNameFormatter;\r\n    var itemName = isFunction(itemNameFormatter) ? itemNameFormatter({\r\n      value: i\r\n    }) : isString(itemNameFormatter) ? itemNameFormatter.replace('{value}', i + '') : i + '';\r\n    boxData.push([itemName, low, Q1, Q2, Q3, high]);\r\n\r\n    for (var j = 0; j < ascList.length; j++) {\r\n      var dataItem = ascList[j];\r\n\r\n      if (dataItem < low || dataItem > high) {\r\n        var outlier = [itemName, dataItem];\r\n        outliers.push(outlier);\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    boxData: boxData,\r\n    outliers: outliers\r\n  };\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport prepareBoxplotData from './prepareBoxplotData.js';\r\nimport { throwError, makePrintable } from '../../util/log.js';\r\nimport { SOURCE_FORMAT_ARRAY_ROWS } from '../../util/types.js';\r\nexport var boxplotTransform = {\r\n  type: 'echarts:boxplot',\r\n  transform: function transform(params) {\r\n    var upstream = params.upstream;\r\n\r\n    if (upstream.sourceFormat !== SOURCE_FORMAT_ARRAY_ROWS) {\r\n      var errMsg = '';\r\n\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        errMsg = makePrintable('source data is not applicable for this boxplot transform. Expect number[][].');\r\n      }\r\n\r\n      throwError(errMsg);\r\n    }\r\n\r\n    var result = prepareBoxplotData(upstream.getRawData(), params.config);\r\n    return [{\r\n      dimensions: ['ItemName', 'Low', 'Q1', 'Q2', 'Q3', 'High'],\r\n      data: result.boxData\r\n    }, {\r\n      data: result.outliers\r\n    }];\r\n  }\r\n};", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport BoxplotSeriesModel from './BoxplotSeries.js';\r\nimport BoxplotView from './BoxplotView.js';\r\nimport boxplotLayout from './boxplotLayout.js';\r\nimport { boxplotTransform } from './boxplotTransform.js';\r\nexport function install(registers) {\r\n  registers.registerSeriesModel(BoxplotSeriesModel);\r\n  registers.registerChartView(BoxplotView);\r\n  registers.registerLayout(boxplotLayout);\r\n  registers.registerTransform(boxplotTransform);\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport ChartView from '../../view/Chart.js';\r\nimport * as graphic from '../../util/graphic.js';\r\nimport { setStatesStylesFromModel } from '../../util/states.js';\r\nimport Path from 'zrender/lib/graphic/Path.js';\r\nimport { createClipPath } from '../helper/createClipPathFromCoordSys.js';\r\nimport { saveOldStyle } from '../../animation/basicTransition.js';\r\nvar SKIP_PROPS = ['color', 'borderColor'];\r\n\r\nvar CandlestickView =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(CandlestickView, _super);\r\n\r\n  function CandlestickView() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = CandlestickView.type;\r\n    return _this;\r\n  }\r\n\r\n  CandlestickView.prototype.render = function (seriesModel, ecModel, api) {\r\n    // If there is clipPath created in large mode. Remove it.\r\n    this.group.removeClipPath(); // Clear previously rendered progressive elements.\r\n\r\n    this._progressiveEls = null;\r\n\r\n    this._updateDrawMode(seriesModel);\r\n\r\n    this._isLargeDraw ? this._renderLarge(seriesModel) : this._renderNormal(seriesModel);\r\n  };\r\n\r\n  CandlestickView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\r\n    this._clear();\r\n\r\n    this._updateDrawMode(seriesModel);\r\n  };\r\n\r\n  CandlestickView.prototype.incrementalRender = function (params, seriesModel, ecModel, api) {\r\n    this._progressiveEls = [];\r\n    this._isLargeDraw ? this._incrementalRenderLarge(params, seriesModel) : this._incrementalRenderNormal(params, seriesModel);\r\n  };\r\n\r\n  CandlestickView.prototype.eachRendered = function (cb) {\r\n    graphic.traverseElements(this._progressiveEls || this.group, cb);\r\n  };\r\n\r\n  CandlestickView.prototype._updateDrawMode = function (seriesModel) {\r\n    var isLargeDraw = seriesModel.pipelineContext.large;\r\n\r\n    if (this._isLargeDraw == null || isLargeDraw !== this._isLargeDraw) {\r\n      this._isLargeDraw = isLargeDraw;\r\n\r\n      this._clear();\r\n    }\r\n  };\r\n\r\n  CandlestickView.prototype._renderNormal = function (seriesModel) {\r\n    var data = seriesModel.getData();\r\n    var oldData = this._data;\r\n    var group = this.group;\r\n    var isSimpleBox = data.getLayout('isSimpleBox');\r\n    var needsClip = seriesModel.get('clip', true);\r\n    var coord = seriesModel.coordinateSystem;\r\n    var clipArea = coord.getArea && coord.getArea(); // There is no old data only when first rendering or switching from\r\n    // stream mode to normal mode, where previous elements should be removed.\r\n\r\n    if (!this._data) {\r\n      group.removeAll();\r\n    }\r\n\r\n    data.diff(oldData).add(function (newIdx) {\r\n      if (data.hasValue(newIdx)) {\r\n        var itemLayout = data.getItemLayout(newIdx);\r\n\r\n        if (needsClip && isNormalBoxClipped(clipArea, itemLayout)) {\r\n          return;\r\n        }\r\n\r\n        var el = createNormalBox(itemLayout, newIdx, true);\r\n        graphic.initProps(el, {\r\n          shape: {\r\n            points: itemLayout.ends\r\n          }\r\n        }, seriesModel, newIdx);\r\n        setBoxCommon(el, data, newIdx, isSimpleBox);\r\n        group.add(el);\r\n        data.setItemGraphicEl(newIdx, el);\r\n      }\r\n    }).update(function (newIdx, oldIdx) {\r\n      var el = oldData.getItemGraphicEl(oldIdx); // Empty data\r\n\r\n      if (!data.hasValue(newIdx)) {\r\n        group.remove(el);\r\n        return;\r\n      }\r\n\r\n      var itemLayout = data.getItemLayout(newIdx);\r\n\r\n      if (needsClip && isNormalBoxClipped(clipArea, itemLayout)) {\r\n        group.remove(el);\r\n        return;\r\n      }\r\n\r\n      if (!el) {\r\n        el = createNormalBox(itemLayout, newIdx);\r\n      } else {\r\n        graphic.updateProps(el, {\r\n          shape: {\r\n            points: itemLayout.ends\r\n          }\r\n        }, seriesModel, newIdx);\r\n        saveOldStyle(el);\r\n      }\r\n\r\n      setBoxCommon(el, data, newIdx, isSimpleBox);\r\n      group.add(el);\r\n      data.setItemGraphicEl(newIdx, el);\r\n    }).remove(function (oldIdx) {\r\n      var el = oldData.getItemGraphicEl(oldIdx);\r\n      el && group.remove(el);\r\n    }).execute();\r\n    this._data = data;\r\n  };\r\n\r\n  CandlestickView.prototype._renderLarge = function (seriesModel) {\r\n    this._clear();\r\n\r\n    createLarge(seriesModel, this.group);\r\n    var clipPath = seriesModel.get('clip', true) ? createClipPath(seriesModel.coordinateSystem, false, seriesModel) : null;\r\n\r\n    if (clipPath) {\r\n      this.group.setClipPath(clipPath);\r\n    } else {\r\n      this.group.removeClipPath();\r\n    }\r\n  };\r\n\r\n  CandlestickView.prototype._incrementalRenderNormal = function (params, seriesModel) {\r\n    var data = seriesModel.getData();\r\n    var isSimpleBox = data.getLayout('isSimpleBox');\r\n    var dataIndex;\r\n\r\n    while ((dataIndex = params.next()) != null) {\r\n      var itemLayout = data.getItemLayout(dataIndex);\r\n      var el = createNormalBox(itemLayout, dataIndex);\r\n      setBoxCommon(el, data, dataIndex, isSimpleBox);\r\n      el.incremental = true;\r\n      this.group.add(el);\r\n\r\n      this._progressiveEls.push(el);\r\n    }\r\n  };\r\n\r\n  CandlestickView.prototype._incrementalRenderLarge = function (params, seriesModel) {\r\n    createLarge(seriesModel, this.group, this._progressiveEls, true);\r\n  };\r\n\r\n  CandlestickView.prototype.remove = function (ecModel) {\r\n    this._clear();\r\n  };\r\n\r\n  CandlestickView.prototype._clear = function () {\r\n    this.group.removeAll();\r\n    this._data = null;\r\n  };\r\n\r\n  CandlestickView.type = 'candlestick';\r\n  return CandlestickView;\r\n}(ChartView);\r\n\r\nvar NormalBoxPathShape =\r\n/** @class */\r\nfunction () {\r\n  function NormalBoxPathShape() {}\r\n\r\n  return NormalBoxPathShape;\r\n}();\r\n\r\nvar NormalBoxPath =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(NormalBoxPath, _super);\r\n\r\n  function NormalBoxPath(opts) {\r\n    var _this = _super.call(this, opts) || this;\r\n\r\n    _this.type = 'normalCandlestickBox';\r\n    return _this;\r\n  }\r\n\r\n  NormalBoxPath.prototype.getDefaultShape = function () {\r\n    return new NormalBoxPathShape();\r\n  };\r\n\r\n  NormalBoxPath.prototype.buildPath = function (ctx, shape) {\r\n    var ends = shape.points;\r\n\r\n    if (this.__simpleBox) {\r\n      ctx.moveTo(ends[4][0], ends[4][1]);\r\n      ctx.lineTo(ends[6][0], ends[6][1]);\r\n    } else {\r\n      ctx.moveTo(ends[0][0], ends[0][1]);\r\n      ctx.lineTo(ends[1][0], ends[1][1]);\r\n      ctx.lineTo(ends[2][0], ends[2][1]);\r\n      ctx.lineTo(ends[3][0], ends[3][1]);\r\n      ctx.closePath();\r\n      ctx.moveTo(ends[4][0], ends[4][1]);\r\n      ctx.lineTo(ends[5][0], ends[5][1]);\r\n      ctx.moveTo(ends[6][0], ends[6][1]);\r\n      ctx.lineTo(ends[7][0], ends[7][1]);\r\n    }\r\n  };\r\n\r\n  return NormalBoxPath;\r\n}(Path);\r\n\r\nfunction createNormalBox(itemLayout, dataIndex, isInit) {\r\n  var ends = itemLayout.ends;\r\n  return new NormalBoxPath({\r\n    shape: {\r\n      points: isInit ? transInit(ends, itemLayout) : ends\r\n    },\r\n    z2: 100\r\n  });\r\n}\r\n\r\nfunction isNormalBoxClipped(clipArea, itemLayout) {\r\n  var clipped = true;\r\n\r\n  for (var i = 0; i < itemLayout.ends.length; i++) {\r\n    // If any point are in the region.\r\n    if (clipArea.contain(itemLayout.ends[i][0], itemLayout.ends[i][1])) {\r\n      clipped = false;\r\n      break;\r\n    }\r\n  }\r\n\r\n  return clipped;\r\n}\r\n\r\nfunction setBoxCommon(el, data, dataIndex, isSimpleBox) {\r\n  var itemModel = data.getItemModel(dataIndex);\r\n  el.useStyle(data.getItemVisual(dataIndex, 'style'));\r\n  el.style.strokeNoScale = true;\r\n  el.__simpleBox = isSimpleBox;\r\n  setStatesStylesFromModel(el, itemModel);\r\n}\r\n\r\nfunction transInit(points, itemLayout) {\r\n  return zrUtil.map(points, function (point) {\r\n    point = point.slice();\r\n    point[1] = itemLayout.initBaseline;\r\n    return point;\r\n  });\r\n}\r\n\r\nvar LargeBoxPathShape =\r\n/** @class */\r\nfunction () {\r\n  function LargeBoxPathShape() {}\r\n\r\n  return LargeBoxPathShape;\r\n}();\r\n\r\nvar LargeBoxPath =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(LargeBoxPath, _super);\r\n\r\n  function LargeBoxPath(opts) {\r\n    var _this = _super.call(this, opts) || this;\r\n\r\n    _this.type = 'largeCandlestickBox';\r\n    return _this;\r\n  }\r\n\r\n  LargeBoxPath.prototype.getDefaultShape = function () {\r\n    return new LargeBoxPathShape();\r\n  };\r\n\r\n  LargeBoxPath.prototype.buildPath = function (ctx, shape) {\r\n    // Drawing lines is more efficient than drawing\r\n    // a whole line or drawing rects.\r\n    var points = shape.points;\r\n\r\n    for (var i = 0; i < points.length;) {\r\n      if (this.__sign === points[i++]) {\r\n        var x = points[i++];\r\n        ctx.moveTo(x, points[i++]);\r\n        ctx.lineTo(x, points[i++]);\r\n      } else {\r\n        i += 3;\r\n      }\r\n    }\r\n  };\r\n\r\n  return LargeBoxPath;\r\n}(Path);\r\n\r\nfunction createLarge(seriesModel, group, progressiveEls, incremental) {\r\n  var data = seriesModel.getData();\r\n  var largePoints = data.getLayout('largePoints');\r\n  var elP = new LargeBoxPath({\r\n    shape: {\r\n      points: largePoints\r\n    },\r\n    __sign: 1,\r\n    ignoreCoarsePointer: true\r\n  });\r\n  group.add(elP);\r\n  var elN = new LargeBoxPath({\r\n    shape: {\r\n      points: largePoints\r\n    },\r\n    __sign: -1,\r\n    ignoreCoarsePointer: true\r\n  });\r\n  group.add(elN);\r\n  var elDoji = new LargeBoxPath({\r\n    shape: {\r\n      points: largePoints\r\n    },\r\n    __sign: 0,\r\n    ignoreCoarsePointer: true\r\n  });\r\n  group.add(elDoji);\r\n  setLargeStyle(1, elP, seriesModel, data);\r\n  setLargeStyle(-1, elN, seriesModel, data);\r\n  setLargeStyle(0, elDoji, seriesModel, data);\r\n\r\n  if (incremental) {\r\n    elP.incremental = true;\r\n    elN.incremental = true;\r\n  }\r\n\r\n  if (progressiveEls) {\r\n    progressiveEls.push(elP, elN);\r\n  }\r\n}\r\n\r\nfunction setLargeStyle(sign, el, seriesModel, data) {\r\n  // TODO put in visual?\r\n  var borderColor = seriesModel.get(['itemStyle', sign > 0 ? 'borderColor' : 'borderColor0']) // Use color for border color by default.\r\n  || seriesModel.get(['itemStyle', sign > 0 ? 'color' : 'color0']);\r\n\r\n  if (sign === 0) {\r\n    borderColor = seriesModel.get(['itemStyle', 'borderColorDoji']);\r\n  } // Color must be excluded.\r\n  // Because symbol provide setColor individually to set fill and stroke\r\n\r\n\r\n  var itemStyle = seriesModel.getModel('itemStyle').getItemStyle(SKIP_PROPS);\r\n  el.useStyle(itemStyle);\r\n  el.style.fill = null;\r\n  el.style.stroke = borderColor;\r\n}\r\n\r\nexport default CandlestickView;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport SeriesModel from '../../model/Series.js';\r\nimport { WhiskerBoxCommonMixin } from '../helper/whiskerBoxCommon.js';\r\nimport { mixin } from 'zrender/lib/core/util.js';\r\n\r\nvar CandlestickSeriesModel =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(CandlestickSeriesModel, _super);\r\n\r\n  function CandlestickSeriesModel() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = CandlestickSeriesModel.type;\r\n    _this.defaultValueDimensions = [{\r\n      name: 'open',\r\n      defaultTooltip: true\r\n    }, {\r\n      name: 'close',\r\n      defaultTooltip: true\r\n    }, {\r\n      name: 'lowest',\r\n      defaultTooltip: true\r\n    }, {\r\n      name: 'highest',\r\n      defaultTooltip: true\r\n    }];\r\n    return _this;\r\n  }\r\n  /**\r\n   * Get dimension for shadow in dataZoom\r\n   * @return dimension name\r\n   */\r\n\r\n\r\n  CandlestickSeriesModel.prototype.getShadowDim = function () {\r\n    return 'open';\r\n  };\r\n\r\n  CandlestickSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\r\n    var itemLayout = data.getItemLayout(dataIndex);\r\n    return itemLayout && selectors.rect(itemLayout.brushRect);\r\n  };\r\n\r\n  CandlestickSeriesModel.type = 'series.candlestick';\r\n  CandlestickSeriesModel.dependencies = ['xAxis', 'yAxis', 'grid'];\r\n  CandlestickSeriesModel.defaultOption = {\r\n    // zlevel: 0,\r\n    z: 2,\r\n    coordinateSystem: 'cartesian2d',\r\n    legendHoverLink: true,\r\n    // xAxisIndex: 0,\r\n    // yAxisIndex: 0,\r\n    layout: null,\r\n    clip: true,\r\n    itemStyle: {\r\n      color: '#eb5454',\r\n      color0: '#47b262',\r\n      borderColor: '#eb5454',\r\n      borderColor0: '#47b262',\r\n      borderColorDoji: null,\r\n      // borderColor: '#d24040',\r\n      // borderColor0: '#398f4f',\r\n      borderWidth: 1\r\n    },\r\n    emphasis: {\r\n      scale: true,\r\n      itemStyle: {\r\n        borderWidth: 2\r\n      }\r\n    },\r\n    barMaxWidth: null,\r\n    barMinWidth: null,\r\n    barWidth: null,\r\n    large: true,\r\n    largeThreshold: 600,\r\n    progressive: 3e3,\r\n    progressiveThreshold: 1e4,\r\n    progressiveChunkMode: 'mod',\r\n    animationEasing: 'linear',\r\n    animationDuration: 300\r\n  };\r\n  return CandlestickSeriesModel;\r\n}(SeriesModel);\r\n\r\nmixin(CandlestickSeriesModel, WhiskerBoxCommonMixin, true);\r\nexport default CandlestickSeriesModel;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nexport default function candlestickPreprocessor(option) {\r\n  if (!option || !zrUtil.isArray(option.series)) {\r\n    return;\r\n  } // Translate 'k' to 'candlestick'.\r\n\r\n\r\n  zrUtil.each(option.series, function (seriesItem) {\r\n    if (zrUtil.isObject(seriesItem) && seriesItem.type === 'k') {\r\n      seriesItem.type = 'candlestick';\r\n    }\r\n  });\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport createRenderPlanner from '../helper/createRenderPlanner.js';\r\nimport { extend } from 'zrender/lib/core/util.js';\r\nvar positiveBorderColorQuery = ['itemStyle', 'borderColor'];\r\nvar negativeBorderColorQuery = ['itemStyle', 'borderColor0'];\r\nvar dojiBorderColorQuery = ['itemStyle', 'borderColorDoji'];\r\nvar positiveColorQuery = ['itemStyle', 'color'];\r\nvar negativeColorQuery = ['itemStyle', 'color0'];\r\nvar candlestickVisual = {\r\n  seriesType: 'candlestick',\r\n  plan: createRenderPlanner(),\r\n  // For legend.\r\n  performRawSeries: true,\r\n  reset: function (seriesModel, ecModel) {\r\n    function getColor(sign, model) {\r\n      return model.get(sign > 0 ? positiveColorQuery : negativeColorQuery);\r\n    }\r\n\r\n    function getBorderColor(sign, model) {\r\n      return model.get(sign === 0 ? dojiBorderColorQuery : sign > 0 ? positiveBorderColorQuery : negativeBorderColorQuery);\r\n    } // Only visible series has each data be visual encoded\r\n\r\n\r\n    if (ecModel.isSeriesFiltered(seriesModel)) {\r\n      return;\r\n    }\r\n\r\n    var isLargeRender = seriesModel.pipelineContext.large;\r\n    return !isLargeRender && {\r\n      progress: function (params, data) {\r\n        var dataIndex;\r\n\r\n        while ((dataIndex = params.next()) != null) {\r\n          var itemModel = data.getItemModel(dataIndex);\r\n          var sign = data.getItemLayout(dataIndex).sign;\r\n          var style = itemModel.getItemStyle();\r\n          style.fill = getColor(sign, itemModel);\r\n          style.stroke = getBorderColor(sign, itemModel) || style.fill;\r\n          var existsStyle = data.ensureUniqueItemVisual(dataIndex, 'style');\r\n          extend(existsStyle, style);\r\n        }\r\n      }\r\n    };\r\n  }\r\n};\r\nexport default candlestickVisual;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { subPixelOptimize } from '../../util/graphic.js';\r\nimport createRenderPlanner from '../helper/createRenderPlanner.js';\r\nimport { parsePercent } from '../../util/number.js';\r\nimport { map, retrieve2 } from 'zrender/lib/core/util.js';\r\nimport { createFloat32Array } from '../../util/vendor.js';\r\nvar candlestickLayout = {\r\n  seriesType: 'candlestick',\r\n  plan: createRenderPlanner(),\r\n  reset: function (seriesModel) {\r\n    var coordSys = seriesModel.coordinateSystem;\r\n    var data = seriesModel.getData();\r\n    var candleWidth = calculateCandleWidth(seriesModel, data);\r\n    var cDimIdx = 0;\r\n    var vDimIdx = 1;\r\n    var coordDims = ['x', 'y'];\r\n    var cDimI = data.getDimensionIndex(data.mapDimension(coordDims[cDimIdx]));\r\n    var vDimsI = map(data.mapDimensionsAll(coordDims[vDimIdx]), data.getDimensionIndex, data);\r\n    var openDimI = vDimsI[0];\r\n    var closeDimI = vDimsI[1];\r\n    var lowestDimI = vDimsI[2];\r\n    var highestDimI = vDimsI[3];\r\n    data.setLayout({\r\n      candleWidth: candleWidth,\r\n      // The value is experimented visually.\r\n      isSimpleBox: candleWidth <= 1.3\r\n    });\r\n\r\n    if (cDimI < 0 || vDimsI.length < 4) {\r\n      return;\r\n    }\r\n\r\n    return {\r\n      progress: seriesModel.pipelineContext.large ? largeProgress : normalProgress\r\n    };\r\n\r\n    function normalProgress(params, data) {\r\n      var dataIndex;\r\n      var store = data.getStore();\r\n\r\n      while ((dataIndex = params.next()) != null) {\r\n        var axisDimVal = store.get(cDimI, dataIndex);\r\n        var openVal = store.get(openDimI, dataIndex);\r\n        var closeVal = store.get(closeDimI, dataIndex);\r\n        var lowestVal = store.get(lowestDimI, dataIndex);\r\n        var highestVal = store.get(highestDimI, dataIndex);\r\n        var ocLow = Math.min(openVal, closeVal);\r\n        var ocHigh = Math.max(openVal, closeVal);\r\n        var ocLowPoint = getPoint(ocLow, axisDimVal);\r\n        var ocHighPoint = getPoint(ocHigh, axisDimVal);\r\n        var lowestPoint = getPoint(lowestVal, axisDimVal);\r\n        var highestPoint = getPoint(highestVal, axisDimVal);\r\n        var ends = [];\r\n        addBodyEnd(ends, ocHighPoint, 0);\r\n        addBodyEnd(ends, ocLowPoint, 1);\r\n        ends.push(subPixelOptimizePoint(highestPoint), subPixelOptimizePoint(ocHighPoint), subPixelOptimizePoint(lowestPoint), subPixelOptimizePoint(ocLowPoint));\r\n        var itemModel = data.getItemModel(dataIndex);\r\n        var hasDojiColor = !!itemModel.get(['itemStyle', 'borderColorDoji']);\r\n        data.setItemLayout(dataIndex, {\r\n          sign: getSign(store, dataIndex, openVal, closeVal, closeDimI, hasDojiColor),\r\n          initBaseline: openVal > closeVal ? ocHighPoint[vDimIdx] : ocLowPoint[vDimIdx],\r\n          ends: ends,\r\n          brushRect: makeBrushRect(lowestVal, highestVal, axisDimVal)\r\n        });\r\n      }\r\n\r\n      function getPoint(val, axisDimVal) {\r\n        var p = [];\r\n        p[cDimIdx] = axisDimVal;\r\n        p[vDimIdx] = val;\r\n        return isNaN(axisDimVal) || isNaN(val) ? [NaN, NaN] : coordSys.dataToPoint(p);\r\n      }\r\n\r\n      function addBodyEnd(ends, point, start) {\r\n        var point1 = point.slice();\r\n        var point2 = point.slice();\r\n        point1[cDimIdx] = subPixelOptimize(point1[cDimIdx] + candleWidth / 2, 1, false);\r\n        point2[cDimIdx] = subPixelOptimize(point2[cDimIdx] - candleWidth / 2, 1, true);\r\n        start ? ends.push(point1, point2) : ends.push(point2, point1);\r\n      }\r\n\r\n      function makeBrushRect(lowestVal, highestVal, axisDimVal) {\r\n        var pmin = getPoint(lowestVal, axisDimVal);\r\n        var pmax = getPoint(highestVal, axisDimVal);\r\n        pmin[cDimIdx] -= candleWidth / 2;\r\n        pmax[cDimIdx] -= candleWidth / 2;\r\n        return {\r\n          x: pmin[0],\r\n          y: pmin[1],\r\n          width: vDimIdx ? candleWidth : pmax[0] - pmin[0],\r\n          height: vDimIdx ? pmax[1] - pmin[1] : candleWidth\r\n        };\r\n      }\r\n\r\n      function subPixelOptimizePoint(point) {\r\n        point[cDimIdx] = subPixelOptimize(point[cDimIdx], 1);\r\n        return point;\r\n      }\r\n    }\r\n\r\n    function largeProgress(params, data) {\r\n      // Structure: [sign, x, yhigh, ylow, sign, x, yhigh, ylow, ...]\r\n      var points = createFloat32Array(params.count * 4);\r\n      var offset = 0;\r\n      var point;\r\n      var tmpIn = [];\r\n      var tmpOut = [];\r\n      var dataIndex;\r\n      var store = data.getStore();\r\n      var hasDojiColor = !!seriesModel.get(['itemStyle', 'borderColorDoji']);\r\n\r\n      while ((dataIndex = params.next()) != null) {\r\n        var axisDimVal = store.get(cDimI, dataIndex);\r\n        var openVal = store.get(openDimI, dataIndex);\r\n        var closeVal = store.get(closeDimI, dataIndex);\r\n        var lowestVal = store.get(lowestDimI, dataIndex);\r\n        var highestVal = store.get(highestDimI, dataIndex);\r\n\r\n        if (isNaN(axisDimVal) || isNaN(lowestVal) || isNaN(highestVal)) {\r\n          points[offset++] = NaN;\r\n          offset += 3;\r\n          continue;\r\n        }\r\n\r\n        points[offset++] = getSign(store, dataIndex, openVal, closeVal, closeDimI, hasDojiColor);\r\n        tmpIn[cDimIdx] = axisDimVal;\r\n        tmpIn[vDimIdx] = lowestVal;\r\n        point = coordSys.dataToPoint(tmpIn, null, tmpOut);\r\n        points[offset++] = point ? point[0] : NaN;\r\n        points[offset++] = point ? point[1] : NaN;\r\n        tmpIn[vDimIdx] = highestVal;\r\n        point = coordSys.dataToPoint(tmpIn, null, tmpOut);\r\n        points[offset++] = point ? point[1] : NaN;\r\n      }\r\n\r\n      data.setLayout('largePoints', points);\r\n    }\r\n  }\r\n};\r\n/**\r\n * Get the sign of a single data.\r\n *\r\n * @returns 0 for doji with hasDojiColor: true,\r\n *          1 for positive,\r\n *          -1 for negative.\r\n */\r\n\r\nfunction getSign(store, dataIndex, openVal, closeVal, closeDimI, hasDojiColor) {\r\n  var sign;\r\n\r\n  if (openVal > closeVal) {\r\n    sign = -1;\r\n  } else if (openVal < closeVal) {\r\n    sign = 1;\r\n  } else {\r\n    sign = hasDojiColor // When doji color is set, use it instead of color/color0.\r\n    ? 0 : dataIndex > 0 // If close === open, compare with close of last record\r\n    ? store.get(closeDimI, dataIndex - 1) <= closeVal ? 1 : -1 : // No record of previous, set to be positive\r\n    1;\r\n  }\r\n\r\n  return sign;\r\n}\r\n\r\nfunction calculateCandleWidth(seriesModel, data) {\r\n  var baseAxis = seriesModel.getBaseAxis();\r\n  var extent;\r\n  var bandWidth = baseAxis.type === 'category' ? baseAxis.getBandWidth() : (extent = baseAxis.getExtent(), Math.abs(extent[1] - extent[0]) / data.count());\r\n  var barMaxWidth = parsePercent(retrieve2(seriesModel.get('barMaxWidth'), bandWidth), bandWidth);\r\n  var barMinWidth = parsePercent(retrieve2(seriesModel.get('barMinWidth'), 1), bandWidth);\r\n  var barWidth = seriesModel.get('barWidth');\r\n  return barWidth != null ? parsePercent(barWidth, bandWidth) // Put max outer to ensure bar visible in spite of overlap.\r\n  : Math.max(Math.min(bandWidth / 2, barMaxWidth), barMinWidth);\r\n}\r\n\r\nexport default candlestickLayout;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport CandlestickView from './CandlestickView.js';\r\nimport CandlestickSeriesModel from './CandlestickSeries.js';\r\nimport preprocessor from './preprocessor.js';\r\nimport candlestickVisual from './candlestickVisual.js';\r\nimport candlestickLayout from './candlestickLayout.js';\r\nexport function install(registers) {\r\n  registers.registerChartView(CandlestickView);\r\n  registers.registerSeriesModel(CandlestickSeriesModel);\r\n  registers.registerPreprocessor(preprocessor);\r\n  registers.registerVisual(candlestickVisual);\r\n  registers.registerLayout(candlestickLayout);\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport { createSymbol, normalizeSymbolOffset, normalizeSymbolSize } from '../../util/symbol.js';\r\nimport { Group } from '../../util/graphic.js';\r\nimport { enterEmphasis, leaveEmphasis, toggleHoverEmphasis } from '../../util/states.js';\r\nimport SymbolClz from './Symbol.js';\r\n\r\nfunction updateRipplePath(rippleGroup, effectCfg) {\r\n  var color = effectCfg.rippleEffectColor || effectCfg.color;\r\n  rippleGroup.eachChild(function (ripplePath) {\r\n    ripplePath.attr({\r\n      z: effectCfg.z,\r\n      zlevel: effectCfg.zlevel,\r\n      style: {\r\n        stroke: effectCfg.brushType === 'stroke' ? color : null,\r\n        fill: effectCfg.brushType === 'fill' ? color : null\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\nvar EffectSymbol =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(EffectSymbol, _super);\r\n\r\n  function EffectSymbol(data, idx) {\r\n    var _this = _super.call(this) || this;\r\n\r\n    var symbol = new SymbolClz(data, idx);\r\n    var rippleGroup = new Group();\r\n\r\n    _this.add(symbol);\r\n\r\n    _this.add(rippleGroup);\r\n\r\n    _this.updateData(data, idx);\r\n\r\n    return _this;\r\n  }\r\n\r\n  EffectSymbol.prototype.stopEffectAnimation = function () {\r\n    this.childAt(1).removeAll();\r\n  };\r\n\r\n  EffectSymbol.prototype.startEffectAnimation = function (effectCfg) {\r\n    var symbolType = effectCfg.symbolType;\r\n    var color = effectCfg.color;\r\n    var rippleNumber = effectCfg.rippleNumber;\r\n    var rippleGroup = this.childAt(1);\r\n\r\n    for (var i = 0; i < rippleNumber; i++) {\r\n      // If width/height are set too small (e.g., set to 1) on ios10\r\n      // and macOS Sierra, a circle stroke become a rect, no matter what\r\n      // the scale is set. So we set width/height as 2. See #4136.\r\n      var ripplePath = createSymbol(symbolType, -1, -1, 2, 2, color);\r\n      ripplePath.attr({\r\n        style: {\r\n          strokeNoScale: true\r\n        },\r\n        z2: 99,\r\n        silent: true,\r\n        scaleX: 0.5,\r\n        scaleY: 0.5\r\n      });\r\n      var delay = -i / rippleNumber * effectCfg.period + effectCfg.effectOffset;\r\n      ripplePath.animate('', true).when(effectCfg.period, {\r\n        scaleX: effectCfg.rippleScale / 2,\r\n        scaleY: effectCfg.rippleScale / 2\r\n      }).delay(delay).start();\r\n      ripplePath.animateStyle(true).when(effectCfg.period, {\r\n        opacity: 0\r\n      }).delay(delay).start();\r\n      rippleGroup.add(ripplePath);\r\n    }\r\n\r\n    updateRipplePath(rippleGroup, effectCfg);\r\n  };\r\n  /**\r\n   * Update effect symbol\r\n   */\r\n\r\n\r\n  EffectSymbol.prototype.updateEffectAnimation = function (effectCfg) {\r\n    var oldEffectCfg = this._effectCfg;\r\n    var rippleGroup = this.childAt(1); // Must reinitialize effect if following configuration changed\r\n\r\n    var DIFFICULT_PROPS = ['symbolType', 'period', 'rippleScale', 'rippleNumber'];\r\n\r\n    for (var i = 0; i < DIFFICULT_PROPS.length; i++) {\r\n      var propName = DIFFICULT_PROPS[i];\r\n\r\n      if (oldEffectCfg[propName] !== effectCfg[propName]) {\r\n        this.stopEffectAnimation();\r\n        this.startEffectAnimation(effectCfg);\r\n        return;\r\n      }\r\n    }\r\n\r\n    updateRipplePath(rippleGroup, effectCfg);\r\n  };\r\n  /**\r\n   * Highlight symbol\r\n   */\r\n\r\n\r\n  EffectSymbol.prototype.highlight = function () {\r\n    enterEmphasis(this);\r\n  };\r\n  /**\r\n   * Downplay symbol\r\n   */\r\n\r\n\r\n  EffectSymbol.prototype.downplay = function () {\r\n    leaveEmphasis(this);\r\n  };\r\n\r\n  EffectSymbol.prototype.getSymbolType = function () {\r\n    var symbol = this.childAt(0);\r\n    return symbol && symbol.getSymbolType();\r\n  };\r\n  /**\r\n   * Update symbol properties\r\n   */\r\n\r\n\r\n  EffectSymbol.prototype.updateData = function (data, idx) {\r\n    var _this = this;\r\n\r\n    var seriesModel = data.hostModel;\r\n    this.childAt(0).updateData(data, idx);\r\n    var rippleGroup = this.childAt(1);\r\n    var itemModel = data.getItemModel(idx);\r\n    var symbolType = data.getItemVisual(idx, 'symbol');\r\n    var symbolSize = normalizeSymbolSize(data.getItemVisual(idx, 'symbolSize'));\r\n    var symbolStyle = data.getItemVisual(idx, 'style');\r\n    var color = symbolStyle && symbolStyle.fill;\r\n    var emphasisModel = itemModel.getModel('emphasis');\r\n    rippleGroup.setScale(symbolSize);\r\n    rippleGroup.traverse(function (ripplePath) {\r\n      ripplePath.setStyle('fill', color);\r\n    });\r\n    var symbolOffset = normalizeSymbolOffset(data.getItemVisual(idx, 'symbolOffset'), symbolSize);\r\n\r\n    if (symbolOffset) {\r\n      rippleGroup.x = symbolOffset[0];\r\n      rippleGroup.y = symbolOffset[1];\r\n    }\r\n\r\n    var symbolRotate = data.getItemVisual(idx, 'symbolRotate');\r\n    rippleGroup.rotation = (symbolRotate || 0) * Math.PI / 180 || 0;\r\n    var effectCfg = {};\r\n    effectCfg.showEffectOn = seriesModel.get('showEffectOn');\r\n    effectCfg.rippleScale = itemModel.get(['rippleEffect', 'scale']);\r\n    effectCfg.brushType = itemModel.get(['rippleEffect', 'brushType']);\r\n    effectCfg.period = itemModel.get(['rippleEffect', 'period']) * 1000;\r\n    effectCfg.effectOffset = idx / data.count();\r\n    effectCfg.z = seriesModel.getShallow('z') || 0;\r\n    effectCfg.zlevel = seriesModel.getShallow('zlevel') || 0;\r\n    effectCfg.symbolType = symbolType;\r\n    effectCfg.color = color;\r\n    effectCfg.rippleEffectColor = itemModel.get(['rippleEffect', 'color']);\r\n    effectCfg.rippleNumber = itemModel.get(['rippleEffect', 'number']);\r\n\r\n    if (effectCfg.showEffectOn === 'render') {\r\n      this._effectCfg ? this.updateEffectAnimation(effectCfg) : this.startEffectAnimation(effectCfg);\r\n      this._effectCfg = effectCfg;\r\n    } else {\r\n      // Not keep old effect config\r\n      this._effectCfg = null;\r\n      this.stopEffectAnimation();\r\n\r\n      this.onHoverStateChange = function (toState) {\r\n        if (toState === 'emphasis') {\r\n          if (effectCfg.showEffectOn !== 'render') {\r\n            _this.startEffectAnimation(effectCfg);\r\n          }\r\n        } else if (toState === 'normal') {\r\n          if (effectCfg.showEffectOn !== 'render') {\r\n            _this.stopEffectAnimation();\r\n          }\r\n        }\r\n      };\r\n    }\r\n\r\n    this._effectCfg = effectCfg;\r\n    toggleHoverEmphasis(this, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\r\n  };\r\n\r\n  ;\r\n\r\n  EffectSymbol.prototype.fadeOut = function (cb) {\r\n    cb && cb();\r\n  };\r\n\r\n  ;\r\n  return EffectSymbol;\r\n}(Group);\r\n\r\nexport default EffectSymbol;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport SymbolDraw from '../helper/SymbolDraw.js';\r\nimport EffectSymbol from '../helper/EffectSymbol.js';\r\nimport * as matrix from 'zrender/lib/core/matrix.js';\r\nimport pointsLayout from '../../layout/points.js';\r\nimport ChartView from '../../view/Chart.js';\r\n\r\nvar EffectScatterView =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(EffectScatterView, _super);\r\n\r\n  function EffectScatterView() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = EffectScatterView.type;\r\n    return _this;\r\n  }\r\n\r\n  EffectScatterView.prototype.init = function () {\r\n    this._symbolDraw = new SymbolDraw(EffectSymbol);\r\n  };\r\n\r\n  EffectScatterView.prototype.render = function (seriesModel, ecModel, api) {\r\n    var data = seriesModel.getData();\r\n    var effectSymbolDraw = this._symbolDraw;\r\n    effectSymbolDraw.updateData(data, {\r\n      clipShape: this._getClipShape(seriesModel)\r\n    });\r\n    this.group.add(effectSymbolDraw.group);\r\n  };\r\n\r\n  EffectScatterView.prototype._getClipShape = function (seriesModel) {\r\n    var coordSys = seriesModel.coordinateSystem;\r\n    var clipArea = coordSys && coordSys.getArea && coordSys.getArea();\r\n    return seriesModel.get('clip', true) ? clipArea : null;\r\n  };\r\n\r\n  EffectScatterView.prototype.updateTransform = function (seriesModel, ecModel, api) {\r\n    var data = seriesModel.getData();\r\n    this.group.dirty();\r\n    var res = pointsLayout('').reset(seriesModel, ecModel, api);\r\n\r\n    if (res.progress) {\r\n      res.progress({\r\n        start: 0,\r\n        end: data.count(),\r\n        count: data.count()\r\n      }, data);\r\n    }\r\n\r\n    this._symbolDraw.updateLayout();\r\n  };\r\n\r\n  EffectScatterView.prototype._updateGroupTransform = function (seriesModel) {\r\n    var coordSys = seriesModel.coordinateSystem;\r\n\r\n    if (coordSys && coordSys.getRoamTransform) {\r\n      this.group.transform = matrix.clone(coordSys.getRoamTransform());\r\n      this.group.decomposeTransform();\r\n    }\r\n  };\r\n\r\n  EffectScatterView.prototype.remove = function (ecModel, api) {\r\n    this._symbolDraw && this._symbolDraw.remove(true);\r\n  };\r\n\r\n  EffectScatterView.type = 'effectScatter';\r\n  return EffectScatterView;\r\n}(ChartView);\r\n\r\nexport default EffectScatterView;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport createSeriesData from '../helper/createSeriesData.js';\r\nimport SeriesModel from '../../model/Series.js';\r\n\r\nvar EffectScatterSeriesModel =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(EffectScatterSeriesModel, _super);\r\n\r\n  function EffectScatterSeriesModel() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = EffectScatterSeriesModel.type;\r\n    _this.hasSymbolVisual = true;\r\n    return _this;\r\n  }\r\n\r\n  EffectScatterSeriesModel.prototype.getInitialData = function (option, ecModel) {\r\n    return createSeriesData(null, this, {\r\n      useEncodeDefaulter: true\r\n    });\r\n  };\r\n\r\n  EffectScatterSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\r\n    return selectors.point(data.getItemLayout(dataIndex));\r\n  };\r\n\r\n  EffectScatterSeriesModel.type = 'series.effectScatter';\r\n  EffectScatterSeriesModel.dependencies = ['grid', 'polar'];\r\n  EffectScatterSeriesModel.defaultOption = {\r\n    coordinateSystem: 'cartesian2d',\r\n    // zlevel: 0,\r\n    z: 2,\r\n    legendHoverLink: true,\r\n    effectType: 'ripple',\r\n    progressive: 0,\r\n    // When to show the effect, option: 'render'|'emphasis'\r\n    showEffectOn: 'render',\r\n    clip: true,\r\n    // Ripple effect config\r\n    rippleEffect: {\r\n      period: 4,\r\n      // Scale of ripple\r\n      scale: 2.5,\r\n      // Brush type can be fill or stroke\r\n      brushType: 'fill',\r\n      // Ripple number\r\n      number: 3\r\n    },\r\n    universalTransition: {\r\n      divideShape: 'clone'\r\n    },\r\n    // Cartesian coordinate system\r\n    // xAxisIndex: 0,\r\n    // yAxisIndex: 0,\r\n    // Polar coordinate system\r\n    // polarIndex: 0,\r\n    // Geo coordinate system\r\n    // geoIndex: 0,\r\n    // symbol: null,        // \u56FE\u5F62\u7C7B\u578B\r\n    symbolSize: 10 // \u56FE\u5F62\u5927\u5C0F\uFF0C\u534A\u5BBD\uFF08\u534A\u5F84\uFF09\u53C2\u6570\uFF0C\u5F53\u56FE\u5F62\u4E3A\u65B9\u5411\u6216\u83F1\u5F62\u5219\u603B\u5BBD\u5EA6\u4E3AsymbolSize * 2\r\n    // symbolRotate: null,  // \u56FE\u5F62\u65CB\u8F6C\u63A7\u5236\r\n    // itemStyle: {\r\n    //     opacity: 1\r\n    // }\r\n\r\n  };\r\n  return EffectScatterSeriesModel;\r\n}(SeriesModel);\r\n\r\nexport default EffectScatterSeriesModel;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport EffectScatterView from './EffectScatterView.js';\r\nimport EffectScatterSeriesModel from './EffectScatterSeries.js';\r\nimport layoutPoints from '../../layout/points.js';\r\nexport function install(registers) {\r\n  registers.registerChartView(EffectScatterView);\r\n  registers.registerSeriesModel(EffectScatterSeriesModel);\r\n  registers.registerLayout(layoutPoints('effectScatter'));\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\n/**\r\n * Provide effect for line\r\n */\r\n\r\nimport * as graphic from '../../util/graphic.js';\r\nimport Line from './Line.js';\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport { createSymbol } from '../../util/symbol.js';\r\nimport * as vec2 from 'zrender/lib/core/vector.js';\r\nimport * as curveUtil from 'zrender/lib/core/curve.js';\r\n\r\nvar EffectLine =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(EffectLine, _super);\r\n\r\n  function EffectLine(lineData, idx, seriesScope) {\r\n    var _this = _super.call(this) || this;\r\n\r\n    _this.add(_this.createLine(lineData, idx, seriesScope));\r\n\r\n    _this._updateEffectSymbol(lineData, idx);\r\n\r\n    return _this;\r\n  }\r\n\r\n  EffectLine.prototype.createLine = function (lineData, idx, seriesScope) {\r\n    return new Line(lineData, idx, seriesScope);\r\n  };\r\n\r\n  EffectLine.prototype._updateEffectSymbol = function (lineData, idx) {\r\n    var itemModel = lineData.getItemModel(idx);\r\n    var effectModel = itemModel.getModel('effect');\r\n    var size = effectModel.get('symbolSize');\r\n    var symbolType = effectModel.get('symbol');\r\n\r\n    if (!zrUtil.isArray(size)) {\r\n      size = [size, size];\r\n    }\r\n\r\n    var lineStyle = lineData.getItemVisual(idx, 'style');\r\n    var color = effectModel.get('color') || lineStyle && lineStyle.stroke;\r\n    var symbol = this.childAt(1);\r\n\r\n    if (this._symbolType !== symbolType) {\r\n      // Remove previous\r\n      this.remove(symbol);\r\n      symbol = createSymbol(symbolType, -0.5, -0.5, 1, 1, color);\r\n      symbol.z2 = 100;\r\n      symbol.culling = true;\r\n      this.add(symbol);\r\n    } // Symbol may be removed if loop is false\r\n\r\n\r\n    if (!symbol) {\r\n      return;\r\n    } // Shadow color is same with color in default\r\n\r\n\r\n    symbol.setStyle('shadowColor', color);\r\n    symbol.setStyle(effectModel.getItemStyle(['color']));\r\n    symbol.scaleX = size[0];\r\n    symbol.scaleY = size[1];\r\n    symbol.setColor(color);\r\n    this._symbolType = symbolType;\r\n    this._symbolScale = size;\r\n\r\n    this._updateEffectAnimation(lineData, effectModel, idx);\r\n  };\r\n\r\n  EffectLine.prototype._updateEffectAnimation = function (lineData, effectModel, idx) {\r\n    var symbol = this.childAt(1);\r\n\r\n    if (!symbol) {\r\n      return;\r\n    }\r\n\r\n    var points = lineData.getItemLayout(idx);\r\n    var period = effectModel.get('period') * 1000;\r\n    var loop = effectModel.get('loop');\r\n    var roundTrip = effectModel.get('roundTrip');\r\n    var constantSpeed = effectModel.get('constantSpeed');\r\n    var delayExpr = zrUtil.retrieve(effectModel.get('delay'), function (idx) {\r\n      return idx / lineData.count() * period / 3;\r\n    }); // Ignore when updating\r\n\r\n    symbol.ignore = true;\r\n\r\n    this._updateAnimationPoints(symbol, points);\r\n\r\n    if (constantSpeed > 0) {\r\n      period = this._getLineLength(symbol) / constantSpeed * 1000;\r\n    }\r\n\r\n    if (period !== this._period || loop !== this._loop || roundTrip !== this._roundTrip) {\r\n      symbol.stopAnimation();\r\n      var delayNum = void 0;\r\n\r\n      if (zrUtil.isFunction(delayExpr)) {\r\n        delayNum = delayExpr(idx);\r\n      } else {\r\n        delayNum = delayExpr;\r\n      }\r\n\r\n      if (symbol.__t > 0) {\r\n        delayNum = -period * symbol.__t;\r\n      }\r\n\r\n      this._animateSymbol(symbol, period, delayNum, loop, roundTrip);\r\n    }\r\n\r\n    this._period = period;\r\n    this._loop = loop;\r\n    this._roundTrip = roundTrip;\r\n  };\r\n\r\n  EffectLine.prototype._animateSymbol = function (symbol, period, delayNum, loop, roundTrip) {\r\n    if (period > 0) {\r\n      symbol.__t = 0;\r\n      var self_1 = this;\r\n      var animator = symbol.animate('', loop).when(roundTrip ? period * 2 : period, {\r\n        __t: roundTrip ? 2 : 1\r\n      }).delay(delayNum).during(function () {\r\n        self_1._updateSymbolPosition(symbol);\r\n      });\r\n\r\n      if (!loop) {\r\n        animator.done(function () {\r\n          self_1.remove(symbol);\r\n        });\r\n      }\r\n\r\n      animator.start();\r\n    }\r\n  };\r\n\r\n  EffectLine.prototype._getLineLength = function (symbol) {\r\n    // Not so accurate\r\n    return vec2.dist(symbol.__p1, symbol.__cp1) + vec2.dist(symbol.__cp1, symbol.__p2);\r\n  };\r\n\r\n  EffectLine.prototype._updateAnimationPoints = function (symbol, points) {\r\n    symbol.__p1 = points[0];\r\n    symbol.__p2 = points[1];\r\n    symbol.__cp1 = points[2] || [(points[0][0] + points[1][0]) / 2, (points[0][1] + points[1][1]) / 2];\r\n  };\r\n\r\n  EffectLine.prototype.updateData = function (lineData, idx, seriesScope) {\r\n    this.childAt(0).updateData(lineData, idx, seriesScope);\r\n\r\n    this._updateEffectSymbol(lineData, idx);\r\n  };\r\n\r\n  EffectLine.prototype._updateSymbolPosition = function (symbol) {\r\n    var p1 = symbol.__p1;\r\n    var p2 = symbol.__p2;\r\n    var cp1 = symbol.__cp1;\r\n    var t = symbol.__t < 1 ? symbol.__t : 2 - symbol.__t;\r\n    var pos = [symbol.x, symbol.y];\r\n    var lastPos = pos.slice();\r\n    var quadraticAt = curveUtil.quadraticAt;\r\n    var quadraticDerivativeAt = curveUtil.quadraticDerivativeAt;\r\n    pos[0] = quadraticAt(p1[0], cp1[0], p2[0], t);\r\n    pos[1] = quadraticAt(p1[1], cp1[1], p2[1], t); // Tangent\r\n\r\n    var tx = symbol.__t < 1 ? quadraticDerivativeAt(p1[0], cp1[0], p2[0], t) : quadraticDerivativeAt(p2[0], cp1[0], p1[0], 1 - t);\r\n    var ty = symbol.__t < 1 ? quadraticDerivativeAt(p1[1], cp1[1], p2[1], t) : quadraticDerivativeAt(p2[1], cp1[1], p1[1], 1 - t);\r\n    symbol.rotation = -Math.atan2(ty, tx) - Math.PI / 2; // enable continuity trail for 'line', 'rect', 'roundRect' symbolType\r\n\r\n    if (this._symbolType === 'line' || this._symbolType === 'rect' || this._symbolType === 'roundRect') {\r\n      if (symbol.__lastT !== undefined && symbol.__lastT < symbol.__t) {\r\n        symbol.scaleY = vec2.dist(lastPos, pos) * 1.05; // make sure the last segment render within endPoint\r\n\r\n        if (t === 1) {\r\n          pos[0] = lastPos[0] + (pos[0] - lastPos[0]) / 2;\r\n          pos[1] = lastPos[1] + (pos[1] - lastPos[1]) / 2;\r\n        }\r\n      } else if (symbol.__lastT === 1) {\r\n        // After first loop, symbol.__t does NOT start with 0, so connect p1 to pos directly.\r\n        symbol.scaleY = 2 * vec2.dist(p1, pos);\r\n      } else {\r\n        symbol.scaleY = this._symbolScale[1];\r\n      }\r\n    }\r\n\r\n    symbol.__lastT = symbol.__t;\r\n    symbol.ignore = false;\r\n    symbol.x = pos[0];\r\n    symbol.y = pos[1];\r\n  };\r\n\r\n  EffectLine.prototype.updateLayout = function (lineData, idx) {\r\n    this.childAt(0).updateLayout(lineData, idx);\r\n    var effectModel = lineData.getItemModel(idx).getModel('effect');\r\n\r\n    this._updateEffectAnimation(lineData, effectModel, idx);\r\n  };\r\n\r\n  return EffectLine;\r\n}(graphic.Group);\r\n\r\nexport default EffectLine;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport * as graphic from '../../util/graphic.js';\r\nimport { toggleHoverEmphasis } from '../../util/states.js';\r\n\r\nvar Polyline =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(Polyline, _super);\r\n\r\n  function Polyline(lineData, idx, seriesScope) {\r\n    var _this = _super.call(this) || this;\r\n\r\n    _this._createPolyline(lineData, idx, seriesScope);\r\n\r\n    return _this;\r\n  }\r\n\r\n  Polyline.prototype._createPolyline = function (lineData, idx, seriesScope) {\r\n    // let seriesModel = lineData.hostModel;\r\n    var points = lineData.getItemLayout(idx);\r\n    var line = new graphic.Polyline({\r\n      shape: {\r\n        points: points\r\n      }\r\n    });\r\n    this.add(line);\r\n\r\n    this._updateCommonStl(lineData, idx, seriesScope);\r\n  };\r\n\r\n  ;\r\n\r\n  Polyline.prototype.updateData = function (lineData, idx, seriesScope) {\r\n    var seriesModel = lineData.hostModel;\r\n    var line = this.childAt(0);\r\n    var target = {\r\n      shape: {\r\n        points: lineData.getItemLayout(idx)\r\n      }\r\n    };\r\n    graphic.updateProps(line, target, seriesModel, idx);\r\n\r\n    this._updateCommonStl(lineData, idx, seriesScope);\r\n  };\r\n\r\n  ;\r\n\r\n  Polyline.prototype._updateCommonStl = function (lineData, idx, seriesScope) {\r\n    var line = this.childAt(0);\r\n    var itemModel = lineData.getItemModel(idx);\r\n    var emphasisLineStyle = seriesScope && seriesScope.emphasisLineStyle;\r\n    var focus = seriesScope && seriesScope.focus;\r\n    var blurScope = seriesScope && seriesScope.blurScope;\r\n    var emphasisDisabled = seriesScope && seriesScope.emphasisDisabled;\r\n\r\n    if (!seriesScope || lineData.hasItemOption) {\r\n      var emphasisModel = itemModel.getModel('emphasis');\r\n      emphasisLineStyle = emphasisModel.getModel('lineStyle').getLineStyle();\r\n      emphasisDisabled = emphasisModel.get('disabled');\r\n      focus = emphasisModel.get('focus');\r\n      blurScope = emphasisModel.get('blurScope');\r\n    }\r\n\r\n    line.useStyle(lineData.getItemVisual(idx, 'style'));\r\n    line.style.fill = null;\r\n    line.style.strokeNoScale = true;\r\n    var lineEmphasisState = line.ensureState('emphasis');\r\n    lineEmphasisState.style = emphasisLineStyle;\r\n    toggleHoverEmphasis(this, focus, blurScope, emphasisDisabled);\r\n  };\r\n\r\n  ;\r\n\r\n  Polyline.prototype.updateLayout = function (lineData, idx) {\r\n    var polyline = this.childAt(0);\r\n    polyline.setShape('points', lineData.getItemLayout(idx));\r\n  };\r\n\r\n  ;\r\n  return Polyline;\r\n}(graphic.Group);\r\n\r\nexport default Polyline;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport Polyline from './Polyline.js';\r\nimport EffectLine from './EffectLine.js';\r\nimport * as vec2 from 'zrender/lib/core/vector.js';\r\n\r\nvar EffectPolyline =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(EffectPolyline, _super);\r\n\r\n  function EffectPolyline() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this._lastFrame = 0;\r\n    _this._lastFramePercent = 0;\r\n    return _this;\r\n  } // Override\r\n\r\n\r\n  EffectPolyline.prototype.createLine = function (lineData, idx, seriesScope) {\r\n    return new Polyline(lineData, idx, seriesScope);\r\n  };\r\n\r\n  ; // Override\r\n\r\n  EffectPolyline.prototype._updateAnimationPoints = function (symbol, points) {\r\n    this._points = points;\r\n    var accLenArr = [0];\r\n    var len = 0;\r\n\r\n    for (var i = 1; i < points.length; i++) {\r\n      var p1 = points[i - 1];\r\n      var p2 = points[i];\r\n      len += vec2.dist(p1, p2);\r\n      accLenArr.push(len);\r\n    }\r\n\r\n    if (len === 0) {\r\n      this._length = 0;\r\n      return;\r\n    }\r\n\r\n    for (var i = 0; i < accLenArr.length; i++) {\r\n      accLenArr[i] /= len;\r\n    }\r\n\r\n    this._offsets = accLenArr;\r\n    this._length = len;\r\n  };\r\n\r\n  ; // Override\r\n\r\n  EffectPolyline.prototype._getLineLength = function () {\r\n    return this._length;\r\n  };\r\n\r\n  ; // Override\r\n\r\n  EffectPolyline.prototype._updateSymbolPosition = function (symbol) {\r\n    var t = symbol.__t < 1 ? symbol.__t : 2 - symbol.__t;\r\n    var points = this._points;\r\n    var offsets = this._offsets;\r\n    var len = points.length;\r\n\r\n    if (!offsets) {\r\n      // Has length 0\r\n      return;\r\n    }\r\n\r\n    var lastFrame = this._lastFrame;\r\n    var frame;\r\n\r\n    if (t < this._lastFramePercent) {\r\n      // Start from the next frame\r\n      // PENDING start from lastFrame ?\r\n      var start = Math.min(lastFrame + 1, len - 1);\r\n\r\n      for (frame = start; frame >= 0; frame--) {\r\n        if (offsets[frame] <= t) {\r\n          break;\r\n        }\r\n      } // PENDING really need to do this ?\r\n\r\n\r\n      frame = Math.min(frame, len - 2);\r\n    } else {\r\n      for (frame = lastFrame; frame < len; frame++) {\r\n        if (offsets[frame] > t) {\r\n          break;\r\n        }\r\n      }\r\n\r\n      frame = Math.min(frame - 1, len - 2);\r\n    }\r\n\r\n    var p = (t - offsets[frame]) / (offsets[frame + 1] - offsets[frame]);\r\n    var p0 = points[frame];\r\n    var p1 = points[frame + 1];\r\n    symbol.x = p0[0] * (1 - p) + p * p1[0];\r\n    symbol.y = p0[1] * (1 - p) + p * p1[1];\r\n    var tx = symbol.__t < 1 ? p1[0] - p0[0] : p0[0] - p1[0];\r\n    var ty = symbol.__t < 1 ? p1[1] - p0[1] : p0[1] - p1[1];\r\n    symbol.rotation = -Math.atan2(ty, tx) - Math.PI / 2;\r\n    this._lastFrame = frame;\r\n    this._lastFramePercent = t;\r\n    symbol.ignore = false;\r\n  };\r\n\r\n  ;\r\n  return EffectPolyline;\r\n}(EffectLine);\r\n\r\nexport default EffectPolyline;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\"; // TODO Batch by color\r\n\r\nimport * as graphic from '../../util/graphic.js';\r\nimport * as lineContain from 'zrender/lib/contain/line.js';\r\nimport * as quadraticContain from 'zrender/lib/contain/quadratic.js';\r\nimport { getECData } from '../../util/innerStore.js';\r\n\r\nvar LargeLinesPathShape =\r\n/** @class */\r\nfunction () {\r\n  function LargeLinesPathShape() {\r\n    this.polyline = false;\r\n    this.curveness = 0;\r\n    this.segs = [];\r\n  }\r\n\r\n  return LargeLinesPathShape;\r\n}();\r\n\r\nvar LargeLinesPath =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(LargeLinesPath, _super);\r\n\r\n  function LargeLinesPath(opts) {\r\n    var _this = _super.call(this, opts) || this;\r\n\r\n    _this._off = 0;\r\n    _this.hoverDataIdx = -1;\r\n    return _this;\r\n  }\r\n\r\n  LargeLinesPath.prototype.reset = function () {\r\n    this.notClear = false;\r\n    this._off = 0;\r\n  };\r\n\r\n  LargeLinesPath.prototype.getDefaultStyle = function () {\r\n    return {\r\n      stroke: '#000',\r\n      fill: null\r\n    };\r\n  };\r\n\r\n  LargeLinesPath.prototype.getDefaultShape = function () {\r\n    return new LargeLinesPathShape();\r\n  };\r\n\r\n  LargeLinesPath.prototype.buildPath = function (ctx, shape) {\r\n    var segs = shape.segs;\r\n    var curveness = shape.curveness;\r\n    var i;\r\n\r\n    if (shape.polyline) {\r\n      for (i = this._off; i < segs.length;) {\r\n        var count = segs[i++];\r\n\r\n        if (count > 0) {\r\n          ctx.moveTo(segs[i++], segs[i++]);\r\n\r\n          for (var k = 1; k < count; k++) {\r\n            ctx.lineTo(segs[i++], segs[i++]);\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      for (i = this._off; i < segs.length;) {\r\n        var x0 = segs[i++];\r\n        var y0 = segs[i++];\r\n        var x1 = segs[i++];\r\n        var y1 = segs[i++];\r\n        ctx.moveTo(x0, y0);\r\n\r\n        if (curveness > 0) {\r\n          var x2 = (x0 + x1) / 2 - (y0 - y1) * curveness;\r\n          var y2 = (y0 + y1) / 2 - (x1 - x0) * curveness;\r\n          ctx.quadraticCurveTo(x2, y2, x1, y1);\r\n        } else {\r\n          ctx.lineTo(x1, y1);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (this.incremental) {\r\n      this._off = i;\r\n      this.notClear = true;\r\n    }\r\n  };\r\n\r\n  LargeLinesPath.prototype.findDataIndex = function (x, y) {\r\n    var shape = this.shape;\r\n    var segs = shape.segs;\r\n    var curveness = shape.curveness;\r\n    var lineWidth = this.style.lineWidth;\r\n\r\n    if (shape.polyline) {\r\n      var dataIndex = 0;\r\n\r\n      for (var i = 0; i < segs.length;) {\r\n        var count = segs[i++];\r\n\r\n        if (count > 0) {\r\n          var x0 = segs[i++];\r\n          var y0 = segs[i++];\r\n\r\n          for (var k = 1; k < count; k++) {\r\n            var x1 = segs[i++];\r\n            var y1 = segs[i++];\r\n\r\n            if (lineContain.containStroke(x0, y0, x1, y1, lineWidth, x, y)) {\r\n              return dataIndex;\r\n            }\r\n          }\r\n        }\r\n\r\n        dataIndex++;\r\n      }\r\n    } else {\r\n      var dataIndex = 0;\r\n\r\n      for (var i = 0; i < segs.length;) {\r\n        var x0 = segs[i++];\r\n        var y0 = segs[i++];\r\n        var x1 = segs[i++];\r\n        var y1 = segs[i++];\r\n\r\n        if (curveness > 0) {\r\n          var x2 = (x0 + x1) / 2 - (y0 - y1) * curveness;\r\n          var y2 = (y0 + y1) / 2 - (x1 - x0) * curveness;\r\n\r\n          if (quadraticContain.containStroke(x0, y0, x2, y2, x1, y1, lineWidth, x, y)) {\r\n            return dataIndex;\r\n          }\r\n        } else {\r\n          if (lineContain.containStroke(x0, y0, x1, y1, lineWidth, x, y)) {\r\n            return dataIndex;\r\n          }\r\n        }\r\n\r\n        dataIndex++;\r\n      }\r\n    }\r\n\r\n    return -1;\r\n  };\r\n\r\n  LargeLinesPath.prototype.contain = function (x, y) {\r\n    var localPos = this.transformCoordToLocal(x, y);\r\n    var rect = this.getBoundingRect();\r\n    x = localPos[0];\r\n    y = localPos[1];\r\n\r\n    if (rect.contain(x, y)) {\r\n      // Cache found data index.\r\n      var dataIdx = this.hoverDataIdx = this.findDataIndex(x, y);\r\n      return dataIdx >= 0;\r\n    }\r\n\r\n    this.hoverDataIdx = -1;\r\n    return false;\r\n  };\r\n\r\n  LargeLinesPath.prototype.getBoundingRect = function () {\r\n    // Ignore stroke for large symbol draw.\r\n    var rect = this._rect;\r\n\r\n    if (!rect) {\r\n      var shape = this.shape;\r\n      var points = shape.segs;\r\n      var minX = Infinity;\r\n      var minY = Infinity;\r\n      var maxX = -Infinity;\r\n      var maxY = -Infinity;\r\n\r\n      for (var i = 0; i < points.length;) {\r\n        var x = points[i++];\r\n        var y = points[i++];\r\n        minX = Math.min(x, minX);\r\n        maxX = Math.max(x, maxX);\r\n        minY = Math.min(y, minY);\r\n        maxY = Math.max(y, maxY);\r\n      }\r\n\r\n      rect = this._rect = new graphic.BoundingRect(minX, minY, maxX, maxY);\r\n    }\r\n\r\n    return rect;\r\n  };\r\n\r\n  return LargeLinesPath;\r\n}(graphic.Path);\r\n\r\nvar LargeLineDraw =\r\n/** @class */\r\nfunction () {\r\n  function LargeLineDraw() {\r\n    this.group = new graphic.Group();\r\n  }\r\n  /**\r\n   * Update symbols draw by new data\r\n   */\r\n\r\n\r\n  LargeLineDraw.prototype.updateData = function (data) {\r\n    this._clear();\r\n\r\n    var lineEl = this._create();\r\n\r\n    lineEl.setShape({\r\n      segs: data.getLayout('linesPoints')\r\n    });\r\n\r\n    this._setCommon(lineEl, data);\r\n  };\r\n\r\n  ;\r\n  /**\r\n   * @override\r\n   */\r\n\r\n  LargeLineDraw.prototype.incrementalPrepareUpdate = function (data) {\r\n    this.group.removeAll();\r\n\r\n    this._clear();\r\n  };\r\n\r\n  ;\r\n  /**\r\n   * @override\r\n   */\r\n\r\n  LargeLineDraw.prototype.incrementalUpdate = function (taskParams, data) {\r\n    var lastAdded = this._newAdded[0];\r\n    var linePoints = data.getLayout('linesPoints');\r\n    var oldSegs = lastAdded && lastAdded.shape.segs; // Merging the exists. Each element has 1e4 points.\r\n    // Consider the performance balance between too much elements and too much points in one shape(may affect hover optimization)\r\n\r\n    if (oldSegs && oldSegs.length < 2e4) {\r\n      var oldLen = oldSegs.length;\r\n      var newSegs = new Float32Array(oldLen + linePoints.length); // Concat two array\r\n\r\n      newSegs.set(oldSegs);\r\n      newSegs.set(linePoints, oldLen);\r\n      lastAdded.setShape({\r\n        segs: newSegs\r\n      });\r\n    } else {\r\n      // Clear\r\n      this._newAdded = [];\r\n\r\n      var lineEl = this._create();\r\n\r\n      lineEl.incremental = true;\r\n      lineEl.setShape({\r\n        segs: linePoints\r\n      });\r\n\r\n      this._setCommon(lineEl, data);\r\n\r\n      lineEl.__startIndex = taskParams.start;\r\n    }\r\n  };\r\n  /**\r\n   * @override\r\n   */\r\n\r\n\r\n  LargeLineDraw.prototype.remove = function () {\r\n    this._clear();\r\n  };\r\n\r\n  LargeLineDraw.prototype.eachRendered = function (cb) {\r\n    this._newAdded[0] && cb(this._newAdded[0]);\r\n  };\r\n\r\n  LargeLineDraw.prototype._create = function () {\r\n    var lineEl = new LargeLinesPath({\r\n      cursor: 'default',\r\n      ignoreCoarsePointer: true\r\n    });\r\n\r\n    this._newAdded.push(lineEl);\r\n\r\n    this.group.add(lineEl);\r\n    return lineEl;\r\n  };\r\n\r\n  LargeLineDraw.prototype._setCommon = function (lineEl, data, isIncremental) {\r\n    var hostModel = data.hostModel;\r\n    lineEl.setShape({\r\n      polyline: hostModel.get('polyline'),\r\n      curveness: hostModel.get(['lineStyle', 'curveness'])\r\n    });\r\n    lineEl.useStyle(hostModel.getModel('lineStyle').getLineStyle());\r\n    lineEl.style.strokeNoScale = true;\r\n    var style = data.getVisual('style');\r\n\r\n    if (style && style.stroke) {\r\n      lineEl.setStyle('stroke', style.stroke);\r\n    }\r\n\r\n    lineEl.setStyle('fill', null);\r\n    var ecData = getECData(lineEl); // Enable tooltip\r\n    // PENDING May have performance issue when path is extremely large\r\n\r\n    ecData.seriesIndex = hostModel.seriesIndex;\r\n    lineEl.on('mousemove', function (e) {\r\n      ecData.dataIndex = null;\r\n      var dataIndex = lineEl.hoverDataIdx;\r\n\r\n      if (dataIndex > 0) {\r\n        // Provide dataIndex for tooltip\r\n        ecData.dataIndex = dataIndex + lineEl.__startIndex;\r\n      }\r\n    });\r\n  };\r\n\r\n  ;\r\n\r\n  LargeLineDraw.prototype._clear = function () {\r\n    this._newAdded = [];\r\n    this.group.removeAll();\r\n  };\r\n\r\n  ;\r\n  return LargeLineDraw;\r\n}();\r\n\r\nexport default LargeLineDraw;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n/* global Float32Array */\r\nimport createRenderPlanner from '../helper/createRenderPlanner.js';\r\nimport { error } from '../../util/log.js';\r\nvar linesLayout = {\r\n  seriesType: 'lines',\r\n  plan: createRenderPlanner(),\r\n  reset: function (seriesModel) {\r\n    var coordSys = seriesModel.coordinateSystem;\r\n\r\n    if (!coordSys) {\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        error('The lines series must have a coordinate system.');\r\n      }\r\n\r\n      return;\r\n    }\r\n\r\n    var isPolyline = seriesModel.get('polyline');\r\n    var isLarge = seriesModel.pipelineContext.large;\r\n    return {\r\n      progress: function (params, lineData) {\r\n        var lineCoords = [];\r\n\r\n        if (isLarge) {\r\n          var points = void 0;\r\n          var segCount = params.end - params.start;\r\n\r\n          if (isPolyline) {\r\n            var totalCoordsCount = 0;\r\n\r\n            for (var i = params.start; i < params.end; i++) {\r\n              totalCoordsCount += seriesModel.getLineCoordsCount(i);\r\n            }\r\n\r\n            points = new Float32Array(segCount + totalCoordsCount * 2);\r\n          } else {\r\n            points = new Float32Array(segCount * 4);\r\n          }\r\n\r\n          var offset = 0;\r\n          var pt = [];\r\n\r\n          for (var i = params.start; i < params.end; i++) {\r\n            var len = seriesModel.getLineCoords(i, lineCoords);\r\n\r\n            if (isPolyline) {\r\n              points[offset++] = len;\r\n            }\r\n\r\n            for (var k = 0; k < len; k++) {\r\n              pt = coordSys.dataToPoint(lineCoords[k], false, pt);\r\n              points[offset++] = pt[0];\r\n              points[offset++] = pt[1];\r\n            }\r\n          }\r\n\r\n          lineData.setLayout('linesPoints', points);\r\n        } else {\r\n          for (var i = params.start; i < params.end; i++) {\r\n            var itemModel = lineData.getItemModel(i);\r\n            var len = seriesModel.getLineCoords(i, lineCoords);\r\n            var pts = [];\r\n\r\n            if (isPolyline) {\r\n              for (var j = 0; j < len; j++) {\r\n                pts.push(coordSys.dataToPoint(lineCoords[j]));\r\n              }\r\n            } else {\r\n              pts[0] = coordSys.dataToPoint(lineCoords[0]);\r\n              pts[1] = coordSys.dataToPoint(lineCoords[1]);\r\n              var curveness = itemModel.get(['lineStyle', 'curveness']);\r\n\r\n              if (+curveness) {\r\n                pts[2] = [(pts[0][0] + pts[1][0]) / 2 - (pts[0][1] - pts[1][1]) * curveness, (pts[0][1] + pts[1][1]) / 2 - (pts[1][0] - pts[0][0]) * curveness];\r\n              }\r\n            }\r\n\r\n            lineData.setItemLayout(i, pts);\r\n          }\r\n        }\r\n      }\r\n    };\r\n  }\r\n};\r\nexport default linesLayout;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport LineDraw from '../helper/LineDraw.js';\r\nimport EffectLine from '../helper/EffectLine.js';\r\nimport Line from '../helper/Line.js';\r\nimport Polyline from '../helper/Polyline.js';\r\nimport EffectPolyline from '../helper/EffectPolyline.js';\r\nimport LargeLineDraw from '../helper/LargeLineDraw.js';\r\nimport linesLayout from './linesLayout.js';\r\nimport { createClipPath } from '../helper/createClipPathFromCoordSys.js';\r\nimport ChartView from '../../view/Chart.js';\r\n\r\nvar LinesView =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(LinesView, _super);\r\n\r\n  function LinesView() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = LinesView.type;\r\n    return _this;\r\n  }\r\n\r\n  LinesView.prototype.render = function (seriesModel, ecModel, api) {\r\n    var data = seriesModel.getData();\r\n\r\n    var lineDraw = this._updateLineDraw(data, seriesModel);\r\n\r\n    var zlevel = seriesModel.get('zlevel');\r\n    var trailLength = seriesModel.get(['effect', 'trailLength']);\r\n    var zr = api.getZr(); // Avoid the drag cause ghost shadow\r\n    // FIXME Better way ?\r\n    // SVG doesn't support\r\n\r\n    var isSvg = zr.painter.getType() === 'svg';\r\n\r\n    if (!isSvg) {\r\n      zr.painter.getLayer(zlevel).clear(true);\r\n    } // Config layer with motion blur\r\n\r\n\r\n    if (this._lastZlevel != null && !isSvg) {\r\n      zr.configLayer(this._lastZlevel, {\r\n        motionBlur: false\r\n      });\r\n    }\r\n\r\n    if (this._showEffect(seriesModel) && trailLength > 0) {\r\n      if (!isSvg) {\r\n        zr.configLayer(zlevel, {\r\n          motionBlur: true,\r\n          lastFrameAlpha: Math.max(Math.min(trailLength / 10 + 0.9, 1), 0)\r\n        });\r\n      } else if (process.env.NODE_ENV !== 'production') {\r\n        console.warn('SVG render mode doesn\\'t support lines with trail effect');\r\n      }\r\n    }\r\n\r\n    lineDraw.updateData(data);\r\n    var clipPath = seriesModel.get('clip', true) && createClipPath(seriesModel.coordinateSystem, false, seriesModel);\r\n\r\n    if (clipPath) {\r\n      this.group.setClipPath(clipPath);\r\n    } else {\r\n      this.group.removeClipPath();\r\n    }\r\n\r\n    this._lastZlevel = zlevel;\r\n    this._finished = true;\r\n  };\r\n\r\n  LinesView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\r\n    var data = seriesModel.getData();\r\n\r\n    var lineDraw = this._updateLineDraw(data, seriesModel);\r\n\r\n    lineDraw.incrementalPrepareUpdate(data);\r\n\r\n    this._clearLayer(api);\r\n\r\n    this._finished = false;\r\n  };\r\n\r\n  LinesView.prototype.incrementalRender = function (taskParams, seriesModel, ecModel) {\r\n    this._lineDraw.incrementalUpdate(taskParams, seriesModel.getData());\r\n\r\n    this._finished = taskParams.end === seriesModel.getData().count();\r\n  };\r\n\r\n  LinesView.prototype.eachRendered = function (cb) {\r\n    this._lineDraw && this._lineDraw.eachRendered(cb);\r\n  };\r\n\r\n  LinesView.prototype.updateTransform = function (seriesModel, ecModel, api) {\r\n    var data = seriesModel.getData();\r\n    var pipelineContext = seriesModel.pipelineContext;\r\n\r\n    if (!this._finished || pipelineContext.large || pipelineContext.progressiveRender) {\r\n      // TODO Don't have to do update in large mode. Only do it when there are millions of data.\r\n      return {\r\n        update: true\r\n      };\r\n    } else {\r\n      // TODO Use same logic with ScatterView.\r\n      // Manually update layout\r\n      var res = linesLayout.reset(seriesModel, ecModel, api);\r\n\r\n      if (res.progress) {\r\n        res.progress({\r\n          start: 0,\r\n          end: data.count(),\r\n          count: data.count()\r\n        }, data);\r\n      } // Not in large mode\r\n\r\n\r\n      this._lineDraw.updateLayout();\r\n\r\n      this._clearLayer(api);\r\n    }\r\n  };\r\n\r\n  LinesView.prototype._updateLineDraw = function (data, seriesModel) {\r\n    var lineDraw = this._lineDraw;\r\n\r\n    var hasEffect = this._showEffect(seriesModel);\r\n\r\n    var isPolyline = !!seriesModel.get('polyline');\r\n    var pipelineContext = seriesModel.pipelineContext;\r\n    var isLargeDraw = pipelineContext.large;\r\n\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      if (hasEffect && isLargeDraw) {\r\n        console.warn('Large lines not support effect');\r\n      }\r\n    }\r\n\r\n    if (!lineDraw || hasEffect !== this._hasEffet || isPolyline !== this._isPolyline || isLargeDraw !== this._isLargeDraw) {\r\n      if (lineDraw) {\r\n        lineDraw.remove();\r\n      }\r\n\r\n      lineDraw = this._lineDraw = isLargeDraw ? new LargeLineDraw() : new LineDraw(isPolyline ? hasEffect ? EffectPolyline : Polyline : hasEffect ? EffectLine : Line);\r\n      this._hasEffet = hasEffect;\r\n      this._isPolyline = isPolyline;\r\n      this._isLargeDraw = isLargeDraw;\r\n    }\r\n\r\n    this.group.add(lineDraw.group);\r\n    return lineDraw;\r\n  };\r\n\r\n  LinesView.prototype._showEffect = function (seriesModel) {\r\n    return !!seriesModel.get(['effect', 'show']);\r\n  };\r\n\r\n  LinesView.prototype._clearLayer = function (api) {\r\n    // Not use motion when dragging or zooming\r\n    var zr = api.getZr();\r\n    var isSvg = zr.painter.getType() === 'svg';\r\n\r\n    if (!isSvg && this._lastZlevel != null) {\r\n      zr.painter.getLayer(this._lastZlevel).clear(true);\r\n    }\r\n  };\r\n\r\n  LinesView.prototype.remove = function (ecModel, api) {\r\n    this._lineDraw && this._lineDraw.remove();\r\n    this._lineDraw = null; // Clear motion when lineDraw is removed\r\n\r\n    this._clearLayer(api);\r\n  };\r\n\r\n  LinesView.prototype.dispose = function (ecModel, api) {\r\n    this.remove(ecModel, api);\r\n  };\r\n\r\n  LinesView.type = 'lines';\r\n  return LinesView;\r\n}(ChartView);\r\n\r\nexport default LinesView;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\n/* global Uint32Array, Float64Array, Float32Array */\r\n\r\nimport SeriesModel from '../../model/Series.js';\r\nimport SeriesData from '../../data/SeriesData.js';\r\nimport { concatArray, mergeAll, map, isNumber } from 'zrender/lib/core/util.js';\r\nimport CoordinateSystem from '../../core/CoordinateSystem.js';\r\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\r\nvar Uint32Arr = typeof Uint32Array === 'undefined' ? Array : Uint32Array;\r\nvar Float64Arr = typeof Float64Array === 'undefined' ? Array : Float64Array;\r\n\r\nfunction compatEc2(seriesOpt) {\r\n  var data = seriesOpt.data;\r\n\r\n  if (data && data[0] && data[0][0] && data[0][0].coord) {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      console.warn('Lines data configuration has been changed to' + ' { coords:[[1,2],[2,3]] }');\r\n    }\r\n\r\n    seriesOpt.data = map(data, function (itemOpt) {\r\n      var coords = [itemOpt[0].coord, itemOpt[1].coord];\r\n      var target = {\r\n        coords: coords\r\n      };\r\n\r\n      if (itemOpt[0].name) {\r\n        target.fromName = itemOpt[0].name;\r\n      }\r\n\r\n      if (itemOpt[1].name) {\r\n        target.toName = itemOpt[1].name;\r\n      }\r\n\r\n      return mergeAll([target, itemOpt[0], itemOpt[1]]);\r\n    });\r\n  }\r\n}\r\n\r\nvar LinesSeriesModel =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(LinesSeriesModel, _super);\r\n\r\n  function LinesSeriesModel() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = LinesSeriesModel.type;\r\n    _this.visualStyleAccessPath = 'lineStyle';\r\n    _this.visualDrawType = 'stroke';\r\n    return _this;\r\n  }\r\n\r\n  LinesSeriesModel.prototype.init = function (option) {\r\n    // The input data may be null/undefined.\r\n    option.data = option.data || []; // Not using preprocessor because mergeOption may not have series.type\r\n\r\n    compatEc2(option);\r\n\r\n    var result = this._processFlatCoordsArray(option.data);\r\n\r\n    this._flatCoords = result.flatCoords;\r\n    this._flatCoordsOffset = result.flatCoordsOffset;\r\n\r\n    if (result.flatCoords) {\r\n      option.data = new Float32Array(result.count);\r\n    }\r\n\r\n    _super.prototype.init.apply(this, arguments);\r\n  };\r\n\r\n  LinesSeriesModel.prototype.mergeOption = function (option) {\r\n    compatEc2(option);\r\n\r\n    if (option.data) {\r\n      // Only update when have option data to merge.\r\n      var result = this._processFlatCoordsArray(option.data);\r\n\r\n      this._flatCoords = result.flatCoords;\r\n      this._flatCoordsOffset = result.flatCoordsOffset;\r\n\r\n      if (result.flatCoords) {\r\n        option.data = new Float32Array(result.count);\r\n      }\r\n    }\r\n\r\n    _super.prototype.mergeOption.apply(this, arguments);\r\n  };\r\n\r\n  LinesSeriesModel.prototype.appendData = function (params) {\r\n    var result = this._processFlatCoordsArray(params.data);\r\n\r\n    if (result.flatCoords) {\r\n      if (!this._flatCoords) {\r\n        this._flatCoords = result.flatCoords;\r\n        this._flatCoordsOffset = result.flatCoordsOffset;\r\n      } else {\r\n        this._flatCoords = concatArray(this._flatCoords, result.flatCoords);\r\n        this._flatCoordsOffset = concatArray(this._flatCoordsOffset, result.flatCoordsOffset);\r\n      }\r\n\r\n      params.data = new Float32Array(result.count);\r\n    }\r\n\r\n    this.getRawData().appendData(params.data);\r\n  };\r\n\r\n  LinesSeriesModel.prototype._getCoordsFromItemModel = function (idx) {\r\n    var itemModel = this.getData().getItemModel(idx);\r\n    var coords = itemModel.option instanceof Array ? itemModel.option : itemModel.getShallow('coords');\r\n\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      if (!(coords instanceof Array && coords.length > 0 && coords[0] instanceof Array)) {\r\n        throw new Error('Invalid coords ' + JSON.stringify(coords) + '. Lines must have 2d coords array in data item.');\r\n      }\r\n    }\r\n\r\n    return coords;\r\n  };\r\n\r\n  LinesSeriesModel.prototype.getLineCoordsCount = function (idx) {\r\n    if (this._flatCoordsOffset) {\r\n      return this._flatCoordsOffset[idx * 2 + 1];\r\n    } else {\r\n      return this._getCoordsFromItemModel(idx).length;\r\n    }\r\n  };\r\n\r\n  LinesSeriesModel.prototype.getLineCoords = function (idx, out) {\r\n    if (this._flatCoordsOffset) {\r\n      var offset = this._flatCoordsOffset[idx * 2];\r\n      var len = this._flatCoordsOffset[idx * 2 + 1];\r\n\r\n      for (var i = 0; i < len; i++) {\r\n        out[i] = out[i] || [];\r\n        out[i][0] = this._flatCoords[offset + i * 2];\r\n        out[i][1] = this._flatCoords[offset + i * 2 + 1];\r\n      }\r\n\r\n      return len;\r\n    } else {\r\n      var coords = this._getCoordsFromItemModel(idx);\r\n\r\n      for (var i = 0; i < coords.length; i++) {\r\n        out[i] = out[i] || [];\r\n        out[i][0] = coords[i][0];\r\n        out[i][1] = coords[i][1];\r\n      }\r\n\r\n      return coords.length;\r\n    }\r\n  };\r\n\r\n  LinesSeriesModel.prototype._processFlatCoordsArray = function (data) {\r\n    var startOffset = 0;\r\n\r\n    if (this._flatCoords) {\r\n      startOffset = this._flatCoords.length;\r\n    } // Stored as a typed array. In format\r\n    // Points Count(2) | x | y | x | y | Points Count(3) | x |  y | x | y | x | y |\r\n\r\n\r\n    if (isNumber(data[0])) {\r\n      var len = data.length; // Store offset and len of each segment\r\n\r\n      var coordsOffsetAndLenStorage = new Uint32Arr(len);\r\n      var coordsStorage = new Float64Arr(len);\r\n      var coordsCursor = 0;\r\n      var offsetCursor = 0;\r\n      var dataCount = 0;\r\n\r\n      for (var i = 0; i < len;) {\r\n        dataCount++;\r\n        var count = data[i++]; // Offset\r\n\r\n        coordsOffsetAndLenStorage[offsetCursor++] = coordsCursor + startOffset; // Len\r\n\r\n        coordsOffsetAndLenStorage[offsetCursor++] = count;\r\n\r\n        for (var k = 0; k < count; k++) {\r\n          var x = data[i++];\r\n          var y = data[i++];\r\n          coordsStorage[coordsCursor++] = x;\r\n          coordsStorage[coordsCursor++] = y;\r\n\r\n          if (i > len) {\r\n            if (process.env.NODE_ENV !== 'production') {\r\n              throw new Error('Invalid data format.');\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      return {\r\n        flatCoordsOffset: new Uint32Array(coordsOffsetAndLenStorage.buffer, 0, offsetCursor),\r\n        flatCoords: coordsStorage,\r\n        count: dataCount\r\n      };\r\n    }\r\n\r\n    return {\r\n      flatCoordsOffset: null,\r\n      flatCoords: null,\r\n      count: data.length\r\n    };\r\n  };\r\n\r\n  LinesSeriesModel.prototype.getInitialData = function (option, ecModel) {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      var CoordSys = CoordinateSystem.get(option.coordinateSystem);\r\n\r\n      if (!CoordSys) {\r\n        throw new Error('Unknown coordinate system ' + option.coordinateSystem);\r\n      }\r\n    }\r\n\r\n    var lineData = new SeriesData(['value'], this);\r\n    lineData.hasItemOption = false;\r\n    lineData.initData(option.data, [], function (dataItem, dimName, dataIndex, dimIndex) {\r\n      // dataItem is simply coords\r\n      if (dataItem instanceof Array) {\r\n        return NaN;\r\n      } else {\r\n        lineData.hasItemOption = true;\r\n        var value = dataItem.value;\r\n\r\n        if (value != null) {\r\n          return value instanceof Array ? value[dimIndex] : value;\r\n        }\r\n      }\r\n    });\r\n    return lineData;\r\n  };\r\n\r\n  LinesSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\r\n    var data = this.getData();\r\n    var itemModel = data.getItemModel(dataIndex);\r\n    var name = itemModel.get('name');\r\n\r\n    if (name) {\r\n      return name;\r\n    }\r\n\r\n    var fromName = itemModel.get('fromName');\r\n    var toName = itemModel.get('toName');\r\n    var nameArr = [];\r\n    fromName != null && nameArr.push(fromName);\r\n    toName != null && nameArr.push(toName);\r\n    return createTooltipMarkup('nameValue', {\r\n      name: nameArr.join(' > ')\r\n    });\r\n  };\r\n\r\n  LinesSeriesModel.prototype.preventIncremental = function () {\r\n    return !!this.get(['effect', 'show']);\r\n  };\r\n\r\n  LinesSeriesModel.prototype.getProgressive = function () {\r\n    var progressive = this.option.progressive;\r\n\r\n    if (progressive == null) {\r\n      return this.option.large ? 1e4 : this.get('progressive');\r\n    }\r\n\r\n    return progressive;\r\n  };\r\n\r\n  LinesSeriesModel.prototype.getProgressiveThreshold = function () {\r\n    var progressiveThreshold = this.option.progressiveThreshold;\r\n\r\n    if (progressiveThreshold == null) {\r\n      return this.option.large ? 2e4 : this.get('progressiveThreshold');\r\n    }\r\n\r\n    return progressiveThreshold;\r\n  };\r\n\r\n  LinesSeriesModel.prototype.getZLevelKey = function () {\r\n    var effectModel = this.getModel('effect');\r\n    var trailLength = effectModel.get('trailLength');\r\n    return this.getData().count() > this.getProgressiveThreshold() // Each progressive series has individual key.\r\n    ? this.id : effectModel.get('show') && trailLength > 0 ? trailLength + '' : '';\r\n  };\r\n\r\n  LinesSeriesModel.type = 'series.lines';\r\n  LinesSeriesModel.dependencies = ['grid', 'polar', 'geo', 'calendar'];\r\n  LinesSeriesModel.defaultOption = {\r\n    coordinateSystem: 'geo',\r\n    // zlevel: 0,\r\n    z: 2,\r\n    legendHoverLink: true,\r\n    // Cartesian coordinate system\r\n    xAxisIndex: 0,\r\n    yAxisIndex: 0,\r\n    symbol: ['none', 'none'],\r\n    symbolSize: [10, 10],\r\n    // Geo coordinate system\r\n    geoIndex: 0,\r\n    effect: {\r\n      show: false,\r\n      period: 4,\r\n      constantSpeed: 0,\r\n      symbol: 'circle',\r\n      symbolSize: 3,\r\n      loop: true,\r\n      trailLength: 0.2\r\n    },\r\n    large: false,\r\n    // Available when large is true\r\n    largeThreshold: 2000,\r\n    polyline: false,\r\n    clip: true,\r\n    label: {\r\n      show: false,\r\n      position: 'end' // distance: 5,\r\n      // formatter: \u6807\u7B7E\u6587\u672C\u683C\u5F0F\u5668\uFF0C\u540CTooltip.formatter\uFF0C\u4E0D\u652F\u6301\u5F02\u6B65\u56DE\u8C03\r\n\r\n    },\r\n    lineStyle: {\r\n      opacity: 0.5\r\n    }\r\n  };\r\n  return LinesSeriesModel;\r\n}(SeriesModel);\r\n\r\nexport default LinesSeriesModel;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nfunction normalize(a) {\r\n  if (!(a instanceof Array)) {\r\n    a = [a, a];\r\n  }\r\n\r\n  return a;\r\n}\r\n\r\nvar linesVisual = {\r\n  seriesType: 'lines',\r\n  reset: function (seriesModel) {\r\n    var symbolType = normalize(seriesModel.get('symbol'));\r\n    var symbolSize = normalize(seriesModel.get('symbolSize'));\r\n    var data = seriesModel.getData();\r\n    data.setVisual('fromSymbol', symbolType && symbolType[0]);\r\n    data.setVisual('toSymbol', symbolType && symbolType[1]);\r\n    data.setVisual('fromSymbolSize', symbolSize && symbolSize[0]);\r\n    data.setVisual('toSymbolSize', symbolSize && symbolSize[1]);\r\n\r\n    function dataEach(data, idx) {\r\n      var itemModel = data.getItemModel(idx);\r\n      var symbolType = normalize(itemModel.getShallow('symbol', true));\r\n      var symbolSize = normalize(itemModel.getShallow('symbolSize', true));\r\n      symbolType[0] && data.setItemVisual(idx, 'fromSymbol', symbolType[0]);\r\n      symbolType[1] && data.setItemVisual(idx, 'toSymbol', symbolType[1]);\r\n      symbolSize[0] && data.setItemVisual(idx, 'fromSymbolSize', symbolSize[0]);\r\n      symbolSize[1] && data.setItemVisual(idx, 'toSymbolSize', symbolSize[1]);\r\n    }\r\n\r\n    return {\r\n      dataEach: data.hasItemOption ? dataEach : null\r\n    };\r\n  }\r\n};\r\nexport default linesVisual;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport LinesView from './LinesView.js';\r\nimport LinesSeriesModel from './LinesSeries.js';\r\nimport linesLayout from './linesLayout.js';\r\nimport linesVisual from './linesVisual.js';\r\nexport function install(registers) {\r\n  registers.registerChartView(LinesView);\r\n  registers.registerSeriesModel(LinesSeriesModel);\r\n  registers.registerLayout(linesLayout);\r\n  registers.registerVisual(linesVisual);\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n/* global Uint8ClampedArray */\r\nimport { platformApi } from 'zrender/lib/core/platform.js';\r\nvar GRADIENT_LEVELS = 256;\r\n\r\nvar HeatmapLayer =\r\n/** @class */\r\nfunction () {\r\n  function HeatmapLayer() {\r\n    this.blurSize = 30;\r\n    this.pointSize = 20;\r\n    this.maxOpacity = 1;\r\n    this.minOpacity = 0;\r\n    this._gradientPixels = {\r\n      inRange: null,\r\n      outOfRange: null\r\n    };\r\n    var canvas = platformApi.createCanvas();\r\n    this.canvas = canvas;\r\n  }\r\n  /**\r\n   * Renders Heatmap and returns the rendered canvas\r\n   * @param data array of data, each has x, y, value\r\n   * @param width canvas width\r\n   * @param height canvas height\r\n   */\r\n\r\n\r\n  HeatmapLayer.prototype.update = function (data, width, height, normalize, colorFunc, isInRange) {\r\n    var brush = this._getBrush();\r\n\r\n    var gradientInRange = this._getGradient(colorFunc, 'inRange');\r\n\r\n    var gradientOutOfRange = this._getGradient(colorFunc, 'outOfRange');\r\n\r\n    var r = this.pointSize + this.blurSize;\r\n    var canvas = this.canvas;\r\n    var ctx = canvas.getContext('2d');\r\n    var len = data.length;\r\n    canvas.width = width;\r\n    canvas.height = height;\r\n\r\n    for (var i = 0; i < len; ++i) {\r\n      var p = data[i];\r\n      var x = p[0];\r\n      var y = p[1];\r\n      var value = p[2]; // calculate alpha using value\r\n\r\n      var alpha = normalize(value); // draw with the circle brush with alpha\r\n\r\n      ctx.globalAlpha = alpha;\r\n      ctx.drawImage(brush, x - r, y - r);\r\n    }\r\n\r\n    if (!canvas.width || !canvas.height) {\r\n      // Avoid \"Uncaught DOMException: Failed to execute 'getImageData' on\r\n      // 'CanvasRenderingContext2D': The source height is 0.\"\r\n      return canvas;\r\n    } // colorize the canvas using alpha value and set with gradient\r\n\r\n\r\n    var imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n    var pixels = imageData.data;\r\n    var offset = 0;\r\n    var pixelLen = pixels.length;\r\n    var minOpacity = this.minOpacity;\r\n    var maxOpacity = this.maxOpacity;\r\n    var diffOpacity = maxOpacity - minOpacity;\r\n\r\n    while (offset < pixelLen) {\r\n      var alpha = pixels[offset + 3] / 256;\r\n      var gradientOffset = Math.floor(alpha * (GRADIENT_LEVELS - 1)) * 4; // Simple optimize to ignore the empty data\r\n\r\n      if (alpha > 0) {\r\n        var gradient = isInRange(alpha) ? gradientInRange : gradientOutOfRange; // Any alpha > 0 will be mapped to [minOpacity, maxOpacity]\r\n\r\n        alpha > 0 && (alpha = alpha * diffOpacity + minOpacity);\r\n        pixels[offset++] = gradient[gradientOffset];\r\n        pixels[offset++] = gradient[gradientOffset + 1];\r\n        pixels[offset++] = gradient[gradientOffset + 2];\r\n        pixels[offset++] = gradient[gradientOffset + 3] * alpha * 256;\r\n      } else {\r\n        offset += 4;\r\n      }\r\n    }\r\n\r\n    ctx.putImageData(imageData, 0, 0);\r\n    return canvas;\r\n  };\r\n  /**\r\n   * get canvas of a black circle brush used for canvas to draw later\r\n   */\r\n\r\n\r\n  HeatmapLayer.prototype._getBrush = function () {\r\n    var brushCanvas = this._brushCanvas || (this._brushCanvas = platformApi.createCanvas()); // set brush size\r\n\r\n    var r = this.pointSize + this.blurSize;\r\n    var d = r * 2;\r\n    brushCanvas.width = d;\r\n    brushCanvas.height = d;\r\n    var ctx = brushCanvas.getContext('2d');\r\n    ctx.clearRect(0, 0, d, d); // in order to render shadow without the distinct circle,\r\n    // draw the distinct circle in an invisible place,\r\n    // and use shadowOffset to draw shadow in the center of the canvas\r\n\r\n    ctx.shadowOffsetX = d;\r\n    ctx.shadowBlur = this.blurSize; // draw the shadow in black, and use alpha and shadow blur to generate\r\n    // color in color map\r\n\r\n    ctx.shadowColor = '#000'; // draw circle in the left to the canvas\r\n\r\n    ctx.beginPath();\r\n    ctx.arc(-r, r, this.pointSize, 0, Math.PI * 2, true);\r\n    ctx.closePath();\r\n    ctx.fill();\r\n    return brushCanvas;\r\n  };\r\n  /**\r\n   * get gradient color map\r\n   * @private\r\n   */\r\n\r\n\r\n  HeatmapLayer.prototype._getGradient = function (colorFunc, state) {\r\n    var gradientPixels = this._gradientPixels;\r\n    var pixelsSingleState = gradientPixels[state] || (gradientPixels[state] = new Uint8ClampedArray(256 * 4));\r\n    var color = [0, 0, 0, 0];\r\n    var off = 0;\r\n\r\n    for (var i = 0; i < 256; i++) {\r\n      colorFunc[state](i / 255, true, color);\r\n      pixelsSingleState[off++] = color[0];\r\n      pixelsSingleState[off++] = color[1];\r\n      pixelsSingleState[off++] = color[2];\r\n      pixelsSingleState[off++] = color[3];\r\n    }\r\n\r\n    return pixelsSingleState;\r\n  };\r\n\r\n  return HeatmapLayer;\r\n}();\r\n\r\nexport default HeatmapLayer;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport * as graphic from '../../util/graphic.js';\r\nimport { toggleHoverEmphasis } from '../../util/states.js';\r\nimport HeatmapLayer from './HeatmapLayer.js';\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport ChartView from '../../view/Chart.js';\r\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem.js';\r\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\r\n\r\nfunction getIsInPiecewiseRange(dataExtent, pieceList, selected) {\r\n  var dataSpan = dataExtent[1] - dataExtent[0];\r\n  pieceList = zrUtil.map(pieceList, function (piece) {\r\n    return {\r\n      interval: [(piece.interval[0] - dataExtent[0]) / dataSpan, (piece.interval[1] - dataExtent[0]) / dataSpan]\r\n    };\r\n  });\r\n  var len = pieceList.length;\r\n  var lastIndex = 0;\r\n  return function (val) {\r\n    var i; // Try to find in the location of the last found\r\n\r\n    for (i = lastIndex; i < len; i++) {\r\n      var interval = pieceList[i].interval;\r\n\r\n      if (interval[0] <= val && val <= interval[1]) {\r\n        lastIndex = i;\r\n        break;\r\n      }\r\n    }\r\n\r\n    if (i === len) {\r\n      // Not found, back interation\r\n      for (i = lastIndex - 1; i >= 0; i--) {\r\n        var interval = pieceList[i].interval;\r\n\r\n        if (interval[0] <= val && val <= interval[1]) {\r\n          lastIndex = i;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    return i >= 0 && i < len && selected[i];\r\n  };\r\n}\r\n\r\nfunction getIsInContinuousRange(dataExtent, range) {\r\n  var dataSpan = dataExtent[1] - dataExtent[0];\r\n  range = [(range[0] - dataExtent[0]) / dataSpan, (range[1] - dataExtent[0]) / dataSpan];\r\n  return function (val) {\r\n    return val >= range[0] && val <= range[1];\r\n  };\r\n}\r\n\r\nfunction isGeoCoordSys(coordSys) {\r\n  var dimensions = coordSys.dimensions; // Not use coordSys.type === 'geo' because coordSys maybe extended\r\n\r\n  return dimensions[0] === 'lng' && dimensions[1] === 'lat';\r\n}\r\n\r\nvar HeatmapView =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(HeatmapView, _super);\r\n\r\n  function HeatmapView() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = HeatmapView.type;\r\n    return _this;\r\n  }\r\n\r\n  HeatmapView.prototype.render = function (seriesModel, ecModel, api) {\r\n    var visualMapOfThisSeries;\r\n    ecModel.eachComponent('visualMap', function (visualMap) {\r\n      visualMap.eachTargetSeries(function (targetSeries) {\r\n        if (targetSeries === seriesModel) {\r\n          visualMapOfThisSeries = visualMap;\r\n        }\r\n      });\r\n    });\r\n\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      if (!visualMapOfThisSeries) {\r\n        throw new Error('Heatmap must use with visualMap');\r\n      }\r\n    } // Clear previously rendered progressive elements.\r\n\r\n\r\n    this._progressiveEls = null;\r\n    this.group.removeAll();\r\n    var coordSys = seriesModel.coordinateSystem;\r\n\r\n    if (coordSys.type === 'cartesian2d' || coordSys.type === 'calendar') {\r\n      this._renderOnCartesianAndCalendar(seriesModel, api, 0, seriesModel.getData().count());\r\n    } else if (isGeoCoordSys(coordSys)) {\r\n      this._renderOnGeo(coordSys, seriesModel, visualMapOfThisSeries, api);\r\n    }\r\n  };\r\n\r\n  HeatmapView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\r\n    this.group.removeAll();\r\n  };\r\n\r\n  HeatmapView.prototype.incrementalRender = function (params, seriesModel, ecModel, api) {\r\n    var coordSys = seriesModel.coordinateSystem;\r\n\r\n    if (coordSys) {\r\n      // geo does not support incremental rendering?\r\n      if (isGeoCoordSys(coordSys)) {\r\n        this.render(seriesModel, ecModel, api);\r\n      } else {\r\n        this._progressiveEls = [];\r\n\r\n        this._renderOnCartesianAndCalendar(seriesModel, api, params.start, params.end, true);\r\n      }\r\n    }\r\n  };\r\n\r\n  HeatmapView.prototype.eachRendered = function (cb) {\r\n    graphic.traverseElements(this._progressiveEls || this.group, cb);\r\n  };\r\n\r\n  HeatmapView.prototype._renderOnCartesianAndCalendar = function (seriesModel, api, start, end, incremental) {\r\n    var coordSys = seriesModel.coordinateSystem;\r\n    var isCartesian2d = isCoordinateSystemType(coordSys, 'cartesian2d');\r\n    var width;\r\n    var height;\r\n    var xAxisExtent;\r\n    var yAxisExtent;\r\n\r\n    if (isCartesian2d) {\r\n      var xAxis = coordSys.getAxis('x');\r\n      var yAxis = coordSys.getAxis('y');\r\n\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        if (!(xAxis.type === 'category' && yAxis.type === 'category')) {\r\n          throw new Error('Heatmap on cartesian must have two category axes');\r\n        }\r\n\r\n        if (!(xAxis.onBand && yAxis.onBand)) {\r\n          throw new Error('Heatmap on cartesian must have two axes with boundaryGap true');\r\n        }\r\n      } // add 0.5px to avoid the gaps\r\n\r\n\r\n      width = xAxis.getBandWidth() + .5;\r\n      height = yAxis.getBandWidth() + .5;\r\n      xAxisExtent = xAxis.scale.getExtent();\r\n      yAxisExtent = yAxis.scale.getExtent();\r\n    }\r\n\r\n    var group = this.group;\r\n    var data = seriesModel.getData();\r\n    var emphasisStyle = seriesModel.getModel(['emphasis', 'itemStyle']).getItemStyle();\r\n    var blurStyle = seriesModel.getModel(['blur', 'itemStyle']).getItemStyle();\r\n    var selectStyle = seriesModel.getModel(['select', 'itemStyle']).getItemStyle();\r\n    var borderRadius = seriesModel.get(['itemStyle', 'borderRadius']);\r\n    var labelStatesModels = getLabelStatesModels(seriesModel);\r\n    var emphasisModel = seriesModel.getModel('emphasis');\r\n    var focus = emphasisModel.get('focus');\r\n    var blurScope = emphasisModel.get('blurScope');\r\n    var emphasisDisabled = emphasisModel.get('disabled');\r\n    var dataDims = isCartesian2d ? [data.mapDimension('x'), data.mapDimension('y'), data.mapDimension('value')] : [data.mapDimension('time'), data.mapDimension('value')];\r\n\r\n    for (var idx = start; idx < end; idx++) {\r\n      var rect = void 0;\r\n      var style = data.getItemVisual(idx, 'style');\r\n\r\n      if (isCartesian2d) {\r\n        var dataDimX = data.get(dataDims[0], idx);\r\n        var dataDimY = data.get(dataDims[1], idx); // Ignore empty data and out of extent data\r\n\r\n        if (isNaN(data.get(dataDims[2], idx)) || isNaN(dataDimX) || isNaN(dataDimY) || dataDimX < xAxisExtent[0] || dataDimX > xAxisExtent[1] || dataDimY < yAxisExtent[0] || dataDimY > yAxisExtent[1]) {\r\n          continue;\r\n        }\r\n\r\n        var point = coordSys.dataToPoint([dataDimX, dataDimY]);\r\n        rect = new graphic.Rect({\r\n          shape: {\r\n            x: point[0] - width / 2,\r\n            y: point[1] - height / 2,\r\n            width: width,\r\n            height: height\r\n          },\r\n          style: style\r\n        });\r\n      } else {\r\n        // Ignore empty data\r\n        if (isNaN(data.get(dataDims[1], idx))) {\r\n          continue;\r\n        }\r\n\r\n        rect = new graphic.Rect({\r\n          z2: 1,\r\n          shape: coordSys.dataToRect([data.get(dataDims[0], idx)]).contentShape,\r\n          style: style\r\n        });\r\n      } // Optimization for large dataset\r\n\r\n\r\n      if (data.hasItemOption) {\r\n        var itemModel = data.getItemModel(idx);\r\n        var emphasisModel_1 = itemModel.getModel('emphasis');\r\n        emphasisStyle = emphasisModel_1.getModel('itemStyle').getItemStyle();\r\n        blurStyle = itemModel.getModel(['blur', 'itemStyle']).getItemStyle();\r\n        selectStyle = itemModel.getModel(['select', 'itemStyle']).getItemStyle(); // Each item value struct in the data would be firstly\r\n        // {\r\n        //     itemStyle: { borderRadius: [30, 30] },\r\n        //     value: [2022, 02, 22]\r\n        // }\r\n\r\n        borderRadius = itemModel.get(['itemStyle', 'borderRadius']);\r\n        focus = emphasisModel_1.get('focus');\r\n        blurScope = emphasisModel_1.get('blurScope');\r\n        emphasisDisabled = emphasisModel_1.get('disabled');\r\n        labelStatesModels = getLabelStatesModels(itemModel);\r\n      }\r\n\r\n      rect.shape.r = borderRadius;\r\n      var rawValue = seriesModel.getRawValue(idx);\r\n      var defaultText = '-';\r\n\r\n      if (rawValue && rawValue[2] != null) {\r\n        defaultText = rawValue[2] + '';\r\n      }\r\n\r\n      setLabelStyle(rect, labelStatesModels, {\r\n        labelFetcher: seriesModel,\r\n        labelDataIndex: idx,\r\n        defaultOpacity: style.opacity,\r\n        defaultText: defaultText\r\n      });\r\n      rect.ensureState('emphasis').style = emphasisStyle;\r\n      rect.ensureState('blur').style = blurStyle;\r\n      rect.ensureState('select').style = selectStyle;\r\n      toggleHoverEmphasis(rect, focus, blurScope, emphasisDisabled);\r\n      rect.incremental = incremental; // PENDING\r\n\r\n      if (incremental) {\r\n        // Rect must use hover layer if it's incremental.\r\n        rect.states.emphasis.hoverLayer = true;\r\n      }\r\n\r\n      group.add(rect);\r\n      data.setItemGraphicEl(idx, rect);\r\n\r\n      if (this._progressiveEls) {\r\n        this._progressiveEls.push(rect);\r\n      }\r\n    }\r\n  };\r\n\r\n  HeatmapView.prototype._renderOnGeo = function (geo, seriesModel, visualMapModel, api) {\r\n    var inRangeVisuals = visualMapModel.targetVisuals.inRange;\r\n    var outOfRangeVisuals = visualMapModel.targetVisuals.outOfRange; // if (!visualMapping) {\r\n    //     throw new Error('Data range must have color visuals');\r\n    // }\r\n\r\n    var data = seriesModel.getData();\r\n    var hmLayer = this._hmLayer || this._hmLayer || new HeatmapLayer();\r\n    hmLayer.blurSize = seriesModel.get('blurSize');\r\n    hmLayer.pointSize = seriesModel.get('pointSize');\r\n    hmLayer.minOpacity = seriesModel.get('minOpacity');\r\n    hmLayer.maxOpacity = seriesModel.get('maxOpacity');\r\n    var rect = geo.getViewRect().clone();\r\n    var roamTransform = geo.getRoamTransform();\r\n    rect.applyTransform(roamTransform); // Clamp on viewport\r\n\r\n    var x = Math.max(rect.x, 0);\r\n    var y = Math.max(rect.y, 0);\r\n    var x2 = Math.min(rect.width + rect.x, api.getWidth());\r\n    var y2 = Math.min(rect.height + rect.y, api.getHeight());\r\n    var width = x2 - x;\r\n    var height = y2 - y;\r\n    var dims = [data.mapDimension('lng'), data.mapDimension('lat'), data.mapDimension('value')];\r\n    var points = data.mapArray(dims, function (lng, lat, value) {\r\n      var pt = geo.dataToPoint([lng, lat]);\r\n      pt[0] -= x;\r\n      pt[1] -= y;\r\n      pt.push(value);\r\n      return pt;\r\n    });\r\n    var dataExtent = visualMapModel.getExtent();\r\n    var isInRange = visualMapModel.type === 'visualMap.continuous' ? getIsInContinuousRange(dataExtent, visualMapModel.option.range) : getIsInPiecewiseRange(dataExtent, visualMapModel.getPieceList(), visualMapModel.option.selected);\r\n    hmLayer.update(points, width, height, inRangeVisuals.color.getNormalizer(), {\r\n      inRange: inRangeVisuals.color.getColorMapper(),\r\n      outOfRange: outOfRangeVisuals.color.getColorMapper()\r\n    }, isInRange);\r\n    var img = new graphic.Image({\r\n      style: {\r\n        width: width,\r\n        height: height,\r\n        x: x,\r\n        y: y,\r\n        image: hmLayer.canvas\r\n      },\r\n      silent: true\r\n    });\r\n    this.group.add(img);\r\n  };\r\n\r\n  HeatmapView.type = 'heatmap';\r\n  return HeatmapView;\r\n}(ChartView);\r\n\r\nexport default HeatmapView;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport SeriesModel from '../../model/Series.js';\r\nimport createSeriesData from '../helper/createSeriesData.js';\r\nimport CoordinateSystem from '../../core/CoordinateSystem.js';\r\n\r\nvar HeatmapSeriesModel =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(HeatmapSeriesModel, _super);\r\n\r\n  function HeatmapSeriesModel() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = HeatmapSeriesModel.type;\r\n    return _this;\r\n  }\r\n\r\n  HeatmapSeriesModel.prototype.getInitialData = function (option, ecModel) {\r\n    return createSeriesData(null, this, {\r\n      generateCoord: 'value'\r\n    });\r\n  };\r\n\r\n  HeatmapSeriesModel.prototype.preventIncremental = function () {\r\n    var coordSysCreator = CoordinateSystem.get(this.get('coordinateSystem'));\r\n\r\n    if (coordSysCreator && coordSysCreator.dimensions) {\r\n      return coordSysCreator.dimensions[0] === 'lng' && coordSysCreator.dimensions[1] === 'lat';\r\n    }\r\n  };\r\n\r\n  HeatmapSeriesModel.type = 'series.heatmap';\r\n  HeatmapSeriesModel.dependencies = ['grid', 'geo', 'calendar'];\r\n  HeatmapSeriesModel.defaultOption = {\r\n    coordinateSystem: 'cartesian2d',\r\n    // zlevel: 0,\r\n    z: 2,\r\n    // Cartesian coordinate system\r\n    // xAxisIndex: 0,\r\n    // yAxisIndex: 0,\r\n    // Geo coordinate system\r\n    geoIndex: 0,\r\n    blurSize: 30,\r\n    pointSize: 20,\r\n    maxOpacity: 1,\r\n    minOpacity: 0,\r\n    select: {\r\n      itemStyle: {\r\n        borderColor: '#212121'\r\n      }\r\n    }\r\n  };\r\n  return HeatmapSeriesModel;\r\n}(SeriesModel);\r\n\r\nexport default HeatmapSeriesModel;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport HeatmapView from './HeatmapView.js';\r\nimport HeatmapSeriesModel from './HeatmapSeries.js';\r\nexport function install(registers) {\r\n  registers.registerChartView(HeatmapView);\r\n  registers.registerSeriesModel(HeatmapSeriesModel);\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport * as graphic from '../../util/graphic.js';\r\nimport { toggleHoverEmphasis } from '../../util/states.js';\r\nimport { createSymbol, normalizeSymbolOffset } from '../../util/symbol.js';\r\nimport { parsePercent, isNumeric } from '../../util/number.js';\r\nimport ChartView from '../../view/Chart.js';\r\nimport { getDefaultLabel } from '../helper/labelHelper.js';\r\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\r\nimport ZRImage from 'zrender/lib/graphic/Image.js';\r\nimport { getECData } from '../../util/innerStore.js';\r\nvar BAR_BORDER_WIDTH_QUERY = ['itemStyle', 'borderWidth']; // index: +isHorizontal\r\n\r\nvar LAYOUT_ATTRS = [{\r\n  xy: 'x',\r\n  wh: 'width',\r\n  index: 0,\r\n  posDesc: ['left', 'right']\r\n}, {\r\n  xy: 'y',\r\n  wh: 'height',\r\n  index: 1,\r\n  posDesc: ['top', 'bottom']\r\n}];\r\nvar pathForLineWidth = new graphic.Circle();\r\n\r\nvar PictorialBarView =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(PictorialBarView, _super);\r\n\r\n  function PictorialBarView() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = PictorialBarView.type;\r\n    return _this;\r\n  }\r\n\r\n  PictorialBarView.prototype.render = function (seriesModel, ecModel, api) {\r\n    var group = this.group;\r\n    var data = seriesModel.getData();\r\n    var oldData = this._data;\r\n    var cartesian = seriesModel.coordinateSystem;\r\n    var baseAxis = cartesian.getBaseAxis();\r\n    var isHorizontal = baseAxis.isHorizontal();\r\n    var coordSysRect = cartesian.master.getRect();\r\n    var opt = {\r\n      ecSize: {\r\n        width: api.getWidth(),\r\n        height: api.getHeight()\r\n      },\r\n      seriesModel: seriesModel,\r\n      coordSys: cartesian,\r\n      coordSysExtent: [[coordSysRect.x, coordSysRect.x + coordSysRect.width], [coordSysRect.y, coordSysRect.y + coordSysRect.height]],\r\n      isHorizontal: isHorizontal,\r\n      valueDim: LAYOUT_ATTRS[+isHorizontal],\r\n      categoryDim: LAYOUT_ATTRS[1 - +isHorizontal]\r\n    };\r\n    data.diff(oldData).add(function (dataIndex) {\r\n      if (!data.hasValue(dataIndex)) {\r\n        return;\r\n      }\r\n\r\n      var itemModel = getItemModel(data, dataIndex);\r\n      var symbolMeta = getSymbolMeta(data, dataIndex, itemModel, opt);\r\n      var bar = createBar(data, opt, symbolMeta);\r\n      data.setItemGraphicEl(dataIndex, bar);\r\n      group.add(bar);\r\n      updateCommon(bar, opt, symbolMeta);\r\n    }).update(function (newIndex, oldIndex) {\r\n      var bar = oldData.getItemGraphicEl(oldIndex);\r\n\r\n      if (!data.hasValue(newIndex)) {\r\n        group.remove(bar);\r\n        return;\r\n      }\r\n\r\n      var itemModel = getItemModel(data, newIndex);\r\n      var symbolMeta = getSymbolMeta(data, newIndex, itemModel, opt);\r\n      var pictorialShapeStr = getShapeStr(data, symbolMeta);\r\n\r\n      if (bar && pictorialShapeStr !== bar.__pictorialShapeStr) {\r\n        group.remove(bar);\r\n        data.setItemGraphicEl(newIndex, null);\r\n        bar = null;\r\n      }\r\n\r\n      if (bar) {\r\n        updateBar(bar, opt, symbolMeta);\r\n      } else {\r\n        bar = createBar(data, opt, symbolMeta, true);\r\n      }\r\n\r\n      data.setItemGraphicEl(newIndex, bar);\r\n      bar.__pictorialSymbolMeta = symbolMeta; // Add back\r\n\r\n      group.add(bar);\r\n      updateCommon(bar, opt, symbolMeta);\r\n    }).remove(function (dataIndex) {\r\n      var bar = oldData.getItemGraphicEl(dataIndex);\r\n      bar && removeBar(oldData, dataIndex, bar.__pictorialSymbolMeta.animationModel, bar);\r\n    }).execute();\r\n    this._data = data;\r\n    return this.group;\r\n  };\r\n\r\n  PictorialBarView.prototype.remove = function (ecModel, api) {\r\n    var group = this.group;\r\n    var data = this._data;\r\n\r\n    if (ecModel.get('animation')) {\r\n      if (data) {\r\n        data.eachItemGraphicEl(function (bar) {\r\n          removeBar(data, getECData(bar).dataIndex, ecModel, bar);\r\n        });\r\n      }\r\n    } else {\r\n      group.removeAll();\r\n    }\r\n  };\r\n\r\n  PictorialBarView.type = 'pictorialBar';\r\n  return PictorialBarView;\r\n}(ChartView); // Set or calculate default value about symbol, and calculate layout info.\r\n\r\n\r\nfunction getSymbolMeta(data, dataIndex, itemModel, opt) {\r\n  var layout = data.getItemLayout(dataIndex);\r\n  var symbolRepeat = itemModel.get('symbolRepeat');\r\n  var symbolClip = itemModel.get('symbolClip');\r\n  var symbolPosition = itemModel.get('symbolPosition') || 'start';\r\n  var symbolRotate = itemModel.get('symbolRotate');\r\n  var rotation = (symbolRotate || 0) * Math.PI / 180 || 0;\r\n  var symbolPatternSize = itemModel.get('symbolPatternSize') || 2;\r\n  var isAnimationEnabled = itemModel.isAnimationEnabled();\r\n  var symbolMeta = {\r\n    dataIndex: dataIndex,\r\n    layout: layout,\r\n    itemModel: itemModel,\r\n    symbolType: data.getItemVisual(dataIndex, 'symbol') || 'circle',\r\n    style: data.getItemVisual(dataIndex, 'style'),\r\n    symbolClip: symbolClip,\r\n    symbolRepeat: symbolRepeat,\r\n    symbolRepeatDirection: itemModel.get('symbolRepeatDirection'),\r\n    symbolPatternSize: symbolPatternSize,\r\n    rotation: rotation,\r\n    animationModel: isAnimationEnabled ? itemModel : null,\r\n    hoverScale: isAnimationEnabled && itemModel.get(['emphasis', 'scale']),\r\n    z2: itemModel.getShallow('z', true) || 0\r\n  };\r\n  prepareBarLength(itemModel, symbolRepeat, layout, opt, symbolMeta);\r\n  prepareSymbolSize(data, dataIndex, layout, symbolRepeat, symbolClip, symbolMeta.boundingLength, symbolMeta.pxSign, symbolPatternSize, opt, symbolMeta);\r\n  prepareLineWidth(itemModel, symbolMeta.symbolScale, rotation, opt, symbolMeta);\r\n  var symbolSize = symbolMeta.symbolSize;\r\n  var symbolOffset = normalizeSymbolOffset(itemModel.get('symbolOffset'), symbolSize);\r\n  prepareLayoutInfo(itemModel, symbolSize, layout, symbolRepeat, symbolClip, symbolOffset, symbolPosition, symbolMeta.valueLineWidth, symbolMeta.boundingLength, symbolMeta.repeatCutLength, opt, symbolMeta);\r\n  return symbolMeta;\r\n} // bar length can be negative.\r\n\r\n\r\nfunction prepareBarLength(itemModel, symbolRepeat, layout, opt, outputSymbolMeta) {\r\n  var valueDim = opt.valueDim;\r\n  var symbolBoundingData = itemModel.get('symbolBoundingData');\r\n  var valueAxis = opt.coordSys.getOtherAxis(opt.coordSys.getBaseAxis());\r\n  var zeroPx = valueAxis.toGlobalCoord(valueAxis.dataToCoord(0));\r\n  var pxSignIdx = 1 - +(layout[valueDim.wh] <= 0);\r\n  var boundingLength;\r\n\r\n  if (zrUtil.isArray(symbolBoundingData)) {\r\n    var symbolBoundingExtent = [convertToCoordOnAxis(valueAxis, symbolBoundingData[0]) - zeroPx, convertToCoordOnAxis(valueAxis, symbolBoundingData[1]) - zeroPx];\r\n    symbolBoundingExtent[1] < symbolBoundingExtent[0] && symbolBoundingExtent.reverse();\r\n    boundingLength = symbolBoundingExtent[pxSignIdx];\r\n  } else if (symbolBoundingData != null) {\r\n    boundingLength = convertToCoordOnAxis(valueAxis, symbolBoundingData) - zeroPx;\r\n  } else if (symbolRepeat) {\r\n    boundingLength = opt.coordSysExtent[valueDim.index][pxSignIdx] - zeroPx;\r\n  } else {\r\n    boundingLength = layout[valueDim.wh];\r\n  }\r\n\r\n  outputSymbolMeta.boundingLength = boundingLength;\r\n\r\n  if (symbolRepeat) {\r\n    outputSymbolMeta.repeatCutLength = layout[valueDim.wh];\r\n  } // if 'pxSign' means sign of pixel,  it can't be zero, or symbolScale will be zero\r\n  // and when borderWidth be settled, the actual linewidth will be NaN\r\n\r\n\r\n  outputSymbolMeta.pxSign = boundingLength > 0 ? 1 : -1;\r\n}\r\n\r\nfunction convertToCoordOnAxis(axis, value) {\r\n  return axis.toGlobalCoord(axis.dataToCoord(axis.scale.parse(value)));\r\n} // Support ['100%', '100%']\r\n\r\n\r\nfunction prepareSymbolSize(data, dataIndex, layout, symbolRepeat, symbolClip, boundingLength, pxSign, symbolPatternSize, opt, outputSymbolMeta) {\r\n  var valueDim = opt.valueDim;\r\n  var categoryDim = opt.categoryDim;\r\n  var categorySize = Math.abs(layout[categoryDim.wh]);\r\n  var symbolSize = data.getItemVisual(dataIndex, 'symbolSize');\r\n  var parsedSymbolSize;\r\n\r\n  if (zrUtil.isArray(symbolSize)) {\r\n    parsedSymbolSize = symbolSize.slice();\r\n  } else {\r\n    if (symbolSize == null) {\r\n      // will parse to number below\r\n      parsedSymbolSize = ['100%', '100%'];\r\n    } else {\r\n      parsedSymbolSize = [symbolSize, symbolSize];\r\n    }\r\n  } // Note: percentage symbolSize (like '100%') do not consider lineWidth, because it is\r\n  // to complicated to calculate real percent value if considering scaled lineWidth.\r\n  // So the actual size will bigger than layout size if lineWidth is bigger than zero,\r\n  // which can be tolerated in pictorial chart.\r\n\r\n\r\n  parsedSymbolSize[categoryDim.index] = parsePercent(parsedSymbolSize[categoryDim.index], categorySize);\r\n  parsedSymbolSize[valueDim.index] = parsePercent(parsedSymbolSize[valueDim.index], symbolRepeat ? categorySize : Math.abs(boundingLength));\r\n  outputSymbolMeta.symbolSize = parsedSymbolSize; // If x or y is less than zero, show reversed shape.\r\n\r\n  var symbolScale = outputSymbolMeta.symbolScale = [parsedSymbolSize[0] / symbolPatternSize, parsedSymbolSize[1] / symbolPatternSize]; // Follow convention, 'right' and 'top' is the normal scale.\r\n\r\n  symbolScale[valueDim.index] *= (opt.isHorizontal ? -1 : 1) * pxSign;\r\n}\r\n\r\nfunction prepareLineWidth(itemModel, symbolScale, rotation, opt, outputSymbolMeta) {\r\n  // In symbols are drawn with scale, so do not need to care about the case that width\r\n  // or height are too small. But symbol use strokeNoScale, where acture lineWidth should\r\n  // be calculated.\r\n  var valueLineWidth = itemModel.get(BAR_BORDER_WIDTH_QUERY) || 0;\r\n\r\n  if (valueLineWidth) {\r\n    pathForLineWidth.attr({\r\n      scaleX: symbolScale[0],\r\n      scaleY: symbolScale[1],\r\n      rotation: rotation\r\n    });\r\n    pathForLineWidth.updateTransform();\r\n    valueLineWidth /= pathForLineWidth.getLineScale();\r\n    valueLineWidth *= symbolScale[opt.valueDim.index];\r\n  }\r\n\r\n  outputSymbolMeta.valueLineWidth = valueLineWidth || 0;\r\n}\r\n\r\nfunction prepareLayoutInfo(itemModel, symbolSize, layout, symbolRepeat, symbolClip, symbolOffset, symbolPosition, valueLineWidth, boundingLength, repeatCutLength, opt, outputSymbolMeta) {\r\n  var categoryDim = opt.categoryDim;\r\n  var valueDim = opt.valueDim;\r\n  var pxSign = outputSymbolMeta.pxSign;\r\n  var unitLength = Math.max(symbolSize[valueDim.index] + valueLineWidth, 0);\r\n  var pathLen = unitLength; // Note: rotation will not effect the layout of symbols, because user may\r\n  // want symbols to rotate on its center, which should not be translated\r\n  // when rotating.\r\n\r\n  if (symbolRepeat) {\r\n    var absBoundingLength = Math.abs(boundingLength);\r\n    var symbolMargin = zrUtil.retrieve(itemModel.get('symbolMargin'), '15%') + '';\r\n    var hasEndGap = false;\r\n\r\n    if (symbolMargin.lastIndexOf('!') === symbolMargin.length - 1) {\r\n      hasEndGap = true;\r\n      symbolMargin = symbolMargin.slice(0, symbolMargin.length - 1);\r\n    }\r\n\r\n    var symbolMarginNumeric = parsePercent(symbolMargin, symbolSize[valueDim.index]);\r\n    var uLenWithMargin = Math.max(unitLength + symbolMarginNumeric * 2, 0); // When symbol margin is less than 0, margin at both ends will be subtracted\r\n    // to ensure that all of the symbols will not be overflow the given area.\r\n\r\n    var endFix = hasEndGap ? 0 : symbolMarginNumeric * 2; // Both final repeatTimes and final symbolMarginNumeric area calculated based on\r\n    // boundingLength.\r\n\r\n    var repeatSpecified = isNumeric(symbolRepeat);\r\n    var repeatTimes = repeatSpecified ? symbolRepeat : toIntTimes((absBoundingLength + endFix) / uLenWithMargin); // Adjust calculate margin, to ensure each symbol is displayed\r\n    // entirely in the given layout area.\r\n\r\n    var mDiff = absBoundingLength - repeatTimes * unitLength;\r\n    symbolMarginNumeric = mDiff / 2 / (hasEndGap ? repeatTimes : Math.max(repeatTimes - 1, 1));\r\n    uLenWithMargin = unitLength + symbolMarginNumeric * 2;\r\n    endFix = hasEndGap ? 0 : symbolMarginNumeric * 2; // Update repeatTimes when not all symbol will be shown.\r\n\r\n    if (!repeatSpecified && symbolRepeat !== 'fixed') {\r\n      repeatTimes = repeatCutLength ? toIntTimes((Math.abs(repeatCutLength) + endFix) / uLenWithMargin) : 0;\r\n    }\r\n\r\n    pathLen = repeatTimes * uLenWithMargin - endFix;\r\n    outputSymbolMeta.repeatTimes = repeatTimes;\r\n    outputSymbolMeta.symbolMargin = symbolMarginNumeric;\r\n  }\r\n\r\n  var sizeFix = pxSign * (pathLen / 2);\r\n  var pathPosition = outputSymbolMeta.pathPosition = [];\r\n  pathPosition[categoryDim.index] = layout[categoryDim.wh] / 2;\r\n  pathPosition[valueDim.index] = symbolPosition === 'start' ? sizeFix : symbolPosition === 'end' ? boundingLength - sizeFix : boundingLength / 2; // 'center'\r\n\r\n  if (symbolOffset) {\r\n    pathPosition[0] += symbolOffset[0];\r\n    pathPosition[1] += symbolOffset[1];\r\n  }\r\n\r\n  var bundlePosition = outputSymbolMeta.bundlePosition = [];\r\n  bundlePosition[categoryDim.index] = layout[categoryDim.xy];\r\n  bundlePosition[valueDim.index] = layout[valueDim.xy];\r\n  var barRectShape = outputSymbolMeta.barRectShape = zrUtil.extend({}, layout);\r\n  barRectShape[valueDim.wh] = pxSign * Math.max(Math.abs(layout[valueDim.wh]), Math.abs(pathPosition[valueDim.index] + sizeFix));\r\n  barRectShape[categoryDim.wh] = layout[categoryDim.wh];\r\n  var clipShape = outputSymbolMeta.clipShape = {}; // Consider that symbol may be overflow layout rect.\r\n\r\n  clipShape[categoryDim.xy] = -layout[categoryDim.xy];\r\n  clipShape[categoryDim.wh] = opt.ecSize[categoryDim.wh];\r\n  clipShape[valueDim.xy] = 0;\r\n  clipShape[valueDim.wh] = layout[valueDim.wh];\r\n}\r\n\r\nfunction createPath(symbolMeta) {\r\n  var symbolPatternSize = symbolMeta.symbolPatternSize;\r\n  var path = createSymbol( // Consider texture img, make a big size.\r\n  symbolMeta.symbolType, -symbolPatternSize / 2, -symbolPatternSize / 2, symbolPatternSize, symbolPatternSize);\r\n  path.attr({\r\n    culling: true\r\n  });\r\n  path.type !== 'image' && path.setStyle({\r\n    strokeNoScale: true\r\n  });\r\n  return path;\r\n}\r\n\r\nfunction createOrUpdateRepeatSymbols(bar, opt, symbolMeta, isUpdate) {\r\n  var bundle = bar.__pictorialBundle;\r\n  var symbolSize = symbolMeta.symbolSize;\r\n  var valueLineWidth = symbolMeta.valueLineWidth;\r\n  var pathPosition = symbolMeta.pathPosition;\r\n  var valueDim = opt.valueDim;\r\n  var repeatTimes = symbolMeta.repeatTimes || 0;\r\n  var index = 0;\r\n  var unit = symbolSize[opt.valueDim.index] + valueLineWidth + symbolMeta.symbolMargin * 2;\r\n  eachPath(bar, function (path) {\r\n    path.__pictorialAnimationIndex = index;\r\n    path.__pictorialRepeatTimes = repeatTimes;\r\n\r\n    if (index < repeatTimes) {\r\n      updateAttr(path, null, makeTarget(index), symbolMeta, isUpdate);\r\n    } else {\r\n      updateAttr(path, null, {\r\n        scaleX: 0,\r\n        scaleY: 0\r\n      }, symbolMeta, isUpdate, function () {\r\n        bundle.remove(path);\r\n      });\r\n    } // updateHoverAnimation(path, symbolMeta);\r\n\r\n\r\n    index++;\r\n  });\r\n\r\n  for (; index < repeatTimes; index++) {\r\n    var path = createPath(symbolMeta);\r\n    path.__pictorialAnimationIndex = index;\r\n    path.__pictorialRepeatTimes = repeatTimes;\r\n    bundle.add(path);\r\n    var target = makeTarget(index);\r\n    updateAttr(path, {\r\n      x: target.x,\r\n      y: target.y,\r\n      scaleX: 0,\r\n      scaleY: 0\r\n    }, {\r\n      scaleX: target.scaleX,\r\n      scaleY: target.scaleY,\r\n      rotation: target.rotation\r\n    }, symbolMeta, isUpdate);\r\n  }\r\n\r\n  function makeTarget(index) {\r\n    var position = pathPosition.slice(); // (start && pxSign > 0) || (end && pxSign < 0): i = repeatTimes - index\r\n    // Otherwise: i = index;\r\n\r\n    var pxSign = symbolMeta.pxSign;\r\n    var i = index;\r\n\r\n    if (symbolMeta.symbolRepeatDirection === 'start' ? pxSign > 0 : pxSign < 0) {\r\n      i = repeatTimes - 1 - index;\r\n    }\r\n\r\n    position[valueDim.index] = unit * (i - repeatTimes / 2 + 0.5) + pathPosition[valueDim.index];\r\n    return {\r\n      x: position[0],\r\n      y: position[1],\r\n      scaleX: symbolMeta.symbolScale[0],\r\n      scaleY: symbolMeta.symbolScale[1],\r\n      rotation: symbolMeta.rotation\r\n    };\r\n  }\r\n}\r\n\r\nfunction createOrUpdateSingleSymbol(bar, opt, symbolMeta, isUpdate) {\r\n  var bundle = bar.__pictorialBundle;\r\n  var mainPath = bar.__pictorialMainPath;\r\n\r\n  if (!mainPath) {\r\n    mainPath = bar.__pictorialMainPath = createPath(symbolMeta);\r\n    bundle.add(mainPath);\r\n    updateAttr(mainPath, {\r\n      x: symbolMeta.pathPosition[0],\r\n      y: symbolMeta.pathPosition[1],\r\n      scaleX: 0,\r\n      scaleY: 0,\r\n      rotation: symbolMeta.rotation\r\n    }, {\r\n      scaleX: symbolMeta.symbolScale[0],\r\n      scaleY: symbolMeta.symbolScale[1]\r\n    }, symbolMeta, isUpdate);\r\n  } else {\r\n    updateAttr(mainPath, null, {\r\n      x: symbolMeta.pathPosition[0],\r\n      y: symbolMeta.pathPosition[1],\r\n      scaleX: symbolMeta.symbolScale[0],\r\n      scaleY: symbolMeta.symbolScale[1],\r\n      rotation: symbolMeta.rotation\r\n    }, symbolMeta, isUpdate);\r\n  }\r\n} // bar rect is used for label.\r\n\r\n\r\nfunction createOrUpdateBarRect(bar, symbolMeta, isUpdate) {\r\n  var rectShape = zrUtil.extend({}, symbolMeta.barRectShape);\r\n  var barRect = bar.__pictorialBarRect;\r\n\r\n  if (!barRect) {\r\n    barRect = bar.__pictorialBarRect = new graphic.Rect({\r\n      z2: 2,\r\n      shape: rectShape,\r\n      silent: true,\r\n      style: {\r\n        stroke: 'transparent',\r\n        fill: 'transparent',\r\n        lineWidth: 0\r\n      }\r\n    });\r\n    barRect.disableMorphing = true;\r\n    bar.add(barRect);\r\n  } else {\r\n    updateAttr(barRect, null, {\r\n      shape: rectShape\r\n    }, symbolMeta, isUpdate);\r\n  }\r\n}\r\n\r\nfunction createOrUpdateClip(bar, opt, symbolMeta, isUpdate) {\r\n  // If not clip, symbol will be remove and rebuilt.\r\n  if (symbolMeta.symbolClip) {\r\n    var clipPath = bar.__pictorialClipPath;\r\n    var clipShape = zrUtil.extend({}, symbolMeta.clipShape);\r\n    var valueDim = opt.valueDim;\r\n    var animationModel = symbolMeta.animationModel;\r\n    var dataIndex = symbolMeta.dataIndex;\r\n\r\n    if (clipPath) {\r\n      graphic.updateProps(clipPath, {\r\n        shape: clipShape\r\n      }, animationModel, dataIndex);\r\n    } else {\r\n      clipShape[valueDim.wh] = 0;\r\n      clipPath = new graphic.Rect({\r\n        shape: clipShape\r\n      });\r\n\r\n      bar.__pictorialBundle.setClipPath(clipPath);\r\n\r\n      bar.__pictorialClipPath = clipPath;\r\n      var target = {};\r\n      target[valueDim.wh] = symbolMeta.clipShape[valueDim.wh];\r\n      graphic[isUpdate ? 'updateProps' : 'initProps'](clipPath, {\r\n        shape: target\r\n      }, animationModel, dataIndex);\r\n    }\r\n  }\r\n}\r\n\r\nfunction getItemModel(data, dataIndex) {\r\n  var itemModel = data.getItemModel(dataIndex);\r\n  itemModel.getAnimationDelayParams = getAnimationDelayParams;\r\n  itemModel.isAnimationEnabled = isAnimationEnabled;\r\n  return itemModel;\r\n}\r\n\r\nfunction getAnimationDelayParams(path) {\r\n  // The order is the same as the z-order, see `symbolRepeatDiretion`.\r\n  return {\r\n    index: path.__pictorialAnimationIndex,\r\n    count: path.__pictorialRepeatTimes\r\n  };\r\n}\r\n\r\nfunction isAnimationEnabled() {\r\n  // `animation` prop can be set on itemModel in pictorial bar chart.\r\n  return this.parentModel.isAnimationEnabled() && !!this.getShallow('animation');\r\n}\r\n\r\nfunction createBar(data, opt, symbolMeta, isUpdate) {\r\n  // bar is the main element for each data.\r\n  var bar = new graphic.Group(); // bundle is used for location and clip.\r\n\r\n  var bundle = new graphic.Group();\r\n  bar.add(bundle);\r\n  bar.__pictorialBundle = bundle;\r\n  bundle.x = symbolMeta.bundlePosition[0];\r\n  bundle.y = symbolMeta.bundlePosition[1];\r\n\r\n  if (symbolMeta.symbolRepeat) {\r\n    createOrUpdateRepeatSymbols(bar, opt, symbolMeta);\r\n  } else {\r\n    createOrUpdateSingleSymbol(bar, opt, symbolMeta);\r\n  }\r\n\r\n  createOrUpdateBarRect(bar, symbolMeta, isUpdate);\r\n  createOrUpdateClip(bar, opt, symbolMeta, isUpdate);\r\n  bar.__pictorialShapeStr = getShapeStr(data, symbolMeta);\r\n  bar.__pictorialSymbolMeta = symbolMeta;\r\n  return bar;\r\n}\r\n\r\nfunction updateBar(bar, opt, symbolMeta) {\r\n  var animationModel = symbolMeta.animationModel;\r\n  var dataIndex = symbolMeta.dataIndex;\r\n  var bundle = bar.__pictorialBundle;\r\n  graphic.updateProps(bundle, {\r\n    x: symbolMeta.bundlePosition[0],\r\n    y: symbolMeta.bundlePosition[1]\r\n  }, animationModel, dataIndex);\r\n\r\n  if (symbolMeta.symbolRepeat) {\r\n    createOrUpdateRepeatSymbols(bar, opt, symbolMeta, true);\r\n  } else {\r\n    createOrUpdateSingleSymbol(bar, opt, symbolMeta, true);\r\n  }\r\n\r\n  createOrUpdateBarRect(bar, symbolMeta, true);\r\n  createOrUpdateClip(bar, opt, symbolMeta, true);\r\n}\r\n\r\nfunction removeBar(data, dataIndex, animationModel, bar) {\r\n  // Not show text when animating\r\n  var labelRect = bar.__pictorialBarRect;\r\n  labelRect && labelRect.removeTextContent();\r\n  var paths = [];\r\n  eachPath(bar, function (path) {\r\n    paths.push(path);\r\n  });\r\n  bar.__pictorialMainPath && paths.push(bar.__pictorialMainPath); // I do not find proper remove animation for clip yet.\r\n\r\n  bar.__pictorialClipPath && (animationModel = null);\r\n  zrUtil.each(paths, function (path) {\r\n    graphic.removeElement(path, {\r\n      scaleX: 0,\r\n      scaleY: 0\r\n    }, animationModel, dataIndex, function () {\r\n      bar.parent && bar.parent.remove(bar);\r\n    });\r\n  });\r\n  data.setItemGraphicEl(dataIndex, null);\r\n}\r\n\r\nfunction getShapeStr(data, symbolMeta) {\r\n  return [data.getItemVisual(symbolMeta.dataIndex, 'symbol') || 'none', !!symbolMeta.symbolRepeat, !!symbolMeta.symbolClip].join(':');\r\n}\r\n\r\nfunction eachPath(bar, cb, context) {\r\n  // Do not use Group#eachChild, because it do not support remove.\r\n  zrUtil.each(bar.__pictorialBundle.children(), function (el) {\r\n    el !== bar.__pictorialBarRect && cb.call(context, el);\r\n  });\r\n}\r\n\r\nfunction updateAttr(el, immediateAttrs, animationAttrs, symbolMeta, isUpdate, cb) {\r\n  immediateAttrs && el.attr(immediateAttrs); // when symbolCip used, only clip path has init animation, otherwise it would be weird effect.\r\n\r\n  if (symbolMeta.symbolClip && !isUpdate) {\r\n    animationAttrs && el.attr(animationAttrs);\r\n  } else {\r\n    animationAttrs && graphic[isUpdate ? 'updateProps' : 'initProps'](el, animationAttrs, symbolMeta.animationModel, symbolMeta.dataIndex, cb);\r\n  }\r\n}\r\n\r\nfunction updateCommon(bar, opt, symbolMeta) {\r\n  var dataIndex = symbolMeta.dataIndex;\r\n  var itemModel = symbolMeta.itemModel; // Color must be excluded.\r\n  // Because symbol provide setColor individually to set fill and stroke\r\n\r\n  var emphasisModel = itemModel.getModel('emphasis');\r\n  var emphasisStyle = emphasisModel.getModel('itemStyle').getItemStyle();\r\n  var blurStyle = itemModel.getModel(['blur', 'itemStyle']).getItemStyle();\r\n  var selectStyle = itemModel.getModel(['select', 'itemStyle']).getItemStyle();\r\n  var cursorStyle = itemModel.getShallow('cursor');\r\n  var focus = emphasisModel.get('focus');\r\n  var blurScope = emphasisModel.get('blurScope');\r\n  var hoverScale = emphasisModel.get('scale');\r\n  eachPath(bar, function (path) {\r\n    if (path instanceof ZRImage) {\r\n      var pathStyle = path.style;\r\n      path.useStyle(zrUtil.extend({\r\n        // TODO other properties like dx, dy ?\r\n        image: pathStyle.image,\r\n        x: pathStyle.x,\r\n        y: pathStyle.y,\r\n        width: pathStyle.width,\r\n        height: pathStyle.height\r\n      }, symbolMeta.style));\r\n    } else {\r\n      path.useStyle(symbolMeta.style);\r\n    }\r\n\r\n    var emphasisState = path.ensureState('emphasis');\r\n    emphasisState.style = emphasisStyle;\r\n\r\n    if (hoverScale) {\r\n      // NOTE: Must after scale is set after updateAttr\r\n      emphasisState.scaleX = path.scaleX * 1.1;\r\n      emphasisState.scaleY = path.scaleY * 1.1;\r\n    }\r\n\r\n    path.ensureState('blur').style = blurStyle;\r\n    path.ensureState('select').style = selectStyle;\r\n    cursorStyle && (path.cursor = cursorStyle);\r\n    path.z2 = symbolMeta.z2;\r\n  });\r\n  var barPositionOutside = opt.valueDim.posDesc[+(symbolMeta.boundingLength > 0)];\r\n  var barRect = bar.__pictorialBarRect;\r\n  setLabelStyle(barRect, getLabelStatesModels(itemModel), {\r\n    labelFetcher: opt.seriesModel,\r\n    labelDataIndex: dataIndex,\r\n    defaultText: getDefaultLabel(opt.seriesModel.getData(), dataIndex),\r\n    inheritColor: symbolMeta.style.fill,\r\n    defaultOpacity: symbolMeta.style.opacity,\r\n    defaultOutsidePosition: barPositionOutside\r\n  });\r\n  toggleHoverEmphasis(bar, focus, blurScope, emphasisModel.get('disabled'));\r\n}\r\n\r\nfunction toIntTimes(times) {\r\n  var roundedTimes = Math.round(times); // Escapse accurate error\r\n\r\n  return Math.abs(times - roundedTimes) < 1e-4 ? roundedTimes : Math.ceil(times);\r\n}\r\n\r\nexport default PictorialBarView;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport BaseBarSeriesModel from './BaseBarSeries.js';\r\nimport { inheritDefaultOption } from '../../util/component.js';\r\n\r\nvar PictorialBarSeriesModel =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(PictorialBarSeriesModel, _super);\r\n\r\n  function PictorialBarSeriesModel() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = PictorialBarSeriesModel.type;\r\n    _this.hasSymbolVisual = true;\r\n    _this.defaultSymbol = 'roundRect';\r\n    return _this;\r\n  }\r\n\r\n  PictorialBarSeriesModel.prototype.getInitialData = function (option) {\r\n    // Disable stack.\r\n    option.stack = null;\r\n    return _super.prototype.getInitialData.apply(this, arguments);\r\n  };\r\n\r\n  PictorialBarSeriesModel.type = 'series.pictorialBar';\r\n  PictorialBarSeriesModel.dependencies = ['grid'];\r\n  PictorialBarSeriesModel.defaultOption = inheritDefaultOption(BaseBarSeriesModel.defaultOption, {\r\n    symbol: 'circle',\r\n    symbolSize: null,\r\n    symbolRotate: null,\r\n    symbolPosition: null,\r\n    symbolOffset: null,\r\n    symbolMargin: null,\r\n    symbolRepeat: false,\r\n    symbolRepeatDirection: 'end',\r\n    symbolClip: false,\r\n    symbolBoundingData: null,\r\n    symbolPatternSize: 400,\r\n    barGap: '-100%',\r\n    // z can be set in data item, which is z2 actually.\r\n    // Disable progressive\r\n    progressive: 0,\r\n    emphasis: {\r\n      // By default pictorialBar do not hover scale. Hover scale is not suitable\r\n      // for the case that both has foreground and background.\r\n      scale: false\r\n    },\r\n    select: {\r\n      itemStyle: {\r\n        borderColor: '#212121'\r\n      }\r\n    }\r\n  });\r\n  return PictorialBarSeriesModel;\r\n}(BaseBarSeriesModel);\r\n\r\nexport default PictorialBarSeriesModel;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport PictorialBarView from './PictorialBarView.js';\r\nimport PictorialBarSeriesModel from './PictorialBarSeries.js';\r\nimport { createProgressiveLayout, layout } from '../../layout/barGrid.js';\r\nimport { curry } from 'zrender/lib/core/util.js';\r\nexport function install(registers) {\r\n  registers.registerChartView(PictorialBarView);\r\n  registers.registerSeriesModel(PictorialBarSeriesModel);\r\n  registers.registerLayout(registers.PRIORITY.VISUAL.LAYOUT, curry(layout, 'pictorialBar')); // Do layout after other overall layout, which can prepare some information.\r\n\r\n  registers.registerLayout(registers.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT, createProgressiveLayout('pictorialBar'));\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport { ECPolygon } from '../line/poly.js';\r\nimport * as graphic from '../../util/graphic.js';\r\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\r\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\r\nimport { bind } from 'zrender/lib/core/util.js';\r\nimport DataDiffer from '../../data/DataDiffer.js';\r\nimport ChartView from '../../view/Chart.js';\r\nimport { saveOldStyle } from '../../animation/basicTransition.js';\r\n\r\nvar ThemeRiverView =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(ThemeRiverView, _super);\r\n\r\n  function ThemeRiverView() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = ThemeRiverView.type;\r\n    _this._layers = [];\r\n    return _this;\r\n  }\r\n\r\n  ThemeRiverView.prototype.render = function (seriesModel, ecModel, api) {\r\n    var data = seriesModel.getData();\r\n    var self = this;\r\n    var group = this.group;\r\n    var layersSeries = seriesModel.getLayerSeries();\r\n    var layoutInfo = data.getLayout('layoutInfo');\r\n    var rect = layoutInfo.rect;\r\n    var boundaryGap = layoutInfo.boundaryGap;\r\n    group.x = 0;\r\n    group.y = rect.y + boundaryGap[0];\r\n\r\n    function keyGetter(item) {\r\n      return item.name;\r\n    }\r\n\r\n    var dataDiffer = new DataDiffer(this._layersSeries || [], layersSeries, keyGetter, keyGetter);\r\n    var newLayersGroups = [];\r\n    dataDiffer.add(bind(process, this, 'add')).update(bind(process, this, 'update')).remove(bind(process, this, 'remove')).execute();\r\n\r\n    function process(status, idx, oldIdx) {\r\n      var oldLayersGroups = self._layers;\r\n\r\n      if (status === 'remove') {\r\n        group.remove(oldLayersGroups[idx]);\r\n        return;\r\n      }\r\n\r\n      var points0 = [];\r\n      var points1 = [];\r\n      var style;\r\n      var indices = layersSeries[idx].indices;\r\n      var j = 0;\r\n\r\n      for (; j < indices.length; j++) {\r\n        var layout = data.getItemLayout(indices[j]);\r\n        var x = layout.x;\r\n        var y0 = layout.y0;\r\n        var y = layout.y;\r\n        points0.push(x, y0);\r\n        points1.push(x, y0 + y);\r\n        style = data.getItemVisual(indices[j], 'style');\r\n      }\r\n\r\n      var polygon;\r\n      var textLayout = data.getItemLayout(indices[0]);\r\n      var labelModel = seriesModel.getModel('label');\r\n      var margin = labelModel.get('margin');\r\n      var emphasisModel = seriesModel.getModel('emphasis');\r\n\r\n      if (status === 'add') {\r\n        var layerGroup = newLayersGroups[idx] = new graphic.Group();\r\n        polygon = new ECPolygon({\r\n          shape: {\r\n            points: points0,\r\n            stackedOnPoints: points1,\r\n            smooth: 0.4,\r\n            stackedOnSmooth: 0.4,\r\n            smoothConstraint: false\r\n          },\r\n          z2: 0\r\n        });\r\n        layerGroup.add(polygon);\r\n        group.add(layerGroup);\r\n\r\n        if (seriesModel.isAnimationEnabled()) {\r\n          polygon.setClipPath(createGridClipShape(polygon.getBoundingRect(), seriesModel, function () {\r\n            polygon.removeClipPath();\r\n          }));\r\n        }\r\n      } else {\r\n        var layerGroup = oldLayersGroups[oldIdx];\r\n        polygon = layerGroup.childAt(0);\r\n        group.add(layerGroup);\r\n        newLayersGroups[idx] = layerGroup;\r\n        graphic.updateProps(polygon, {\r\n          shape: {\r\n            points: points0,\r\n            stackedOnPoints: points1\r\n          }\r\n        }, seriesModel);\r\n        saveOldStyle(polygon);\r\n      }\r\n\r\n      setLabelStyle(polygon, getLabelStatesModels(seriesModel), {\r\n        labelDataIndex: indices[j - 1],\r\n        defaultText: data.getName(indices[j - 1]),\r\n        inheritColor: style.fill\r\n      }, {\r\n        normal: {\r\n          verticalAlign: 'middle' // align: 'right'\r\n\r\n        }\r\n      });\r\n      polygon.setTextConfig({\r\n        position: null,\r\n        local: true\r\n      });\r\n      var labelEl = polygon.getTextContent(); // TODO More label position options.\r\n\r\n      if (labelEl) {\r\n        labelEl.x = textLayout.x - margin;\r\n        labelEl.y = textLayout.y0 + textLayout.y / 2;\r\n      }\r\n\r\n      polygon.useStyle(style);\r\n      data.setItemGraphicEl(idx, polygon);\r\n      setStatesStylesFromModel(polygon, seriesModel);\r\n      toggleHoverEmphasis(polygon, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\r\n    }\r\n\r\n    this._layersSeries = layersSeries;\r\n    this._layers = newLayersGroups;\r\n  };\r\n\r\n  ThemeRiverView.type = 'themeRiver';\r\n  return ThemeRiverView;\r\n}(ChartView);\r\n\r\n; // add animation to the view\r\n\r\nfunction createGridClipShape(rect, seriesModel, cb) {\r\n  var rectEl = new graphic.Rect({\r\n    shape: {\r\n      x: rect.x - 10,\r\n      y: rect.y - 10,\r\n      width: 0,\r\n      height: rect.height + 20\r\n    }\r\n  });\r\n  graphic.initProps(rectEl, {\r\n    shape: {\r\n      x: rect.x - 50,\r\n      width: rect.width + 100,\r\n      height: rect.height + 20\r\n    }\r\n  }, seriesModel, cb);\r\n  return rectEl;\r\n}\r\n\r\nexport default ThemeRiverView;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport SeriesModel from '../../model/Series.js';\r\nimport prepareSeriesDataSchema from '../../data/helper/createDimensions.js';\r\nimport { getDimensionTypeByAxis } from '../../data/helper/dimensionHelper.js';\r\nimport SeriesData from '../../data/SeriesData.js';\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport { groupData, SINGLE_REFERRING } from '../../util/model.js';\r\nimport LegendVisualProvider from '../../visual/LegendVisualProvider.js';\r\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\r\nvar DATA_NAME_INDEX = 2;\r\n\r\nvar ThemeRiverSeriesModel =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(ThemeRiverSeriesModel, _super);\r\n\r\n  function ThemeRiverSeriesModel() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = ThemeRiverSeriesModel.type;\r\n    return _this;\r\n  }\r\n  /**\r\n   * @override\r\n   */\r\n\r\n\r\n  ThemeRiverSeriesModel.prototype.init = function (option) {\r\n    // eslint-disable-next-line\r\n    _super.prototype.init.apply(this, arguments); // Put this function here is for the sake of consistency of code style.\r\n    // Enable legend selection for each data item\r\n    // Use a function instead of direct access because data reference may changed\r\n\r\n\r\n    this.legendVisualProvider = new LegendVisualProvider(zrUtil.bind(this.getData, this), zrUtil.bind(this.getRawData, this));\r\n  };\r\n  /**\r\n   * If there is no value of a certain point in the time for some event,set it value to 0.\r\n   *\r\n   * @param {Array} data  initial data in the option\r\n   * @return {Array}\r\n   */\r\n\r\n\r\n  ThemeRiverSeriesModel.prototype.fixData = function (data) {\r\n    var rawDataLength = data.length;\r\n    /**\r\n     * Make sure every layer data get the same keys.\r\n     * The value index tells which layer has visited.\r\n     * {\r\n     *  2014/01/01: -1\r\n     * }\r\n     */\r\n\r\n    var timeValueKeys = {}; // grouped data by name\r\n\r\n    var groupResult = groupData(data, function (item) {\r\n      if (!timeValueKeys.hasOwnProperty(item[0] + '')) {\r\n        timeValueKeys[item[0] + ''] = -1;\r\n      }\r\n\r\n      return item[2];\r\n    });\r\n    var layerData = [];\r\n    groupResult.buckets.each(function (items, key) {\r\n      layerData.push({\r\n        name: key,\r\n        dataList: items\r\n      });\r\n    });\r\n    var layerNum = layerData.length;\r\n\r\n    for (var k = 0; k < layerNum; ++k) {\r\n      var name_1 = layerData[k].name;\r\n\r\n      for (var j = 0; j < layerData[k].dataList.length; ++j) {\r\n        var timeValue = layerData[k].dataList[j][0] + '';\r\n        timeValueKeys[timeValue] = k;\r\n      }\r\n\r\n      for (var timeValue in timeValueKeys) {\r\n        if (timeValueKeys.hasOwnProperty(timeValue) && timeValueKeys[timeValue] !== k) {\r\n          timeValueKeys[timeValue] = k;\r\n          data[rawDataLength] = [timeValue, 0, name_1];\r\n          rawDataLength++;\r\n        }\r\n      }\r\n    }\r\n\r\n    return data;\r\n  };\r\n  /**\r\n   * @override\r\n   * @param  option  the initial option that user gave\r\n   * @param  ecModel  the model object for themeRiver option\r\n   */\r\n\r\n\r\n  ThemeRiverSeriesModel.prototype.getInitialData = function (option, ecModel) {\r\n    var singleAxisModel = this.getReferringComponents('singleAxis', SINGLE_REFERRING).models[0];\r\n    var axisType = singleAxisModel.get('type'); // filter the data item with the value of label is undefined\r\n\r\n    var filterData = zrUtil.filter(option.data, function (dataItem) {\r\n      return dataItem[2] !== undefined;\r\n    }); // ??? TODO design a stage to transfer data for themeRiver and lines?\r\n\r\n    var data = this.fixData(filterData || []);\r\n    var nameList = [];\r\n    var nameMap = this.nameMap = zrUtil.createHashMap();\r\n    var count = 0;\r\n\r\n    for (var i = 0; i < data.length; ++i) {\r\n      nameList.push(data[i][DATA_NAME_INDEX]);\r\n\r\n      if (!nameMap.get(data[i][DATA_NAME_INDEX])) {\r\n        nameMap.set(data[i][DATA_NAME_INDEX], count);\r\n        count++;\r\n      }\r\n    }\r\n\r\n    var dimensions = prepareSeriesDataSchema(data, {\r\n      coordDimensions: ['single'],\r\n      dimensionsDefine: [{\r\n        name: 'time',\r\n        type: getDimensionTypeByAxis(axisType)\r\n      }, {\r\n        name: 'value',\r\n        type: 'float'\r\n      }, {\r\n        name: 'name',\r\n        type: 'ordinal'\r\n      }],\r\n      encodeDefine: {\r\n        single: 0,\r\n        value: 1,\r\n        itemName: 2\r\n      }\r\n    }).dimensions;\r\n    var list = new SeriesData(dimensions, this);\r\n    list.initData(data);\r\n    return list;\r\n  };\r\n  /**\r\n   * The raw data is divided into multiple layers and each layer\r\n   *     has same name.\r\n   */\r\n\r\n\r\n  ThemeRiverSeriesModel.prototype.getLayerSeries = function () {\r\n    var data = this.getData();\r\n    var lenCount = data.count();\r\n    var indexArr = [];\r\n\r\n    for (var i = 0; i < lenCount; ++i) {\r\n      indexArr[i] = i;\r\n    }\r\n\r\n    var timeDim = data.mapDimension('single'); // data group by name\r\n\r\n    var groupResult = groupData(indexArr, function (index) {\r\n      return data.get('name', index);\r\n    });\r\n    var layerSeries = [];\r\n    groupResult.buckets.each(function (items, key) {\r\n      items.sort(function (index1, index2) {\r\n        return data.get(timeDim, index1) - data.get(timeDim, index2);\r\n      });\r\n      layerSeries.push({\r\n        name: key,\r\n        indices: items\r\n      });\r\n    });\r\n    return layerSeries;\r\n  };\r\n  /**\r\n   * Get data indices for show tooltip content\r\n   */\r\n\r\n\r\n  ThemeRiverSeriesModel.prototype.getAxisTooltipData = function (dim, value, baseAxis) {\r\n    if (!zrUtil.isArray(dim)) {\r\n      dim = dim ? [dim] : [];\r\n    }\r\n\r\n    var data = this.getData();\r\n    var layerSeries = this.getLayerSeries();\r\n    var indices = [];\r\n    var layerNum = layerSeries.length;\r\n    var nestestValue;\r\n\r\n    for (var i = 0; i < layerNum; ++i) {\r\n      var minDist = Number.MAX_VALUE;\r\n      var nearestIdx = -1;\r\n      var pointNum = layerSeries[i].indices.length;\r\n\r\n      for (var j = 0; j < pointNum; ++j) {\r\n        var theValue = data.get(dim[0], layerSeries[i].indices[j]);\r\n        var dist = Math.abs(theValue - value);\r\n\r\n        if (dist <= minDist) {\r\n          nestestValue = theValue;\r\n          minDist = dist;\r\n          nearestIdx = layerSeries[i].indices[j];\r\n        }\r\n      }\r\n\r\n      indices.push(nearestIdx);\r\n    }\r\n\r\n    return {\r\n      dataIndices: indices,\r\n      nestestValue: nestestValue\r\n    };\r\n  };\r\n\r\n  ThemeRiverSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\r\n    var data = this.getData();\r\n    var name = data.getName(dataIndex);\r\n    var value = data.get(data.mapDimension('value'), dataIndex);\r\n    return createTooltipMarkup('nameValue', {\r\n      name: name,\r\n      value: value\r\n    });\r\n  };\r\n\r\n  ThemeRiverSeriesModel.type = 'series.themeRiver';\r\n  ThemeRiverSeriesModel.dependencies = ['singleAxis'];\r\n  ThemeRiverSeriesModel.defaultOption = {\r\n    // zlevel: 0,\r\n    z: 2,\r\n    colorBy: 'data',\r\n    coordinateSystem: 'singleAxis',\r\n    // gap in axis's orthogonal orientation\r\n    boundaryGap: ['10%', '10%'],\r\n    // legendHoverLink: true,\r\n    singleAxisIndex: 0,\r\n    animationEasing: 'linear',\r\n    label: {\r\n      margin: 4,\r\n      show: true,\r\n      position: 'left',\r\n      fontSize: 11\r\n    },\r\n    emphasis: {\r\n      label: {\r\n        show: true\r\n      }\r\n    }\r\n  };\r\n  return ThemeRiverSeriesModel;\r\n}(SeriesModel);\r\n\r\nexport default ThemeRiverSeriesModel;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport * as numberUtil from '../../util/number.js';\r\nexport default function themeRiverLayout(ecModel, api) {\r\n  ecModel.eachSeriesByType('themeRiver', function (seriesModel) {\r\n    var data = seriesModel.getData();\r\n    var single = seriesModel.coordinateSystem;\r\n    var layoutInfo = {}; // use the axis boundingRect for view\r\n\r\n    var rect = single.getRect();\r\n    layoutInfo.rect = rect;\r\n    var boundaryGap = seriesModel.get('boundaryGap');\r\n    var axis = single.getAxis();\r\n    layoutInfo.boundaryGap = boundaryGap;\r\n\r\n    if (axis.orient === 'horizontal') {\r\n      boundaryGap[0] = numberUtil.parsePercent(boundaryGap[0], rect.height);\r\n      boundaryGap[1] = numberUtil.parsePercent(boundaryGap[1], rect.height);\r\n      var height = rect.height - boundaryGap[0] - boundaryGap[1];\r\n      doThemeRiverLayout(data, seriesModel, height);\r\n    } else {\r\n      boundaryGap[0] = numberUtil.parsePercent(boundaryGap[0], rect.width);\r\n      boundaryGap[1] = numberUtil.parsePercent(boundaryGap[1], rect.width);\r\n      var width = rect.width - boundaryGap[0] - boundaryGap[1];\r\n      doThemeRiverLayout(data, seriesModel, width);\r\n    }\r\n\r\n    data.setLayout('layoutInfo', layoutInfo);\r\n  });\r\n}\r\n/**\r\n * The layout information about themeriver\r\n *\r\n * @param data  data in the series\r\n * @param seriesModel  the model object of themeRiver series\r\n * @param height  value used to compute every series height\r\n */\r\n\r\nfunction doThemeRiverLayout(data, seriesModel, height) {\r\n  if (!data.count()) {\r\n    return;\r\n  }\r\n\r\n  var coordSys = seriesModel.coordinateSystem; // the data in each layer are organized into a series.\r\n\r\n  var layerSeries = seriesModel.getLayerSeries(); // the points in each layer.\r\n\r\n  var timeDim = data.mapDimension('single');\r\n  var valueDim = data.mapDimension('value');\r\n  var layerPoints = zrUtil.map(layerSeries, function (singleLayer) {\r\n    return zrUtil.map(singleLayer.indices, function (idx) {\r\n      var pt = coordSys.dataToPoint(data.get(timeDim, idx));\r\n      pt[1] = data.get(valueDim, idx);\r\n      return pt;\r\n    });\r\n  });\r\n  var base = computeBaseline(layerPoints);\r\n  var baseLine = base.y0;\r\n  var ky = height / base.max; // set layout information for each item.\r\n\r\n  var n = layerSeries.length;\r\n  var m = layerSeries[0].indices.length;\r\n  var baseY0;\r\n\r\n  for (var j = 0; j < m; ++j) {\r\n    baseY0 = baseLine[j] * ky;\r\n    data.setItemLayout(layerSeries[0].indices[j], {\r\n      layerIndex: 0,\r\n      x: layerPoints[0][j][0],\r\n      y0: baseY0,\r\n      y: layerPoints[0][j][1] * ky\r\n    });\r\n\r\n    for (var i = 1; i < n; ++i) {\r\n      baseY0 += layerPoints[i - 1][j][1] * ky;\r\n      data.setItemLayout(layerSeries[i].indices[j], {\r\n        layerIndex: i,\r\n        x: layerPoints[i][j][0],\r\n        y0: baseY0,\r\n        y: layerPoints[i][j][1] * ky\r\n      });\r\n    }\r\n  }\r\n}\r\n/**\r\n * Compute the baseLine of the rawdata\r\n * Inspired by Lee Byron's paper Stacked Graphs - Geometry & Aesthetics\r\n *\r\n * @param  data  the points in each layer\r\n */\r\n\r\n\r\nfunction computeBaseline(data) {\r\n  var layerNum = data.length;\r\n  var pointNum = data[0].length;\r\n  var sums = [];\r\n  var y0 = [];\r\n  var max = 0;\r\n\r\n  for (var i = 0; i < pointNum; ++i) {\r\n    var temp = 0;\r\n\r\n    for (var j = 0; j < layerNum; ++j) {\r\n      temp += data[j][i][1];\r\n    }\r\n\r\n    if (temp > max) {\r\n      max = temp;\r\n    }\r\n\r\n    sums.push(temp);\r\n  }\r\n\r\n  for (var k = 0; k < pointNum; ++k) {\r\n    y0[k] = (max - sums[k]) / 2;\r\n  }\r\n\r\n  max = 0;\r\n\r\n  for (var l = 0; l < pointNum; ++l) {\r\n    var sum = sums[l] + y0[l];\r\n\r\n    if (sum > max) {\r\n      max = sum;\r\n    }\r\n  }\r\n\r\n  return {\r\n    y0: y0,\r\n    max: max\r\n  };\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\nimport ThemeRiverView from './ThemeRiverView.js';\r\nimport ThemeRiverSeriesModel from './ThemeRiverSeries.js';\r\nimport themeRiverLayout from './themeRiverLayout.js';\r\nimport dataFilter from '../../processor/dataFilter.js';\r\nexport function install(registers) {\r\n  registers.registerChartView(ThemeRiverView);\r\n  registers.registerSeriesModel(ThemeRiverSeriesModel);\r\n  registers.registerLayout(themeRiverLayout);\r\n  registers.registerProcessor(dataFilter('themeRiver'));\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport * as graphic from '../../util/graphic.js';\r\nimport { toggleHoverEmphasis, SPECIAL_STATES, DISPLAY_STATES } from '../../util/states.js';\r\nimport { createTextStyle } from '../../label/labelStyle.js';\r\nimport { getECData } from '../../util/innerStore.js';\r\nimport { getSectorCornerRadius } from '../helper/sectorHelper.js';\r\nimport { createOrUpdatePatternFromDecal } from '../../util/decal.js';\r\nimport { saveOldStyle } from '../../animation/basicTransition.js';\r\nimport { normalizeRadian } from 'zrender/lib/contain/util.js';\r\nvar DEFAULT_SECTOR_Z = 2;\r\nvar DEFAULT_TEXT_Z = 4;\r\n/**\r\n * Sunburstce of Sunburst including Sector, Label, LabelLine\r\n */\r\n\r\nvar SunburstPiece =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(SunburstPiece, _super);\r\n\r\n  function SunburstPiece(node, seriesModel, ecModel, api) {\r\n    var _this = _super.call(this) || this;\r\n\r\n    _this.z2 = DEFAULT_SECTOR_Z;\r\n    _this.textConfig = {\r\n      inside: true\r\n    };\r\n    getECData(_this).seriesIndex = seriesModel.seriesIndex;\r\n    var text = new graphic.Text({\r\n      z2: DEFAULT_TEXT_Z,\r\n      silent: node.getModel().get(['label', 'silent'])\r\n    });\r\n\r\n    _this.setTextContent(text);\r\n\r\n    _this.updateData(true, node, seriesModel, ecModel, api);\r\n\r\n    return _this;\r\n  }\r\n\r\n  SunburstPiece.prototype.updateData = function (firstCreate, node, // state: 'emphasis' | 'normal' | 'highlight' | 'downplay',\r\n  seriesModel, ecModel, api) {\r\n    this.node = node;\r\n    node.piece = this;\r\n    seriesModel = seriesModel || this._seriesModel;\r\n    ecModel = ecModel || this._ecModel;\r\n    var sector = this;\r\n    getECData(sector).dataIndex = node.dataIndex;\r\n    var itemModel = node.getModel();\r\n    var emphasisModel = itemModel.getModel('emphasis');\r\n    var layout = node.getLayout();\r\n    var sectorShape = zrUtil.extend({}, layout);\r\n    sectorShape.label = null;\r\n    var normalStyle = node.getVisual('style');\r\n    normalStyle.lineJoin = 'bevel';\r\n    var decal = node.getVisual('decal');\r\n\r\n    if (decal) {\r\n      normalStyle.decal = createOrUpdatePatternFromDecal(decal, api);\r\n    }\r\n\r\n    var cornerRadius = getSectorCornerRadius(itemModel.getModel('itemStyle'), sectorShape, true);\r\n    zrUtil.extend(sectorShape, cornerRadius);\r\n    zrUtil.each(SPECIAL_STATES, function (stateName) {\r\n      var state = sector.ensureState(stateName);\r\n      var itemStyleModel = itemModel.getModel([stateName, 'itemStyle']);\r\n      state.style = itemStyleModel.getItemStyle(); // border radius\r\n\r\n      var cornerRadius = getSectorCornerRadius(itemStyleModel, sectorShape);\r\n\r\n      if (cornerRadius) {\r\n        state.shape = cornerRadius;\r\n      }\r\n    });\r\n\r\n    if (firstCreate) {\r\n      sector.setShape(sectorShape);\r\n      sector.shape.r = layout.r0;\r\n      graphic.initProps(sector, {\r\n        shape: {\r\n          r: layout.r\r\n        }\r\n      }, seriesModel, node.dataIndex);\r\n    } else {\r\n      // Disable animation for gradient since no interpolation method\r\n      // is supported for gradient\r\n      graphic.updateProps(sector, {\r\n        shape: sectorShape\r\n      }, seriesModel);\r\n      saveOldStyle(sector);\r\n    }\r\n\r\n    sector.useStyle(normalStyle);\r\n\r\n    this._updateLabel(seriesModel);\r\n\r\n    var cursorStyle = itemModel.getShallow('cursor');\r\n    cursorStyle && sector.attr('cursor', cursorStyle);\r\n    this._seriesModel = seriesModel || this._seriesModel;\r\n    this._ecModel = ecModel || this._ecModel;\r\n    var focus = emphasisModel.get('focus');\r\n    var focusOrIndices = focus === 'ancestor' ? node.getAncestorsIndices() : focus === 'descendant' ? node.getDescendantIndices() : focus;\r\n    toggleHoverEmphasis(this, focusOrIndices, emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\r\n  };\r\n\r\n  SunburstPiece.prototype._updateLabel = function (seriesModel) {\r\n    var _this = this;\r\n\r\n    var itemModel = this.node.getModel();\r\n    var normalLabelModel = itemModel.getModel('label');\r\n    var layout = this.node.getLayout();\r\n    var angle = layout.endAngle - layout.startAngle;\r\n    var midAngle = (layout.startAngle + layout.endAngle) / 2;\r\n    var dx = Math.cos(midAngle);\r\n    var dy = Math.sin(midAngle);\r\n    var sector = this;\r\n    var label = sector.getTextContent();\r\n    var dataIndex = this.node.dataIndex;\r\n    var labelMinAngle = normalLabelModel.get('minAngle') / 180 * Math.PI;\r\n    var isNormalShown = normalLabelModel.get('show') && !(labelMinAngle != null && Math.abs(angle) < labelMinAngle);\r\n    label.ignore = !isNormalShown; // TODO use setLabelStyle\r\n\r\n    zrUtil.each(DISPLAY_STATES, function (stateName) {\r\n      var labelStateModel = stateName === 'normal' ? itemModel.getModel('label') : itemModel.getModel([stateName, 'label']);\r\n      var isNormal = stateName === 'normal';\r\n      var state = isNormal ? label : label.ensureState(stateName);\r\n      var text = seriesModel.getFormattedLabel(dataIndex, stateName);\r\n\r\n      if (isNormal) {\r\n        text = text || _this.node.name;\r\n      }\r\n\r\n      state.style = createTextStyle(labelStateModel, {}, null, stateName !== 'normal', true);\r\n\r\n      if (text) {\r\n        state.style.text = text;\r\n      } // Not displaying text when angle is too small\r\n\r\n\r\n      var isShown = labelStateModel.get('show');\r\n\r\n      if (isShown != null && !isNormal) {\r\n        state.ignore = !isShown;\r\n      }\r\n\r\n      var labelPosition = getLabelAttr(labelStateModel, 'position');\r\n      var sectorState = isNormal ? sector : sector.states[stateName];\r\n      var labelColor = sectorState.style.fill;\r\n      sectorState.textConfig = {\r\n        outsideFill: labelStateModel.get('color') === 'inherit' ? labelColor : null,\r\n        inside: labelPosition !== 'outside'\r\n      };\r\n      var r;\r\n      var labelPadding = getLabelAttr(labelStateModel, 'distance') || 0;\r\n      var textAlign = getLabelAttr(labelStateModel, 'align');\r\n\r\n      if (labelPosition === 'outside') {\r\n        r = layout.r + labelPadding;\r\n        textAlign = midAngle > Math.PI / 2 ? 'right' : 'left';\r\n      } else {\r\n        if (!textAlign || textAlign === 'center') {\r\n          // Put label in the center if it's a circle\r\n          if (angle === 2 * Math.PI && layout.r0 === 0) {\r\n            r = 0;\r\n          } else {\r\n            r = (layout.r + layout.r0) / 2;\r\n          }\r\n\r\n          textAlign = 'center';\r\n        } else if (textAlign === 'left') {\r\n          r = layout.r0 + labelPadding;\r\n\r\n          if (midAngle > Math.PI / 2) {\r\n            textAlign = 'right';\r\n          }\r\n        } else if (textAlign === 'right') {\r\n          r = layout.r - labelPadding;\r\n\r\n          if (midAngle > Math.PI / 2) {\r\n            textAlign = 'left';\r\n          }\r\n        }\r\n      }\r\n\r\n      state.style.align = textAlign;\r\n      state.style.verticalAlign = getLabelAttr(labelStateModel, 'verticalAlign') || 'middle';\r\n      state.x = r * dx + layout.cx;\r\n      state.y = r * dy + layout.cy;\r\n      var rotateType = getLabelAttr(labelStateModel, 'rotate');\r\n      var rotate = 0;\r\n\r\n      if (rotateType === 'radial') {\r\n        rotate = normalizeRadian(-midAngle);\r\n\r\n        if (rotate > Math.PI / 2 && rotate < Math.PI * 1.5) {\r\n          rotate += Math.PI;\r\n        }\r\n      } else if (rotateType === 'tangential') {\r\n        rotate = Math.PI / 2 - midAngle;\r\n\r\n        if (rotate > Math.PI / 2) {\r\n          rotate -= Math.PI;\r\n        } else if (rotate < -Math.PI / 2) {\r\n          rotate += Math.PI;\r\n        }\r\n      } else if (zrUtil.isNumber(rotateType)) {\r\n        rotate = rotateType * Math.PI / 180;\r\n      }\r\n\r\n      state.rotation = rotate;\r\n    });\r\n\r\n    function getLabelAttr(model, name) {\r\n      var stateAttr = model.get(name);\r\n\r\n      if (stateAttr == null) {\r\n        return normalLabelModel.get(name);\r\n      }\r\n\r\n      return stateAttr;\r\n    }\r\n\r\n    label.dirtyStyle();\r\n  };\r\n\r\n  return SunburstPiece;\r\n}(graphic.Sector);\r\n\r\nexport default SunburstPiece;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { extend } from 'zrender/lib/core/util.js';\r\nimport { deprecateReplaceLog } from '../../util/log.js';\r\nimport { retrieveTargetInfo, aboveViewRoot } from '../helper/treeHelper.js';\r\nexport var ROOT_TO_NODE_ACTION = 'sunburstRootToNode';\r\nvar HIGHLIGHT_ACTION = 'sunburstHighlight';\r\nvar UNHIGHLIGHT_ACTION = 'sunburstUnhighlight';\r\nexport function installSunburstAction(registers) {\r\n  registers.registerAction({\r\n    type: ROOT_TO_NODE_ACTION,\r\n    update: 'updateView'\r\n  }, function (payload, ecModel) {\r\n    ecModel.eachComponent({\r\n      mainType: 'series',\r\n      subType: 'sunburst',\r\n      query: payload\r\n    }, handleRootToNode);\r\n\r\n    function handleRootToNode(model, index) {\r\n      var targetInfo = retrieveTargetInfo(payload, [ROOT_TO_NODE_ACTION], model);\r\n\r\n      if (targetInfo) {\r\n        var originViewRoot = model.getViewRoot();\r\n\r\n        if (originViewRoot) {\r\n          payload.direction = aboveViewRoot(originViewRoot, targetInfo.node) ? 'rollUp' : 'drillDown';\r\n        }\r\n\r\n        model.resetViewRoot(targetInfo.node);\r\n      }\r\n    }\r\n  });\r\n  registers.registerAction({\r\n    type: HIGHLIGHT_ACTION,\r\n    update: 'none'\r\n  }, function (payload, ecModel, api) {\r\n    // Clone\r\n    payload = extend({}, payload);\r\n    ecModel.eachComponent({\r\n      mainType: 'series',\r\n      subType: 'sunburst',\r\n      query: payload\r\n    }, handleHighlight);\r\n\r\n    function handleHighlight(model) {\r\n      var targetInfo = retrieveTargetInfo(payload, [HIGHLIGHT_ACTION], model);\r\n\r\n      if (targetInfo) {\r\n        payload.dataIndex = targetInfo.node.dataIndex;\r\n      }\r\n    }\r\n\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      deprecateReplaceLog('sunburstHighlight', 'highlight');\r\n    } // Fast forward action\r\n\r\n\r\n    api.dispatchAction(extend(payload, {\r\n      type: 'highlight'\r\n    }));\r\n  });\r\n  registers.registerAction({\r\n    type: UNHIGHLIGHT_ACTION,\r\n    update: 'updateView'\r\n  }, function (payload, ecModel, api) {\r\n    payload = extend({}, payload);\r\n\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      deprecateReplaceLog('sunburstUnhighlight', 'downplay');\r\n    }\r\n\r\n    api.dispatchAction(extend(payload, {\r\n      type: 'downplay'\r\n    }));\r\n  });\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport ChartView from '../../view/Chart.js';\r\nimport SunburstPiece from './SunburstPiece.js';\r\nimport DataDiffer from '../../data/DataDiffer.js';\r\nimport { ROOT_TO_NODE_ACTION } from './sunburstAction.js';\r\nimport { windowOpen } from '../../util/format.js';\r\n\r\nvar SunburstView =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(SunburstView, _super);\r\n\r\n  function SunburstView() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = SunburstView.type;\r\n    return _this;\r\n  }\r\n\r\n  SunburstView.prototype.render = function (seriesModel, ecModel, api, // @ts-ignore\r\n  payload) {\r\n    var self = this;\r\n    this.seriesModel = seriesModel;\r\n    this.api = api;\r\n    this.ecModel = ecModel;\r\n    var data = seriesModel.getData();\r\n    var virtualRoot = data.tree.root;\r\n    var newRoot = seriesModel.getViewRoot();\r\n    var group = this.group;\r\n    var renderLabelForZeroData = seriesModel.get('renderLabelForZeroData');\r\n    var newChildren = [];\r\n    newRoot.eachNode(function (node) {\r\n      newChildren.push(node);\r\n    });\r\n    var oldChildren = this._oldChildren || [];\r\n    dualTravel(newChildren, oldChildren);\r\n    renderRollUp(virtualRoot, newRoot);\r\n\r\n    this._initEvents();\r\n\r\n    this._oldChildren = newChildren;\r\n\r\n    function dualTravel(newChildren, oldChildren) {\r\n      if (newChildren.length === 0 && oldChildren.length === 0) {\r\n        return;\r\n      }\r\n\r\n      new DataDiffer(oldChildren, newChildren, getKey, getKey).add(processNode).update(processNode).remove(zrUtil.curry(processNode, null)).execute();\r\n\r\n      function getKey(node) {\r\n        return node.getId();\r\n      }\r\n\r\n      function processNode(newIdx, oldIdx) {\r\n        var newNode = newIdx == null ? null : newChildren[newIdx];\r\n        var oldNode = oldIdx == null ? null : oldChildren[oldIdx];\r\n        doRenderNode(newNode, oldNode);\r\n      }\r\n    }\r\n\r\n    function doRenderNode(newNode, oldNode) {\r\n      if (!renderLabelForZeroData && newNode && !newNode.getValue()) {\r\n        // Not render data with value 0\r\n        newNode = null;\r\n      }\r\n\r\n      if (newNode !== virtualRoot && oldNode !== virtualRoot) {\r\n        if (oldNode && oldNode.piece) {\r\n          if (newNode) {\r\n            // Update\r\n            oldNode.piece.updateData(false, newNode, seriesModel, ecModel, api); // For tooltip\r\n\r\n            data.setItemGraphicEl(newNode.dataIndex, oldNode.piece);\r\n          } else {\r\n            // Remove\r\n            removeNode(oldNode);\r\n          }\r\n        } else if (newNode) {\r\n          // Add\r\n          var piece = new SunburstPiece(newNode, seriesModel, ecModel, api);\r\n          group.add(piece); // For tooltip\r\n\r\n          data.setItemGraphicEl(newNode.dataIndex, piece);\r\n        }\r\n      }\r\n    }\r\n\r\n    function removeNode(node) {\r\n      if (!node) {\r\n        return;\r\n      }\r\n\r\n      if (node.piece) {\r\n        group.remove(node.piece);\r\n        node.piece = null;\r\n      }\r\n    }\r\n\r\n    function renderRollUp(virtualRoot, viewRoot) {\r\n      if (viewRoot.depth > 0) {\r\n        // Render\r\n        if (self.virtualPiece) {\r\n          // Update\r\n          self.virtualPiece.updateData(false, virtualRoot, seriesModel, ecModel, api);\r\n        } else {\r\n          // Add\r\n          self.virtualPiece = new SunburstPiece(virtualRoot, seriesModel, ecModel, api);\r\n          group.add(self.virtualPiece);\r\n        } // TODO event scope\r\n\r\n\r\n        viewRoot.piece.off('click');\r\n        self.virtualPiece.on('click', function (e) {\r\n          self._rootToNode(viewRoot.parentNode);\r\n        });\r\n      } else if (self.virtualPiece) {\r\n        // Remove\r\n        group.remove(self.virtualPiece);\r\n        self.virtualPiece = null;\r\n      }\r\n    }\r\n  };\r\n  /**\r\n   * @private\r\n   */\r\n\r\n\r\n  SunburstView.prototype._initEvents = function () {\r\n    var _this = this;\r\n\r\n    this.group.off('click');\r\n    this.group.on('click', function (e) {\r\n      var targetFound = false;\r\n\r\n      var viewRoot = _this.seriesModel.getViewRoot();\r\n\r\n      viewRoot.eachNode(function (node) {\r\n        if (!targetFound && node.piece && node.piece === e.target) {\r\n          var nodeClick = node.getModel().get('nodeClick');\r\n\r\n          if (nodeClick === 'rootToNode') {\r\n            _this._rootToNode(node);\r\n          } else if (nodeClick === 'link') {\r\n            var itemModel = node.getModel();\r\n            var link = itemModel.get('link');\r\n\r\n            if (link) {\r\n              var linkTarget = itemModel.get('target', true) || '_blank';\r\n              windowOpen(link, linkTarget);\r\n            }\r\n          }\r\n\r\n          targetFound = true;\r\n        }\r\n      });\r\n    });\r\n  };\r\n  /**\r\n   * @private\r\n   */\r\n\r\n\r\n  SunburstView.prototype._rootToNode = function (node) {\r\n    if (node !== this.seriesModel.getViewRoot()) {\r\n      this.api.dispatchAction({\r\n        type: ROOT_TO_NODE_ACTION,\r\n        from: this.uid,\r\n        seriesId: this.seriesModel.id,\r\n        targetNode: node\r\n      });\r\n    }\r\n  };\r\n  /**\r\n   * @implement\r\n   */\r\n\r\n\r\n  SunburstView.prototype.containPoint = function (point, seriesModel) {\r\n    var treeRoot = seriesModel.getData();\r\n    var itemLayout = treeRoot.getItemLayout(0);\r\n\r\n    if (itemLayout) {\r\n      var dx = point[0] - itemLayout.cx;\r\n      var dy = point[1] - itemLayout.cy;\r\n      var radius = Math.sqrt(dx * dx + dy * dy);\r\n      return radius <= itemLayout.r && radius >= itemLayout.r0;\r\n    }\r\n  };\r\n\r\n  SunburstView.type = 'sunburst';\r\n  return SunburstView;\r\n}(ChartView);\r\n\r\nexport default SunburstView;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport SeriesModel from '../../model/Series.js';\r\nimport Tree from '../../data/Tree.js';\r\nimport { wrapTreePathInfo } from '../helper/treeHelper.js';\r\nimport Model from '../../model/Model.js';\r\nimport enableAriaDecalForTree from '../helper/enableAriaDecalForTree.js';\r\n\r\nvar SunburstSeriesModel =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(SunburstSeriesModel, _super);\r\n\r\n  function SunburstSeriesModel() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = SunburstSeriesModel.type;\r\n    _this.ignoreStyleOnData = true;\r\n    return _this;\r\n  }\r\n\r\n  SunburstSeriesModel.prototype.getInitialData = function (option, ecModel) {\r\n    // Create a virtual root.\r\n    var root = {\r\n      name: option.name,\r\n      children: option.data\r\n    };\r\n    completeTreeValue(root);\r\n    var levelModels = this._levelModels = zrUtil.map(option.levels || [], function (levelDefine) {\r\n      return new Model(levelDefine, this, ecModel);\r\n    }, this); // Make sure always a new tree is created when setOption,\r\n    // in TreemapView, we check whether oldTree === newTree\r\n    // to choose mappings approach among old shapes and new shapes.\r\n\r\n    var tree = Tree.createTree(root, this, beforeLink);\r\n\r\n    function beforeLink(nodeData) {\r\n      nodeData.wrapMethod('getItemModel', function (model, idx) {\r\n        var node = tree.getNodeByDataIndex(idx);\r\n        var levelModel = levelModels[node.depth];\r\n        levelModel && (model.parentModel = levelModel);\r\n        return model;\r\n      });\r\n    }\r\n\r\n    return tree.data;\r\n  };\r\n\r\n  SunburstSeriesModel.prototype.optionUpdated = function () {\r\n    this.resetViewRoot();\r\n  };\r\n  /*\r\n   * @override\r\n   */\r\n\r\n\r\n  SunburstSeriesModel.prototype.getDataParams = function (dataIndex) {\r\n    var params = _super.prototype.getDataParams.apply(this, arguments);\r\n\r\n    var node = this.getData().tree.getNodeByDataIndex(dataIndex);\r\n    params.treePathInfo = wrapTreePathInfo(node, this);\r\n    return params;\r\n  };\r\n\r\n  SunburstSeriesModel.prototype.getLevelModel = function (node) {\r\n    return this._levelModels && this._levelModels[node.depth];\r\n  };\r\n\r\n  SunburstSeriesModel.prototype.getViewRoot = function () {\r\n    return this._viewRoot;\r\n  };\r\n\r\n  SunburstSeriesModel.prototype.resetViewRoot = function (viewRoot) {\r\n    viewRoot ? this._viewRoot = viewRoot : viewRoot = this._viewRoot;\r\n    var root = this.getRawData().tree.root;\r\n\r\n    if (!viewRoot || viewRoot !== root && !root.contains(viewRoot)) {\r\n      this._viewRoot = root;\r\n    }\r\n  };\r\n\r\n  SunburstSeriesModel.prototype.enableAriaDecal = function () {\r\n    enableAriaDecalForTree(this);\r\n  };\r\n\r\n  SunburstSeriesModel.type = 'series.sunburst';\r\n  SunburstSeriesModel.defaultOption = {\r\n    // zlevel: 0,\r\n    z: 2,\r\n    // \u9ED8\u8BA4\u5168\u5C40\u5C45\u4E2D\r\n    center: ['50%', '50%'],\r\n    radius: [0, '75%'],\r\n    // \u9ED8\u8BA4\u987A\u65F6\u9488\r\n    clockwise: true,\r\n    startAngle: 90,\r\n    // \u6700\u5C0F\u89D2\u5EA6\u6539\u4E3A0\r\n    minAngle: 0,\r\n    // If still show when all data zero.\r\n    stillShowZeroSum: true,\r\n    // 'rootToNode', 'link', or false\r\n    nodeClick: 'rootToNode',\r\n    renderLabelForZeroData: false,\r\n    label: {\r\n      // could be: 'radial', 'tangential', or 'none'\r\n      rotate: 'radial',\r\n      show: true,\r\n      opacity: 1,\r\n      // 'left' is for inner side of inside, and 'right' is for outer\r\n      // side for inside\r\n      align: 'center',\r\n      position: 'inside',\r\n      distance: 5,\r\n      silent: true\r\n    },\r\n    itemStyle: {\r\n      borderWidth: 1,\r\n      borderColor: 'white',\r\n      borderType: 'solid',\r\n      shadowBlur: 0,\r\n      shadowColor: 'rgba(0, 0, 0, 0.2)',\r\n      shadowOffsetX: 0,\r\n      shadowOffsetY: 0,\r\n      opacity: 1\r\n    },\r\n    emphasis: {\r\n      focus: 'descendant'\r\n    },\r\n    blur: {\r\n      itemStyle: {\r\n        opacity: 0.2\r\n      },\r\n      label: {\r\n        opacity: 0.1\r\n      }\r\n    },\r\n    // Animation type can be expansion, scale.\r\n    animationType: 'expansion',\r\n    animationDuration: 1000,\r\n    animationDurationUpdate: 500,\r\n    data: [],\r\n\r\n    /**\r\n     * Sort order.\r\n     *\r\n     * Valid values: 'desc', 'asc', null, or callback function.\r\n     * 'desc' and 'asc' for descend and ascendant order;\r\n     * null for not sorting;\r\n     * example of callback function:\r\n     * function(nodeA, nodeB) {\r\n     *     return nodeA.getValue() - nodeB.getValue();\r\n     * }\r\n     */\r\n    sort: 'desc'\r\n  };\r\n  return SunburstSeriesModel;\r\n}(SeriesModel);\r\n\r\nfunction completeTreeValue(dataNode) {\r\n  // Postorder travel tree.\r\n  // If value of none-leaf node is not set,\r\n  // calculate it by suming up the value of all children.\r\n  var sum = 0;\r\n  zrUtil.each(dataNode.children, function (child) {\r\n    completeTreeValue(child);\r\n    var childValue = child.value; // TODO First value of array must be a number\r\n\r\n    zrUtil.isArray(childValue) && (childValue = childValue[0]);\r\n    sum += childValue;\r\n  });\r\n  var thisValue = dataNode.value;\r\n\r\n  if (zrUtil.isArray(thisValue)) {\r\n    thisValue = thisValue[0];\r\n  }\r\n\r\n  if (thisValue == null || isNaN(thisValue)) {\r\n    thisValue = sum;\r\n  } // Value should not less than 0.\r\n\r\n\r\n  if (thisValue < 0) {\r\n    thisValue = 0;\r\n  }\r\n\r\n  zrUtil.isArray(dataNode.value) ? dataNode.value[0] = thisValue : dataNode.value = thisValue;\r\n}\r\n\r\nexport default SunburstSeriesModel;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { parsePercent } from '../../util/number.js';\r\nimport * as zrUtil from 'zrender/lib/core/util.js'; // let PI2 = Math.PI * 2;\r\n\r\nvar RADIAN = Math.PI / 180;\r\nexport default function sunburstLayout(seriesType, ecModel, api) {\r\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\r\n    var center = seriesModel.get('center');\r\n    var radius = seriesModel.get('radius');\r\n\r\n    if (!zrUtil.isArray(radius)) {\r\n      radius = [0, radius];\r\n    }\r\n\r\n    if (!zrUtil.isArray(center)) {\r\n      center = [center, center];\r\n    }\r\n\r\n    var width = api.getWidth();\r\n    var height = api.getHeight();\r\n    var size = Math.min(width, height);\r\n    var cx = parsePercent(center[0], width);\r\n    var cy = parsePercent(center[1], height);\r\n    var r0 = parsePercent(radius[0], size / 2);\r\n    var r = parsePercent(radius[1], size / 2);\r\n    var startAngle = -seriesModel.get('startAngle') * RADIAN;\r\n    var minAngle = seriesModel.get('minAngle') * RADIAN;\r\n    var virtualRoot = seriesModel.getData().tree.root;\r\n    var treeRoot = seriesModel.getViewRoot();\r\n    var rootDepth = treeRoot.depth;\r\n    var sort = seriesModel.get('sort');\r\n\r\n    if (sort != null) {\r\n      initChildren(treeRoot, sort);\r\n    }\r\n\r\n    var validDataCount = 0;\r\n    zrUtil.each(treeRoot.children, function (child) {\r\n      !isNaN(child.getValue()) && validDataCount++;\r\n    });\r\n    var sum = treeRoot.getValue(); // Sum may be 0\r\n\r\n    var unitRadian = Math.PI / (sum || validDataCount) * 2;\r\n    var renderRollupNode = treeRoot.depth > 0;\r\n    var levels = treeRoot.height - (renderRollupNode ? -1 : 1);\r\n    var rPerLevel = (r - r0) / (levels || 1);\r\n    var clockwise = seriesModel.get('clockwise');\r\n    var stillShowZeroSum = seriesModel.get('stillShowZeroSum'); // In the case some sector angle is smaller than minAngle\r\n    // let restAngle = PI2;\r\n    // let valueSumLargerThanMinAngle = 0;\r\n\r\n    var dir = clockwise ? 1 : -1;\r\n    /**\r\n     * Render a tree\r\n     * @return increased angle\r\n     */\r\n\r\n    var renderNode = function (node, startAngle) {\r\n      if (!node) {\r\n        return;\r\n      }\r\n\r\n      var endAngle = startAngle; // Render self\r\n\r\n      if (node !== virtualRoot) {\r\n        // Tree node is virtual, so it doesn't need to be drawn\r\n        var value = node.getValue();\r\n        var angle = sum === 0 && stillShowZeroSum ? unitRadian : value * unitRadian;\r\n\r\n        if (angle < minAngle) {\r\n          angle = minAngle; // restAngle -= minAngle;\r\n        } // else {\r\n        //     valueSumLargerThanMinAngle += value;\r\n        // }\r\n\r\n\r\n        endAngle = startAngle + dir * angle;\r\n        var depth = node.depth - rootDepth - (renderRollupNode ? -1 : 1);\r\n        var rStart = r0 + rPerLevel * depth;\r\n        var rEnd = r0 + rPerLevel * (depth + 1);\r\n        var levelModel = seriesModel.getLevelModel(node);\r\n\r\n        if (levelModel) {\r\n          var r0_1 = levelModel.get('r0', true);\r\n          var r_1 = levelModel.get('r', true);\r\n          var radius_1 = levelModel.get('radius', true);\r\n\r\n          if (radius_1 != null) {\r\n            r0_1 = radius_1[0];\r\n            r_1 = radius_1[1];\r\n          }\r\n\r\n          r0_1 != null && (rStart = parsePercent(r0_1, size / 2));\r\n          r_1 != null && (rEnd = parsePercent(r_1, size / 2));\r\n        }\r\n\r\n        node.setLayout({\r\n          angle: angle,\r\n          startAngle: startAngle,\r\n          endAngle: endAngle,\r\n          clockwise: clockwise,\r\n          cx: cx,\r\n          cy: cy,\r\n          r0: rStart,\r\n          r: rEnd\r\n        });\r\n      } // Render children\r\n\r\n\r\n      if (node.children && node.children.length) {\r\n        // currentAngle = startAngle;\r\n        var siblingAngle_1 = 0;\r\n        zrUtil.each(node.children, function (node) {\r\n          siblingAngle_1 += renderNode(node, startAngle + siblingAngle_1);\r\n        });\r\n      }\r\n\r\n      return endAngle - startAngle;\r\n    }; // Virtual root node for roll up\r\n\r\n\r\n    if (renderRollupNode) {\r\n      var rStart = r0;\r\n      var rEnd = r0 + rPerLevel;\r\n      var angle = Math.PI * 2;\r\n      virtualRoot.setLayout({\r\n        angle: angle,\r\n        startAngle: startAngle,\r\n        endAngle: startAngle + angle,\r\n        clockwise: clockwise,\r\n        cx: cx,\r\n        cy: cy,\r\n        r0: rStart,\r\n        r: rEnd\r\n      });\r\n    }\r\n\r\n    renderNode(treeRoot, startAngle);\r\n  });\r\n}\r\n/**\r\n * Init node children by order and update visual\r\n */\r\n\r\nfunction initChildren(node, sortOrder) {\r\n  var children = node.children || [];\r\n  node.children = sort(children, sortOrder); // Init children recursively\r\n\r\n  if (children.length) {\r\n    zrUtil.each(node.children, function (child) {\r\n      initChildren(child, sortOrder);\r\n    });\r\n  }\r\n}\r\n/**\r\n * Sort children nodes\r\n *\r\n * @param {TreeNode[]}               children children of node to be sorted\r\n * @param {string | function | null} sort sort method\r\n *                                   See SunburstSeries.js for details.\r\n */\r\n\r\n\r\nfunction sort(children, sortOrder) {\r\n  if (zrUtil.isFunction(sortOrder)) {\r\n    var sortTargets = zrUtil.map(children, function (child, idx) {\r\n      var value = child.getValue();\r\n      return {\r\n        params: {\r\n          depth: child.depth,\r\n          height: child.height,\r\n          dataIndex: child.dataIndex,\r\n          getValue: function () {\r\n            return value;\r\n          }\r\n        },\r\n        index: idx\r\n      };\r\n    });\r\n    sortTargets.sort(function (a, b) {\r\n      return sortOrder(a.params, b.params);\r\n    });\r\n    return zrUtil.map(sortTargets, function (target) {\r\n      return children[target.index];\r\n    });\r\n  } else {\r\n    var isAsc_1 = sortOrder === 'asc';\r\n    return children.sort(function (a, b) {\r\n      var diff = (a.getValue() - b.getValue()) * (isAsc_1 ? 1 : -1);\r\n      return diff === 0 ? (a.dataIndex - b.dataIndex) * (isAsc_1 ? -1 : 1) : diff;\r\n    });\r\n  }\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { lift } from 'zrender/lib/tool/color.js';\r\nimport { extend, isString } from 'zrender/lib/core/util.js';\r\nexport default function sunburstVisual(ecModel) {\r\n  var paletteScope = {}; // Default color strategy\r\n\r\n  function pickColor(node, seriesModel, treeHeight) {\r\n    // Choose color from palette based on the first level.\r\n    var current = node;\r\n\r\n    while (current && current.depth > 1) {\r\n      current = current.parentNode;\r\n    }\r\n\r\n    var color = seriesModel.getColorFromPalette(current.name || current.dataIndex + '', paletteScope);\r\n\r\n    if (node.depth > 1 && isString(color)) {\r\n      // Lighter on the deeper level.\r\n      color = lift(color, (node.depth - 1) / (treeHeight - 1) * 0.5);\r\n    }\r\n\r\n    return color;\r\n  }\r\n\r\n  ecModel.eachSeriesByType('sunburst', function (seriesModel) {\r\n    var data = seriesModel.getData();\r\n    var tree = data.tree;\r\n    tree.eachNode(function (node) {\r\n      var model = node.getModel();\r\n      var style = model.getModel('itemStyle').getItemStyle();\r\n\r\n      if (!style.fill) {\r\n        style.fill = pickColor(node, seriesModel, tree.root.height);\r\n      }\r\n\r\n      var existsStyle = data.ensureUniqueItemVisual(node.dataIndex, 'style');\r\n      extend(existsStyle, style);\r\n    });\r\n  });\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport SunburstView from './SunburstView.js';\r\nimport SunburstSeriesModel from './SunburstSeries.js';\r\nimport sunburstLayout from './sunburstLayout.js';\r\nimport sunburstVisual from './sunburstVisual.js';\r\nimport dataFilter from '../../processor/dataFilter.js';\r\nimport { curry } from 'zrender/lib/core/util.js';\r\nimport { installSunburstAction } from './sunburstAction.js';\r\nexport function install(registers) {\r\n  registers.registerChartView(SunburstView);\r\n  registers.registerSeriesModel(SunburstSeriesModel);\r\n  registers.registerLayout(curry(sunburstLayout, 'sunburst'));\r\n  registers.registerProcessor(curry(dataFilter, 'sunburst'));\r\n  registers.registerVisual(sunburstVisual);\r\n  installSunburstAction(registers);\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport createSeriesData from '../helper/createSeriesData.js';\r\nimport { makeInner } from '../../util/model.js';\r\nimport SeriesModel from '../../model/Series.js'; // Also compat with ec4, where\r\n// `visual('color') visual('borderColor')` is supported.\r\n\r\nexport var STYLE_VISUAL_TYPE = {\r\n  color: 'fill',\r\n  borderColor: 'stroke'\r\n};\r\nexport var NON_STYLE_VISUAL_PROPS = {\r\n  symbol: 1,\r\n  symbolSize: 1,\r\n  symbolKeepAspect: 1,\r\n  legendIcon: 1,\r\n  visualMeta: 1,\r\n  liftZ: 1,\r\n  decal: 1\r\n};\r\n;\r\nexport var customInnerStore = makeInner();\r\n\r\nvar CustomSeriesModel =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(CustomSeriesModel, _super);\r\n\r\n  function CustomSeriesModel() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = CustomSeriesModel.type;\r\n    return _this;\r\n  }\r\n\r\n  CustomSeriesModel.prototype.optionUpdated = function () {\r\n    this.currentZLevel = this.get('zlevel', true);\r\n    this.currentZ = this.get('z', true);\r\n  };\r\n\r\n  CustomSeriesModel.prototype.getInitialData = function (option, ecModel) {\r\n    return createSeriesData(null, this);\r\n  };\r\n\r\n  CustomSeriesModel.prototype.getDataParams = function (dataIndex, dataType, el) {\r\n    var params = _super.prototype.getDataParams.call(this, dataIndex, dataType);\r\n\r\n    el && (params.info = customInnerStore(el).info);\r\n    return params;\r\n  };\r\n\r\n  CustomSeriesModel.type = 'series.custom';\r\n  CustomSeriesModel.dependencies = ['grid', 'polar', 'geo', 'singleAxis', 'calendar'];\r\n  CustomSeriesModel.defaultOption = {\r\n    coordinateSystem: 'cartesian2d',\r\n    // zlevel: 0,\r\n    z: 2,\r\n    legendHoverLink: true,\r\n    // Custom series will not clip by default.\r\n    // Some case will use custom series to draw label\r\n    // For example https://echarts.apache.org/examples/en/editor.html?c=custom-gantt-flight\r\n    clip: false // Cartesian coordinate system\r\n    // xAxisIndex: 0,\r\n    // yAxisIndex: 0,\r\n    // Polar coordinate system\r\n    // polarIndex: 0,\r\n    // Geo coordinate system\r\n    // geoIndex: 0,\r\n\r\n  };\r\n  return CustomSeriesModel;\r\n}(SeriesModel);\r\n\r\nexport default CustomSeriesModel;", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\n\r\nfunction dataToCoordSize(dataSize, dataItem) {\r\n  // dataItem is necessary in log axis.\r\n  dataItem = dataItem || [0, 0];\r\n  return zrUtil.map(['x', 'y'], function (dim, dimIdx) {\r\n    var axis = this.getAxis(dim);\r\n    var val = dataItem[dimIdx];\r\n    var halfSize = dataSize[dimIdx] / 2;\r\n    return axis.type === 'category' ? axis.getBandWidth() : Math.abs(axis.dataToCoord(val - halfSize) - axis.dataToCoord(val + halfSize));\r\n  }, this);\r\n}\r\n\r\nexport default function cartesianPrepareCustom(coordSys) {\r\n  var rect = coordSys.master.getRect();\r\n  return {\r\n    coordSys: {\r\n      // The name exposed to user is always 'cartesian2d' but not 'grid'.\r\n      type: 'cartesian2d',\r\n      x: rect.x,\r\n      y: rect.y,\r\n      width: rect.width,\r\n      height: rect.height\r\n    },\r\n    api: {\r\n      coord: function (data) {\r\n        // do not provide \"out\" param\r\n        return coordSys.dataToPoint(data);\r\n      },\r\n      size: zrUtil.bind(dataToCoordSize, coordSys)\r\n    }\r\n  };\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\n\r\nfunction dataToCoordSize(dataSize, dataItem) {\r\n  dataItem = dataItem || [0, 0];\r\n  return zrUtil.map([0, 1], function (dimIdx) {\r\n    var val = dataItem[dimIdx];\r\n    var halfSize = dataSize[dimIdx] / 2;\r\n    var p1 = [];\r\n    var p2 = [];\r\n    p1[dimIdx] = val - halfSize;\r\n    p2[dimIdx] = val + halfSize;\r\n    p1[1 - dimIdx] = p2[1 - dimIdx] = dataItem[1 - dimIdx];\r\n    return Math.abs(this.dataToPoint(p1)[dimIdx] - this.dataToPoint(p2)[dimIdx]);\r\n  }, this);\r\n}\r\n\r\nexport default function geoPrepareCustom(coordSys) {\r\n  var rect = coordSys.getBoundingRect();\r\n  return {\r\n    coordSys: {\r\n      type: 'geo',\r\n      x: rect.x,\r\n      y: rect.y,\r\n      width: rect.width,\r\n      height: rect.height,\r\n      zoom: coordSys.getZoom()\r\n    },\r\n    api: {\r\n      coord: function (data) {\r\n        // do not provide \"out\" and noRoam param,\r\n        // Compatible with this usage:\r\n        // echarts.util.map(item.points, api.coord)\r\n        return coordSys.dataToPoint(data);\r\n      },\r\n      size: zrUtil.bind(dataToCoordSize, coordSys)\r\n    }\r\n  };\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { bind } from 'zrender/lib/core/util.js';\r\n\r\nfunction dataToCoordSize(dataSize, dataItem) {\r\n  // dataItem is necessary in log axis.\r\n  var axis = this.getAxis();\r\n  var val = dataItem instanceof Array ? dataItem[0] : dataItem;\r\n  var halfSize = (dataSize instanceof Array ? dataSize[0] : dataSize) / 2;\r\n  return axis.type === 'category' ? axis.getBandWidth() : Math.abs(axis.dataToCoord(val - halfSize) - axis.dataToCoord(val + halfSize));\r\n}\r\n\r\nexport default function singlePrepareCustom(coordSys) {\r\n  var rect = coordSys.getRect();\r\n  return {\r\n    coordSys: {\r\n      type: 'singleAxis',\r\n      x: rect.x,\r\n      y: rect.y,\r\n      width: rect.width,\r\n      height: rect.height\r\n    },\r\n    api: {\r\n      coord: function (val) {\r\n        // do not provide \"out\" param\r\n        return coordSys.dataToPoint(val);\r\n      },\r\n      size: bind(dataToCoordSize, coordSys)\r\n    }\r\n  };\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as zrUtil from 'zrender/lib/core/util.js'; // import AngleAxis from './AngleAxis.js';\r\n\r\nfunction dataToCoordSize(dataSize, dataItem) {\r\n  // dataItem is necessary in log axis.\r\n  dataItem = dataItem || [0, 0];\r\n  return zrUtil.map(['Radius', 'Angle'], function (dim, dimIdx) {\r\n    var getterName = 'get' + dim + 'Axis'; // TODO: TYPE Check Angle Axis\r\n\r\n    var axis = this[getterName]();\r\n    var val = dataItem[dimIdx];\r\n    var halfSize = dataSize[dimIdx] / 2;\r\n    var result = axis.type === 'category' ? axis.getBandWidth() : Math.abs(axis.dataToCoord(val - halfSize) - axis.dataToCoord(val + halfSize));\r\n\r\n    if (dim === 'Angle') {\r\n      result = result * Math.PI / 180;\r\n    }\r\n\r\n    return result;\r\n  }, this);\r\n}\r\n\r\nexport default function polarPrepareCustom(coordSys) {\r\n  var radiusAxis = coordSys.getRadiusAxis();\r\n  var angleAxis = coordSys.getAngleAxis();\r\n  var radius = radiusAxis.getExtent();\r\n  radius[0] > radius[1] && radius.reverse();\r\n  return {\r\n    coordSys: {\r\n      type: 'polar',\r\n      cx: coordSys.cx,\r\n      cy: coordSys.cy,\r\n      r: radius[1],\r\n      r0: radius[0]\r\n    },\r\n    api: {\r\n      coord: function (data) {\r\n        var radius = radiusAxis.dataToRadius(data[0]);\r\n        var angle = angleAxis.dataToAngle(data[1]);\r\n        var coord = coordSys.coordToPoint([radius, angle]);\r\n        coord.push(radius, angle * Math.PI / 180);\r\n        return coord;\r\n      },\r\n      size: zrUtil.bind(dataToCoordSize, coordSys)\r\n    }\r\n  };\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nexport default function calendarPrepareCustom(coordSys) {\r\n  var rect = coordSys.getRect();\r\n  var rangeInfo = coordSys.getRangeInfo();\r\n  return {\r\n    coordSys: {\r\n      type: 'calendar',\r\n      x: rect.x,\r\n      y: rect.y,\r\n      width: rect.width,\r\n      height: rect.height,\r\n      cellWidth: coordSys.getCellWidth(),\r\n      cellHeight: coordSys.getCellHeight(),\r\n      rangeInfo: {\r\n        start: rangeInfo.start,\r\n        end: rangeInfo.end,\r\n        weeks: rangeInfo.weeks,\r\n        dayCount: rangeInfo.allDay\r\n      }\r\n    },\r\n    api: {\r\n      coord: function (data, clamp) {\r\n        return coordSys.dataToPoint(data, clamp);\r\n      }\r\n    }\r\n  };\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport { __extends } from \"tslib\";\r\nimport { hasOwn, assert, isString, retrieve2, retrieve3, defaults, each, indexOf } from 'zrender/lib/core/util.js';\r\nimport * as graphicUtil from '../../util/graphic.js';\r\nimport { setDefaultStateProxy, toggleHoverEmphasis } from '../../util/states.js';\r\nimport * as labelStyleHelper from '../../label/labelStyle.js';\r\nimport { getDefaultLabel } from '../helper/labelHelper.js';\r\nimport { getLayoutOnAxis } from '../../layout/barGrid.js';\r\nimport DataDiffer from '../../data/DataDiffer.js';\r\nimport ChartView from '../../view/Chart.js';\r\nimport { createClipPath } from '../helper/createClipPathFromCoordSys.js';\r\nimport prepareCartesian2d from '../../coord/cartesian/prepareCustom.js';\r\nimport prepareGeo from '../../coord/geo/prepareCustom.js';\r\nimport prepareSingleAxis from '../../coord/single/prepareCustom.js';\r\nimport preparePolar from '../../coord/polar/prepareCustom.js';\r\nimport prepareCalendar from '../../coord/calendar/prepareCustom.js';\r\nimport Displayable from 'zrender/lib/graphic/Displayable.js';\r\nimport { convertToEC4StyleForCustomSerise, isEC4CompatibleStyle, convertFromEC4CompatibleStyle, warnDeprecated } from '../../util/styleCompat.js';\r\nimport { throwError } from '../../util/log.js';\r\nimport { createOrUpdatePatternFromDecal } from '../../util/decal.js';\r\nimport { STYLE_VISUAL_TYPE, NON_STYLE_VISUAL_PROPS, customInnerStore } from './CustomSeries.js';\r\nimport { applyLeaveTransition, applyUpdateTransition } from '../../animation/customGraphicTransition.js';\r\nimport { applyKeyframeAnimation, stopPreviousKeyframeAnimationAndRestore } from '../../animation/customGraphicKeyframeAnimation.js';\r\nvar EMPHASIS = 'emphasis';\r\nvar NORMAL = 'normal';\r\nvar BLUR = 'blur';\r\nvar SELECT = 'select';\r\nvar STATES = [NORMAL, EMPHASIS, BLUR, SELECT];\r\nvar PATH_ITEM_STYLE = {\r\n  normal: ['itemStyle'],\r\n  emphasis: [EMPHASIS, 'itemStyle'],\r\n  blur: [BLUR, 'itemStyle'],\r\n  select: [SELECT, 'itemStyle']\r\n};\r\nvar PATH_LABEL = {\r\n  normal: ['label'],\r\n  emphasis: [EMPHASIS, 'label'],\r\n  blur: [BLUR, 'label'],\r\n  select: [SELECT, 'label']\r\n};\r\nvar DEFAULT_TRANSITION = ['x', 'y']; // Use prefix to avoid index to be the same as el.name,\r\n// which will cause weird update animation.\r\n\r\nvar GROUP_DIFF_PREFIX = 'e\\0\\0';\r\nvar attachedTxInfoTmp = {\r\n  normal: {},\r\n  emphasis: {},\r\n  blur: {},\r\n  select: {}\r\n};\r\n/**\r\n * To reduce total package size of each coordinate systems, the modules `prepareCustom`\r\n * of each coordinate systems are not required by each coordinate systems directly, but\r\n * required by the module `custom`.\r\n *\r\n * prepareInfoForCustomSeries {Function}: optional\r\n *     @return {Object} {coordSys: {...}, api: {\r\n *         coord: function (data, clamp) {}, // return point in global.\r\n *         size: function (dataSize, dataItem) {} // return size of each axis in coordSys.\r\n *     }}\r\n */\r\n\r\nvar prepareCustoms = {\r\n  cartesian2d: prepareCartesian2d,\r\n  geo: prepareGeo,\r\n  single: prepareSingleAxis,\r\n  polar: preparePolar,\r\n  calendar: prepareCalendar\r\n};\r\n\r\nfunction isPath(el) {\r\n  return el instanceof graphicUtil.Path;\r\n}\r\n\r\nfunction isDisplayable(el) {\r\n  return el instanceof Displayable;\r\n}\r\n\r\nfunction copyElement(sourceEl, targetEl) {\r\n  targetEl.copyTransform(sourceEl);\r\n\r\n  if (isDisplayable(targetEl) && isDisplayable(sourceEl)) {\r\n    targetEl.setStyle(sourceEl.style);\r\n    targetEl.z = sourceEl.z;\r\n    targetEl.z2 = sourceEl.z2;\r\n    targetEl.zlevel = sourceEl.zlevel;\r\n    targetEl.invisible = sourceEl.invisible;\r\n    targetEl.ignore = sourceEl.ignore;\r\n\r\n    if (isPath(targetEl) && isPath(sourceEl)) {\r\n      targetEl.setShape(sourceEl.shape);\r\n    }\r\n  }\r\n}\r\n\r\nvar CustomChartView =\r\n/** @class */\r\nfunction (_super) {\r\n  __extends(CustomChartView, _super);\r\n\r\n  function CustomChartView() {\r\n    var _this = _super !== null && _super.apply(this, arguments) || this;\r\n\r\n    _this.type = CustomChartView.type;\r\n    return _this;\r\n  }\r\n\r\n  CustomChartView.prototype.render = function (customSeries, ecModel, api, payload) {\r\n    // Clear previously rendered progressive elements.\r\n    this._progressiveEls = null;\r\n    var oldData = this._data;\r\n    var data = customSeries.getData();\r\n    var group = this.group;\r\n    var renderItem = makeRenderItem(customSeries, data, ecModel, api);\r\n\r\n    if (!oldData) {\r\n      // Previous render is incremental render or first render.\r\n      // Needs remove the incremental rendered elements.\r\n      group.removeAll();\r\n    }\r\n\r\n    data.diff(oldData).add(function (newIdx) {\r\n      createOrUpdateItem(api, null, newIdx, renderItem(newIdx, payload), customSeries, group, data);\r\n    }).remove(function (oldIdx) {\r\n      var el = oldData.getItemGraphicEl(oldIdx);\r\n      el && applyLeaveTransition(el, customInnerStore(el).option, customSeries);\r\n    }).update(function (newIdx, oldIdx) {\r\n      var oldEl = oldData.getItemGraphicEl(oldIdx);\r\n      createOrUpdateItem(api, oldEl, newIdx, renderItem(newIdx, payload), customSeries, group, data);\r\n    }).execute(); // Do clipping\r\n\r\n    var clipPath = customSeries.get('clip', true) ? createClipPath(customSeries.coordinateSystem, false, customSeries) : null;\r\n\r\n    if (clipPath) {\r\n      group.setClipPath(clipPath);\r\n    } else {\r\n      group.removeClipPath();\r\n    }\r\n\r\n    this._data = data;\r\n  };\r\n\r\n  CustomChartView.prototype.incrementalPrepareRender = function (customSeries, ecModel, api) {\r\n    this.group.removeAll();\r\n    this._data = null;\r\n  };\r\n\r\n  CustomChartView.prototype.incrementalRender = function (params, customSeries, ecModel, api, payload) {\r\n    var data = customSeries.getData();\r\n    var renderItem = makeRenderItem(customSeries, data, ecModel, api);\r\n    var progressiveEls = this._progressiveEls = [];\r\n\r\n    function setIncrementalAndHoverLayer(el) {\r\n      if (!el.isGroup) {\r\n        el.incremental = true;\r\n        el.ensureState('emphasis').hoverLayer = true;\r\n      }\r\n    }\r\n\r\n    for (var idx = params.start; idx < params.end; idx++) {\r\n      var el = createOrUpdateItem(null, null, idx, renderItem(idx, payload), customSeries, this.group, data);\r\n\r\n      if (el) {\r\n        el.traverse(setIncrementalAndHoverLayer);\r\n        progressiveEls.push(el);\r\n      }\r\n    }\r\n  };\r\n\r\n  CustomChartView.prototype.eachRendered = function (cb) {\r\n    graphicUtil.traverseElements(this._progressiveEls || this.group, cb);\r\n  };\r\n\r\n  CustomChartView.prototype.filterForExposedEvent = function (eventType, query, targetEl, packedEvent) {\r\n    var elementName = query.element;\r\n\r\n    if (elementName == null || targetEl.name === elementName) {\r\n      return true;\r\n    } // Enable to give a name on a group made by `renderItem`, and listen\r\n    // events that are triggered by its descendents.\r\n\r\n\r\n    while ((targetEl = targetEl.__hostTarget || targetEl.parent) && targetEl !== this.group) {\r\n      if (targetEl.name === elementName) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  };\r\n\r\n  CustomChartView.type = 'custom';\r\n  return CustomChartView;\r\n}(ChartView);\r\n\r\nexport default CustomChartView;\r\n\r\nfunction createEl(elOption) {\r\n  var graphicType = elOption.type;\r\n  var el; // Those graphic elements are not shapes. They should not be\r\n  // overwritten by users, so do them first.\r\n\r\n  if (graphicType === 'path') {\r\n    var shape = elOption.shape; // Using pathRect brings convenience to users sacle svg path.\r\n\r\n    var pathRect = shape.width != null && shape.height != null ? {\r\n      x: shape.x || 0,\r\n      y: shape.y || 0,\r\n      width: shape.width,\r\n      height: shape.height\r\n    } : null;\r\n    var pathData = getPathData(shape); // Path is also used for icon, so layout 'center' by default.\r\n\r\n    el = graphicUtil.makePath(pathData, null, pathRect, shape.layout || 'center');\r\n    customInnerStore(el).customPathData = pathData;\r\n  } else if (graphicType === 'image') {\r\n    el = new graphicUtil.Image({});\r\n    customInnerStore(el).customImagePath = elOption.style.image;\r\n  } else if (graphicType === 'text') {\r\n    el = new graphicUtil.Text({}); // customInnerStore(el).customText = (elOption.style as TextStyleProps).text;\r\n  } else if (graphicType === 'group') {\r\n    el = new graphicUtil.Group();\r\n  } else if (graphicType === 'compoundPath') {\r\n    throw new Error('\"compoundPath\" is not supported yet.');\r\n  } else {\r\n    var Clz = graphicUtil.getShapeClass(graphicType);\r\n\r\n    if (!Clz) {\r\n      var errMsg = '';\r\n\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        errMsg = 'graphic type \"' + graphicType + '\" can not be found.';\r\n      }\r\n\r\n      throwError(errMsg);\r\n    }\r\n\r\n    el = new Clz();\r\n  }\r\n\r\n  customInnerStore(el).customGraphicType = graphicType;\r\n  el.name = elOption.name; // Compat ec4: the default z2 lift is 1. If changing the number,\r\n  // some cases probably be broken: hierarchy layout along z, like circle packing,\r\n  // where emphasis only intending to modify color/border rather than lift z2.\r\n\r\n  el.z2EmphasisLift = 1;\r\n  el.z2SelectLift = 1;\r\n  return el;\r\n}\r\n\r\nfunction updateElNormal( // Can be null/undefined\r\napi, el, dataIndex, elOption, attachedTxInfo, seriesModel, isInit) {\r\n  // Stop and restore before update any other attributes.\r\n  stopPreviousKeyframeAnimationAndRestore(el);\r\n  var txCfgOpt = attachedTxInfo && attachedTxInfo.normal.cfg;\r\n\r\n  if (txCfgOpt) {\r\n    // PENDING: whether use user object directly rather than clone?\r\n    // TODO:5.0 textConfig transition animation?\r\n    el.setTextConfig(txCfgOpt);\r\n  } // Default transition ['x', 'y']\r\n\r\n\r\n  if (elOption && elOption.transition == null) {\r\n    elOption.transition = DEFAULT_TRANSITION;\r\n  } // Do some normalization on style.\r\n\r\n\r\n  var styleOpt = elOption && elOption.style;\r\n\r\n  if (styleOpt) {\r\n    if (el.type === 'text') {\r\n      var textOptionStyle = styleOpt; // Compatible with ec4: if `textFill` or `textStroke` exists use them.\r\n\r\n      hasOwn(textOptionStyle, 'textFill') && (textOptionStyle.fill = textOptionStyle.textFill);\r\n      hasOwn(textOptionStyle, 'textStroke') && (textOptionStyle.stroke = textOptionStyle.textStroke);\r\n    }\r\n\r\n    var decalPattern = void 0;\r\n    var decalObj = isPath(el) ? styleOpt.decal : null;\r\n\r\n    if (api && decalObj) {\r\n      decalObj.dirty = true;\r\n      decalPattern = createOrUpdatePatternFromDecal(decalObj, api);\r\n    } // Always overwrite in case user specify this prop.\r\n\r\n\r\n    styleOpt.__decalPattern = decalPattern;\r\n  }\r\n\r\n  if (isDisplayable(el)) {\r\n    if (styleOpt) {\r\n      var decalPattern = styleOpt.__decalPattern;\r\n\r\n      if (decalPattern) {\r\n        styleOpt.decal = decalPattern;\r\n      }\r\n    }\r\n  }\r\n\r\n  applyUpdateTransition(el, elOption, seriesModel, {\r\n    dataIndex: dataIndex,\r\n    isInit: isInit,\r\n    clearStyle: true\r\n  });\r\n  applyKeyframeAnimation(el, elOption.keyframeAnimation, seriesModel);\r\n}\r\n\r\nfunction updateElOnState(state, el, elStateOpt, styleOpt, attachedTxInfo) {\r\n  var elDisplayable = el.isGroup ? null : el;\r\n  var txCfgOpt = attachedTxInfo && attachedTxInfo[state].cfg; // PENDING:5.0 support customize scale change and transition animation?\r\n\r\n  if (elDisplayable) {\r\n    // By default support auto lift color when hover whether `emphasis` specified.\r\n    var stateObj = elDisplayable.ensureState(state);\r\n\r\n    if (styleOpt === false) {\r\n      var existingEmphasisState = elDisplayable.getState(state);\r\n\r\n      if (existingEmphasisState) {\r\n        existingEmphasisState.style = null;\r\n      }\r\n    } else {\r\n      // style is needed to enable default emphasis.\r\n      stateObj.style = styleOpt || null;\r\n    } // If `elOption.styleEmphasis` or `elOption.emphasis.style` is `false`,\r\n    // remove hover style.\r\n    // If `elOption.textConfig` or `elOption.emphasis.textConfig` is null/undefined, it does not\r\n    // make sense. So for simplicity, we do not ditinguish `hasOwnProperty` and null/undefined.\r\n\r\n\r\n    if (txCfgOpt) {\r\n      stateObj.textConfig = txCfgOpt;\r\n    }\r\n\r\n    setDefaultStateProxy(elDisplayable);\r\n  }\r\n}\r\n\r\nfunction updateZ(el, elOption, seriesModel) {\r\n  // Group not support textContent and not support z yet.\r\n  if (el.isGroup) {\r\n    return;\r\n  }\r\n\r\n  var elDisplayable = el;\r\n  var currentZ = seriesModel.currentZ;\r\n  var currentZLevel = seriesModel.currentZLevel; // Always erase.\r\n\r\n  elDisplayable.z = currentZ;\r\n  elDisplayable.zlevel = currentZLevel; // z2 must not be null/undefined, otherwise sort error may occur.\r\n\r\n  var optZ2 = elOption.z2;\r\n  optZ2 != null && (elDisplayable.z2 = optZ2 || 0);\r\n\r\n  for (var i = 0; i < STATES.length; i++) {\r\n    updateZForEachState(elDisplayable, elOption, STATES[i]);\r\n  }\r\n}\r\n\r\nfunction updateZForEachState(elDisplayable, elOption, state) {\r\n  var isNormal = state === NORMAL;\r\n  var elStateOpt = isNormal ? elOption : retrieveStateOption(elOption, state);\r\n  var optZ2 = elStateOpt ? elStateOpt.z2 : null;\r\n  var stateObj;\r\n\r\n  if (optZ2 != null) {\r\n    // Do not `ensureState` until required.\r\n    stateObj = isNormal ? elDisplayable : elDisplayable.ensureState(state);\r\n    stateObj.z2 = optZ2 || 0;\r\n  }\r\n}\r\n\r\nfunction makeRenderItem(customSeries, data, ecModel, api) {\r\n  var renderItem = customSeries.get('renderItem');\r\n  var coordSys = customSeries.coordinateSystem;\r\n  var prepareResult = {};\r\n\r\n  if (coordSys) {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      assert(renderItem, 'series.render is required.');\r\n      assert(coordSys.prepareCustoms || prepareCustoms[coordSys.type], 'This coordSys does not support custom series.');\r\n    } // `coordSys.prepareCustoms` is used for external coord sys like bmap.\r\n\r\n\r\n    prepareResult = coordSys.prepareCustoms ? coordSys.prepareCustoms(coordSys) : prepareCustoms[coordSys.type](coordSys);\r\n  }\r\n\r\n  var userAPI = defaults({\r\n    getWidth: api.getWidth,\r\n    getHeight: api.getHeight,\r\n    getZr: api.getZr,\r\n    getDevicePixelRatio: api.getDevicePixelRatio,\r\n    value: value,\r\n    style: style,\r\n    ordinalRawValue: ordinalRawValue,\r\n    styleEmphasis: styleEmphasis,\r\n    visual: visual,\r\n    barLayout: barLayout,\r\n    currentSeriesIndices: currentSeriesIndices,\r\n    font: font\r\n  }, prepareResult.api || {});\r\n  var userParams = {\r\n    // The life cycle of context: current round of rendering.\r\n    // The global life cycle is probably not necessary, because\r\n    // user can store global status by themselves.\r\n    context: {},\r\n    seriesId: customSeries.id,\r\n    seriesName: customSeries.name,\r\n    seriesIndex: customSeries.seriesIndex,\r\n    coordSys: prepareResult.coordSys,\r\n    dataInsideLength: data.count(),\r\n    encode: wrapEncodeDef(customSeries.getData())\r\n  }; // If someday intending to refactor them to a class, should consider do not\r\n  // break change: currently these attribute member are encapsulated in a closure\r\n  // so that do not need to force user to call these method with a scope.\r\n  // Do not support call `api` asynchronously without dataIndexInside input.\r\n\r\n  var currDataIndexInside;\r\n  var currItemModel;\r\n  var currItemStyleModels = {};\r\n  var currLabelModels = {};\r\n  var seriesItemStyleModels = {};\r\n  var seriesLabelModels = {};\r\n\r\n  for (var i = 0; i < STATES.length; i++) {\r\n    var stateName = STATES[i];\r\n    seriesItemStyleModels[stateName] = customSeries.getModel(PATH_ITEM_STYLE[stateName]);\r\n    seriesLabelModels[stateName] = customSeries.getModel(PATH_LABEL[stateName]);\r\n  }\r\n\r\n  function getItemModel(dataIndexInside) {\r\n    return dataIndexInside === currDataIndexInside ? currItemModel || (currItemModel = data.getItemModel(dataIndexInside)) : data.getItemModel(dataIndexInside);\r\n  }\r\n\r\n  function getItemStyleModel(dataIndexInside, state) {\r\n    return !data.hasItemOption ? seriesItemStyleModels[state] : dataIndexInside === currDataIndexInside ? currItemStyleModels[state] || (currItemStyleModels[state] = getItemModel(dataIndexInside).getModel(PATH_ITEM_STYLE[state])) : getItemModel(dataIndexInside).getModel(PATH_ITEM_STYLE[state]);\r\n  }\r\n\r\n  function getLabelModel(dataIndexInside, state) {\r\n    return !data.hasItemOption ? seriesLabelModels[state] : dataIndexInside === currDataIndexInside ? currLabelModels[state] || (currLabelModels[state] = getItemModel(dataIndexInside).getModel(PATH_LABEL[state])) : getItemModel(dataIndexInside).getModel(PATH_LABEL[state]);\r\n  }\r\n\r\n  return function (dataIndexInside, payload) {\r\n    currDataIndexInside = dataIndexInside;\r\n    currItemModel = null;\r\n    currItemStyleModels = {};\r\n    currLabelModels = {};\r\n    return renderItem && renderItem(defaults({\r\n      dataIndexInside: dataIndexInside,\r\n      dataIndex: data.getRawIndex(dataIndexInside),\r\n      // Can be used for optimization when zoom or roam.\r\n      actionType: payload ? payload.type : null\r\n    }, userParams), userAPI);\r\n  };\r\n  /**\r\n   * @public\r\n   * @param dim by default 0.\r\n   * @param dataIndexInside by default `currDataIndexInside`.\r\n   */\r\n\r\n  function value(dim, dataIndexInside) {\r\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\r\n    return data.getStore().get(data.getDimensionIndex(dim || 0), dataIndexInside);\r\n  }\r\n  /**\r\n   * @public\r\n   * @param dim by default 0.\r\n   * @param dataIndexInside by default `currDataIndexInside`.\r\n   */\r\n\r\n\r\n  function ordinalRawValue(dim, dataIndexInside) {\r\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\r\n    dim = dim || 0;\r\n    var dimInfo = data.getDimensionInfo(dim);\r\n\r\n    if (!dimInfo) {\r\n      var dimIndex = data.getDimensionIndex(dim);\r\n      return dimIndex >= 0 ? data.getStore().get(dimIndex, dataIndexInside) : undefined;\r\n    }\r\n\r\n    var val = data.get(dimInfo.name, dataIndexInside);\r\n    var ordinalMeta = dimInfo && dimInfo.ordinalMeta;\r\n    return ordinalMeta ? ordinalMeta.categories[val] : val;\r\n  }\r\n  /**\r\n   * @deprecated The original intention of `api.style` is enable to set itemStyle\r\n   * like other series. But it is not necessary and not easy to give a strict definition\r\n   * of what it returns. And since echarts5 it needs to be make compat work. So\r\n   * deprecates it since echarts5.\r\n   *\r\n   * By default, `visual` is applied to style (to support visualMap).\r\n   * `visual.color` is applied at `fill`. If user want apply visual.color on `stroke`,\r\n   * it can be implemented as:\r\n   * `api.style({stroke: api.visual('color'), fill: null})`;\r\n   *\r\n   * [Compat]: since ec5, RectText has been separated from its hosts el.\r\n   * so `api.style()` will only return the style from `itemStyle` but not handle `label`\r\n   * any more. But `series.label` config is never published in doc.\r\n   * We still compat it in `api.style()`. But not encourage to use it and will still not\r\n   * to pulish it to doc.\r\n   * @public\r\n   * @param dataIndexInside by default `currDataIndexInside`.\r\n   */\r\n\r\n\r\n  function style(userProps, dataIndexInside) {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      warnDeprecated('api.style', 'Please write literal style directly instead.');\r\n    }\r\n\r\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\r\n    var style = data.getItemVisual(dataIndexInside, 'style');\r\n    var visualColor = style && style.fill;\r\n    var opacity = style && style.opacity;\r\n    var itemStyle = getItemStyleModel(dataIndexInside, NORMAL).getItemStyle();\r\n    visualColor != null && (itemStyle.fill = visualColor);\r\n    opacity != null && (itemStyle.opacity = opacity);\r\n    var opt = {\r\n      inheritColor: isString(visualColor) ? visualColor : '#000'\r\n    };\r\n    var labelModel = getLabelModel(dataIndexInside, NORMAL); // Now that the feature of \"auto adjust text fill/stroke\" has been migrated to zrender\r\n    // since ec5, we should set `isAttached` as `false` here and make compat in\r\n    // `convertToEC4StyleForCustomSerise`.\r\n\r\n    var textStyle = labelStyleHelper.createTextStyle(labelModel, null, opt, false, true);\r\n    textStyle.text = labelModel.getShallow('show') ? retrieve2(customSeries.getFormattedLabel(dataIndexInside, NORMAL), getDefaultLabel(data, dataIndexInside)) : null;\r\n    var textConfig = labelStyleHelper.createTextConfig(labelModel, opt, false);\r\n    preFetchFromExtra(userProps, itemStyle);\r\n    itemStyle = convertToEC4StyleForCustomSerise(itemStyle, textStyle, textConfig);\r\n    userProps && applyUserPropsAfter(itemStyle, userProps);\r\n    itemStyle.legacy = true;\r\n    return itemStyle;\r\n  }\r\n  /**\r\n   * @deprecated The reason see `api.style()`\r\n   * @public\r\n   * @param dataIndexInside by default `currDataIndexInside`.\r\n   */\r\n\r\n\r\n  function styleEmphasis(userProps, dataIndexInside) {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      warnDeprecated('api.styleEmphasis', 'Please write literal style directly instead.');\r\n    }\r\n\r\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\r\n    var itemStyle = getItemStyleModel(dataIndexInside, EMPHASIS).getItemStyle();\r\n    var labelModel = getLabelModel(dataIndexInside, EMPHASIS);\r\n    var textStyle = labelStyleHelper.createTextStyle(labelModel, null, null, true, true);\r\n    textStyle.text = labelModel.getShallow('show') ? retrieve3(customSeries.getFormattedLabel(dataIndexInside, EMPHASIS), customSeries.getFormattedLabel(dataIndexInside, NORMAL), getDefaultLabel(data, dataIndexInside)) : null;\r\n    var textConfig = labelStyleHelper.createTextConfig(labelModel, null, true);\r\n    preFetchFromExtra(userProps, itemStyle);\r\n    itemStyle = convertToEC4StyleForCustomSerise(itemStyle, textStyle, textConfig);\r\n    userProps && applyUserPropsAfter(itemStyle, userProps);\r\n    itemStyle.legacy = true;\r\n    return itemStyle;\r\n  }\r\n\r\n  function applyUserPropsAfter(itemStyle, extra) {\r\n    for (var key in extra) {\r\n      if (hasOwn(extra, key)) {\r\n        itemStyle[key] = extra[key];\r\n      }\r\n    }\r\n  }\r\n\r\n  function preFetchFromExtra(extra, itemStyle) {\r\n    // A trick to retrieve those props firstly, which are used to\r\n    // apply auto inside fill/stroke in `convertToEC4StyleForCustomSerise`.\r\n    // (It's not reasonable but only for a degree of compat)\r\n    if (extra) {\r\n      extra.textFill && (itemStyle.textFill = extra.textFill);\r\n      extra.textPosition && (itemStyle.textPosition = extra.textPosition);\r\n    }\r\n  }\r\n  /**\r\n   * @public\r\n   * @param dataIndexInside by default `currDataIndexInside`.\r\n   */\r\n\r\n\r\n  function visual(visualType, dataIndexInside) {\r\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\r\n\r\n    if (hasOwn(STYLE_VISUAL_TYPE, visualType)) {\r\n      var style_1 = data.getItemVisual(dataIndexInside, 'style');\r\n      return style_1 ? style_1[STYLE_VISUAL_TYPE[visualType]] : null;\r\n    } // Only support these visuals. Other visual might be inner tricky\r\n    // for performance (like `style`), do not expose to users.\r\n\r\n\r\n    if (hasOwn(NON_STYLE_VISUAL_PROPS, visualType)) {\r\n      return data.getItemVisual(dataIndexInside, visualType);\r\n    }\r\n  }\r\n  /**\r\n   * @public\r\n   * @return If not support, return undefined.\r\n   */\r\n\r\n\r\n  function barLayout(opt) {\r\n    if (coordSys.type === 'cartesian2d') {\r\n      var baseAxis = coordSys.getBaseAxis();\r\n      return getLayoutOnAxis(defaults({\r\n        axis: baseAxis\r\n      }, opt));\r\n    }\r\n  }\r\n  /**\r\n   * @public\r\n   */\r\n\r\n\r\n  function currentSeriesIndices() {\r\n    return ecModel.getCurrentSeriesIndices();\r\n  }\r\n  /**\r\n   * @public\r\n   * @return font string\r\n   */\r\n\r\n\r\n  function font(opt) {\r\n    return labelStyleHelper.getFont(opt, ecModel);\r\n  }\r\n}\r\n\r\nfunction wrapEncodeDef(data) {\r\n  var encodeDef = {};\r\n  each(data.dimensions, function (dimName) {\r\n    var dimInfo = data.getDimensionInfo(dimName);\r\n\r\n    if (!dimInfo.isExtraCoord) {\r\n      var coordDim = dimInfo.coordDim;\r\n      var dataDims = encodeDef[coordDim] = encodeDef[coordDim] || [];\r\n      dataDims[dimInfo.coordDimIndex] = data.getDimensionIndex(dimName);\r\n    }\r\n  });\r\n  return encodeDef;\r\n}\r\n\r\nfunction createOrUpdateItem(api, existsEl, dataIndex, elOption, seriesModel, group, data) {\r\n  // [Rule]\r\n  // If `renderItem` returns `null`/`undefined`/`false`, remove the previous el if existing.\r\n  //     (It seems that violate the \"merge\" principle, but most of users probably intuitively\r\n  //     regard \"return;\" as \"show nothing element whatever\", so make a exception to meet the\r\n  //     most cases.)\r\n  // The rule or \"merge\" see [STRATEGY_MERGE].\r\n  // If `elOption` is `null`/`undefined`/`false` (when `renderItem` returns nothing).\r\n  if (!elOption) {\r\n    group.remove(existsEl);\r\n    return;\r\n  }\r\n\r\n  var el = doCreateOrUpdateEl(api, existsEl, dataIndex, elOption, seriesModel, group);\r\n  el && data.setItemGraphicEl(dataIndex, el);\r\n  el && toggleHoverEmphasis(el, elOption.focus, elOption.blurScope, elOption.emphasisDisabled);\r\n  return el;\r\n}\r\n\r\nfunction doCreateOrUpdateEl(api, existsEl, dataIndex, elOption, seriesModel, group) {\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    assert(elOption, 'should not have an null/undefined element setting');\r\n  }\r\n\r\n  var toBeReplacedIdx = -1;\r\n  var oldEl = existsEl;\r\n\r\n  if (existsEl && doesElNeedRecreate(existsEl, elOption, seriesModel) // || (\r\n  //     // PENDING: even in one-to-one mapping case, if el is marked as morph,\r\n  //     // do not sure whether the el will be mapped to another el with different\r\n  //     // hierarchy in Group tree. So always recreate el rather than reuse the el.\r\n  //     morphHelper && morphHelper.isOneToOneFrom(el)\r\n  // )\r\n  ) {\r\n    // Should keep at the original index, otherwise \"merge by index\" will be incorrect.\r\n    toBeReplacedIdx = indexOf(group.childrenRef(), existsEl);\r\n    existsEl = null;\r\n  }\r\n\r\n  var isInit = !existsEl;\r\n  var el = existsEl;\r\n\r\n  if (!el) {\r\n    el = createEl(elOption);\r\n\r\n    if (oldEl) {\r\n      copyElement(oldEl, el);\r\n    }\r\n  } else {\r\n    // FIMXE:NEXT unified clearState?\r\n    // If in some case the performance issue arised, consider\r\n    // do not clearState but update cached normal state directly.\r\n    el.clearStates();\r\n  } // Need to set morph: false explictly to disable automatically morphing.\r\n\r\n\r\n  if (elOption.morph === false) {\r\n    el.disableMorphing = true;\r\n  } else if (el.disableMorphing) {\r\n    el.disableMorphing = false;\r\n  }\r\n\r\n  attachedTxInfoTmp.normal.cfg = attachedTxInfoTmp.normal.conOpt = attachedTxInfoTmp.emphasis.cfg = attachedTxInfoTmp.emphasis.conOpt = attachedTxInfoTmp.blur.cfg = attachedTxInfoTmp.blur.conOpt = attachedTxInfoTmp.select.cfg = attachedTxInfoTmp.select.conOpt = null;\r\n  attachedTxInfoTmp.isLegacy = false;\r\n  doCreateOrUpdateAttachedTx(el, dataIndex, elOption, seriesModel, isInit, attachedTxInfoTmp);\r\n  doCreateOrUpdateClipPath(el, dataIndex, elOption, seriesModel, isInit);\r\n  updateElNormal(api, el, dataIndex, elOption, attachedTxInfoTmp, seriesModel, isInit); // `elOption.info` enables user to mount some info on\r\n  // elements and use them in event handlers.\r\n  // Update them only when user specified, otherwise, remain.\r\n\r\n  hasOwn(elOption, 'info') && (customInnerStore(el).info = elOption.info);\r\n\r\n  for (var i = 0; i < STATES.length; i++) {\r\n    var stateName = STATES[i];\r\n\r\n    if (stateName !== NORMAL) {\r\n      var otherStateOpt = retrieveStateOption(elOption, stateName);\r\n      var otherStyleOpt = retrieveStyleOptionOnState(elOption, otherStateOpt, stateName);\r\n      updateElOnState(stateName, el, otherStateOpt, otherStyleOpt, attachedTxInfoTmp);\r\n    }\r\n  }\r\n\r\n  updateZ(el, elOption, seriesModel);\r\n\r\n  if (elOption.type === 'group') {\r\n    mergeChildren(api, el, dataIndex, elOption, seriesModel);\r\n  }\r\n\r\n  if (toBeReplacedIdx >= 0) {\r\n    group.replaceAt(el, toBeReplacedIdx);\r\n  } else {\r\n    group.add(el);\r\n  }\r\n\r\n  return el;\r\n} // `el` must not be null/undefined.\r\n\r\n\r\nfunction doesElNeedRecreate(el, elOption, seriesModel) {\r\n  var elInner = customInnerStore(el);\r\n  var elOptionType = elOption.type;\r\n  var elOptionShape = elOption.shape;\r\n  var elOptionStyle = elOption.style;\r\n  return (// Always create new if universal transition is enabled.\r\n    // Because we do transition after render. It needs to know what old element is. Replacement will loose it.\r\n    seriesModel.isUniversalTransitionEnabled() // If `elOptionType` is `null`, follow the merge principle.\r\n    || elOptionType != null && elOptionType !== elInner.customGraphicType || elOptionType === 'path' && hasOwnPathData(elOptionShape) && getPathData(elOptionShape) !== elInner.customPathData || elOptionType === 'image' && hasOwn(elOptionStyle, 'image') && elOptionStyle.image !== elInner.customImagePath // // FIXME test and remove this restriction?\r\n    // || (elOptionType === 'text'\r\n    //     && hasOwn(elOptionStyle, 'text')\r\n    //     && (elOptionStyle as TextStyleProps).text !== elInner.customText\r\n    // )\r\n\r\n  );\r\n}\r\n\r\nfunction doCreateOrUpdateClipPath(el, dataIndex, elOption, seriesModel, isInit) {\r\n  // Based on the \"merge\" principle, if no clipPath provided,\r\n  // do nothing. The exists clip will be totally removed only if\r\n  // `el.clipPath` is `false`. Otherwise it will be merged/replaced.\r\n  var clipPathOpt = elOption.clipPath;\r\n\r\n  if (clipPathOpt === false) {\r\n    if (el && el.getClipPath()) {\r\n      el.removeClipPath();\r\n    }\r\n  } else if (clipPathOpt) {\r\n    var clipPath = el.getClipPath();\r\n\r\n    if (clipPath && doesElNeedRecreate(clipPath, clipPathOpt, seriesModel)) {\r\n      clipPath = null;\r\n    }\r\n\r\n    if (!clipPath) {\r\n      clipPath = createEl(clipPathOpt);\r\n\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        assert(isPath(clipPath), 'Only any type of `path` can be used in `clipPath`, rather than ' + clipPath.type + '.');\r\n      }\r\n\r\n      el.setClipPath(clipPath);\r\n    }\r\n\r\n    updateElNormal(null, clipPath, dataIndex, clipPathOpt, null, seriesModel, isInit);\r\n  } // If not define `clipPath` in option, do nothing unnecessary.\r\n\r\n}\r\n\r\nfunction doCreateOrUpdateAttachedTx(el, dataIndex, elOption, seriesModel, isInit, attachedTxInfo) {\r\n  // Group does not support textContent temporarily until necessary.\r\n  if (el.isGroup) {\r\n    return;\r\n  } // Normal must be called before emphasis, for `isLegacy` detection.\r\n\r\n\r\n  processTxInfo(elOption, null, attachedTxInfo);\r\n  processTxInfo(elOption, EMPHASIS, attachedTxInfo); // If `elOption.textConfig` or `elOption.textContent` is null/undefined, it does not make sense.\r\n  // So for simplicity, if \"elOption hasOwnProperty of them but be null/undefined\", we do not\r\n  // trade them as set to null to el.\r\n  // Especially:\r\n  // `elOption.textContent: false` means remove textContent.\r\n  // `elOption.textContent.emphasis.style: false` means remove the style from emphasis state.\r\n\r\n  var txConOptNormal = attachedTxInfo.normal.conOpt;\r\n  var txConOptEmphasis = attachedTxInfo.emphasis.conOpt;\r\n  var txConOptBlur = attachedTxInfo.blur.conOpt;\r\n  var txConOptSelect = attachedTxInfo.select.conOpt;\r\n\r\n  if (txConOptNormal != null || txConOptEmphasis != null || txConOptSelect != null || txConOptBlur != null) {\r\n    var textContent = el.getTextContent();\r\n\r\n    if (txConOptNormal === false) {\r\n      textContent && el.removeTextContent();\r\n    } else {\r\n      txConOptNormal = attachedTxInfo.normal.conOpt = txConOptNormal || {\r\n        type: 'text'\r\n      };\r\n\r\n      if (!textContent) {\r\n        textContent = createEl(txConOptNormal);\r\n        el.setTextContent(textContent);\r\n      } else {\r\n        // If in some case the performance issue arised, consider\r\n        // do not clearState but update cached normal state directly.\r\n        textContent.clearStates();\r\n      }\r\n\r\n      updateElNormal(null, textContent, dataIndex, txConOptNormal, null, seriesModel, isInit);\r\n      var txConStlOptNormal = txConOptNormal && txConOptNormal.style;\r\n\r\n      for (var i = 0; i < STATES.length; i++) {\r\n        var stateName = STATES[i];\r\n\r\n        if (stateName !== NORMAL) {\r\n          var txConOptOtherState = attachedTxInfo[stateName].conOpt;\r\n          updateElOnState(stateName, textContent, txConOptOtherState, retrieveStyleOptionOnState(txConOptNormal, txConOptOtherState, stateName), null);\r\n        }\r\n      }\r\n\r\n      txConStlOptNormal ? textContent.dirty() : textContent.markRedraw();\r\n    }\r\n  }\r\n}\r\n\r\nfunction processTxInfo(elOption, state, attachedTxInfo) {\r\n  var stateOpt = !state ? elOption : retrieveStateOption(elOption, state);\r\n  var styleOpt = !state ? elOption.style : retrieveStyleOptionOnState(elOption, stateOpt, EMPHASIS);\r\n  var elType = elOption.type;\r\n  var txCfg = stateOpt ? stateOpt.textConfig : null;\r\n  var txConOptNormal = elOption.textContent;\r\n  var txConOpt = !txConOptNormal ? null : !state ? txConOptNormal : retrieveStateOption(txConOptNormal, state);\r\n\r\n  if (styleOpt && ( // Because emphasis style has little info to detect legacy,\r\n  // if normal is legacy, emphasis is trade as legacy.\r\n  attachedTxInfo.isLegacy || isEC4CompatibleStyle(styleOpt, elType, !!txCfg, !!txConOpt))) {\r\n    attachedTxInfo.isLegacy = true;\r\n    var convertResult = convertFromEC4CompatibleStyle(styleOpt, elType, !state); // Explicitly specified `textConfig` and `textContent` has higher priority than\r\n    // the ones generated by legacy style. Otherwise if users use them and `api.style`\r\n    // at the same time, they not both work and hardly to known why.\r\n\r\n    if (!txCfg && convertResult.textConfig) {\r\n      txCfg = convertResult.textConfig;\r\n    }\r\n\r\n    if (!txConOpt && convertResult.textContent) {\r\n      txConOpt = convertResult.textContent;\r\n    }\r\n  }\r\n\r\n  if (!state && txConOpt) {\r\n    var txConOptNormal_1 = txConOpt; // `textContent: {type: 'text'}`, the \"type\" is easy to be missing. So we tolerate it.\r\n\r\n    !txConOptNormal_1.type && (txConOptNormal_1.type = 'text');\r\n\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      // Do not tolerate incorrcet type for forward compat.\r\n      assert(txConOptNormal_1.type === 'text', 'textContent.type must be \"text\"');\r\n    }\r\n  }\r\n\r\n  var info = !state ? attachedTxInfo.normal : attachedTxInfo[state];\r\n  info.cfg = txCfg;\r\n  info.conOpt = txConOpt;\r\n}\r\n\r\nfunction retrieveStateOption(elOption, state) {\r\n  return !state ? elOption : elOption ? elOption[state] : null;\r\n}\r\n\r\nfunction retrieveStyleOptionOnState(stateOptionNormal, stateOption, state) {\r\n  var style = stateOption && stateOption.style;\r\n\r\n  if (style == null && state === EMPHASIS && stateOptionNormal) {\r\n    style = stateOptionNormal.styleEmphasis;\r\n  }\r\n\r\n  return style;\r\n} // Usage:\r\n// (1) By default, `elOption.$mergeChildren` is `'byIndex'`, which indicates\r\n//     that the existing children will not be removed, and enables the feature\r\n//     that update some of the props of some of the children simply by construct\r\n//     the returned children of `renderItem` like:\r\n//     `var children = group.children = []; children[3] = {opacity: 0.5};`\r\n// (2) If `elOption.$mergeChildren` is `'byName'`, add/update/remove children\r\n//     by child.name. But that might be lower performance.\r\n// (3) If `elOption.$mergeChildren` is `false`, the existing children will be\r\n//     replaced totally.\r\n// (4) If `!elOption.children`, following the \"merge\" principle, nothing will\r\n//     happen.\r\n// (5) If `elOption.$mergeChildren` is not `false` neither `'byName'` and the\r\n//     `el` is a group, and if any of the new child is null, it means to remove\r\n//     the element at the same index, if exists. On the other hand, if the new\r\n//     child is and empty object `{}`, it means to keep the element not changed.\r\n//\r\n// For implementation simpleness, do not provide a direct way to remove single\r\n// child (otherwise the total indices of the children array have to be modified).\r\n// User can remove a single child by setting its `ignore` to `true`.\r\n\r\n\r\nfunction mergeChildren(api, el, dataIndex, elOption, seriesModel) {\r\n  var newChildren = elOption.children;\r\n  var newLen = newChildren ? newChildren.length : 0;\r\n  var mergeChildren = elOption.$mergeChildren; // `diffChildrenByName` has been deprecated.\r\n\r\n  var byName = mergeChildren === 'byName' || elOption.diffChildrenByName;\r\n  var notMerge = mergeChildren === false; // For better performance on roam update, only enter if necessary.\r\n\r\n  if (!newLen && !byName && !notMerge) {\r\n    return;\r\n  }\r\n\r\n  if (byName) {\r\n    diffGroupChildren({\r\n      api: api,\r\n      oldChildren: el.children() || [],\r\n      newChildren: newChildren || [],\r\n      dataIndex: dataIndex,\r\n      seriesModel: seriesModel,\r\n      group: el\r\n    });\r\n    return;\r\n  }\r\n\r\n  notMerge && el.removeAll(); // Mapping children of a group simply by index, which\r\n  // might be better performance.\r\n\r\n  var index = 0;\r\n\r\n  for (; index < newLen; index++) {\r\n    var newChild = newChildren[index];\r\n    var oldChild = el.childAt(index);\r\n\r\n    if (newChild) {\r\n      if (newChild.ignore == null) {\r\n        // The old child is set to be ignored if null (see comments\r\n        // below). So we need to set ignore to be false back.\r\n        newChild.ignore = false;\r\n      }\r\n\r\n      doCreateOrUpdateEl(api, oldChild, dataIndex, newChild, seriesModel, el);\r\n    } else {\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        assert(oldChild, 'renderItem should not return a group containing elements' + ' as null/undefined/{} if they do not exist before.');\r\n      } // If the new element option is null, it means to remove the old\r\n      // element. But we cannot really remove the element from the group\r\n      // directly, because the element order may not be stable when this\r\n      // element is added back. So we set the element to be ignored.\r\n\r\n\r\n      oldChild.ignore = true;\r\n    }\r\n  }\r\n\r\n  for (var i = el.childCount() - 1; i >= index; i--) {\r\n    var child = el.childAt(i);\r\n    removeChildFromGroup(el, child, seriesModel);\r\n  }\r\n}\r\n\r\nfunction removeChildFromGroup(group, child, seriesModel) {\r\n  // Do not support leave elements that are not mentioned in the latest\r\n  // `renderItem` return. Otherwise users may not have a clear and simple\r\n  // concept that how to control all of the elements.\r\n  child && applyLeaveTransition(child, customInnerStore(group).option, seriesModel);\r\n}\r\n\r\nfunction diffGroupChildren(context) {\r\n  new DataDiffer(context.oldChildren, context.newChildren, getKey, getKey, context).add(processAddUpdate).update(processAddUpdate).remove(processRemove).execute();\r\n}\r\n\r\nfunction getKey(item, idx) {\r\n  var name = item && item.name;\r\n  return name != null ? name : GROUP_DIFF_PREFIX + idx;\r\n}\r\n\r\nfunction processAddUpdate(newIndex, oldIndex) {\r\n  var context = this.context;\r\n  var childOption = newIndex != null ? context.newChildren[newIndex] : null;\r\n  var child = oldIndex != null ? context.oldChildren[oldIndex] : null;\r\n  doCreateOrUpdateEl(context.api, child, context.dataIndex, childOption, context.seriesModel, context.group);\r\n}\r\n\r\nfunction processRemove(oldIndex) {\r\n  var context = this.context;\r\n  var child = context.oldChildren[oldIndex];\r\n  child && applyLeaveTransition(child, customInnerStore(child).option, context.seriesModel);\r\n}\r\n/**\r\n * @return SVG Path data.\r\n */\r\n\r\n\r\nfunction getPathData(shape) {\r\n  // \"d\" follows the SVG convention.\r\n  return shape && (shape.pathData || shape.d);\r\n}\r\n\r\nfunction hasOwnPathData(shape) {\r\n  return shape && (hasOwn(shape, 'pathData') || hasOwn(shape, 'd'));\r\n}", "\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport CustomSeriesModel from './CustomSeries.js';\r\nimport CustomChartView from './CustomView.js';\r\nexport function install(registers) {\r\n  registers.registerChartView(CustomChartView);\r\n  registers.registerSeriesModel(CustomSeriesModel);\r\n}"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA,IAAI,kBAEJ,SAAU,QAAQ;AAChB,YAAUA,kBAAiB,MAAM;AAEjC,WAASA,mBAAkB;AACzB,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,iBAAgB;AAC7B,UAAM,kBAAkB;AACxB,WAAO;AAAA,EACT;AAEA,EAAAA,iBAAgB,UAAU,iBAAiB,SAAU,QAAQ;AAC3D,QAAI,MAAuC;AACzC,UAAI,WAAW,OAAO;AAEtB,UAAI,aAAa,WAAW,aAAa,eAAe;AACtD,cAAM,IAAI,MAAM,+DAA+D;AAAA,MACjF;AAAA,IACF;AAEA,WAAO,yBAAiB,MAAM,MAAM;AAAA,MAClC,oBAAoB;AAAA,IACtB,CAAC;AAAA,EACH;AAEA,EAAAA,iBAAgB,UAAU,gBAAgB,SAAU,KAAK;AACvD,QAAI,QAAQ,IAAI,cAAM;AACtB,QAAI,OAAO,aAAa,QAAQ,GAAG,IAAI,aAAa,GAAG,IAAI,WAAW,GAAG,IAAI,UAAU,QAAQ,KAAK;AACpG,UAAM,IAAI,IAAI;AACd,SAAK,SAAS,IAAI,SAAS;AAC3B,QAAI,aAAa,KAAK,QAAQ,EAAE,UAAU,QAAQ;AAClD,QAAI,eAAe,KAAK,QAAQ,EAAE,UAAU,cAAc;AAC1D,QAAI,aAAa,eAAe,SAAS,WAAW;AAEpD,QAAI,OAAO,IAAI,aAAa;AAC5B,QAAI,SAAS,aAAa,aAAa,IAAI,YAAY,QAAQ,IAAI,IAAI,aAAa,QAAQ,GAAG,MAAM,MAAM,IAAI,UAAU,IAAI;AAC7H,UAAM,IAAI,MAAM;AAChB,WAAO,SAAS,IAAI,SAAS;AAC7B,QAAI,eAAe,IAAI,eAAe,YAAY,eAAe,IAAI,cAAc;AACnF,WAAO,WAAW,eAAe,KAAK,KAAK;AAC3C,WAAO,UAAU,CAAC,IAAI,YAAY,GAAG,IAAI,aAAa,CAAC,CAAC;AAExD,QAAI,WAAW,QAAQ,OAAO,IAAI,IAAI;AACpC,aAAO,MAAM,SAAS,OAAO,MAAM;AACnC,aAAO,MAAM,OAAO;AACpB,aAAO,MAAM,YAAY;AAAA,IAC3B;AAEA,WAAO;AAAA,EACT;AAEA,EAAAA,iBAAgB,OAAO;AACvB,EAAAA,iBAAgB,eAAe,CAAC,QAAQ,OAAO;AAC/C,EAAAA,iBAAgB,gBAAgB;AAAA,IAE9B,GAAG;AAAA,IACH,kBAAkB;AAAA,IAClB,iBAAiB;AAAA,IACjB,MAAM;AAAA,IACN,OAAO;AAAA,MACL,UAAU;AAAA,IACZ;AAAA,IAGA,UAAU;AAAA,MACR,MAAM;AAAA,MACN,gBAAgB;AAAA,MAChB,UAAU;AAAA,IACZ;AAAA,IACA,WAAW;AAAA,MACT,OAAO;AAAA,MACP,MAAM;AAAA,IACR;AAAA,IACA,UAAU;AAAA,MACR,OAAO;AAAA,IACT;AAAA,IASA,MAAM;AAAA,IAEN,QAAQ;AAAA,IACR,gBAAgB;AAAA,IAChB,QAAQ;AAAA,IACR,YAAY;AAAA,IACZ,cAAc;AAAA,IACd,YAAY;AAAA,IAKZ,eAAe;AAAA,IAEf,cAAc;AAAA,IAEd,UAAU;AAAA,IACV,iBAAiB;AAAA,IAEjB,aAAa;AAAA,IACb,qBAAqB;AAAA,IACrB,qBAAqB;AAAA,MACnB,aAAa;AAAA,IACf;AAAA,IACA,kBAAkB;AAAA,EACpB;AACA,SAAOA;AACT,EAAE,cAAW;AAEb,IAAO,qBAAQ;;;ACvHR,SAAS,qBAAqB,UAAU,MAAM,aAAa;AAChE,MAAI,WAAW,SAAS,YAAY;AACpC,MAAI,YAAY,SAAS,aAAa,QAAQ;AAC9C,MAAI,aAAa,cAAc,WAAW,WAAW;AACrD,MAAI,cAAc,SAAS;AAC3B,MAAI,eAAe,UAAU;AAC7B,MAAI,WAAW,KAAK,aAAa,YAAY;AAC7C,MAAI,UAAU,KAAK,aAAa,WAAW;AAC3C,MAAI,iBAAiB,iBAAiB,OAAO,iBAAiB,WAAW,IAAI;AAC7E,MAAI,OAAO,IAAI,SAAS,YAAY,SAAU,UAAU;AACtD,WAAO,KAAK,aAAa,QAAQ;AAAA,EACnC,CAAC;AACD,MAAI,UAAU;AACd,MAAI,iBAAiB,KAAK,mBAAmB,sBAAsB;AAEnE,MAAI;AAAA,IAAmB;AAAA,IAAM,KAAK;AAAA,EAElC,GAAG;AAED,cAAU;AACV,SAAK,KAAK;AAAA,EACZ;AAEA,MAAI;AAAA,IAAmB;AAAA,IAAM,KAAK;AAAA,EAElC,GAAG;AAED,cAAU;AACV,SAAK,KAAK;AAAA,EACZ;AAEA,SAAO;AAAA,IACL,kBAAkB;AAAA,IAClB;AAAA,IACA;AAAA,IACA;AAAA,IACA,SAAS,CAAC,CAAC;AAAA,IACX;AAAA,IACA;AAAA,IACA;AAAA,IACA,sBAAsB,KAAK,mBAAmB,sBAAsB;AAAA,EACtE;AACF;AAEA,SAAS,cAAc,WAAW,aAAa;AAC7C,MAAI,aAAa;AACjB,MAAI,SAAS,UAAU,MAAM,UAAU;AAEvC,MAAI,gBAAgB,SAAS;AAC3B,iBAAa,OAAO;AAAA,EACtB,WAAW,gBAAgB,OAAO;AAChC,iBAAa,OAAO;AAAA,EACtB,WAES,SAAS,WAAW,KAAK,CAAC,MAAM,WAAW,GAAG;AACnD,iBAAa;AAAA,EACf,OACK;AAED,QAAI,OAAO,KAAK,GAAG;AACjB,mBAAa,OAAO;AAAA,IACtB,WACS,OAAO,KAAK,GAAG;AACpB,mBAAa,OAAO;AAAA,IACtB;AAAA,EAEJ;AAEJ,SAAO;AACT;AAEO,SAAS,kBAAkB,eAAe,UAAU,MAAM,KAAK;AACpE,MAAI,QAAQ;AAEZ,MAAI,cAAc,SAAS;AACzB,YAAQ,KAAK,IAAI,KAAK,mBAAmB,sBAAsB,GAAG,GAAG;AAAA,EACvE;AAEA,MAAI,MAAM,KAAK,GAAG;AAChB,YAAQ,cAAc;AAAA,EACxB;AAEA,MAAI,iBAAiB,cAAc;AACnC,MAAI,cAAc,CAAC;AACnB,cAAY,kBAAkB,KAAK,IAAI,cAAc,SAAS,GAAG;AACjE,cAAY,IAAI,kBAAkB;AAClC,SAAO,SAAS,YAAY,WAAW;AACzC;;;ACtFA,SAAS,SAAS,SAAS,SAAS;AAClC,MAAI,aAAa,CAAC;AAClB,UAAQ,KAAK,OAAO,EAAE,IAAI,SAAU,KAAK;AACvC,eAAW,KAAK;AAAA,MACd,KAAK;AAAA,MACL;AAAA,IACF,CAAC;AAAA,EACH,CAAC,EAAE,OAAO,SAAU,QAAQ,QAAQ;AAClC,eAAW,KAAK;AAAA,MACd,KAAK;AAAA,MACL,KAAK;AAAA,MACL,MAAM;AAAA,IACR,CAAC;AAAA,EACH,CAAC,EAAE,OAAO,SAAU,KAAK;AACvB,eAAW,KAAK;AAAA,MACd,KAAK;AAAA,MACL;AAAA,IACF,CAAC;AAAA,EACH,CAAC,EAAE,QAAQ;AACX,SAAO;AACT;AAEe,SAAR,kBAAmC,SAAS,SAAS,oBAAoB,oBAAoB,aAAa,aAAa,gBAAgB,gBAAgB;AAC5J,MAAI,OAAO,SAAS,SAAS,OAAO;AAMpC,MAAI,aAAa,CAAC;AAClB,MAAI,aAAa,CAAC;AAElB,MAAI,oBAAoB,CAAC;AACzB,MAAI,oBAAoB,CAAC;AACzB,MAAI,SAAS,CAAC;AACd,MAAI,gBAAgB,CAAC;AACrB,MAAI,aAAa,CAAC;AAClB,MAAI,sBAAsB,qBAAqB,aAAa,SAAS,cAAc;AAEnF,MAAI,YAAY,QAAQ,UAAU,QAAQ,KAAK,CAAC;AAChD,MAAI,YAAY,QAAQ,UAAU,QAAQ,KAAK,CAAC;AAEhD,WAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK;AACpC,QAAI,WAAW,KAAK;AACpB,QAAI,aAAa;AACjB,QAAI,UAAU;AACd,QAAI,UAAU;AAGd,YAAQ,SAAS,KAAK;AAAA,MACpB,KAAK;AACH,kBAAU,SAAS,MAAM;AACzB,kBAAU,SAAS,OAAO;AAC1B,YAAI,WAAW,UAAU;AACzB,YAAI,WAAW,UAAU,UAAU;AACnC,YAAI,QAAQ,UAAU;AACtB,YAAI,QAAQ,UAAU,UAAU;AAEhC,YAAI,MAAM,QAAQ,KAAK,MAAM,QAAQ,GAAG;AACtC,qBAAW;AACX,qBAAW;AAAA,QACb;AAEA,mBAAW,KAAK,UAAU,QAAQ;AAClC,mBAAW,KAAK,OAAO,KAAK;AAC5B,0BAAkB,KAAK,mBAAmB,UAAU,mBAAmB,UAAU,EAAE;AACnF,0BAAkB,KAAK,mBAAmB,UAAU,mBAAmB,UAAU,EAAE;AACnF,mBAAW,KAAK,QAAQ,YAAY,SAAS,IAAI,CAAC;AAClD;AAAA,MAEF,KAAK;AACH,YAAI,SAAS,SAAS;AACtB,YAAI,sBAAsB,oBAAoB;AAC9C,YAAI,QAAQ,YAAY,YAAY,CAAC,QAAQ,IAAI,oBAAoB,IAAI,MAAM,GAAG,QAAQ,IAAI,oBAAoB,IAAI,MAAM,CAAC,CAAC;AAC9H,kBAAU,SAAS;AACnB,mBAAW,KAAK,MAAM,IAAI,MAAM,EAAE;AAClC,mBAAW,KAAK,UAAU,UAAU,UAAU,UAAU,EAAE;AAC1D,YAAI,iBAAiB,kBAAkB,qBAAqB,aAAa,SAAS,MAAM;AACxF,0BAAkB,KAAK,eAAe,IAAI,eAAe,EAAE;AAC3D,0BAAkB,KAAK,mBAAmB,UAAU,mBAAmB,UAAU,EAAE;AACnF,mBAAW,KAAK,QAAQ,YAAY,MAAM,CAAC;AAC3C;AAAA,MAEF,KAAK;AACH,qBAAa;AAAA,IACjB;AAGA,QAAI,YAAY;AACd,aAAO,KAAK,QAAQ;AACpB,oBAAc,KAAK,cAAc,MAAM;AAAA,IACzC;AAAA,EACF;AAIA,gBAAc,KAAK,SAAU,GAAG,GAAG;AACjC,WAAO,WAAW,KAAK,WAAW;AAAA,EACpC,CAAC;AACD,MAAIC,OAAM,WAAW;AACrB,MAAI,mBAAmB,mBAAmBA,IAAG;AAC7C,MAAI,mBAAmB,mBAAmBA,IAAG;AAC7C,MAAI,0BAA0B,mBAAmBA,IAAG;AACpD,MAAI,0BAA0B,mBAAmBA,IAAG;AACpD,MAAI,eAAe,CAAC;AAEpB,WAAS,IAAI,GAAG,IAAI,cAAc,QAAQ,KAAK;AAC7C,QAAI,MAAM,cAAc;AACxB,QAAI,KAAK,IAAI;AACb,QAAI,OAAO,MAAM;AACjB,qBAAiB,MAAM,WAAW;AAClC,qBAAiB,KAAK,KAAK,WAAW,OAAO;AAC7C,qBAAiB,MAAM,WAAW;AAClC,qBAAiB,KAAK,KAAK,WAAW,OAAO;AAC7C,4BAAwB,MAAM,kBAAkB;AAChD,4BAAwB,KAAK,KAAK,kBAAkB,OAAO;AAC3D,4BAAwB,MAAM,kBAAkB;AAChD,4BAAwB,KAAK,KAAK,kBAAkB,OAAO;AAC3D,iBAAa,KAAK,OAAO;AAAA,EAC3B;AAEA,SAAO;AAAA,IACL,SAAS;AAAA,IACT,MAAM;AAAA,IACN,kBAAkB;AAAA,IAClB,eAAe;AAAA,IACf,QAAQ;AAAA,EACV;AACF;;;AC9HA,IAAI,UAAU,KAAK;AACnB,IAAI,UAAU,KAAK;AAEnB,SAAS,YAAY,GAAG,GAAG;AACzB,SAAO,MAAM,CAAC,KAAK,MAAM,CAAC;AAC5B;AAQA,SAAS,YAAY,KAAK,QAAQ,OAAO,QAAQ,QAAQ,KAAK,QAAQ,gBAAgB,cAAc;AAClG,MAAI;AACJ,MAAI;AACJ,MAAI;AACJ,MAAI;AACJ,MAAI;AACJ,MAAI;AACJ,MAAI,MAAM;AACV,MAAI,IAAI;AAER,SAAO,IAAI,QAAQ,KAAK;AACtB,QAAI,IAAI,OAAO,MAAM;AACrB,QAAI,IAAI,OAAO,MAAM,IAAI;AAEzB,QAAI,OAAO,UAAU,MAAM,GAAG;AAC5B;AAAA,IACF;AAEA,QAAI,YAAY,GAAG,CAAC,GAAG;AACrB,UAAI,cAAc;AAChB,eAAO;AACP;AAAA,MACF;AAEA;AAAA,IACF;AAEA,QAAI,QAAQ,OAAO;AACjB,UAAI,MAAM,IAAI,WAAW,UAAU,GAAG,CAAC;AACvC,aAAO;AACP,aAAO;AAAA,IACT,OAAO;AACL,UAAI,KAAK,IAAI;AACb,UAAI,KAAK,IAAI;AAEb,UAAI,KAAK,KAAK,KAAK,KAAK,KAAK;AAC3B,eAAO;AACP;AAAA,MACF;AAEA,UAAI,SAAS,GAAG;AACd,YAAI,UAAU,MAAM;AACpB,YAAI,QAAQ,OAAO,UAAU;AAC7B,YAAI,QAAQ,OAAO,UAAU,IAAI;AAEjC,eAAO,UAAU,KAAK,UAAU,KAAK,IAAI,QAAQ;AAC/C;AACA,qBAAW;AACX,iBAAO;AACP,kBAAQ,OAAO,UAAU;AACzB,kBAAQ,OAAO,UAAU,IAAI;AAC7B,cAAI,OAAO,MAAM;AACjB,cAAI,OAAO,MAAM,IAAI;AACrB,eAAK,IAAI;AACT,eAAK,IAAI;AAAA,QACX;AAEA,YAAI,OAAO,IAAI;AAEf,YAAI,cAAc;AAEhB,iBAAO,YAAY,OAAO,KAAK,KAAK,OAAO,QAAQ;AACjD;AACA,uBAAW;AACX,oBAAQ,OAAO,UAAU;AACzB,oBAAQ,OAAO,UAAU,IAAI;AAAA,UAC/B;AAAA,QACF;AAEA,YAAI,eAAe;AACnB,YAAI,KAAK;AACT,YAAI,KAAK;AACT,YAAI,WAAW;AACf,YAAI,WAAW;AAEf,YAAI,QAAQ,UAAU,YAAY,OAAO,KAAK,GAAG;AAC/C,iBAAO;AACP,iBAAO;AAAA,QACT,OAAO;AACL,eAAK,QAAQ;AACb,eAAK,QAAQ;AACb,cAAI,MAAM,IAAI;AACd,cAAI,MAAM,QAAQ;AAClB,cAAI,MAAM,IAAI;AACd,cAAI,MAAM,QAAQ;AAClB,cAAI,aAAa;AACjB,cAAI,aAAa;AAEjB,cAAI,mBAAmB,KAAK;AAC1B,yBAAa,KAAK,IAAI,GAAG;AACzB,yBAAa,KAAK,IAAI,GAAG;AACzB,gBAAI,QAAQ,KAAK,IAAI,IAAI;AACzB,mBAAO,IAAI,QAAQ,aAAa;AAChC,mBAAO;AACP,uBAAW,IAAI,QAAQ,aAAa;AACpC,uBAAW;AAAA,UACb,WAAW,mBAAmB,KAAK;AACjC,yBAAa,KAAK,IAAI,GAAG;AACzB,yBAAa,KAAK,IAAI,GAAG;AACzB,gBAAI,QAAQ,KAAK,IAAI,IAAI;AACzB,mBAAO;AACP,mBAAO,IAAI,QAAQ,aAAa;AAChC,uBAAW;AACX,uBAAW,IAAI,QAAQ,aAAa;AAAA,UACtC,OAAO;AACL,yBAAa,KAAK,KAAK,MAAM,MAAM,MAAM,GAAG;AAC5C,yBAAa,KAAK,KAAK,MAAM,MAAM,MAAM,GAAG;AAE5C,2BAAe,cAAc,aAAa;AAC1C,mBAAO,IAAI,KAAK,UAAU,IAAI;AAC9B,mBAAO,IAAI,KAAK,UAAU,IAAI;AAE9B,uBAAW,IAAI,KAAK,SAAS;AAC7B,uBAAW,IAAI,KAAK,SAAS;AAG7B,uBAAW,QAAQ,UAAU,QAAQ,OAAO,CAAC,CAAC;AAC9C,uBAAW,QAAQ,UAAU,QAAQ,OAAO,CAAC,CAAC;AAC9C,uBAAW,QAAQ,UAAU,QAAQ,OAAO,CAAC,CAAC;AAC9C,uBAAW,QAAQ,UAAU,QAAQ,OAAO,CAAC,CAAC;AAE9C,iBAAK,WAAW;AAChB,iBAAK,WAAW;AAChB,mBAAO,IAAI,KAAK,aAAa;AAC7B,mBAAO,IAAI,KAAK,aAAa;AAG7B,mBAAO,QAAQ,MAAM,QAAQ,OAAO,CAAC,CAAC;AACtC,mBAAO,QAAQ,MAAM,QAAQ,OAAO,CAAC,CAAC;AACtC,mBAAO,QAAQ,MAAM,QAAQ,OAAO,CAAC,CAAC;AACtC,mBAAO,QAAQ,MAAM,QAAQ,OAAO,CAAC,CAAC;AAEtC,iBAAK,IAAI;AACT,iBAAK,IAAI;AACT,uBAAW,IAAI,KAAK,aAAa;AACjC,uBAAW,IAAI,KAAK,aAAa;AAAA,UACnC;AAAA,QACF;AAEA,YAAI,cAAc,MAAM,MAAM,MAAM,MAAM,GAAG,CAAC;AAC9C,eAAO;AACP,eAAO;AAAA,MACT,OAAO;AACL,YAAI,OAAO,GAAG,CAAC;AAAA,MACjB;AAAA,IACF;AAEA,YAAQ;AACR,YAAQ;AACR,WAAO;AAAA,EACT;AAEA,SAAO;AACT;AAEA,IAAI,kBAEJ,WAAY;AACV,WAASC,mBAAkB;AACzB,SAAK,SAAS;AACd,SAAK,mBAAmB;AAAA,EAC1B;AAEA,SAAOA;AACT,EAAE;AAEF,IAAI,aAEJ,SAAU,QAAQ;AAChB,YAAUC,aAAY,MAAM;AAE5B,WAASA,YAAW,MAAM;AACxB,QAAI,QAAQ,OAAO,KAAK,MAAM,IAAI,KAAK;AAEvC,UAAM,OAAO;AACb,WAAO;AAAA,EACT;AAEA,EAAAA,YAAW,UAAU,kBAAkB,WAAY;AACjD,WAAO;AAAA,MACL,QAAQ;AAAA,MACR,MAAM;AAAA,IACR;AAAA,EACF;AAEA,EAAAA,YAAW,UAAU,kBAAkB,WAAY;AACjD,WAAO,IAAI,gBAAgB;AAAA,EAC7B;AAEA,EAAAA,YAAW,UAAU,YAAY,SAAU,KAAK,OAAO;AACrD,QAAI,SAAS,MAAM;AACnB,QAAI,IAAI;AACR,QAAIC,OAAM,OAAO,SAAS;AAE1B,QAAI,MAAM,cAAc;AAEtB,aAAOA,OAAM,GAAGA,QAAO;AACrB,YAAI,CAAC,YAAY,OAAOA,OAAM,IAAI,IAAI,OAAOA,OAAM,IAAI,EAAE,GAAG;AAC1D;AAAA,QACF;AAAA,MACF;AAEA,aAAO,IAAIA,MAAK,KAAK;AACnB,YAAI,CAAC,YAAY,OAAO,IAAI,IAAI,OAAO,IAAI,IAAI,EAAE,GAAG;AAClD;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAEA,WAAO,IAAIA,MAAK;AACd,WAAK,YAAY,KAAK,QAAQ,GAAGA,MAAKA,MAAK,GAAG,MAAM,QAAQ,MAAM,gBAAgB,MAAM,YAAY,IAAI;AAAA,IAC1G;AAAA,EACF;AAEA,EAAAD,YAAW,UAAU,aAAa,SAAU,MAAM,KAAK;AACrD,QAAI,CAAC,KAAK,MAAM;AACd,WAAK,gBAAgB;AACrB,WAAK,UAAU,KAAK,MAAM,KAAK,KAAK;AAAA,IACtC;AAEA,QAAI,OAAO,KAAK;AAChB,QAAI,OAAO,KAAK;AAChB,QAAI,MAAM,kBAAU;AACpB,QAAI;AACJ,QAAI;AACJ,QAAI,SAAS,QAAQ;AACrB,QAAI,QAAQ,CAAC;AAEb,aAAS,IAAI,GAAG,IAAI,KAAK,UAAS;AAChC,UAAI,MAAM,KAAK;AACf,UAAI,IAAI;AACR,UAAI,IAAI;AACR,UAAI,KAAK;AACT,UAAI,KAAK;AACT,UAAI,KAAK;AACT,UAAI,KAAK;AACT,UAAI,IAAI;AAER,cAAQ,KAAK;AAAA,QACX,KAAK,IAAI;AACP,eAAK,KAAK;AACV,eAAK,KAAK;AACV;AAAA,QAEF,KAAK,IAAI;AACP,cAAI,KAAK;AACT,cAAI,KAAK;AACT,cAAI,UAAU,OAAO,OAAO,IAAI,OAAO,OAAO,OAAO,IAAI;AAEzD,cAAI,KAAK,KAAK,KAAK,GAAG;AACpB,gBAAI,MAAM,UAAU,IAAI,MAAM,IAAI,MAAM,IAAI,MAAM,IAAI;AACtD,mBAAO,SAAS,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,IAAI;AAAA,UAC1C;AAEA,eAAK;AACL,eAAK;AACL;AAAA,QAEF,KAAK,IAAI;AACP,cAAI,KAAK;AACT,cAAI,KAAK;AACT,eAAK,KAAK;AACV,eAAK,KAAK;AACV,eAAK,KAAK;AACV,eAAK,KAAK;AACV,cAAI,QAAQ,SAAS,YAAY,IAAI,GAAG,IAAI,IAAI,MAAM,KAAK,IAAI,YAAY,IAAI,GAAG,IAAI,IAAI,MAAM,KAAK;AAErG,cAAI,QAAQ,GAAG;AACb,qBAAS,MAAM,GAAG,MAAM,OAAO,OAAO;AACpC,kBAAI,MAAM,MAAM;AAEhB,kBAAI,OAAO,KAAK,OAAO,GAAG;AACxB,oBAAI,MAAM,SAAS,QAAQ,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,QAAQ,IAAI,GAAG,IAAI,IAAI,GAAG;AAC3E,uBAAO,SAAS,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,IAAI;AAAA,cAC1C;AAAA,YACF;AAAA,UACF;AAEA,eAAK;AACL,eAAK;AACL;AAAA,MACJ;AAAA,IACF;AAAA,EACF;AAEA,SAAOA;AACT,EAAE,YAAI;AAIN,IAAI,iBAEJ,SAAU,QAAQ;AAChB,YAAUE,iBAAgB,MAAM;AAEhC,WAASA,kBAAiB;AACxB,WAAO,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAAA,EAC7D;AAEA,SAAOA;AACT,EAAE,eAAe;AAEjB,IAAI,YAEJ,SAAU,QAAQ;AAChB,YAAUC,YAAW,MAAM;AAE3B,WAASA,WAAU,MAAM;AACvB,QAAI,QAAQ,OAAO,KAAK,MAAM,IAAI,KAAK;AAEvC,UAAM,OAAO;AACb,WAAO;AAAA,EACT;AAEA,EAAAA,WAAU,UAAU,kBAAkB,WAAY;AAChD,WAAO,IAAI,eAAe;AAAA,EAC5B;AAEA,EAAAA,WAAU,UAAU,YAAY,SAAU,KAAK,OAAO;AACpD,QAAI,SAAS,MAAM;AACnB,QAAI,kBAAkB,MAAM;AAC5B,QAAI,IAAI;AACR,QAAIC,OAAM,OAAO,SAAS;AAC1B,QAAI,iBAAiB,MAAM;AAE3B,QAAI,MAAM,cAAc;AAEtB,aAAOA,OAAM,GAAGA,QAAO;AACrB,YAAI,CAAC,YAAY,OAAOA,OAAM,IAAI,IAAI,OAAOA,OAAM,IAAI,EAAE,GAAG;AAC1D;AAAA,QACF;AAAA,MACF;AAEA,aAAO,IAAIA,MAAK,KAAK;AACnB,YAAI,CAAC,YAAY,OAAO,IAAI,IAAI,OAAO,IAAI,IAAI,EAAE,GAAG;AAClD;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAEA,WAAO,IAAIA,MAAK;AACd,UAAI,IAAI,YAAY,KAAK,QAAQ,GAAGA,MAAKA,MAAK,GAAG,MAAM,QAAQ,gBAAgB,MAAM,YAAY;AACjG,kBAAY,KAAK,iBAAiB,IAAI,IAAI,GAAG,GAAGA,MAAK,IAAI,MAAM,iBAAiB,gBAAgB,MAAM,YAAY;AAClH,WAAK,IAAI;AACT,UAAI,UAAU;AAAA,IAChB;AAAA,EACF;AAEA,SAAOD;AACT,EAAE,YAAI;;;AC3WN,SAAS,mBAAmB,WAAW,cAAc,aAAa,MAAM,QAAQ;AAC9E,MAAI,OAAO,UAAU,QAAQ;AAC7B,MAAI,IAAI,KAAK;AACb,MAAI,IAAI,KAAK;AACb,MAAI,QAAQ,KAAK;AACjB,MAAI,SAAS,KAAK;AAClB,MAAI,YAAY,YAAY,IAAI,CAAC,aAAa,OAAO,CAAC,KAAK;AAE3D,OAAK,YAAY;AACjB,OAAK,YAAY;AACjB,WAAS;AACT,YAAU;AAEV,MAAI,KAAK,MAAM,CAAC;AAChB,UAAQ,KAAK,MAAM,KAAK;AACxB,MAAI,WAAW,IAAY,aAAK;AAAA,IAC9B,OAAO;AAAA,MACL;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF;AAAA,EACF,CAAC;AAED,MAAI,cAAc;AAChB,QAAI,WAAW,UAAU,YAAY;AACrC,QAAI,eAAe,SAAS,aAAa;AACzC,QAAI,iBAAiB,SAAS;AAE9B,QAAI,cAAc;AAChB,UAAI,gBAAgB;AAClB,iBAAS,MAAM,KAAK;AAAA,MACtB;AAEA,eAAS,MAAM,QAAQ;AAAA,IACzB,OAAO;AACL,UAAI,CAAC,gBAAgB;AACnB,iBAAS,MAAM,KAAK;AAAA,MACtB;AAEA,eAAS,MAAM,SAAS;AAAA,IAC1B;AAEA,QAAI,WAAW,WAAW,MAAM,IAAI,SAAU,SAAS;AACrD,aAAO,SAAS,QAAQ;AAAA,IAC1B,IAAI;AACJ,IAAQ,UAAU,UAAU;AAAA,MAC1B,OAAO;AAAA,QACL;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAAA,IACF,GAAG,aAAa,MAAM,MAAM,QAAQ;AAAA,EACtC;AAEA,SAAO;AACT;AAEA,SAAS,oBAAoB,OAAO,cAAc,aAAa;AAC7D,MAAI,aAAa,MAAM,QAAQ;AAE/B,MAAI,KAAK,MAAM,WAAW,IAAI,CAAC;AAC/B,MAAI,IAAI,MAAM,WAAW,GAAG,CAAC;AAC7B,MAAI,WAAW,IAAY,eAAO;AAAA,IAChC,OAAO;AAAA,MACL,IAAI,MAAM,MAAM,IAAI,CAAC;AAAA,MACrB,IAAI,MAAM,MAAM,IAAI,CAAC;AAAA,MACrB;AAAA,MACA;AAAA,MACA,YAAY,WAAW;AAAA,MACvB,UAAU,WAAW;AAAA,MACrB,WAAW,WAAW;AAAA,IACxB;AAAA,EACF,CAAC;AAED,MAAI,cAAc;AAChB,QAAI,WAAW,MAAM,YAAY,EAAE,QAAQ;AAE3C,QAAI,UAAU;AACZ,eAAS,MAAM,WAAW,WAAW;AAAA,IACvC,OAAO;AACL,eAAS,MAAM,IAAI;AAAA,IACrB;AAEA,IAAQ,UAAU,UAAU;AAAA,MAC1B,OAAO;AAAA,QACL,UAAU,WAAW;AAAA,QACrB;AAAA,MACF;AAAA,IACF,GAAG,WAAW;AAAA,EAChB;AAEA,SAAO;AACT;AAEA,SAAS,eAAe,UAAU,cAAc,aAAa,MAAM,QAAQ;AACzE,MAAI,CAAC,UAAU;AACb,WAAO;AAAA,EACT,WAAW,SAAS,SAAS,SAAS;AACpC,WAAO,oBAAoB,UAAU,cAAc,WAAW;AAAA,EAChE,WAAW,SAAS,SAAS,eAAe;AAC1C,WAAO,mBAAmB,UAAU,cAAc,aAAa,MAAM,MAAM;AAAA,EAC7E;AAEA,SAAO;AACT;;;ACzFA,SAAS,aAAa,SAAS,SAAS;AACtC,MAAI,QAAQ,WAAW,QAAQ,QAAQ;AACrC;AAAA,EACF;AAEA,WAAS,IAAI,GAAG,IAAI,QAAQ,QAAQ,KAAK;AACvC,QAAI,QAAQ,OAAO,QAAQ,IAAI;AAC7B;AAAA,IACF;AAAA,EACF;AAEA,SAAO;AACT;AAEA,SAAS,eAAe,QAAQ;AAC9B,MAAI,OAAO;AACX,MAAI,OAAO;AACX,MAAI,OAAO;AACX,MAAI,OAAO;AAEX,WAAS,IAAI,GAAG,IAAI,OAAO,UAAS;AAClC,QAAI,IAAI,OAAO;AACf,QAAI,IAAI,OAAO;AAEf,QAAI,CAAC,MAAM,CAAC,GAAG;AACb,aAAO,KAAK,IAAI,GAAG,IAAI;AACvB,aAAO,KAAK,IAAI,GAAG,IAAI;AAAA,IACzB;AAEA,QAAI,CAAC,MAAM,CAAC,GAAG;AACb,aAAO,KAAK,IAAI,GAAG,IAAI;AACvB,aAAO,KAAK,IAAI,GAAG,IAAI;AAAA,IACzB;AAAA,EACF;AAEA,SAAO,CAAC,CAAC,MAAM,IAAI,GAAG,CAAC,MAAM,IAAI,CAAC;AACpC;AAEA,SAAS,gBAAgB,SAAS,SAAS;AACzC,MAAI,KAAK,eAAe,OAAO,GAC3B,OAAO,GAAG,IACV,OAAO,GAAG;AAEd,MAAI,KAAK,eAAe,OAAO,GAC3B,OAAO,GAAG,IACV,OAAO,GAAG;AAGd,SAAO,KAAK,IAAI,KAAK,IAAI,KAAK,KAAK,KAAK,EAAE,GAAG,KAAK,IAAI,KAAK,KAAK,KAAK,EAAE,GAAG,KAAK,IAAI,KAAK,KAAK,KAAK,EAAE,GAAG,KAAK,IAAI,KAAK,KAAK,KAAK,EAAE,CAAC;AACpI;AAEA,SAAS,UAAU,QAAQ;AACzB,SAAc,SAAS,MAAM,IAAI,SAAS,SAAS,MAAM;AAC3D;AAEA,SAAS,mBAAmB,UAAU,MAAM,eAAe;AACzD,MAAI,CAAC,cAAc,UAAU;AAC3B,WAAO,CAAC;AAAA,EACV;AAEA,MAAIE,OAAM,KAAK,MAAM;AACrB,MAAI,SAAS,mBAAmBA,OAAM,CAAC;AAEvC,WAAS,MAAM,GAAG,MAAMA,MAAK,OAAO;AAClC,QAAI,KAAK,kBAAkB,eAAe,UAAU,MAAM,GAAG;AAC7D,WAAO,MAAM,KAAK,GAAG;AACrB,WAAO,MAAM,IAAI,KAAK,GAAG;AAAA,EAC3B;AAEA,SAAO;AACT;AAEA,SAAS,mBAAmB,QAAQ,UAAU,YAAY,cAAc;AACtE,MAAI,WAAW,SAAS,YAAY;AACpC,MAAI,YAAY,SAAS,QAAQ,OAAO,SAAS,QAAQ,WAAW,IAAI;AACxE,MAAI,aAAa,CAAC;AAClB,MAAI,IAAI;AACR,MAAI,SAAS,CAAC;AACd,MAAI,KAAK,CAAC;AACV,MAAI,SAAS,CAAC;AACd,MAAI,iBAAiB,CAAC;AAEtB,MAAI,cAAc;AAChB,SAAK,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK,GAAG;AACrC,UAAI,CAAC,MAAM,OAAO,EAAE,KAAK,CAAC,MAAM,OAAO,IAAI,EAAE,GAAG;AAC9C,uBAAe,KAAK,OAAO,IAAI,OAAO,IAAI,EAAE;AAAA,MAC9C;AAAA,IACF;AAEA,aAAS;AAAA,EACX;AAEA,OAAK,IAAI,GAAG,IAAI,OAAO,SAAS,GAAG,KAAK,GAAG;AACzC,WAAO,KAAK,OAAO,IAAI;AACvB,WAAO,KAAK,OAAO,IAAI;AACvB,OAAG,KAAK,OAAO;AACf,OAAG,KAAK,OAAO,IAAI;AACnB,eAAW,KAAK,GAAG,IAAI,GAAG,EAAE;AAE5B,YAAQ,YAAY;AAAA,MAClB,KAAK;AACH,eAAO,aAAa,OAAO;AAC3B,eAAO,IAAI,aAAa,GAAG,IAAI;AAC/B,mBAAW,KAAK,OAAO,IAAI,OAAO,EAAE;AACpC;AAAA,MAEF,KAAK;AACH,YAAI,UAAU,GAAG,aAAa,OAAO,cAAc;AACnD,YAAI,UAAU,CAAC;AACf,eAAO,aAAa,QAAQ,aAAa;AACzC,eAAO,IAAI,aAAa,GAAG,IAAI;AAC/B,gBAAQ,IAAI,aAAa,OAAO,IAAI;AACpC,mBAAW,KAAK,OAAO,IAAI,OAAO,EAAE;AACpC,mBAAW,KAAK,QAAQ,IAAI,QAAQ,EAAE;AACtC;AAAA,MAEF;AAEE,eAAO,aAAa,GAAG;AACvB,eAAO,IAAI,aAAa,OAAO,IAAI;AACnC,mBAAW,KAAK,OAAO,IAAI,OAAO,EAAE;AAAA,IACxC;AAAA,EACF;AAGA,aAAW,KAAK,OAAO,MAAM,OAAO,IAAI;AACxC,SAAO;AACT;AASA,SAAS,eAAe,YAAY,SAAS;AAC3C,MAAI,gBAAgB,CAAC;AACrB,MAAIA,OAAM,WAAW;AAErB,MAAI;AACJ,MAAI;AAEJ,WAAS,SAAS,OAAO,OAAO,cAAc;AAC5C,QAAI,SAAS,MAAM;AACnB,QAAI,KAAK,eAAe,WAAW,MAAM,QAAQ;AACjD,QAAI,QAAQ,KAAK,GAAG,CAAC,MAAM,OAAO,MAAM,KAAK,CAAC;AAC9C,WAAO;AAAA,MACL,OAAO;AAAA,MACP;AAAA,IACF;AAAA,EACF;AAEA,WAAS,IAAI,GAAG,IAAIA,MAAK,KAAK;AAC5B,QAAI,SAAS,WAAW;AACxB,QAAI,QAAQ,OAAO;AAEnB,QAAI,QAAQ,GAAG;AACb,gCAA0B;AAAA,IAC5B,WAAW,QAAQ,SAAS;AAC1B,UAAI,sBAAsB;AACxB,sBAAc,KAAK,SAAS,sBAAsB,QAAQ,OAAO,CAAC;AAAA,MACpE,WAAW,yBAAyB;AAElC,sBAAc,KAAK,SAAS,yBAAyB,QAAQ,CAAC,GAAG,SAAS,yBAAyB,QAAQ,OAAO,CAAC;AAAA,MACrH;AAGA;AAAA,IACF,OAAO;AACL,UAAI,yBAAyB;AAC3B,sBAAc,KAAK,SAAS,yBAAyB,QAAQ,CAAC,CAAC;AAE/D,kCAA0B;AAAA,MAC5B;AAEA,oBAAc,KAAK,MAAM;AACzB,6BAAuB;AAAA,IACzB;AAAA,EACF;AAEA,SAAO;AACT;AAEA,SAAS,kBAAkB,MAAM,UAAU,KAAK;AAC9C,MAAI,iBAAiB,KAAK,UAAU,YAAY;AAEhD,MAAI,CAAC,kBAAkB,CAAC,eAAe,UAAU,CAAC,KAAK,MAAM,GAAG;AAE9D;AAAA,EACF;AAEA,MAAI,SAAS,SAAS,eAAe;AACnC,QAAI,MAAuC;AACzC,cAAQ,KAAK,4DAA4D;AAAA,IAC3E;AAEA;AAAA,EACF;AAEA,MAAI;AACJ,MAAI;AAEJ,WAAS,IAAI,eAAe,SAAS,GAAG,KAAK,GAAG,KAAK;AACnD,QAAI,UAAU,KAAK,iBAAiB,eAAe,GAAG,SAAS;AAC/D,eAAW,WAAW,QAAQ;AAE9B,QAAI,aAAa,OAAO,aAAa,KAAK;AACxC,mBAAa,eAAe;AAC5B;AAAA,IACF;AAAA,EACF;AAEA,MAAI,CAAC,YAAY;AACf,QAAI,MAAuC;AACzC,cAAQ,KAAK,yDAAyD;AAAA,IACxE;AAEA;AAAA,EACF;AAQA,MAAI,OAAO,SAAS,QAAQ,QAAQ;AAEpC,MAAI,aAAoB,IAAI,WAAW,OAAO,SAAU,MAAM;AAE5D,WAAO;AAAA,MACL,OAAO,KAAK,cAAc,KAAK,YAAY,KAAK,KAAK,CAAC;AAAA,MACtD,OAAO,KAAK;AAAA,IACd;AAAA,EACF,CAAC;AACD,MAAI,UAAU,WAAW;AACzB,MAAI,cAAc,WAAW,YAAY,MAAM;AAE/C,MAAI,WAAW,WAAW,GAAG,QAAQ,WAAW,UAAU,GAAG,OAAO;AAClE,eAAW,QAAQ;AACnB,gBAAY,QAAQ;AAAA,EACtB;AAEA,MAAI,oBAAoB,eAAe,YAAY,aAAa,MAAM,IAAI,SAAS,IAAI,IAAI,UAAU,CAAC;AACtG,MAAI,iBAAiB,kBAAkB;AAEvC,MAAI,CAAC,kBAAkB,SAAS;AAE9B,WAAO,WAAW,GAAG,QAAQ,IAAI,YAAY,KAAK,YAAY,KAAK,WAAW,UAAU,GAAG,QAAQ,YAAY,KAAK,YAAY,KAAK,WAAW,GAAG;AAAA,EACrJ;AAEA,MAAI,aAAa;AAEjB,MAAI,WAAW,kBAAkB,GAAG,QAAQ;AAC5C,MAAI,WAAW,kBAAkB,iBAAiB,GAAG,QAAQ;AAC7D,MAAI,YAAY,WAAW;AAE3B,MAAI,YAAY,MAAM;AACpB,WAAO;AAAA,EACT;AAEA,EAAO,KAAK,mBAAmB,SAAU,MAAM;AAC7C,SAAK,UAAU,KAAK,QAAQ,YAAY;AAAA,EAC1C,CAAC;AACD,oBAAkB,KAAK;AAAA,IAErB,QAAQ,iBAAiB,kBAAkB,iBAAiB,GAAG,SAAS;AAAA,IACxE,OAAO,YAAY,MAAM;AAAA,EAC3B,CAAC;AACD,oBAAkB,QAAQ;AAAA,IACxB,QAAQ,iBAAiB,kBAAkB,GAAG,SAAS;AAAA,IACvD,OAAO,YAAY,MAAM;AAAA,EAC3B,CAAC;AACD,MAAI,WAAW,IAAY,uBAAe,GAAG,GAAG,GAAG,GAAG,mBAAmB,IAAI;AAC7E,WAAS,YAAY;AACrB,WAAS,WAAW,OAAO;AAC3B,SAAO;AACT;AAEA,SAAS,gBAAgB,aAAa,MAAM,UAAU;AACpD,MAAI,gBAAgB,YAAY,IAAI,eAAe;AACnD,MAAI,SAAS,kBAAkB;AAE/B,MAAI,iBAAiB,CAAC,QAAQ;AAC5B;AAAA,EACF;AAEA,MAAI,eAAe,SAAS,eAAe,SAAS,EAAE;AAEtD,MAAI,CAAC,cAAc;AACjB;AAAA,EACF;AAKA,MAAI,UACD,4BAA4B,cAAc,IAAI,GAAG;AAClD;AAAA,EACF;AAGA,MAAI,kBAAkB,KAAK,aAAa,aAAa,GAAG;AACxD,MAAI,WAAW,CAAC;AAChB,EAAO,KAAK,aAAa,cAAc,GAAG,SAAU,WAAW;AAC7D,QAAI,gBAAgB,aAAa,MAAM,oBAAoB,UAAU,SAAS;AAC9E,aAAS,iBAAiB;AAAA,EAC5B,CAAC;AACD,SAAO,SAAU,WAAW;AAC1B,WAAO,CAAC,SAAS,eAAe,KAAK,IAAI,iBAAiB,SAAS,CAAC;AAAA,EACtE;AACF;AAEA,SAAS,4BAA4B,cAAc,MAAM;AAKvD,MAAI,aAAa,aAAa,UAAU;AACxC,MAAI,YAAY,KAAK,IAAI,WAAW,KAAK,WAAW,EAAE,IAAI,aAAa,MAAM,MAAM;AACnF,QAAM,SAAS,MAAM,YAAY;AAGjC,MAAI,UAAU,KAAK,MAAM;AACzB,MAAI,OAAO,KAAK,IAAI,GAAG,KAAK,MAAM,UAAU,CAAC,CAAC;AAE9C,WAAS,YAAY,GAAG,YAAY,SAAS,aAAa,MAAM;AAC9D,QAAI,eAAU;AAAA,MAAc;AAAA,MAAM;AAAA,IAClC,EAAE,aAAa,aAAa,IAAI,IAAI,KAClC,MAAM,WAAW;AACjB,aAAO;AAAA,IACT;AAAA,EACF;AAEA,SAAO;AACT;AAEA,SAASC,aAAY,GAAG,GAAG;AACzB,SAAO,MAAM,CAAC,KAAK,MAAM,CAAC;AAC5B;AAEA,SAAS,oBAAoB,QAAQ;AACnC,MAAID,OAAM,OAAO,SAAS;AAE1B,SAAOA,OAAM,GAAGA,QAAO;AACrB,QAAI,CAACC,aAAY,OAAOD,OAAM,IAAI,IAAI,OAAOA,OAAM,IAAI,EAAE,GAAG;AAC1D;AAAA,IACF;AAAA,EACF;AAEA,SAAOA,OAAM;AACf;AAEA,SAAS,gBAAgB,QAAQ,KAAK;AACpC,SAAO,CAAC,OAAO,MAAM,IAAI,OAAO,MAAM,IAAI,EAAE;AAC9C;AAEA,SAAS,cAAc,QAAQ,MAAM,KAAK;AACxC,MAAIA,OAAM,OAAO,SAAS;AAC1B,MAAI,SAAS,QAAQ,MAAM,IAAI;AAC/B,MAAI;AACJ,MAAI;AACJ,MAAI,YAAY;AAChB,MAAI,YAAY;AAEhB,WAAS,IAAI,GAAG,IAAIA,MAAK,KAAK;AAC5B,QAAI,OAAO,IAAI,IAAI;AAEnB,QAAI,MAAM,CAAC,KAAK,MAAM,OAAO,IAAI,IAAI,IAAI,OAAO,GAAG;AACjD;AAAA,IACF;AAEA,QAAI,MAAM,GAAG;AACX,UAAI;AACJ;AAAA,IACF;AAEA,QAAI,KAAK,QAAQ,KAAK,QAAQ,KAAK,QAAQ,KAAK,MAAM;AACpD,kBAAY;AACZ;AAAA,IACF;AAEA,gBAAY;AACZ,QAAI;AAAA,EACN;AAEA,SAAO;AAAA,IACL,OAAO,CAAC,WAAW,SAAS;AAAA,IAC5B,IAAI,OAAO,MAAM,IAAI;AAAA,EACvB;AACF;AAEA,SAAS,qBAAqB,aAAa;AACzC,MAAI,YAAY,IAAI,CAAC,YAAY,MAAM,CAAC,GAAG;AACzC,WAAO;AAAA,EACT;AAEA,WAAS,IAAI,GAAG,IAAI,eAAe,QAAQ,KAAK;AAC9C,QAAI,YAAY,IAAI,CAAC,eAAe,IAAI,YAAY,MAAM,CAAC,GAAG;AAC5D,aAAO;AAAA,IACT;AAAA,EACF;AAEA,SAAO;AACT;AAEA,SAAS,mBAAmB,UAAU,UAAU,cAAc,aAAa;AACzE,MAAI,uBAAuB,UAAU,aAAa,GAAG;AACnD,QAAI,kBAAkB,YAAY,SAAS,UAAU;AACrD,QAAI,mBAAmB,gBAAgB,IAAI,gBAAgB;AAC3D,QAAI,SAAS,YAAY,QAAQ;AACjC,QAAI,yBAAyB;AAAA,MAC3B,gBAAgB;AAAA,IAClB;AACA,QAAI,SAAS,qBAAqB,WAAW,IAAI,SAAU,SAAS,UAAU;AAC5E,eAAS,kBAAkB,SAAS,UAAU,QAAQ,wBAAwB,kBAAkB,iBAAiB,QAAQ;AAAA,IAC3H,IAAI;AACJ,QAAI,eAAe,SAAS,YAAY,EAAE,aAAa;AACvD,QAAI,WAAW,mBAAmB,UAAU,cAAc,aAAa,WAAY;AACjF,UAAI,WAAW,SAAS;AAExB,UAAI,YAAY,cAAc;AAC5B,YAAI,uBAAuB,aAAa,MAAM;AAC5C,mBAAS,KAAK;AAAA,YACZ,GAAG,uBAAuB;AAAA,YAC1B,GAAG,uBAAuB;AAAA,UAC5B,CAAC;AAAA,QACH;AAAA,MACF;AAAA,IACF,GAAG,MAAM;AAET,QAAI,CAAC,YAAY,IAAI,QAAQ,IAAI,GAAG;AAClC,UAAI,YAAY,SAAS;AACzB,UAAI,aAAa,KAAK,IAAI,UAAU,OAAO,UAAU,MAAM;AAE3D,UAAI,cAAc;AAChB,kBAAU,KAAK;AACf,kBAAU,UAAU,aAAa;AAAA,MACnC,OAAO;AACL,kBAAU,KAAK;AACf,kBAAU,SAAS,aAAa;AAAA,MAClC;AAAA,IACF;AAGA,QAAI,QAAQ;AACV,aAAO,GAAG,QAAQ;AAAA,IACpB;AAEA,WAAO;AAAA,EACT,OAAO;AACL,QAAI,MAAuC;AACzC,UAAI,YAAY,IAAI,CAAC,YAAY,MAAM,CAAC,GAAG;AACzC,gBAAQ,KAAK,uDAAuD;AAAA,MACtE;AAAA,IACF;AAEA,WAAO,oBAAoB,UAAU,cAAc,WAAW;AAAA,EAChE;AACF;AAEA,SAAS,0BAA0B,eAAe,UAAU;AAC1D,MAAI,WAAW,SAAS,YAAY;AACpC,MAAI,eAAe,SAAS,aAAa;AACzC,MAAI,iBAAiB,SAAS;AAC9B,MAAI,QAAQ,eAAe,iBAAiB,UAAU,SAAS;AAC/D,MAAI,gBAAgB,eAAe,WAAW,iBAAiB,QAAQ;AACvE,SAAO;AAAA,IACL,QAAQ;AAAA,MACN,OAAO,cAAc,IAAI,OAAO,KAAK;AAAA,MACrC,eAAe,cAAc,IAAI,eAAe,KAAK;AAAA,IACvD;AAAA,EACF;AACF;AAEA,IAAI,WAEJ,SAAU,QAAQ;AAChB,YAAUE,WAAU,MAAM;AAE1B,WAASA,YAAW;AAClB,WAAO,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAAA,EAC7D;AAEA,EAAAA,UAAS,UAAU,OAAO,WAAY;AACpC,QAAI,YAAY,IAAY,cAAM;AAClC,QAAI,aAAa,IAAI,mBAAW;AAChC,SAAK,MAAM,IAAI,WAAW,KAAK;AAC/B,SAAK,cAAc;AACnB,SAAK,aAAa;AAAA,EACpB;AAEA,EAAAA,UAAS,UAAU,SAAS,SAAU,aAAa,SAAS,KAAK;AAC/D,QAAI,QAAQ;AAEZ,QAAI,WAAW,YAAY;AAC3B,QAAI,QAAQ,KAAK;AACjB,QAAI,OAAO,YAAY,QAAQ;AAC/B,QAAI,iBAAiB,YAAY,SAAS,WAAW;AACrD,QAAI,iBAAiB,YAAY,SAAS,WAAW;AACrD,QAAI,SAAS,KAAK,UAAU,QAAQ,KAAK,CAAC;AAC1C,QAAI,kBAAkB,SAAS,SAAS;AACxC,QAAI,eAAe,KAAK;AACxB,QAAI,aAAa,KAAK;AACtB,QAAI,WAAW,KAAK;AACpB,QAAI,UAAU,KAAK;AACnB,QAAI,YAAY,KAAK;AACrB,QAAI,eAAe,CAAC,QAAQ,OAAO,YAAY,mBAAmB;AAClE,QAAI,cAAc,CAAC,eAAe,QAAQ;AAC1C,QAAI,cAAc,eAAe,IAAI,QAAQ;AAC7C,QAAI,gBAAgB,qBAAqB,UAAU,MAAM,WAAW;AACpE,QAAI,kBAAkB,eAAe,mBAAmB,UAAU,MAAM,aAAa;AACrF,QAAI,aAAa,YAAY,IAAI,YAAY;AAC7C,QAAI,eAAe,YAAY,IAAI,cAAc;AACjD,QAAI,eAAe,cAAc,CAAC,mBAAmB,gBAAgB,aAAa,MAAM,QAAQ;AAEhG,QAAI,UAAU,KAAK;AACnB,eAAW,QAAQ,kBAAkB,SAAU,IAAI,KAAK;AACtD,UAAI,GAAG,QAAQ;AACb,cAAM,OAAO,EAAE;AACf,gBAAQ,iBAAiB,KAAK,IAAI;AAAA,MACpC;AAAA,IACF,CAAC;AAED,QAAI,CAAC,YAAY;AACf,iBAAW,OAAO;AAAA,IACpB;AAEA,UAAM,IAAI,SAAS;AAEnB,QAAI,OAAO,CAAC,kBAAkB,YAAY,IAAI,MAAM,IAAI;AACxD,QAAI;AAEJ,QAAI,YAAY,SAAS,WAAW,YAAY,IAAI,QAAQ,IAAI,GAAG;AACjE,2BAAqB,SAAS,QAAQ;AAGtC,UAAI,mBAAmB,SAAS,MAAM;AACpC,2BAAmB,KAAK;AACxB,2BAAmB,KAAK;AACxB,2BAAmB,SAAS;AAC5B,2BAAmB,UAAU;AAAA,MAC/B,WAAW,mBAAmB,IAAI;AAChC,2BAAmB,MAAM;AACzB,2BAAmB,KAAK;AAAA,MAC1B;AAAA,IACF;AAEA,SAAK,sBAAsB;AAC3B,QAAI,cAAc,kBAAkB,MAAM,UAAU,GAAG,KAAK,KAAK,UAAU,OAAO,EAAE,KAAK,UAAU,UAAU;AAE7G,QAAI,EAAE,YAAY,aAAa,SAAS,SAAS,QAAQ,SAAS,KAAK,QAAQ;AAC7E,oBAAc,WAAW,WAAW,MAAM;AAAA,QACxC,UAAU;AAAA,QACV,WAAW;AAAA,QACX,kBAAkB;AAAA,QAClB,gBAAgB,SAAU,KAAK;AAC7B,iBAAO,CAAC,OAAO,MAAM,IAAI,OAAO,MAAM,IAAI,EAAE;AAAA,QAC9C;AAAA,MACF,CAAC;AACD,sBAAgB,KAAK,0BAA0B,MAAM,UAAU,kBAAkB;AAEjF,UAAI,MAAM;AAER,iBAAS,mBAAmB,QAAQ,UAAU,MAAM,YAAY;AAEhE,YAAI,iBAAiB;AACnB,4BAAkB,mBAAmB,iBAAiB,UAAU,MAAM,YAAY;AAAA,QACpF;AAAA,MACF;AAEA,iBAAW,KAAK,aAAa,MAAM;AAEnC,UAAI,aAAa;AACf,kBAAU,KAAK,YAAY,QAAQ,eAAe;AAAA,MACpD,WACS,SAAS;AACd,kBAAU,OAAO,OAAO;AACxB,kBAAU,KAAK,WAAW;AAAA,MAC5B;AAGF,UAAI,CAAC,iBAAiB;AACpB,aAAK,sBAAsB,aAAa,UAAU,qBAAqB,WAAW,CAAC;AAAA,MACrF;AAEA,gBAAU,YAAY,mBAAmB,MAAM,UAAU,MAAM,WAAW,CAAC;AAAA,IAC7E,OAAO;AACL,UAAI,eAAe,CAAC,SAAS;AAE3B,kBAAU,KAAK,YAAY,QAAQ,eAAe;AAAA,MACpD,WAAW,WAAW,CAAC,aAAa;AAElC,kBAAU,OAAO,OAAO;AACxB,kBAAU,KAAK,WAAW;AAAA,MAC5B;AAGA,UAAI,CAAC,iBAAiB;AACpB,aAAK,sBAAsB,aAAa,UAAU,qBAAqB,WAAW,CAAC;AAAA,MACrF;AAGA,UAAI,cAAc,UAAU,YAAY;AAExC,UAAI,aAAa;AACf,YAAI,cAAc,mBAAmB,MAAM,UAAU,OAAO,WAAW;AACvE,QAAQ,UAAU,aAAa;AAAA,UAC7B,OAAO,YAAY;AAAA,QACrB,GAAG,WAAW;AAAA,MAChB,OAAO;AACL,kBAAU,YAAY,mBAAmB,MAAM,UAAU,MAAM,WAAW,CAAC;AAAA,MAC7E;AAIA,oBAAc,WAAW,WAAW,MAAM;AAAA,QACxC,UAAU;AAAA,QACV,WAAW;AAAA,QACX,kBAAkB;AAAA,QAClB,gBAAgB,SAAU,KAAK;AAC7B,iBAAO,CAAC,OAAO,MAAM,IAAI,OAAO,MAAM,IAAI,EAAE;AAAA,QAC9C;AAAA,MACF,CAAC;AAGD,UAAI,CAAC,aAAa,KAAK,kBAAkB,eAAe,KAAK,CAAC,aAAa,KAAK,SAAS,MAAM,GAAG;AAChG,YAAI,cAAc;AAChB,eAAK,mBAAmB,MAAM,iBAAiB,UAAU,KAAK,MAAM,aAAa,YAAY;AAAA,QAC/F,OAAO;AAEL,cAAI,MAAM;AAER,qBAAS,mBAAmB,QAAQ,UAAU,MAAM,YAAY;AAEhE,gBAAI,iBAAiB;AACnB,gCAAkB,mBAAmB,iBAAiB,UAAU,MAAM,YAAY;AAAA,YACpF;AAAA,UACF;AAEA,mBAAS,SAAS;AAAA,YAChB;AAAA,UACF,CAAC;AACD,qBAAW,QAAQ,SAAS;AAAA,YAC1B;AAAA,YACA;AAAA,UACF,CAAC;AAAA,QACH;AAAA,MACF;AAAA,IACF;AAEA,QAAI,gBAAgB,YAAY,SAAS,UAAU;AACnD,QAAI,QAAQ,cAAc,IAAI,OAAO;AACrC,QAAI,YAAY,cAAc,IAAI,WAAW;AAC7C,QAAI,mBAAmB,cAAc,IAAI,UAAU;AACnD,aAAS,SAAgB;AAAA,MACzB,eAAe,aAAa;AAAA,MAAG;AAAA,QAC7B,MAAM;AAAA,QACN,QAAQ;AAAA,QACR,UAAU;AAAA,MACZ;AAAA,IAAC,CAAC;AACF,6BAAyB,UAAU,aAAa,WAAW;AAE3D,QAAI,SAAS,MAAM,YAAY,KAAK,YAAY,IAAI,CAAC,YAAY,aAAa,OAAO,CAAC,MAAM,UAAU;AACpG,UAAI,oBAAoB,SAAS,SAAS,UAAU,EAAE;AACtD,wBAAkB,YAAY,CAAC,SAAS,MAAM,YAAY;AAAA,IAC5D;AAGA,cAAU,QAAQ,EAAE,cAAc,YAAY;AAC9C,wBAAoB,UAAU,OAAO,WAAW,gBAAgB;AAChE,QAAI,SAAS,UAAU,YAAY,IAAI,QAAQ,CAAC;AAChD,QAAI,iBAAiB,YAAY,IAAI,gBAAgB;AACrD,aAAS,SAAS;AAAA,MAChB;AAAA,MACA;AAAA,MACA;AAAA,IACF,CAAC;AAED,QAAI,SAAS;AACX,UAAI,kBAAkB,KAAK,mBAAmB,iBAAiB;AAC/D,UAAI,kBAAkB;AACtB,cAAQ,SAAgB,SAAS,eAAe,aAAa,GAAG;AAAA,QAC9D,MAAM;AAAA,QACN,SAAS;AAAA,QACT,UAAU;AAAA,QACV,OAAO,KAAK,UAAU,OAAO,EAAE;AAAA,MACjC,CAAC,CAAC;AAEF,UAAI,iBAAiB;AACnB,0BAAkB,UAAU,gBAAgB,IAAI,QAAQ,CAAC;AAAA,MAC3D;AAEA,cAAQ,SAAS;AAAA,QACf;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF,CAAC;AACD,+BAAyB,SAAS,aAAa,WAAW;AAE1D,gBAAU,OAAO,EAAE,cAAc,YAAY;AAC7C,0BAAoB,SAAS,OAAO,WAAW,gBAAgB;AAAA,IACjE;AAEA,QAAI,kBAAkB,SAAU,SAAS;AACvC,YAAM,iBAAiB,OAAO;AAAA,IAChC;AAEA,SAAK,kBAAkB,SAAU,IAAI;AAEnC,aAAO,GAAG,qBAAqB;AAAA,IACjC,CAAC;AACD,SAAK,UAAU,qBAAqB;AACpC,SAAK,QAAQ;AAEb,SAAK,YAAY;AACjB,SAAK,mBAAmB;AACxB,SAAK,UAAU;AACf,SAAK,QAAQ;AACb,SAAK,eAAe;AAEpB,QAAI,YAAY,IAAI,kBAAkB,GAAG;AACvC,WAAK,cAAc,aAAa,QAAQ;AACxC,iBAAW,KAAK,cAAc,aAAa,OAAO;AAAA,IACpD;AAAA,EACF;AAEA,EAAAA,UAAS,UAAU,gBAAgB,SAAU,aAAa,IAAI;AAC5D,cAAU,EAAE,EAAE,YAAY;AAAA,MACxB,eAAe;AAAA,MACf,kBAAkB;AAAA,MAClB,gBAAgB,YAAY;AAAA,MAC5B,aAAa,YAAY;AAAA,MACzB,YAAY,YAAY;AAAA,MACxB,YAAY;AAAA,IACd;AAAA,EACF;AAEA,EAAAA,UAAS,UAAU,YAAY,SAAU,aAAa,SAAS,KAAK,SAAS;AAC3E,QAAI,OAAO,YAAY,QAAQ;AAC/B,QAAI,YAAsB,eAAe,MAAM,OAAO;AAEtD,SAAK,iBAAiB,UAAU;AAEhC,QAAI,EAAE,qBAAqB,UAAU,aAAa,QAAQ,aAAa,GAAG;AACxE,UAAI,SAAS,KAAK,UAAU,QAAQ;AACpC,UAAI,SAAS,KAAK,iBAAiB,SAAS;AAE5C,UAAI,CAAC,QAAQ;AAEX,YAAI,IAAI,OAAO,YAAY;AAC3B,YAAI,IAAI,OAAO,YAAY,IAAI;AAE/B,YAAI,MAAM,CAAC,KAAK,MAAM,CAAC,GAAG;AAExB;AAAA,QACF;AAGA,YAAI,KAAK,uBAAuB,CAAC,KAAK,oBAAoB,QAAQ,GAAG,CAAC,GAAG;AACvE;AAAA,QACF;AAEA,YAAI,SAAS,YAAY,IAAI,QAAQ,KAAK;AAC1C,YAAI,IAAI,YAAY,IAAI,GAAG,KAAK;AAChC,iBAAS,IAAI,eAAU,MAAM,SAAS;AACtC,eAAO,IAAI;AACX,eAAO,IAAI;AACX,eAAO,KAAK,QAAQ,CAAC;AAErB,YAAI,cAAc,OAAO,cAAc,EAAE,eAAe;AAExD,YAAI,aAAa;AACf,sBAAY,SAAS;AACrB,sBAAY,IAAI;AAChB,sBAAY,KAAK,KAAK,UAAU,KAAK;AAAA,QACvC;AAEA,eAAO,SAAS;AAChB,aAAK,iBAAiB,WAAW,MAAM;AAEvC,eAAO,oBAAoB,IAAI;AAC/B,aAAK,MAAM,IAAI,MAAM;AAAA,MACvB;AAEA,aAAO,UAAU;AAAA,IACnB,OAAO;AAEL,oBAAU,UAAU,UAAU,KAAK,MAAM,aAAa,SAAS,KAAK,OAAO;AAAA,IAC7E;AAAA,EACF;AAEA,EAAAA,UAAS,UAAU,WAAW,SAAU,aAAa,SAAS,KAAK,SAAS;AAC1E,QAAI,OAAO,YAAY,QAAQ;AAC/B,QAAI,YAAsB,eAAe,MAAM,OAAO;AAEtD,SAAK,iBAAiB,QAAQ;AAE9B,QAAI,aAAa,QAAQ,aAAa,GAAG;AACvC,UAAI,SAAS,KAAK,iBAAiB,SAAS;AAE5C,UAAI,QAAQ;AACV,YAAI,OAAO,QAAQ;AACjB,eAAK,iBAAiB,WAAW,IAAI;AACrC,eAAK,MAAM,OAAO,MAAM;AAAA,QAC1B,OAAO;AACL,iBAAO,SAAS;AAAA,QAClB;AAAA,MACF;AAAA,IACF,OAAO;AAIL,oBAAU,UAAU,SAAS,KAAK,MAAM,aAAa,SAAS,KAAK,OAAO;AAAA,IAC5E;AAAA,EACF;AAEA,EAAAA,UAAS,UAAU,mBAAmB,SAAU,SAAS;AACvD,QAAI,UAAU,KAAK;AACnB,kBAAc,KAAK,WAAW,OAAO;AACrC,eAAW,cAAc,SAAS,OAAO;AAAA,EAC3C;AAEA,EAAAA,UAAS,UAAU,eAAe,SAAU,QAAQ;AAClD,QAAI,WAAW,KAAK;AAEpB,QAAI,UAAU;AACZ,WAAK,WAAW,OAAO,QAAQ;AAAA,IACjC;AAEA,eAAW,IAAI,WAAW;AAAA,MACxB,OAAO;AAAA,QACL;AAAA,MACF;AAAA,MACA,wBAAwB;AAAA,MACxB,IAAI;AAAA,IACN,CAAC;AAED,SAAK,WAAW,IAAI,QAAQ;AAE5B,SAAK,YAAY;AACjB,WAAO;AAAA,EACT;AAEA,EAAAA,UAAS,UAAU,cAAc,SAAU,QAAQ,iBAAiB;AAClE,QAAI,UAAU,KAAK;AAEnB,QAAI,SAAS;AACX,WAAK,WAAW,OAAO,OAAO;AAAA,IAChC;AAEA,cAAU,IAAI,UAAU;AAAA,MACtB,OAAO;AAAA,QACL;AAAA,QACA;AAAA,MACF;AAAA,MACA,wBAAwB;AAAA,IAC1B,CAAC;AAED,SAAK,WAAW,IAAI,OAAO;AAE3B,SAAK,WAAW;AAChB,WAAO;AAAA,EACT;AAEA,EAAAA,UAAS,UAAU,4BAA4B,SAAU,MAAM,UAAU,WAAW;AAClF,QAAI;AACJ,QAAI;AACJ,QAAI,WAAW,SAAS,YAAY;AACpC,QAAI,gBAAgB,SAAS;AAE7B,QAAI,SAAS,SAAS,eAAe;AACnC,6BAAuB,SAAS,aAAa;AAC7C,wBAAkB;AAAA,IACpB,WAAW,SAAS,SAAS,SAAS;AACpC,6BAAuB,SAAS,QAAQ;AACxC,wBAAkB;AAAA,IACpB;AAEA,QAAI,cAAc,KAAK;AACvB,QAAI,iBAAiB,YAAY,IAAI,mBAAmB;AAExD,QAAW,WAAW,cAAc,GAAG;AACrC,uBAAiB,eAAe,IAAI;AAAA,IACtC;AAEA,QAAI,cAAc,YAAY,IAAI,gBAAgB,KAAK;AACvD,QAAI,mBAA0B,WAAW,WAAW,IAAI,YAAY,IAAI,IAAI;AAC5E,SAAK,kBAAkB,SAAU,QAAQ,KAAK;AAC5C,UAAI,KAAK;AAET,UAAI,IAAI;AACN,YAAI,QAAQ,CAAC,OAAO,GAAG,OAAO,CAAC;AAC/B,YAAI,QAAQ;AACZ,YAAI,MAAM;AACV,YAAI,UAAU;AAEd,YAAI,WAAW;AACb,cAAI,iBAAiB;AACnB,gBAAI,YAAY;AAChB,gBAAI,QAAQ,SAAS,aAAa,KAAK;AAEvC,gBAAI,sBAAsB;AACxB,sBAAQ,UAAU;AAClB,oBAAM,UAAU;AAChB,wBAAU,CAAC,MAAM,KAAK,MAAM,KAAK;AAAA,YACnC,OAAO;AACL,sBAAQ,UAAU;AAClB,oBAAM,UAAU;AAChB,wBAAU,MAAM;AAAA,YAClB;AAAA,UACF,OAAO;AACL,gBAAI,WAAW;AAEf,gBAAI,sBAAsB;AACxB,sBAAQ,SAAS;AACjB,oBAAM,SAAS,IAAI,SAAS;AAC5B,wBAAU,OAAO;AAAA,YACnB,OAAO;AACL,sBAAQ,SAAS,IAAI,SAAS;AAC9B,oBAAM,SAAS;AACf,wBAAU,OAAO;AAAA,YACnB;AAAA,UACF;AAAA,QACF;AAEA,YAAI,QAAQ,QAAQ,QAAQ,KAAK,UAAU,UAAU,MAAM;AAE3D,YAAI,eAAe;AACjB,kBAAQ,IAAI;AAAA,QACd;AAEA,YAAI,QAAe,WAAW,WAAW,IAAI,YAAY,GAAG,IAAI,iBAAiB,QAAQ;AACzF,YAAI,aAAa,GAAG,cAAc;AAClC,YAAI,OAAO,WAAW,eAAe;AACrC,WAAG,KAAK;AAAA,UACN,QAAQ;AAAA,UACR,QAAQ;AAAA,QACV,CAAC;AACD,WAAG,UAAU;AAAA,UACX,QAAQ;AAAA,UACR,QAAQ;AAAA,QACV,GAAG;AAAA,UACD,UAAU;AAAA,UACV,YAAY;AAAA,UACZ;AAAA,QACF,CAAC;AAED,YAAI,MAAM;AACR,eAAK,YAAY;AAAA,YACf,OAAO;AAAA,cACL,SAAS;AAAA,YACX;AAAA,UACF,GAAG;AAAA,YACD,UAAU;AAAA,YACV;AAAA,UACF,CAAC;AAAA,QACH;AAEA,mBAAW,wBAAwB;AAAA,MACrC;AAAA,IACF,CAAC;AAAA,EACH;AAEA,EAAAA,UAAS,UAAU,wBAAwB,SAAU,aAAa,UAAU,cAAc;AACxF,QAAI,gBAAgB,YAAY,SAAS,UAAU;AAEnD,QAAI,qBAAqB,WAAW,GAAG;AACrC,UAAI,SAAS,YAAY,QAAQ;AACjC,UAAI,WAAW,KAAK;AAEpB,UAAI,SAAS,OAAO,UAAU,QAAQ;AAEtC,UAAI,CAAC,QAAQ;AACX,iBAAS,kBAAkB;AAC3B,aAAK,YAAY;AACjB;AAAA,MACF;AAEA,UAAI,WAAW,KAAK;AAEpB,UAAI,CAAC,UAAU;AACb,mBAAW,KAAK,YAAY,IAAY,aAAK;AAAA,UAC3C,IAAI;AAAA,QAEN,CAAC;AACD,iBAAS,aAAa;AACtB,iBAAS,eAAe,KAAK,SAAS;AACtC,iBAAS,wBAAwB;AAAA,MACnC;AAGA,UAAI,YAAY,oBAAoB,MAAM;AAE1C,UAAI,aAAa,GAAG;AAClB,sBAAc,UAAU,qBAAqB,aAAa,UAAU,GAAG;AAAA,UACrE;AAAA,UACA,cAAc;AAAA,UACd,gBAAgB;AAAA,UAChB,aAAa,SAAUC,YAAW,KAAK,mBAAmB;AACxD,mBAAO,qBAAqB,OAAO,4BAA4B,QAAQ,iBAAiB,IAAI,gBAAgB,QAAQA,UAAS;AAAA,UAC/H;AAAA,UACA,kBAAkB;AAAA,QACpB,GAAG,0BAA0B,eAAe,QAAQ,CAAC;AACrD,iBAAS,WAAW,WAAW;AAAA,MACjC;AAAA,IACF,WAAW,KAAK,WAAW;AACzB,WAAK,UAAU,kBAAkB;AAEjC,WAAK,YAAY;AAAA,IACnB;AAAA,EACF;AAEA,EAAAD,UAAS,UAAU,oBAAoB,SAAU,SAAS,UAAU,MAAM,iBAAiB,gBAAgB,eAAe,UAAU;AAClI,QAAI,WAAW,KAAK;AACpB,QAAI,WAAW,KAAK;AAEpB,QAAI,UAAU;AAGZ,UAAI,UAAU,KAAK,gBAAgB,aAAa,MAAM;AACpD,wBAAgB,YAAY,SAAS;AACrC,wBAAgB,YAAY,SAAS;AAAA,MACvC;AAEA,UAAI,SAAS,KAAK,UAAU,QAAQ;AACpC,UAAI,cAAc,KAAK;AACvB,UAAI,eAAe,YAAY,IAAI,cAAc;AACjD,UAAI,YAAY,cAAc,IAAI,WAAW;AAC7C,UAAI,WAAW,cAAc,IAAI,UAAU,KAAK;AAChD,UAAI,WAAW,SAAS,YAAY;AACpC,UAAI,eAAe,SAAS,aAAa;AACzC,UAAI,iBAAiB,SAAS;AAC9B,UAAI,YAAY,SAAS;AACzB,UAAI,OAAO,iBAAiB,eAAe,UAAU,IAAI,UAAU,IAAI,UAAU,SAAS,eAAe,UAAU,IAAI,UAAU,QAAQ,UAAU;AACnJ,UAAI,aAAa,eAAe,WAAW,MAAM,iBAAiB,KAAK;AACvE,UAAI,aAAa,eAAe,IAAI,CAAC,aAAa,iBAAiB,KAAK;AACxE,UAAI,MAAM,eAAe,MAAM;AAC/B,UAAI,iBAAiB,cAAc,QAAQ,MAAM,GAAG;AACpD,UAAI,UAAU,eAAe;AAC7B,UAAI,OAAO,QAAQ,KAAK,QAAQ;AAChC,UAAI,QAAQ;AAEZ,UAAI,QAAQ,GAAG;AAEb,YAAI,OAAO,KAAK,CAAC,cAAc;AAC7B,cAAI,KAAK,gBAAgB,QAAQ,QAAQ,EAAE;AAC3C,mBAAS,KAAK;AAAA,YACZ,GAAG,GAAG,KAAK;AAAA,YACX,GAAG,GAAG,KAAK;AAAA,UACb,CAAC;AACD,6BAAmB,QAAQ,YAAY,YAAY,QAAQ,EAAE;AAAA,QAC/D,OAAO;AACL,cAAI,KAAK,SAAS,WAAW,MAAM,GAAG;AACtC,gBAAM,SAAS,KAAK;AAAA,YAClB,GAAG,GAAG,KAAK;AAAA,YACX,GAAG,GAAG,KAAK;AAAA,UACb,CAAC;AACD,cAAI,aAAa,YAAY,YAAY,QAAQ,EAAE;AACnD,cAAI,WAAW,YAAY,YAAY,QAAQ,EAAE;AACjD,6BAAmB,QAAkB,qBAAqB,MAAM,WAAW,YAAY,UAAU,eAAe,CAAC;AAAA,QACnH;AAEA,wBAAgB,iBAAiB,QAAQ;AAAA,MAC3C,OAAO;AAGL,YAAI,MAAM,YAAY,KAAK,gBAAgB,iBAAiB,IAAI,QAAQ,KAAK;AAC7E,YAAI,KAAK,gBAAgB,QAAQ,GAAG;AACpC,2BAAmB,QAAQ,YAAY,YAAY,GAAG;AACtD,iBAAS,KAAK;AAAA,UACZ,GAAG,GAAG,KAAK;AAAA,UACX,GAAG,GAAG,KAAK;AAAA,QACb,CAAC;AAAA,MACH;AAEA,UAAI,gBAAgB;AAClB,mBAAW,QAAQ,EAAE,aAAa,KAAK;AAAA,MACzC;AAAA,IACF;AAAA,EACF;AAOA,EAAAA,UAAS,UAAU,qBAAqB,SAAU,MAAM,iBAAiB,UAAU,KAAK,MAAM,aAAa,cAAc;AACvH,QAAI,WAAW,KAAK;AACpB,QAAI,UAAU,KAAK;AACnB,QAAI,cAAc,KAAK;AACvB,QAAI,OAAO,kBAAkB,KAAK,OAAO,MAAM,KAAK,kBAAkB,iBAAiB,KAAK,WAAW,UAAU,KAAK,cAAc,WAAW;AAC/I,QAAI,UAAU,KAAK;AACnB,QAAI,mBAAmB,KAAK;AAC5B,QAAI,OAAO,KAAK;AAChB,QAAI,gBAAgB,KAAK;AAEzB,QAAI,MAAM;AAER,gBAAU,mBAAmB,KAAK,SAAS,UAAU,MAAM,YAAY;AACvE,yBAAmB,mBAAmB,KAAK,kBAAkB,UAAU,MAAM,YAAY;AACzF,aAAO,mBAAmB,KAAK,MAAM,UAAU,MAAM,YAAY;AACjE,sBAAgB,mBAAmB,KAAK,eAAe,UAAU,MAAM,YAAY;AAAA,IACrF;AAKA,QAAI,gBAAgB,SAAS,IAAI,IAAI,OAAQ,WAAW,gBAAgB,kBAAkB,aAAa,IAAI,KAAM;AAC/G,eAAS,cAAc;AACvB,eAAS,SAAS;AAAA,QAChB,QAAQ;AAAA,MACV,CAAC;AAED,UAAI,SAAS;AACX,gBAAQ,cAAc;AACtB,gBAAQ,SAAS;AAAA,UACf,QAAQ;AAAA,UACR,iBAAiB;AAAA,QACnB,CAAC;AAAA,MACH;AAEA;AAAA,IACF;AAEA,aAAS,MAAM,WAAW,KAAK;AAC/B,aAAS,MAAM,SAAS;AACxB,QAAI,SAAS;AAAA,MACX,OAAO;AAAA,QACL,QAAQ;AAAA,MACV;AAAA,IACF;AAGA,QAAI,KAAK,YAAY,SAAS;AAC5B,aAAO,MAAM,WAAW,KAAK;AAAA,IAC/B;AAGA,aAAS,cAAc;AACvB,IAAQ,YAAY,UAAU,QAAQ,WAAW;AAEjD,QAAI,SAAS;AACX,cAAQ,SAAS;AAAA,QAEf,QAAQ;AAAA,QACR,iBAAiB;AAAA,MACnB,CAAC;AACD,cAAQ,cAAc;AACtB,MAAQ,YAAY,SAAS;AAAA,QAC3B,OAAO;AAAA,UACL,iBAAiB;AAAA,QACnB;AAAA,MACF,GAAG,WAAW;AAEd,UAAI,SAAS,MAAM,WAAW,QAAQ,MAAM,QAAQ;AAClD,gBAAQ,MAAM,SAAS,SAAS,MAAM;AAAA,MACxC;AAAA,IACF;AAEA,QAAI,kBAAkB,CAAC;AACvB,QAAI,aAAa,KAAK;AAEtB,aAAS,IAAI,GAAG,IAAI,WAAW,QAAQ,KAAK;AAC1C,UAAI,MAAM,WAAW,GAAG;AAExB,UAAI,QAAQ,KAAK;AACf,YAAI,KAAK,KAAK,iBAAiB,WAAW,GAAG,IAAI;AAEjD,YAAI,IAAI;AACN,0BAAgB,KAAK;AAAA,YACnB;AAAA,YACA,OAAO;AAAA,UAET,CAAC;AAAA,QACH;AAAA,MACF;AAAA,IACF;AAEA,QAAI,SAAS,aAAa,SAAS,UAAU,QAAQ;AACnD,eAAS,UAAU,GAAG,OAAO,WAAY;AACvC,mBAAW,QAAQ,WAAW;AAC9B,YAAI,SAAS,SAAS,MAAM;AAE5B,iBAASE,KAAI,GAAGA,KAAI,gBAAgB,QAAQA,MAAK;AAC/C,cAAIC,MAAK,gBAAgBD,IAAG;AAC5B,cAAI,SAAS,gBAAgBA,IAAG,QAAQ;AACxC,UAAAC,IAAG,IAAI,OAAO;AACd,UAAAA,IAAG,IAAI,OAAO,SAAS;AACvB,UAAAA,IAAG,WAAW;AAAA,QAChB;AAAA,MACF,CAAC;AAAA,IACH;AAAA,EACF;AAEA,EAAAH,UAAS,UAAU,SAAS,SAAU,SAAS;AAC7C,QAAI,QAAQ,KAAK;AACjB,QAAI,UAAU,KAAK;AAEnB,SAAK,WAAW,UAAU;AAE1B,SAAK,YAAY,OAAO,IAAI;AAG5B,eAAW,QAAQ,kBAAkB,SAAU,IAAI,KAAK;AACtD,UAAI,GAAG,QAAQ;AACb,cAAM,OAAO,EAAE;AACf,gBAAQ,iBAAiB,KAAK,IAAI;AAAA,MACpC;AAAA,IACF,CAAC;AACD,SAAK,YAAY,KAAK,WAAW,KAAK,YAAY,KAAK,UAAU,KAAK,mBAAmB,KAAK,YAAY,KAAK,QAAQ;AAAA,EACzH;AAEA,EAAAA,UAAS,OAAO;AAChB,SAAOA;AACT,EAAE,aAAS;AAEX,IAAO,mBAAQ;;;ACptCA,SAAR,aAA8B,YAAY,wBAAwB;AACvE,SAAO;AAAA,IACL;AAAA,IACA,MAAM,oBAAoB;AAAA,IAC1B,OAAO,SAAU,aAAa;AAC5B,UAAI,OAAO,YAAY,QAAQ;AAC/B,UAAI,WAAW,YAAY;AAC3B,UAAI,kBAAkB,YAAY;AAClC,UAAI,gBAAgB,0BAA0B,gBAAgB;AAE9D,UAAI,CAAC,UAAU;AACb;AAAA,MACF;AAEA,UAAI,OAAO,IAAI,SAAS,YAAY,SAAU,KAAK;AACjD,eAAO,KAAK,aAAa,GAAG;AAAA,MAC9B,CAAC,EAAE,MAAM,GAAG,CAAC;AACb,UAAI,SAAS,KAAK;AAClB,UAAI,iBAAiB,KAAK,mBAAmB,sBAAsB;AAEnE,UAAI,mBAAmB,MAAM,KAAK,EAAE,GAAG;AACrC,aAAK,KAAK;AAAA,MACZ;AAEA,UAAI,mBAAmB,MAAM,KAAK,EAAE,GAAG;AACrC,aAAK,KAAK;AAAA,MACZ;AAEA,UAAI,QAAQ,KAAK,SAAS;AAC1B,UAAI,UAAU,KAAK,kBAAkB,KAAK,EAAE;AAC5C,UAAI,UAAU,KAAK,kBAAkB,KAAK,EAAE;AAC5C,aAAO,UAAU;AAAA,QACf,UAAU,SAAU,QAAQI,OAAM;AAChC,cAAI,WAAW,OAAO,MAAM,OAAO;AACnC,cAAI,SAAS,iBAAiB,mBAAmB,WAAW,MAAM;AAClE,cAAI,QAAQ,CAAC;AACb,cAAI,SAAS,CAAC;AAEd,mBAAS,IAAI,OAAO,OAAO,SAAS,GAAG,IAAI,OAAO,KAAK,KAAK;AAC1D,gBAAI,QAAQ;AAEZ,gBAAI,WAAW,GAAG;AAChB,kBAAI,IAAI,MAAM,IAAI,SAAS,CAAC;AAE5B,sBAAQ,SAAS,YAAY,GAAG,MAAM,MAAM;AAAA,YAC9C,OAAO;AACL,oBAAM,KAAK,MAAM,IAAI,SAAS,CAAC;AAC/B,oBAAM,KAAK,MAAM,IAAI,SAAS,CAAC;AAE/B,sBAAQ,SAAS,YAAY,OAAO,MAAM,MAAM;AAAA,YAClD;AAEA,gBAAI,eAAe;AACjB,qBAAO,YAAY,MAAM;AACzB,qBAAO,YAAY,MAAM;AAAA,YAC3B,OAAO;AACL,cAAAA,MAAK,cAAc,GAAG,MAAM,MAAM,CAAC;AAAA,YACrC;AAAA,UACF;AAEA,2BAAiBA,MAAK,UAAU,UAAU,MAAM;AAAA,QAClD;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;;;ACpEA,IAAI,WAAW;AAAA,EACb,SAAS,SAAU,OAAO;AACxB,QAAIC,OAAM;AACV,QAAI,QAAQ;AAEZ,aAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACrC,UAAI,CAAC,MAAM,MAAM,EAAE,GAAG;AACpB,QAAAA,QAAO,MAAM;AACb;AAAA,MACF;AAAA,IACF;AAGA,WAAO,UAAU,IAAI,MAAMA,OAAM;AAAA,EACnC;AAAA,EACA,KAAK,SAAU,OAAO;AACpB,QAAIA,OAAM;AAEV,aAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AAErC,MAAAA,QAAO,MAAM,MAAM;AAAA,IACrB;AAEA,WAAOA;AAAA,EACT;AAAA,EACA,KAAK,SAAU,OAAO;AACpB,QAAI,MAAM;AAEV,aAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACrC,YAAM,KAAK,QAAQ,MAAM,MAAM;AAAA,IACjC;AAGA,WAAO,SAAS,GAAG,IAAI,MAAM;AAAA,EAC/B;AAAA,EACA,KAAK,SAAU,OAAO;AACpB,QAAI,MAAM;AAEV,aAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACrC,YAAM,KAAK,QAAQ,MAAM,MAAM;AAAA,IACjC;AAGA,WAAO,SAAS,GAAG,IAAI,MAAM;AAAA,EAC/B;AAAA,EAGA,SAAS,SAAU,OAAO;AACxB,WAAO,MAAM;AAAA,EACf;AACF;AAEA,IAAI,eAAe,SAAU,OAAO;AAClC,SAAO,KAAK,MAAM,MAAM,SAAS,CAAC;AACpC;AAEe,SAAR,WAA4B,YAAY;AAC7C,SAAO;AAAA,IACL;AAAA,IAGA,OAAO,SAAU,aAAa,SAAS,KAAK;AAC1C,UAAI,OAAO,YAAY,QAAQ;AAC/B,UAAI,WAAW,YAAY,IAAI,UAAU;AACzC,UAAI,WAAW,YAAY;AAC3B,UAAI,QAAQ,KAAK,MAAM;AAEvB,UAAI,QAAQ,MAAM,SAAS,SAAS,iBAAiB,UAAU;AAC7D,YAAI,WAAW,SAAS,YAAY;AACpC,YAAI,YAAY,SAAS,aAAa,QAAQ;AAC9C,YAAI,SAAS,SAAS,UAAU;AAChC,YAAI,MAAM,IAAI,oBAAoB;AAElC,YAAI,OAAO,KAAK,IAAI,OAAO,KAAK,OAAO,EAAE,KAAK,OAAO;AACrD,YAAI,OAAO,KAAK,MAAM,QAAQ,IAAI;AAElC,YAAI,SAAS,IAAI,KAAK,OAAO,GAAG;AAC9B,cAAI,aAAa,QAAQ;AACvB,wBAAY,QAAQ,KAAK,eAAe,KAAK,aAAa,UAAU,GAAG,GAAG,IAAI,IAAI,CAAC;AAAA,UACrF;AAEA,cAAI,UAAU;AAEd,cAAI,SAAS,QAAQ,GAAG;AACtB,sBAAU,SAAS;AAAA,UACrB,WAAW,WAAW,QAAQ,GAAG;AAC/B,sBAAU;AAAA,UACZ;AAEA,cAAI,SAAS;AAEX,wBAAY,QAAQ,KAAK,WAAW,KAAK,aAAa,UAAU,GAAG,GAAG,IAAI,MAAM,SAAS,YAAY,CAAC;AAAA,UACxG;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;;;AC7FO,SAASC,SAAQ,WAAW;AACjC,YAAU,kBAAkB,gBAAQ;AACpC,YAAU,oBAAoB,kBAAU;AACxC,YAAU,eAAe,aAAa,QAAQ,IAAI,CAAC;AACnD,YAAU,eAAe;AAAA,IACvB,YAAY;AAAA,IACZ,OAAO,SAAU,aAAa;AAC5B,UAAI,OAAO,YAAY,QAAQ;AAE/B,UAAI,YAAY,YAAY,SAAS,WAAW,EAAE,aAAa;AAE/D,UAAI,aAAa,CAAC,UAAU,QAAQ;AAGlC,kBAAU,SAAS,KAAK,UAAU,OAAO,EAAE;AAAA,MAC7C;AAEA,WAAK,UAAU,mBAAmB,SAAS;AAAA,IAC7C;AAAA,EACF,CAAC;AAED,YAAU,kBAAkB,UAAU,SAAS,UAAU,WAAW,WAAW,MAAM,CAAC;AACxF;;;ACtBA,IAAI,qBAEJ,SAAU,QAAQ;AAChB,YAAUC,qBAAoB,MAAM;AAEpC,WAASA,sBAAqB;AAC5B,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,oBAAmB;AAChC,WAAO;AAAA,EACT;AAEA,EAAAA,oBAAmB,UAAU,iBAAiB,SAAU,QAAQ,SAAS;AACvE,WAAO,yBAAiB,MAAM,MAAM;AAAA,MAClC,oBAAoB;AAAA,IACtB,CAAC;AAAA,EACH;AAEA,EAAAA,oBAAmB,UAAU,oBAAoB,SAAU,OAAO,MAAM,gBAAgB;AACtF,QAAI,WAAW,KAAK;AAEpB,QAAI,YAAY,SAAS,WAAW;AAElC,UAAI,cAAc,SAAS,UAAU,KAAK;AAC1C,UAAI,OAAO,SAAS,YAAY,WAAW;AAE3C,UAAI,gBAAgB;AAClB,aAAK,SAAS,QAAQ,GAAG,SAAU,MAAM,KAAK;AAE5C,cAAI,KAAK,SAAS,cAAc,QAAQ,MAAM;AAC5C,gBAAI,aAAa,KAAK,eAAe;AACrC,gBAAI,eAAe,YAAY;AAE/B,gBAAI,QAAQ,KAAK,SAAS,QAAQ,KAAK,SAAS;AAEhD,gBAAI,OAAO;AACT,8BAAgB;AAAA,YAClB;AAKA,gBAAI,WAAW,SAAS,GAAG;AACzB;AAAA,YACF,WAAW,WAAW,WAAW,GAAG;AAIlC,mBAAK,OAAO,KAAK,cAAc,KAAK,UAAU,EAAE,QAAQ,IAAI,EAAE;AAC9D;AAAA,YACF;AAEA,gBAAI,YAAY;AAChB,gBAAI,QAAQ;AACZ,gBAAI,gBAAgB;AAEpB,qBAAS,IAAI,GAAG,IAAI,WAAW,QAAQ,KAAK;AAC1C,kBAAI,YAAY,WAAW,GAAG;AAG9B,kBAAI,YAAY,MAAM,WAAW,SAAS,IAAI,WAAW,IAAI,GAAG,YAAY,gBAAgB,WAAW,GAAG;AAE1G,kBAAI,cAAc,cAAc;AAC9B,wBAAQ;AACR;AAAA,cACF,WAAW,YAAY,cAAc;AACnC,4BAAY;AAAA,cACd,WAAW,aAAa,QAAQ,YAAY,cAAc;AACxD,yBAAS,YAAY,aAAa;AAClC;AAAA,cACF;AAEA,kBAAI,MAAM,GAAG;AAGX,gCAAgB,YAAY,WAAW,GAAG;AAAA,cAC5C;AAAA,YACF;AAEA,gBAAI,SAAS,MAAM;AACjB,kBAAI,CAAC,WAAW;AAGd,wBAAQ,WAAW,GAAG;AAAA,cACxB,WAAW,WAAW;AAGpB,wBAAQ,WAAW,WAAW,SAAS,GAAG;AAAA,cAC5C;AAAA,YACF;AAEA,iBAAK,OAAO,KAAK,cAAc,KAAK;AAAA,UACtC;AAAA,QACF,CAAC;AAAA,MACH,OAAO;AACL,YAAI,OAAO,KAAK,QAAQ;AACxB,YAAI,SAAS,KAAK,UAAU,QAAQ;AACpC,YAAI,OAAO,KAAK,UAAU,MAAM;AAChC,YAAI,cAAc,SAAS,YAAY,EAAE,aAAa,IAAI,IAAI;AAC9D,aAAK,gBAAgB,SAAS,OAAO;AAAA,MACvC;AAEA,aAAO;AAAA,IACT;AAEA,WAAO,CAAC,KAAK,GAAG;AAAA,EAClB;AAEA,EAAAA,oBAAmB,OAAO;AAC1B,EAAAA,oBAAmB,gBAAgB;AAAA,IAEjC,GAAG;AAAA,IACH,kBAAkB;AAAA,IAClB,iBAAiB;AAAA,IAKjB,cAAc;AAAA,IACd,aAAa;AAAA,IAEb,OAAO;AAAA,IACP,gBAAgB;AAAA,IAChB,aAAa;AAAA,IACb,sBAAsB;AAAA,EACxB;AACA,SAAOA;AACT,EAAE,cAAW;AAEb,eAAY,cAAc,kBAAkB;AAC5C,IAAO,wBAAQ;;;AClIf,IAAI,iBAEJ,SAAU,QAAQ;AAChB,YAAUC,iBAAgB,MAAM;AAEhC,WAASA,kBAAiB;AACxB,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,gBAAe;AAC5B,WAAO;AAAA,EACT;AAEA,EAAAA,gBAAe,UAAU,iBAAiB,WAAY;AACpD,WAAO,yBAAiB,MAAM,MAAM;AAAA,MAClC,oBAAoB;AAAA,MACpB,uBAAuB,CAAC,CAAC,KAAK,IAAI,gBAAgB,IAAI,KAAK;AAAA,IAC7D,CAAC;AAAA,EACH;AAMA,EAAAA,gBAAe,UAAU,iBAAiB,WAAY;AAEpD,WAAO,KAAK,IAAI,OAAO,IAAI,KAAK,IAAI,aAAa,IAAI;AAAA,EACvD;AAMA,EAAAA,gBAAe,UAAU,0BAA0B,WAAY;AAE7D,QAAI,uBAAuB,KAAK,IAAI,sBAAsB;AAC1D,QAAI,iBAAiB,KAAK,IAAI,gBAAgB;AAE9C,QAAI,iBAAiB,sBAAsB;AACzC,6BAAuB;AAAA,IACzB;AAEA,WAAO;AAAA,EACT;AAEA,EAAAA,gBAAe,UAAU,gBAAgB,SAAU,WAAW,MAAM,WAAW;AAC7E,WAAO,UAAU,KAAK,KAAK,cAAc,SAAS,CAAC;AAAA,EACrD;AAEA,EAAAA,gBAAe,OAAO;AACtB,EAAAA,gBAAe,eAAe,CAAC,QAAQ,OAAO;AAC9C,EAAAA,gBAAe,gBAAgB,qBAAqB,sBAAmB,eAAe;AAAA,IAGpF,MAAM;AAAA,IACN,UAAU;AAAA,IACV,gBAAgB;AAAA,IAChB,iBAAiB;AAAA,MACf,OAAO;AAAA,MACP,aAAa;AAAA,MACb,aAAa;AAAA,MACb,YAAY;AAAA,MACZ,cAAc;AAAA,MACd,YAAY;AAAA,MACZ,aAAa;AAAA,MACb,eAAe;AAAA,MACf,eAAe;AAAA,MACf,SAAS;AAAA,IACX;AAAA,IACA,QAAQ;AAAA,MACN,WAAW;AAAA,QACT,aAAa;AAAA,MACf;AAAA,IACF;AAAA,IACA,cAAc;AAAA,EAChB,CAAC;AACD,SAAOA;AACT,EAAE,qBAAkB;AAEpB,IAAO,oBAAQ;;;AC7Ef,IAAI,eAEJ,WAAY;AACV,WAASC,gBAAe;AACtB,SAAK,KAAK;AACV,SAAK,KAAK;AACV,SAAK,KAAK;AACV,SAAK,IAAI;AACT,SAAK,aAAa;AAClB,SAAK,WAAW,KAAK,KAAK;AAC1B,SAAK,YAAY;AAAA,EACnB;AAEA,SAAOA;AACT,EAAE;AAEF,IAAI,cAEJ,SAAU,QAAQ;AAChB,YAAUC,cAAa,MAAM;AAE7B,WAASA,aAAY,MAAM;AACzB,QAAI,QAAQ,OAAO,KAAK,MAAM,IAAI,KAAK;AAEvC,UAAM,OAAO;AACb,WAAO;AAAA,EACT;AAEA,EAAAA,aAAY,UAAU,kBAAkB,WAAY;AAClD,WAAO,IAAI,aAAa;AAAA,EAC1B;AAEA,EAAAA,aAAY,UAAU,YAAY,SAAU,KAAK,OAAO;AACtD,QAAI,KAAK,MAAM;AACf,QAAI,KAAK,MAAM;AACf,QAAI,KAAK,KAAK,IAAI,MAAM,MAAM,GAAG,CAAC;AAClC,QAAI,IAAI,KAAK,IAAI,MAAM,GAAG,CAAC;AAC3B,QAAI,MAAM,IAAI,MAAM;AACpB,QAAI,UAAU,KAAK;AACnB,QAAI,aAAa,MAAM;AACvB,QAAI,WAAW,MAAM;AACrB,QAAI,YAAY,MAAM;AACtB,QAAIC,OAAM,KAAK,KAAK;AACpB,QAAI,iBAAiB,YAAY,WAAW,aAAaA,OAAM,aAAa,WAAWA;AAEvF,QAAI,CAAC,gBAAgB;AAEnB,mBAAa,YAAY,YAAYA,OAAM,CAACA;AAAA,IAC9C;AAEA,QAAI,aAAa,KAAK,IAAI,UAAU;AACpC,QAAI,aAAa,KAAK,IAAI,UAAU;AACpC,QAAI,WAAW,KAAK,IAAI,QAAQ;AAChC,QAAI,WAAW,KAAK,IAAI,QAAQ;AAEhC,QAAI,gBAAgB;AAClB,UAAI,OAAO,aAAa,KAAK,IAAI,aAAa,KAAK,EAAE;AACrD,UAAI,IAAI,aAAa,UAAU,IAAI,aAAa,UAAU,IAAI,IAAI,CAAC,KAAK,KAAK,YAAY,YAAY,CAAC,SAAS;AAAA,IACjH,OAAO;AACL,UAAI,OAAO,aAAa,IAAI,IAAI,aAAa,IAAI,EAAE;AAAA,IACrD;AAEA,QAAI,IAAI,IAAI,IAAI,GAAG,YAAY,UAAU,CAAC,SAAS;AACnD,QAAI,IAAI,WAAW,UAAU,IAAI,WAAW,UAAU,IAAI,IAAI,WAAW,KAAK,KAAK,GAAG,WAAW,KAAK,IAAI,CAAC,SAAS;AAEpH,QAAI,OAAO,GAAG;AACZ,UAAI,IAAI,IAAI,IAAI,IAAI,UAAU,YAAY,SAAS;AAAA,IACrD;AAAA,EAEF;AAEA,SAAOD;AACT,EAAE,YAAI;AAEN,IAAO,kBAAQ;;;AC9ER,SAAS,kCAAkC,iBAAiB,MAAM;AACvE,SAAO,QAAQ,CAAC;AAChB,MAAI,aAAa,KAAK;AACtB,SAAO,SAAU,KAAKE,OAAM,cAAc;AACxC,QAAI,eAAeA,MAAK;AAExB,QAAI,CAAC,gBAAgB,wBAAwB,OAAO;AAClD,aAAO,sBAAsB,KAAKA,OAAM,YAAY;AAAA,IACtD;AAEA,QAAI,uBAAuB,gBAAgB,YAAY;AACvD,QAAI,WAAWA,MAAK,YAAY,OAAOA,MAAK,WAAW;AACvD,QAAI,SAAS,KAAK;AAClB,QAAI,KAAK,OAAO;AAChB,QAAI,KAAK,OAAO;AAChB,QAAI,IAAI,OAAO;AACf,QAAI,KAAK,OAAO;AAChB,QAAI,WAAW,IAAI,MAAM;AACzB,QAAI,aAAa,OAAO;AACxB,QAAI,WAAW,OAAO;AACtB,QAAI,eAAe,aAAa,YAAY;AAC5C,QAAI,YAAY,aAAa,KAAK,IAAI,IAAI,EAAE,IAAI,IAAI;AACpD,QAAI,UAAU,KAAK;AACnB,QAAI,UAAU,KAAK;AAEnB,QAAI,IAAI,KAAK,IAAI,QAAQ,UAAU;AACnC,QAAI,IAAI,KAAK,IAAI,QAAQ,UAAU;AACnC,QAAI,YAAY;AAChB,QAAI,oBAAoB;AAExB,YAAQ,sBAAsB;AAAA,MAC5B,KAAK;AACH,YAAI,MAAM,KAAK,YAAY,QAAQ,WAAW;AAC9C,YAAI,MAAM,KAAK,YAAY,QAAQ,WAAW;AAC9C,oBAAY;AACZ,4BAAoB;AACpB;AAAA,MAEF,KAAK;AACH,YAAI,MAAM,KAAK,YAAY,QAAQ,WAAW;AAC9C,YAAI,MAAM,KAAK,YAAY,QAAQ,WAAW;AAC9C,oBAAY;AACZ,4BAAoB;AACpB;AAAA,MAEF,KAAK;AACH,YAAI,KAAK,UAAU,QAAQ,UAAU,IAAI,qBAAqB,YAAY,WAAW,WAAW,KAAK;AACrG,YAAI,KAAK,UAAU,QAAQ,UAAU,IAAI,qBAAqB,YAAY,WAAW,WAAW,KAAK;AACrG,oBAAY;AACZ,4BAAoB;AACpB;AAAA,MAEF,KAAK;AACH,YAAI,KAAK,UAAU,QAAQ,UAAU,IAAI,qBAAqB,YAAY,CAAC,WAAW,WAAW,KAAK;AACtG,YAAI,KAAK,UAAU,QAAQ,UAAU,IAAI,qBAAqB,YAAY,CAAC,WAAW,WAAW,KAAK;AACtG,oBAAY;AACZ,4BAAoB;AACpB;AAAA,MAEF,KAAK;AACH,YAAI,KAAK,UAAU,QAAQ,WAAW;AACtC,YAAI,KAAK,UAAU,QAAQ,WAAW;AACtC,oBAAY;AACZ,4BAAoB;AACpB;AAAA,MAEF,KAAK;AACH,YAAI,MAAM,IAAI,YAAY,QAAQ,WAAW;AAC7C,YAAI,MAAM,IAAI,YAAY,QAAQ,WAAW;AAC7C,oBAAY;AACZ,4BAAoB;AACpB;AAAA,MAEF,KAAK;AACH,YAAI,MAAM,IAAI,YAAY,QAAQ,WAAW;AAC7C,YAAI,MAAM,IAAI,YAAY,QAAQ,WAAW;AAC7C,oBAAY;AACZ,4BAAoB;AACpB;AAAA,MAEF,KAAK;AACH,YAAI,KAAK,UAAU,QAAQ,QAAQ,IAAI,qBAAqB,UAAU,WAAW,WAAW,IAAI;AAChG,YAAI,KAAK,UAAU,QAAQ,QAAQ,IAAI,qBAAqB,UAAU,WAAW,WAAW,IAAI;AAChG,oBAAY;AACZ,4BAAoB;AACpB;AAAA,MAEF,KAAK;AACH,YAAI,KAAK,UAAU,QAAQ,QAAQ,IAAI,qBAAqB,UAAU,CAAC,WAAW,WAAW,IAAI;AACjG,YAAI,KAAK,UAAU,QAAQ,QAAQ,IAAI,qBAAqB,UAAU,CAAC,WAAW,WAAW,IAAI;AACjG,oBAAY;AACZ,4BAAoB;AACpB;AAAA,MAEF;AACE,eAAO,sBAAsB,KAAKA,OAAM,YAAY;AAAA,IACxD;AAEA,UAAM,OAAO,CAAC;AACd,QAAI,IAAI;AACR,QAAI,IAAI;AACR,QAAI,QAAQ;AACZ,QAAI,gBAAgB;AACpB,WAAO;AAAA,EACT;AACF;AACO,SAAS,sBAAsB,QAAQ,cAAc,iBAAiB,YAAY;AACvF,MAAI,SAAS,UAAU,GAAG;AAExB,WAAO,cAAc;AAAA,MACnB,UAAU;AAAA,IACZ,CAAC;AACD;AAAA,EACF,WAAW,QAAQ,YAAY,GAAG;AAEhC,WAAO,cAAc;AAAA,MACnB,UAAU;AAAA,IACZ,CAAC;AACD;AAAA,EACF;AAEA,MAAI,QAAQ,OAAO;AACnB,MAAI,aAAa,MAAM,YAAY,MAAM,aAAa,MAAM;AAC5D,MAAI,WAAW,MAAM,YAAY,MAAM,WAAW,MAAM;AACxD,MAAI,eAAe,aAAa,YAAY;AAC5C,MAAI;AACJ,MAAI,uBAAuB,gBAAgB,YAAY;AAEvD,UAAQ,sBAAsB;AAAA,IAC5B,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AACH,oBAAc;AACd;AAAA,IAEF,KAAK;AAAA,IACL,KAAK;AACH,oBAAc;AACd;AAAA,IAEF,KAAK;AAAA,IACL,KAAK;AACH,oBAAc;AACd;AAAA,IAEF;AACE,aAAO,cAAc;AAAA,QACnB,UAAU;AAAA,MACZ,CAAC;AACD;AAAA,EACJ;AAEA,MAAI,SAAS,KAAK,KAAK,MAAM;AAS7B,MAAI,yBAAyB,YAAY,SAAS,KAAK,KAAK,KAAK,SAAS,KAAK,KAAK,KAAK;AACvF,cAAU,KAAK;AAAA,EACjB;AAEA,SAAO,cAAc;AAAA,IACnB,UAAU;AAAA,EACZ,CAAC;AACH;AAEA,SAAS,qBAAqB,OAAO,UAAU,OAAO;AACpD,SAAO,WAAW,KAAK,IAAI,KAAK,KAAK,QAAQ,KAAK;AACpD;AAEA,SAAS,qBAAqB,OAAO,UAAU,OAAO;AACpD,SAAO,WAAW,KAAK,IAAI,KAAK,KAAK,QAAQ,IAAI;AACnD;;;AClLO,SAAS,sBAAsB,OAAO,OAAO,YAAY;AAC9D,MAAI,eAAe,MAAM,IAAI,cAAc;AAE3C,MAAI,gBAAgB,MAAM;AACxB,WAAO,aAAa;AAAA,MAClB,cAAc;AAAA,IAChB,IAAI;AAAA,EACN;AAEA,MAAI,CAAC,QAAQ,YAAY,GAAG;AAC1B,mBAAe,CAAC,cAAc,cAAc,cAAc,YAAY;AAAA,EACxE;AAEA,MAAI,KAAK,KAAK,IAAI,MAAM,KAAK,IAAI,MAAM,MAAM,CAAC;AAC9C,SAAO;AAAA,IACL,cAAc,IAAI,cAAc,SAAU,IAAI;AAC5C,aAAO,aAAa,IAAI,EAAE;AAAA,IAC5B,CAAC;AAAA,EACH;AACF;;;ACHA,IAAIC,WAAU,KAAK;AACnB,IAAIC,WAAU,KAAK;AAEnB,SAAS,YAAY,OAAO,MAAM;AAChC,MAAI,mBAAmB,MAAM,WAAW,MAAM,QAAQ;AAEtD,MAAI,uBAAuB,OAAO,aAAa,GAAG;AAChD,QAAI,WAAW,MAAM,YAAY;AAIjC,QAAI,SAAS,SAAS,cAAc,CAAC,SAAS,QAAQ;AACpD,UAAI,cAAc,KAAK,UAAU,WAAW;AAE5C,UAAI,SAAS,aAAa,GAAG;AAC3B,yBAAiB,KAAK;AACtB,yBAAiB,SAAS,cAAc;AAAA,MAC1C,OAAO;AACL,yBAAiB,KAAK;AACtB,yBAAiB,UAAU,cAAc;AAAA,MAC3C;AAAA,IACF;AAAA,EACF;AAEA,SAAO;AACT;AAEA,IAAI,UAEJ,SAAU,QAAQ;AAChB,YAAUC,UAAS,MAAM;AAEzB,WAASA,WAAU;AACjB,QAAI,QAAQ,OAAO,KAAK,IAAI,KAAK;AAEjC,UAAM,OAAOA,SAAQ;AACrB,UAAM,gBAAgB;AACtB,WAAO;AAAA,EACT;AAEA,EAAAA,SAAQ,UAAU,SAAS,SAAU,aAAa,SAAS,KAAK,SAAS;AACvE,SAAK,SAAS;AAEd,SAAK,0BAA0B,GAAG;AAElC,SAAK,gBAAgB,WAAW;AAEhC,QAAI,uBAAuB,YAAY,IAAI,kBAAkB;AAE7D,QAAI,yBAAyB,iBAAiB,yBAAyB,SAAS;AAE9E,WAAK,kBAAkB;AACvB,WAAK,eAAe,KAAK,aAAa,aAAa,SAAS,GAAG,IAAI,KAAK,cAAc,aAAa,SAAS,KAAK,OAAO;AAAA,IAC1H,WAAW,MAAuC;AAChD,WAAK,+CAA+C;AAAA,IACtD;AAAA,EACF;AAEA,EAAAA,SAAQ,UAAU,2BAA2B,SAAU,aAAa;AAClE,SAAK,OAAO;AAEZ,SAAK,gBAAgB,WAAW;AAIhC,SAAK,iBAAiB,WAAW;AAAA,EACnC;AAEA,EAAAA,SAAQ,UAAU,oBAAoB,SAAU,QAAQ,aAAa;AAEnE,SAAK,kBAAkB,CAAC;AAExB,SAAK,wBAAwB,QAAQ,WAAW;AAAA,EAClD;AAEA,EAAAA,SAAQ,UAAU,eAAe,SAAU,IAAI;AAC7C,qBAAiB,KAAK,mBAAmB,KAAK,OAAO,EAAE;AAAA,EACzD;AAEA,EAAAA,SAAQ,UAAU,kBAAkB,SAAU,aAAa;AACzD,QAAI,cAAc,YAAY,gBAAgB;AAE9C,QAAI,KAAK,gBAAgB,QAAQ,gBAAgB,KAAK,cAAc;AAClE,WAAK,eAAe;AAEpB,WAAK,OAAO;AAAA,IACd;AAAA,EACF;AAEA,EAAAA,SAAQ,UAAU,gBAAgB,SAAU,aAAa,SAAS,KAAK,SAAS;AAC9E,QAAI,QAAQ,KAAK;AACjB,QAAI,OAAO,YAAY,QAAQ;AAC/B,QAAI,UAAU,KAAK;AACnB,QAAI,QAAQ,YAAY;AACxB,QAAI,WAAW,MAAM,YAAY;AACjC,QAAI;AAEJ,QAAI,MAAM,SAAS,eAAe;AAChC,6BAAuB,SAAS,aAAa;AAAA,IAC/C,WAAW,MAAM,SAAS,SAAS;AACjC,6BAAuB,SAAS,QAAQ;AAAA,IAC1C;AAEA,QAAI,iBAAiB,YAAY,mBAAmB,IAAI,cAAc;AACtE,QAAI,kBAAkB,mBAAmB,aAAa,KAAK;AAE3D,QAAI,iBAAiB;AACnB,WAAK,oBAAoB,iBAAiB,MAAM,GAAG;AAAA,IACrD;AAEA,QAAI,YAAY,YAAY,IAAI,QAAQ,IAAI,KAAK;AACjD,QAAI,mBAAmB,YAAY,OAAO,IAAI;AAE9C,UAAM,eAAe;AAGrB,QAAI,WAAW,YAAY,IAAI,YAAY,IAAI;AAC/C,QAAI,iBAAiB,YAAY,IAAI,kBAAkB,IAAI;AAC3D,QAAI,kBAAkB,YAAY,SAAS,iBAAiB;AAC5D,QAAI,kBAAkB,gBAAgB,IAAI,cAAc,KAAK;AAC7D,QAAI,QAAQ,CAAC;AACb,QAAI,WAAW,KAAK;AACpB,QAAI,aAAa,WAAW,QAAQ;AACpC,QAAI,gBAAgB,WAAW,QAAQ,SAAS;AAEhD,aAAS,iBAAiB,WAAW;AACnC,UAAI,WAAW,UAAU,MAAM,MAAM,MAAM,SAAS;AACpD,UAAI,OAAO,mBAAmB,OAAO,sBAAsB,QAAQ;AACnE,WAAK,SAAS,gBAAgB,aAAa,CAAC;AAE5C,UAAI,MAAM,SAAS,eAAe;AAChC,aAAK,SAAS,KAAK,eAAe;AAAA,MACpC,OAAO;AACL,aAAK,SAAS,gBAAgB,eAAe;AAAA,MAC/C;AAEA,YAAM,aAAa;AACnB,aAAO;AAAA,IACT;AAEA;AACA,SAAK,KAAK,OAAO,EAAE,IAAI,SAAU,WAAW;AAC1C,UAAI,YAAY,KAAK,aAAa,SAAS;AAC3C,UAAIC,UAAS,UAAU,MAAM,MAAM,MAAM,WAAW,SAAS;AAE7D,UAAI,gBAAgB;AAClB,yBAAiB,SAAS;AAAA,MAC5B;AAGA,UAAI,CAAC,KAAK,SAAS,SAAS,KAAK,CAAC,cAAc,MAAM,MAAMA,OAAM,GAAG;AACnE;AAAA,MACF;AAEA,UAAI,YAAY;AAEhB,UAAI,WAAW;AAGb,oBAAY,KAAK,MAAM,MAAM,kBAAkBA,OAAM;AAAA,MACvD;AAEA,UAAI,KAAK,eAAe,MAAM,MAAM,aAAa,MAAM,WAAWA,SAAQ,sBAAsB,gBAAgB,SAAS,OAAO,OAAO,QAAQ;AAE/I,UAAI,iBAAiB;AASnB,WAAG,sBAAsB;AAAA,MAC3B;AAEA,kBAAY,IAAI,MAAM,WAAW,WAAWA,SAAQ,aAAa,sBAAsB,MAAM,SAAS,OAAO;AAE7G,UAAI,YAAY;AACd,WAAG,KAAK;AAAA,UACN,OAAOA;AAAA,QACT,CAAC;AAAA,MACH,WAAW,iBAAiB;AAC1B,gCAAwB,iBAAiB,gBAAgB,IAAIA,SAAQ,WAAW,sBAAsB,OAAO,KAAK;AAAA,MACpH,OAAO;AACL,kBAAU,IAAI;AAAA,UACZ,OAAOA;AAAA,QACT,GAAG,aAAa,SAAS;AAAA,MAC3B;AAEA,WAAK,iBAAiB,WAAW,EAAE;AACnC,YAAM,IAAI,EAAE;AACZ,SAAG,SAAS;AAAA,IACd,CAAC,EAAE,OAAO,SAAU,UAAU,UAAU;AACtC,UAAI,YAAY,KAAK,aAAa,QAAQ;AAC1C,UAAIA,UAAS,UAAU,MAAM,MAAM,MAAM,UAAU,SAAS;AAE5D,UAAI,gBAAgB;AAClB,YAAI,OAAO;AAEX,YAAI,SAAS,WAAW,GAAG;AACzB,iBAAO,iBAAiB,QAAQ;AAAA,QAClC,OAAO;AACL,iBAAO,SAAS;AAChB,eAAK,SAAS,gBAAgB,aAAa,CAAC;AAE5C,cAAI,MAAM,SAAS,eAAe;AAChC,iBAAK,SAAS,KAAK,eAAe;AAAA,UACpC,OAAO;AACL,iBAAK,SAAS,gBAAgB,eAAe;AAAA,UAC/C;AAEA,gBAAM,YAAY;AAAA,QACpB;AAEA,YAAI,WAAW,UAAU,MAAM,MAAM,MAAM,QAAQ;AACnD,YAAI,QAAQ,sBAAsB,sBAAsB,UAAU,KAAK;AACvE,oBAAY,MAAM;AAAA,UAChB;AAAA,QACF,GAAG,gBAAgB,QAAQ;AAAA,MAC7B;AAEA,UAAI,KAAK,QAAQ,iBAAiB,QAAQ;AAE1C,UAAI,CAAC,KAAK,SAAS,QAAQ,KAAK,CAAC,cAAc,MAAM,MAAMA,OAAM,GAAG;AAClE,cAAM,OAAO,EAAE;AACf;AAAA,MACF;AAEA,UAAI,YAAY;AAEhB,UAAI,WAAW;AACb,oBAAY,KAAK,MAAM,MAAM,kBAAkBA,OAAM;AAErD,YAAI,WAAW;AACb,gBAAM,OAAO,EAAE;AAAA,QACjB;AAAA,MACF;AAEA,UAAI,CAAC,IAAI;AACP,aAAK,eAAe,MAAM,MAAM,aAAa,MAAM,UAAUA,SAAQ,sBAAsB,gBAAgB,SAAS,OAAO,CAAC,CAAC,IAAI,QAAQ;AAAA,MAC3I,OAAO;AACL,qBAAa,EAAE;AAAA,MACjB;AAEA,UAAI,iBAAiB;AACnB,WAAG,sBAAsB;AAAA,MAC3B;AAEA,UAAI,eAAe;AACjB,YAAI,SAAS,GAAG,eAAe;AAE/B,YAAI,QAAQ;AACV,cAAI,kBAAkB,WAAW,MAAM;AAEvC,cAAI,gBAAgB,aAAa,MAAM;AAOrC,4BAAgB,YAAY,gBAAgB;AAAA,UAC9C;AAAA,QACF;AAAA,MACF,OAEK;AACD,oBAAY,IAAI,MAAM,UAAU,WAAWA,SAAQ,aAAa,sBAAsB,MAAM,SAAS,OAAO;AAAA,MAC9G;AAEF,UAAI,YAAY;AACd,WAAG,KAAK;AAAA,UACN,OAAOA;AAAA,QACT,CAAC;AAAA,MACH,WAAW,iBAAiB;AAC1B,gCAAwB,iBAAiB,gBAAgB,IAAIA,SAAQ,UAAU,sBAAsB,MAAM,aAAa;AAAA,MAC1H,OAAO;AACL,oBAAY,IAAI;AAAA,UACd,OAAOA;AAAA,QACT,GAAG,aAAa,UAAU,IAAI;AAAA,MAChC;AAEA,WAAK,iBAAiB,UAAU,EAAE;AAClC,SAAG,SAAS;AACZ,YAAM,IAAI,EAAE;AAAA,IACd,CAAC,EAAE,OAAO,SAAU,WAAW;AAC7B,UAAI,KAAK,QAAQ,iBAAiB,SAAS;AAC3C,YAAM,yBAAyB,IAAI,aAAa,SAAS;AAAA,IAC3D,CAAC,EAAE,QAAQ;AACX,QAAI,UAAU,KAAK,qBAAqB,KAAK,mBAAmB,IAAI,cAAM;AAC1E,YAAQ,UAAU;AAElB,aAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,EAAE,GAAG;AACrC,cAAQ,IAAI,MAAM,EAAE;AAAA,IACtB;AAEA,UAAM,IAAI,OAAO;AACjB,SAAK,iBAAiB;AACtB,SAAK,QAAQ;AAAA,EACf;AAEA,EAAAD,SAAQ,UAAU,eAAe,SAAU,aAAa,SAAS,KAAK;AACpE,SAAK,OAAO;AAEZ,gBAAY,aAAa,KAAK,KAAK;AAEnC,SAAK,iBAAiB,WAAW;AAAA,EACnC;AAEA,EAAAA,SAAQ,UAAU,0BAA0B,SAAU,QAAQ,aAAa;AACzE,SAAK,kBAAkB;AAEvB,gBAAY,aAAa,KAAK,OAAO,KAAK,iBAAiB,IAAI;AAAA,EACjE;AAEA,EAAAA,SAAQ,UAAU,mBAAmB,SAAU,aAAa;AAE1D,QAAI,WAAW,YAAY,IAAI,QAAQ,IAAI,KAAK,eAAe,YAAY,kBAAkB,OAAO,WAAW;AAC/G,QAAI,QAAQ,KAAK;AAEjB,QAAI,UAAU;AACZ,YAAM,YAAY,QAAQ;AAAA,IAC5B,OAAO;AACL,YAAM,eAAe;AAAA,IACvB;AAAA,EACF;AAEA,EAAAA,SAAQ,UAAU,sBAAsB,SAAU,iBAAiB,MAAM,KAAK;AAC5E,QAAI,QAAQ;AAGZ,QAAI,CAAC,KAAK,MAAM,GAAG;AACjB;AAAA,IACF;AAEA,QAAI,WAAW,gBAAgB;AAE/B,QAAI,KAAK,eAAe;AACtB,WAAK,kBAAkB,MAAM,iBAAiB,GAAG;AAEjD,WAAK,gBAAgB;AAAA,IACvB,OAAO;AACL,UAAI,iBAAiB,SAAU,KAAK;AAClC,YAAI,KAAK,KAAK,iBAAiB,GAAG;AAClC,YAAI,QAAQ,MAAM,GAAG;AACrB,eAAO,SAEP,KAAK,IAAI,SAAS,aAAa,IAAI,MAAM,SAAS,MAAM,KAAK,KAC1D;AAAA,MACL;AAEA,WAAK,cAAc,WAAY;AAC7B,cAAM,0BAA0B,MAAM,gBAAgB,UAAU,GAAG;AAAA,MACrE;AAEA,UAAI,MAAM,EAAE,GAAG,YAAY,KAAK,WAAW;AAAA,IAC7C;AAAA,EACF;AAEA,EAAAA,SAAQ,UAAU,YAAY,SAAU,MAAM,UAAU,cAAc;AACpE,QAAI,OAAO,CAAC;AACZ,SAAK,KAAK,KAAK,aAAa,SAAS,GAAG,GAAG,SAAU,eAAe,SAAS;AAC3E,UAAI,cAAc,aAAa,OAAO;AACtC,oBAAc,eAAe,OAAO,MAAM;AAC1C,WAAK,KAAK;AAAA,QACR,WAAW;AAAA,QACX;AAAA,QACA;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AACD,SAAK,KAAK,SAAU,GAAG,GAAG;AAExB,aAAO,EAAE,cAAc,EAAE;AAAA,IAC3B,CAAC;AACD,WAAO;AAAA,MACL,gBAAgB,IAAI,MAAM,SAAU,MAAM;AACxC,eAAO,KAAK;AAAA,MACd,CAAC;AAAA,IACH;AAAA,EACF;AAEA,EAAAA,SAAQ,UAAU,gCAAgC,SAAU,MAAM,cAAc,UAAU;AACxF,QAAIE,SAAQ,SAAS;AACrB,QAAI,iBAAiB,KAAK,aAAa,SAAS,GAAG;AACnD,QAAI,YAAY,OAAO;AAEvB,aAAS,UAAU,GAAGC,OAAMD,OAAM,eAAe,EAAE,WAAW,QAAQ,UAAUC,MAAK,EAAE,SAAS;AAC9F,UAAI,SAAS,KAAK,WAAW,gBAAgBD,OAAM,oBAAoB,OAAO,CAAC;AAC/E,UAAI,QAAQ,SAAS,IACnB,OAAO,YACP,aAAa,KAAK,gBAAgB,MAAM,CAAC;AAE3C,UAAI,QAAQ,WAAW;AACrB,eAAO;AAAA,MACT;AAEA,kBAAY;AAAA,IACd;AAEA,WAAO;AAAA,EACT;AAQA,EAAAF,SAAQ,UAAU,0BAA0B,SAAU,WAAW,UAAU;AACzE,QAAIE,SAAQ,SAAS;AACrB,QAAI,SAASA,OAAM,UAAU;AAC7B,QAAI,UAAU,KAAK,IAAI,GAAG,OAAO,EAAE;AACnC,QAAI,UAAU,KAAK,IAAI,OAAO,IAAIA,OAAM,eAAe,EAAE,WAAW,SAAS,CAAC;AAE9E,WAAO,WAAW,SAAS,EAAE,SAAS;AACpC,UAAI,UAAU,eAAe,aAAaA,OAAM,oBAAoB,OAAO,GAAG;AAC5E,eAAO;AAAA,MACT;AAAA,IACF;AAAA,EACF;AAEA,EAAAF,SAAQ,UAAU,4BAA4B,SAAU,MAAM,cAAc,UAAU,KAAK;AACzF,QAAI,CAAC,KAAK,8BAA8B,MAAM,cAAc,QAAQ,GAAG;AACrE;AAAA,IACF;AAEA,QAAI,WAAW,KAAK,UAAU,MAAM,UAAU,YAAY;AAE1D,QAAI,KAAK,wBAAwB,UAAU,QAAQ,GAAG;AACpD,WAAK,0BAA0B,GAAG;AAElC,UAAI,eAAe;AAAA,QACjB,MAAM;AAAA,QACN,eAAe,SAAS,MAAM;AAAA,QAC9B,QAAQ,SAAS;AAAA,QACjB;AAAA,MACF,CAAC;AAAA,IACH;AAAA,EACF;AAEA,EAAAA,SAAQ,UAAU,oBAAoB,SAAU,MAAM,iBAAiB,KAAK;AAC1E,QAAI,WAAW,gBAAgB;AAE/B,QAAI,aAAa,KAAK,UAAU,MAAM,UAAU,SAAU,SAAS;AACjE,aAAO,KAAK,IAAI,KAAK,aAAa,gBAAgB,UAAU,GAAG,GAAG,OAAO;AAAA,IAC3E,CAAC;AAED,QAAI,eAAe;AAAA,MACjB,MAAM;AAAA,MACN,eAAe,SAAS,MAAM;AAAA,MAC9B,YAAY;AAAA,MACZ,QAAQ,SAAS;AAAA,MACjB,UAAU;AAAA,IACZ,CAAC;AAAA,EACH;AAEA,EAAAA,SAAQ,UAAU,SAAS,SAAU,SAAS,KAAK;AACjD,SAAK,OAAO,KAAK,MAAM;AAEvB,SAAK,0BAA0B,GAAG;AAAA,EACpC;AAEA,EAAAA,SAAQ,UAAU,UAAU,SAAU,SAAS,KAAK;AAClD,SAAK,0BAA0B,GAAG;AAAA,EACpC;AAEA,EAAAA,SAAQ,UAAU,4BAA4B,SAAU,KAAK;AAC3D,QAAI,KAAK,aAAa;AACpB,UAAI,MAAM,EAAE,IAAI,YAAY,KAAK,WAAW;AAC5C,WAAK,cAAc;AAAA,IACrB;AAAA,EACF;AAEA,EAAAA,SAAQ,UAAU,SAAS,SAAU,OAAO;AAC1C,QAAI,QAAQ,KAAK;AACjB,QAAI,OAAO,KAAK;AAEhB,QAAI,SAAS,MAAM,mBAAmB,KAAK,QAAQ,CAAC,KAAK,cAAc;AACrE,WAAK,kBAAkB;AAEvB,WAAK,iBAAiB,CAAC;AACvB,WAAK,kBAAkB,SAAU,IAAI;AACnC,iCAAyB,IAAI,OAAO,UAAU,EAAE,EAAE,SAAS;AAAA,MAC7D,CAAC;AAAA,IACH,OAAO;AACL,YAAM,UAAU;AAAA,IAClB;AAEA,SAAK,QAAQ;AACb,SAAK,gBAAgB;AAAA,EACvB;AAEA,EAAAA,SAAQ,UAAU,oBAAoB,WAAY;AAChD,SAAK,MAAM,OAAO,KAAK,gBAAgB;AACvC,SAAK,mBAAmB;AAAA,EAC1B;AAEA,EAAAA,SAAQ,OAAO;AACf,SAAOA;AACT,EAAE,aAAS;AAEX,IAAI,OAAO;AAAA,EACT,aAAa,SAAU,sBAAsBC,SAAQ;AACnD,QAAI,YAAYA,QAAO,QAAQ,IAAI,KAAK;AACxC,QAAI,aAAaA,QAAO,SAAS,IAAI,KAAK;AAE1C,QAAI,YAAY,GAAG;AACjB,MAAAA,QAAO,KAAKA,QAAO;AACnB,MAAAA,QAAO,QAAQ,CAACA,QAAO;AAAA,IACzB;AAEA,QAAI,aAAa,GAAG;AAClB,MAAAA,QAAO,KAAKA,QAAO;AACnB,MAAAA,QAAO,SAAS,CAACA,QAAO;AAAA,IAC1B;AAEA,QAAI,aAAa,qBAAqB,IAAI,qBAAqB;AAC/D,QAAI,aAAa,qBAAqB,IAAI,qBAAqB;AAC/D,QAAI,IAAIH,SAAQG,QAAO,GAAG,qBAAqB,CAAC;AAChD,QAAI,KAAKF,SAAQE,QAAO,IAAIA,QAAO,OAAO,UAAU;AACpD,QAAI,IAAIH,SAAQG,QAAO,GAAG,qBAAqB,CAAC;AAChD,QAAI,KAAKF,SAAQE,QAAO,IAAIA,QAAO,QAAQ,UAAU;AACrD,QAAI,WAAW,KAAK;AACpB,QAAI,WAAW,KAAK;AAKpB,IAAAA,QAAO,IAAI,YAAY,IAAI,aAAa,KAAK;AAC7C,IAAAA,QAAO,IAAI,YAAY,IAAI,aAAa,KAAK;AAC7C,IAAAA,QAAO,QAAQ,WAAW,IAAI,KAAK;AACnC,IAAAA,QAAO,SAAS,WAAW,IAAI,KAAK;AAEpC,QAAI,YAAY,GAAG;AACjB,MAAAA,QAAO,KAAKA,QAAO;AACnB,MAAAA,QAAO,QAAQ,CAACA,QAAO;AAAA,IACzB;AAEA,QAAI,aAAa,GAAG;AAClB,MAAAA,QAAO,KAAKA,QAAO;AACnB,MAAAA,QAAO,SAAS,CAACA,QAAO;AAAA,IAC1B;AAEA,WAAO,YAAY;AAAA,EACrB;AAAA,EACA,OAAO,SAAU,kBAAkBA,SAAQ;AACzC,QAAI,QAAQA,QAAO,MAAMA,QAAO,IAAI,IAAI;AAExC,QAAI,QAAQ,GAAG;AACb,UAAI,MAAMA,QAAO;AACjB,MAAAA,QAAO,IAAIA,QAAO;AAClB,MAAAA,QAAO,KAAK;AAAA,IACd;AAEA,QAAI,IAAIF,SAAQE,QAAO,GAAG,iBAAiB,CAAC;AAC5C,QAAI,KAAKH,SAAQG,QAAO,IAAI,iBAAiB,EAAE;AAC/C,IAAAA,QAAO,IAAI;AACX,IAAAA,QAAO,KAAK;AACZ,QAAI,UAAU,IAAI,KAAK;AAEvB,QAAI,QAAQ,GAAG;AACb,UAAI,MAAMA,QAAO;AACjB,MAAAA,QAAO,IAAIA,QAAO;AAClB,MAAAA,QAAO,KAAK;AAAA,IACd;AAEA,WAAO;AAAA,EACT;AACF;AACA,IAAI,iBAAiB;AAAA,EACnB,aAAa,SAAU,aAAa,MAAM,UAAUA,SAAQ,cAAc,gBAAgB,WAAW,UAAU,UAAU;AACvH,QAAI,OAAO,IAAI,aAAK;AAAA,MAClB,OAAO,OAAO,CAAC,GAAGA,OAAM;AAAA,MACxB,IAAI;AAAA,IACN,CAAC;AACD,SAAK,cAAc;AACnB,SAAK,OAAO;AAEZ,QAAI,gBAAgB;AAClB,UAAI,YAAY,KAAK;AACrB,UAAI,kBAAkB,eAAe,WAAW;AAChD,gBAAU,mBAAmB;AAAA,IAC/B;AAEA,WAAO;AAAA,EACT;AAAA,EACA,OAAO,SAAU,aAAa,MAAM,UAAUA,SAAQ,UAAU,gBAAgB,WAAW,UAAU,UAAU;AAC7G,QAAI,aAAa,CAAC,YAAY,WAAW,kBAAU;AACnD,QAAI,SAAS,IAAI,WAAW;AAAA,MAC1B,OAAOA;AAAA,MACP,IAAI;AAAA,IACN,CAAC;AACD,WAAO,OAAO;AACd,QAAI,cAAc,2BAA2B,QAAQ;AACrD,WAAO,wBAAwB,kCAAkC,aAAa;AAAA,MAC5E,YAAY,eAAe;AAAA,IAC7B,CAAC;AAED,QAAI,gBAAgB;AAClB,UAAI,cAAc,OAAO;AACzB,UAAI,kBAAkB,WAAW,MAAM;AACvC,UAAI,gBAAgB,CAAC;AACrB,kBAAY,mBAAmB,WAAWA,QAAO,KAAKA,QAAO;AAC7D,oBAAc,mBAAmBA,QAAO;AACxC,OAAC,WAAW,cAAc,WAAW,QAAQ;AAAA,QAC3C,OAAO;AAAA,MAET,GAAG,cAAc;AAAA,IACnB;AAEA,WAAO;AAAA,EACT;AACF;AAEA,SAAS,mBAAmB,aAAa,UAAU;AACjD,MAAI,qBAAqB,YAAY,IAAI,gBAAgB,IAAI;AAC7D,MAAI,WAAW,SAAS,YAAY;AAEpC,MAAI,MAAuC;AACzC,QAAI,oBAAoB;AACtB,UAAI,SAAS,SAAS,YAAY;AAChC,aAAK,uFAAuF;AAAA,MAC9F;AAEA,UAAI,SAAS,SAAS,eAAe;AACnC,aAAK,6EAA6E;AAAA,MACpF;AAAA,IACF;AAAA,EACF;AAEA,MAAI,sBAAsB,SAAS,SAAS,cAAc,SAAS,SAAS,eAAe;AACzF,WAAO;AAAA,MACL;AAAA,MACA,WAAW,SAAS,aAAa,QAAQ;AAAA,IAC3C;AAAA,EACF;AACF;AAEA,SAAS,wBAAwB,iBAAiB,sBAAsB,IAAIA,SAAQ,UAAU,cAAc,UAAU,eAAe;AACnI,MAAI;AACJ,MAAI;AAEJ,MAAI,cAAc;AAChB,iBAAa;AAAA,MACX,GAAGA,QAAO;AAAA,MACV,OAAOA,QAAO;AAAA,IAChB;AACA,mBAAe;AAAA,MACb,GAAGA,QAAO;AAAA,MACV,QAAQA,QAAO;AAAA,IACjB;AAAA,EACF,OAAO;AACL,iBAAa;AAAA,MACX,GAAGA,QAAO;AAAA,MACV,QAAQA,QAAO;AAAA,IACjB;AACA,mBAAe;AAAA,MACb,GAAGA,QAAO;AAAA,MACV,OAAOA,QAAO;AAAA,IAChB;AAAA,EACF;AAEA,MAAI,CAAC,eAAe;AAGlB,KAAC,WAAW,cAAc,WAAW,IAAI;AAAA,MACvC,OAAO;AAAA,IACT,GAAG,sBAAsB,UAAU,IAAI;AAAA,EACzC;AAEA,MAAI,qBAAqB,uBAAuB,gBAAgB,SAAS,QAAQ;AACjF,GAAC,WAAW,cAAc,WAAW,IAAI;AAAA,IACvC,OAAO;AAAA,EACT,GAAG,oBAAoB,QAAQ;AACjC;AAEA,SAAS,wBAAwB,KAAK,OAAO;AAC3C,WAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACrC,QAAI,CAAC,SAAS,IAAI,MAAM,GAAG,GAAG;AAC5B,aAAO;AAAA,IACT;AAAA,EACF;AAEA,SAAO;AACT;AAEA,IAAI,eAAe,CAAC,KAAK,KAAK,SAAS,QAAQ;AAC/C,IAAI,gBAAgB,CAAC,MAAM,MAAM,KAAK,cAAc,UAAU;AAC9D,IAAI,gBAAgB;AAAA,EAClB,aAAa,SAAUA,SAAQ;AAC7B,WAAO,CAAC,wBAAwBA,SAAQ,YAAY;AAAA,EACtD;AAAA,EACA,OAAO,SAAUA,SAAQ;AACvB,WAAO,CAAC,wBAAwBA,SAAQ,aAAa;AAAA,EACvD;AACF;AACA,IAAI,YAAY;AAAA,EAGd,aAAa,SAAU,MAAM,WAAW,WAAW;AACjD,QAAIA,UAAS,KAAK,cAAc,SAAS;AACzC,QAAI,iBAAiB,YAAY,aAAa,WAAWA,OAAM,IAAI;AAEnE,QAAI,QAAQA,QAAO,QAAQ,IAAI,IAAI;AACnC,QAAI,QAAQA,QAAO,SAAS,IAAI,IAAI;AACpC,WAAO;AAAA,MACL,GAAGA,QAAO,IAAI,QAAQ,iBAAiB;AAAA,MACvC,GAAGA,QAAO,IAAI,QAAQ,iBAAiB;AAAA,MACvC,OAAOA,QAAO,QAAQ,QAAQ;AAAA,MAC9B,QAAQA,QAAO,SAAS,QAAQ;AAAA,IAClC;AAAA,EACF;AAAA,EACA,OAAO,SAAU,MAAM,WAAW,WAAW;AAC3C,QAAIA,UAAS,KAAK,cAAc,SAAS;AACzC,WAAO;AAAA,MACL,IAAIA,QAAO;AAAA,MACX,IAAIA,QAAO;AAAA,MACX,IAAIA,QAAO;AAAA,MACX,GAAGA,QAAO;AAAA,MACV,YAAYA,QAAO;AAAA,MACnB,UAAUA,QAAO;AAAA,MACjB,WAAWA,QAAO;AAAA,IACpB;AAAA,EACF;AACF;AAEA,SAAS,cAAcA,SAAQ;AAC7B,SAAOA,QAAO,cAAc,QAAQA,QAAO,YAAY,QAAQA,QAAO,eAAeA,QAAO;AAC9F;AAEA,SAAS,2BAA2B,UAAU;AAC5C,SAAO,SAAUG,WAAU;AACzB,QAAI,aAAaA,YAAW,QAAQ;AACpC,WAAO,SAAUC,WAAU;AACzB,cAAQA,WAAU;AAAA,QAChB,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AACH,iBAAOA,YAAW;AAAA,QAEpB;AACE,iBAAOA;AAAA,MACX;AAAA,IACF;AAAA,EACF,EAAE,QAAQ;AACZ;AAEA,SAAS,YAAY,IAAI,MAAM,WAAW,WAAWJ,SAAQ,aAAa,sBAAsB,SAAS;AACvG,MAAI,QAAQ,KAAK,cAAc,WAAW,OAAO;AAEjD,MAAI,CAAC,SAAS;AACZ,QAAI,eAAe,UAAU,IAAI,CAAC,aAAa,cAAc,CAAC,KAAK;AACnE,OAAG,SAAS,KAAK,YAAY;AAAA,EAC/B,WAAW,CAAC,YAAY,IAAI,UAAU,GAAG;AACvC,QAAI,cAAc,GAAG;AACrB,QAAI,eAAe,sBAAsB,UAAU,SAAS,WAAW,GAAG,aAAa,IAAI;AAC3F,WAAO,aAAa,YAAY;AAChC,OAAG,SAAS,WAAW;AAAA,EACzB;AAEA,KAAG,SAAS,KAAK;AACjB,MAAI,cAAc,UAAU,WAAW,QAAQ;AAC/C,iBAAe,GAAG,KAAK,UAAU,WAAW;AAC5C,MAAI,uBAAuB,UAAU,uBAAuBA,QAAO,KAAKA,QAAO,KAAK,WAAW,aAAaA,QAAO,YAAYA,QAAO,aAAa,aAAa,eAAe,uBAAuBA,QAAO,UAAU,IAAI,WAAW,QAAQA,QAAO,SAAS,IAAI,UAAU;AAC5Q,MAAI,oBAAoB,qBAAqB,SAAS;AACtD,gBAAc,IAAI,mBAAmB;AAAA,IACnC,cAAc;AAAA,IACd,gBAAgB;AAAA,IAChB,aAAa,gBAAgB,YAAY,QAAQ,GAAG,SAAS;AAAA,IAC7D,cAAc,MAAM;AAAA,IACpB,gBAAgB,MAAM;AAAA,IACtB,wBAAwB;AAAA,EAC1B,CAAC;AACD,MAAI,QAAQ,GAAG,eAAe;AAE9B,MAAI,WAAW,OAAO;AACpB,QAAII,YAAW,UAAU,IAAI,CAAC,SAAS,UAAU,CAAC;AAClD,OAAG,WAAW,SAASA,cAAa,WAAW,OAAO;AACtD,0BAAsB,IAAIA,cAAa,YAAY,uBAAuBA,WAAU,2BAA2B,oBAAoB,GAAG,UAAU,IAAI,CAAC,SAAS,QAAQ,CAAC,CAAC;AAAA,EAC1K;AAEA,yBAAuB,OAAO,mBAAmB,YAAY,YAAY,SAAS,GAAG,SAAU,OAAO;AACpG,WAAO,4BAA4B,MAAM,KAAK;AAAA,EAChD,CAAC;AACD,MAAI,gBAAgB,UAAU,SAAS,CAAC,UAAU,CAAC;AACnD,sBAAoB,IAAI,cAAc,IAAI,OAAO,GAAG,cAAc,IAAI,WAAW,GAAG,cAAc,IAAI,UAAU,CAAC;AACjH,2BAAyB,IAAI,SAAS;AAEtC,MAAI,cAAcJ,OAAM,GAAG;AACzB,OAAG,MAAM,OAAO;AAChB,OAAG,MAAM,SAAS;AAClB,SAAK,GAAG,QAAQ,SAAU,OAAO;AAC/B,UAAI,MAAM,OAAO;AACf,cAAM,MAAM,OAAO,MAAM,MAAM,SAAS;AAAA,MAC1C;AAAA,IACF,CAAC;AAAA,EACH;AACF;AAGA,SAAS,aAAa,WAAW,WAAW;AAE1C,MAAI,cAAc,UAAU,IAAI,CAAC,aAAa,aAAa,CAAC;AAE5D,MAAI,CAAC,eAAe,gBAAgB,QAAQ;AAC1C,WAAO;AAAA,EACT;AAEA,MAAI,YAAY,UAAU,IAAI,CAAC,aAAa,aAAa,CAAC,KAAK;AAE/D,MAAI,QAAQ,MAAM,UAAU,KAAK,IAAI,OAAO,YAAY,KAAK,IAAI,UAAU,KAAK;AAChF,MAAI,SAAS,MAAM,UAAU,MAAM,IAAI,OAAO,YAAY,KAAK,IAAI,UAAU,MAAM;AACnF,SAAO,KAAK,IAAI,WAAW,OAAO,MAAM;AAC1C;AAEA,IAAI,gBAEJ,WAAY;AACV,WAASK,iBAAgB;AAAA,EAAC;AAE1B,SAAOA;AACT,EAAE;AAEF,IAAI,YAEJ,SAAU,QAAQ;AAChB,YAAUC,YAAW,MAAM;AAE3B,WAASA,WAAU,MAAM;AACvB,QAAI,QAAQ,OAAO,KAAK,MAAM,IAAI,KAAK;AAEvC,UAAM,OAAO;AACb,WAAO;AAAA,EACT;AAEA,EAAAA,WAAU,UAAU,kBAAkB,WAAY;AAChD,WAAO,IAAI,cAAc;AAAA,EAC3B;AAEA,EAAAA,WAAU,UAAU,YAAY,SAAU,KAAK,OAAO;AAGpD,QAAI,SAAS,MAAM;AACnB,QAAI,aAAa,KAAK;AACtB,QAAI,cAAc,IAAI,KAAK;AAC3B,QAAI,aAAa,CAAC;AAClB,QAAI,OAAO,CAAC;AACZ,QAAI,WAAW,KAAK;AAEpB,aAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK,GAAG;AACzC,WAAK,cAAc;AACnB,WAAK,eAAe,OAAO,IAAI;AAC/B,iBAAW,cAAc,OAAO,IAAI;AACpC,iBAAW,eAAe,OAAO,IAAI;AACrC,UAAI,KAAK,WAAW,IAAI,WAAW,IAAI,KAAK,IAAI,KAAK,EAAE;AAAA,IACzD;AAAA,EACF;AAEA,SAAOA;AACT,EAAE,YAAI;AAEN,SAAS,YAAY,aAAa,OAAO,gBAAgB,aAAa;AAEpE,MAAI,OAAO,YAAY,QAAQ;AAC/B,MAAI,aAAa,KAAK,UAAU,qBAAqB,IAAI,IAAI;AAC7D,MAAI,mBAAmB,KAAK,UAAU,kBAAkB;AACxD,MAAI,WAAW,KAAK,UAAU,MAAM;AACpC,MAAI,kBAAkB,YAAY,SAAS,iBAAiB;AAC5D,MAAI,WAAW,KAAK,UAAU,uBAAuB;AAErD,MAAI,UAAU;AACZ,QAAI,OAAO,IAAI,UAAU;AAAA,MACvB,OAAO;AAAA,QACL,QAAQ;AAAA,MACV;AAAA,MACA,aAAa,CAAC,CAAC;AAAA,MACf,QAAQ;AAAA,MACR,IAAI;AAAA,IACN,CAAC;AACD,SAAK,aAAa;AAClB,SAAK,mBAAmB;AACxB,SAAK,WAAW;AAChB,SAAK,SAAS,gBAAgB,aAAa,CAAC;AAC5C,UAAM,IAAI,IAAI;AACd,sBAAkB,eAAe,KAAK,IAAI;AAAA,EAC5C;AAEA,MAAI,KAAK,IAAI,UAAU;AAAA,IACrB,OAAO;AAAA,MACL,QAAQ,KAAK,UAAU,aAAa;AAAA,IACtC;AAAA,IACA,aAAa,CAAC,CAAC;AAAA,IACf,qBAAqB;AAAA,IACrB,IAAI;AAAA,EACN,CAAC;AACD,KAAG,aAAa;AAChB,KAAG,mBAAmB;AACtB,KAAG,WAAW;AACd,QAAM,IAAI,EAAE;AACZ,KAAG,SAAS,KAAK,UAAU,OAAO,CAAC;AAEnC,YAAU,EAAE,EAAE,cAAc,YAAY;AAExC,MAAI,CAAC,YAAY,IAAI,QAAQ,GAAG;AAC9B,OAAG,GAAG,aAAa,wBAAwB;AAC3C,OAAG,GAAG,aAAa,wBAAwB;AAAA,EAC7C;AAEA,oBAAkB,eAAe,KAAK,EAAE;AAC1C;AAGA,IAAI,2BAA2B,SAAS,SAAU,OAAO;AACvD,MAAI,YAAY;AAChB,MAAI,YAAY,uBAAuB,WAAW,MAAM,SAAS,MAAM,OAAO;AAC9E,YAAU,SAAS,EAAE,YAAY,aAAa,IAAI,YAAY;AAChE,GAAG,IAAI,KAAK;AAEZ,SAAS,uBAAuB,WAAW,GAAG,GAAG;AAC/C,MAAI,aAAa,UAAU;AAC3B,MAAI,cAAc,IAAI;AACtB,MAAI,SAAS,UAAU,MAAM;AAC7B,MAAI,mBAAmB,UAAU;AACjC,MAAI,aAAa,CAAC;AAClB,MAAI,OAAO,CAAC;AACZ,MAAI,WAAW,UAAU;AAEzB,WAAS,IAAI,GAAGJ,OAAM,OAAO,SAAS,GAAG,IAAIA,MAAK,KAAK;AACrD,QAAI,KAAK,IAAI;AACb,SAAK,cAAc;AACnB,SAAK,eAAe,OAAO,KAAK;AAChC,eAAW,cAAc,OAAO,KAAK;AACrC,eAAW,eAAe,OAAO,KAAK;AAEtC,QAAI,KAAK,eAAe,GAAG;AACzB,iBAAW,gBAAgB,KAAK;AAChC,WAAK,eAAe,CAAC,KAAK;AAAA,IAC5B;AAEA,QAAI,KAAK,WAAW,MAAM,KAAK,WAAW,KAAK,KAAK,MAAM,KAAK,WAAW,MAAM,KAAK,WAAW,KAAK,KAAK,IAAI;AAC5G,aAAO,iBAAiB;AAAA,IAC1B;AAAA,EACF;AAEA,SAAO;AACT;AAEA,SAAS,sBAAsB,sBAAsBF,SAAQ,OAAO;AAClE,MAAI,uBAAuB,OAAO,aAAa,GAAG;AAChD,QAAI,YAAYA;AAChB,QAAI,cAAc,MAAM,QAAQ;AAChC,WAAO;AAAA,MACL,GAAG,uBAAuB,UAAU,IAAI,YAAY;AAAA,MACpD,GAAG,uBAAuB,YAAY,IAAI,UAAU;AAAA,MACpD,OAAO,uBAAuB,UAAU,QAAQ,YAAY;AAAA,MAC5D,QAAQ,uBAAuB,YAAY,SAAS,UAAU;AAAA,IAChE;AAAA,EACF,OAAO;AACL,QAAI,cAAc,MAAM,QAAQ;AAChC,QAAI,cAAcA;AAClB,WAAO;AAAA,MACL,IAAI,YAAY;AAAA,MAChB,IAAI,YAAY;AAAA,MAChB,IAAI,uBAAuB,YAAY,KAAK,YAAY;AAAA,MACxD,GAAG,uBAAuB,YAAY,IAAI,YAAY;AAAA,MACtD,YAAY,uBAAuB,YAAY,aAAa;AAAA,MAC5D,UAAU,uBAAuB,YAAY,WAAW,KAAK,KAAK;AAAA,IACpE;AAAA,EACF;AACF;AAEA,SAAS,mBAAmB,OAAO,sBAAsBA,SAAQ;AAC/D,MAAI,aAAa,MAAM,SAAS,UAAU,iBAAS;AACnD,SAAO,IAAI,WAAW;AAAA,IACpB,OAAO,sBAAsB,sBAAsBA,SAAQ,KAAK;AAAA,IAChE,QAAQ;AAAA,IACR,IAAI;AAAA,EACN,CAAC;AACH;AAEA,IAAO,kBAAQ;;;ACn+BR,SAASO,SAAQ,WAAW;AACjC,YAAU,kBAAkB,eAAO;AACnC,YAAU,oBAAoB,iBAAS;AACvC,YAAU,eAAe,UAAU,SAAS,OAAO,QAAe,MAAM,QAAQ,KAAK,CAAC;AAEtF,YAAU,eAAe,UAAU,SAAS,OAAO,oBAAoB,wBAAwB,KAAK,CAAC;AAErG,YAAU,kBAAkB,UAAU,SAAS,UAAU,WAAW,WAAW,KAAK,CAAC;AAWrF,YAAU,eAAe;AAAA,IACvB,MAAM;AAAA,IACN,OAAO;AAAA,IACP,QAAQ;AAAA,EACV,GAAG,SAAU,SAAS,SAAS;AAC7B,QAAI,gBAAgB,QAAQ,iBAAiB;AAC7C,YAAQ,cAAc;AAAA,MACpB,UAAU;AAAA,MACV,OAAO;AAAA,IACT,GAAG,SAAU,gBAAgB;AAC3B,UAAI,QAAQ,UAAU;AACpB,uBAAe,KAAK,oBAAoB,QAAQ,QAAQ;AAAA,MAC1D;AAAA,IACF,CAAC;AAAA,EACH,CAAC;AACH;;;ACnCA,IAAI,MAAM,KAAK,KAAK;AACpB,IAAI,SAAS,KAAK,KAAK;AAEvB,SAAS,YAAY,aAAa,KAAK;AACrC,SAAc,cAAc,YAAY,mBAAmB,GAAG;AAAA,IAC5D,OAAO,IAAI,SAAS;AAAA,IACpB,QAAQ,IAAI,UAAU;AAAA,EACxB,CAAC;AACH;AAEO,SAAS,kBAAkB,aAAa,KAAK;AAClD,MAAI,WAAW,YAAY,aAAa,GAAG;AAE3C,MAAIC,UAAS,YAAY,IAAI,QAAQ;AACrC,MAAI,SAAS,YAAY,IAAI,QAAQ;AAErC,MAAI,CAAQ,QAAQ,MAAM,GAAG;AAC3B,aAAS,CAAC,GAAG,MAAM;AAAA,EACrB;AAEA,MAAI,QAAQC,cAAa,SAAS,OAAO,IAAI,SAAS,CAAC;AACvD,MAAI,SAASA,cAAa,SAAS,QAAQ,IAAI,UAAU,CAAC;AAC1D,MAAI,OAAO,KAAK,IAAI,OAAO,MAAM;AACjC,MAAI,KAAKA,cAAa,OAAO,IAAI,OAAO,CAAC;AACzC,MAAI,IAAIA,cAAa,OAAO,IAAI,OAAO,CAAC;AACxC,MAAI;AACJ,MAAI;AACJ,MAAI,WAAW,YAAY;AAE3B,MAAI,UAAU;AAEZ,QAAI,QAAQ,SAAS,YAAYD,OAAM;AACvC,SAAK,MAAM,MAAM;AACjB,SAAK,MAAM,MAAM;AAAA,EACnB,OAAO;AACL,QAAI,CAAQ,QAAQA,OAAM,GAAG;AAC3B,MAAAA,UAAS,CAACA,SAAQA,OAAM;AAAA,IAC1B;AAEA,SAAKC,cAAaD,QAAO,IAAI,KAAK,IAAI,SAAS;AAC/C,SAAKC,cAAaD,QAAO,IAAI,MAAM,IAAI,SAAS;AAAA,EAClD;AAEA,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF;AACF;AACe,SAAR,UAA2B,YAAY,SAAS,KAAK;AAC1D,UAAQ,iBAAiB,YAAY,SAAU,aAAa;AAC1D,QAAI,OAAO,YAAY,QAAQ;AAC/B,QAAI,WAAW,KAAK,aAAa,OAAO;AACxC,QAAI,WAAW,YAAY,aAAa,GAAG;AAE3C,QAAI,KAAK,kBAAkB,aAAa,GAAG,GACvC,KAAK,GAAG,IACR,KAAK,GAAG,IACR,IAAI,GAAG,GACP,KAAK,GAAG;AAEZ,QAAI,aAAa,CAAC,YAAY,IAAI,YAAY,IAAI;AAClD,QAAI,WAAW,YAAY,IAAI,UAAU,IAAI;AAC7C,QAAI,iBAAiB;AACrB,SAAK,KAAK,UAAU,SAAU,OAAO;AACnC,OAAC,MAAM,KAAK,KAAK;AAAA,IACnB,CAAC;AACD,QAAIE,OAAM,KAAK,OAAO,QAAQ;AAE9B,QAAI,aAAa,KAAK,MAAMA,QAAO,kBAAkB;AACrD,QAAI,YAAY,YAAY,IAAI,WAAW;AAC3C,QAAI,WAAW,YAAY,IAAI,UAAU;AACzC,QAAI,mBAAmB,YAAY,IAAI,kBAAkB;AAEzD,QAAI,SAAS,KAAK,cAAc,QAAQ;AACxC,WAAO,KAAK;AAEZ,QAAI,YAAY;AAChB,QAAI,6BAA6B;AACjC,QAAI,eAAe;AACnB,QAAI,MAAM,YAAY,IAAI;AAC1B,SAAK,UAAU;AAAA,MACb;AAAA,MACA;AAAA,IACF,CAAC;AACD,SAAK,KAAK,UAAU,SAAU,OAAO,KAAK;AACxC,UAAI;AAEJ,UAAI,MAAM,KAAK,GAAG;AAChB,aAAK,cAAc,KAAK;AAAA,UACtB,OAAO;AAAA,UACP,YAAY;AAAA,UACZ,UAAU;AAAA,UACV;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA,GAAG,WAAW,MAAM;AAAA,QACtB,CAAC;AACD;AAAA,MACF;AAGA,UAAI,aAAa,QAAQ;AACvB,gBAAQA,SAAQ,KAAK,mBAAmB,aAAa,QAAQ;AAAA,MAC/D,OAAO;AACL,gBAAQ,MAAM;AAAA,MAChB;AAEA,UAAI,QAAQ,UAAU;AACpB,gBAAQ;AACR,qBAAa;AAAA,MACf,OAAO;AACL,sCAA8B;AAAA,MAChC;AAEA,UAAI,WAAW,eAAe,MAAM;AACpC,WAAK,cAAc,KAAK;AAAA,QACtB;AAAA,QACA,YAAY;AAAA,QACZ;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,GAAG,WAAW,UAAU,OAAO,QAAQ,CAAC,IAAI,CAAC,CAAC,IAAI;AAAA,MACpD,CAAC;AACD,qBAAe;AAAA,IACjB,CAAC;AAGD,QAAI,YAAY,OAAO,gBAAgB;AAGrC,UAAI,aAAa,MAAM;AACrB,YAAI,UAAU,MAAM;AACpB,aAAK,KAAK,UAAU,SAAU,OAAO,KAAK;AACxC,cAAI,CAAC,MAAM,KAAK,GAAG;AACjB,gBAAI,WAAW,KAAK,cAAc,GAAG;AACrC,qBAAS,QAAQ;AACjB,qBAAS,aAAa,aAAa,MAAM,MAAM;AAC/C,qBAAS,WAAW,aAAa,OAAO,MAAM,KAAK;AAAA,UACrD;AAAA,QACF,CAAC;AAAA,MACH,OAAO;AACL,qBAAa,YAAY;AACzB,uBAAe;AACf,aAAK,KAAK,UAAU,SAAU,OAAO,KAAK;AACxC,cAAI,CAAC,MAAM,KAAK,GAAG;AACjB,gBAAI,WAAW,KAAK,cAAc,GAAG;AACrC,gBAAI,QAAQ,SAAS,UAAU,WAAW,WAAW,QAAQ;AAC7D,qBAAS,aAAa;AACtB,qBAAS,WAAW,eAAe,MAAM;AACzC,4BAAgB,MAAM;AAAA,UACxB;AAAA,QACF,CAAC;AAAA,MACH;AAAA,IACF;AAAA,EACF,CAAC;AACH;;;ACnKe,SAAR,WAA4B,YAAY;AAC7C,SAAO;AAAA,IACL;AAAA,IACA,OAAO,SAAU,aAAa,SAAS;AACrC,UAAI,eAAe,QAAQ,eAAe;AAAA,QACxC,UAAU;AAAA,MACZ,CAAC;AAED,UAAI,CAAC,gBAAgB,CAAC,aAAa,QAAQ;AACzC;AAAA,MACF;AAEA,UAAI,OAAO,YAAY,QAAQ;AAC/B,WAAK,WAAW,SAAU,KAAK;AAC7B,YAAI,OAAO,KAAK,QAAQ,GAAG;AAE3B,iBAAS,IAAI,GAAG,IAAI,aAAa,QAAQ,KAAK;AAE5C,cAAI,CAAC,aAAa,GAAG,WAAW,IAAI,GAAG;AACrC,mBAAO;AAAA,UACT;AAAA,QACF;AAEA,eAAO;AAAA,MACT,CAAC;AAAA,IACH;AAAA,EACF;AACF;;;ACrBA,IAAIC,UAAS,KAAK,KAAK;AAEvB,SAAS,iBAAiB,MAAM,IAAI,IAAI,GAAG,KAAK,WAAW,YAAY,UAAU,SAAS,WAAW;AACnG,MAAI,KAAK,SAAS,GAAG;AACnB;AAAA,EACF;AAEA;AAEA,WAAS,wCAAwC,MAAM;AACrD,QAAI,KAAK,KAAK;AACd,QAAI,MAAM,KAAK;AAEf,aAASC,KAAI,GAAGA,KAAI,KAAK,KAAK,QAAQA,MAAK;AACzC,UAAI,OAAO,KAAK,KAAKA;AACrB,UAAI,KAAK,KAAK,IAAI,KAAK,MAAM,IAAI,EAAE;AAEnC,UAAI,KAAK,IAAI,KAAK;AAClB,UAAI,MAAM,KAAK;AAEf,UAAIC,MAAK,KAAK,MAAM,IAAI,KAAK,IAAI,KAAK,KAAK,GAAG,KAAK,GAAG;AACtD,UAAI,OAAO,MAAMA,MAAK,KAAK,QAAQ;AACnC,UAAI,SAAS,OAAO,KAAK,MAAM;AAC/B,UAAI,iBAAiB,KAAK,kBAAkB,SAAS;AAErD,yBAAmB,MAAM,gBAAgB,IAAI;AAC7C,WAAK,MAAM,IAAI;AAAA,IACjB;AAAA,EACF;AAGA,WAAS,aAAa,OAAO;AAE3B,QAAI,UAAU;AAAA,MACZ,MAAM,CAAC;AAAA,MACP,MAAM;AAAA,IACR;AACA,QAAI,aAAa;AAAA,MACf,MAAM,CAAC;AAAA,MACP,MAAM;AAAA,IACR;AAEA,aAASD,KAAI,GAAGA,KAAI,MAAM,QAAQA,MAAK;AACrC,UAAI,MAAMA,IAAG,iBAAiB,QAAQ;AACpC;AAAA,MACF;AAEA,UAAI,OAAO,MAAMA;AACjB,UAAI,OAAO,KAAK,MAAM,IAAI,KAAK,aAAa;AAC5C,UAAI,KAAK,KAAK,IAAI,KAAK,MAAM,IAAI,EAAE;AAEnC,UAAI,MAAM,KAAK,MAAM;AACnB,YAAIC,MAAK,KAAK,MAAM,IAAI,KAAK,KAAK,OAAO;AAEzC,YAAI,KAAK,IAAI,KAAK;AAElB,YAAI,KAAK,KAAK,IAAIA,GAAE,IAAI,KAAK,KAAK,KAAK,KAAK,MAAM,IAAIA,MAAKA,MAAK,KAAK,GAAG,IAAI;AAC5E,aAAK,KAAK;AACV,aAAK,OAAO;AAAA,MACd;AAEA,WAAK,KAAK,KAAK,IAAI;AAAA,IACrB;AAEA,4CAAwC,OAAO;AAC/C,4CAAwC,UAAU;AAAA,EACpD;AAEA,MAAIC,OAAM,KAAK;AAEf,WAAS,IAAI,GAAG,IAAIA,MAAK,KAAK;AAC5B,QAAI,KAAK,GAAG,aAAa,WAAW,KAAK,GAAG,iBAAiB,aAAa;AACxE,UAAI,KAAK,KAAK,GAAG,MAAM,IAAI;AAC3B,WAAK,GAAG,WAAW,GAAG,MAAM;AAC5B,WAAK,GAAG,MAAM,IAAI;AAAA,IACpB;AAAA,EACF;AAEA,MAAI,eAAe,MAAM,SAAS,UAAU,UAAU,GAAG;AACvD,iBAAa,IAAI;AAAA,EACnB;AACF;AAEA,SAAS,aAAa,iBAAiB,IAAI,IAAI,GAAG,WAAW,YAAY,UAAU,SAAS;AAC1F,MAAI,WAAW,CAAC;AAChB,MAAI,YAAY,CAAC;AACjB,MAAI,YAAY,OAAO;AACvB,MAAI,aAAa,CAAC,OAAO;AAEzB,WAAS,IAAI,GAAG,IAAI,gBAAgB,QAAQ,KAAK;AAC/C,QAAI,QAAQ,gBAAgB,GAAG;AAE/B,QAAI,iBAAiB,gBAAgB,EAAE,GAAG;AACxC;AAAA,IACF;AAEA,QAAI,MAAM,IAAI,IAAI;AAChB,kBAAY,KAAK,IAAI,WAAW,MAAM,CAAC;AACvC,eAAS,KAAK,gBAAgB,EAAE;AAAA,IAClC,OAAO;AACL,mBAAa,KAAK,IAAI,YAAY,MAAM,CAAC;AACzC,gBAAU,KAAK,gBAAgB,EAAE;AAAA,IACnC;AAAA,EACF;AAEA,WAAS,IAAI,GAAG,IAAI,gBAAgB,QAAQ,KAAK;AAC/C,QAAIC,UAAS,gBAAgB;AAE7B,QAAI,CAAC,iBAAiBA,OAAM,KAAKA,QAAO,YAAY;AAClD,UAAIA,QAAO,mBAAmB,MAAM;AAClC;AAAA,MACF;AAEA,UAAI,QAAQA,QAAO;AACnB,UAAI,aAAaA,QAAO;AACxB,UAAI,kBAAkB;AAEtB,UAAIA,QAAO,iBAAiB,QAAQ;AAClC,YAAI,MAAM,IAAI,IAAI;AAChB,4BAAkB,WAAW,GAAG,KAAKA,QAAO,gBAAgB,WAAWA,QAAO;AAAA,QAChF,OAAO;AACL,4BAAkB,WAAW,YAAYA,QAAO,eAAe,WAAW,GAAG,KAAKA,QAAO;AAAA,QAC3F;AAAA,MACF,WAAWA,QAAO,iBAAiB,aAAa;AAC9C,YAAI,MAAM,IAAI,IAAI;AAChB,4BAAkB,YAAY,WAAWA,QAAO;AAAA,QAClD,OAAO;AACL,4BAAkB,WAAW,YAAY,aAAaA,QAAO;AAAA,QAC/D;AAAA,MACF,OAAO;AACL,YAAI,MAAM,IAAI,IAAI;AAChB,4BAAkB,MAAM,IAAI,WAAWA,QAAO;AAAA,QAChD,OAAO;AACL,4BAAkB,WAAW,YAAY,MAAM,IAAIA,QAAO;AAAA,QAC5D;AAAA,MACF;AAEA,MAAAA,QAAO,kBAAkB;AACzB,yBAAmBA,SAAQ,eAAe;AAAA,IAC5C;AAAA,EACF;AAEA,mBAAiB,WAAW,IAAI,IAAI,GAAG,GAAG,WAAW,YAAY,UAAU,SAAS,UAAU;AAC9F,mBAAiB,UAAU,IAAI,IAAI,GAAG,IAAI,WAAW,YAAY,UAAU,SAAS,SAAS;AAE7F,WAAS,IAAI,GAAG,IAAI,gBAAgB,QAAQ,KAAK;AAC/C,QAAIA,UAAS,gBAAgB;AAE7B,QAAI,CAAC,iBAAiBA,OAAM,KAAKA,QAAO,YAAY;AAClD,UAAI,QAAQA,QAAO;AACnB,UAAI,aAAaA,QAAO;AACxB,UAAI,gBAAgBA,QAAO,iBAAiB;AAC5C,UAAI,UAAU,MAAM,MAAM;AAC1B,UAAI,WAAW,UAAU,QAAQ,KAAK,QAAQ,KAAK;AAEnD,UAAI,gBAAgB,MAAM,MAAM,kBAAkB,IAAI;AACtD,UAAI,gBAAgBA,QAAO,KAAK,QAAQ;AACxC,UAAIC,QAAO,WAAW,GAAG,KAAK,WAAW,GAAG;AAE5C,UAAI,eAAe;AACjB,YAAI,MAAM,IAAI,IAAI;AAChB,qBAAW,GAAG,KAAK,WAAWD,QAAO,eAAe,gBAAgBA,QAAO;AAAA,QAC7E,OAAO;AACL,qBAAW,GAAG,KAAK,WAAW,YAAYA,QAAO,eAAe,gBAAgBA,QAAO;AAAA,QACzF;AAAA,MACF,OAAO;AACL,YAAI,MAAM,IAAI,IAAI;AAChB,qBAAW,GAAG,KAAK,MAAM,IAAIA,QAAO;AAAA,QACtC,OAAO;AACL,qBAAW,GAAG,KAAK,MAAM,IAAIA,QAAO;AAAA,QACtC;AAEA,mBAAW,GAAG,KAAK,WAAW,GAAG,KAAKC;AAAA,MACxC;AAEA,iBAAW,GAAG,KAAK,WAAW,GAAG,KAAK,MAAM;AAAA,IAC9C;AAAA,EACF;AACF;AAaA,SAAS,mBAAmBD,SAAQ,gBAAgB,kBAAkB;AACpE,MAAI,qBAAqB,QAAQ;AAC/B,uBAAmB;AAAA,EACrB;AAEA,MAAIA,QAAO,mBAAmB,MAAM;AAElC;AAAA,EACF;AAEA,MAAI,QAAQA,QAAO;AACnB,MAAI,QAAQ,MAAM;AAClB,MAAI,WAAWA,QAAO;AACtB,MAAI,UAAU,MAAM;AACpB,MAAI,UAAU,MAAM;AACpB,MAAI,WAAW,UAAU,QAAQ,KAAK,QAAQ,KAAK;AACnD,MAAI,WAAW,MAAM;AAErB,MAAI,gBAAgB,SAAS,SAAS,UAAU,IAAI;AAEpD,MAAI,iBAAiB,iBAAiB,kBAAkB;AACtD,QAAI,YAAY,SAAS;AAEzB,QAAI,YAAY,SAAS,MAAM,OAAO,GAAG;AAGvC,YAAM,SAAS,mBAAmB,IAAI;AAEtC,YAAM,SAAS,SAAS,iBAAiB,QAAQ;AAEjD,UAAI,YAAY,MAAM,gBAAgB;AACtC,YAAM,SAAS,SAAS,KAAK,KAAK,UAAU,KAAK,CAAC;AAClD,YAAM,SAAS,mBAAmB,OAAO;AAAA,IAC3C,OAAO;AACL,UAAI,sBAAsB,iBAAiB;AAC3C,UAAI,WAAW,iBAAiB,gBAC9B,sBAEF,mBAAmB,sBAAsBA,QAAO,qBAG9C,OAGA,sBAEF;AACA,YAAM,SAAS,SAAS,QAAQ;AAAA,IAClC;AAEA,QAAI,UAAU,MAAM,gBAAgB;AACpC,aAAS,QAAQ,QAAQ;AACzB,QAAI,UAAU,MAAM,MAAM,UAAU,KAAK;AACzC,aAAS,SAAS,QAAQ,SAAS;AACnC,aAAS,MAAM,SAAS,SAAS,aAAa;AAAA,EAChD;AACF;AAEA,SAAS,iBAAiB,aAAa;AAErC,SAAO,YAAY,aAAa;AAClC;AAEe,SAAR,eAAgC,aAAa;AAClD,MAAI,OAAO,YAAY,QAAQ;AAC/B,MAAI,kBAAkB,CAAC;AACvB,MAAI;AACJ,MAAI;AACJ,MAAI,iBAAiB;AACrB,MAAI,sBAAsB,YAAY,IAAI,mBAAmB,KAAK,KAAKJ;AACvE,MAAI,WAAW,KAAK,UAAU,UAAU;AACxC,MAAI,IAAI,KAAK,UAAU,GAAG;AAC1B,MAAI,YAAY,SAAS;AACzB,MAAI,WAAW,SAAS;AACxB,MAAI,UAAU,SAAS;AACvB,MAAI,aAAa,SAAS;AAE1B,WAAS,WAAW,IAAI;AACtB,OAAG,SAAS;AAAA,EACd;AAEA,WAAS,aAAaM,QAAO;AAC3B,QAAI,CAACA,OAAM,QAAQ;AACjB,aAAO;AAAA,IACT;AAEA,aAAS,OAAOA,OAAM,QAAQ;AAC5B,UAAIA,OAAM,OAAO,KAAK,WAAW,OAAO;AACtC,eAAO;AAAA,MACT;AAAA,IACF;AAEA,WAAO;AAAA,EACT;AAEA,OAAK,KAAK,SAAU,KAAK;AACvB,QAAI,SAAS,KAAK,iBAAiB,GAAG;AACtC,QAAI,cAAc,OAAO;AACzB,QAAIA,SAAQ,OAAO,eAAe;AAClC,QAAIC,aAAY,OAAO,iBAAiB;AACxC,QAAI,YAAY,KAAK,aAAa,GAAG;AACrC,QAAI,aAAa,UAAU,SAAS,OAAO;AAE3C,QAAI,gBAAgB,WAAW,IAAI,UAAU,KAAK,UAAU,IAAI,CAAC,YAAY,SAAS,UAAU,CAAC;AACjG,QAAI,gBAAgB,WAAW,IAAI,qBAAqB;AACxD,QAAI,eAAe,WAAW,IAAI,SAAS;AAC3C,QAAI,eAAeC,cAAa,WAAW,IAAI,cAAc,GAAG,SAAS;AACzE,QAAI,cAAc,WAAW,IAAI,aAAa;AAC9C,QAAI,iBAAiB,UAAU,SAAS,WAAW;AACnD,QAAI,eAAe,eAAe,IAAI,QAAQ;AAC9C,mBAAeA,cAAa,cAAc,SAAS;AACnD,QAAI,gBAAgB,eAAe,IAAI,SAAS;AAChD,oBAAgBA,cAAa,eAAe,SAAS;AAErD,QAAI,KAAK,IAAI,YAAY,WAAW,YAAY,UAAU,IAAI,oBAAoB;AAChF,WAAKF,OAAM,QAAQ,UAAU;AAC7B,MAAAA,OAAM,SAAS;AAEf,UAAIC,YAAW;AACb,aAAKA,WAAU,QAAQ,UAAU;AACjC,QAAAA,WAAU,SAAS;AAAA,MACrB;AAEA;AAAA,IACF;AAEA,QAAI,CAAC,aAAaD,MAAK,GAAG;AACxB;AAAA,IACF;AAEA,QAAI,YAAY,YAAY,aAAa,YAAY,YAAY;AACjE,QAAI,KAAK,KAAK,IAAI,QAAQ;AAC1B,QAAI,KAAK,KAAK,IAAI,QAAQ;AAC1B,QAAI;AACJ,QAAI;AACJ,QAAIG;AACJ,QAAI;AACJ,SAAK,YAAY;AACjB,SAAK,YAAY;AACjB,QAAI,gBAAgB,kBAAkB,YAAY,kBAAkB;AAEpE,QAAI,kBAAkB,UAAU;AAC9B,cAAQ,YAAY;AACpB,cAAQ,YAAY;AACpB,kBAAY;AAAA,IACd,OAAO;AACL,UAAI,MAAM,iBAAiB,YAAY,IAAI,YAAY,MAAM,IAAI,KAAK,YAAY,IAAI,MAAM;AAC5F,UAAI,MAAM,iBAAiB,YAAY,IAAI,YAAY,MAAM,IAAI,KAAK,YAAY,IAAI,MAAM;AAC5F,cAAQ,KAAK,KAAK;AAClB,cAAQ,KAAK,KAAK;AAElB,UAAI,CAAC,eAAe;AAElB,YAAI,KAAK,KAAK,MAAM,eAAe,IAAI,YAAY;AACnD,YAAI,KAAK,KAAK,MAAM,eAAe,IAAI,YAAY;AACnD,YAAI,KAAK,MAAM,KAAK,IAAI,KAAK,KAAK;AAClC,YAAI,KAAK;AAET,YAAI,iBAAiB,QAAQ;AAE3B,kBAAQ,KAAK,IAAI,WAAW,eAAe,WAAW,YAAY;AAAA,QACpE,OAAO;AACL,kBAAQ,MAAM,KAAK,IAAI,CAAC,gBAAgB;AAAA,QAC1C;AAEA,gBAAQ;AACR,QAAAA,cAAa,CAAC,CAAC,IAAI,EAAE,GAAG,CAAC,IAAI,EAAE,GAAG,CAAC,IAAI,EAAE,CAAC;AAAA,MAC5C;AAEA,kBAAY,gBAAgB,WAAW,iBAAiB,SAAS,KAAK,IAAI,UAAU,SAAS,KAAK,IAAI,SAAS;AAAA,IACjH;AAEA,QAAIC,MAAK,KAAK;AACd,QAAI,cAAc;AAClB,QAAI,SAAS,WAAW,IAAI,QAAQ;AAEpC,QAAI,SAAS,MAAM,GAAG;AACpB,oBAAc,UAAUA,MAAK;AAAA,IAC/B,WAAW,kBAAkB,UAAU;AACrC,oBAAc;AAAA,IAChB,WAAW,WAAW,YAAY,WAAW,MAAM;AACjD,UAAI,cAAc,KAAK,IAAI,CAAC,WAAWA,MAAK,CAAC;AAC7C,oBAAc;AAAA,IAChB,WAAW,WAAW,gBAAgB,kBAAkB,aAAa,kBAAkB,SAAS;AAC9F,UAAI,MAAM,KAAK,MAAM,IAAI,EAAE;AAE3B,UAAI,MAAM,GAAG;AACX,cAAMA,MAAK,IAAI;AAAA,MACjB;AAEA,UAAI,SAAS,KAAK;AAElB,UAAI,QAAQ;AACV,cAAMA,MAAK;AAAA,MACb;AAEA,oBAAc,MAAMA;AAAA,IACtB;AAEA,qBAAiB,CAAC,CAAC;AACnB,IAAAJ,OAAM,IAAI;AACV,IAAAA,OAAM,IAAI;AACV,IAAAA,OAAM,WAAW;AACjB,IAAAA,OAAM,SAAS;AAAA,MACb,eAAe;AAAA,IACjB,CAAC;AAED,QAAI,CAAC,eAAe;AAClB,UAAI,WAAWA,OAAM,gBAAgB,EAAE,MAAM;AAC7C,eAAS,eAAeA,OAAM,qBAAqB,CAAC;AAEpD,UAAI,UAAUA,OAAM,MAAM,UAAU,KAAK;AACzC,eAAS,KAAK,SAAS;AACvB,eAAS,UAAU;AACnB,sBAAgB,KAAK;AAAA,QACnB,OAAOA;AAAA,QACP,WAAWC;AAAA,QACX,UAAU;AAAA,QACV,KAAK;AAAA,QACL,MAAM;AAAA,QACN,cAAc,eAAe,IAAI,cAAc;AAAA,QAC/C,iBAAiB,eAAe,IAAI,iBAAiB;AAAA,QACrD,eAAe,IAAI,cAAM,IAAI,EAAE;AAAA,QAC/B,YAAYE;AAAA,QACZ;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,MAAM;AAAA,QACN,oBAAoB,SAAS;AAAA,QAC7B,iBAAiBH,OAAM,MAAM;AAAA,MAC/B,CAAC;AAAA,IACH,OAAO;AACL,MAAAA,OAAM,SAAS;AAAA,QACb,OAAO;AAAA,MACT,CAAC;AACD,UAAIK,eAAcL,OAAM,OAAO;AAE/B,UAAIK,cAAa;AACf,QAAAA,aAAY,KAAKL,OAAM;AACvB,QAAAK,aAAY,KAAKL,OAAM;AAAA,MACzB;AAAA,IACF;AAEA,WAAO,cAAc;AAAA,MACnB,QAAQ;AAAA,IACV,CAAC;AAAA,EACH,CAAC;AAED,MAAI,CAAC,kBAAkB,YAAY,IAAI,mBAAmB,GAAG;AAC3D,iBAAa,iBAAiB,IAAI,IAAI,GAAG,WAAW,YAAY,UAAU,OAAO;AAAA,EACnF;AAEA,WAAS,IAAI,GAAG,IAAI,gBAAgB,QAAQ,KAAK;AAC/C,QAAIF,UAAS,gBAAgB;AAC7B,QAAI,QAAQA,QAAO;AACnB,QAAI,YAAYA,QAAO;AACvB,QAAI,eAAe,MAAM,MAAM,CAAC,KAAK,MAAM,MAAM,CAAC;AAElD,QAAI,OAAO;AACT,YAAM,SAAS;AAAA,QACb,OAAOA,QAAO;AAAA,MAChB,CAAC;AAED,UAAI,cAAc;AAChB,aAAK,MAAM,QAAQ,UAAU;AAC7B,cAAM,SAAS;AAAA,MACjB;AAEA,UAAI,cAAc,MAAM,OAAO;AAE/B,UAAI,aAAa;AACf,oBAAY,KAAK,MAAM;AACvB,oBAAY,KAAK,MAAM;AAAA,MACzB;AAAA,IACF;AAEA,QAAI,WAAW;AACb,UAAI,aAAaA,QAAO;AAExB,UAAI,gBAAgB,CAAC,YAAY;AAC/B,aAAK,UAAU,QAAQ,UAAU;AACjC,kBAAU,SAAS;AAAA,MACrB,OAAO;AACL,uBAAe,YAAYA,QAAO,YAAY;AAC9C,0BAAkB,YAAYA,QAAO,eAAeA,QAAO,eAAe;AAC1E,kBAAU,SAAS;AAAA,UACjB,QAAQ;AAAA,QACV,CAAC;AAED,cAAM,aAAa,sBAAsB;AAAA,UACvC,QAAQ,IAAI,cAAM,WAAW,GAAG,IAAI,WAAW,GAAG,EAAE;AAAA,QACtD;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;;;AC/dA,IAAI,WAEJ,SAAU,QAAQ;AAChB,YAAUQ,WAAU,MAAM;AAE1B,WAASA,UAAS,MAAM,KAAK,YAAY;AACvC,QAAI,QAAQ,OAAO,KAAK,IAAI,KAAK;AAEjC,UAAM,KAAK;AACX,QAAI,OAAO,IAAY,aAAK;AAE5B,UAAM,eAAe,IAAI;AAEzB,UAAM,WAAW,MAAM,KAAK,YAAY,IAAI;AAE5C,WAAO;AAAA,EACT;AAEA,EAAAA,UAAS,UAAU,aAAa,SAAU,MAAM,KAAK,YAAY,aAAa;AAC5E,QAAI,SAAS;AACb,QAAI,cAAc,KAAK;AACvB,QAAI,YAAY,KAAK,aAAa,GAAG;AACrC,QAAI,gBAAgB,UAAU,SAAS,UAAU;AACjD,QAAIC,UAAS,KAAK,cAAc,GAAG;AAGnC,QAAI,cAAc,OAAO,sBAAsB,UAAU,SAAS,WAAW,GAAGA,SAAQ,IAAI,GAAGA,OAAM;AAErG,QAAI,MAAM,YAAY,UAAU,GAAG;AAEjC,aAAO,SAAS,WAAW;AAC3B;AAAA,IACF;AAEA,QAAI,aAAa;AACf,aAAO,SAAS,WAAW;AAC3B,UAAI,gBAAgB,YAAY,WAAW,eAAe;AAE1D,UAAI,YAAY,QAAQ,KAAK;AAG3B,QAAQ,UAAU,QAAQ;AAAA,UACxB,QAAQ;AAAA,UACR,QAAQ;AAAA,QACV,GAAG,aAAa;AAAA,UACd,WAAW;AAAA,UACX,QAAQ;AAAA,QACV,CAAC;AACD,eAAO,UAAU,YAAY;AAC7B,eAAO,UAAU,YAAY;AAAA,MAC/B,WAAW,kBAAkB,SAAS;AACpC,eAAO,MAAM,IAAIA,QAAO;AACxB,QAAQ,UAAU,QAAQ;AAAA,UACxB,OAAO;AAAA,YACL,GAAGA,QAAO;AAAA,UACZ;AAAA,QACF,GAAG,aAAa,GAAG;AAAA,MACrB,OACK;AACD,YAAI,cAAc,MAAM;AACtB,iBAAO,SAAS;AAAA,YACd;AAAA,YACA,UAAU;AAAA,UACZ,CAAC;AACD,UAAQ,UAAU,QAAQ;AAAA,YACxB,OAAO;AAAA,cACL,YAAYA,QAAO;AAAA,cACnB,UAAUA,QAAO;AAAA,YACnB;AAAA,UACF,GAAG,aAAa,GAAG;AAAA,QACrB,OAAO;AACL,iBAAO,MAAM,WAAWA,QAAO;AAC/B,UAAQ,YAAY,QAAQ;AAAA,YAC1B,OAAO;AAAA,cACL,UAAUA,QAAO;AAAA,YACnB;AAAA,UACF,GAAG,aAAa,GAAG;AAAA,QACrB;AAAA,MACF;AAAA,IACJ,OAAO;AACL,mBAAa,MAAM;AAEnB,MAAQ,YAAY,QAAQ;AAAA,QAC1B,OAAO;AAAA,MACT,GAAG,aAAa,GAAG;AAAA,IACrB;AAEA,WAAO,SAAS,KAAK,cAAc,KAAK,OAAO,CAAC;AAChD,6BAAyB,QAAQ,SAAS;AAC1C,QAAI,YAAYA,QAAO,aAAaA,QAAO,YAAY;AACvD,QAAI,SAAS,YAAY,IAAI,gBAAgB;AAC7C,QAAI,KAAK,KAAK,IAAI,QAAQ,IAAI;AAC9B,QAAI,KAAK,KAAK,IAAI,QAAQ,IAAI;AAC9B,QAAI,cAAc,UAAU,WAAW,QAAQ;AAC/C,mBAAe,OAAO,KAAK,UAAU,WAAW;AAEhD,SAAK,aAAa,aAAa,MAAM,GAAG;AAExC,WAAO,YAAY,UAAU,EAAE,QAAQ,OAAO;AAAA,MAC5C,GAAGA,QAAO,KAAK,cAAc,IAAI,OAAO,IAAI,cAAc,IAAI,WAAW,KAAK,IAAI;AAAA,IACpF,GAAG,sBAAsB,cAAc,SAAS,WAAW,GAAGA,OAAM,CAAC;AACrE,WAAO,OAAO,YAAY,QAAQ,GAAG;AAAA,MACnC,GAAG;AAAA,MACH,GAAG;AAAA,MACH,OAAO,sBAAsB,UAAU,SAAS,CAAC,UAAU,WAAW,CAAC,GAAGA,OAAM;AAAA,IAClF,CAAC;AACD,WAAO,OAAO,YAAY,MAAM,GAAG;AAAA,MACjC,OAAO,sBAAsB,UAAU,SAAS,CAAC,QAAQ,WAAW,CAAC,GAAGA,OAAM;AAAA,IAChF,CAAC;AACD,QAAI,YAAY,OAAO,iBAAiB;AACxC,QAAI,YAAY,OAAO,eAAe;AACtC,iBAAa,OAAO,UAAU,YAAY,QAAQ,GAAG;AAAA,MACnD,GAAG;AAAA,MACH,GAAG;AAAA,IACL,CAAC;AAED,WAAO,UAAU,YAAY,QAAQ,GAAG;AAAA,MACtC,GAAG;AAAA,MACH,GAAG;AAAA,IACL,CAAC;AACD,wBAAoB,MAAM,cAAc,IAAI,OAAO,GAAG,cAAc,IAAI,WAAW,GAAG,cAAc,IAAI,UAAU,CAAC;AAAA,EACrH;AAEA,EAAAD,UAAS,UAAU,eAAe,SAAU,aAAa,MAAM,KAAK;AAClE,QAAI,SAAS;AACb,QAAI,YAAY,KAAK,aAAa,GAAG;AACrC,QAAI,iBAAiB,UAAU,SAAS,WAAW;AACnD,QAAI,QAAQ,KAAK,cAAc,KAAK,OAAO;AAC3C,QAAI,cAAc,SAAS,MAAM;AACjC,QAAI,gBAAgB,SAAS,MAAM;AACnC,kBAAc,QAAQ,qBAAqB,SAAS,GAAG;AAAA,MACrD,cAAc,KAAK;AAAA,MACnB,gBAAgB;AAAA,MAChB,cAAc;AAAA,MACd,gBAAgB;AAAA,MAChB,aAAa,YAAY,kBAAkB,KAAK,QAAQ,KAAK,KAAK,QAAQ,GAAG;AAAA,IAC/E,CAAC;AACD,QAAI,YAAY,OAAO,eAAe;AAEtC,WAAO,cAAc;AAAA,MAEnB,UAAU;AAAA,MACV,UAAU;AAAA,IACZ,CAAC;AAGD,cAAU,KAAK;AAAA,MACb,IAAI;AAAA,IACN,CAAC;AACD,QAAI,gBAAgB,YAAY,IAAI,CAAC,SAAS,UAAU,CAAC;AAEzD,QAAI,kBAAkB,aAAa,kBAAkB,SAAS;AAC5D,aAAO,oBAAoB;AAAA,IAC7B,OAAO;AACL,UAAI,WAAW,KAAK,iBAAiB;AAErC,UAAI,CAAC,UAAU;AACb,mBAAW,IAAY,iBAAS;AAChC,aAAK,iBAAiB,QAAQ;AAAA,MAChC;AAGA,wBAAkB,MAAM,yBAAyB,SAAS,GAAG;AAAA,QAC3D,QAAQ;AAAA,QACR,SAAS,UAAU,eAAe,IAAI,CAAC,aAAa,SAAS,CAAC,GAAG,eAAe,CAAC;AAAA,MACnF,CAAC;AAAA,IACH;AAAA,EACF;AAEA,SAAOA;AACT,EAAU,cAAM;AAGhB,IAAI,UAEJ,SAAU,QAAQ;AAChB,YAAUE,UAAS,MAAM;AAEzB,WAASA,WAAU;AACjB,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,wBAAwB;AAC9B,WAAO;AAAA,EACT;AAEA,EAAAA,SAAQ,UAAU,SAAS,SAAU,aAAa,SAAS,KAAK,SAAS;AACvE,QAAI,OAAO,YAAY,QAAQ;AAC/B,QAAI,UAAU,KAAK;AACnB,QAAI,QAAQ,KAAK;AACjB,QAAI;AAEJ,QAAI,CAAC,WAAW,KAAK,MAAM,IAAI,GAAG;AAChC,UAAI,QAAQ,KAAK,cAAc,CAAC;AAEhC,eAAS,IAAI,GAAG,MAAM,SAAS,MAAM,UAAU,KAAK,IAAI,KAAK,MAAM,GAAG,EAAE,GAAG;AACzE,gBAAQ,KAAK,cAAc,CAAC;AAAA,MAC9B;AAEA,UAAI,OAAO;AACT,qBAAa,MAAM;AAAA,MACrB;AAAA,IACF;AAGA,QAAI,KAAK,oBAAoB;AAC3B,YAAM,OAAO,KAAK,kBAAkB;AAAA,IACtC;AAGA,QAAI,KAAK,MAAM,MAAM,KAAK,YAAY,IAAI,iBAAiB,GAAG;AAC5D,UAAI,SAAS,IAAY,eAAO;AAAA,QAC9B,OAAO,kBAAkB,aAAa,GAAG;AAAA,MAC3C,CAAC;AACD,aAAO,SAAS,YAAY,SAAS,kBAAkB,EAAE,aAAa,CAAC;AACvE,WAAK,qBAAqB;AAC1B,YAAM,IAAI,MAAM;AAAA,IAClB;AAEA,SAAK,KAAK,OAAO,EAAE,IAAI,SAAU,KAAK;AACpC,UAAI,WAAW,IAAI,SAAS,MAAM,KAAK,UAAU;AACjD,WAAK,iBAAiB,KAAK,QAAQ;AACnC,YAAM,IAAI,QAAQ;AAAA,IACpB,CAAC,EAAE,OAAO,SAAU,QAAQ,QAAQ;AAClC,UAAI,WAAW,QAAQ,iBAAiB,MAAM;AAC9C,eAAS,WAAW,MAAM,QAAQ,UAAU;AAC5C,eAAS,IAAI,OAAO;AACpB,YAAM,IAAI,QAAQ;AAClB,WAAK,iBAAiB,QAAQ,QAAQ;AAAA,IACxC,CAAC,EAAE,OAAO,SAAU,KAAK;AACvB,UAAI,WAAW,QAAQ,iBAAiB,GAAG;AAC3C,MAAQ,yBAAyB,UAAU,aAAa,GAAG;AAAA,IAC7D,CAAC,EAAE,QAAQ;AACX,mBAAY,WAAW;AAEvB,QAAI,YAAY,IAAI,qBAAqB,MAAM,aAAa;AAC1D,WAAK,QAAQ;AAAA,IACf;AAAA,EACF;AAEA,EAAAA,SAAQ,UAAU,UAAU,WAAY;AAAA,EAAC;AAEzC,EAAAA,SAAQ,UAAU,eAAe,SAAU,OAAO,aAAa;AAC7D,QAAI,OAAO,YAAY,QAAQ;AAC/B,QAAI,aAAa,KAAK,cAAc,CAAC;AAErC,QAAI,YAAY;AACd,UAAI,KAAK,MAAM,KAAK,WAAW;AAC/B,UAAI,KAAK,MAAM,KAAK,WAAW;AAC/B,UAAI,SAAS,KAAK,KAAK,KAAK,KAAK,KAAK,EAAE;AACxC,aAAO,UAAU,WAAW,KAAK,UAAU,WAAW;AAAA,IACxD;AAAA,EACF;AAEA,EAAAA,SAAQ,OAAO;AACf,SAAOA;AACT,EAAE,aAAS;AAEX,IAAO,kBAAQ;;;AClQA,SAAR,uBAAwC,aAAa,KAAK,UAAU;AACzE,QAAM,QAAQ,GAAG,KAAK;AAAA,IACpB,iBAAiB;AAAA,EACnB,KAAK,OAAO;AAAA,IACV,cAAc,YAAY,UAAU;AAAA,EACtC,GAAG,GAAG;AACN,MAAI,SAAS,YAAY,UAAU;AACnC,MAAI,aAAa,wBAAwB,QAAQ,GAAG,EAAE;AACtD,MAAI,OAAO,IAAI,mBAAW,YAAY,WAAW;AACjD,OAAK,SAAS,QAAQ,QAAQ;AAC9B,SAAO;AACT;;;ACpBA,IAAI,uBAEJ,WAAY;AACV,WAASC,sBACT,0BACA,YAAY;AACV,SAAK,4BAA4B;AACjC,SAAK,cAAc;AAAA,EACrB;AAEA,EAAAA,sBAAqB,UAAU,cAAc,WAAY;AACvD,QAAI,UAAU,KAAK,YAAY;AAI/B,WAAO,QAAQ,SAAS,QAAQ,OAAO;AAAA,EACzC;AAEA,EAAAA,sBAAqB,UAAU,cAAc,SAAU,MAAM;AAC3D,QAAI,UAAU,KAAK,YAAY;AAE/B,WAAO,QAAQ,YAAY,IAAI,KAAK;AAAA,EACtC;AAEA,EAAAA,sBAAqB,UAAU,cAAc,SAAU,MAAM;AAI3D,QAAI,wBAAwB,KAAK,0BAA0B;AAE3D,WAAO,sBAAsB,YAAY,IAAI;AAAA,EAC/C;AAEA,EAAAA,sBAAqB,UAAU,gBAAgB,SAAU,WAAW,KAAK;AAEvE,QAAI,wBAAwB,KAAK,0BAA0B;AAE3D,WAAO,sBAAsB,cAAc,WAAW,GAAG;AAAA,EAC3D;AAEA,SAAOA;AACT,EAAE;AAEF,IAAO,+BAAQ;;;ACxCf,IAAI,YAAsB,UAAU;AAEpC,IAAI,iBAEJ,SAAU,QAAQ;AAChB,YAAUC,iBAAgB,MAAM;AAEhC,WAASA,kBAAiB;AACxB,WAAO,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAAA,EAC7D;AAMA,EAAAA,gBAAe,UAAU,OAAO,SAAU,QAAQ;AAChD,WAAO,UAAU,KAAK,MAAM,MAAM,SAAS;AAI3C,SAAK,uBAAuB,IAAI,6BAA4B,KAAK,KAAK,SAAS,IAAI,GAAU,KAAK,KAAK,YAAY,IAAI,CAAC;AAExH,SAAK,kBAAkB,MAAM;AAAA,EAC/B;AAMA,EAAAA,gBAAe,UAAU,cAAc,WAAY;AACjD,WAAO,UAAU,YAAY,MAAM,MAAM,SAAS;AAAA,EACpD;AAMA,EAAAA,gBAAe,UAAU,iBAAiB,WAAY;AACpD,WAAO,uBAAuB,MAAM;AAAA,MAClC,iBAAiB,CAAC,OAAO;AAAA,MACzB,iBAAwB,MAAM,8BAA8B,IAAI;AAAA,IAClE,CAAC;AAAA,EACH;AAMA,EAAAA,gBAAe,UAAU,gBAAgB,SAAU,WAAW;AAC5D,QAAI,OAAO,KAAK,QAAQ;AAExB,QAAI,YAAY,UAAU,IAAI;AAC9B,QAAI,QAAQ,UAAU;AAEtB,QAAI,CAAC,OAAO;AACV,UAAI,cAAc,CAAC;AACnB,WAAK,KAAK,KAAK,aAAa,OAAO,GAAG,SAAU,OAAO;AACrD,oBAAY,KAAK,KAAK;AAAA,MACxB,CAAC;AACD,cAAQ,UAAU,QAAQ,gBAAgB,aAAa,KAAK,UAAU,IAAI,kBAAkB,CAAC;AAAA,IAC/F;AAEA,QAAI,SAAS,OAAO,UAAU,cAAc,KAAK,MAAM,SAAS;AAGhE,WAAO,UAAU,MAAM,cAAc;AACrC,WAAO,MAAM,KAAK,SAAS;AAC3B,WAAO;AAAA,EACT;AAEA,EAAAA,gBAAe,UAAU,oBAAoB,SAAU,QAAQ;AAE7D,IAAU,gBAAgB,QAAQ,aAAa,CAAC,MAAM,CAAC;AACvD,QAAI,qBAAqB,OAAO;AAChC,QAAI,uBAAuB,OAAO,SAAS;AAE3C,uBAAmB,OAAO,mBAAmB,QAAQ,OAAO,MAAM;AAClE,yBAAqB,OAAO,qBAAqB,QAAQ,OAAO,SAAS,MAAM;AAAA,EACjF;AAEA,EAAAA,gBAAe,OAAO;AACtB,EAAAA,gBAAe,gBAAgB;AAAA,IAE7B,GAAG;AAAA,IACH,iBAAiB;AAAA,IACjB,SAAS;AAAA,IAET,QAAQ,CAAC,OAAO,KAAK;AAAA,IACrB,QAAQ,CAAC,GAAG,KAAK;AAAA,IAEjB,WAAW;AAAA,IACX,YAAY;AAAA,IAEZ,UAAU;AAAA,IAGV,mBAAmB;AAAA,IAEnB,gBAAgB;AAAA,IAKhB,kBAAkB;AAAA,IAElB,kBAAkB;AAAA,IAElB,MAAM;AAAA,IACN,KAAK;AAAA,IACL,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,OAAO;AAAA,MAGL,QAAQ;AAAA,MACR,MAAM;AAAA,MACN,UAAU;AAAA,MAEV,UAAU;AAAA,MAEV,SAAS;AAAA,MAGT,cAAc;AAAA,MAEd,aAAa;AAAA,MAEb,qBAAqB;AAAA,IAIvB;AAAA,IAEA,WAAW;AAAA,MACT,MAAM;AAAA,MAEN,QAAQ;AAAA,MAER,SAAS;AAAA,MACT,QAAQ;AAAA,MACR,cAAc;AAAA,MACd,iBAAiB;AAAA,MACjB,WAAW;AAAA,QAET,OAAO;AAAA,QACP,MAAM;AAAA,MACR;AAAA,IACF;AAAA,IACA,WAAW;AAAA,MACT,aAAa;AAAA,MACb,YAAY;AAAA,IACd;AAAA,IACA,iBAAiB;AAAA,IACjB,kBAAkB;AAAA,MAChB,OAAO;AAAA,MACP,SAAS;AAAA,IACX;AAAA,IACA,aAAa;AAAA,MAEX,aAAa;AAAA,IACf;AAAA,IACA,UAAU;AAAA,MACR,OAAO;AAAA,MACP,WAAW;AAAA,IACb;AAAA,IAEA,mBAAmB;AAAA,IAEnB,eAAe;AAAA,IACf,mBAAmB;AAAA,IAEnB,qBAAqB;AAAA,IACrB,uBAAuB;AAAA,IACvB,yBAAyB;AAAA,IACzB,iBAAiB;AAAA,EACnB;AACA,SAAOA;AACT,EAAE,cAAW;AAEb,IAAO,oBAAQ;;;AC5LA,SAAR,mBAAoC,YAAY;AACrD,SAAO;AAAA,IACL;AAAA,IACA,OAAO,SAAU,aAAa,SAAS;AACrC,UAAI,OAAO,YAAY,QAAQ;AAC/B,WAAK,WAAW,SAAU,KAAK;AAE7B,YAAI,WAAW,KAAK,aAAa,OAAO;AACxC,YAAI,WAAW,KAAK,IAAI,UAAU,GAAG;AAErC,YAAI,SAAS,QAAQ,KAAK,CAAC,MAAM,QAAQ,KAAK,WAAW,GAAG;AAC1D,iBAAO;AAAA,QACT;AAEA,eAAO;AAAA,MACT,CAAC;AAAA,IACH;AAAA,EACF;AACF;;;ACZO,SAASC,SAAQ,WAAW;AACjC,YAAU,kBAAkB,eAAO;AACnC,YAAU,oBAAoB,iBAAc;AAC5C,+BAA6B,OAAO,UAAU,cAAc;AAC5D,YAAU,eAAe,MAAM,WAAW,KAAK,CAAC;AAChD,YAAU,kBAAkB,WAAW,KAAK,CAAC;AAC7C,YAAU,kBAAkB,mBAAmB,KAAK,CAAC;AACvD;;;ACVA,IAAI,qBAEJ,SAAU,QAAQ;AAChB,YAAUC,qBAAoB,MAAM;AAEpC,WAASA,sBAAqB;AAC5B,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,oBAAmB;AAChC,UAAM,kBAAkB;AACxB,WAAO;AAAA,EACT;AAEA,EAAAA,oBAAmB,UAAU,iBAAiB,SAAU,QAAQ,SAAS;AACvE,WAAO,yBAAiB,MAAM,MAAM;AAAA,MAClC,oBAAoB;AAAA,IACtB,CAAC;AAAA,EACH;AAEA,EAAAA,oBAAmB,UAAU,iBAAiB,WAAY;AACxD,QAAI,cAAc,KAAK,OAAO;AAE9B,QAAI,eAAe,MAAM;AAEvB,aAAO,KAAK,OAAO,QAAQ,MAAM,KAAK,IAAI,aAAa;AAAA,IACzD;AAEA,WAAO;AAAA,EACT;AAEA,EAAAA,oBAAmB,UAAU,0BAA0B,WAAY;AACjE,QAAI,uBAAuB,KAAK,OAAO;AAEvC,QAAI,wBAAwB,MAAM;AAEhC,aAAO,KAAK,OAAO,QAAQ,MAAM,KAAK,IAAI,sBAAsB;AAAA,IAClE;AAEA,WAAO;AAAA,EACT;AAEA,EAAAA,oBAAmB,UAAU,gBAAgB,SAAU,WAAW,MAAM,WAAW;AACjF,WAAO,UAAU,MAAM,KAAK,cAAc,SAAS,CAAC;AAAA,EACtD;AAEA,EAAAA,oBAAmB,UAAU,eAAe,WAAY;AAEtD,WAAO,KAAK,QAAQ,EAAE,MAAM,IAAI,KAAK,wBAAwB,IAAI,KAAK,KAAK;AAAA,EAC7E;AAEA,EAAAA,oBAAmB,OAAO;AAC1B,EAAAA,oBAAmB,eAAe,CAAC,QAAQ,SAAS,OAAO,cAAc,UAAU;AACnF,EAAAA,oBAAmB,gBAAgB;AAAA,IACjC,kBAAkB;AAAA,IAElB,GAAG;AAAA,IACH,iBAAiB;AAAA,IACjB,YAAY;AAAA,IAEZ,OAAO;AAAA,IAEP,gBAAgB;AAAA,IAEhB,WAAW;AAAA,MACT,SAAS;AAAA,IAEX;AAAA,IACA,UAAU;AAAA,MACR,OAAO;AAAA,IACT;AAAA,IAGA,MAAM;AAAA,IACN,QAAQ;AAAA,MACN,WAAW;AAAA,QACT,aAAa;AAAA,MACf;AAAA,IACF;AAAA,IACA,qBAAqB;AAAA,MACnB,aAAa;AAAA,IACf;AAAA,EAEF;AACA,SAAOA;AACT,EAAE,cAAW;AAEb,IAAO,wBAAQ;;;ACnFf,IAAI,uBAAuB;AAE3B,IAAI,uBAEJ,WAAY;AACV,WAASC,wBAAuB;AAAA,EAAC;AAEjC,SAAOA;AACT,EAAE;AAEF,IAAI,kBAEJ,SAAU,QAAQ;AAChB,YAAUC,kBAAiB,MAAM;AAEjC,WAASA,iBAAgB,MAAM;AAC7B,QAAI,QAAQ,OAAO,KAAK,MAAM,IAAI,KAAK;AAEvC,UAAM,OAAO;AACb,UAAM,eAAe;AACrB,WAAO;AAAA,EACT;AAEA,EAAAA,iBAAgB,UAAU,kBAAkB,WAAY;AACtD,WAAO,IAAI,qBAAqB;AAAA,EAClC;AAEA,EAAAA,iBAAgB,UAAU,QAAQ,WAAY;AAC5C,SAAK,WAAW;AAChB,SAAK,OAAO;AAAA,EACd;AAEA,EAAAA,iBAAgB,UAAU,YAAY,SAAU,MAAM,OAAO;AAC3D,QAAI,SAAS,MAAM;AACnB,QAAI,OAAO,MAAM;AACjB,QAAI,cAAc,KAAK;AACvB,QAAI,mBAAmB,YAAY;AACnC,QAAI,MAAM,KAAK,aAAa,KAAK,WAAW,IAAI;AAChD,QAAI,WAAW,OAAO,KAAK,KAAK;AAChC,QAAI,gBAAgB,KAAK;AACzB,QAAI;AAEJ,QAAI,UAAU;AACZ,WAAK,OAAO;AACZ;AAAA,IACF;AAEA,SAAK,OAAO;AAEZ,SAAK,IAAI,KAAK,MAAM,IAAI,OAAO,UAAS;AACtC,UAAI,IAAI,OAAO;AACf,UAAI,IAAI,OAAO;AAEf,UAAI,MAAM,CAAC,KAAK,MAAM,CAAC,GAAG;AACxB;AAAA,MACF;AAEA,UAAI,iBAAiB,CAAC,cAAc,QAAQ,GAAG,CAAC,GAAG;AACjD;AAAA,MACF;AAEA,uBAAiB,IAAI,IAAI,KAAK,KAAK;AACnC,uBAAiB,IAAI,IAAI,KAAK,KAAK;AACnC,uBAAiB,QAAQ,KAAK;AAC9B,uBAAiB,SAAS,KAAK;AAC/B,kBAAY,UAAU,MAAM,kBAAkB,IAAI;AAAA,IACpD;AAEA,QAAI,KAAK,aAAa;AACpB,WAAK,OAAO;AACZ,WAAK,WAAW;AAAA,IAClB;AAAA,EACF;AAEA,EAAAA,iBAAgB,UAAU,aAAa,WAAY;AACjD,QAAI,QAAQ,KAAK;AACjB,QAAI,SAAS,MAAM;AACnB,QAAI,OAAO,MAAM;AACjB,QAAI,MAAM,KAAK;AACf,QAAI,gBAAgB,KAAK;AACzB,QAAI;AAEJ,QAAI,CAAC,KAAK;AACR;AAAA,IACF;AAGA,SAAK,IAAI,KAAK,MAAM,IAAI,OAAO,UAAS;AACtC,UAAI,IAAI,OAAO;AACf,UAAI,IAAI,OAAO;AAEf,UAAI,MAAM,CAAC,KAAK,MAAM,CAAC,GAAG;AACxB;AAAA,MACF;AAEA,UAAI,iBAAiB,CAAC,cAAc,QAAQ,GAAG,CAAC,GAAG;AACjD;AAAA,MACF;AAIA,UAAI,SAAS,IAAI,KAAK,KAAK,GAAG,IAAI,KAAK,KAAK,GAAG,KAAK,IAAI,KAAK,EAAE;AAAA,IACjE;AAEA,QAAI,KAAK,aAAa;AACpB,WAAK,OAAO;AACZ,WAAK,WAAW;AAAA,IAClB;AAAA,EACF;AAEA,EAAAA,iBAAgB,UAAU,gBAAgB,SAAU,GAAG,GAAG;AAGxD,QAAI,QAAQ,KAAK;AACjB,QAAI,SAAS,MAAM;AACnB,QAAI,OAAO,MAAM;AACjB,QAAI,IAAI,KAAK,IAAI,KAAK,IAAI,CAAC;AAC3B,QAAI,IAAI,KAAK,IAAI,KAAK,IAAI,CAAC;AAI3B,aAAS,MAAM,OAAO,SAAS,IAAI,GAAG,OAAO,GAAG,OAAO;AACrD,UAAI,IAAI,MAAM;AACd,UAAI,KAAK,OAAO,KAAK,IAAI;AACzB,UAAI,KAAK,OAAO,IAAI,KAAK,IAAI;AAE7B,UAAI,KAAK,MAAM,KAAK,MAAM,KAAK,KAAK,KAAK,KAAK,KAAK,GAAG;AACpD,eAAO;AAAA,MACT;AAAA,IACF;AAEA,WAAO;AAAA,EACT;AAEA,EAAAA,iBAAgB,UAAU,UAAU,SAAU,GAAG,GAAG;AAClD,QAAI,WAAW,KAAK,sBAAsB,GAAG,CAAC;AAC9C,QAAI,OAAO,KAAK,gBAAgB;AAChC,QAAI,SAAS;AACb,QAAI,SAAS;AAEb,QAAI,KAAK,QAAQ,GAAG,CAAC,GAAG;AAEtB,UAAI,UAAU,KAAK,eAAe,KAAK,cAAc,GAAG,CAAC;AACzD,aAAO,WAAW;AAAA,IACpB;AAEA,SAAK,eAAe;AACpB,WAAO;AAAA,EACT;AAEA,EAAAA,iBAAgB,UAAU,kBAAkB,WAAY;AAEtD,QAAI,OAAO,KAAK;AAEhB,QAAI,CAAC,MAAM;AACT,UAAI,QAAQ,KAAK;AACjB,UAAI,SAAS,MAAM;AACnB,UAAI,OAAO,MAAM;AACjB,UAAI,IAAI,KAAK;AACb,UAAI,IAAI,KAAK;AACb,UAAI,OAAO;AACX,UAAI,OAAO;AACX,UAAI,OAAO;AACX,UAAI,OAAO;AAEX,eAAS,IAAI,GAAG,IAAI,OAAO,UAAS;AAClC,YAAI,IAAI,OAAO;AACf,YAAI,IAAI,OAAO;AACf,eAAO,KAAK,IAAI,GAAG,IAAI;AACvB,eAAO,KAAK,IAAI,GAAG,IAAI;AACvB,eAAO,KAAK,IAAI,GAAG,IAAI;AACvB,eAAO,KAAK,IAAI,GAAG,IAAI;AAAA,MACzB;AAEA,aAAO,KAAK,QAAQ,IAAY,qBAAa,OAAO,IAAI,GAAG,OAAO,IAAI,GAAG,OAAO,OAAO,GAAG,OAAO,OAAO,CAAC;AAAA,IAC3G;AAEA,WAAO;AAAA,EACT;AAEA,SAAOA;AACT,EAAU,YAAI;AAEd,IAAI,kBAEJ,WAAY;AACV,WAASC,mBAAkB;AACzB,SAAK,QAAQ,IAAY,cAAM;AAAA,EACjC;AAMA,EAAAA,iBAAgB,UAAU,aAAa,SAAU,MAAM,KAAK;AAC1D,SAAK,OAAO;AAEZ,QAAI,WAAW,KAAK,QAAQ;AAE5B,aAAS,SAAS;AAAA,MAChB,QAAQ,KAAK,UAAU,QAAQ;AAAA,IACjC,CAAC;AAED,SAAK,WAAW,UAAU,MAAM,GAAG;AAAA,EACrC;AAEA,EAAAA,iBAAgB,UAAU,eAAe,SAAU,MAAM;AACvD,QAAI,SAAS,KAAK,UAAU,QAAQ;AACpC,SAAK,MAAM,UAAU,SAAU,OAAO;AACpC,UAAI,MAAM,cAAc,MAAM;AAC5B,YAAIC,QAAO,MAAM,WAAW,MAAM,cAAc;AAChD,YAAI,aAAa,MAAM,aAAa,IAAI;AACxC,iBAAS,IAAI,aAAa,OAAO,QAAQ,YAAYA,IAAG;AAAA,MAC1D;AAEA,YAAM,SAAS,UAAU,MAAM;AAE/B,YAAM,MAAM;AAAA,IACd,CAAC;AAAA,EACH;AAEA,EAAAD,iBAAgB,UAAU,2BAA2B,SAAU,MAAM;AACnE,SAAK,OAAO;AAAA,EACd;AAEA,EAAAA,iBAAgB,UAAU,oBAAoB,SAAU,YAAY,MAAM,KAAK;AAC7E,QAAI,YAAY,KAAK,UAAU;AAC/B,QAAI,SAAS,KAAK,UAAU,QAAQ;AACpC,QAAI,YAAY,aAAa,UAAU,MAAM;AAG7C,QAAI,aAAa,UAAU,SAAS,KAAK;AACvC,UAAI,SAAS,UAAU;AACvB,UAAI,YAAY,IAAI,aAAa,SAAS,OAAO,MAAM;AAEvD,gBAAU,IAAI,SAAS;AACvB,gBAAU,IAAI,QAAQ,MAAM;AAE5B,gBAAU,WAAW,WAAW;AAChC,gBAAU,SAAS;AAAA,QACjB,QAAQ;AAAA,MACV,CAAC;AAAA,IACH,OAAO;AAEL,WAAK,YAAY,CAAC;AAElB,UAAI,WAAW,KAAK,QAAQ;AAE5B,eAAS,aAAa,WAAW;AACjC,eAAS,WAAW,WAAW;AAC/B,eAAS,cAAc;AACvB,eAAS,SAAS;AAAA,QAChB;AAAA,MACF,CAAC;AAED,WAAK,WAAW,UAAU,MAAM,GAAG;AAAA,IACrC;AAAA,EACF;AAEA,EAAAA,iBAAgB,UAAU,eAAe,SAAU,IAAI;AACrD,SAAK,UAAU,MAAM,GAAG,KAAK,UAAU,EAAE;AAAA,EAC3C;AAEA,EAAAA,iBAAgB,UAAU,UAAU,WAAY;AAC9C,QAAI,WAAW,IAAI,gBAAgB;AAAA,MACjC,QAAQ;AAAA,IACV,CAAC;AACD,aAAS,sBAAsB;AAC/B,SAAK,MAAM,IAAI,QAAQ;AAEvB,SAAK,UAAU,KAAK,QAAQ;AAE5B,WAAO;AAAA,EACT;AAEA,EAAAA,iBAAgB,UAAU,aAAa,SAAU,UAAU,MAAM,KAAK;AACpE,QAAI,YAAY,KAAK;AACrB,UAAM,OAAO,CAAC;AACd,QAAI,OAAO,KAAK,UAAU,YAAY;AACtC,aAAS,SAAS,QAAQ,gBAAgB,QAAQ,OAAO,CAAC,MAAM,IAAI,CAAC;AACrE,aAAS,gBAAgB,IAAI,aAAa;AAE1C,aAAS,cAAc,aAAa,KAAK,UAAU,QAAQ,GAAG,GAAG,GAAG,GAAG,CAAC;AAExE,aAAS,WAAW,SAAS,YAAY;AACzC,QAAI,gBAAgB,SAAS,MAAM,KAAK,KAAK;AAC7C,aAAS;AAAA,MACT,UAAU,SAAS,WAAW,EAAE,aAAa,gBAAgB,CAAC,SAAS,cAAc,aAAa,IAAI,CAAC,OAAO,CAAC;AAAA,IAAC;AAChH,QAAI,cAAc,KAAK,UAAU,OAAO;AACxC,QAAI,cAAc,eAAe,YAAY;AAE7C,QAAI,aAAa;AACf,eAAS,SAAS,WAAW;AAAA,IAC/B;AAEA,QAAI,SAAS,UAAU,QAAQ;AAG/B,WAAO,cAAc,UAAU;AAC/B,aAAS,GAAG,aAAa,SAAU,GAAG;AACpC,aAAO,YAAY;AACnB,UAAI,YAAY,SAAS;AAEzB,UAAI,aAAa,GAAG;AAElB,eAAO,YAAY,aAAa,SAAS,cAAc;AAAA,MACzD;AAAA,IACF,CAAC;AAAA,EACH;AAEA,EAAAA,iBAAgB,UAAU,SAAS,WAAY;AAC7C,SAAK,OAAO;AAAA,EACd;AAEA,EAAAA,iBAAgB,UAAU,SAAS,WAAY;AAC7C,SAAK,YAAY,CAAC;AAClB,SAAK,MAAM,UAAU;AAAA,EACvB;AAEA,SAAOA;AACT,EAAE;AAEF,IAAO,0BAAQ;;;ACnUf,IAAI,cAEJ,SAAU,QAAQ;AAChB,YAAUE,cAAa,MAAM;AAE7B,WAASA,eAAc;AACrB,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,aAAY;AACzB,WAAO;AAAA,EACT;AAEA,EAAAA,aAAY,UAAU,SAAS,SAAU,aAAa,SAAS,KAAK;AAClE,QAAI,OAAO,YAAY,QAAQ;AAE/B,QAAI,aAAa,KAAK,kBAAkB,MAAM,WAAW;AAEzD,eAAW,WAAW,MAAM;AAAA,MAK1B,WAAW,KAAK,cAAc,WAAW;AAAA,IAC3C,CAAC;AACD,SAAK,YAAY;AAAA,EACnB;AAEA,EAAAA,aAAY,UAAU,2BAA2B,SAAU,aAAa,SAAS,KAAK;AACpF,QAAI,OAAO,YAAY,QAAQ;AAE/B,QAAI,aAAa,KAAK,kBAAkB,MAAM,WAAW;AAEzD,eAAW,yBAAyB,IAAI;AACxC,SAAK,YAAY;AAAA,EACnB;AAEA,EAAAA,aAAY,UAAU,oBAAoB,SAAU,YAAY,aAAa,SAAS;AACpF,SAAK,YAAY,kBAAkB,YAAY,YAAY,QAAQ,GAAG;AAAA,MACpE,WAAW,KAAK,cAAc,WAAW;AAAA,IAC3C,CAAC;AAED,SAAK,YAAY,WAAW,QAAQ,YAAY,QAAQ,EAAE,MAAM;AAAA,EAClE;AAEA,EAAAA,aAAY,UAAU,kBAAkB,SAAU,aAAa,SAAS,KAAK;AAC3E,QAAI,OAAO,YAAY,QAAQ;AAG/B,SAAK,MAAM,MAAM;AAEjB,QAAI,CAAC,KAAK,aAAa,KAAK,MAAM,IAAI,KAAK;AACzC,aAAO;AAAA,QACL,QAAQ;AAAA,MACV;AAAA,IACF,OAAO;AACL,UAAI,MAAM,aAAa,EAAE,EAAE,MAAM,aAAa,SAAS,GAAG;AAE1D,UAAI,IAAI,UAAU;AAChB,YAAI,SAAS;AAAA,UACX,OAAO;AAAA,UACP,KAAK,KAAK,MAAM;AAAA,UAChB,OAAO,KAAK,MAAM;AAAA,QACpB,GAAG,IAAI;AAAA,MACT;AAEA,WAAK,YAAY,aAAa,IAAI;AAAA,IACpC;AAAA,EACF;AAEA,EAAAA,aAAY,UAAU,eAAe,SAAU,IAAI;AACjD,SAAK,eAAe,KAAK,YAAY,aAAa,EAAE;AAAA,EACtD;AAEA,EAAAA,aAAY,UAAU,gBAAgB,SAAU,aAAa;AAC3D,QAAI,WAAW,YAAY;AAC3B,QAAI,WAAW,YAAY,SAAS,WAAW,SAAS,QAAQ;AAChE,WAAO,YAAY,IAAI,QAAQ,IAAI,IAAI,WAAW;AAAA,EACpD;AAEA,EAAAA,aAAY,UAAU,oBAAoB,SAAU,MAAM,aAAa;AACrE,QAAI,aAAa,KAAK;AACtB,QAAI,kBAAkB,YAAY;AAClC,QAAI,cAAc,gBAAgB;AAElC,QAAI,CAAC,cAAc,gBAAgB,KAAK,cAAc;AACpD,oBAAc,WAAW,OAAO;AAChC,mBAAa,KAAK,cAAc,cAAc,IAAI,wBAAgB,IAAI,IAAI,mBAAW;AACrF,WAAK,eAAe;AACpB,WAAK,MAAM,UAAU;AAAA,IACvB;AAEA,SAAK,MAAM,IAAI,WAAW,KAAK;AAC/B,WAAO;AAAA,EACT;AAEA,EAAAA,aAAY,UAAU,SAAS,SAAU,SAAS,KAAK;AACrD,SAAK,eAAe,KAAK,YAAY,OAAO,IAAI;AAChD,SAAK,cAAc;AAAA,EACrB;AAEA,EAAAA,aAAY,UAAU,UAAU,WAAY;AAAA,EAAC;AAE7C,EAAAA,aAAY,OAAO;AACnB,SAAOA;AACT,EAAE,aAAS;AAEX,IAAO,sBAAQ;;;AC3GR,SAASC,SAAQ,WAAW;AAEjC,MAAI,OAAiB;AACrB,YAAU,oBAAoB,qBAAkB;AAChD,YAAU,kBAAkB,mBAAW;AACvC,YAAU,eAAe,aAAa,SAAS,CAAC;AAClD;;;ACVe,SAAR,YAA6B,SAAS;AAC3C,UAAQ,iBAAiB,SAAS,SAAU,aAAa;AACvD,QAAI,OAAO,YAAY,QAAQ;AAC/B,QAAI,SAAS,CAAC;AACd,QAAI,WAAW,YAAY;AAE3B,QAAI,CAAC,UAAU;AACb;AAAA,IACF;AAEA,QAAI,OAAO,SAAS,iBAAiB;AACrC,IAAO,KAAK,MAAM,SAAU,MAAM,WAAW;AAC3C,WAAK,KAAK,KAAK,aAAa,KAAK,WAAW,GAAG,GAAG,SAAU,KAAK,WAAW;AAC1E,eAAO,aAAa,OAAO,cAAc,CAAC;AAC1C,YAAI,QAAQ,SAAS,YAAY,KAAK,SAAS;AAC/C,eAAO,WAAW,aAAa,aAAa,KAAK,IAAI,QAAQ,qBAAqB,QAAQ;AAAA,MAC5F,CAAC;AAAA,IACH,CAAC;AAED,SAAK,KAAK,SAAU,KAAK;AAIvB,UAAI,aAAoB,KAAK,OAAO,MAAM,SAAU,OAAO;AACzD,eAAO,aAAa,KAAK;AAAA,MAC3B,CAAC,KAAK,qBAAqB,QAAQ;AAEnC,aAAO,KAAK,KAAK,WAAW,MAAM,CAAC;AACnC,WAAK,cAAc,KAAK,OAAO,IAAI;AAAA,IACrC,CAAC;AAAA,EACH,CAAC;AACH;AAEA,SAAS,aAAa,OAAO;AAC3B,SAAO,CAAC,MAAM,MAAM,EAAE,KAAK,CAAC,MAAM,MAAM,EAAE;AAC5C;AAEA,SAAS,qBAAqB,UAAU;AAGtC,SAAO,CAAC,SAAS,IAAI,SAAS,EAAE;AAClC;;;ACvCe,SAAR,oBAAqC,QAAQ;AAClD,MAAI,cAAc,OAAO;AAEzB,MAAI,aAAa;AACf,QAAI,CAAQ,QAAQ,WAAW,GAAG;AAChC,oBAAc,CAAC,WAAW;AAAA,IAC5B;AAEA,QAAI,kBAAkB,CAAC;AACvB,IAAO,KAAK,aAAa,SAAU,UAAU,KAAK;AAChD,UAAI,SAAS,WAAW;AACtB,YAAI,SAAS,QAAQ,CAAC,SAAS,OAAO;AACpC,mBAAS,QAAQ,SAAS;AAAA,QAC5B;AAEA,eAAO,QAAQ,OAAO,SAAS,CAAC;AAEhC,YAAI,CAAQ,QAAQ,OAAO,KAAK,GAAG;AACjC,iBAAO,QAAQ,CAAC,OAAO,KAAK;AAAA,QAC9B;AAEA,eAAO,MAAM,KAAK,QAAQ;AAAA,MAC5B,OAAO;AACL,wBAAgB,KAAK,QAAQ;AAAA,MAC/B;AAAA,IACF,CAAC;AACD,WAAO,QAAQ;AAAA,EACjB;AAEA,EAAO,KAAK,OAAO,QAAQ,SAAU,WAAW;AAC9C,QAAI,aAAa,UAAU,SAAS,WAAW,UAAU,YAAY;AACnE,gBAAU,aAAa,UAAU;AAAA,IACnC;AAAA,EACF,CAAC;AACH;;;AC3BA,IAAI,YAEJ,SAAU,QAAQ;AAChB,YAAUC,YAAW,MAAM;AAE3B,WAASA,aAAY;AACnB,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,WAAU;AACvB,WAAO;AAAA,EACT;AAEA,EAAAA,WAAU,UAAU,SAAS,SAAU,aAAa,SAAS,KAAK;AAChE,QAAI,QAAQ,YAAY;AACxB,QAAI,QAAQ,KAAK;AACjB,QAAI,OAAO,YAAY,QAAQ;AAC/B,QAAI,UAAU,KAAK;AAEnB,aAASC,cAAaC,OAAM,KAAK;AAC/B,UAAI,aAAaA,MAAK,cAAc,KAAK,QAAQ,KAAK;AAEtD,UAAI,eAAe,QAAQ;AACzB;AAAA,MACF;AAEA,UAAI,aAAwB,oBAAoBA,MAAK,cAAc,KAAK,YAAY,CAAC;AACrF,UAAI,aAAwB,aAAa,YAAY,IAAI,IAAI,GAAG,CAAC;AACjE,UAAI,eAAeA,MAAK,cAAc,KAAK,cAAc,KAAK;AAC9D,iBAAW,KAAK;AAAA,QACd,OAAO;AAAA,UACL,eAAe;AAAA,QACjB;AAAA,QACA,IAAI;AAAA,QACJ,QAAQ,WAAW,KAAK;AAAA,QACxB,QAAQ,WAAW,KAAK;AAAA,QACxB,UAAU,eAAe,KAAK,KAAK,OAAO;AAAA,MAC5C,CAAC;AACD,aAAO;AAAA,IACT;AAEA,aAAS,cAAc,WAAW,WAAW,aAAaA,OAAM,KAAK,QAAQ;AAE3E,kBAAY,UAAU;AAEtB,eAAS,IAAI,GAAG,IAAI,UAAU,SAAS,GAAG,KAAK;AAC7C,YAAI,aAAaD,cAAaC,OAAM,GAAG;AAEvC,YAAI,YAAY;AACd,qBAAW,WAAW;AAEtB,cAAI,UAAU,IAAI;AAChB,uBAAW,YAAY,UAAU,EAAE;AACnC,4BAAQ,SAAS,cAAc,eAAe,YAAY;AAAA,cACxD,GAAG,UAAU,GAAG;AAAA,cAChB,GAAG,UAAU,GAAG;AAAA,YAClB,GAAG,aAAa,GAAG;AAAA,UACrB,OAAO;AACL,uBAAW,YAAY,UAAU,EAAE;AAAA,UACrC;AAEA,sBAAY,IAAI,UAAU;AAAA,QAC5B;AAAA,MACF;AAAA,IACF;AAEA,aAAS,iBAAiB,QAAQ;AAChC,aAAc,IAAI,QAAQ,SAAU,IAAI;AACtC,eAAO,CAAC,MAAM,IAAI,MAAM,EAAE;AAAA,MAC5B,CAAC;AAAA,IACH;AAEA,SAAK,KAAK,OAAO,EAAE,IAAI,SAAU,KAAK;AACpC,UAAI,SAAS,KAAK,cAAc,GAAG;AAEnC,UAAI,CAAC,QAAQ;AACX;AAAA,MACF;AAEA,UAAI,UAAU,IAAY,gBAAQ;AAClC,UAAI,WAAW,IAAY,iBAAS;AACpC,UAAI,SAAS;AAAA,QACX,OAAO;AAAA,UACL;AAAA,QACF;AAAA,MACF;AACA,cAAQ,MAAM,SAAS,iBAAiB,MAAM;AAC9C,eAAS,MAAM,SAAS,iBAAiB,MAAM;AAC/C,MAAQ,UAAU,SAAS,QAAQ,aAAa,GAAG;AACnD,MAAQ,UAAU,UAAU,QAAQ,aAAa,GAAG;AACpD,UAAI,YAAY,IAAY,cAAM;AAClC,UAAI,cAAc,IAAY,cAAM;AACpC,gBAAU,IAAI,QAAQ;AACtB,gBAAU,IAAI,OAAO;AACrB,gBAAU,IAAI,WAAW;AACzB,oBAAc,SAAS,MAAM,QAAQ,QAAQ,aAAa,MAAM,KAAK,IAAI;AACzE,WAAK,iBAAiB,KAAK,SAAS;AAAA,IACtC,CAAC,EAAE,OAAO,SAAU,QAAQ,QAAQ;AAClC,UAAI,YAAY,QAAQ,iBAAiB,MAAM;AAC/C,UAAI,WAAW,UAAU,QAAQ,CAAC;AAClC,UAAI,UAAU,UAAU,QAAQ,CAAC;AACjC,UAAI,cAAc,UAAU,QAAQ,CAAC;AACrC,UAAI,SAAS;AAAA,QACX,OAAO;AAAA,UACL,QAAQ,KAAK,cAAc,MAAM;AAAA,QACnC;AAAA,MACF;AAEA,UAAI,CAAC,OAAO,MAAM,QAAQ;AACxB;AAAA,MACF;AAEA,oBAAc,SAAS,MAAM,QAAQ,OAAO,MAAM,QAAQ,aAAa,MAAM,QAAQ,KAAK;AAC1F,mBAAa,OAAO;AACpB,mBAAa,QAAQ;AACrB,MAAQ,YAAY,UAAU,QAAQ,WAAW;AACjD,MAAQ,YAAY,SAAS,QAAQ,WAAW;AAChD,WAAK,iBAAiB,QAAQ,SAAS;AAAA,IACzC,CAAC,EAAE,OAAO,SAAU,KAAK;AACvB,YAAM,OAAO,QAAQ,iBAAiB,GAAG,CAAC;AAAA,IAC5C,CAAC,EAAE,QAAQ;AACX,SAAK,kBAAkB,SAAU,WAAW,KAAK;AAC/C,UAAI,YAAY,KAAK,aAAa,GAAG;AACrC,UAAI,WAAW,UAAU,QAAQ,CAAC;AAClC,UAAI,UAAU,UAAU,QAAQ,CAAC;AACjC,UAAI,cAAc,UAAU,QAAQ,CAAC;AAErC,UAAI,YAAY,KAAK,cAAc,KAAK,OAAO;AAC/C,UAAI,QAAQ,UAAU;AACtB,YAAM,IAAI,SAAS;AACnB,eAAS,SAAgB,SAAS,UAAU,SAAS,WAAW,EAAE,aAAa,GAAG;AAAA,QAChF,MAAM;AAAA,QACN,QAAQ;AAAA,MACV,CAAC,CAAC;AACF,+BAAyB,UAAU,WAAW,WAAW;AACzD,+BAAyB,SAAS,WAAW,WAAW;AACxD,UAAI,iBAAiB,UAAU,SAAS,WAAW;AACnD,UAAI,gBAAgB,eAAe,QAAQ,KAAK,eAAe,YAAY,QAAQ;AACnF,cAAQ,SAAS;AACjB,MAAO,KAAK,CAAC,YAAY,UAAU,MAAM,GAAG,SAAU,WAAW;AAC/D,YAAI,aAAa,UAAU,SAAS,CAAC,WAAW,WAAW,CAAC;AAC5D,YAAI,cAAc,WAAW,QAAQ,KAAK,WAAW,YAAY,QAAQ;AAEzE,gBAAQ,YAAY,SAAS,EAAE,SAAS,eAAe;AAAA,MACzD,CAAC;AACD,cAAQ,SAAgB,SAAS,eAAe,aAAa,GAAG;AAAA,QAC9D,MAAM;AAAA,QACN,SAAS;AAAA,QACT,OAAO,UAAU;AAAA,MACnB,CAAC,CAAC;AACF,UAAI,gBAAgB,UAAU,SAAS,UAAU;AACjD,UAAI,iBAAiB,cAAc,SAAS,WAAW,EAAE,aAAa;AACtE,kBAAY,UAAU,SAAU,YAAY;AAC1C,YAAI,sBAAsB,eAAS;AACjC,cAAI,YAAY,WAAW;AAC3B,qBAAW,SAAgB,OAAO;AAAA,YAEhC,OAAO,UAAU;AAAA,YACjB,GAAG,UAAU;AAAA,YACb,GAAG,UAAU;AAAA,YACb,OAAO,UAAU;AAAA,YACjB,QAAQ,UAAU;AAAA,UACpB,GAAG,SAAS,CAAC;AAAA,QACf,OAAO;AACL,qBAAW,SAAS,SAAS;AAC7B,qBAAW,SAAS,KAAK;AACzB,qBAAW,MAAM,gBAAgB;AAAA,QACnC;AAEA,YAAI,oBAAoB,WAAW,YAAY,UAAU;AACzD,0BAAkB,QAAe,MAAM,cAAc;AACrD,YAAI,cAAc,KAAK,SAAS,EAAE,IAAI,KAAK,kBAAkB,WAAW,QAAQ,GAAG,GAAG;AACtF,SAAC,eAAe,QAAQ,MAAM,WAAW,OAAO,cAAc;AAC9D,sBAAc,YAAY,qBAAqB,SAAS,GAAG;AAAA,UACzD,cAAc,KAAK;AAAA,UACnB,gBAAgB;AAAA,UAChB,eAAe,WAAW;AAAA,UAC1B;AAAA,UACA,cAAc;AAAA,UACd,gBAAgB,UAAU;AAAA,QAC5B,CAAC;AAAA,MACH,CAAC;AACD,0BAAoB,WAAW,cAAc,IAAI,OAAO,GAAG,cAAc,IAAI,WAAW,GAAG,cAAc,IAAI,UAAU,CAAC;AAAA,IAC1H,CAAC;AACD,SAAK,QAAQ;AAAA,EACf;AAEA,EAAAF,WAAU,UAAU,SAAS,WAAY;AACvC,SAAK,MAAM,UAAU;AACrB,SAAK,QAAQ;AAAA,EACf;AAEA,EAAAA,WAAU,OAAO;AACjB,SAAOA;AACT,EAAE,aAAS;AAEX,IAAO,oBAAQ;;;ACtMf,IAAI,mBAEJ,SAAU,QAAQ;AAChB,YAAUG,mBAAkB,MAAM;AAElC,WAASA,oBAAmB;AAC1B,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,kBAAiB;AAC9B,UAAM,kBAAkB;AACxB,WAAO;AAAA,EACT;AAGA,EAAAA,kBAAiB,UAAU,OAAO,SAAU,QAAQ;AAClD,WAAO,UAAU,KAAK,MAAM,MAAM,SAAS;AAI3C,SAAK,uBAAuB,IAAI,6BAA4B,KAAK,KAAK,SAAS,IAAI,GAAU,KAAK,KAAK,YAAY,IAAI,CAAC;AAAA,EAC1H;AAEA,EAAAA,kBAAiB,UAAU,iBAAiB,SAAU,QAAQ,SAAS;AACrE,WAAO,uBAAuB,MAAM;AAAA,MAClC,eAAe;AAAA,MACf,oBAAoB;AAAA,IACtB,CAAC;AAAA,EACH;AAEA,EAAAA,kBAAiB,UAAU,gBAAgB,SAAU,WAAW,gBAAgB,UAAU;AACxF,QAAI,OAAO,KAAK,QAAQ;AACxB,QAAI,WAAW,KAAK;AACpB,QAAI,gBAAgB,SAAS,iBAAiB;AAC9C,QAAI,OAAO,KAAK,QAAQ,EAAE,QAAQ,SAAS;AAC3C,QAAI,gBAAgB,SAAS,KAAK,KAAK,OAAO;AAC9C,QAAI,cAAc,oCAAoC,MAAM,SAAS;AACrE,WAAO,oBAAoB,WAAW;AAAA,MACpC,QAAQ;AAAA,MACR,YAAY;AAAA,MACZ,QAAe,IAAI,eAAe,SAAU,MAAM;AAChD,YAAI,MAAM,KAAK,IAAI,KAAK,aAAa,KAAK,GAAG,GAAG,SAAS;AACzD,eAAO,oBAAoB,aAAa;AAAA,UACtC,YAAY;AAAA,UACZ;AAAA,UACA,MAAM,KAAK;AAAA,UACX,OAAO;AAAA,UACP,WAAW;AAAA,QACb,CAAC;AAAA,MACH,CAAC;AAAA,IACH,CAAC;AAAA,EACH;AAEA,EAAAA,kBAAiB,UAAU,qBAAqB,SAAU,WAAW;AACnE,QAAI,aAAa,MAAM;AACrB,UAAI,SAAS,KAAK,QAAQ;AAC1B,UAAI,WAAW,KAAK;AACpB,UAAI,SAAS,OAAO,UAAiB,IAAI,SAAS,YAAY,SAAU,KAAK;AAC3E,eAAO,OAAO,aAAa,GAAG;AAAA,MAChC,CAAC,GAAG,SAAS;AAEb,eAAS,IAAI,GAAGC,OAAM,OAAO,QAAQ,IAAIA,MAAK,KAAK;AACjD,YAAI,CAAC,MAAM,OAAO,EAAE,GAAG;AACrB,cAAI,gBAAgB,SAAS,iBAAiB;AAC9C,iBAAO,SAAS,aAAa,cAAc,GAAG,YAAY,OAAO,EAAE,GAAG,CAAC;AAAA,QACzE;AAAA,MACF;AAAA,IACF;AAAA,EACF;AAEA,EAAAD,kBAAiB,OAAO;AACxB,EAAAA,kBAAiB,eAAe,CAAC,OAAO;AACxC,EAAAA,kBAAiB,gBAAgB;AAAA,IAE/B,GAAG;AAAA,IACH,SAAS;AAAA,IACT,kBAAkB;AAAA,IAClB,iBAAiB;AAAA,IACjB,YAAY;AAAA,IACZ,WAAW;AAAA,MACT,OAAO;AAAA,MACP,MAAM;AAAA,MACN,MAAM;AAAA,IACR;AAAA,IACA,OAAO;AAAA,MACL,UAAU;AAAA,IACZ;AAAA,IAIA,YAAY;AAAA,EAEd;AACA,SAAOA;AACT,EAAE,cAAW;AAEb,IAAO,sBAAQ;;;AC/FR,SAASE,SAAQ,WAAW;AACjC,MAAIA,QAAqB;AACzB,YAAU,kBAAkB,iBAAS;AACrC,YAAU,oBAAoB,mBAAgB;AAC9C,YAAU,eAAe,WAAW;AACpC,YAAU,kBAAkB,WAAW,OAAO,CAAC;AAC/C,YAAU,qBAAqB,mBAAc;AAC/C;;;ACPA,IAAI,UAEJ,SAAU,QAAQ;AAChB,YAAUC,UAAS,MAAM;AAEzB,WAASA,WAAU;AACjB,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,SAAQ;AACrB,WAAO;AAAA,EACT;AAEA,EAAAA,SAAQ,UAAU,SAAS,SAAU,UAAU,SAAS,KAAK,SAAS;AAEpE,QAAI,WAAW,QAAQ,SAAS,qBAAqB,QAAQ,SAAS,KAAK,KAAK;AAC9E;AAAA,IACF;AAEA,QAAI,QAAQ,KAAK;AACjB,UAAM,UAAU;AAEhB,QAAI,SAAS,gBAAgB,GAAG;AAC9B;AAAA,IACF;AAEA,QAAI,KAAK,YAAY,WAAW,QAAQ,SAAS,WAAW;AAC1D,WAAK,SAAS,oBAAoB;AAAA,IACpC;AAGA,QAAI,EAAE,WAAW,QAAQ,SAAS,aAAa,QAAQ,kBAAkB,YAAY,QAAQ,aAAa,SAAS,KAAK;AACtH,UAAI,SAAS,cAAc;AACzB,YAAI,UAAU,KAAK,YAAY,IAAI,gBAAQ,GAAG;AAC9C,cAAM,IAAI,QAAQ,KAAK;AACvB,gBAAQ,KAAK,UAAU,SAAS,KAAK,MAAM,OAAO;AAClD,aAAK,WAAW;AAAA,MAClB,OAAO;AAEL,aAAK,YAAY,KAAK,SAAS,OAAO;AACtC,aAAK,WAAW;AAAA,MAClB;AAAA,IACF,OAAO;AACL,UAAI,UAAU,KAAK;AACnB,iBAAW,MAAM,IAAI,QAAQ,KAAK;AAAA,IACpC;AAEA,aAAS,IAAI,kBAAkB,KAAK,QAAQ,aAAa,QAAQ,KAAK,KAAK,eAAe,UAAU,SAAS,GAAG;AAAA,EAClH;AAEA,EAAAA,SAAQ,UAAU,SAAS,WAAY;AACrC,SAAK,YAAY,KAAK,SAAS,OAAO;AACtC,SAAK,WAAW;AAChB,SAAK,MAAM,UAAU;AAAA,EACvB;AAEA,EAAAA,SAAQ,UAAU,UAAU,WAAY;AACtC,SAAK,YAAY,KAAK,SAAS,OAAO;AACtC,SAAK,WAAW;AAAA,EAClB;AAEA,EAAAA,SAAQ,UAAU,iBAAiB,SAAU,UAAU,SAAS,KAAK;AACnE,QAAI,eAAe,SAAS;AAC5B,QAAI,QAAQ,KAAK;AACjB,iBAAa,KAAK,aAAa,aAAa,OAAO,GAAG,SAAU,OAAO,mBAAmB;AACxF,UAAI,MAAM,KAAK,GAAG;AAChB;AAAA,MACF;AAEA,UAAIC,UAAS,aAAa,cAAc,iBAAiB;AAEzD,UAAI,CAACA,WAAU,CAACA,QAAO,OAAO;AAE5B;AAAA,MACF;AAEA,UAAI,QAAQA,QAAO;AACnB,UAAI,SAASA,QAAO;AACpB,UAAI,SAAS,IAAY,eAAO;AAAA,QAC9B,OAAO;AAAA,UAOL,MAAM,SAAS,QAAQ,EAAE,UAAU,OAAO,EAAE;AAAA,QAC9C;AAAA,QACA,OAAO;AAAA,UACL,IAAI,MAAM,KAAK,SAAS;AAAA,UACxB,IAAI,MAAM;AAAA,UACV,GAAG;AAAA,QACL;AAAA,QACA,QAAQ;AAAA,QAER,IAAI,KAAK,CAAC,SAAS,mBAAmB,IAAI;AAAA,MAC5C,CAAC;AAUD,UAAI,CAAC,QAAQ;AACX,YAAI,WAAW,SAAS,WAAW,QAAQ;AAC3C,YAAI,SAAS,aAAa,QAAQ,iBAAiB;AACnD,YAAI,cAAc,SAAS,YAAY,MAAM;AAC7C,YAAI,YAAY,aAAa,aAAa,iBAAiB;AAC3D,YAAI,aAAa,UAAU,SAAS,OAAO;AAC3C,YAAI,cAAc,SAAS,iBAAiB,WAAW;AAQvD,sBAAc,QAAQ,qBAAqB,SAAS,GAAG;AAAA,UACrD,cAAc;AAAA,YACZ,mBAAmB,SAAU,KAAK,OAAO;AACvC,qBAAO,SAAS,kBAAkB,aAAa,KAAK;AAAA,YACtD;AAAA,UACF;AAAA,UACA,aAAa;AAAA,QACf,CAAC;AACD,eAAO,wBAAwB;AAE/B,YAAI,CAAC,WAAW,IAAI,UAAU,GAAG;AAC/B,iBAAO,cAAc;AAAA,YACnB,UAAU;AAAA,UACZ,CAAC;AAAA,QACH;AAEA,oBAAY,qBAAqB,SAAU,SAAS;AAClD,wBAAc,QAAQ,OAAO;AAAA,QAC/B;AAAA,MACF;AAEA,YAAM,IAAI,MAAM;AAAA,IAClB,CAAC;AAAA,EACH;AAEA,EAAAD,SAAQ,OAAO;AACf,SAAOA;AACT,EAAE,aAAS;AAEX,IAAO,kBAAQ;;;AClJf,IAAI,YAEJ,SAAU,QAAQ;AAChB,YAAUE,YAAW,MAAM;AAE3B,WAASA,aAAY;AACnB,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,WAAU;AAEvB,UAAM,eAAe;AAErB,UAAM,cAAc,CAAC;AAErB,UAAM,qBAAqB,SAAU,WAAW;AAC9C,UAAI,aAAa,MAAM;AACrB,YAAI,SAAS,KAAK,QAAQ,EAAE,QAAQ,SAAS;AAC7C,YAAI,MAAM,KAAK;AACf,YAAI,SAAS,IAAI,UAAU,MAAM;AACjC,eAAO,UAAU,IAAI,YAAY,OAAO,UAAU,CAAC;AAAA,MACrD;AAAA,IACF;AAEA,WAAO;AAAA,EACT;AAEA,EAAAA,WAAU,UAAU,iBAAiB,SAAU,QAAQ;AACrD,QAAI,OAAO,uBAAuB,MAAM;AAAA,MACtC,iBAAiB,CAAC,OAAO;AAAA,MACzB,iBAAwB,MAAM,8BAA8B,IAAI;AAAA,IAClE,CAAC;AACD,QAAI,cAAqB,cAAc;AACvC,QAAI,gBAAgB,CAAC;AAErB,aAAS,IAAI,GAAGC,OAAM,KAAK,MAAM,GAAG,IAAIA,MAAK,KAAK;AAChD,UAAI,SAAS,KAAK,QAAQ,CAAC;AAC3B,kBAAY,IAAI,QAAQ,IAAI;AAAA,IAC9B;AAEA,QAAI,YAAY,yBAAiB,KAAK,KAAK,WAAW,GAAG,KAAK,OAAO,SAAS,KAAK,OAAO,YAAY;AACtG,IAAO,KAAK,UAAU,SAAS,SAAU,QAAQ;AAC/C,UAAI,OAAO,OAAO;AAElB,UAAI,CAAC,YAAY,IAAI,IAAI,GAAG;AAC1B,sBAAc,KAAK,IAAI;AAAA,MACzB;AAAA,IACF,CAAC;AAID,SAAK,aAAa,CAAC,GAAG,aAAa;AACnC,WAAO;AAAA,EACT;AAOA,EAAAD,WAAU,UAAU,kBAAkB,WAAY;AAChD,QAAI,WAAW,KAAK,OAAO;AAC3B,WAAO,YAAY,OAAO,KAAK,QAAQ,aAAa,OAAO,QAAQ,IAAI;AAAA,EACzE;AAEA,EAAAA,WAAU,UAAU,aAAa,WAAY;AAC3C,YAAQ,KAAK,gBAAgB,KAAK,MAAM,OAAO;AAAA,EACjD;AAQA,EAAAA,WAAU,UAAU,cAAc,SAAU,WAAW;AAGrD,QAAI,OAAO,KAAK,QAAQ;AACxB,WAAO,KAAK,IAAI,KAAK,aAAa,OAAO,GAAG,SAAS;AAAA,EACvD;AAMA,EAAAA,WAAU,UAAU,iBAAiB,SAAU,YAAY;AACzD,QAAI,OAAO,KAAK,QAAQ;AACxB,WAAO,KAAK,aAAa,KAAK,YAAY,UAAU,CAAC;AAAA,EACvD;AAMA,EAAAA,WAAU,UAAU,gBAAgB,SAAU,WAAW,gBAAgB,UAAU;AAEjF,QAAI,OAAO,KAAK,QAAQ;AACxB,QAAI,QAAQ,KAAK,YAAY,SAAS;AACtC,QAAI,OAAO,KAAK,QAAQ,SAAS;AACjC,QAAI,cAAc,KAAK;AACvB,QAAI,cAAc,CAAC;AAEnB,aAAS,IAAI,GAAG,IAAI,YAAY,QAAQ,KAAK;AAC3C,UAAI,aAAa,YAAY,GAAG,aAAa,YAAY,IAAI;AAC7D,UAAI,WAAW,KAAK,aAAa,OAAO;AAExC,UAAI,CAAC,MAAM,YAAY,GAAG,aAAa,IAAI,UAAU,UAAU,CAAC,GAAG;AACjE,oBAAY,KAAK,YAAY,GAAG,IAAI;AAAA,MACtC;AAAA,IACF;AAEA,WAAO,oBAAoB,WAAW;AAAA,MACpC,QAAQ,YAAY,KAAK,IAAI;AAAA,MAC7B,UAAU,CAAC,YAAY;AAAA,MACvB,QAAQ,CAAC,oBAAoB,aAAa;AAAA,QACxC;AAAA,QACA;AAAA,MACF,CAAC,CAAC;AAAA,IACJ,CAAC;AAAA,EACH;AAEA,EAAAA,WAAU,UAAU,UAAU,SAAU,MAAM;AAC5C,SAAK,OAAO,OAAO;AAAA,EACrB;AAEA,EAAAA,WAAU,UAAU,YAAY,SAAUE,SAAQ;AAChD,SAAK,OAAO,SAASA;AAAA,EACvB;AAEA,EAAAF,WAAU,UAAU,gBAAgB,SAAU,KAAK;AACjD,QAAI,WAAW,IAAI,QAAQ;AAC3B,QAAI,OAAO,aAAa,UAAU,GAAG,GAAG,IAAI,WAAW,IAAI,YAAY,IAAI,UAAU,IAAI;AACzF,SAAK,SAAS,IAAI,SAAS;AAE3B,SAAK,MAAM,SAAS;AAEpB,QAAI,SAAS,QAAQ,OAAO,IAAI,IAAI;AAClC,WAAK,MAAM,SAAS,KAAK,MAAM;AAC/B,WAAK,MAAM,OAAO;AAClB,WAAK,MAAM,YAAY;AAAA,IACzB;AAEA,WAAO;AAAA,EACT;AAEA,EAAAA,WAAU,OAAO;AACjB,EAAAA,WAAU,eAAe,CAAC,KAAK;AAC/B,EAAAA,WAAU,aAAa;AACvB,EAAAA,WAAU,gBAAgB;AAAA,IAIxB,GAAG;AAAA,IACH,kBAAkB;AAAA,IAElB,KAAK;AAAA,IAML,MAAM;AAAA,IAEN,KAAK;AAAA,IAUL,aAAa;AAAA,IAMb,kBAAkB;AAAA,IAIlB,gBAAgB;AAAA,IAEhB,QAAQ;AAAA,IACR,MAAM;AAAA,IACN,YAAY;AAAA,IACZ,cAAc;AAAA,IACd,OAAO;AAAA,MACL,MAAM;AAAA,MACN,OAAO;AAAA,IACT;AAAA,IAEA,WAAW;AAAA,MACT,aAAa;AAAA,MACb,aAAa;AAAA,MACb,WAAW;AAAA,IACb;AAAA,IACA,UAAU;AAAA,MACR,OAAO;AAAA,QACL,MAAM;AAAA,QACN,OAAO;AAAA,MACT;AAAA,MACA,WAAW;AAAA,QACT,WAAW;AAAA,MACb;AAAA,IACF;AAAA,IACA,QAAQ;AAAA,MACN,OAAO;AAAA,QACL,MAAM;AAAA,QACN,OAAO;AAAA,MACT;AAAA,MACA,WAAW;AAAA,QACT,OAAO;AAAA,MACT;AAAA,IACF;AAAA,IACA,cAAc;AAAA,EAChB;AACA,SAAOA;AACT,EAAE,cAAW;AAEb,IAAO,oBAAQ;;;ACrOf,SAAS,eAAe,OAAO,eAAe;AAC5C,MAAI,cAAc,CAAC;AACnB,EAAO,KAAK,OAAO,SAAU,MAAM;AACjC,SAAK,KAAK,KAAK,aAAa,OAAO,GAAG,SAAU,OAAO,KAAK;AAE1D,UAAI,SAAS,QAAQ,KAAK,QAAQ,GAAG;AACrC,kBAAY,UAAU,YAAY,WAAW,CAAC;AAE9C,UAAI,CAAC,MAAM,KAAK,GAAG;AACjB,oBAAY,QAAQ,KAAK,KAAK;AAAA,MAChC;AAAA,IACF,CAAC;AAAA,EACH,CAAC;AACD,SAAO,MAAM,GAAG,IAAI,MAAM,GAAG,aAAa,OAAO,GAAG,SAAU,OAAO,KAAK;AACxE,QAAI,SAAS,QAAQ,MAAM,GAAG,QAAQ,GAAG;AACzC,QAAIG,OAAM;AACV,QAAI,MAAM;AACV,QAAI,MAAM;AACV,QAAIC,OAAM,YAAY,QAAQ;AAE9B,aAAS,IAAI,GAAG,IAAIA,MAAK,KAAK;AAC5B,YAAM,KAAK,IAAI,KAAK,YAAY,QAAQ,EAAE;AAC1C,YAAM,KAAK,IAAI,KAAK,YAAY,QAAQ,EAAE;AAC1C,MAAAD,QAAO,YAAY,QAAQ;AAAA,IAC7B;AAEA,QAAI;AAEJ,QAAI,kBAAkB,OAAO;AAC3B,eAAS;AAAA,IACX,WAAW,kBAAkB,OAAO;AAClC,eAAS;AAAA,IACX,WAAW,kBAAkB,WAAW;AACtC,eAASA,OAAMC;AAAA,IACjB,OAAO;AACL,eAASD;AAAA,IACX;AAEA,WAAOC,SAAQ,IAAI,MAAM;AAAA,EAC3B,CAAC;AACH;AAEe,SAAR,iBAAkC,SAAS;AAChD,MAAI,eAAe,CAAC;AACpB,UAAQ,iBAAiB,OAAO,SAAU,aAAa;AACrD,QAAI,eAAe,YAAY,gBAAgB;AAC/C,QAAI,MAAM,eAAe,MAAM,aAAa,KAAK,MAAM,YAAY,WAAW;AAC9E,KAAC,aAAa,OAAO,aAAa,QAAQ,CAAC,GAAG,KAAK,WAAW;AAAA,EAChE,CAAC;AACD,EAAO,KAAK,cAAc,SAAU,YAAY,KAAK;AACnD,QAAI,OAAO,eAAsB,IAAI,YAAY,SAAU,aAAa;AACtE,aAAO,YAAY,QAAQ;AAAA,IAC7B,CAAC,GAAG,WAAW,GAAG,IAAI,qBAAqB,CAAC;AAE5C,aAAS,IAAI,GAAG,IAAI,WAAW,QAAQ,KAAK;AAC1C,iBAAW,GAAG,eAAe,WAAW,GAAG,QAAQ;AAAA,IACrD;AAGA,aAAS,IAAI,GAAG,IAAI,WAAW,QAAQ,KAAK;AAC1C,iBAAW,GAAG,cAAc;AAC5B,iBAAW,GAAG,eAAe,MAAM,KAAK,CAAC,WAAW,GAAG,gBAAgB;AACvE,iBAAW,GAAG,QAAQ,KAAK,aAAa,CAAC;AACzC,iBAAW,GAAG,aAAa,WAAW;AAAA,IACxC;AAAA,EACF,CAAC;AACH;;;ACnEe,SAAR,gBAAiC,SAAS;AAC/C,MAAI,mBAAmB,CAAC;AACxB,UAAQ,iBAAiB,OAAO,SAAU,WAAW;AACnD,QAAI,UAAU,UAAU,WAAW;AAEnC,QAAI,UAAU,gBAAgB,KAAK,iBAAiB,UAAU;AAC5D;AAAA,IACF;AAEA,QAAI,mBAAmB,CAAC;AACxB,IAAO,KAAK,UAAU,aAAa,SAAU,cAAc;AACzD,UAAI,MAAM,aAAa;AACvB,UAAIC,QAAO,aAAa;AAExB,UAAI,aAAa,IAAI,kBAAkB,KAAK,QAAQ,aAAa,QAAQ,GAAG;AAC1E,QAAAA,MAAK,KAAKA,MAAK,aAAa,OAAO,GAAG,SAAU,OAAO,KAAK;AAC1D,cAAI,OAAOA,MAAK,QAAQ,GAAG;AAC3B,cAAI,SAAS,IAAI,UAAU,IAAI;AAI/B,cAAI,CAAC,UAAU,MAAM,KAAK,GAAG;AAC3B;AAAA,UACF;AAEA,cAAI,SAAS,iBAAiB,SAAS;AACvC,cAAI,QAAQ,IAAI,YAAY,OAAO,UAAU,CAAC;AAC9C,2BAAiB,QAAQ,SAAS;AAClC,UAAAA,MAAK,cAAc,KAAK;AAAA,YACtB;AAAA,YACA;AAAA,UACF,CAAC;AAAA,QACH,CAAC;AAAA,MACH;AAAA,IACF,CAAC;AAED,QAAI,OAAO,UAAU,QAAQ;AAC7B,SAAK,KAAK,SAAU,KAAK;AACvB,UAAI,OAAO,KAAK,QAAQ,GAAG;AAC3B,UAAIC,UAAS,KAAK,cAAc,GAAG,KAAK,CAAC;AACzC,MAAAA,QAAO,YAAY,CAAC,iBAAiB;AACrC,WAAK,cAAc,KAAKA,OAAM;AAAA,IAChC,CAAC;AACD,qBAAiB,WAAW;AAAA,EAC9B,CAAC;AACH;;;ACvCO,SAASC,UAAQ,WAAW;AACjC,MAAIA,QAAU;AACd,YAAU,kBAAkB,eAAO;AACnC,YAAU,oBAAoB,iBAAS;AACvC,YAAU,eAAe,eAAe;AACxC,YAAU,kBAAkB,UAAU,SAAS,UAAU,WAAW,gBAAgB;AACpF,+BAA6B,OAAO,UAAU,cAAc;AAC9D;;;ACOO,SAAS,KAAK,QAAQ;AAC3B,MAAI,OAAO;AACX,OAAK,WAAW;AAAA,IACd,iBAAiB;AAAA,IACjB,UAAU;AAAA,IACV,QAAQ;AAAA,IACR,UAAU;AAAA,IACV,QAAQ;AAAA,IACR,OAAO;AAAA,IACP,GAAG;AAAA,IACH,QAAQ;AAAA,EACV;AACA,MAAI,QAAQ,CAAC,IAAI;AACjB,MAAI;AACJ,MAAI;AAEJ,SAAO,OAAO,MAAM,IAAI,GAAG;AAEzB,eAAW,KAAK;AAEhB,QAAI,KAAK,YAAY,SAAS,QAAQ;AACpC,UAAI,IAAI,SAAS;AAEjB,eAAS,IAAI,IAAI,GAAG,KAAK,GAAG,KAAK;AAC/B,YAAI,QAAQ,SAAS;AACrB,cAAM,WAAW;AAAA,UACf,iBAAiB;AAAA,UACjB,UAAU;AAAA,UACV,QAAQ;AAAA,UACR,UAAU;AAAA,UACV,QAAQ;AAAA,UACR,OAAO;AAAA,UACP;AAAA,UACA,QAAQ;AAAA,QACV;AACA,cAAM,KAAK,KAAK;AAAA,MAClB;AAAA,IACF;AAAA,EACF;AACF;AAaO,SAAS,UAAU,MAAMC,aAAY;AAC1C,MAAI,WAAW,KAAK,WAAW,KAAK,WAAW,CAAC;AAChD,MAAI,WAAW,KAAK,WAAW;AAC/B,MAAI,WAAW,KAAK,SAAS,IAAI,SAAS,KAAK,SAAS,IAAI,KAAK;AAEjE,MAAI,SAAS,QAAQ;AACnB,kBAAc,IAAI;AAClB,QAAI,YAAY,SAAS,GAAG,SAAS,SAAS,SAAS,SAAS,SAAS,GAAG,SAAS,UAAU;AAE/F,QAAI,UAAU;AACZ,WAAK,SAAS,SAAS,SAAS,SAAS,SAASA,YAAW,MAAM,QAAQ;AAC3E,WAAK,SAAS,WAAW,KAAK,SAAS,SAAS;AAAA,IAClD,OAAO;AACL,WAAK,SAAS,SAAS;AAAA,IACzB;AAAA,EACF,WAAW,UAAU;AACnB,SAAK,SAAS,SAAS,SAAS,SAAS,SAASA,YAAW,MAAM,QAAQ;AAAA,EAC7E;AAEA,OAAK,WAAW,SAAS,kBAAkB,UAAU,MAAM,UAAU,KAAK,WAAW,SAAS,mBAAmB,SAAS,IAAIA,WAAU;AAC1I;AAUO,SAAS,WAAW,MAAM;AAC/B,MAAI,QAAQ,KAAK,SAAS,SAAS,KAAK,WAAW,SAAS;AAC5D,OAAK,UAAU;AAAA,IACb,GAAG;AAAA,EACL,GAAG,IAAI;AACP,OAAK,SAAS,YAAY,KAAK,WAAW,SAAS;AACrD;AACO,SAAS,WAAW,IAAI;AAC7B,SAAO,UAAU,SAAS,KAAK;AACjC;AAKO,SAAS,iBAAiB,KAAK,GAAG;AACvC,SAAO,KAAK,KAAK;AACjB,SAAO;AAAA,IACL,GAAG,IAAI,KAAK,IAAI,GAAG;AAAA,IACnB,GAAG,IAAI,KAAK,IAAI,GAAG;AAAA,EACrB;AACF;AAKO,SAASC,aAAY,aAAa,KAAK;AAC5C,SAAc,cAAc,YAAY,mBAAmB,GAAG;AAAA,IAC5D,OAAO,IAAI,SAAS;AAAA,IACpB,QAAQ,IAAI,UAAU;AAAA,EACxB,CAAC;AACH;AAWA,SAAS,cAAc,MAAM;AAC3B,MAAI,WAAW,KAAK;AACpB,MAAI,IAAI,SAAS;AACjB,MAAI,QAAQ;AACZ,MAAI,SAAS;AAEb,SAAO,EAAE,KAAK,GAAG;AACf,QAAI,QAAQ,SAAS;AACrB,UAAM,SAAS,UAAU;AACzB,UAAM,SAAS,YAAY;AAC3B,cAAU,MAAM,SAAS;AACzB,aAAS,MAAM,SAAS,QAAQ;AAAA,EAClC;AACF;AAiBA,SAAS,UAAU,UAAU,UAAU,UAAUD,aAAY;AAC3D,MAAI,UAAU;AACZ,QAAI,eAAe;AACnB,QAAI,cAAc;AAClB,QAAI,cAAc,YAAY,WAAW,SAAS;AAClD,QAAI,aAAa;AACjB,QAAI,cAAc,aAAa,SAAS;AACxC,QAAI,aAAa,YAAY,SAAS;AACtC,QAAI,aAAa,YAAY,SAAS;AACtC,QAAI,YAAY,WAAW,SAAS;AAEpC,WAAO,aAAa,UAAU,UAAU,GAAG,cAAc,SAAS,WAAW,GAAG,cAAc,aAAa;AACzG,qBAAe,UAAU,YAAY;AACrC,oBAAc,SAAS,WAAW;AAClC,mBAAa,SAAS,WAAW;AACjC,UAAI,QAAQ,WAAW,SAAS,SAAS,YAAY,YAAY,SAAS,SAAS,aAAaA,YAAW,YAAY,WAAW;AAElI,UAAI,QAAQ,GAAG;AACb,oBAAY,aAAa,YAAY,UAAU,QAAQ,GAAG,UAAU,KAAK;AACzE,sBAAc;AACd,uBAAe;AAAA,MACjB;AAEA,mBAAa,WAAW,SAAS;AACjC,oBAAc,YAAY,SAAS;AACnC,qBAAe,aAAa,SAAS;AACrC,oBAAc,YAAY,SAAS;AAAA,IACrC;AAEA,QAAI,cAAc,CAAC,UAAU,YAAY,GAAG;AAC1C,mBAAa,SAAS,SAAS;AAC/B,mBAAa,SAAS,YAAY,YAAY;AAAA,IAChD;AAEA,QAAI,eAAe,CAAC,SAAS,WAAW,GAAG;AACzC,kBAAY,SAAS,SAAS;AAC9B,kBAAY,SAAS,YAAY,aAAa;AAC9C,iBAAW;AAAA,IACb;AAAA,EACF;AAEA,SAAO;AACT;AAQA,SAAS,UAAU,MAAM;AACvB,MAAI,WAAW,KAAK;AACpB,SAAO,SAAS,UAAU,KAAK,WAAW,SAAS,SAAS,SAAS,KAAK,KAAK,SAAS;AAC1F;AAQA,SAAS,SAAS,MAAM;AACtB,MAAI,WAAW,KAAK;AACpB,SAAO,SAAS,UAAU,KAAK,WAAW,SAAS,KAAK,KAAK,SAAS;AACxE;AAOA,SAAS,aAAa,YAAY,MAAM,UAAU;AAChD,SAAO,WAAW,SAAS,SAAS,eAAe,KAAK,aAAa,WAAW,SAAS,WAAW;AACtG;AAYA,SAAS,YAAY,IAAI,IAAI,OAAO;AAClC,MAAI,SAAS,SAAS,GAAG,SAAS,IAAI,GAAG,SAAS;AAClD,KAAG,SAAS,UAAU;AACtB,KAAG,SAAS,SAAS;AACrB,KAAG,SAAS,YAAY;AACxB,KAAG,SAAS,UAAU;AACtB,KAAG,SAAS,UAAU;AACxB;AASA,SAAS,kBAAkB,OAAO,OAAO;AACvC,SAAO,MAAM,eAAe,MAAM,aAAa,IAAI;AACrD;;;ACrQA,IAAI,gBAEJ,WAAY;AACV,WAASE,iBAAgB;AACvB,SAAK,cAAc,CAAC;AACpB,SAAK,cAAc,CAAC;AAAA,EACtB;AAEA,SAAOA;AACT,EAAE;AAEF,IAAI,WAEJ,SAAU,QAAQ;AAChB,YAAUC,WAAU,MAAM;AAE1B,WAASA,UAAS,MAAM;AACtB,WAAO,OAAO,KAAK,MAAM,IAAI,KAAK;AAAA,EACpC;AAEA,EAAAA,UAAS,UAAU,kBAAkB,WAAY;AAC/C,WAAO;AAAA,MACL,QAAQ;AAAA,MACR,MAAM;AAAA,IACR;AAAA,EACF;AAEA,EAAAA,UAAS,UAAU,kBAAkB,WAAY;AAC/C,WAAO,IAAI,cAAc;AAAA,EAC3B;AAEA,EAAAA,UAAS,UAAU,YAAY,SAAU,KAAK,OAAO;AACnD,QAAI,cAAc,MAAM;AACxB,QAAI,WAAW,YAAY;AAC3B,QAAI,cAAc,MAAM;AACxB,QAAI,gBAAgB,YAAY;AAChC,QAAI,eAAe,YAAY,WAAW;AAE1C,QAAI,aAAa,GAAG;AAClB,UAAI,OAAO,YAAY,IAAI,YAAY,EAAE;AACzC,UAAI,OAAO,cAAc,IAAI,cAAc,EAAE;AAC7C;AAAA,IACF;AAEA,QAAI,SAAS,MAAM;AACnB,QAAI,UAAU,WAAW,QAAQ,WAAW,OAAO,IAAI;AACvD,QAAI,WAAW,IAAI;AACnB,QAAI,eAAeC,cAAa,MAAM,cAAc,CAAC;AACrD,QAAI,WAAW,CAAC;AAChB,aAAS,WAAW,YAAY;AAChC,aAAS,YAAY,YAAY,aAAa,aAAa,YAAY,YAAY,aAAa;AAChG,QAAI,OAAO,YAAY,IAAI,YAAY,EAAE;AACzC,QAAI,OAAO,SAAS,IAAI,SAAS,EAAE;AACnC,QAAI,OAAO,cAAc,IAAI,cAAc,EAAE;AAC7C,aAAS,WAAW,cAAc;AAClC,QAAI,OAAO,SAAS,IAAI,SAAS,EAAE;AACnC,aAAS,WAAW,aAAa;AACjC,QAAI,OAAO,SAAS,IAAI,SAAS,EAAE;AACnC,QAAI,OAAO,aAAa,IAAI,aAAa,EAAE;AAE3C,aAAS,IAAI,GAAG,IAAI,WAAW,GAAG,KAAK;AACrC,UAAI,QAAQ,YAAY;AACxB,UAAI,OAAO,MAAM,IAAI,MAAM,EAAE;AAC7B,eAAS,WAAW,MAAM;AAC1B,UAAI,OAAO,SAAS,IAAI,SAAS,EAAE;AAAA,IACrC;AAAA,EACF;AAEA,SAAOD;AACT,EAAE,YAAI;AAEN,IAAI,WAEJ,SAAU,QAAQ;AAChB,YAAUE,WAAU,MAAM;AAE1B,WAASA,YAAW;AAClB,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,UAAS;AACtB,UAAM,aAAa,IAAY,cAAM;AACrC,WAAO;AAAA,EACT;AAEA,EAAAA,UAAS,UAAU,OAAO,SAAU,SAAS,KAAK;AAChD,SAAK,cAAc,IAAI,uBAAe,IAAI,MAAM,CAAC;AACjD,SAAK,kBAAkB;AAAA,MACrB,QAAQ,KAAK;AAAA,IACf;AACA,SAAK,MAAM,IAAI,KAAK,UAAU;AAAA,EAChC;AAEA,EAAAA,UAAS,UAAU,SAAS,SAAU,aAAa,SAAS,KAAK;AAC/D,QAAI,OAAO,YAAY,QAAQ;AAC/B,QAAI,aAAa,YAAY;AAC7B,QAAI,QAAQ,KAAK;AACjB,QAAIC,UAAS,YAAY,IAAI,QAAQ;AAErC,QAAIA,YAAW,UAAU;AACvB,YAAM,IAAI,WAAW,IAAI,WAAW,QAAQ;AAC5C,YAAM,IAAI,WAAW,IAAI,WAAW,SAAS;AAAA,IAC/C,OAAO;AACL,YAAM,IAAI,WAAW;AACrB,YAAM,IAAI,WAAW;AAAA,IACvB;AAEA,SAAK,oBAAoB,aAAa,GAAG;AAEzC,SAAK,kBAAkB,aAAa,SAAS,GAAG;AAEhD,QAAI,UAAU,KAAK;AACnB,SAAK,KAAK,OAAO,EAAE,IAAI,SAAU,QAAQ;AACvC,UAAI,gBAAgB,MAAM,MAAM,GAAG;AAEjC,mBAAW,MAAM,QAAQ,MAAM,OAAO,WAAW;AAAA,MACnD;AAAA,IACF,CAAC,EAAE,OAAO,SAAU,QAAQ,QAAQ;AAClC,UAAI,WAAW,QAAQ,iBAAiB,MAAM;AAE9C,UAAI,CAAC,gBAAgB,MAAM,MAAM,GAAG;AAClC,oBAAY,WAAW,SAAS,QAAQ,UAAU,OAAO,WAAW;AACpE;AAAA,MACF;AAGA,iBAAW,MAAM,QAAQ,UAAU,OAAO,WAAW;AAAA,IACvD,CAAC,EAAE,OAAO,SAAU,QAAQ;AAC1B,UAAI,WAAW,QAAQ,iBAAiB,MAAM;AAM9C,UAAI,UAAU;AACZ,mBAAW,SAAS,QAAQ,UAAU,OAAO,WAAW;AAAA,MAC1D;AAAA,IACF,CAAC,EAAE,QAAQ;AACX,SAAK,kBAAkB,YAAY,IAAI,gBAAgB;AAEvD,SAAK,wBAAwB,WAAW;AAExC,QAAI,YAAY,IAAI,mBAAmB,MAAM,MAAM;AACjD,WAAK,kBAAkB,SAAU,IAAI,WAAW;AAC9C,WAAG,IAAI,OAAO,EAAE,GAAG,SAAS,WAAY;AACtC,cAAI,eAAe;AAAA,YACjB,MAAM;AAAA,YACN,UAAU,YAAY;AAAA,YACtB;AAAA,UACF,CAAC;AAAA,QACH,CAAC;AAAA,MACH,CAAC;AAAA,IACH;AAEA,SAAK,QAAQ;AAAA,EACf;AAEA,EAAAD,UAAS,UAAU,sBAAsB,SAAU,aAAa,KAAK;AACnE,QAAI,OAAO,YAAY,QAAQ;AAC/B,QAAI,SAAS,CAAC;AACd,SAAK,KAAK,SAAU,KAAK;AACvB,UAAIC,UAAS,KAAK,cAAc,GAAG;AAEnC,UAAIA,WAAU,CAAC,MAAMA,QAAO,CAAC,KAAK,CAAC,MAAMA,QAAO,CAAC,GAAG;AAClD,eAAO,KAAK,CAAC,CAACA,QAAO,GAAG,CAACA,QAAO,CAAC,CAAC;AAAA,MACpC;AAAA,IACF,CAAC;AACD,QAAI,MAAM,CAAC;AACX,QAAI,MAAM,CAAC;AACX,IAAK,WAAW,QAAQ,KAAK,GAAG;AAGhC,QAAI,SAAS,KAAK;AAClB,QAAI,SAAS,KAAK;AAElB,QAAI,IAAI,KAAK,IAAI,OAAO,GAAG;AACzB,UAAI,KAAK,SAAS,OAAO,KAAK,IAAI,KAAK;AACvC,UAAI,KAAK,SAAS,OAAO,KAAK,IAAI,KAAK;AAAA,IACzC;AAEA,QAAI,IAAI,KAAK,IAAI,OAAO,GAAG;AACzB,UAAI,KAAK,SAAS,OAAO,KAAK,IAAI,KAAK;AACvC,UAAI,KAAK,SAAS,OAAO,KAAK,IAAI,KAAK;AAAA,IACzC;AAEA,QAAI,eAAe,YAAY,mBAAmB,IAAI,aAAK;AAC3D,iBAAa,YAAY,YAAY,IAAI,YAAY;AACrD,iBAAa,gBAAgB,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,KAAK,IAAI,EAAE;AAC7E,iBAAa,UAAU,YAAY,IAAI,QAAQ,GAAG,GAAG;AACrD,iBAAa,QAAQ,YAAY,IAAI,MAAM,CAAC;AAE5C,SAAK,MAAM,KAAK;AAAA,MACd,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA,MAChB,QAAQ,aAAa;AAAA,MACrB,QAAQ,aAAa;AAAA,IACvB,CAAC;AACD,SAAK,OAAO;AACZ,SAAK,OAAO;AAAA,EACd;AAEA,EAAAD,UAAS,UAAU,oBAAoB,SAAU,aAAa,SAAS,KAAK;AAC1E,QAAI,QAAQ;AAEZ,QAAI,aAAa,KAAK;AACtB,QAAI,iBAAiB,KAAK;AAC1B,QAAI,QAAQ,KAAK;AACjB,eAAW,kBAAkB,SAAU,GAAG,GAAG,GAAG;AAC9C,UAAI,OAAO,MAAM,gBAAgB;AACjC,WAAK,eAAe,MAAM,SAAS;AACnC,aAAO,KAAK,QAAQ,GAAG,CAAC,KAAK,CAAC,oBAAoB,GAAG,KAAK,WAAW;AAAA,IACvE,CAAC;AACD,eAAW,OAAO,YAAY,IAAI,MAAM,CAAC;AACzC,mBAAe,YAAY,YAAY,IAAI,YAAY;AACvD,mBAAe,OAAO,YAAY,iBAAiB,QAAQ;AAC3D,eAAW,IAAI,KAAK,EAAE,IAAI,MAAM,EAAE,GAAG,OAAO,SAAU,GAAG;AACvD,MAAW,gBAAgB,gBAAgB,EAAE,IAAI,EAAE,EAAE;AACrD,UAAI,eAAe;AAAA,QACjB,UAAU,YAAY;AAAA,QACtB,MAAM;AAAA,QACN,IAAI,EAAE;AAAA,QACN,IAAI,EAAE;AAAA,MACR,CAAC;AAAA,IACH,CAAC,EAAE,GAAG,QAAQ,SAAU,GAAG;AACzB,MAAW,iBAAiB,gBAAgB,EAAE,OAAO,EAAE,SAAS,EAAE,OAAO;AACzE,UAAI,eAAe;AAAA,QACjB,UAAU,YAAY;AAAA,QACtB,MAAM;AAAA,QACN,MAAM,EAAE;AAAA,QACR,SAAS,EAAE;AAAA,QACX,SAAS,EAAE;AAAA,MACb,CAAC;AAED,YAAM,wBAAwB,WAAW;AAGzC,UAAI,kBAAkB;AAAA,IACxB,CAAC;AAAA,EACH;AAEA,EAAAA,UAAS,UAAU,0BAA0B,SAAU,aAAa;AAClE,QAAI,OAAO,YAAY,QAAQ;AAE/B,QAAI,YAAY,KAAK,oBAAoB,WAAW;AAEpD,SAAK,kBAAkB,SAAU,IAAI,KAAK;AACxC,SAAG,eAAe,SAAS;AAAA,IAC7B,CAAC;AAAA,EACH;AAEA,EAAAA,UAAS,UAAU,sBAAsB,SAAU,aAAa;AAC9D,QAAI,WAAW,YAAY;AAE3B,QAAI,SAAS,SAAS,QAAQ;AAC5B,aAAO;AAAA,IACT;AAEA,QAAI,iBAAiB,KAAK;AAC1B,QAAI,YAAY,SAAS,UAAU;AAEnC,QAAI,WAAW,SAAS,QAAQ;AAChC,QAAI,aAAa,WAAW,KAAK,iBAAiB;AAClD,WAAO,YAAY;AAAA,EACrB;AAEA,EAAAA,UAAS,UAAU,UAAU,WAAY;AACvC,SAAK,eAAe,KAAK,YAAY,QAAQ;AAC7C,SAAK,kBAAkB;AAAA,EACzB;AAEA,EAAAA,UAAS,UAAU,SAAS,WAAY;AACtC,SAAK,WAAW,UAAU;AAE1B,SAAK,QAAQ;AAAA,EACf;AAEA,EAAAA,UAAS,OAAO;AAChB,SAAOA;AACT,EAAE,aAAS;AAEX,SAAS,gBAAgB,MAAM,WAAW;AACxC,MAAIC,UAAS,KAAK,cAAc,SAAS;AACzC,SAAOA,WAAU,CAAC,MAAMA,QAAO,CAAC,KAAK,CAAC,MAAMA,QAAO,CAAC;AACtD;AAEA,SAAS,WAAW,MAAM,WAAW,UAAU,OAAO,aAAa;AACjE,MAAI,SAAS,CAAC;AACd,MAAI,OAAO,KAAK,KAAK,mBAAmB,SAAS;AACjD,MAAI,YAAY,KAAK,SAAS;AAC9B,MAAI,cAAc,KAAK,UAAU,OAAO,EAAE;AAC1C,MAAI,mBAAmB,KAAK,aAAa,SAAS,KAAK,SAAS,WAAW,IAAI,cAAc;AAC7F,MAAI,cAAc,KAAK,KAAK;AAC5B,MAAI,SAAS,KAAK,eAAe,cAAc,OAAO,KAAK,cAAc;AACzE,MAAI,iBAAiB,KAAK,iBAAiB,OAAO,SAAS;AAC3D,MAAI,eAAe,OAAO,UAAU;AACpC,MAAI,kBAAkB,iBAAiB;AAAA,IACrC,GAAG,eAAe;AAAA,IAClB,GAAG,eAAe;AAAA,IAClB,MAAM,eAAe;AAAA,IACrB,MAAM,eAAe;AAAA,EACvB,IAAI;AACJ,MAAI,eAAe,KAAK,UAAU;AAElC,MAAI,QAAQ;AACV,eAAW,IAAI,eAAU,MAAM,WAAW,MAAM;AAAA,MAC9C;AAAA,MACA,cAAc;AAAA,IAChB,CAAC;AACD,aAAS,IAAI,gBAAgB;AAC7B,aAAS,IAAI,gBAAgB;AAAA,EAC/B,OAAO;AACL,aAAS,WAAW,MAAM,WAAW,MAAM;AAAA,MACzC;AAAA,MACA,cAAc;AAAA,IAChB,CAAC;AAAA,EACH;AAEA,WAAS,kBAAkB,SAAS;AACpC,WAAS,kBAAkB,SAAS;AACpC,WAAS,eAAe,aAAa;AACrC,WAAS,eAAe,aAAa;AACrC,QAAM,IAAI,QAAQ;AAClB,OAAK,iBAAiB,WAAW,QAAQ;AACzC,WAAS,SAAS,SAAS;AAC3B,WAAS,SAAS,SAAS;AAC3B,EAAQ,YAAY,UAAU;AAAA,IAC5B,GAAG,aAAa;AAAA,IAChB,GAAG,aAAa;AAAA,EAClB,GAAG,WAAW;AACd,MAAI,aAAa,SAAS,cAAc;AAExC,MAAI,YAAY,IAAI,QAAQ,MAAM,UAAU;AAC1C,QAAI,WAAW,YAAY,SAAS;AACpC,QAAI,aAAa,SAAS,UAAU;AACpC,QAAI,WAAW,SAAS,SAAS;AACjC,QAAI,MAAM;AACV,QAAI,SAAS;AAEb,QAAI,aAAa,MAAM,WAAW,KAAK,KAAK,aAAa,QAAQ,SAAS,SAAS,QAAQ;AACzF,UAAIC,UAAS;AAAA,QACX,IAAI,SAAS,SAAS,GAAG,UAAU,EAAE,IAAI,SAAS,SAAS,WAAW,GAAG,UAAU,EAAE,KAAK;AAAA,QAC1F,IAAI,SAAS,SAAS,GAAG,UAAU,EAAE,IAAI,SAAS,SAAS,WAAW,GAAG,UAAU,EAAE,KAAK;AAAA,MAC5F;AACA,YAAM,KAAK,MAAMA,QAAO,IAAI,WAAW,GAAGA,QAAO,IAAI,WAAW,CAAC;AAEjE,UAAI,MAAM,GAAG;AACX,cAAM,KAAK,KAAK,IAAI;AAAA,MACtB;AAEA,eAASA,QAAO,IAAI,WAAW;AAE/B,UAAI,QAAQ;AACV,cAAM,MAAM,KAAK;AAAA,MACnB;AAAA,IACF,OAAO;AACL,YAAM,KAAK,MAAM,aAAa,IAAI,WAAW,GAAG,aAAa,IAAI,WAAW,CAAC;AAE7E,UAAI,MAAM,GAAG;AACX,cAAM,KAAK,KAAK,IAAI;AAAA,MACtB;AAEA,UAAI,KAAK,SAAS,WAAW,KAAK,KAAK,SAAS,WAAW,KAAK,KAAK,aAAa,OAAO;AACvF,iBAAS,aAAa,IAAI,WAAW;AAErC,YAAI,QAAQ;AACV,gBAAM,MAAM,KAAK;AAAA,QACnB;AAAA,MACF,OAAO;AACL,iBAAS,aAAa,IAAI,WAAW;AAErC,YAAI,CAAC,QAAQ;AACX,gBAAM,MAAM,KAAK;AAAA,QACnB;AAAA,MACF;AAAA,IACF;AAEA,QAAI,eAAe,SAAS,SAAS;AACrC,QAAI,mBAAmB,UAAU,SAAS,OAAO;AACjD,QAAI,SAAS,iBAAiB,IAAI,QAAQ;AAC1C,QAAI,oBAAoB,UAAU,KAAK,KAAK;AAC5C,QAAI,cAAc,WAAW,eAAe;AAE5C,QAAI,aAAa;AACf,iBAAW,cAAc;AAAA,QACvB,UAAU,iBAAiB,IAAI,UAAU,KAAK;AAAA,QAC9C,UAAU,UAAU,OAAO,CAAC,MAAM;AAAA,QAClC,QAAQ;AAAA,MACV,CAAC;AACD,kBAAY,SAAS,iBAAiB,QAAQ;AAAA,IAChD;AAAA,EACF;AAGA,MAAI,QAAQ,UAAU,IAAI,CAAC,YAAY,OAAO,CAAC;AAC/C,MAAI,mBAAmB,UAAU,aAAoB,YAAY,KAAK,oBAAoB,GAAG,KAAK,qBAAqB,CAAC,IAAI,UAAU,aAAa,KAAK,oBAAoB,IAAI,UAAU,eAAe,KAAK,qBAAqB,IAAI;AAEvO,MAAI,kBAAkB;AAEpB,cAAU,QAAQ,EAAE,QAAQ;AAAA,EAC9B;AAEA,WAAS,aAAa,MAAM,aAAa,UAAU,iBAAiB,cAAc,cAAc,KAAK;AAErG,MAAI,SAAS,QAAQ;AACnB,aAAS,qBAAqB,SAAU,SAAS;AAC/C,UAAI,YAAY,QAAQ;AAItB,YAAI,WAAW,KAAK,cAAc,KAAK,iBAAiB,KAAK,WAAW,SAAS;AAEjF,YAAI,EAAE,YAAY,SAAS,eAAe,mBAAmB;AAC3D,wBAAc,SAAS,QAAQ,OAAO;AAAA,QACxC;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;AAEA,SAAS,SAAS,aAAa,MAAM,aAAa,UAAU,iBAAiB,cAAc,cAAc,OAAO;AAC9G,MAAI,YAAY,KAAK,SAAS;AAC9B,MAAI,YAAY,YAAY,IAAI,WAAW;AAC3C,MAAID,UAAS,YAAY,IAAI,QAAQ;AACrC,MAAI,SAAS,YAAY,UAAU;AACnC,MAAI,YAAY,YAAY,IAAI,CAAC,aAAa,WAAW,CAAC;AAC1D,MAAI,mBAAmB,YAAY,IAAI,kBAAkB;AACzD,MAAI,YAAY,UAAU,SAAS,WAAW,EAAE,aAAa;AAC7D,MAAI,OAAO,SAAS;AAGpB,MAAI,cAAc,SAAS;AACzB,QAAI,KAAK,cAAc,KAAK,eAAe,aAAa;AACtD,UAAI,CAAC,MAAM;AACT,eAAO,SAAS,SAAS,IAAY,oBAAY;AAAA,UAC/C,OAAO,aAAaA,SAAQ,QAAQ,WAAW,iBAAiB,eAAe;AAAA,QACjF,CAAC;AAAA,MACH;AAEA,MAAQ,YAAY,MAAM;AAAA,QACxB,OAAO,aAAaA,SAAQ,QAAQ,WAAW,cAAc,YAAY;AAAA,MAC3E,GAAG,WAAW;AAAA,IAChB;AAAA,EACF,WAAW,cAAc,YAAY;AACnC,QAAIA,YAAW,cAAc;AAC3B,UAAI,SAAS,eAAe,KAAK,YAAY,KAAK,SAAS,WAAW,KAAK,KAAK,aAAa,MAAM;AACjG,YAAI,WAAW,KAAK;AACpB,YAAI,cAAc,CAAC;AAEnB,iBAAS,IAAI,GAAG,IAAI,SAAS,QAAQ,KAAK;AACxC,cAAI,cAAc,SAAS,GAAG,UAAU;AACxC,sBAAY,KAAK,CAAC,YAAY,GAAG,YAAY,CAAC,CAAC;AAAA,QACjD;AAEA,YAAI,CAAC,MAAM;AACT,iBAAO,SAAS,SAAS,IAAI,SAAS;AAAA,YACpC,OAAO;AAAA,cACL,aAAa,CAAC,aAAa,GAAG,aAAa,CAAC;AAAA,cAC5C,aAAa,CAAC,CAAC,aAAa,GAAG,aAAa,CAAC,CAAC;AAAA,cAC9C;AAAA,cACA,cAAc;AAAA,YAChB;AAAA,UACF,CAAC;AAAA,QACH;AAEA,QAAQ,YAAY,MAAM;AAAA,UACxB,OAAO;AAAA,YACL,aAAa,CAAC,aAAa,GAAG,aAAa,CAAC;AAAA,YAC5C;AAAA,UACF;AAAA,QACF,GAAG,WAAW;AAAA,MAChB;AAAA,IACF,OAAO;AACL,UAAI,MAAuC;AACzC,cAAM,IAAI,MAAM,8DAA8D;AAAA,MAChF;AAAA,IACF;AAAA,EACF;AAGA,MAAI,QAAQ,EAAE,cAAc,cAAc,CAAC,KAAK,WAAW;AACzD,SAAK,SAAgB,SAAS;AAAA,MAC5B,eAAe;AAAA,MACf,MAAM;AAAA,IACR,GAAG,SAAS,CAAC;AACb,6BAAyB,MAAM,WAAW,WAAW;AACrD,yBAAqB,IAAI;AACzB,UAAM,IAAI,IAAI;AAAA,EAChB;AACF;AAEA,SAAS,eAAe,MAAM,MAAM,OAAO,aAAa,oBAAoB;AAC1E,MAAI,cAAc,KAAK,KAAK;AAE5B,MAAI,KAAK,cAAc,aAAa,IAAI,GACpC,SAAS,GAAG,QACZ,eAAe,GAAG;AAEtB,MAAI,WAAW,KAAK,iBAAiB,KAAK,SAAS;AAEnD,MAAI,CAAC,UAAU;AACb;AAAA,EACF;AAEA,MAAI,iBAAiB,KAAK,iBAAiB,OAAO,SAAS;AAC3D,MAAI,aAAa,eAAe;AAKhC,MAAI,OAAO,SAAS,WAAW,OAAO,aAAa,SAAS,OAAO,SAAS,WAAW,IAAI,aAAa;AACxG,MAAI,YAAY,YAAY,IAAI,WAAW;AAC3C,MAAI,YAAY,YAAY,IAAI,QAAQ;AACxC,MAAI,SAAS,YAAY,IAAI,QAAQ;AACrC,MAAI,YAAY,YAAY,IAAI,CAAC,aAAa,WAAW,CAAC;AAE1D,MAAI,MAAM;AACR,QAAI,cAAc,SAAS;AACzB,MAAQ,cAAc,MAAM;AAAA,QAC1B,OAAO,aAAa,WAAW,QAAQ,WAAW,cAAc,YAAY;AAAA,QAC5E,OAAO;AAAA,UACL,SAAS;AAAA,QACX;AAAA,MACF,GAAG,aAAa;AAAA,QACd,IAAI,WAAY;AACd,gBAAM,OAAO,IAAI;AAAA,QACnB;AAAA,QACA,WAAW;AAAA,MACb,CAAC;AAAA,IACH,WAAW,cAAc,cAAc,YAAY,IAAI,QAAQ,MAAM,cAAc;AACjF,MAAQ,cAAc,MAAM;AAAA,QAC1B,OAAO;AAAA,UACL,aAAa,CAAC,aAAa,GAAG,aAAa,CAAC;AAAA,UAC5C,aAAa,CAAC,CAAC,aAAa,GAAG,aAAa,CAAC,CAAC;AAAA,QAChD;AAAA,QACA,OAAO;AAAA,UACL,SAAS;AAAA,QACX;AAAA,MACF,GAAG,aAAa;AAAA,QACd,IAAI,WAAY;AACd,gBAAM,OAAO,IAAI;AAAA,QACnB;AAAA,QACA,WAAW;AAAA,MACb,CAAC;AAAA,IACH;AAAA,EACF;AACF;AAEA,SAAS,cAAc,aAAa,MAAM;AACxC,MAAI,SAAS,KAAK,eAAe,cAAc,OAAO,KAAK,cAAc;AACzE,MAAI;AAEJ,SAAO,eAAe,OAAO,UAAU,GAAG,gBAAgB,MAAM;AAC9D,aAAS,OAAO,eAAe,cAAc,SAAS,OAAO,cAAc;AAAA,EAC7E;AAEA,SAAO;AAAA,IACL;AAAA,IACA;AAAA,EACF;AACF;AAEA,SAAS,WAAW,MAAM,WAAW,UAAU,OAAO,aAAa;AACjE,MAAI,OAAO,KAAK,KAAK,mBAAmB,SAAS;AACjD,MAAI,cAAc,KAAK,KAAK;AAC5B,MAAI,eAAe,cAAc,aAAa,IAAI,EAAE;AAEpD,MAAI,qBAAqB;AAAA,IACvB,UAAU,YAAY,IAAI,yBAAyB;AAAA,IACnD,QAAQ,YAAY,IAAI,uBAAuB;AAAA,EACjD;AACA,EAAQ,cAAc,UAAU;AAAA,IAC9B,GAAG,aAAa,IAAI;AAAA,IACpB,GAAG,aAAa,IAAI;AAAA,EACtB,GAAG,aAAa;AAAA,IACd,IAAI,WAAY;AACd,YAAM,OAAO,QAAQ;AACrB,WAAK,iBAAiB,WAAW,IAAI;AAAA,IACvC;AAAA,IACA,WAAW;AAAA,EACb,CAAC;AACD,WAAS,QAAQ,MAAM,KAAK,WAAW;AAAA,IACrC,WAAW;AAAA,IACX,WAAW;AAAA,EACb,CAAC;AAED,OAAK,SAAS,QAAQ,SAAU,WAAW;AACzC,mBAAe,WAAW,MAAM,OAAO,aAAa,kBAAkB;AAAA,EACxE,CAAC;AAED,iBAAe,MAAM,MAAM,OAAO,aAAa,kBAAkB;AACnE;AAEA,SAAS,aAAa,WAAW,QAAQ,WAAW,cAAc,cAAc;AAC9E,MAAI;AACJ,MAAI;AACJ,MAAI;AACJ,MAAI;AACJ,MAAI;AACJ,MAAI;AACJ,MAAI;AACJ,MAAI;AAEJ,MAAI,cAAc,UAAU;AAC1B,SAAK,aAAa;AAClB,SAAK,aAAa;AAClB,SAAK,aAAa;AAClB,SAAK,aAAa;AAClB,QAAI,cAAc,iBAAiB,IAAI,EAAE;AACzC,QAAI,cAAc,iBAAiB,IAAI,MAAM,KAAK,MAAM,SAAS;AACjE,QAAI,cAAc,iBAAiB,IAAI,MAAM,KAAK,MAAM,SAAS;AACjE,QAAI,cAAc,iBAAiB,IAAI,EAAE;AACzC,WAAO;AAAA,MACL,IAAI,YAAY,KAAK;AAAA,MACrB,IAAI,YAAY,KAAK;AAAA,MACrB,IAAI,YAAY,KAAK;AAAA,MACrB,IAAI,YAAY,KAAK;AAAA,MACrB,MAAM,YAAY,KAAK;AAAA,MACvB,MAAM,YAAY,KAAK;AAAA,MACvB,MAAM,YAAY,KAAK;AAAA,MACvB,MAAM,YAAY,KAAK;AAAA,IACzB;AAAA,EACF,OAAO;AACL,SAAK,aAAa;AAClB,SAAK,aAAa;AAClB,SAAK,aAAa;AAClB,SAAK,aAAa;AAElB,QAAI,WAAW,QAAQ,WAAW,MAAM;AACtC,aAAO,MAAM,KAAK,MAAM;AACxB,aAAO;AACP,aAAO,MAAM,KAAK,MAAM;AACxB,aAAO;AAAA,IACT;AAEA,QAAI,WAAW,QAAQ,WAAW,MAAM;AACtC,aAAO;AACP,aAAO,MAAM,KAAK,MAAM;AACxB,aAAO;AACP,aAAO,MAAM,KAAK,MAAM;AAAA,IAC1B;AAAA,EACF;AAEA,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF;AACF;AAEA,IAAO,mBAAQ;;;ACvpBf,IAAI,QAAQ,UAAU;AAEtB,SAAS,eAAe,KAAK;AAC3B,MAAI,WAAW,IAAI;AACnB,MAAI,QAAQ,IAAI;AAEhB,MAAI,CAAC,OAAO;AACV,YAAQ;AAAA,MACN,MAAM;AAAA,IACR;AACA,QAAI,YAAY;AAAA,MACd,MAAM;AAAA,IACR;AAAA,EACF;AAEA,MAAI,QAAQ,IAAI,WAAW;AAC3B,UAAQ,UAAU,OAAO,GAAG;AAE5B,OAAK,OAAO,SAAU,MAAM;AAC1B,SAAK,SAAS,sBAAsB,SAAU,YAAY;AACxD,WAAK,WAAW,YAAY,MAAM,mBAAmB,GAAG,CAAC;AAAA,IAC3D,CAAC;AAAA,EACH,CAAC;AAED,WAAS,WAAW,gBAAgB,MAAM,uBAAuB,GAAG,CAAC;AAGrE,OAAK,SAAS,mBAAmB,SAAU,YAAY;AACrD,aAAS,WAAW,YAAY,MAAM,iBAAiB,GAAG,CAAC;AAAA,EAC7D,CAAC;AAED,SAAO,MAAM,SAAS,cAAc,QAAQ;AAC9C;AAEA,SAAS,kBAAkB,KAAK,KAAK;AACnC,MAAI,WAAW,IAAI,GAAG;AAEpB,QAAI,QAAQ,OAAO,CAAC,GAAG,MAAM,IAAI,EAAE,KAAK;AACxC,UAAM,KAAK,YAAY;AACvB,YAAQ,KAAK,OAAO,GAAG;AAAA,EACzB,OAAO;AAEL,eAAW,KAAK,KAAK,UAAU,MAAM,IAAI,EAAE,UAAU,GAAG;AAAA,EAC1D;AAEA,SAAO;AACT;AAEA,SAAS,gBAAgB,KAAK,KAAK;AACjC,MAAI,UAAU,IAAI,OAAO,OAAO;AAChC,SAAO;AACT;AAEA,SAAS,sBAAsB,KAAK,KAAK;AAKvC,OAAK,MAAM,GAAG,EAAE,OAAO,SAAU,MAAM,UAAU;AAC/C,aAAS,OAAO,WAAW,KAAK,aAAa,GAAG,UAAU,KAAK,GAAG;AAAA,EACpE,CAAC;AACD,SAAO;AACT;AASA,SAAS,cAAc,UAAU;AAC/B,MAAI,WAAW,MAAM,IAAI,EAAE;AAC3B,SAAO,YAAY,QAAQ,YAAY,OAAO,WAAW,MAAM,QAAQ,EAAE,MAAM;AACjF;AAMA,SAAS,mBAAmB;AAC1B,MAAI,WAAW,MAAM,IAAI,EAAE;AAC3B,SAAO,YAAY,OAAO,CAAC;AAAA,IACzB,MAAM;AAAA,EACR,CAAC,IAAI,IAAI,KAAK,MAAM,QAAQ,EAAE,KAAK,GAAG,SAAU,MAAM;AACpD,WAAO;AAAA,MACL;AAAA,MACA,MAAM,MAAM,QAAQ,EAAE,MAAM;AAAA,IAC9B;AAAA,EACF,CAAC;AACH;AAEA,SAAS,WAAW,MAAM;AACxB,SAAO,MAAM,IAAI,EAAE,aAAa;AAClC;AAEA,SAAS,QAAQ,UAAU,OAAO,KAAK;AACrC,QAAM,QAAQ,EAAE,QAAQ,CAAC;AACzB,OAAK,OAAO,SAAU,MAAM,UAAU;AACpC,eAAW,MAAM,UAAU,UAAU,GAAG;AAAA,EAC1C,CAAC;AACH;AAEA,SAAS,WAAW,MAAM,UAAU,UAAU,KAAK;AACjD,QAAM,QAAQ,EAAE,MAAM,YAAY;AAClC,QAAM,IAAI,EAAE,WAAW;AACvB,OAAK,WAAW;AAEhB,MAAI,IAAI,QAAQ;AACd,SAAK,IAAI,cAAc,IAAI;AAC3B,QAAI,OAAO,IAAI,UAAU,aAAa;AAAA,EACxC;AAGA,OAAK,gBAAgB;AACrB,OAAK,mBAAmB;AAC1B;AAEA,IAAO,yBAAQ;;;AClHf,IAAI,WAEJ,WAAY;AACV,WAASE,UAAS,MAAM,UAAU;AAChC,SAAK,QAAQ;AACb,SAAK,SAAS;AASd,SAAK,YAAY;AACjB,SAAK,WAAW,CAAC;AACjB,SAAK,eAAe,CAAC;AACrB,SAAK,WAAW;AAChB,SAAK,OAAO,QAAQ;AACpB,SAAK,WAAW;AAAA,EAClB;AAMA,EAAAA,UAAS,UAAU,YAAY,WAAY;AACzC,WAAO,KAAK,YAAY;AAAA,EAC1B;AAEA,EAAAA,UAAS,UAAU,WAAW,SAAU,SAAS,IAAI,SAAS;AAC5D,QAAW,WAAW,OAAO,GAAG;AAC9B,gBAAU;AACV,WAAK;AACL,gBAAU;AAAA,IACZ;AAEA,cAAU,WAAW,CAAC;AAEtB,QAAW,SAAS,OAAO,GAAG;AAC5B,gBAAU;AAAA,QACR,OAAO;AAAA,MACT;AAAA,IACF;AAEA,QAAI,QAAQ,QAAQ,SAAS;AAC7B,QAAI,WAAW,KAAK,QAAQ,QAAQ;AACpC,QAAI;AACJ,cAAU,eAAe,mBAAmB,GAAG,KAAK,SAAS,IAAI;AAEjE,aAAS,IAAI,GAAG,CAAC,oBAAoB,IAAI,SAAS,QAAQ,KAAK;AAC7D,eAAS,GAAG,SAAS,SAAS,IAAI,OAAO;AAAA,IAC3C;AAEA,cAAU,eAAe,GAAG,KAAK,SAAS,IAAI;AAAA,EAChD;AAMA,EAAAA,UAAS,UAAU,uBAAuB,SAAU,OAAO;AACzD,QAAI,SAAS;AACb,SAAK,QAAQ;AAEb,aAAS,IAAI,GAAG,IAAI,KAAK,SAAS,QAAQ,KAAK;AAC7C,UAAI,QAAQ,KAAK,SAAS;AAC1B,YAAM,qBAAqB,QAAQ,CAAC;AAEpC,UAAI,MAAM,SAAS,QAAQ;AACzB,iBAAS,MAAM;AAAA,MACjB;AAAA,IACF;AAEA,SAAK,SAAS,SAAS;AAAA,EACzB;AAEA,EAAAA,UAAS,UAAU,cAAc,SAAU,IAAI;AAC7C,QAAI,KAAK,MAAM,MAAM,IAAI;AACvB,aAAO;AAAA,IACT;AAEA,aAAS,IAAI,GAAG,WAAW,KAAK,UAAUC,OAAM,SAAS,QAAQ,IAAIA,MAAK,KAAK;AAC7E,UAAI,MAAM,SAAS,GAAG,YAAY,EAAE;AAEpC,UAAI,KAAK;AACP,eAAO;AAAA,MACT;AAAA,IACF;AAAA,EACF;AAEA,EAAAD,UAAS,UAAU,WAAW,SAAU,MAAM;AAC5C,QAAI,SAAS,MAAM;AACjB,aAAO;AAAA,IACT;AAEA,aAAS,IAAI,GAAG,WAAW,KAAK,UAAUC,OAAM,SAAS,QAAQ,IAAIA,MAAK,KAAK;AAC7E,UAAI,MAAM,SAAS,GAAG,SAAS,IAAI;AAEnC,UAAI,KAAK;AACP,eAAO;AAAA,MACT;AAAA,IACF;AAAA,EACF;AAOA,EAAAD,UAAS,UAAU,eAAe,SAAU,aAAa;AACvD,QAAI,YAAY,CAAC;AACjB,QAAI,OAAO,cAAc,OAAO,KAAK;AAErC,WAAO,MAAM;AACX,gBAAU,KAAK,IAAI;AACnB,aAAO,KAAK;AAAA,IACd;AAEA,cAAU,QAAQ;AAClB,WAAO;AAAA,EACT;AAEA,EAAAA,UAAS,UAAU,sBAAsB,WAAY;AACnD,QAAI,UAAU,CAAC;AACf,QAAI,WAAW;AAEf,WAAO,UAAU;AACf,cAAQ,KAAK,SAAS,SAAS;AAC/B,iBAAW,SAAS;AAAA,IACtB;AAEA,YAAQ,QAAQ;AAChB,WAAO;AAAA,EACT;AAEA,EAAAA,UAAS,UAAU,uBAAuB,WAAY;AACpD,QAAI,UAAU,CAAC;AACf,SAAK,SAAS,SAAU,WAAW;AACjC,cAAQ,KAAK,UAAU,SAAS;AAAA,IAClC,CAAC;AACD,WAAO;AAAA,EACT;AAEA,EAAAA,UAAS,UAAU,WAAW,SAAU,WAAW;AACjD,QAAI,OAAO,KAAK,SAAS;AACzB,WAAO,KAAK,SAAS,EAAE,IAAI,KAAK,kBAAkB,aAAa,OAAO,GAAG,KAAK,SAAS;AAAA,EACzF;AAEA,EAAAA,UAAS,UAAU,YAAY,SAAUE,SAAQ,OAAO;AACtD,SAAK,aAAa,KAAK,KAAK,SAAS,KAAK,cAAc,KAAK,WAAWA,SAAQ,KAAK;AAAA,EACvF;AAMA,EAAAF,UAAS,UAAU,YAAY,WAAY;AACzC,WAAO,KAAK,SAAS,KAAK,cAAc,KAAK,SAAS;AAAA,EACxD;AAKA,EAAAA,UAAS,UAAU,WAAW,SAAU,MAAM;AAC5C,QAAI,KAAK,YAAY,GAAG;AACtB;AAAA,IACF;AAEA,QAAI,WAAW,KAAK;AACpB,QAAI,YAAY,SAAS,KAAK,aAAa,KAAK,SAAS;AACzD,WAAO,UAAU,SAAS,IAAI;AAAA,EAChC;AAGA,EAAAA,UAAS,UAAU,gBAAgB,WAAY;AAC7C,YAAQ,KAAK,SAAS,eAAe,CAAC,GAAG,KAAK;AAAA,EAChD;AAEA,EAAAA,UAAS,UAAU,YAAY,SAAU,KAAK,OAAO;AACnD,SAAK,aAAa,KAAK,KAAK,SAAS,KAAK,cAAc,KAAK,WAAW,KAAK,KAAK;AAAA,EACpF;AAOA,EAAAA,UAAS,UAAU,YAAY,SAAU,KAAK;AAC5C,WAAO,KAAK,SAAS,KAAK,cAAc,KAAK,WAAW,GAAG;AAAA,EAC7D;AAEA,EAAAA,UAAS,UAAU,cAAc,WAAY;AAC3C,WAAO,KAAK,SAAS,KAAK,YAAY,KAAK,SAAS;AAAA,EACtD;AAEA,EAAAA,UAAS,UAAU,QAAQ,WAAY;AACrC,WAAO,KAAK,SAAS,KAAK,MAAM,KAAK,SAAS;AAAA,EAChD;AAMA,EAAAA,UAAS,UAAU,gBAAgB,WAAY;AAC7C,QAAI,KAAK,YAAY;AACnB,UAAI,WAAW,KAAK,WAAW;AAE/B,eAAS,IAAI,GAAG,IAAI,SAAS,QAAQ,EAAE,GAAG;AACxC,YAAI,SAAS,OAAO,MAAM;AACxB,iBAAO;AAAA,QACT;AAAA,MACF;AAEA,aAAO;AAAA,IACT;AAEA,WAAO;AAAA,EACT;AASA,EAAAA,UAAS,UAAU,eAAe,SAAU,MAAM;AAChD,QAAI,SAAS,KAAK;AAElB,WAAO,QAAQ;AACb,UAAI,WAAW,MAAM;AACnB,eAAO;AAAA,MACT;AAEA,eAAS,OAAO;AAAA,IAClB;AAEA,WAAO;AAAA,EACT;AASA,EAAAA,UAAS,UAAU,iBAAiB,SAAU,MAAM;AAClD,WAAO,SAAS,QAAQ,KAAK,aAAa,IAAI;AAAA,EAChD;AAEA,SAAOA;AACT,EAAE;AAKF,IAAI,OAEJ,WAAY;AACV,WAASG,MAAK,WAAW;AACvB,SAAK,OAAO;AACZ,SAAK,SAAS,CAAC;AACf,SAAK,YAAY;AAAA,EACnB;AAEA,EAAAA,MAAK,UAAU,WAAW,SAAU,SAAS,IAAI,SAAS;AACxD,SAAK,KAAK,SAAS,SAAS,IAAI,OAAO;AAAA,EACzC;AAEA,EAAAA,MAAK,UAAU,qBAAqB,SAAU,WAAW;AACvD,QAAI,WAAW,KAAK,KAAK,YAAY,SAAS;AAC9C,WAAO,KAAK,OAAO;AAAA,EACrB;AAEA,EAAAA,MAAK,UAAU,cAAc,SAAU,MAAM;AAC3C,WAAO,KAAK,KAAK,YAAY,IAAI;AAAA,EACnC;AAOA,EAAAA,MAAK,UAAU,SAAS,WAAY;AAClC,QAAI,OAAO,KAAK;AAChB,QAAI,QAAQ,KAAK;AAEjB,aAAS,IAAI,GAAGC,OAAM,MAAM,QAAQ,IAAIA,MAAK,KAAK;AAChD,YAAM,GAAG,YAAY;AAAA,IACvB;AAEA,aAAS,IAAI,GAAGA,OAAM,KAAK,MAAM,GAAG,IAAIA,MAAK,KAAK;AAChD,YAAM,KAAK,YAAY,CAAC,GAAG,YAAY;AAAA,IACzC;AAAA,EACF;AAMA,EAAAD,MAAK,UAAU,eAAe,WAAY;AACxC,SAAK,KAAK,iBAAiB;AAAA,EAC7B;AAkBA,EAAAA,MAAK,aAAa,SAAU,UAAU,WAAW,YAAY;AAC3D,QAAI,OAAO,IAAIA,MAAK,SAAS;AAC7B,QAAI,WAAW,CAAC;AAChB,QAAI,SAAS;AACb,mBAAe,QAAQ;AAEvB,aAAS,eAAe,UAAU,YAAY;AAC5C,UAAI,QAAQ,SAAS;AACrB,eAAS,KAAK,IAAI,QAAe,QAAQ,KAAK,IAAI,MAAM,SAAS,CAAC;AAClE,eAAS,KAAK,QAAQ;AACtB,UAAI,OAAO,IAAI,SAAS,oBAAoB,SAAS,MAAM,EAAE,GAAG,IAAI;AACpE,mBAAa,SAAS,MAAM,UAAU,IAAI,KAAK,OAAO;AAEtD,WAAK,OAAO,KAAK,IAAI;AAErB,UAAI,WAAW,SAAS;AAExB,UAAI,UAAU;AACZ,iBAAS,IAAI,GAAG,IAAI,SAAS,QAAQ,KAAK;AACxC,yBAAe,SAAS,IAAI,IAAI;AAAA,QAClC;AAAA,MACF;AAAA,IACF;AAEA,SAAK,KAAK,qBAAqB,CAAC;AAChC,QAAI,aAAa,wBAAwB,UAAU;AAAA,MACjD,iBAAiB,CAAC,OAAO;AAAA,MACzB,iBAAiB;AAAA,IACnB,CAAC,EAAE;AACH,QAAI,OAAO,IAAI,mBAAW,YAAY,SAAS;AAC/C,SAAK,SAAS,QAAQ;AACtB,kBAAc,WAAW,IAAI;AAC7B,2BAAe;AAAA,MACb,UAAU;AAAA,MACV,QAAQ;AAAA,MACR,YAAY;AAAA,IACd,CAAC;AACD,SAAK,OAAO;AACZ,WAAO;AAAA,EACT;AAEA,SAAOA;AACT,EAAE;AAOF,SAAS,SAAS,OAAO,MAAM;AAC7B,MAAI,WAAW,KAAK;AAEpB,MAAI,MAAM,eAAe,MAAM;AAC7B;AAAA,EACF;AAEA,WAAS,KAAK,KAAK;AACnB,QAAM,aAAa;AACrB;AAEA,IAAO,eAAQ;;;ACvYR,SAAS,mBAAmB,SAAS,mBAAmB,aAAa;AAC1E,MAAI,WAAkB,QAAQ,mBAAmB,QAAQ,IAAI,KAAK,GAAG;AACnE,QAAI,OAAO,YAAY,QAAQ,EAAE,KAAK;AACtC,QAAI,aAAa,QAAQ;AAEzB,QAAW,SAAS,UAAU,GAAG;AAC/B,mBAAa,KAAK,YAAY,UAAU;AAAA,IAC1C;AAEA,QAAI,cAAc,KAAK,SAAS,UAAU,GAAG;AAC3C,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AAEA,QAAI,eAAe,QAAQ;AAE3B,QAAI,gBAAgB,SAAS,aAAa,KAAK,YAAY,YAAY,IAAI;AACzE,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AAAA,EACF;AACF;AAEO,SAAS,cAAc,MAAM;AAClC,MAAI,OAAO,CAAC;AAEZ,SAAO,MAAM;AACX,WAAO,KAAK;AACZ,YAAQ,KAAK,KAAK,IAAI;AAAA,EACxB;AAEA,SAAO,KAAK,QAAQ;AACtB;AACO,SAAS,cAAc,UAAU,MAAM;AAC5C,MAAI,WAAW,cAAc,QAAQ;AACrC,SAAc,QAAQ,UAAU,IAAI,KAAK;AAC3C;AAEO,SAAS,iBAAiB,MAAM,aAAa;AAClD,MAAI,eAAe,CAAC;AAEpB,SAAO,MAAM;AACX,QAAI,gBAAgB,KAAK;AACzB,iBAAa,KAAK;AAAA,MAChB,MAAM,KAAK;AAAA,MACX,WAAW;AAAA,MACX,OAAO,YAAY,YAAY,aAAa;AAAA,IAC9C,CAAC;AACD,WAAO,KAAK;AAAA,EACd;AAEA,eAAa,QAAQ;AACrB,SAAO;AACT;;;ACjDA,IAAI,kBAEJ,SAAU,QAAQ;AAChB,YAAUE,kBAAiB,MAAM;AAEjC,WAASA,mBAAkB;AACzB,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,kBAAkB;AAExB,UAAM,oBAAoB;AAC1B,WAAO;AAAA,EACT;AAMA,EAAAA,iBAAgB,UAAU,iBAAiB,SAAU,QAAQ;AAE3D,QAAI,OAAO;AAAA,MACT,MAAM,OAAO;AAAA,MACb,UAAU,OAAO;AAAA,IACnB;AACA,QAAI,SAAS,OAAO,UAAU,CAAC;AAC/B,QAAI,cAAc,IAAI,cAAM,QAAQ,MAAM,KAAK,OAAO;AACtD,QAAI,OAAO,aAAK,WAAW,MAAM,MAAM,UAAU;AAEjD,aAAS,WAAW,UAAU;AAC5B,eAAS,WAAW,gBAAgB,SAAU,OAAO,KAAK;AACxD,YAAI,OAAO,KAAK,mBAAmB,GAAG;AAEtC,YAAI,EAAE,QAAQ,KAAK,SAAS,UAAU,KAAK,WAAW;AACpD,gBAAM,cAAc;AAAA,QACtB;AAEA,eAAO;AAAA,MACT,CAAC;AAAA,IACH;AAEA,QAAI,YAAY;AAChB,SAAK,SAAS,YAAY,SAAU,MAAM;AACxC,UAAI,KAAK,QAAQ,WAAW;AAC1B,oBAAY,KAAK;AAAA,MACnB;AAAA,IACF,CAAC;AACD,QAAI,oBAAoB,OAAO;AAC/B,QAAI,kBAAkB,qBAAqB,OAAO,oBAAoB,IAAI,OAAO,mBAAmB;AACpG,SAAK,KAAK,SAAS,YAAY,SAAU,MAAM;AAC7C,UAAI,OAAO,KAAK,SAAS,KAAK,eAAe,KAAK,SAAS;AAE3D,WAAK,WAAW,QAAQ,KAAK,aAAa,OAAO,CAAC,KAAK,YAAY,KAAK,SAAS;AAAA,IACnF,CAAC;AACD,WAAO,KAAK;AAAA,EACd;AAOA,EAAAA,iBAAgB,UAAU,YAAY,WAAY;AAChD,QAAI,SAAS,KAAK,IAAI,QAAQ;AAE9B,QAAI,WAAW,cAAc;AAC3B,eAAS;AAAA,IACX,WAAW,WAAW,YAAY;AAChC,eAAS;AAAA,IACX;AAEA,WAAO;AAAA,EACT;AAEA,EAAAA,iBAAgB,UAAU,UAAU,SAAU,MAAM;AAClD,SAAK,OAAO,OAAO;AAAA,EACrB;AAEA,EAAAA,iBAAgB,UAAU,YAAY,SAAUC,SAAQ;AACtD,SAAK,OAAO,SAASA;AAAA,EACvB;AAEA,EAAAD,iBAAgB,UAAU,gBAAgB,SAAU,WAAW,gBAAgB,UAAU;AACvF,QAAI,OAAO,KAAK,QAAQ,EAAE;AAC1B,QAAI,WAAW,KAAK,KAAK,SAAS;AAClC,QAAI,OAAO,KAAK,mBAAmB,SAAS;AAC5C,QAAI,QAAQ,KAAK,SAAS;AAC1B,QAAI,OAAO,KAAK;AAEhB,WAAO,QAAQ,SAAS,UAAU;AAChC,aAAO,KAAK,WAAW,OAAO,MAAM;AACpC,aAAO,KAAK;AAAA,IACd;AAEA,WAAO,oBAAoB,aAAa;AAAA,MACtC;AAAA,MACA;AAAA,MACA,SAAS,MAAM,KAAK,KAAK,SAAS;AAAA,IACpC,CAAC;AAAA,EACH;AAGA,EAAAA,iBAAgB,UAAU,gBAAgB,SAAU,WAAW;AAC7D,QAAI,SAAS,OAAO,UAAU,cAAc,MAAM,MAAM,SAAS;AAEjE,QAAI,OAAO,KAAK,QAAQ,EAAE,KAAK,mBAAmB,SAAS;AAC3D,WAAO,gBAAgB,iBAAiB,MAAM,IAAI;AAClD,WAAO,YAAY,CAAC,KAAK;AACzB,WAAO;AAAA,EACT;AAEA,EAAAA,iBAAgB,OAAO;AAGvB,EAAAA,iBAAgB,aAAa;AAC7B,EAAAA,iBAAgB,gBAAgB;AAAA,IAE9B,GAAG;AAAA,IACH,kBAAkB;AAAA,IAElB,MAAM;AAAA,IACN,KAAK;AAAA,IACL,OAAO;AAAA,IACP,QAAQ;AAAA,IAER,QAAQ;AAAA,IAER,WAAW;AAAA,IACX,kBAAkB;AAAA,IAElB,MAAM;AAAA,IAEN,gBAAgB;AAAA,IAEhB,QAAQ;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,QAAQ;AAAA,IACR,YAAY;AAAA,IACZ,mBAAmB;AAAA,IACnB,kBAAkB;AAAA,IAClB,WAAW;AAAA,MACT,OAAO;AAAA,MACP,OAAO;AAAA,MACP,WAAW;AAAA,IACb;AAAA,IACA,WAAW;AAAA,MACT,OAAO;AAAA,MAEP,aAAa;AAAA,IACf;AAAA,IACA,OAAO;AAAA,MACL,MAAM;AAAA,IACR;AAAA,IACA,iBAAiB;AAAA,IACjB,mBAAmB;AAAA,IACnB,yBAAyB;AAAA,EAC3B;AACA,SAAOA;AACT,EAAE,cAAW;AAEb,IAAO,qBAAQ;;;ACnKf,SAAS,UAAU,MAAM,UAAUE,aAAY;AAC7C,MAAI,QAAQ,CAAC,IAAI;AACjB,MAAI,OAAO,CAAC;AACZ,MAAI;AAEJ,SAAO,OAAO,MAAM,IAAI,GAAG;AAEzB,SAAK,KAAK,IAAI;AAEd,QAAI,KAAK,UAAU;AACjB,UAAI,WAAW,KAAK;AAEpB,UAAI,SAAS,QAAQ;AACnB,iBAAS,IAAI,GAAG,IAAI,SAAS,QAAQ,KAAK;AACxC,gBAAM,KAAK,SAAS,EAAE;AAAA,QACxB;AAAA,MACF;AAAA,IACF;AAAA,EACF;AAEA,SAAO,OAAO,KAAK,IAAI,GAAG;AAExB,aAAS,MAAMA,WAAU;AAAA,EAC3B;AACF;AAMA,SAAS,WAAW,MAAM,UAAU;AAClC,MAAI,QAAQ,CAAC,IAAI;AACjB,MAAI;AAEJ,SAAO,OAAO,MAAM,IAAI,GAAG;AAEzB,aAAS,IAAI;AAEb,QAAI,KAAK,UAAU;AACjB,UAAI,WAAW,KAAK;AAEpB,UAAI,SAAS,QAAQ;AACnB,iBAAS,IAAI,SAAS,SAAS,GAAG,KAAK,GAAG,KAAK;AAC7C,gBAAM,KAAK,SAAS,EAAE;AAAA,QACxB;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;;;AClDe,SAAR,WAA4B,SAAS,KAAK;AAC/C,UAAQ,iBAAiB,QAAQ,SAAU,aAAa;AACtD,iBAAa,aAAa,GAAG;AAAA,EAC/B,CAAC;AACH;AAEA,SAAS,aAAa,aAAa,KAAK;AACtC,MAAI,aAAaC,aAAY,aAAa,GAAG;AAC7C,cAAY,aAAa;AACzB,MAAIC,UAAS,YAAY,IAAI,QAAQ;AACrC,MAAI,QAAQ;AACZ,MAAI,SAAS;AACb,MAAIC,cAAa;AAEjB,MAAID,YAAW,UAAU;AACvB,YAAQ,IAAI,KAAK;AACjB,aAAS,KAAK,IAAI,WAAW,QAAQ,WAAW,KAAK,IAAI;AACzD,IAAAC,cAAa,WAAI,SAAU,OAAO,OAAO;AACvC,cAAQ,MAAM,eAAe,MAAM,aAAa,IAAI,KAAK,MAAM;AAAA,IACjE,CAAC;AAAA,EACH,OAAO;AACL,YAAQ,WAAW;AACnB,aAAS,WAAW;AACpB,IAAAA,cAAa,WAAI;AAAA,EACnB;AAEA,MAAI,cAAc,YAAY,QAAQ,EAAE,KAAK;AAC7C,MAAI,WAAW,YAAY,SAAS;AAEpC,MAAI,UAAU;AACZ,SAAK,WAAW;AAChB,cAAU,UAAU,WAAWA,WAAU;AACzC,gBAAY,SAAS,WAAW,CAAC,SAAS,SAAS;AACnD,eAAW,UAAU,UAAU;AAC/B,QAAI,SAAS;AACb,QAAI,UAAU;AACd,QAAI,WAAW;AACf,eAAW,UAAU,SAAU,MAAM;AACnC,UAAI,IAAI,KAAK,UAAU,EAAE;AAEzB,UAAI,IAAI,OAAO,UAAU,EAAE,GAAG;AAC5B,iBAAS;AAAA,MACX;AAEA,UAAI,IAAI,QAAQ,UAAU,EAAE,GAAG;AAC7B,kBAAU;AAAA,MACZ;AAEA,UAAI,KAAK,QAAQ,SAAS,OAAO;AAC/B,mBAAW;AAAA,MACb;AAAA,IACF,CAAC;AACD,QAAI,QAAQ,WAAW,UAAU,IAAIA,YAAW,QAAQ,OAAO,IAAI;AACnE,QAAI,OAAO,QAAQ,OAAO,UAAU,EAAE;AACtC,QAAI,OAAO;AACX,QAAI,OAAO;AACX,QAAI,UAAU;AACd,QAAI,UAAU;AAEd,QAAID,YAAW,UAAU;AACvB,aAAO,SAAS,QAAQ,UAAU,EAAE,IAAI,QAAQ;AAEhD,aAAO,UAAU,SAAS,QAAQ,KAAK;AACvC,iBAAW,UAAU,SAAU,MAAM;AACnC,mBAAW,KAAK,UAAU,EAAE,IAAI,QAAQ;AACxC,mBAAW,KAAK,QAAQ,KAAK;AAC7B,YAAI,YAAY,iBAAiB,SAAS,OAAO;AACjD,aAAK,UAAU;AAAA,UACb,GAAG,UAAU;AAAA,UACb,GAAG,UAAU;AAAA,UACb,MAAM;AAAA,UACN,MAAM;AAAA,QACR,GAAG,IAAI;AAAA,MACT,CAAC;AAAA,IACH,OAAO;AACL,UAAI,WAAW,YAAY,UAAU;AAErC,UAAI,aAAa,QAAQ,aAAa,MAAM;AAC1C,eAAO,UAAU,QAAQ,UAAU,EAAE,IAAI,QAAQ;AACjD,eAAO,SAAS,SAAS,QAAQ,KAAK;AACtC,mBAAW,UAAU,SAAU,MAAM;AACnC,qBAAW,KAAK,UAAU,EAAE,IAAI,QAAQ;AACxC,oBAAU,aAAa,QAAQ,KAAK,QAAQ,KAAK,OAAO,SAAS,KAAK,QAAQ,KAAK;AACnF,eAAK,UAAU;AAAA,YACb,GAAG;AAAA,YACH,GAAG;AAAA,UACL,GAAG,IAAI;AAAA,QACT,CAAC;AAAA,MACH,WAAW,aAAa,QAAQ,aAAa,MAAM;AACjD,eAAO,SAAS,QAAQ,UAAU,EAAE,IAAI,QAAQ;AAChD,eAAO,UAAU,SAAS,QAAQ,KAAK;AACvC,mBAAW,UAAU,SAAU,MAAM;AACnC,qBAAW,KAAK,UAAU,EAAE,IAAI,QAAQ;AACxC,oBAAU,aAAa,QAAQ,KAAK,QAAQ,KAAK,OAAO,UAAU,KAAK,QAAQ,KAAK;AACpF,eAAK,UAAU;AAAA,YACb,GAAG;AAAA,YACH,GAAG;AAAA,UACL,GAAG,IAAI;AAAA,QACT,CAAC;AAAA,MACH;AAAA,IACF;AAAA,EACF;AACF;;;ACvGe,SAAR,WAA4B,SAAS;AAC1C,UAAQ,iBAAiB,QAAQ,SAAU,aAAa;AACtD,QAAI,OAAO,YAAY,QAAQ;AAC/B,QAAI,OAAO,KAAK;AAChB,SAAK,SAAS,SAAU,MAAM;AAC5B,UAAI,QAAQ,KAAK,SAAS;AAE1B,UAAI,QAAQ,MAAM,SAAS,WAAW,EAAE,aAAa;AACrD,UAAI,cAAc,KAAK,uBAAuB,KAAK,WAAW,OAAO;AACrE,aAAO,aAAa,KAAK;AAAA,IAC3B,CAAC;AAAA,EACH,CAAC;AACH;;;ACZO,SAAS,kBAAkB,WAAW;AAC3C,YAAU,eAAe;AAAA,IACvB,MAAM;AAAA,IACN,OAAO;AAAA,IACP,QAAQ;AAAA,EACV,GAAG,SAAU,SAAS,SAAS;AAC7B,YAAQ,cAAc;AAAA,MACpB,UAAU;AAAA,MACV,SAAS;AAAA,MACT,OAAO;AAAA,IACT,GAAG,SAAU,aAAa;AACxB,UAAI,YAAY,QAAQ;AACxB,UAAI,OAAO,YAAY,QAAQ,EAAE;AACjC,UAAI,OAAO,KAAK,mBAAmB,SAAS;AAC5C,WAAK,WAAW,CAAC,KAAK;AAAA,IACxB,CAAC;AAAA,EACH,CAAC;AACD,YAAU,eAAe;AAAA,IACvB,MAAM;AAAA,IACN,OAAO;AAAA,IAKP,QAAQ;AAAA,EACV,GAAG,SAAU,SAAS,SAAS,KAAK;AAClC,YAAQ,cAAc;AAAA,MACpB,UAAU;AAAA,MACV,SAAS;AAAA,MACT,OAAO;AAAA,IACT,GAAG,SAAU,aAAa;AACxB,UAAI,WAAW,YAAY;AAC3B,UAAI,MAAM,oBAAoB,UAAU,SAAS,QAAW,GAAG;AAC/D,kBAAY,aAAa,YAAY,UAAU,IAAI,MAAM;AACzD,kBAAY,WAAW,YAAY,QAAQ,IAAI,IAAI;AAAA,IACrD,CAAC;AAAA,EACH,CAAC;AACH;;;ACjCO,SAASE,UAAQ,WAAW;AACjC,YAAU,kBAAkB,gBAAQ;AACpC,YAAU,oBAAoB,kBAAe;AAC7C,YAAU,eAAe,UAAU;AACnC,YAAU,eAAe,UAAU;AACnC,oBAAkB,SAAS;AAC7B;;;ACTA,IAAI,cAAc,CAAC,qBAAqB,iBAAiB,aAAa;AAC/D,SAAS,qBAAqB,WAAW;AAC9C,WAAS,IAAI,GAAG,IAAI,YAAY,QAAQ,KAAK;AAC3C,cAAU,eAAe;AAAA,MACvB,MAAM,YAAY;AAAA,MAClB,QAAQ;AAAA,IACV,GAAG,IAAI;AAAA,EACT;AAEA,YAAU,eAAe;AAAA,IACvB,MAAM;AAAA,IACN,QAAQ;AAAA,EACV,GAAG,SAAU,SAAS,SAAS;AAC7B,YAAQ,cAAc;AAAA,MACpB,UAAU;AAAA,MACV,SAAS;AAAA,MACT,OAAO;AAAA,IACT,GAAG,gBAAgB;AAEnB,aAAS,iBAAiB,OAAO,OAAO;AACtC,UAAI,QAAQ,CAAC,qBAAqB,mBAAmB;AACrD,UAAI,aAAoB,mBAAmB,SAAS,OAAO,KAAK;AAEhE,UAAI,YAAY;AACd,YAAI,iBAAiB,MAAM,YAAY;AAEvC,YAAI,gBAAgB;AAClB,kBAAQ,YAAmB,cAAc,gBAAgB,WAAW,IAAI,IAAI,WAAW;AAAA,QACzF;AAEA,cAAM,cAAc,WAAW,IAAI;AAAA,MACrC;AAAA,IACF;AAAA,EACF,CAAC;AACH;;;ACnCe,SAAR,uBAAwC,aAAa;AAC1D,MAAI,OAAO,YAAY,QAAQ;AAC/B,MAAI,OAAO,KAAK;AAChB,MAAI,oBAAoB,CAAC;AACzB,OAAK,SAAS,SAAU,MAAM;AAE5B,QAAI,UAAU;AAEd,WAAO,WAAW,QAAQ,QAAQ,GAAG;AACnC,gBAAU,QAAQ;AAAA,IACpB;AAEA,QAAI,QAAQ,oBAAoB,YAAY,SAAS,QAAQ,QAAQ,QAAQ,YAAY,IAAI,iBAAiB;AAC9G,SAAK,UAAU,SAAS,KAAK;AAAA,EAC/B,CAAC;AACH;;;ACNA,IAAI,qBAEJ,SAAU,QAAQ;AAChB,YAAUC,qBAAoB,MAAM;AAEpC,WAASA,sBAAqB;AAC5B,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,oBAAmB;AAChC,UAAM,yBAAyB;AAC/B,WAAO;AAAA,EACT;AAMA,EAAAA,oBAAmB,UAAU,iBAAiB,SAAU,QAAQ,SAAS;AAEvE,QAAI,OAAO;AAAA,MACT,MAAM,OAAO;AAAA,MACb,UAAU,OAAO;AAAA,IACnB;AACA,sBAAkB,IAAI;AACtB,QAAI,SAAS,OAAO,UAAU,CAAC;AAK/B,QAAI,4BAA4B,KAAK,4BAA4B,CAAC;AAClE,QAAI,wBAAwB,IAAI,cAAM;AAAA,MACpC,WAAW;AAAA,IACb,GAAG,MAAM,OAAO;AAChB,aAAS,OAAO,SAAS,WAAW,QAAQ,OAAO;AACnD,QAAI,cAAqB,IAAI,UAAU,CAAC,GAAG,SAAU,aAAa;AAChE,aAAO,IAAI,cAAM,aAAa,uBAAuB,OAAO;AAAA,IAC9D,GAAG,IAAI;AAIP,QAAI,OAAO,aAAK,WAAW,MAAM,MAAM,UAAU;AAEjD,aAAS,WAAW,UAAU;AAC5B,eAAS,WAAW,gBAAgB,SAAU,OAAO,KAAK;AACxD,YAAI,OAAO,KAAK,mBAAmB,GAAG;AACtC,YAAI,aAAa,OAAO,YAAY,KAAK,SAAS;AAElD,cAAM,cAAc,cAAc;AAClC,eAAO;AAAA,MACT,CAAC;AAAA,IACH;AAEA,WAAO,KAAK;AAAA,EACd;AAEA,EAAAA,oBAAmB,UAAU,gBAAgB,WAAY;AACvD,SAAK,cAAc;AAAA,EACrB;AAQA,EAAAA,oBAAmB,UAAU,gBAAgB,SAAU,WAAW,gBAAgB,UAAU;AAC1F,QAAI,OAAO,KAAK,QAAQ;AACxB,QAAI,QAAQ,KAAK,YAAY,SAAS;AACtC,QAAI,OAAO,KAAK,QAAQ,SAAS;AACjC,WAAO,oBAAoB,aAAa;AAAA,MACtC;AAAA,MACA;AAAA,IACF,CAAC;AAAA,EACH;AAUA,EAAAA,oBAAmB,UAAU,gBAAgB,SAAU,WAAW;AAChE,QAAI,SAAS,OAAO,UAAU,cAAc,MAAM,MAAM,SAAS;AAEjE,QAAI,OAAO,KAAK,QAAQ,EAAE,KAAK,mBAAmB,SAAS;AAC3D,WAAO,gBAAgB,iBAAiB,MAAM,IAAI;AAElD,WAAO,eAAe,OAAO;AAC7B,WAAO;AAAA,EACT;AAYA,EAAAA,oBAAmB,UAAU,gBAAgB,SAAU,YAAY;AAKjE,SAAK,aAAa,KAAK,cAAc,CAAC;AACtC,IAAO,OAAO,KAAK,YAAY,UAAU;AAAA,EAC3C;AAOA,EAAAA,oBAAmB,UAAU,eAAe,SAAU,IAAI;AAaxD,QAAI,aAAa,KAAK;AAEtB,QAAI,CAAC,YAAY;AACf,mBAAa,KAAK,cAAqB,cAAc;AAMrD,WAAK,mBAAmB;AAAA,IAC1B;AAEA,QAAI,QAAQ,WAAW,IAAI,EAAE;AAE7B,QAAI,SAAS,MAAM;AACjB,iBAAW,IAAI,IAAI,QAAQ,KAAK,kBAAkB;AAAA,IACpD;AAEA,WAAO;AAAA,EACT;AAEA,EAAAA,oBAAmB,UAAU,cAAc,WAAY;AACrD,WAAO,KAAK;AAAA,EACd;AAEA,EAAAA,oBAAmB,UAAU,gBAAgB,SAAU,UAAU;AAC/D,eAAW,KAAK,YAAY,WAAW,WAAW,KAAK;AACvD,QAAI,OAAO,KAAK,WAAW,EAAE,KAAK;AAElC,QAAI,CAAC,YAAY,aAAa,QAAQ,CAAC,KAAK,SAAS,QAAQ,GAAG;AAC9D,WAAK,YAAY;AAAA,IACnB;AAAA,EACF;AAEA,EAAAA,oBAAmB,UAAU,kBAAkB,WAAY;AACzD,2BAAuB,IAAI;AAAA,EAC7B;AAEA,EAAAA,oBAAmB,OAAO;AAC1B,EAAAA,oBAAmB,aAAa;AAChC,EAAAA,oBAAmB,gBAAgB;AAAA,IAEjC,aAAa;AAAA,IAEb,MAAM;AAAA,IACN,KAAK;AAAA,IACL,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,IACN,YAAY;AAAA,IACZ,aAAa,OAAO,IAAI,KAAK,KAAK,CAAC;AAAA,IACnC,WAAW;AAAA,IACX,eAAe;AAAA,IAEf,iBAAiB,OAAO;AAAA,IACxB,MAAM;AAAA,IACN,WAAW;AAAA,IACX,WAAW;AAAA,IACX,yBAAyB;AAAA,IACzB,iBAAiB;AAAA,IACjB,YAAY;AAAA,MACV,MAAM;AAAA,MACN,QAAQ;AAAA,MACR,MAAM;AAAA,MACN,KAAK;AAAA,MAGL,gBAAgB;AAAA,MAChB,WAAW;AAAA,QACT,OAAO;AAAA,QACP,WAAW;AAAA,UACT,OAAO;AAAA,QACT;AAAA,MACF;AAAA,MACA,UAAU;AAAA,QACR,WAAW;AAAA,UACT,OAAO;AAAA,QAET;AAAA,MACF;AAAA,IACF;AAAA,IACA,OAAO;AAAA,MACL,MAAM;AAAA,MAEN,UAAU;AAAA,MACV,SAAS;AAAA,MACT,UAAU;AAAA,MAEV,OAAO;AAAA,MACP,UAAU;AAAA,IAGZ;AAAA,IACA,YAAY;AAAA,MACV,MAAM;AAAA,MACN,UAAU,CAAC,GAAG,KAAK;AAAA,MACnB,QAAQ;AAAA,MAGR,UAAU;AAAA,MAEV,eAAe;AAAA,IACjB;AAAA,IACA,WAAW;AAAA,MACT,OAAO;AAAA,MACP,YAAY;AAAA,MACZ,iBAAiB;AAAA,MACjB,aAAa;AAAA,MACb,UAAU;AAAA,MACV,aAAa;AAAA,MACb,uBAAuB;AAAA,IAIzB;AAAA,IACA,UAAU;AAAA,MACR,YAAY;AAAA,QACV,MAAM;AAAA,QACN,UAAU,CAAC,GAAG,KAAK;AAAA,QACnB,UAAU;AAAA,QACV,eAAe;AAAA,MACjB;AAAA,IACF;AAAA,IACA,iBAAiB;AAAA,IACjB,WAAW;AAAA,IACX,WAAW;AAAA,IACX,OAAO,CAAC;AAAA,IAUR,YAAY;AAAA,IACZ,iBAAiB;AAAA,IACjB,gBAAgB;AAAA,IAChB,YAAY;AAAA,IAEZ,oBAAoB;AAAA,IAKpB,QAAQ,CAAC;AAAA,EAIX;AACA,SAAOA;AACT,EAAE,cAAW;AAMb,SAAS,kBAAkB,UAAU;AAInC,MAAIC,OAAM;AACV,EAAO,KAAK,SAAS,UAAU,SAAU,OAAO;AAC9C,sBAAkB,KAAK;AACvB,QAAI,aAAa,MAAM;AACvB,IAAO,QAAQ,UAAU,MAAM,aAAa,WAAW;AACvD,IAAAA,QAAO;AAAA,EACT,CAAC;AACD,MAAI,YAAY,SAAS;AAEzB,MAAW,QAAQ,SAAS,GAAG;AAC7B,gBAAY,UAAU;AAAA,EACxB;AAEA,MAAI,aAAa,QAAQ,MAAM,SAAS,GAAG;AACzC,gBAAYA;AAAA,EACd;AAGA,MAAI,YAAY,GAAG;AACjB,gBAAY;AAAA,EACd;AAEA,EAAO,QAAQ,SAAS,KAAK,IAAI,SAAS,MAAM,KAAK,YAAY,SAAS,QAAQ;AACpF;AAMA,SAAS,WAAW,QAAQ,SAAS;AACnC,MAAI,kBAAkB,iBAAiB,QAAQ,IAAI,OAAO,CAAC;AAC3D,MAAI,kBAAkB,iBAAiB,QAAQ,IAAI,CAAC,QAAQ,SAAS,QAAQ,CAAC,CAAC;AAE/E,MAAI,CAAC,iBAAiB;AACpB;AAAA,EACF;AAEA,WAAS,UAAU,CAAC;AACpB,MAAI;AACJ,MAAI;AACJ,EAAO,KAAK,QAAQ,SAAU,aAAa;AACzC,QAAI,QAAQ,IAAI,cAAM,WAAW;AACjC,QAAI,aAAa,MAAM,IAAI,OAAO;AAClC,QAAI,aAAa,MAAM,IAAI,OAAO;AAElC,QAAI,MAAM,IAAI,CAAC,aAAa,OAAO,CAAC,KAAK,cAAc,eAAe,QAAQ;AAC5E,uBAAiB;AAAA,IACnB;AAEA,QAAI,MAAM,IAAI,CAAC,aAAa,OAAO,CAAC,KAAK,cAAc,eAAe,QAAQ;AAC5E,uBAAiB;AAAA,IACnB;AAAA,EACF,CAAC;AACD,MAAI,SAAS,OAAO,OAAO,OAAO,KAAK,CAAC;AAExC,MAAI,CAAC,gBAAgB;AACnB,WAAO,QAAQ,gBAAgB,MAAM;AAAA,EACvC;AAEA,MAAI,CAAC,kBAAkB,iBAAiB;AACtC,WAAO,QAAQ,gBAAgB,MAAM;AAAA,EACvC;AAEA,SAAO;AACT;AAEA,IAAO,wBAAQ;;;ACxWf,IAAI,eAAe;AACnB,IAAI,WAAW;AACf,IAAI,eAAe;AAEnB,IAAI,aAEJ,WAAY;AACV,WAASC,YAAW,gBAAgB;AAClC,SAAK,QAAQ,IAAY,cAAM;AAC/B,mBAAe,IAAI,KAAK,KAAK;AAAA,EAC/B;AAEA,EAAAA,YAAW,UAAU,SAAS,SAAU,aAAa,KAAK,YAAY,UAAU;AAC9E,QAAI,QAAQ,YAAY,SAAS,YAAY;AAC7C,QAAI,YAAY,KAAK;AACrB,cAAU,UAAU;AAEpB,QAAI,CAAC,MAAM,IAAI,MAAM,KAAK,CAAC,YAAY;AACrC;AAAA,IACF;AAEA,QAAI,mBAAmB,MAAM,SAAS,WAAW;AACjD,QAAI,gBAAgB,MAAM,SAAS,UAAU;AAC7C,QAAI,iBAAiB,iBAAiB,SAAS,WAAW;AAC1D,QAAI,yBAAyB,cAAc,SAAS,CAAC,aAAa,WAAW,CAAC;AAC9E,QAAI,cAAc;AAAA,MAChB,KAAK;AAAA,QACH,MAAM,MAAM,IAAI,MAAM;AAAA,QACtB,OAAO,MAAM,IAAI,OAAO;AAAA,QACxB,KAAK,MAAM,IAAI,KAAK;AAAA,QACpB,QAAQ,MAAM,IAAI,QAAQ;AAAA,MAC5B;AAAA,MACA,KAAK;AAAA,QACH,OAAO,IAAI,SAAS;AAAA,QACpB,QAAQ,IAAI,UAAU;AAAA,MACxB;AAAA,MACA,gBAAgB,MAAM,IAAI,gBAAgB;AAAA,MAC1C,YAAY;AAAA,MACZ,YAAY,CAAC;AAAA,IACf;AAEA,SAAK,SAAS,YAAY,aAAa,cAAc;AAErD,SAAK,eAAe,aAAa,aAAa,kBAAkB,eAAe,gBAAgB,wBAAwB,QAAQ;AAE/H,IAAO,gBAAgB,WAAW,YAAY,KAAK,YAAY,GAAG;AAAA,EACpE;AAOA,EAAAA,YAAW,UAAU,WAAW,SAAU,YAAY,aAAa,gBAAgB;AACjF,aAAS,OAAO,YAAY,MAAM,OAAO,KAAK,YAAY;AACxD,UAAI,OAAO,oBAAoB,KAAK,SAAS,EAAE,IAAI,MAAM,GAAG,EAAE;AAC9D,UAAI,WAAW,eAAe,YAAY,IAAI;AAC9C,UAAI,YAAY,KAAK,IAAI,SAAS,QAAQ,eAAe,GAAG,YAAY,cAAc;AACtF,kBAAY,cAAc,YAAY;AACtC,kBAAY,WAAW,KAAK;AAAA,QAC1B;AAAA,QACA;AAAA,QACA,OAAO;AAAA,MACT,CAAC;AAAA,IACH;AAAA,EACF;AAMA,EAAAA,YAAW,UAAU,iBAAiB,SAAU,aAAa,aAAa,kBAAkB,eAAe,gBAAgB,wBAAwB,UAAU;AAE3J,QAAI,QAAQ;AACZ,QAAI,iBAAiB,YAAY;AACjC,QAAI,SAAS,YAAY,IAAI,CAAC,cAAc,QAAQ,CAAC;AACrD,QAAI,gBAAuB,iBAAiB,YAAY,KAAK,YAAY,GAAG;AAC5E,QAAI,aAAa,YAAY;AAC7B,QAAI,aAAa,YAAY;AAC7B,QAAI,oBAAoB,cAAc,SAAS,WAAW,EAAE,aAAa;AAEzE,aAAS,IAAI,WAAW,SAAS,GAAG,KAAK,GAAG,KAAK;AAC/C,UAAI,OAAO,WAAW;AACtB,UAAI,WAAW,KAAK;AACpB,UAAI,YAAY,KAAK;AACrB,UAAI,OAAO,KAAK;AAEhB,UAAI,aAAa,cAAc,OAAO;AACpC,sBAAc,YAAY;AAC1B,oBAAY;AACZ,eAAO;AAAA,MACT;AAEA,UAAI,KAAK,IAAY,gBAAQ;AAAA,QAC3B,OAAO;AAAA,UACL,QAAQ,eAAe,OAAO,GAAG,WAAW,QAAQ,MAAM,WAAW,SAAS,GAAG,MAAM,CAAC;AAAA,QAC1F;AAAA,QACA,OAAO,SAAS,iBAAiB,aAAa,GAAG;AAAA,UAC/C,UAAU;AAAA,QACZ,CAAC;AAAA,QACD,aAAa,IAAY,aAAK;AAAA,UAC5B,OAAO,gBAAgB,gBAAgB;AAAA,YACrC;AAAA,UACF,CAAC;AAAA,QACH,CAAC;AAAA,QACD,YAAY;AAAA,UACV,UAAU;AAAA,QACZ;AAAA,QACA,IAAI,mBAAmB;AAAA,QACvB,SAAS,MAAM,UAAU,QAAQ;AAAA,MACnC,CAAC;AACD,SAAG,wBAAwB;AAC3B,SAAG,eAAe,EAAE,YAAY,UAAU,EAAE,QAAQ,gBAAgB,wBAAwB;AAAA,QAC1F;AAAA,MACF,CAAC;AACD,SAAG,YAAY,UAAU,EAAE,QAAQ;AACnC,0BAAoB,IAAI,cAAc,IAAI,OAAO,GAAG,cAAc,IAAI,WAAW,GAAG,cAAc,IAAI,UAAU,CAAC;AACjH,WAAK,MAAM,IAAI,EAAE;AACjB,oBAAc,IAAI,aAAa,QAAQ;AACvC,eAAS,YAAY;AAAA,IACvB;AAAA,EACF;AAEA,EAAAA,YAAW,UAAU,SAAS,WAAY;AACxC,SAAK,MAAM,UAAU;AAAA,EACvB;AAEA,SAAOA;AACT,EAAE;AAEF,SAAS,eAAe,GAAG,GAAG,WAAW,YAAY,MAAM,MAAM;AAC/D,MAAI,SAAS,CAAC,CAAC,OAAO,IAAI,IAAI,cAAc,CAAC,GAAG,CAAC,IAAI,WAAW,CAAC,GAAG,CAAC,IAAI,WAAW,IAAI,UAAU,GAAG,CAAC,OAAO,IAAI,IAAI,cAAc,IAAI,UAAU,CAAC;AAClJ,GAAC,QAAQ,OAAO,OAAO,GAAG,GAAG,CAAC,IAAI,YAAY,cAAc,IAAI,aAAa,CAAC,CAAC;AAC/E,GAAC,QAAQ,OAAO,KAAK,CAAC,GAAG,IAAI,aAAa,CAAC,CAAC;AAC5C,SAAO;AACT;AAGA,SAAS,cAAc,IAAI,aAAa,UAAU;AAChD,YAAU,EAAE,EAAE,YAAY;AAAA,IACxB,eAAe;AAAA,IACf,kBAAkB;AAAA,IAClB,gBAAgB,YAAY;AAAA,IAC5B,aAAa,YAAY;AAAA,IACzB,YAAY,YAAY;AAAA,IACxB,YAAY;AAAA,IACZ,UAAU;AAAA,IACV,UAAU;AAAA,MACR,WAAW,YAAY,SAAS;AAAA,MAChC,MAAM,YAAY,SAAS;AAAA,IAC7B;AAAA,IACA,cAAc,YAAY,iBAAiB,UAAU,WAAW;AAAA,EAClE;AACF;AAEA,IAAO,qBAAQ;;;ACvJf,IAAI,gBAEJ,WAAY;AACV,WAASC,iBAAgB;AACvB,SAAK,WAAW,CAAC;AACjB,SAAK,eAAe,CAAC;AAAA,EACvB;AAUA,EAAAA,eAAc,UAAU,MAAM,SAAU,IAAI,QAAQ,UAAU,OAAO,QAAQ;AAC3E,QAAI,KAAK,aAAa,GAAG,KAAK;AAC5B,aAAO;AAAA,IACT;AAEA,SAAK,aAAa,GAAG,MAAM;AAE3B,SAAK,SAAS,KAAK;AAAA,MACjB;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF,CAAC;AAED,WAAO;AAAA,EACT;AAMA,EAAAA,eAAc,UAAU,WAAW,SAAU,UAAU;AACrD,SAAK,oBAAoB;AACzB,WAAO;AAAA,EACT;AAMA,EAAAA,eAAc,UAAU,QAAQ,WAAY;AAC1C,QAAI,QAAQ;AAEZ,QAAI,QAAQ,KAAK,SAAS;AAE1B,QAAI,iBAAiB,WAAY;AAC/B;AAEA,UAAI,SAAS,GAAG;AAEd,cAAM,SAAS,SAAS;AACxB,cAAM,eAAe,CAAC;AACtB,cAAM,qBAAqB,MAAM,kBAAkB;AAAA,MACrD;AAAA,IACF;AAEA,aAAS,IAAI,GAAGC,OAAM,KAAK,SAAS,QAAQ,IAAIA,MAAK,KAAK;AACxD,UAAI,OAAO,KAAK,SAAS;AACzB,WAAK,GAAG,UAAU,KAAK,QAAQ;AAAA,QAC7B,UAAU,KAAK;AAAA,QACf,OAAO,KAAK;AAAA,QACZ,QAAQ,KAAK;AAAA,QACb,YAAY;AAAA,QACZ,MAAM;AAAA,QACN,SAAS;AAAA,MACX,CAAC;AAAA,IACH;AAEA,WAAO;AAAA,EACT;AAEA,SAAOD;AACT,EAAE;AAEK,SAAS,aAAa;AAC3B,SAAO,IAAI,cAAc;AAC3B;;;AC7EA,IAAI,QAAgB;AACpB,IAAI,OAAe;AACnB,IAAI,iBAAiB;AACrB,IAAI,oBAAoB;AACxB,IAAI,yBAAyB;AAE7B,IAAI,UAAU,mBAAmB;AAEjC,IAAI,QAAQ,mBAAmB;AAC/B,IAAI,aAAa,mBAAmB;AACpC,IAAI,oBAAoB,gBAAgB;AAAA,EAAC,CAAC,QAAQ,OAAO;AAAA,EAEzD,CAAC,UAAU,aAAa;AAAA,EAAG,CAAC,aAAa,aAAa;AAAA,EAAG,CAAC,YAAY;AAAA,EAAG,CAAC,eAAe;AAAA,EAAG,CAAC,eAAe;AAAA,EAAG,CAAC,aAAa;AAE7H,CAAC;AAED,IAAI,qBAAqB,SAAU,OAAO;AAExC,MAAI,YAAY,kBAAkB,KAAK;AAEvC,YAAU,SAAS,UAAU,OAAO,UAAU,YAAY;AAC1D,SAAO;AACT;AAEA,IAAIE,SAAQ,UAAU;AAEtB,IAAI,cAEJ,SAAU,QAAQ;AAChB,YAAUC,cAAa,MAAM;AAE7B,WAASA,eAAc;AACrB,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,aAAY;AACzB,UAAM,SAAS;AACf,UAAM,WAAW,cAAc;AAC/B,WAAO;AAAA,EACT;AAMA,EAAAA,aAAY,UAAU,SAAS,SAAU,aAAa,SAAS,KAAK,SAAS;AAC3E,QAAI,SAAS,QAAQ,eAAe;AAAA,MAClC,UAAU;AAAA,MACV,SAAS;AAAA,MACT,OAAO;AAAA,IACT,CAAC;AAED,QAAI,QAAQ,QAAQ,WAAW,IAAI,GAAG;AACpC;AAAA,IACF;AAEA,SAAK,cAAc;AACnB,SAAK,MAAM;AACX,SAAK,UAAU;AACf,QAAI,QAAQ,CAAC,qBAAqB,mBAAmB;AACrD,QAAI,aAAoB,mBAAmB,SAAS,OAAO,WAAW;AACtE,QAAI,cAAc,WAAW,QAAQ;AACrC,QAAI,aAAa,YAAY;AAC7B,QAAI,SAAS,CAAC,KAAK;AACnB,QAAI,cAAc,KAAK;AAEvB,QAAI,SAAS,gBAAgB,uBAAuB,cAAc,cAAc;AAAA,MAC9E,eAAe,YAAY,UAAU,WAAW,KAAK,YAAY;AAAA,MACjE,WAAW,QAAQ;AAAA,IACrB,IAAI;AAEJ,QAAI,iBAAiB,KAAK,oBAAoB,UAAU;AAExD,QAAI,eAAe,YAAY,IAAI,WAAW;AAE9C,QAAI,eAAe,KAAK,UAAU,gBAAgB,aAAa,MAAM;AAErE,oBAAgB,CAAC,WAAW,CAAC,eAAe,gBAAgB,uBAAuB,gBAAgB,uBAAuB,KAAK,aAAa,gBAAgB,cAAc,aAAa,MAAM,IAAI,aAAa,cAAc;AAE5N,SAAK,iBAAiB,GAAG;AAEzB,SAAK,kBAAkB,aAAa,KAAK,UAAU;AAAA,EACrD;AAEA,EAAAA,aAAY,UAAU,sBAAsB,SAAU,YAAY;AAChE,QAAI,iBAAiB,KAAK;AAE1B,QAAI,CAAC,gBAAgB;AAGnB,uBAAiB,KAAK,kBAAkB,IAAI,MAAM;AAElD,WAAK,YAAY,cAAc;AAE/B,WAAK,MAAM,IAAI,cAAc;AAAA,IAC/B;AAEA,mBAAe,IAAI,WAAW;AAC9B,mBAAe,IAAI,WAAW;AAC9B,WAAO;AAAA,EACT;AAEA,EAAAA,aAAY,UAAU,YAAY,SAAU,gBAAgB,aAAa,QAAQ;AAC/E,QAAI,WAAW,YAAY,QAAQ,EAAE;AACrC,QAAI,UAAU,KAAK;AAEnB,QAAI,oBAAoB,cAAc;AACtC,QAAI,cAAc,cAAc;AAChC,QAAI,aAAa,KAAK;AACtB,QAAI,mBAAmB,CAAC;AAExB,aAAS,aAAa,UAAU,SAAS,aAAa,OAAO;AAC3D,aAAO,WAAW,aAAa,aAAa,YAAY,QAAQ,mBAAmB,kBAAkB,UAAU,SAAS,aAAa,KAAK;AAAA,IAC5I;AAMA,eAAW,SAAS,OAAO,CAAC,SAAS,IAAI,IAAI,CAAC,GAAG,WAAW,QAAQ,OAAO,CAAC,QAAQ,IAAI,IAAI,CAAC,GAAG,gBAAgB,aAAa,WAAW,CAAC,SAAS,CAAC;AAEnJ,QAAI,gBAAgB,aAAa,UAAU;AAC3C,SAAK,WAAW;AAChB,SAAK,WAAW;AAChB,WAAO;AAAA,MACL;AAAA,MACA;AAAA,MACA;AAAA,IACF;AAEA,aAAS,WAAW,kBAAkB,iBAAiB,aAAa,UAAU,OAAO;AAInF,UAAI,UAAU;AACZ,0BAAkB;AAClB,aAAK,kBAAkB,SAAU,OAAO,OAAO;AAC7C,WAAC,MAAM,UAAU,KAAK,YAAY,OAAO,KAAK;AAAA,QAChD,CAAC;AAAA,MACH,OAEK;AACD,YAAI,mBAAW,iBAAiB,kBAAkBC,SAAQA,OAAM,EAAE,IAAI,WAAW,EAAE,OAAO,WAAW,EAAE,OAAO,MAAM,aAAa,IAAI,CAAC,EAAE,QAAQ;AAAA,MAClJ;AAEF,eAASA,QAAO,MAAM;AAEpB,eAAO,KAAK,MAAM;AAAA,MACpB;AAEA,eAAS,YAAY,UAAU,UAAU;AACvC,YAAI,WAAW,YAAY,OAAO,iBAAiB,YAAY;AAC/D,YAAI,UAAU,YAAY,OAAO,gBAAgB,YAAY;AAC7D,YAAI,QAAQ,aAAa,UAAU,SAAS,aAAa,KAAK;AAC9D,iBAAS,WAAW,YAAY,SAAS,gBAAgB,CAAC,GAAG,WAAW,QAAQ,gBAAgB,CAAC,GAAG,OAAO,UAAU,QAAQ,CAAC;AAAA,MAChI;AAAA,IACF;AAEA,aAAS,aAAa,SAAS;AAC7B,UAAIC,iBAAgB,cAAc;AAClC,iBAAW,KAAK,SAAS,SAAU,OAAO,aAAa;AACrD,YAAI,SAASA,eAAc;AAC3B,aAAK,OAAO,SAAU,IAAI;AACxB,iBAAO,OAAO,KAAK,EAAE,GAAGH,OAAM,EAAE,EAAE,aAAa;AAAA,QACjD,CAAC;AAAA,MACH,CAAC;AACD,aAAOG;AAAA,IACT;AAEA,aAAS,gBAAgB;AACvB,WAAK,eAAe,SAAU,KAAK;AACjC,aAAK,KAAK,SAAU,IAAI;AACtB,aAAG,UAAU,GAAG,OAAO,OAAO,EAAE;AAAA,QAClC,CAAC;AAAA,MACH,CAAC;AACD,WAAK,kBAAkB,SAAU,IAAI;AACnC,WAAG,YAAY;AAGf,WAAG,MAAM;AAAA,MACX,CAAC;AAAA,IACH;AAAA,EACF;AAEA,EAAAF,aAAY,UAAU,eAAe,SAAU,gBAAgB,cAAc,aAAa,QAAQ;AAChG,QAAI,iBAAiB,YAAY,IAAI,yBAAyB;AAC9D,QAAI,eAAe,YAAY,IAAI,iBAAiB;AAEpD,QAAI,YAAY,WAAW,cAAc,IAAI,IAAI,mBAAmB;AACpE,QAAI,UAAU,WAAW,YAAY,IAAI,OAAO,iBAAiB;AACjE,QAAI,gBAA8B,WAAW;AAE7C,SAAK,aAAa,eAAe,SAAU,OAAO,aAAa;AAC7D,WAAK,OAAO,SAAU,IAAI,UAAU;AAClC,YAAI,GAAG,WAAW;AAChB;AAAA,QACF;AAEA,YAAI,SAAS,GAAG;AAEhB,YAAI;AACJ,YAAI,aAAaD,OAAM,MAAM;AAE7B,YAAI,UAAU,OAAO,cAAc,aAAa;AAC9C,mBAAS,WAAW,OAAO,gBAGzB;AAAA,YACA,OAAO;AAAA,cACL,GAAG;AAAA,cACH,GAAG;AAAA,cACH,OAAO,WAAW;AAAA,cAClB,QAAQ,WAAW;AAAA,YACrB;AAAA,YACA,OAAO;AAAA,cACL,SAAS;AAAA,YACX;AAAA,UACF,IACE;AAAA,YACA,OAAO;AAAA,cACL,SAAS;AAAA,YACX;AAAA,UACF;AAAA,QACF,OAAO;AACL,cAAI,UAAU;AACd,cAAI,UAAU;AAEd,cAAI,CAAC,WAAW,YAAY;AAI1B,sBAAU,WAAW,YAAY;AACjC,sBAAU,WAAW,aAAa;AAAA,UACpC;AAEA,mBAAS,gBAAgB,cAAc;AAAA,YACrC,GAAG;AAAA,YACH,GAAG;AAAA,YACH,OAAO;AAAA,cACL,SAAS;AAAA,YACX;AAAA,UACF,IAAI;AAAA,YACF,OAAO;AAAA,cACL,GAAG;AAAA,cACH,GAAG;AAAA,cACH,OAAO;AAAA,cACP,QAAQ;AAAA,YACV;AAAA,YACA,OAAO;AAAA,cACL,SAAS;AAAA,YACX;AAAA,UACF;AAAA,QACF;AAGA,kBAAU,cAAc,IAAI,IAAI,QAAQ,UAAU,GAAG,MAAM;AAAA,MAC7D,CAAC;AAAA,IACH,CAAC;AAED,SAAK,KAAK,UAAU,SAAU,OAAO,aAAa;AAChD,WAAK,OAAO,SAAU,IAAI,UAAU;AAClC,YAAI,OAAO,aAAa,kBAAkB,aAAa;AACvD,YAAI,SAAS,CAAC;AAEd,YAAI,CAAC,MAAM;AACT;AAAA,QACF;AAEA,YAAI,cAAsB,eAAO;AAC/B,cAAI,KAAK,QAAQ,MAAM;AACrB,mBAAO,IAAI,GAAG;AACd,mBAAO,IAAI,GAAG;AACd,eAAG,IAAI,KAAK;AACZ,eAAG,IAAI,KAAK;AAAA,UACd;AAAA,QACF,OAAO;AACL,cAAI,KAAK,UAAU;AACjB,mBAAO,QAAQ,OAAO,CAAC,GAAG,GAAG,KAAK;AAClC,eAAG,SAAS,KAAK,QAAQ;AAAA,UAC3B;AAEA,cAAI,KAAK,QAAQ;AACf,eAAG,SAAS,WAAW,CAAC;AACxB,mBAAO,QAAQ;AAAA,cACb,SAAS;AAAA,YACX;AAAA,UACF,WAES,GAAG,MAAM,YAAY,GAAG;AAC7B,mBAAO,QAAQ;AAAA,cACb,SAAS;AAAA,YACX;AAAA,UACF;AAAA,QACJ;AAEA,sBAAc,IAAI,IAAI,QAAQ,UAAU,GAAG,MAAM;AAAA,MACnD,CAAC;AAAA,IACH,GAAG,IAAI;AACP,SAAK,SAAS;AACd,kBAAc,SAAS,KAAK,WAAY;AACtC,WAAK,SAAS;AACd,mBAAa,cAAc;AAAA,IAC7B,GAAG,IAAI,CAAC,EAAE,MAAM;AAAA,EAClB;AAEA,EAAAC,aAAY,UAAU,mBAAmB,SAAU,KAAK;AACtD,QAAI,aAAa,KAAK;AAEtB,QAAI,CAAC,YAAY;AACf,mBAAa,KAAK,cAAc,IAAI,uBAAe,IAAI,MAAM,CAAC;AAC9D,iBAAW,OAAO,KAAK,YAAY,IAAI,MAAM,CAAC;AAC9C,iBAAW,GAAG,OAAO,KAAK,KAAK,QAAQ,IAAI,CAAC;AAC5C,iBAAW,GAAG,QAAQ,KAAK,KAAK,SAAS,IAAI,CAAC;AAAA,IAChD;AAEA,QAAI,OAAO,IAAI,qBAAa,GAAG,GAAG,IAAI,SAAS,GAAG,IAAI,UAAU,CAAC;AACjE,eAAW,kBAAkB,SAAU,GAAG,GAAG,GAAG;AAC9C,aAAO,KAAK,QAAQ,GAAG,CAAC;AAAA,IAC1B,CAAC;AAAA,EACH;AAEA,EAAAA,aAAY,UAAU,mBAAmB,WAAY;AACnD,QAAI,aAAa,KAAK;AAEtB,QAAI,YAAY;AACd,iBAAW,QAAQ;AACnB,mBAAa;AAAA,IACf;AAAA,EACF;AAEA,EAAAA,aAAY,UAAU,SAAS,SAAU,GAAG;AAC1C,QAAI,KAAK,WAAW,gBAAgB,KAAK,IAAI,EAAE,EAAE,IAAI,kBAAkB,KAAK,IAAI,EAAE,EAAE,IAAI,iBAAiB;AAEvG,UAAI,OAAO,KAAK,YAAY,QAAQ,EAAE,KAAK;AAE3C,UAAI,CAAC,MAAM;AACT;AAAA,MACF;AAEA,UAAI,aAAa,KAAK,UAAU;AAEhC,UAAI,CAAC,YAAY;AACf;AAAA,MACF;AAEA,WAAK,IAAI,eAAe;AAAA,QACtB,MAAM;AAAA,QACN,MAAM,KAAK;AAAA,QACX,UAAU,KAAK,YAAY;AAAA,QAC3B,UAAU;AAAA,UACR,GAAG,WAAW,IAAI,EAAE;AAAA,UACpB,GAAG,WAAW,IAAI,EAAE;AAAA,UACpB,OAAO,WAAW;AAAA,UAClB,QAAQ,WAAW;AAAA,QACrB;AAAA,MACF,CAAC;AAAA,IACH;AAAA,EACF;AAEA,EAAAA,aAAY,UAAU,UAAU,SAAU,GAAG;AAC3C,QAAI,SAAS,EAAE;AACf,QAAI,SAAS,EAAE;AAEf,QAAI,KAAK,WAAW,aAAa;AAE/B,UAAI,OAAO,KAAK,YAAY,QAAQ,EAAE,KAAK;AAE3C,UAAI,CAAC,MAAM;AACT;AAAA,MACF;AAEA,UAAI,aAAa,KAAK,UAAU;AAEhC,UAAI,CAAC,YAAY;AACf;AAAA,MACF;AAEA,UAAI,OAAO,IAAI,qBAAa,WAAW,GAAG,WAAW,GAAG,WAAW,OAAO,WAAW,MAAM;AAC3F,UAAI,aAAa,KAAK,YAAY;AAElC,gBAAU,WAAW;AACrB,gBAAU,WAAW;AAErB,UAAI,IAAW,OAAO;AACtB,MAAO,UAAU,GAAG,GAAG,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC;AACzC,MAAO,MAAM,GAAG,GAAG,CAAC,EAAE,OAAO,EAAE,KAAK,CAAC;AACrC,MAAO,UAAU,GAAG,GAAG,CAAC,QAAQ,MAAM,CAAC;AACvC,WAAK,eAAe,CAAC;AACrB,WAAK,IAAI,eAAe;AAAA,QACtB,MAAM;AAAA,QACN,MAAM,KAAK;AAAA,QACX,UAAU,KAAK,YAAY;AAAA,QAC3B,UAAU;AAAA,UACR,GAAG,KAAK;AAAA,UACR,GAAG,KAAK;AAAA,UACR,OAAO,KAAK;AAAA,UACZ,QAAQ,KAAK;AAAA,QACf;AAAA,MACF,CAAC;AAAA,IACH;AAAA,EACF;AAEA,EAAAA,aAAY,UAAU,cAAc,SAAU,gBAAgB;AAC5D,QAAI,QAAQ;AAEZ,mBAAe,GAAG,SAAS,SAAU,GAAG;AACtC,UAAI,MAAM,WAAW,SAAS;AAC5B;AAAA,MACF;AAEA,UAAI,YAAY,MAAM,YAAY,IAAI,aAAa,IAAI;AAEvD,UAAI,CAAC,WAAW;AACd;AAAA,MACF;AAEA,UAAI,aAAa,MAAM,WAAW,EAAE,SAAS,EAAE,OAAO;AAEtD,UAAI,CAAC,YAAY;AACf;AAAA,MACF;AAEA,UAAI,OAAO,WAAW;AAEtB,UAAI,KAAK,UAAU,EAAE,YAAY;AAC/B,cAAM,YAAY,UAAU;AAAA,MAC9B,OAAO;AACL,YAAI,cAAc,cAAc;AAC9B,gBAAM,YAAY,UAAU;AAAA,QAC9B,WAAW,cAAc,QAAQ;AAC/B,cAAI,YAAY,KAAK,SAAS,KAAK,aAAa,KAAK,SAAS;AAC9D,cAAI,OAAO,UAAU,IAAI,QAAQ,IAAI;AACrC,cAAI,aAAa,UAAU,IAAI,UAAU,IAAI,KAAK;AAClD,kBAAQ,WAAW,MAAM,UAAU;AAAA,QACrC;AAAA,MACF;AAAA,IACF,GAAG,IAAI;AAAA,EACT;AAEA,EAAAA,aAAY,UAAU,oBAAoB,SAAU,aAAa,KAAK,YAAY;AAChF,QAAI,QAAQ;AAEZ,QAAI,CAAC,YAAY;AACf,mBAAa,YAAY,IAAI,aAAa,IAAI,KAAK,OAAO;AAAA,QACxD,MAAM,YAAY,YAAY;AAAA,MAChC,IAGE,KAAK,WAAW,IAAI,SAAS,IAAI,GAAG,IAAI,UAAU,IAAI,CAAC;AAEzD,UAAI,CAAC,YAAY;AACf,qBAAa;AAAA,UACX,MAAM,YAAY,QAAQ,EAAE,KAAK;AAAA,QACnC;AAAA,MACF;AAAA,IACF;AAEA,KAAC,KAAK,gBAAgB,KAAK,cAAc,IAAI,mBAAW,KAAK,KAAK,IAAI,OAAO,aAAa,KAAK,WAAW,MAAM,SAAU,MAAM;AAC9H,UAAI,MAAM,WAAW,aAAa;AAChC,QAAO,cAAc,YAAY,YAAY,GAAG,IAAI,IAAI,MAAM,YAAY;AAAA,UACxE;AAAA,QACF,CAAC,IAAI,MAAM,YAAY;AAAA,UACrB;AAAA,QACF,CAAC;AAAA,MACH;AAAA,IACF,CAAC;AAAA,EACH;AAMA,EAAAA,aAAY,UAAU,SAAS,WAAY;AACzC,SAAK,iBAAiB;AAEtB,SAAK,mBAAmB,KAAK,gBAAgB,UAAU;AACvD,SAAK,WAAW,cAAc;AAC9B,SAAK,SAAS;AACd,SAAK,eAAe,KAAK,YAAY,OAAO;AAAA,EAC9C;AAEA,EAAAA,aAAY,UAAU,UAAU,WAAY;AAC1C,SAAK,iBAAiB;AAAA,EACxB;AAEA,EAAAA,aAAY,UAAU,cAAc,SAAU,YAAY;AACxD,SAAK,IAAI,eAAe;AAAA,MACtB,MAAM;AAAA,MACN,MAAM,KAAK;AAAA,MACX,UAAU,KAAK,YAAY;AAAA,MAC3B,YAAY,WAAW;AAAA,IACzB,CAAC;AAAA,EACH;AAEA,EAAAA,aAAY,UAAU,cAAc,SAAU,YAAY;AACxD,SAAK,IAAI,eAAe;AAAA,MACtB,MAAM;AAAA,MACN,MAAM,KAAK;AAAA,MACX,UAAU,KAAK,YAAY;AAAA,MAC3B,YAAY,WAAW;AAAA,IACzB,CAAC;AAAA,EACH;AAYA,EAAAA,aAAY,UAAU,aAAa,SAAU,GAAG,GAAG;AACjD,QAAI;AACJ,QAAI,WAAW,KAAK,YAAY,YAAY;AAC5C,aAAS,SAAS;AAAA,MAChB,MAAM;AAAA,MACN,OAAO;AAAA,IACT,GAAG,SAAU,MAAM;AACjB,UAAI,OAAO,KAAK,SAAS,WAAW,KAAK,YAAY;AAGrD,UAAI,MAAM;AACR,YAAI,QAAQ,KAAK,sBAAsB,GAAG,CAAC;AAC3C,YAAI,QAAQ,KAAK;AAEjB,YAAI,MAAM,KAAK,MAAM,MAAM,MAAM,MAAM,MAAM,IAAI,MAAM,SAAS,MAAM,KAAK,MAAM,MAAM,MAAM,MAAM,MAAM,IAAI,MAAM,QAAQ;AACzH,uBAAa;AAAA,YACX;AAAA,YACA,SAAS,MAAM;AAAA,YACf,SAAS,MAAM;AAAA,UACjB;AAAA,QACF,OAAO;AACL,iBAAO;AAAA,QACT;AAAA,MACF;AAAA,IACF,GAAG,IAAI;AACP,WAAO;AAAA,EACT;AAEA,EAAAA,aAAY,OAAO;AACnB,SAAOA;AACT,EAAE,aAAS;AAMX,SAAS,gBAAgB;AACvB,SAAO;AAAA,IACL,WAAW,CAAC;AAAA,IACZ,YAAY,CAAC;AAAA,IACb,SAAS,CAAC;AAAA,EACZ;AACF;AAOA,SAAS,WAAW,aAAa,aAAa,YAAY,QAAQ,mBAAmB,kBAAkB,UAAU,SAAS,aAAa,OAAO;AAE5I,MAAI,CAAC,UAAU;AAIb;AAAA,EACF;AAIA,MAAI,aAAa,SAAS,UAAU;AACpC,MAAI,OAAO,YAAY,QAAQ;AAC/B,MAAI,YAAY,SAAS,SAAS;AAGlC,OAAK,iBAAiB,SAAS,WAAW,IAAI;AAE9C,MAAI,CAAC,cAAc,CAAC,WAAW,UAAU;AACvC;AAAA,EACF;AAEA,MAAI,YAAY,WAAW;AAC3B,MAAI,aAAa,WAAW;AAC5B,MAAI,cAAc,WAAW;AAC7B,MAAI,gBAAgB,WAAW;AAC/B,MAAI,eAAe,SAAS,YAAY;AACxC,MAAI,cAAc,WAAW,QAAQ,YAAY;AACjD,MAAI,mBAAmB,SAAS;AAChC,MAAI,cAAc,WAAW;AAC7B,MAAI,WAAW,oBAAoB,iBAAiB;AACpD,MAAI,uBAAuB,UAAU,SAAS,WAAW;AACzD,MAAI,yBAAyB,UAAU,SAAS,CAAC,YAAY,WAAW,CAAC;AACzE,MAAI,qBAAqB,UAAU,SAAS,CAAC,QAAQ,WAAW,CAAC;AACjE,MAAI,uBAAuB,UAAU,SAAS,CAAC,UAAU,WAAW,CAAC;AACrE,MAAI,eAAe,qBAAqB,IAAI,cAAc,KAAK;AAI/D,MAAI,QAAQ,YAAY,aAAa,KAAK;AAE1C,MAAI,CAAC,OAAO;AACV;AAAA,EACF;AAEA,cAAY,IAAI,KAAK;AAErB,QAAM,IAAI,WAAW,KAAK;AAC1B,QAAM,IAAI,WAAW,KAAK;AAC1B,QAAM,WAAW;AACjB,EAAAD,OAAM,KAAK,EAAE,YAAY;AACzB,EAAAA,OAAM,KAAK,EAAE,aAAa;AAE1B,MAAI,WAAW,iBAAiB;AAC9B,WAAO;AAAA,EACT;AAGA,MAAI,KAAK,YAAY,cAAc,MAAM,OAAO,KAAK;AACrD,QAAM,iBAAiB,OAAO,IAAI,YAAY,WAAW,gBAAgB;AACzE,MAAI,gBAAgB,UAAU,SAAS,UAAU;AACjD,MAAI,QAAQ,cAAc,IAAI,OAAO;AACrC,MAAI,YAAY,cAAc,IAAI,WAAW;AAC7C,MAAI,aAAa,cAAc,IAAI,UAAU;AAC7C,MAAI,iBAAiB,UAAU,aAAa,SAAS,oBAAoB,IAAI,UAAU,eAAe,SAAS,qBAAqB,IAAI;AAExI,MAAI,UAAU;AAIZ,QAAI,qBAAqB,KAAK,GAAG;AAC/B,8BAAwB,OAAO,KAAK;AAAA,IACtC;AAEA,QAAI,IAAI;AACN,8BAAwB,IAAI,CAAC,UAAU;AAEvC,WAAK,iBAAiB,SAAS,WAAW,EAAE;AAC5C,uBAAiB,IAAI,gBAAgB,SAAS;AAAA,IAChD;AAAA,EACF,OAAO;AACL,QAAI,UAAU,YAAY,WAAW,MAAM,OAAO,UAAU;AAC5D,eAAW,cAAc,OAAO,OAAO;AACvC,OAAG,kBAAkB;AAErB,QAAI,MAAM,qBAAqB,EAAE,GAAG;AAClC,8BAAwB,IAAI,KAAK;AAAA,IACnC;AAEA,4BAAwB,OAAO,CAAC,UAAU;AAE1C,SAAK,iBAAiB,SAAS,WAAW,KAAK;AAC/C,qBAAiB,OAAO,gBAAgB,SAAS;AAAA,EACnD;AAEA,SAAO;AAIP,WAAS,iBAAiBI,QAAOC,KAAI,eAAe;AAClD,QAAI,SAAS,UAAUA,GAAE;AAEzB,WAAO,YAAY,SAAS;AAC5B,WAAO,cAAc,YAAY;AACjC,IAAAA,IAAG,SAAS;AAAA,MACV,GAAG;AAAA,MACH,GAAG;AAAA,MACH,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,GAAG;AAAA,IACL,CAAC;AAED,QAAI,eAAe;AAIjB,uBAAiBA,GAAE;AAAA,IACrB,OAAO;AACL,MAAAA,IAAG,YAAY;AACf,UAAI,QAAQ,SAAS,UAAU,OAAO;AACtC,UAAI,oBAAoB,MAAM;AAC9B,UAAI,cAAc,mBAAmB,oBAAoB;AACzD,kBAAY,OAAO;AACnB,UAAI,gBAAgB,kBAAkB,sBAAsB;AAC5D,oBAAc,OAAO,uBAAuB,IAAI,aAAa;AAC7D,UAAI,YAAY,kBAAkB,kBAAkB;AACpD,gBAAU,OAAO,mBAAmB,IAAI,aAAa;AACrD,UAAI,cAAc,kBAAkB,oBAAoB;AACxD,kBAAY,OAAO,qBAAqB,IAAI,aAAa;AAEzD,UAAI,eAAe;AACjB,YAAI,kBAAkB,YAAY,IAAI;AACtC;AAAA,UACAA;AAAA,UAAI;AAAA,UAAmB,MAAM;AAAA,UAAS;AAAA,YACpC,GAAG;AAAA,YACH,GAAG;AAAA,YACH,OAAO;AAAA,YACP,QAAQ;AAAA,UACV;AAAA,QAAC;AAAA,MACH,OACK;AACD,QAAAA,IAAG,kBAAkB;AAAA,MACvB;AAEF,MAAAA,IAAG,SAAS,WAAW;AACvB,MAAAA,IAAG,YAAY,UAAU,EAAE,QAAQ;AACnC,MAAAA,IAAG,YAAY,MAAM,EAAE,QAAQ;AAC/B,MAAAA,IAAG,YAAY,QAAQ,EAAE,QAAQ;AACjC,2BAAqBA,GAAE;AAAA,IACzB;AAEA,IAAAD,OAAM,IAAIC,GAAE;AAAA,EACd;AAEA,WAAS,cAAcD,QAAOE,UAAS;AACrC,QAAI,SAAS,UAAUA,QAAO;AAE9B,WAAO,YAAY,SAAS;AAC5B,WAAO,cAAc,YAAY;AACjC,QAAI,eAAe,KAAK,IAAI,YAAY,IAAI,aAAa,CAAC;AAC1D,QAAI,gBAAgB,KAAK,IAAI,aAAa,IAAI,aAAa,CAAC;AAC5D,IAAAA,SAAQ,UAAU;AAClB,IAAAA,SAAQ,SAAS;AAAA,MACf,GAAG;AAAA,MACH,GAAG;AAAA,MACH,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,GAAG;AAAA,IACL,CAAC;AAED,QAAI,eAAe;AAIjB,uBAAiBA,QAAO;AAAA,IAC1B,OAAO;AACL,MAAAA,SAAQ,YAAY;AACpB,UAAI,YAAY,SAAS,UAAU,OAAO;AAC1C,UAAI,cAAc,UAAU;AAC5B,UAAI,cAAc,mBAAmB,oBAAoB;AACzD,kBAAY,OAAO;AACnB,kBAAY,QAAQ,UAAU;AAC9B,UAAI,gBAAgB,kBAAkB,sBAAsB;AAC5D,UAAI,YAAY,kBAAkB,kBAAkB;AACpD,UAAI,cAAc,kBAAkB,oBAAoB;AAExD,kBAAYA,UAAS,aAAa,UAAU,SAAS,IAAI;AACzD,MAAAA,SAAQ,SAAS,WAAW;AAC5B,MAAAA,SAAQ,YAAY,UAAU,EAAE,QAAQ;AACxC,MAAAA,SAAQ,YAAY,MAAM,EAAE,QAAQ;AACpC,MAAAA,SAAQ,YAAY,QAAQ,EAAE,QAAQ;AACtC,2BAAqBA,QAAO;AAAA,IAC9B;AAEA,IAAAF,OAAM,IAAIE,QAAO;AAAA,EACnB;AAEA,WAAS,iBAAiB,SAAS;AAGjC,KAAC,QAAQ,aAAa,iBAAiB,KAAK,OAAO;AAAA,EACrD;AAEA,WAAS,YAAY,QAAQ,aAAa,eAC1C,gBAAgB;AACd,QAAI,mBAAmB,UAAU,SAAS,iBAAiB,yBAAyB,iBAAiB;AACrG,QAAI,cAAc,oBAAoB,UAAU,IAAI,MAAM,GAAG,IAAI;AACjE,QAAI,SAAS,iBAAiB,WAAW,MAAM;AAC/C,kBAAc,QAAQ,qBAAqB,WAAW,iBAAiB,yBAAyB,iBAAiB,GAAG;AAAA,MAClH,aAAa,SAAS,cAAc;AAAA,MACpC,cAAc;AAAA,MACd,gBAAgB;AAAA,MAChB,cAAc;AAAA,MACd,gBAAgB,SAAS;AAAA,IAC3B,CAAC;AACD,QAAI,SAAS,OAAO,eAAe;AAEnC,QAAI,CAAC,QAAQ;AACX;AAAA,IACF;AAEA,QAAI,YAAY,OAAO;AACvB,QAAI,cAAc,kBAAkB,UAAU,WAAW,CAAC;AAE1D,QAAI,gBAAgB;AAClB,aAAO,cAAc;AAAA,QACnB,YAAY;AAAA,MACd,CAAC;AACD,aAAO,qBAAqB;AAAA,IAC9B;AAEA,WAAO,eAAe,WAAY;AAChC,UAAI,QAAQ,KAAK,KAAK,iBAAiB,eAAe,QAAQ,OAAO,MAAM,SAAS,YAAY,KAAK,YAAY,IAAI,CAAC;AACtH,UAAI,SAAS,KAAK,KAAK,iBAAiB,eAAe,SAAS,OAAO,MAAM,UAAU,YAAY,KAAK,YAAY,IAAI,CAAC;AAEzH,UAAI,UAAU,UAAU,SAAS,UAAU,WAAW,QAAQ;AAC5D,eAAO,SAAS;AAAA,UACd;AAAA,UACA;AAAA,QACF,CAAC;AAAA,MACH;AAAA,IACF;AAEA,cAAU,kBAAkB;AAC5B,cAAU,eAAe;AACzB,qBAAiB,WAAW,gBAAgB,UAAU;AACtD,QAAI,oBAAoB,OAAO,SAAS,UAAU;AAClD,qBAAiB,oBAAoB,kBAAkB,QAAQ,MAAM,gBAAgB,UAAU;AAAA,EACjG;AAEA,WAAS,iBAAiB,OAAO,gBAAgBC,aAAY;AAC3D,QAAI,OAAO,QAAQ,MAAM,OAAO;AAEhC,QAAI,CAAC,kBAAkBA,YAAW,cAAc,QAAQ,MAAM;AAC5D,UAAI,WAAW,YAAY,IAAI,iBAAiB,IAAI;AACpD,YAAM,OAAO,WAAW,WAAW,MAAM,OAAO;AAAA,IAClD;AAAA,EACF;AAEA,WAAS,YAAY,aAAa,MAAMC,QAAO,GAAG;AAChD,QAAI,UAAU,eAAe,QAAQ,WAAW,aAAa;AAC7D,QAAI,QAAQ,kBAAkB;AAE9B,QAAI,SAAS;AAEX,iBAAW,aAAa,eAAe;AACvC,iCAA2B,OAAO,OAAO;AAAA,IAC3C,WACS,CAAC,eAAe;AACrB,gBAAU,IAAI,KAAK;AAEnB,UAAI,mBAAmB,qBAAa;AAClC,gBAAQ,KAAK,YAAYA,QAAO,CAAC;AAAA,MACnC;AAEA,gCAA0B,OAAO,OAAO;AAAA,IAC1C;AAGF,WAAO,YAAY,aAAa,gBAAgB;AAAA,EAClD;AAEA,WAAS,2BAA2B,OAAO,SAAS;AAClD,QAAI,UAAU,MAAM,gBAAgB,CAAC;AAErC,QAAI,mBAAmB,OAAO;AAC5B,cAAQ,OAAO,QAAQ;AACvB,cAAQ,OAAO,QAAQ;AAAA,IACzB,OAAO;AACL,cAAQ,WAAW,OAAO,CAAC,GAAG,QAAQ,KAAK;AAAA,IAC7C;AAAA,EACF;AAIA,WAAS,0BAA0B,OAAO,SAAS;AACjD,QAAI,UAAU,MAAM,gBAAgB,CAAC;AACrC,QAAI,aAAa,SAAS;AAC1B,QAAI,UAAU,mBAA2B;AAEzC,QAAI,eAAe,CAAC,UAAU,OAAO,cAAc,cAAc;AAC/D,UAAI,aAAa;AACjB,UAAI,aAAa;AAGjB,UAAI,cAAc,kBAAkB,WAAW,WAAW,YAAY;AAEtE,UAAI,CAAC,UAAU,eAAe,YAAY,UAAU;AAClD,qBAAa,YAAY,SAAS;AAClC,qBAAa,YAAY,SAAS;AAAA,MACpC;AAIA,UAAI,SAAS;AACX,gBAAQ,OAAO;AACf,gBAAQ,OAAO;AAAA,MACjB,OAAO;AACL,gBAAQ,WAAW;AAAA,UACjB,GAAG;AAAA,UACH,GAAG;AAAA,UACH,OAAO;AAAA,UACP,QAAQ;AAAA,QACV;AAAA,MACF;AAAA,IACF;AAGA,YAAQ,SAAS,CAAC;AAAA,EACpB;AACF;AAQA,SAAS,YAAY,OAAO,WAAW;AACrC,SAAO,QAAQ,UAAU;AAC3B;AAEA,IAAO,sBAAQ;;;ACr5Bf,IAAI,oBAAoB;AACxB,IAAIC,SAAQ,UAAU;AACtB,IAAO,wBAAQ;AAAA,EACb,YAAY;AAAA,EACZ,OAAO,SAAU,aAAa;AAC5B,QAAI,OAAO,YAAY,QAAQ,EAAE;AACjC,QAAI,OAAO,KAAK;AAEhB,QAAI,KAAK,UAAU,GAAG;AACpB;AAAA,IACF;AAEA;AAAA,MAAW;AAAA,MACX,CAAC;AAAA,MAAG,YAAY,YAAY,EAAE,aAAa;AAAA,MAAG;AAAA,IAAW;AAAA,EAC3D;AACF;AAEA,SAAS,WAAW,MAAM,kBAAkB,mBAAmB,aAAa;AAC1E,MAAI,YAAY,KAAK,SAAS;AAC9B,MAAI,aAAa,KAAK,UAAU;AAChC,MAAI,OAAO,KAAK,SAAS;AAEzB,MAAI,CAAC,cAAc,WAAW,aAAa,CAAC,WAAW,UAAU;AAC/D;AAAA,EACF;AAEA,MAAI,qBAAqB,UAAU,SAAS,iBAAiB;AAC7D,MAAI,UAAU,aAAa,oBAAoB,kBAAkB,WAAW;AAC5E,MAAI,cAAc,KAAK,uBAAuB,KAAK,WAAW,OAAO;AAErE,MAAI,cAAc,mBAAmB,IAAI,aAAa;AACtD,MAAI,wBAAwB,mBAAmB,IAAI,uBAAuB;AAC1E,MAAI;AAEJ,MAAI,yBAAyB,MAAM;AAEjC,oBAAgB,eAAe,OAAO;AACtC,kBAAc,qBAAqB,uBAAuB,aAAa;AAAA,EACzE;AAEA,cAAY,SAAS;AACrB,MAAI,eAAe,KAAK;AAExB,MAAI,CAAC,gBAAgB,CAAC,aAAa,QAAQ;AACzC,oBAAgB,eAAe,OAAO;AAEtC,gBAAY,OAAO;AAAA,EACrB,OAAO;AACL,QAAI,YAAY,mBAAmB,MAAM,WAAW,YAAY,oBAAoB,SAAS,YAAY;AAEzG,SAAK,cAAc,SAAU,OAAO,OAAO;AAEzC,UAAI,MAAM,SAAS,kBAAkB,UAAU,UAAU,kBAAkB,MAAM,QAAQ;AACvF,YAAI,cAAc,UAAU,WAAW,SAAS,OAAO,OAAO,WAAW,WAAW;AACpF,mBAAW,OAAO,aAAa,mBAAmB,WAAW;AAAA,MAC/D;AAAA,IACF,CAAC;AAAA,EACH;AACF;AAEA,SAAS,aAAa,oBAAoB,kBAAkB,aAAa;AACvE,MAAI,UAAU,OAAO,CAAC,GAAG,gBAAgB;AACzC,MAAI,4BAA4B,YAAY;AAC5C,OAAK,CAAC,SAAS,cAAc,iBAAiB,GAAG,SAAU,YAAY;AAErE,8BAA0B,cAAc,iBAAiB;AACzD,QAAI,MAAM,mBAAmB,IAAI,UAAU;AAC3C,8BAA0B,cAAc;AACxC,WAAO,SAAS,QAAQ,cAAc;AAAA,EACxC,CAAC;AACD,SAAO;AACT;AAEA,SAAS,eAAe,SAAS;AAC/B,MAAI,QAAQ,qBAAqB,SAAS,OAAO;AAEjD,MAAI,OAAO;AACT,QAAI,aAAa,qBAAqB,SAAS,YAAY;AAC3D,QAAI,kBAAkB,qBAAqB,SAAS,iBAAiB;AAErE,QAAI,iBAAiB;AACnB,cAAQ,UAAU,OAAO,MAAM,MAAM,eAAe;AAAA,IACtD;AAEA,QAAI,YAAY;AACd,cAAQ,YAAY,OAAO,UAAU;AAAA,IACvC;AAEA,WAAO;AAAA,EACT;AACF;AAEA,SAAS,qBAAqB,uBAAuB,eAAe;AAClE,SAAO,iBAAiB,OACtB,UAAU,eAAe,MAAM,MAAM,qBAAqB,IAAI;AAClE;AAEA,SAAS,qBAAqB,SAAS,MAAM;AAC3C,MAAI,QAAQ,QAAQ;AAEpB,MAAI,SAAS,QAAQ,UAAU,QAAQ;AACrC,WAAO;AAAA,EACT;AACF;AAEA,SAAS,mBAAmB,MAAM,WAAW,YAAY,oBAAoB,SAAS,cAAc;AAClG,MAAI,CAAC,gBAAgB,CAAC,aAAa,QAAQ;AACzC;AAAA,EACF;AAEA,MAAI,cAAc,eAAe,WAAW,OAAO,KAAK,QAAQ,SAAS,QAAQ,QAAQ,UAAU,WAAW,eAAe,WAAW,YAAY,KAAK,eAAe,WAAW,iBAAiB;AAEpM,MAAI,CAAC,aAAa;AAChB;AAAA,EACF;AAEA,MAAI,YAAY,UAAU,IAAI,WAAW;AACzC,MAAI,YAAY,UAAU,IAAI,WAAW;AACzC,MAAI,aAAa,WAAW,WAAW,MAAM;AAC7C,eAAa,QAAQ,YAAY,WAAW,OAAO,WAAW,KAAK;AACnE,eAAa,QAAQ,YAAY,WAAW,OAAO,WAAW,KAAK;AACnE,MAAI,iBAAiB,UAAU,IAAI,gBAAgB;AACnD,MAAI,MAAM;AAAA,IACR,MAAM,YAAY;AAAA,IAClB;AAAA,IACA,QAAQ,YAAY;AAAA,EACtB;AAEA,MAAI,IAAI,SAAS,YAAY,mBAAmB,WAAW,mBAAmB,OAAO;AACnF,QAAI,gBAAgB;AACpB,QAAI,OAAO;AAAA,EACb,OAAO;AACL,QAAI,gBAAgB;AAAA,EACtB;AAEA,MAAI,UAAU,IAAI,sBAAc,GAAG;AACnC,EAAAA,OAAM,OAAO,EAAE,mBAAmB;AAClC,SAAO;AACT;AASA,SAAS,eAAe,WAAW,MAAM;AAGvC,MAAI,QAAQ,UAAU,IAAI,IAAI;AAC9B,SAAO,QAAQ,KAAK,KAAK,MAAM,SAAS;AAAA,IACtC;AAAA,IACA;AAAA,EACF,IAAI;AACN;AAEA,SAAS,UAAU,WAAW,SAAS,OAAO,OAAO,SAAS,aAAa;AACzE,MAAI,eAAe,OAAO,CAAC,GAAG,OAAO;AAErC,MAAI,SAAS;AAEX,QAAI,cAAc,QAAQ;AAC1B,QAAI,iBAAiB,gBAAgB,WAAWA,OAAM,OAAO,EAAE;AAC/D,QAAI,QAAQ,mBAAmB,UAAU,QAAQ,mBAAmB,OAAO,YAAY,aAAa,MAAM,MAAM,CAAC,IAAI,MAAM,SAAS,UAAU,IAAI,iBAAiB,CAAC;AACpK,iBAAa,eAAe,QAAQ,iBAAiB,KAAK;AAAA,EAC5D;AAEA,SAAO;AACT;;;AC9JA,IAAIC,WAAU,KAAK;AACnB,IAAIC,WAAU,KAAK;AACnB,IAAI,gBAAuB;AAC3B,IAAIC,QAAc;AAClB,IAAI,oBAAoB,CAAC,aAAa,aAAa;AACnD,IAAI,iBAAiB,CAAC,aAAa,UAAU;AAC7C,IAAI,wBAAwB,CAAC,cAAc,MAAM;AACjD,IAAI,0BAA0B,CAAC,cAAc,QAAQ;AAMrD,IAAO,wBAAQ;AAAA,EACb,YAAY;AAAA,EACZ,OAAO,SAAU,aAAa,SAAS,KAAK,SAAS;AAGnD,QAAI,UAAU,IAAI,SAAS;AAC3B,QAAI,WAAW,IAAI,UAAU;AAC7B,QAAI,eAAe,YAAY;AAC/B,QAAI,aAAoB,cAAc,YAAY,mBAAmB,GAAG;AAAA,MACtE,OAAO,IAAI,SAAS;AAAA,MACpB,QAAQ,IAAI,UAAU;AAAA,IACxB,CAAC;AACD,QAAI,OAAO,aAAa,QAAQ,CAAC;AAEjC,QAAI,iBAAiBC,cAAa,cAAc,WAAW,OAAO,KAAK,EAAE,GAAG,OAAO;AACnF,QAAI,kBAAkBA,cAAa,cAAc,WAAW,QAAQ,KAAK,EAAE,GAAG,QAAQ;AAEtF,QAAI,cAAc,WAAW,QAAQ;AACrC,QAAI,QAAQ,CAAC,qBAAqB,mBAAmB;AACrD,QAAI,aAAoB,mBAAmB,SAAS,OAAO,WAAW;AACtE,QAAI,WAAW,gBAAgB,mBAAmB,gBAAgB,gBAAgB,QAAQ,WAAW;AACrG,QAAI,WAAW,YAAY,YAAY;AACvC,QAAI,gBAAuB,cAAc,QAAQ;AAEjD,QAAI,gBAAgB,eAAe;AACjC,UAAI,WAAW,gBAAgB,sBAAsB,iBAAiB,aAAa,YAAY,UAAU,gBAAgB,eAAe,IAAI,WAAW,CAAC,SAAS,OAAO,SAAS,MAAM,IAAI,CAAC,gBAAgB,eAAe;AAC3N,UAAI,SAAS,aAAa;AAE1B,UAAI,UAAU,WAAW,SAAS,WAAW,QAAQ;AAEnD,iBAAS;AAAA,MACX;AAEA,UAAI,UAAU;AAAA,QACZ,aAAa,aAAa;AAAA,QAC1B,MAAM;AAAA,QACN,WAAW,aAAa;AAAA,MAC1B;AAEA,eAAS,SAAS,aAAa;AAK/B,UAAI,mBAAmB;AAAA,QACrB,GAAG;AAAA,QACH,GAAG;AAAA,QACH,OAAO,SAAS;AAAA,QAChB,QAAQ,SAAS;AAAA,QACjB,MAAM,SAAS,KAAK,SAAS;AAAA,MAC/B;AACA,eAAS,UAAU,gBAAgB;AACnC,eAAS,UAAU,SAAS,OAAO,CAAC;AAEpC,yBAAmB,SAAS,UAAU;AACtC,MAAAC,MAAK,eAAe,SAAU,MAAM,OAAO;AACzC,YAAI,cAAc,cAAc,QAAQ,MAAM,UAAU,SAAS;AACjE,aAAK,UAAiB,OAAO;AAAA,UAC3B,YAAY,CAAC,YAAY,UAAU;AAAA,UACnC,aAAa;AAAA,UACb,aAAa;AAAA,QACf,GAAG,gBAAgB,CAAC;AAAA,MACtB,CAAC;AAAA,IACH;AAEA,QAAI,WAAW,YAAY,QAAQ,EAAE,KAAK;AAC1C,aAAS,UAAU,sBAAsB,YAAY,UAAU,UAAU,GAAG,IAAI;AAChF,gBAAY,cAAc,UAAU;AAGpC;AAAA,MAAS;AAAA,MACT,IAAI,qBAAa,CAAC,WAAW,GAAG,CAAC,WAAW,GAAG,SAAS,QAAQ;AAAA,MAAG;AAAA,MAAe;AAAA,MAAU;AAAA,IAAC;AAAA,EAC/F;AACF;AAoBA,SAAS,SAAS,MAAM,SAAS,cAAc,OAAO;AACpD,MAAI;AACJ,MAAI;AAEJ,MAAI,KAAK,UAAU,GAAG;AACpB;AAAA,EACF;AAEA,MAAI,aAAa,KAAK,UAAU;AAChC,UAAQ,WAAW;AACnB,WAAS,WAAW;AAEpB,MAAI,YAAY,KAAK,SAAS;AAC9B,MAAI,cAAc,UAAU,IAAI,iBAAiB;AACjD,MAAI,eAAe,UAAU,IAAI,cAAc,IAAI;AACnD,MAAI,mBAAmB,oBAAoB,SAAS;AACpD,MAAI,cAAc,KAAK,IAAI,aAAa,gBAAgB;AACxD,MAAI,eAAe,cAAc;AACjC,MAAI,oBAAoB,cAAc;AACtC,OAAK,UAAU;AAAA,IACb;AAAA,IACA;AAAA,IACA;AAAA,EACF,GAAG,IAAI;AACP,UAAQC,SAAQ,QAAQ,IAAI,cAAc,CAAC;AAC3C,WAASA,SAAQ,SAAS,eAAe,mBAAmB,CAAC;AAC7D,MAAI,YAAY,QAAQ;AACxB,MAAI,eAAe,aAAa,MAAM,WAAW,WAAW,SAAS,cAAc,KAAK;AAExF,MAAI,CAAC,aAAa,QAAQ;AACxB;AAAA,EACF;AAEA,MAAI,OAAO;AAAA,IACT,GAAG;AAAA,IACH,GAAG;AAAA,IACH;AAAA,IACA;AAAA,EACF;AACA,MAAI,iBAAiBC,SAAQ,OAAO,MAAM;AAC1C,MAAI,OAAO;AAEX,MAAI,MAAM,CAAC;AACX,MAAI,OAAO;AAEX,WAAS,IAAI,GAAGC,OAAM,aAAa,QAAQ,IAAIA,QAAM;AACnD,QAAI,QAAQ,aAAa;AACzB,QAAI,KAAK,KAAK;AACd,QAAI,QAAQ,MAAM,UAAU,EAAE;AAC9B,QAAI,QAAQ,MAAM,KAAK,gBAAgB,QAAQ,WAAW;AAE1D,QAAI,SAAS,MAAM;AACjB;AACA,aAAO;AAAA,IACT,OACK;AACD,UAAI,QAAQ,IAAI,IAAI,EAAE,UAAU,EAAE;AAClC,eAAS,KAAK,gBAAgB,MAAM,cAAc,KAAK;AACvD,uBAAiBD,SAAQ,KAAK,OAAO,KAAK,MAAM;AAChD,UAAI,SAAS,IAAI,OAAO;AACxB,aAAO;AAAA,IACT;AAAA,EACJ;AAEA,MAAI,IAAI,QAAQ;AACd,aAAS,KAAK,gBAAgB,MAAM,cAAc,IAAI;AAAA,EACxD;AAEA,MAAI,CAAC,cAAc;AACjB,QAAI,qBAAqB,UAAU,IAAI,oBAAoB;AAE3D,QAAI,sBAAsB,QAAQ,YAAY,oBAAoB;AAChE,qBAAe;AAAA,IACjB;AAAA,EACF;AAEA,WAAS,IAAI,GAAGC,OAAM,aAAa,QAAQ,IAAIA,MAAK,KAAK;AACvD,aAAS,aAAa,IAAI,SAAS,cAAc,QAAQ,CAAC;AAAA,EAC5D;AACF;AAMA,SAAS,aAAa,MAAM,WAAW,WAAW,SAAS,cAAc,OAAO;AAC9E,MAAI,eAAe,KAAK,YAAY,CAAC;AACrC,MAAI,UAAU,QAAQ;AACtB,cAAY,SAAS,YAAY,WAAW,UAAU;AACtD,MAAI,gBAAgB,QAAQ,aAAa,QAAQ,QAAQ,aAAa;AAEtE,MAAI,gBAAgB,CAAC,eAAe;AAClC,WAAO,KAAK,eAAe,CAAC;AAAA,EAC9B;AAGA,iBAAsB,OAAO,cAAc,SAAU,OAAO;AAC1D,WAAO,CAAC,MAAM,UAAU;AAAA,EAC1B,CAAC;AACD,OAAK,cAAc,OAAO;AAC1B,MAAI,OAAO,UAAU,WAAW,cAAc,OAAO;AAErD,MAAI,KAAK,QAAQ,GAAG;AAClB,WAAO,KAAK,eAAe,CAAC;AAAA,EAC9B;AAEA,OAAK,MAAM,kBAAkB,WAAW,WAAW,KAAK,KAAK,SAAS,YAAY;AAElF,MAAI,KAAK,QAAQ,GAAG;AAClB,WAAO,KAAK,eAAe,CAAC;AAAA,EAC9B;AAGA,WAAS,IAAI,GAAGA,OAAM,aAAa,QAAQ,IAAIA,MAAK,KAAK;AACvD,QAAI,OAAO,aAAa,GAAG,SAAS,IAAI,KAAK,MAAM;AAEnD,iBAAa,GAAG,UAAU;AAAA,MACxB;AAAA,IACF,CAAC;AAAA,EACH;AAEA,MAAI,eAAe;AACjB,iBAAa,UAAU,KAAK,UAAU;AAAA,MACpC,YAAY;AAAA,IACd,GAAG,IAAI;AACP,iBAAa,SAAS;AAAA,EACxB;AAEA,OAAK,eAAe;AACpB,OAAK,UAAU;AAAA,IACb,YAAY,KAAK;AAAA,EACnB,GAAG,IAAI;AACP,SAAO;AACT;AAMA,SAAS,kBAAkB,WAAW,WAAWC,MAAK,SAAS,iBAAiB;AAE9E,MAAI,CAAC,SAAS;AACZ,WAAOA;AAAA,EACT;AAEA,MAAI,aAAa,UAAU,IAAI,YAAY;AAC3C,MAAID,OAAM,gBAAgB;AAC1B,MAAI,cAAcA;AAElB,WAAS,IAAIA,OAAM,GAAG,KAAK,GAAG,KAAK;AACjC,QAAI,QAAQ,gBAAgB,YAAY,QAAQA,OAAM,IAAI,IAAI,GAAG,SAAS;AAE1E,QAAI,QAAQC,OAAM,YAAY,YAAY;AACxC,oBAAc;AACd,MAAAA,QAAO;AAAA,IACT;AAAA,EACF;AAEA,cAAY,QAAQ,gBAAgB,OAAO,GAAGD,OAAM,WAAW,IAAI,gBAAgB,OAAO,aAAaA,OAAM,WAAW;AACxH,SAAOC;AACT;AAMA,SAAS,KAAK,cAAc,SAAS;AACnC,MAAI,SAAS;AACX,iBAAa,KAAK,SAAU,GAAG,GAAG;AAChC,UAAI,OAAO,YAAY,QAAQ,EAAE,SAAS,IAAI,EAAE,SAAS,IAAI,EAAE,SAAS,IAAI,EAAE,SAAS;AACvF,aAAO,SAAS,IAAI,YAAY,QAAQ,EAAE,YAAY,EAAE,YAAY,EAAE,YAAY,EAAE,YAAY;AAAA,IAClG,CAAC;AAAA,EACH;AAEA,SAAO;AACT;AAMA,SAAS,UAAU,WAAW,UAAU,SAAS;AAE/C,MAAIA,OAAM;AAEV,WAAS,IAAI,GAAGD,OAAM,SAAS,QAAQ,IAAIA,MAAK,KAAK;AACnD,IAAAC,QAAO,SAAS,GAAG,SAAS;AAAA,EAC9B;AAMA,MAAI,YAAY,UAAU,IAAI,iBAAiB;AAC/C,MAAI;AAEJ,MAAI,CAAC,YAAY,CAAC,SAAS,QAAQ;AACjC,iBAAa,CAAC,KAAK,GAAG;AAAA,EACxB,WAAW,cAAc,WAAW,SAAS;AAC3C,iBAAa,CAAC,SAAS,SAAS,SAAS,GAAG,SAAS,GAAG,SAAS,GAAG,SAAS,CAAC;AAC9E,gBAAY,SAAS,WAAW,QAAQ;AAAA,EAC1C,OACK;AACD,iBAAa,CAAC,UAAU,SAAS;AACjC,IAAAJ,MAAK,UAAU,SAAU,OAAO;AAC9B,UAAI,QAAQ,MAAM,SAAS,SAAS;AACpC,cAAQ,WAAW,OAAO,WAAW,KAAK;AAC1C,cAAQ,WAAW,OAAO,WAAW,KAAK;AAAA,IAC5C,CAAC;AAAA,EACH;AAEF,SAAO;AAAA,IACL,KAAKI;AAAA,IACL;AAAA,EACF;AACF;AAOA,SAAS,MAAM,KAAK,gBAAgB,OAAO;AACzC,MAAI,UAAU;AACd,MAAI,UAAU;AAEd,WAAS,IAAI,GAAG,OAAO,QAAQD,OAAM,IAAI,QAAQ,IAAIA,MAAK,KAAK;AAC7D,WAAO,IAAI,GAAG,UAAU,EAAE;AAE1B,QAAI,MAAM;AACR,aAAO,YAAY,UAAU;AAC7B,aAAO,YAAY,UAAU;AAAA,IAC/B;AAAA,EACF;AAEA,MAAI,aAAa,IAAI,OAAO,IAAI;AAChC,MAAI,IAAI,iBAAiB,iBAAiB;AAC1C,SAAO,aAAaF,SAAQ,IAAI,UAAU,YAAY,cAAc,IAAI,QAAQ,IAAI;AACtF;AAMA,SAAS,SAAS,KAAK,gBAAgB,MAAM,cAAc,OAAO;AAShE,MAAI,YAAY,mBAAmB,KAAK,QAAQ,IAAI;AACpD,MAAI,YAAY,IAAI;AACpB,MAAI,KAAK,CAAC,KAAK,GAAG;AAClB,MAAI,KAAK,CAAC,SAAS,QAAQ;AAC3B,MAAI,OAAO,KAAK,GAAG;AACnB,MAAI,iBAAiB,iBAAiB,IAAI,OAAO,iBAAiB;AAElE,MAAI,SAAS,iBAAiB,KAAK,GAAG,aAAa;AACjD,qBAAiB,KAAK,GAAG;AAAA,EAC3B;AAEA,WAAS,IAAI,GAAG,SAAS,IAAI,QAAQ,IAAI,QAAQ,KAAK;AACpD,QAAI,OAAO,IAAI;AACf,QAAI,aAAa,CAAC;AAClB,QAAI,OAAO,iBAAiB,KAAK,UAAU,EAAE,OAAO,iBAAiB;AACrE,QAAI,MAAM,WAAW,GAAG,cAAcA,SAAQ,iBAAiB,IAAI,cAAc,CAAC;AAElF,QAAI,SAAS,KAAK,GAAG,cAAc,KAAK,GAAG,cAAc;AACzD,QAAI,QAAQ,MAAM,SAAS,KAAK,SAAS,OAAO,SAAS;AACzD,QAAI,MAAM,WAAW,GAAG,cAAcA,SAAQ,QAAQ,IAAI,cAAc,CAAC;AACzE,eAAW,GAAG,cAAc,KAAK,GAAG,cAAcC,SAAQ,cAAc,MAAM,CAAC;AAC/E,eAAW,GAAG,cAAc,OAAOA,SAAQ,cAAc,MAAM,CAAC;AAChE,YAAQ;AACR,SAAK,UAAU,YAAY,IAAI;AAAA,EACjC;AAEA,OAAK,GAAG,eAAe;AACvB,OAAK,GAAG,eAAe;AACzB;AAGA,SAAS,iBAAiB,aAAa,YAAY,UAAU,gBAAgB,iBAAiB;AAG5F,MAAI,YAAY,cAAc,CAAC,GAAG;AAClC,MAAI,cAAc,CAAC,gBAAgB,eAAe;AAElD,MAAI,CAAC,YAAY,aAAa,UAAU;AACtC,WAAO;AAAA,EACT;AAEA,MAAI;AACJ,MAAI,WAAW,iBAAiB;AAChC,MAAI,OAAO,WAAW,YAAY,OAAO;AAEzC,SAAO,SAAS,SAAS,YAAY;AAEnC,QAAIE,OAAM;AACV,QAAI,WAAW,OAAO;AAEtB,aAAS,IAAI,GAAGD,OAAM,SAAS,QAAQ,IAAIA,MAAK,KAAK;AACnD,MAAAC,QAAO,SAAS,GAAG,SAAS;AAAA,IAC9B;AAEA,QAAI,gBAAgB,SAAS,SAAS;AAEtC,QAAI,kBAAkB,GAAG;AACvB,aAAO;AAAA,IACT;AAEA,YAAQA,OAAM;AAEd,QAAI,cAAc,OAAO,SAAS;AAClC,QAAI,cAAc,YAAY,IAAI,iBAAiB;AACnD,QAAI,cAAc,KAAK,IAAI,aAAa,oBAAoB,WAAW,CAAC;AACxE,YAAQ,IAAI,cAAc,eAAe,IAAI,cAAc,eAAe,KAAK,IAAI,MAAM,GAAG;AAC5F,WAAO,qBAAqB,OAAO;AACnC,eAAW;AAAA,EACb;AAEA,SAAO,aAAa,OAAO;AAC3B,MAAIC,SAAQ,KAAK,IAAI,OAAO,UAAU,GAAG;AACzC,SAAO,CAAC,iBAAiBA,QAAO,kBAAkBA,MAAK;AACzD;AAGA,SAAS,sBAAsB,YAAY,UAAU,YAAY;AAC/D,MAAI,UAAU;AACZ,WAAO;AAAA,MACL,GAAG,SAAS;AAAA,MACZ,GAAG,SAAS;AAAA,IACd;AAAA,EACF;AAEA,MAAI,kBAAkB;AAAA,IACpB,GAAG;AAAA,IACH,GAAG;AAAA,EACL;AAEA,MAAI,CAAC,YAAY;AACf,WAAO;AAAA,EACT;AAKA,MAAI,aAAa,WAAW;AAC5B,MAAIC,UAAS,WAAW,UAAU;AAElC,MAAI,CAACA,SAAQ;AACX,WAAO;AAAA,EACT;AAGA,MAAI,eAAe,CAACA,QAAO,QAAQ,GAAGA,QAAO,SAAS,CAAC;AACvD,MAAI,OAAO;AAEX,SAAO,MAAM;AACX,QAAI,aAAa,KAAK,UAAU;AAChC,iBAAa,MAAM,WAAW;AAC9B,iBAAa,MAAM,WAAW;AAC9B,WAAO,KAAK;AAAA,EACd;AAEA,SAAO;AAAA,IACL,GAAG,WAAW,QAAQ,IAAI,aAAa;AAAA,IACvC,GAAG,WAAW,SAAS,IAAI,aAAa;AAAA,EAC1C;AACF;AAIA,SAAS,SAAS,MAAM,UAAU,eAAe,UAAU,OAAO;AAChE,MAAI,aAAa,KAAK,UAAU;AAChC,MAAI,sBAAsB,cAAc;AACxC,MAAI,kBAAkB,uBAAuB,wBAAwB;AAErE,MAAI,uBAAuB,CAAC,mBAAmB,UAAU,cAAc,UAAU,SAAS,UAAU;AAClG;AAAA,EACF;AAEA,OAAK,UAAU;AAAA,IAEb,UAAU;AAAA,IAGV,WAAW,CAAC,mBAAmB,CAAC,SAAS,UAAU,UAAU;AAAA,IAC7D;AAAA,EACF,GAAG,IAAI;AAEP,MAAI,gBAAgB,IAAI,qBAAa,SAAS,IAAI,WAAW,GAAG,SAAS,IAAI,WAAW,GAAG,SAAS,OAAO,SAAS,MAAM;AAC1H,EAAAN,MAAK,KAAK,gBAAgB,CAAC,GAAG,SAAU,OAAO;AAC7C,aAAS,OAAO,eAAe,eAAe,UAAU,QAAQ,CAAC;AAAA,EACnE,CAAC;AACH;AAEA,SAAS,oBAAoB,OAAO;AAClC,SAAO,MAAM,IAAI,qBAAqB,IAAI,MAAM,IAAI,uBAAuB,IAAI;AACjF;;;ACrgBO,SAASO,UAAQ,WAAW;AACjC,YAAU,oBAAoB,qBAAkB;AAChD,YAAU,kBAAkB,mBAAW;AACvC,YAAU,eAAe,qBAAa;AACtC,YAAU,eAAe,qBAAa;AACtC,uBAAqB,SAAS;AAChC;;;ACVe,SAAR,eAAgC,SAAS;AAC9C,MAAI,eAAe,QAAQ,eAAe;AAAA,IACxC,UAAU;AAAA,EACZ,CAAC;AAED,MAAI,CAAC,gBAAgB,CAAC,aAAa,QAAQ;AACzC;AAAA,EACF;AAEA,UAAQ,iBAAiB,SAAS,SAAU,aAAa;AACvD,QAAI,iBAAiB,YAAY,kBAAkB;AACnD,QAAI,QAAQ,YAAY,SAAS;AACjC,QAAI,OAAO,MAAM;AACjB,QAAI,gBAAgB,eAAe,SAAS,eAAe,OAAO;AAClE,SAAK,WAAW,SAAU,KAAK;AAC7B,UAAI,QAAQ,KAAK,aAAa,GAAG;AACjC,UAAI,WAAW,MAAM,WAAW,UAAU;AAE1C,UAAI,YAAY,MAAM;AACpB,YAAI,SAAS,QAAQ,GAAG;AACtB,qBAAW,cAAc;AAAA,QAC3B;AAGA,iBAAS,IAAI,GAAG,IAAI,aAAa,QAAQ,KAAK;AAC5C,cAAI,CAAC,aAAa,GAAG,WAAW,QAAQ,GAAG;AACzC,mBAAO;AAAA,UACT;AAAA,QACF;AAAA,MACF;AAEA,aAAO;AAAA,IACT,CAAC;AAAA,EACH,CAAC;AACH;;;AClCe,SAAR,eAAgC,SAAS;AAC9C,MAAI,eAAe,CAAC;AACpB,UAAQ,iBAAiB,SAAS,SAAU,aAAa;AACvD,QAAI,iBAAiB,YAAY,kBAAkB;AACnD,QAAI,OAAO,YAAY,QAAQ;AAC/B,QAAI,qBAAqB,CAAC;AAC1B,mBAAe,KAAK,SAAU,KAAK;AACjC,UAAI,OAAO,eAAe,QAAQ,GAAG;AAErC,yBAAmB,QAAQ,QAAQ;AACnC,UAAI,YAAY,eAAe,aAAa,GAAG;AAC/C,UAAI,QAAQ,UAAU,SAAS,WAAW,EAAE,aAAa;AAEzD,UAAI,CAAC,MAAM,MAAM;AAEf,cAAM,OAAO,YAAY,oBAAoB,MAAM,YAAY;AAAA,MACjE;AAEA,qBAAe,cAAc,KAAK,SAAS,KAAK;AAChD,UAAI,mBAAmB,CAAC,UAAU,cAAc,kBAAkB;AAElE,eAAS,IAAI,GAAG,IAAI,iBAAiB,QAAQ,KAAK;AAChD,YAAI,eAAe,UAAU,WAAW,iBAAiB,IAAI,IAAI;AAEjE,YAAI,gBAAgB,MAAM;AACxB,yBAAe,cAAc,KAAK,iBAAiB,IAAI,YAAY;AAAA,QACrE;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI,eAAe,MAAM,GAAG;AAC1B,WAAK,KAAK,SAAU,KAAK;AACvB,YAAI,QAAQ,KAAK,aAAa,GAAG;AACjC,YAAI,cAAc,MAAM,WAAW,UAAU;AAE7C,YAAI,eAAe,MAAM;AACvB,cAAI,SAAS,WAAW,GAAG;AACzB,0BAAc,mBAAmB,QAAQ;AAAA,UAC3C;AAEA,cAAI,gBAAgB,eAAe,cAAc,aAAa,OAAO;AACrE,cAAI,QAAQ,KAAK,uBAAuB,KAAK,OAAO;AACpD,iBAAO,OAAO,aAAa;AAC3B,cAAI,aAAa,CAAC,UAAU,cAAc,kBAAkB;AAE5D,mBAAS,IAAI,GAAG,IAAI,WAAW,QAAQ,KAAK;AAC1C,iBAAK,cAAc,KAAK,WAAW,IAAI,eAAe,cAAc,aAAa,WAAW,EAAE,CAAC;AAAA,UACjG;AAAA,QACF;AAAA,MACF,CAAC;AAAA,IACH;AAAA,EACF,CAAC;AACH;;;ACnDA,SAASC,WAAU,GAAG;AACpB,MAAI,EAAE,aAAa,QAAQ;AACzB,QAAI,CAAC,GAAG,CAAC;AAAA,EACX;AAEA,SAAO;AACT;AAEe,SAAR,gBAAiC,SAAS;AAC/C,UAAQ,iBAAiB,SAAS,SAAU,aAAa;AACvD,QAAI,QAAQ,YAAY,SAAS;AACjC,QAAI,WAAW,YAAY,YAAY;AACvC,QAAI,aAAaA,WAAU,YAAY,IAAI,YAAY,CAAC;AACxD,QAAI,aAAaA,WAAU,YAAY,IAAI,gBAAgB,CAAC;AAG5D,aAAS,UAAU,cAAc,cAAc,WAAW,EAAE;AAC5D,aAAS,UAAU,YAAY,cAAc,WAAW,EAAE;AAC1D,aAAS,UAAU,kBAAkB,cAAc,WAAW,EAAE;AAChE,aAAS,UAAU,gBAAgB,cAAc,WAAW,EAAE;AAC9D,aAAS,UAAU,SAAS,YAAY,SAAS,WAAW,EAAE,aAAa,CAAC;AAC5E,aAAS,KAAK,SAAU,KAAK;AAC3B,UAAI,YAAY,SAAS,aAAa,GAAG;AACzC,UAAI,OAAO,MAAM,eAAe,GAAG;AACnC,UAAIC,cAAaD,WAAU,UAAU,WAAW,UAAU,IAAI,CAAC;AAC/D,UAAIE,cAAaF,WAAU,UAAU,WAAW,cAAc,IAAI,CAAC;AAEnE,UAAI,QAAQ,UAAU,SAAS,WAAW,EAAE,aAAa;AACzD,UAAI,cAAc,SAAS,uBAAuB,KAAK,OAAO;AAC9D,aAAO,aAAa,KAAK;AAEzB,cAAQ,YAAY,QAAQ;AAAA,QAC1B,KAAK,UACH;AACE,cAAI,YAAY,KAAK,MAAM,UAAU,OAAO;AAC5C,sBAAY,SAAS,aAAa,UAAU;AAC5C;AAAA,QACF;AAAA,QAEF,KAAK,UACH;AACE,cAAI,YAAY,KAAK,MAAM,UAAU,OAAO;AAC5C,sBAAY,SAAS,aAAa,UAAU;AAC5C;AAAA,QACF;AAAA,MACJ;AAEA,MAAAC,YAAW,MAAM,KAAK,UAAU,cAAcA,YAAW,EAAE;AAC3D,MAAAA,YAAW,MAAM,KAAK,UAAU,YAAYA,YAAW,EAAE;AACzD,MAAAC,YAAW,MAAM,KAAK,UAAU,kBAAkBA,YAAW,EAAE;AAC/D,MAAAA,YAAW,MAAM,KAAK,UAAU,gBAAgBA,YAAW,EAAE;AAAA,IAC/D,CAAC;AAAA,EACH,CAAC;AACH;;;ACrDA,IAAI,gBAAgB;AAOpB,IAAI,yBAAyB,SAAU,aAAa;AAClD,SAAO,YAAY,IAAI,eAAe,KAAK;AAC7C;AASA,IAAI,kBAAkB,SAAU,aAAa,cAAc;AACzD,MAAI,sBAAsB,uBAAuB,WAAW;AAC5D,MAAI,SAAS;AACb,MAAI,gBAAgB,CAAC;AAErB,MAAW,SAAS,mBAAmB,GAAG;AACxC,aAAS;AAAA,EACX,WAAkB,QAAQ,mBAAmB,GAAG;AAC9C,gBAAY,kBAAkB;AAC9B;AAAA,EACF;AAGA,MAAI,eAAe,QAAQ;AACzB,aAAS;AAAA,EACX;AAGA,MAAIC,OAAM,SAAS,IAAI,SAAS,IAAI,SAAS;AAC7C,kBAAgB,CAAC;AAEjB,WAAS,IAAI,GAAG,IAAIA,MAAK,KAAK;AAC5B,kBAAc,MAAM,IAAI,IAAI,IAAI,IAAI,KAAK,MAAM,IAAI,IAAI,KAAK,EAAE;AAAA,EAChE;AAEA,cAAY,kBAAkB;AAChC;AAUA,IAAI,gBAAgB,SAAU,IAAI,IAAI,aAAa;AACjD,MAAI,SAAS,CAAC,GAAG,IAAI,GAAG,SAAS,EAAE,KAAK,GAAG;AAC3C,MAAI,SAAS,CAAC,GAAG,IAAI,GAAG,SAAS,EAAE,KAAK,GAAG;AAC3C,SAAO,CAAC,YAAY,KAAK,QAAQ,MAAM,EAAE,KAAK,aAAa;AAC7D;AAQA,IAAI,iBAAiB,SAAU,KAAK;AAClC,MAAIC,QAAO,IAAI,MAAM,aAAa;AAClC,SAAO,CAACA,MAAK,IAAIA,MAAK,IAAIA,MAAK,EAAE,EAAE,KAAK,aAAa;AACvD;AAQA,IAAI,iBAAiB,SAAU,MAAM,aAAa;AAChD,MAAI,MAAM,cAAc,KAAK,OAAO,KAAK,OAAO,WAAW;AAC3D,SAAO,YAAY,UAAU;AAC/B;AASA,IAAI,6BAA6B,SAAU,MAAM,aAAa;AAC5D,MAAID,OAAM,wBAAwB,cAAc,KAAK,OAAO,KAAK,OAAO,WAAW,GAAG,WAAW;AACjG,MAAI,OAAO,wBAAwB,cAAc,KAAK,OAAO,KAAK,OAAO,WAAW,GAAG,WAAW;AAClG,SAAOA,OAAM;AACf;AAOA,IAAI,0BAA0B,SAAU,KAAK,aAAa;AACxD,MAAI,UAAU,YAAY;AAC1B,SAAO,QAAQ,OAAO,QAAQ,KAAK,SAAS;AAC9C;AAQO,SAAS,kBAAkB,aAAa;AAC7C,MAAI,CAAC,uBAAuB,WAAW,GAAG;AACxC;AAAA,EACF;AAEA,cAAY,kBAAkB,CAAC;AAC/B,cAAY,YAAY,CAAC;AAEzB,kBAAgB,WAAW;AAC7B;AASO,SAAS,0BAA0B,IAAI,IAAI,aAAa,OAAO;AACpE,MAAI,CAAC,uBAAuB,WAAW,GAAG;AACxC;AAAA,EACF;AAEA,MAAI,MAAM,cAAc,IAAI,IAAI,WAAW;AAC3C,MAAI,UAAU,YAAY;AAC1B,MAAI,gBAAgB,QAAQ,eAAe,GAAG;AAE9C,MAAI,QAAQ,QAAQ,CAAC,eAAe;AAClC,YAAQ,KAAK,YAAY;AAAA,EAC3B,WAAW,iBAAiB,QAAQ,MAAM;AACxC,kBAAc,YAAY;AAC1B,YAAQ,KAAK,YAAY;AAAA,EAC3B;AAEA,UAAQ,OAAO,QAAQ,QAAQ,CAAC;AAChC,UAAQ,KAAK,KAAK,KAAK;AACzB;AAQO,SAAS,oBAAoB,MAAM,aAAa,OAAO,aAAa;AACzE,MAAI,sBAAsB,uBAAuB,WAAW;AAC5D,MAAI,eAAsB,QAAQ,mBAAmB;AAErD,MAAI,CAAC,qBAAqB;AACxB,WAAO;AAAA,EACT;AAEA,MAAI,YAAY,eAAe,MAAM,WAAW;AAEhD,MAAI,CAAC,WAAW;AACd,WAAO;AAAA,EACT;AAEA,MAAI,YAAY;AAEhB,WAAS,IAAI,GAAG,IAAI,UAAU,QAAQ,KAAK;AACzC,QAAI,UAAU,OAAO,OAAO;AAC1B,kBAAY;AACZ;AAAA,IACF;AAAA,EACF;AAGA,MAAI,WAAW,2BAA2B,MAAM,WAAW;AAC3D,kBAAgB,aAAa,QAAQ;AACrC,OAAK,YAAY,KAAK,aAAa,CAAC;AAEpC,MAAI,SAAS,cAAc,KAAK,OAAO,KAAK,OAAO,WAAW;AAC9D,MAAI,gBAAgB,YAAY;AAEhC,MAAI,mBAAmB,eAAe,IAAI,WAAW,IAAI,IAAI;AAE7D,MAAI,CAAC,UAAU,WAAW;AAExB,QAAI,cAAc,eAAe,MAAM;AACvC,QAAIA,OAAM,wBAAwB,aAAa,WAAW;AAC1D,QAAI,WAAW,cAAc,YAAYA,OAAM;AAE/C,QAAI,aAAa;AAEf,UAAI,cAAc;AAChB,YAAI,uBAAuB,oBAAoB,OAAO,GAAG;AACvD,kBAAQA,OAAM,oBAAoB,IAAI,WAAW,CAAC;AAAA,QACpD,OAAO;AACL,mBAASA,OAAM,IAAI,IAAI,KAAK,oBAAoB,IAAI,WAAW,CAAC;AAAA,QAClE;AAAA,MACF,OAAO;AACL,gBAAQA,OAAM,oBAAoB,IAAI,WAAW,CAAC;AAAA,MACpD;AAAA,IACF,OAAO;AACL,aAAO,cAAc,YAAYA,OAAM;AAAA,IACzC;AAAA,EACF,OAAO;AACL,WAAO,cAAc,mBAAmB;AAAA,EAC1C;AACF;;;AClNO,SAAS,aAAa,aAAa;AACxC,MAAI,WAAW,YAAY;AAE3B,MAAI,YAAY,SAAS,SAAS,QAAQ;AACxC;AAAA,EACF;AAEA,MAAI,QAAQ,YAAY,SAAS;AACjC,QAAM,SAAS,SAAU,MAAM;AAC7B,QAAI,QAAQ,KAAK,SAAS;AAC1B,SAAK,UAAU,CAAC,CAAC,MAAM,IAAI,GAAG,GAAG,CAAC,MAAM,IAAI,GAAG,CAAC,CAAC;AAAA,EACnD,CAAC;AACD,mBAAiB,OAAO,WAAW;AACrC;AACO,SAAS,iBAAiB,OAAO,aAAa;AACnD,QAAM,SAAS,SAAU,MAAM,OAAO;AACpC,QAAI,YAAmB,UAAU,KAAK,SAAS,EAAE,IAAI,CAAC,aAAa,WAAW,CAAC,GAAG,CAAC,oBAAoB,MAAM,aAAa,OAAO,IAAI,GAAG,CAAC;AACzI,QAAI,KAAUE,OAAM,KAAK,MAAM,UAAU,CAAC;AAC1C,QAAI,KAAUA,OAAM,KAAK,MAAM,UAAU,CAAC;AAC1C,QAAI,SAAS,CAAC,IAAI,EAAE;AAEpB,QAAI,CAAC,WAAW;AACd,aAAO,KAAK,EAAE,GAAG,KAAK,GAAG,MAAM,KAAK,GAAG,KAAK,GAAG,MAAM,YAAY,GAAG,KAAK,GAAG,MAAM,KAAK,GAAG,KAAK,GAAG,MAAM,SAAS,CAAC;AAAA,IACpH;AAEA,SAAK,UAAU,MAAM;AAAA,EACvB,CAAC;AACH;;;AC5Be,SAAR,kBAAmC,SAAS,KAAK;AACtD,UAAQ,iBAAiB,SAAS,SAAU,aAAa;AACvD,QAAIC,UAAS,YAAY,IAAI,QAAQ;AACrC,QAAI,WAAW,YAAY;AAE3B,QAAI,YAAY,SAAS,SAAS,QAAQ;AACxC,UAAI,SAAS,YAAY,QAAQ;AACjC,UAAI,eAAe,CAAC;AACpB,WAAK,SAAS,YAAY,SAAU,UAAU;AAC5C,uBAAe,aAAa,OAAO,OAAO,iBAAiB,QAAQ,CAAC;AAAA,MACtE,CAAC;AAED,eAAS,YAAY,GAAG,YAAY,OAAO,MAAM,GAAG,aAAa;AAC/D,YAAI,QAAQ,CAAC;AACb,YAAI,WAAW;AAEf,iBAAS,IAAI,GAAG,IAAI,aAAa,QAAQ,KAAK;AAC5C,cAAI,MAAM,OAAO,IAAI,aAAa,IAAI,SAAS;AAE/C,cAAI,CAAC,MAAM,GAAG,GAAG;AACf,uBAAW;AAAA,UACb;AAEA,gBAAM,KAAK,GAAG;AAAA,QAChB;AAEA,YAAI,UAAU;AACZ,iBAAO,cAAc,WAAW,SAAS,YAAY,KAAK,CAAC;AAAA,QAC7D,OAAO;AAEL,iBAAO,cAAc,WAAW,CAAC,KAAK,GAAG,CAAC;AAAA,QAC5C;AAAA,MACF;AAEA,uBAAiB,OAAO,OAAO,WAAW;AAAA,IAC5C,WAAW,CAACA,WAAUA,YAAW,QAAQ;AACvC,mBAAa,WAAW;AAAA,IAC1B;AAAA,EACF,CAAC;AACH;;;ACzCO,SAAS,mBAAmB,aAAa;AAC9C,MAAI,WAAW,YAAY;AAE3B,MAAI,SAAS,SAAS,QAAQ;AAC5B,WAAO;AAAA,EACT;AAEA,MAAI,iBAAiB,YAAY,OAAO;AACxC,MAAI,YAAY,SAAS;AAEzB,MAAI,WAAW,SAAS,QAAQ;AAChC,MAAI,aAAa,WAAW,KAAK,iBAAiB;AAClD,SAAO,YAAY;AACrB;AACO,SAAS,cAAc,MAAM;AAClC,MAAI,aAAa,KAAK,UAAU,YAAY;AAE5C,MAAI,sBAAsB,OAAO;AAC/B,kBAAc,WAAW,KAAK,WAAW,MAAM;AAAA,EACjD;AAEA,SAAO,CAAC;AACV;;;AClBA,IAAI,KAAK,KAAK;AACd,IAAI,qBAAqB,CAAC;AAqBnB,SAAS,eAAe,aAAa,SAAS,cAAc,SAAS;AAC1E,MAAI,WAAW,YAAY;AAE3B,MAAI,YAAY,SAAS,SAAS,QAAQ;AACxC;AAAA,EACF;AAEA,MAAI,OAAO,SAAS,gBAAgB;AACpC,MAAI,WAAW,YAAY,QAAQ;AACnC,MAAI,QAAQ,SAAS;AACrB,MAAI,KAAK,KAAK,QAAQ,IAAI,KAAK;AAC/B,MAAI,KAAK,KAAK,SAAS,IAAI,KAAK;AAChC,MAAI,IAAI,KAAK,IAAI,KAAK,OAAO,KAAK,MAAM,IAAI;AAC5C,MAAI,QAAQ,SAAS,MAAM;AAC3B,WAAS,UAAU;AAAA,IACjB;AAAA,IACA;AAAA,EACF,CAAC;AAED,MAAI,CAAC,OAAO;AACV;AAAA,EACF;AAEA,MAAI,cAAc;AAChB,QAAI,KAAK,SAAS,YAAY,OAAO,GACjC,QAAQ,GAAG,IACX,QAAQ,GAAG;AAEf,QAAI,IAAI,CAAC,QAAQ,IAAI,QAAQ,EAAE;AAC/B,IAAK,UAAU,GAAG,CAAC;AACnB,IAAKC,OAAM,GAAG,GAAG,CAAC;AAClB,iBAAa,UAAU,CAAC,KAAK,EAAE,IAAI,KAAK,EAAE,EAAE,GAAG,IAAI;AACnD,QAAI,sBAAsB,YAAY,IAAI,CAAC,YAAY,aAAa,CAAC;AACrE,oBAAgB,cAAc,qBAAqB,IAAI,EAAE;AAAA,EAC3D;AAEA,sBAAoB,SAAS,aAAa,OAAO,UAAU,GAAG,IAAI,IAAI,KAAK;AAE3E,QAAM,SAAS,SAAU,MAAM,OAAO;AACpC,QAAI,YAAmB,UAAU,KAAK,SAAS,EAAE,IAAI,CAAC,aAAa,WAAW,CAAC,GAAG,oBAAoB,MAAM,aAAa,KAAK,GAAG,CAAC;AAClI,QAAI,KAAUC,OAAM,KAAK,MAAM,UAAU,CAAC;AAC1C,QAAI,KAAUA,OAAM,KAAK,MAAM,UAAU,CAAC;AAC1C,QAAI;AACJ,QAAI,OAAO,GAAG,KAAK,GAAG,MAAM;AAC5B,QAAI,OAAO,GAAG,KAAK,GAAG,MAAM;AAE5B,QAAI,CAAC,WAAW;AACd,mBAAa;AACb,YAAM,CAAC,KAAK,YAAY,OAAO,IAAI,YAAY,KAAK,YAAY,OAAO,IAAI,UAAU;AAAA,IACvF;AAEA,SAAK,UAAU,CAAC,IAAI,IAAI,GAAG,CAAC;AAAA,EAC9B,CAAC;AACH;AACA,IAAI,sBAAsB;AAAA,EACxB,OAAO,SAAU,aAAa,OAAO,UAAU,GAAG,IAAI,IAAI,OAAO;AAC/D,QAAI,QAAQ;AACZ,QAAIC,OAAM,SAAS,OAAO,OAAO;AACjC,QAAI,YAAY,KAAK,KAAK,KAAKA,QAAO;AACtC,UAAM,SAAS,SAAU,MAAM;AAC7B,UAAI,QAAQ,KAAK,SAAS,OAAO;AACjC,UAAI,aAAa,aAAaA,OAAM,QAAQ,KAAK;AACjD,eAAS;AACT,WAAK,UAAU,CAAC,IAAI,KAAK,IAAI,KAAK,IAAI,IAAI,IAAI,KAAK,IAAI,KAAK,IAAI,EAAE,CAAC;AACnE,eAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA,EACA,YAAY,SAAU,aAAa,OAAO,UAAU,GAAG,IAAI,IAAI,OAAO;AACpE,QAAI,YAAY;AAChB,uBAAmB,SAAS;AAC5B,QAAI,YAAY,mBAAmB,WAAW;AAC9C,UAAM,SAAS,SAAU,MAAM;AAC7B,UAAI,aAAa,cAAc,IAAI;AAGnC,YAAM,UAAU,MAAM,aAAa;AACnC,mBAAa,MAAM,aAAa;AAChC,oBAAc;AACd,UAAI,mBAAmB,KAAK,KAAK,aAAa,IAAI,CAAC;AAEnD,YAAM,gBAAgB,MAAM,mBAAmB,KAAK;AACpD,yBAAmB,KAAK,aAAa;AACrC,mBAAa,mBAAmB;AAAA,IAClC,CAAC;AACD,QAAI,oBAAoB,IAAI,KAAK,aAAa,QAAQ;AACtD,QAAI,QAAQ;AACZ,UAAM,SAAS,SAAU,MAAM;AAC7B,UAAI,aAAa,mBAAmB,mBAAmB,KAAK;AAC5D,eAAS;AAIT,OAAC,CAAC,KAAK,UAAU,KAAK,CAAC,KAAK,UAAU,EAAE,UAAU,KAAK,UAAU,CAAC,IAAI,KAAK,IAAI,KAAK,IAAI,IAAI,IAAI,KAAK,IAAI,KAAK,IAAI,EAAE,CAAC;AACrH,eAAS;AAAA,IACX,CAAC;AAAA,EACH;AACF;AACO,SAAS,gBAAgB,MAAM,qBAAqB,IAAI,IAAI;AACjE,MAAI,KAAK,KAAK,aAAa;AAE3B,MAAI,CAAC,IAAI;AACP;AAAA,EACF;AAEA,MAAI,YAAY,KAAK,SAAS;AAC9B,MAAI,cAAc,UAAU,IAAI,CAAC,SAAS,QAAQ,CAAC,KAAK;AACxD,MAAI,aAAa,GAAG,cAAc;AAElC,MAAI,qBAAqB;AACvB,QAAI,MAAM,KAAK,UAAU;AACzB,QAAI,MAAM,KAAK,MAAM,IAAI,KAAK,IAAI,IAAI,KAAK,EAAE;AAE7C,QAAI,MAAM,GAAG;AACX,YAAM,KAAK,KAAK,IAAI;AAAA,IACtB;AAEA,QAAI,SAAS,IAAI,KAAK;AAEtB,QAAI,QAAQ;AACV,YAAM,MAAM,KAAK;AAAA,IACnB;AAEA,QAAI,eAAe,SAAS,SAAS;AACrC,eAAW,cAAc;AAAA,MACvB,UAAU,CAAC;AAAA,MACX,UAAU;AAAA,MACV,QAAQ;AAAA,IACV,CAAC;AACD,QAAI,gBAAgB,WAAW,YAAY,UAAU;AACrD,IAAO,OAAO,cAAc,eAAe,cAAc,aAAa,CAAC,IAAI;AAAA,MACzE,UAAU;AAAA,IACZ,CAAC;AAAA,EACH,OAAO;AACL,eAAW,cAAc;AAAA,MACvB,UAAU,eAAe,KAAK,KAAK;AAAA,IACrC,CAAC;AAAA,EACH;AACF;;;AClKe,SAAR,oBAAqC,SAAS;AACnD,UAAQ,iBAAiB,SAAS,SAAU,aAAa;AACvD,QAAI,YAAY,IAAI,QAAQ,MAAM,YAAY;AAC5C,qBAAe,aAAa,YAAY;AAAA,IAC1C;AAAA,EACF,CAAC;AACH;;;ACIA,IAAIC,eAAmB;AAIhB,SAAS,YAAY,SAAS,SAAS,MAAM;AAClD,MAAI,QAAQ;AACZ,MAAI,QAAQ;AACZ,MAAI,OAAO,KAAK;AAChB,MAAI,QAAQ,KAAK;AACjB,MAAI,SAAS,KAAK;AAClB,MAAIC,UAAS,CAAC,KAAK,IAAI,QAAQ,GAAG,KAAK,IAAI,SAAS,CAAC;AAErD,MAAI,UAAU,KAAK,WAAW,OAAO,MAAM,KAAK;AAWhD,WAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACrC,QAAI,IAAI,MAAM;AAEd,QAAI,CAAC,EAAE,GAAG;AACR,QAAE,IAASC,QAAO,SAAS,KAAK,OAAO,IAAI,OAAOD,QAAO,IAAI,UAAU,KAAK,OAAO,IAAI,OAAOA,QAAO,EAAE;AAAA,IACzG;AAEA,MAAE,KAAUE,OAAM,EAAE,CAAC;AACrB,MAAE,QAAQ;AAAA,EACZ;AAKA,MAAI,kBAAkB,KAAK,YAAY,OAAO,MAAM,KAAK;AACzD,MAAI,WAAW;AACf,MAAI;AACJ,MAAI;AACJ,SAAO;AAAA,IACL,QAAQ,WAAY;AAClB,iBAAW,kBAAkB;AAAA,IAC/B;AAAA,IACA,UAAU,SAAU,KAAK;AACvB,YAAM,KAAK,QAAQ;AAAA,IACrB;AAAA,IACA,YAAY,SAAU,KAAK;AACzB,YAAM,KAAK,QAAQ;AAAA,IACrB;AAAA,IAKA,YAAY,SAAU,IAAI;AACxB,2BAAqB;AAAA,IACvB;AAAA,IAKA,WAAW,SAAU,IAAI;AACvB,0BAAoB;AAAA,IACtB;AAAA,IAQA,MAAM,SAAU,IAAI;AAClB,4BAAsB,mBAAmB,OAAO,KAAK;AACrD,UAAI,MAAM,CAAC;AACX,UAAI,OAAO,MAAM;AAEjB,eAASC,KAAI,GAAGA,KAAI,MAAM,QAAQA,MAAK;AACrC,YAAI,IAAI,MAAMA;AAEd,YAAI,EAAE,mBAAmB;AACvB;AAAA,QACF;AAEA,YAAI,KAAK,EAAE;AACX,YAAI,KAAK,EAAE;AACX,QAAK,IAAI,KAAK,GAAG,GAAG,GAAG,CAAC;AACxB,YAAI,IAAS,IAAI,GAAG,IAAI,EAAE;AAC1B,YAAI,IAAI,GAAG,KAAK,GAAG,IAAI,GAAG;AAE1B,YAAI,MAAM,CAAC,GAAG;AACZ,cAAI;AAAA,QACN;AAEA,QAAK,UAAU,KAAK,GAAG;AACvB,SAAC,GAAG,SAASJ,aAAY,GAAG,GAAG,GAAG,GAAG,KAAK,IAAI,IAAI,QAAQ;AAC1D,SAAC,GAAG,SAASA,aAAY,GAAG,GAAG,GAAG,GAAG,KAAK,EAAE,IAAI,KAAK,IAAI,QAAQ;AAAA,MACnE;AAGA,eAASI,KAAI,GAAGA,KAAI,MAAMA,MAAK;AAC7B,YAAIC,KAAI,MAAMD;AAEd,YAAI,CAACC,GAAE,OAAO;AACZ,UAAK,IAAI,KAAKJ,SAAQI,GAAE,CAAC;AAIzB,UAAAL,aAAYK,GAAE,GAAGA,GAAE,GAAG,KAAK,UAAU,QAAQ;AAAA,QAC/C;AAAA,MACF;AAIA,eAASD,KAAI,GAAGA,KAAI,MAAMA,MAAK;AAC7B,YAAI,KAAK,MAAMA;AAEf,iBAAS,IAAIA,KAAI,GAAG,IAAI,MAAM,KAAK;AACjC,cAAI,KAAK,MAAM;AACf,UAAK,IAAI,KAAK,GAAG,GAAG,GAAG,CAAC;AACxB,cAAI,IAAS,IAAI,GAAG;AAEpB,cAAI,MAAM,GAAG;AAEX,YAAK,IAAI,KAAK,KAAK,OAAO,IAAI,KAAK,KAAK,OAAO,IAAI,GAAG;AACtD,gBAAI;AAAA,UACN;AAEA,cAAI,WAAW,GAAG,MAAM,GAAG,OAAO,IAAI;AACtC,WAAC,GAAG,SAASJ,aAAY,GAAG,IAAI,GAAG,IAAI,KAAK,OAAO;AACnD,WAAC,GAAG,SAASA,aAAY,GAAG,IAAI,GAAG,IAAI,KAAK,CAAC,OAAO;AAAA,QACtD;AAAA,MACF;AAEA,UAAI,IAAI,CAAC;AAET,eAASI,KAAI,GAAGA,KAAI,MAAMA,MAAK;AAC7B,YAAIC,KAAI,MAAMD;AAEd,YAAI,CAACC,GAAE,OAAO;AACZ,UAAK,IAAI,GAAGA,GAAE,GAAGA,GAAE,EAAE;AACrB,UAAAL,aAAYK,GAAE,GAAGA,GAAE,GAAG,GAAG,QAAQ;AACjC,UAAK,KAAKA,GAAE,IAAIA,GAAE,CAAC;AAAA,QACrB;AAAA,MACF;AAEA,iBAAW,WAAW;AACtB,UAAI,WAAW,WAAW;AAC1B,2BAAqB,kBAAkB,OAAO,OAAO,QAAQ;AAC7D,YAAM,GAAG,QAAQ;AAAA,IACnB;AAAA,EACF;AACF;;;AC5Je,SAAR,iBAAkC,SAAS;AAChD,UAAQ,iBAAiB,SAAS,SAAU,aAAa;AACvD,QAAI,WAAW,YAAY;AAE3B,QAAI,YAAY,SAAS,SAAS,QAAQ;AACxC;AAAA,IACF;AAEA,QAAI,YAAY,IAAI,QAAQ,MAAM,SAAS;AACzC,UAAI,oBAAoB,YAAY,mBAAmB,CAAC;AACxD,UAAI,UAAU,YAAY,SAAS;AACnC,UAAI,aAAa,QAAQ;AACzB,UAAI,WAAW,QAAQ;AACvB,UAAI,aAAa,YAAY,SAAS,OAAO;AAC7C,UAAI,aAAa,WAAW,IAAI,YAAY;AAE5C,UAAI,YAAY,iBAAiB;AAC/B,mBAAW,KAAK,SAAU,KAAK;AAC7B,cAAI,KAAK,WAAW,MAAM,GAAG;AAC7B,qBAAW,cAAc,KAAK,kBAAkB,OAAO,CAAC,KAAK,GAAG,CAAC;AAAA,QACnE,CAAC;AAAA,MACH,WAAW,CAAC,cAAc,eAAe,QAAQ;AAC/C,qBAAa,WAAW;AAAA,MAC1B,WAAW,eAAe,YAAY;AACpC,uBAAe,aAAa,OAAO;AAAA,MACrC;AAEA,UAAI,mBAAmB,WAAW,cAAc,OAAO;AACvD,UAAI,mBAAmB,SAAS,cAAc,OAAO;AAErD,UAAI,YAAY,WAAW,IAAI,WAAW;AAC1C,UAAI,aAAa,WAAW,IAAI,YAAY;AAC5C,UAAI,iBAAwB,QAAQ,SAAS,IAAI,YAAY,CAAC,WAAW,SAAS;AAClF,UAAI,kBAAyB,QAAQ,UAAU,IAAI,aAAa,CAAC,YAAY,UAAU;AAEvF,wBAAkB,CAAC,gBAAgB,IAAI,gBAAgB,EAAE;AACzD,UAAI,UAAU,WAAW,SAAS,SAAS,SAAU,OAAO,KAAK;AAC/D,YAAI,QAAQ,WAAW,cAAc,GAAG;AACxC,YAAI,MAAM,UAAU,OAAO,kBAAkB,cAAc;AAE3D,YAAI,MAAM,GAAG,GAAG;AACd,iBAAO,eAAe,KAAK,eAAe,MAAM;AAAA,QAClD;AAEA,eAAO;AAAA,UACL,GAAG;AAAA,UACH;AAAA,UACA,OAAO,WAAW,aAAa,GAAG,EAAE,IAAI,OAAO;AAAA,UAC/C,GAAG,CAAC,SAAS,MAAM,MAAM,EAAE,KAAK,MAAM,MAAM,EAAE,IAAI,OAAO;AAAA,QAC3D;AAAA,MACF,CAAC;AACD,UAAI,QAAQ,SAAS,SAAS,SAAS,SAAU,OAAO,KAAK;AAC3D,YAAI,OAAO,QAAQ,eAAe,GAAG;AACrC,YAAI,IAAI,UAAU,OAAO,kBAAkB,eAAe;AAE1D,YAAI,MAAM,CAAC,GAAG;AACZ,eAAK,gBAAgB,KAAK,gBAAgB,MAAM;AAAA,QAClD;AAEA,YAAI,YAAY,KAAK,SAAS;AAC9B,YAAI,YAAmB,UAAU,KAAK,SAAS,EAAE,IAAI,CAAC,aAAa,WAAW,CAAC,GAAG,CAAC,oBAAoB,MAAM,aAAa,KAAK,IAAI,GAAG,CAAC;AACvI,eAAO;AAAA,UACL,IAAI,QAAQ,KAAK,MAAM;AAAA,UACvB,IAAI,QAAQ,KAAK,MAAM;AAAA,UACvB;AAAA,UACA;AAAA,UACA,mBAAmB,UAAU,IAAI,mBAAmB;AAAA,QACtD;AAAA,MACF,CAAC;AAED,UAAI,OAAO,SAAS,gBAAgB;AACpC,UAAI,gBAAgB,YAAY,SAAS,OAAO;AAAA,QAC9C;AAAA,QACA,SAAS,WAAW,IAAI,SAAS;AAAA,QACjC,UAAU,WAAW,IAAI,UAAU;AAAA,MACrC,CAAC;AACD,oBAAc,WAAW,SAAU,OAAOC,QAAO;AAC/C,iBAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,IAAI,GAAG,KAAK;AAC5C,cAAI,MAAM,GAAG,OAAO;AAElB,YAAK,KAAK,MAAM,GAAG,GAAG,QAAQ,eAAe,CAAC,EAAE,UAAU,CAAC;AAAA,UAC7D;AAAA,QACF;AAAA,MACF,CAAC;AACD,oBAAc,UAAU,SAAU,OAAOA,QAAO,SAAS;AACvD,iBAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,IAAI,GAAG,KAAK;AAC5C,cAAI,CAAC,MAAM,GAAG,OAAO;AACnB,oBAAQ,eAAe,CAAC,EAAE,UAAU,MAAM,GAAG,CAAC;AAAA,UAChD;AAEA,4BAAkB,WAAW,MAAM,CAAC,KAAK,MAAM,GAAG;AAAA,QACpD;AAEA,iBAAS,IAAI,GAAG,IAAIA,OAAM,QAAQ,IAAI,GAAG,KAAK;AAC5C,cAAI,IAAIA,OAAM;AACd,cAAI,OAAO,QAAQ,eAAe,CAAC;AACnC,cAAI,KAAK,EAAE,GAAG;AACd,cAAI,KAAK,EAAE,GAAG;AACd,cAAI,SAAS,KAAK,UAAU;AAC5B,mBAAS,SAAS,OAAO,MAAM,IAAI,CAAC;AACpC,iBAAO,KAAK,OAAO,MAAM,CAAC;AAC1B,iBAAO,KAAK,OAAO,MAAM,CAAC;AAC1B,UAAK,KAAK,OAAO,IAAI,EAAE;AACvB,UAAK,KAAK,OAAO,IAAI,EAAE;AAEvB,cAAI,CAAC,EAAE,WAAW;AAChB,mBAAO,KAAK,EAAE,GAAG,KAAK,GAAG,MAAM,KAAK,GAAG,KAAK,GAAG,MAAM,EAAE,YAAY,GAAG,KAAK,GAAG,MAAM,KAAK,GAAG,KAAK,GAAG,MAAM,EAAE,SAAS;AAAA,UACvH;AAEA,eAAK,UAAU,MAAM;AAAA,QACvB;AAAA,MACF,CAAC;AACD,kBAAY,cAAc;AAC1B,kBAAY,kBAAkB;AAE9B,oBAAc,KAAK;AAAA,IACrB,OAAO;AAEL,kBAAY,cAAc;AAAA,IAC5B;AAAA,EACF,CAAC;AACH;;;AC1HA,SAASC,aAAY,aAAa,KAAK,QAAQ;AAC7C,MAAI,SAAS,OAAO,YAAY,mBAAmB,GAAG;AAAA,IACpD;AAAA,EACF,CAAC;AACD,SAAO,cAAc,QAAQ;AAAA,IAC3B,OAAO,IAAI,SAAS;AAAA,IACpB,QAAQ,IAAI,UAAU;AAAA,EACxB,CAAC;AACH;AAEe,SAAR,mBAAoC,SAAS,KAAK;AACvD,MAAI,WAAW,CAAC;AAChB,UAAQ,iBAAiB,SAAS,SAAU,aAAa;AACvD,QAAI,eAAe,YAAY,IAAI,kBAAkB;AAErD,QAAI,CAAC,gBAAgB,iBAAiB,QAAQ;AAC5C,UAAI,SAAS,YAAY,QAAQ;AACjC,UAAI,YAAY,OAAO,SAAS,SAAU,KAAK;AAC7C,YAAI,YAAY,OAAO,aAAa,GAAG;AACvC,eAAO,CAAC,CAAC,UAAU,IAAI,GAAG,GAAG,CAAC,UAAU,IAAI,GAAG,CAAC;AAAA,MAClD,CAAC;AACD,UAAI,MAAM,CAAC;AACX,UAAI,MAAM,CAAC;AACX,MAAK,WAAW,WAAW,KAAK,GAAG;AAEnC,UAAI,IAAI,KAAK,IAAI,OAAO,GAAG;AACzB,YAAI,MAAM;AACV,YAAI,MAAM;AAAA,MACZ;AAEA,UAAI,IAAI,KAAK,IAAI,OAAO,GAAG;AACzB,YAAI,MAAM;AACV,YAAI,MAAM;AAAA,MACZ;AAEA,UAAI,UAAU,IAAI,KAAK,IAAI,OAAO,IAAI,KAAK,IAAI;AAE/C,UAAI,WAAWA,aAAY,aAAa,KAAK,MAAM;AAEnD,UAAI,MAAM,MAAM,GAAG;AACjB,cAAM,CAAC,SAAS,GAAG,SAAS,CAAC;AAC7B,cAAM,CAAC,SAAS,IAAI,SAAS,OAAO,SAAS,IAAI,SAAS,MAAM;AAAA,MAClE;AAEA,UAAI,UAAU,IAAI,KAAK,IAAI;AAC3B,UAAI,WAAW,IAAI,KAAK,IAAI;AAC5B,UAAI,YAAY,SAAS;AACzB,UAAI,aAAa,SAAS;AAC1B,UAAI,eAAe,YAAY,mBAAmB,IAAI,aAAK;AAC3D,mBAAa,YAAY,YAAY,IAAI,YAAY;AACrD,mBAAa,gBAAgB,IAAI,IAAI,IAAI,IAAI,SAAS,QAAQ;AAC9D,mBAAa,YAAY,SAAS,GAAG,SAAS,GAAG,WAAW,UAAU;AAEtE,mBAAa,UAAU,YAAY,IAAI,QAAQ,GAAG,GAAG;AACrD,mBAAa,QAAQ,YAAY,IAAI,MAAM,CAAC;AAC5C,eAAS,KAAK,YAAY;AAAA,IAC5B;AAAA,EACF,CAAC;AACD,SAAO;AACT;;;AC9DA,IAAI,KAAK,CAAC;AACV,IAAI,KAAK,CAAC;AACV,IAAI,KAAK,CAAC;AACV,IAAIC,eAAwB;AAC5B,IAAI,eAAoB;AACxB,IAAI,UAAU,KAAK;AAEnB,SAAS,qBAAqB,aAAaC,SAAQ,QAAQ;AACzD,MAAI,KAAK,YAAY;AACrB,MAAI,KAAK,YAAY;AACrB,MAAI,KAAK,YAAY;AACrB,MAAI,IAAI;AACR,MAAI;AACJ,MAAI,eAAe,SAAS;AAC5B,MAAI,WAAW;AAEf,WAAS,KAAK,KAAK,MAAM,KAAK,MAAM,KAAK;AACvC,OAAG,KAAKD,aAAY,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,EAAE;AAC3C,OAAG,KAAKA,aAAY,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,EAAE;AAC3C,QAAI,OAAO,QAAQ,aAAa,IAAIC,OAAM,IAAI,YAAY;AAE1D,QAAI,OAAO,GAAG;AACZ,UAAI;AACJ,UAAI;AAAA,IACN;AAAA,EACF;AAIA,WAAS,IAAI,GAAG,IAAI,IAAI,KAAK;AAE3B,QAAI,OAAO,IAAI;AAGf,OAAG,KAAKD,aAAY,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC;AAC1C,OAAG,KAAKA,aAAY,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC;AAC1C,OAAG,KAAKA,aAAY,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,IAAI;AAC7C,OAAG,KAAKA,aAAY,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,IAAI;AAC7C,QAAI,OAAO,aAAa,IAAIC,OAAM,IAAI;AAEtC,QAAI,QAAQ,IAAI,IAAI,MAAM;AACxB;AAAA,IACF;AAGA,QAAI,WAAW,aAAa,IAAIA,OAAM,IAAI;AAC1C,gBAAY;AAEZ,QAAI,OAAO,GAAG;AACZ,UAAI,YAAY,GAAG;AACjB,YAAI,IAAI;AAAA,MACV,OAAO;AACL,YAAI,IAAI;AAAA,MACV;AAAA,IACF,OAAO;AACL,UAAI,YAAY,GAAG;AACjB,YAAI,IAAI;AAAA,MACV,OAAO;AACL,YAAI,IAAI;AAAA,MACV;AAAA,IACF;AAAA,EACF;AAEA,SAAO;AACT;AAGe,SAAR,WAA4B,OAAOC,QAAO;AAC/C,MAAI,OAAO,CAAC;AACZ,MAAIC,sBAA+B;AACnC,MAAI,MAAM,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AACrB,MAAI,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC;AAClB,MAAI,IAAI,CAAC;AACT,EAAAD,UAAS;AACT,QAAM,SAAS,SAAU,MAAM,KAAK;AAClC,QAAI,aAAa,KAAK,UAAU;AAChC,QAAI,aAAa,KAAK,UAAU,YAAY;AAC5C,QAAI,WAAW,KAAK,UAAU,UAAU;AAExC,QAAI,CAAC,WAAW,YAAY;AAC1B,iBAAW,aAAa,CAAME,OAAM,WAAW,EAAE,GAAQA,OAAM,WAAW,EAAE,CAAC;AAE7E,UAAI,WAAW,IAAI;AACjB,mBAAW,WAAW,KAAUA,OAAM,WAAW,EAAE,CAAC;AAAA,MACtD;AAAA,IACF;AAEA,QAAI,iBAAiB,WAAW;AAEhC,QAAI,WAAW,MAAM,MAAM;AACzB,MAAK,KAAK,IAAI,IAAI,eAAe,EAAE;AACnC,MAAK,KAAK,IAAI,IAAI,eAAe,EAAE;AACnC,MAAK,KAAK,IAAI,IAAI,eAAe,EAAE;AAEnC,UAAI,cAAc,eAAe,QAAQ;AACvC,YAAI,aAAa,cAAc,KAAK,KAAK;AACzC,YAAI,IAAI,qBAAqB,KAAK,eAAe,IAAI,aAAaF,MAAK;AAEvE,QAAAC,oBAAmB,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,GAAG,IAAI;AAC3D,YAAI,GAAG,KAAK,KAAK;AACjB,YAAI,GAAG,KAAK,KAAK;AACjB,QAAAA,oBAAmB,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,GAAG,IAAI;AAC3D,YAAI,GAAG,KAAK,KAAK;AACjB,YAAI,GAAG,KAAK,KAAK;AAAA,MACnB;AAEA,UAAI,YAAY,aAAa,QAAQ;AACnC,YAAI,aAAa,cAAc,KAAK,KAAK;AACzC,YAAI,IAAI,qBAAqB,KAAK,eAAe,IAAI,aAAaD,MAAK;AAEvE,QAAAC,oBAAmB,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,GAAG,IAAI;AAC3D,YAAI,GAAG,KAAK,KAAK;AACjB,YAAI,GAAG,KAAK,KAAK;AACjB,QAAAA,oBAAmB,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,GAAG,IAAI;AAC3D,YAAI,GAAG,KAAK,KAAK;AACjB,YAAI,GAAG,KAAK,KAAK;AAAA,MACnB;AAGA,MAAK,KAAK,WAAW,IAAI,IAAI,EAAE;AAC/B,MAAK,KAAK,WAAW,IAAI,IAAI,EAAE;AAC/B,MAAK,KAAK,WAAW,IAAI,IAAI,EAAE;AAAA,IACjC,OACK;AACD,MAAK,KAAK,KAAK,IAAI,eAAe,EAAE;AACpC,MAAK,KAAK,KAAK,IAAI,eAAe,EAAE;AACpC,MAAK,IAAI,GAAG,KAAK,IAAI,KAAK,EAAE;AAC5B,MAAK,UAAU,GAAG,CAAC;AAEnB,UAAI,cAAc,eAAe,QAAQ;AACvC,YAAI,aAAa,cAAc,KAAK,KAAK;AACzC,QAAK,YAAY,KAAK,IAAI,KAAK,IAAI,GAAG,aAAaD,MAAK;AAAA,MAC1D;AAEA,UAAI,YAAY,aAAa,QAAQ;AACnC,YAAI,aAAa,cAAc,KAAK,KAAK;AACzC,QAAK,YAAY,KAAK,IAAI,KAAK,IAAI,GAAG,CAAC,aAAaA,MAAK;AAAA,MAC3D;AAEA,MAAK,KAAK,WAAW,IAAI,KAAK,EAAE;AAChC,MAAK,KAAK,WAAW,IAAI,KAAK,EAAE;AAAA,IAClC;AAAA,EACJ,CAAC;AACH;;;ACpIA,SAAS,eAAe,UAAU;AAChC,SAAO,SAAS,SAAS;AAC3B;AAEA,IAAI,YAEJ,SAAU,QAAQ;AAChB,YAAUG,YAAW,MAAM;AAE3B,WAASA,aAAY;AACnB,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,WAAU;AACvB,WAAO;AAAA,EACT;AAEA,EAAAA,WAAU,UAAU,OAAO,SAAU,SAAS,KAAK;AACjD,QAAI,aAAa,IAAI,mBAAW;AAChC,QAAI,WAAW,IAAI,iBAAS;AAC5B,QAAI,QAAQ,KAAK;AACjB,SAAK,cAAc,IAAI,uBAAe,IAAI,MAAM,CAAC;AACjD,SAAK,kBAAkB;AAAA,MACrB,QAAQ;AAAA,IACV;AACA,UAAM,IAAI,WAAW,KAAK;AAC1B,UAAM,IAAI,SAAS,KAAK;AACxB,SAAK,cAAc;AACnB,SAAK,YAAY;AACjB,SAAK,eAAe;AAAA,EACtB;AAEA,EAAAA,WAAU,UAAU,SAAS,SAAU,aAAa,SAAS,KAAK;AAChE,QAAI,QAAQ;AAEZ,QAAI,WAAW,YAAY;AAC3B,SAAK,SAAS;AACd,QAAI,aAAa,KAAK;AACtB,QAAI,WAAW,KAAK;AACpB,QAAI,QAAQ,KAAK;AAEjB,QAAI,eAAe,QAAQ,GAAG;AAC5B,UAAI,eAAe;AAAA,QACjB,GAAG,SAAS;AAAA,QACZ,GAAG,SAAS;AAAA,QACZ,QAAQ,SAAS;AAAA,QACjB,QAAQ,SAAS;AAAA,MACnB;AAEA,UAAI,KAAK,cAAc;AACrB,cAAM,KAAK,YAAY;AAAA,MACzB,OAAO;AACL,QAAQ,YAAY,OAAO,cAAc,WAAW;AAAA,MACtD;AAAA,IACF;AAGA,eAAW,YAAY,SAAS,GAAG,mBAAmB,WAAW,CAAC;AAClE,QAAI,OAAO,YAAY,QAAQ;AAC/B,eAAW,WAAW,IAAI;AAC1B,QAAI,WAAW,YAAY,YAAY;AAEvC,aAAS,WAAW,QAAQ;AAE5B,SAAK,wBAAwB;AAE7B,SAAK,kBAAkB,aAAa,SAAS,GAAG;AAEhD,iBAAa,KAAK,cAAc;AAChC,QAAIC,eAAc,YAAY;AAC9B,QAAI,kBAAkB,YAAY,IAAI,CAAC,SAAS,iBAAiB,CAAC;AAElE,QAAIA,cAAa;AACf,WAAK,2BAA2BA,cAAa,eAAe;AAAA,IAC9D;AAEA,QAAIC,UAAS,YAAY,IAAI,QAAQ;AACrC,SAAK,MAAM,SAAS,SAAU,MAAM;AAClC,UAAI,MAAM,KAAK;AACf,UAAI,KAAK,KAAK,aAAa;AAC3B,UAAI,YAAY,KAAK,SAAS;AAE9B,UAAI,CAAC,IAAI;AACP;AAAA,MACF;AAGA,SAAG,IAAI,MAAM,EAAE,IAAI,SAAS;AAC5B,UAAI,YAAY,UAAU,IAAI,WAAW;AAEzC,UAAI,WAAW;AACb,WAAG,GAAG,QAAQ,SAAU,GAAG;AACzB,kBAAQA,SAAQ;AAAA,YACd,KAAK;AACH,cAAAD,aAAY,OAAO;AACnB,eAAC,MAAM,cAAc,MAAM,2BAA2BA,cAAa,eAAe;AAClF,cAAAA,aAAY,SAAS,GAAG;AAExB,mBAAK,cAAc,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC;AACpC;AAAA,YAEF,KAAK;AACH,mBAAK,cAAc,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC;AAEpC,mBAAK,UAAU;AAAA,gBACb,OAAO;AAAA,cACT,GAAG,IAAI;AAEP,6BAAe,aAAa,cAAc,MAAM,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC;AAEtE,oBAAM,aAAa,WAAW;AAE9B;AAAA,YAEF,KAAK;AAAA,YACL;AACE,mBAAK,cAAc,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC;AAEpC,+BAAiB,YAAY,SAAS,GAAG,WAAW;AAEpD,oBAAM,aAAa,WAAW;AAE9B;AAAA,UACJ;AAAA,QACF,CAAC,EAAE,GAAG,WAAW,WAAY;AAC3B,cAAIA,cAAa;AACf,YAAAA,aAAY,WAAW,GAAG;AAAA,UAC5B;AAAA,QACF,CAAC;AAAA,MACH;AAEA,SAAG,aAAa,WAAW,CAAC,CAAC,UAAU,IAAI,QAAQ,CAAC;AACpD,UAAI,QAAQ,UAAU,IAAI,CAAC,YAAY,OAAO,CAAC;AAE/C,UAAI,UAAU,aAAa;AACzB,kBAAU,EAAE,EAAE,QAAQ,KAAK,uBAAuB;AAAA,MACpD;AAAA,IACF,CAAC;AACD,SAAK,MAAM,SAAS,SAAU,MAAM;AAClC,UAAI,KAAK,KAAK,aAAa;AAC3B,UAAI,QAAQ,KAAK,SAAS,EAAE,IAAI,CAAC,YAAY,OAAO,CAAC;AAErD,UAAI,CAAC,IAAI;AACP;AAAA,MACF;AAEA,UAAI,UAAU,aAAa;AACzB,kBAAU,EAAE,EAAE,QAAQ;AAAA,UACpB,MAAM,CAAC,KAAK,SAAS;AAAA,UACrB,MAAM,CAAC,KAAK,MAAM,WAAW,KAAK,MAAM,SAAS;AAAA,QACnD;AAAA,MACF;AAAA,IACF,CAAC;AACD,QAAI,sBAAsB,YAAY,IAAI,QAAQ,MAAM,cAAc,YAAY,IAAI,CAAC,YAAY,aAAa,CAAC;AACjH,QAAI,KAAK,KAAK,UAAU,IAAI;AAC5B,QAAI,KAAK,KAAK,UAAU,IAAI;AAC5B,SAAK,MAAM,SAAS,SAAU,MAAM;AAClC,sBAAgB,MAAM,qBAAqB,IAAI,EAAE;AAAA,IACnD,CAAC;AACD,SAAK,eAAe;AAAA,EACtB;AAEA,EAAAD,WAAU,UAAU,UAAU,WAAY;AACxC,SAAK,eAAe,KAAK,YAAY,QAAQ;AAC7C,SAAK,kBAAkB;AAAA,EACzB;AAEA,EAAAA,WAAU,UAAU,6BAA6B,SAAUC,cAAa,iBAAiB;AACvF,QAAI,OAAO;AAEX,KAAC,SAAS,OAAO;AACf,MAAAA,aAAY,KAAK,SAAU,SAAS;AAClC,aAAK,aAAa,KAAK,MAAM;AAC7B,SAAC,KAAK,aAAa,CAAC,aAAa,kBAAkB,KAAK,iBAAiB,WAAW,MAAM,EAAE,IAAI,KAAK;AAAA,MACvG,CAAC;AAAA,IACH,GAAG;AAAA,EACL;AAEA,EAAAD,WAAU,UAAU,oBAAoB,SAAU,aAAa,SAAS,KAAK;AAC3E,QAAI,QAAQ;AAEZ,QAAI,aAAa,KAAK;AACtB,QAAI,iBAAiB,KAAK;AAC1B,QAAI,QAAQ,KAAK;AACjB,eAAW,kBAAkB,SAAU,GAAG,GAAG,GAAG;AAC9C,UAAI,OAAO,MAAM,gBAAgB;AACjC,WAAK,eAAe,MAAM,SAAS;AACnC,aAAO,KAAK,QAAQ,GAAG,CAAC,KAAK,CAAC,oBAAoB,GAAG,KAAK,WAAW;AAAA,IACvE,CAAC;AAED,QAAI,CAAC,eAAe,YAAY,gBAAgB,GAAG;AACjD,iBAAW,QAAQ;AACnB;AAAA,IACF;AAEA,eAAW,OAAO,YAAY,IAAI,MAAM,CAAC;AACzC,mBAAe,YAAY,YAAY,IAAI,YAAY;AACvD,mBAAe,OAAO,YAAY,iBAAiB,QAAQ;AAC3D,eAAW,IAAI,KAAK,EAAE,IAAI,MAAM,EAAE,GAAG,OAAO,SAAU,GAAG;AACvD,MAAW,gBAAgB,gBAAgB,EAAE,IAAI,EAAE,EAAE;AACrD,UAAI,eAAe;AAAA,QACjB,UAAU,YAAY;AAAA,QACtB,MAAM;AAAA,QACN,IAAI,EAAE;AAAA,QACN,IAAI,EAAE;AAAA,MACR,CAAC;AAAA,IACH,CAAC,EAAE,GAAG,QAAQ,SAAU,GAAG;AACzB,MAAW,iBAAiB,gBAAgB,EAAE,OAAO,EAAE,SAAS,EAAE,OAAO;AACzE,UAAI,eAAe;AAAA,QACjB,UAAU,YAAY;AAAA,QACtB,MAAM;AAAA,QACN,MAAM,EAAE;AAAA,QACR,SAAS,EAAE;AAAA,QACX,SAAS,EAAE;AAAA,MACb,CAAC;AAED,YAAM,wBAAwB;AAE9B,iBAAW,YAAY,SAAS,GAAG,mBAAmB,WAAW,CAAC;AAElE,YAAM,UAAU,aAAa;AAG7B,UAAI,kBAAkB;AAAA,IACxB,CAAC;AAAA,EACH;AAEA,EAAAA,WAAU,UAAU,0BAA0B,WAAY;AACxD,QAAI,cAAc,KAAK;AACvB,QAAI,OAAO,YAAY,QAAQ;AAC/B,QAAI,YAAY,mBAAmB,WAAW;AAC9C,SAAK,kBAAkB,SAAU,IAAI,KAAK;AACxC,YAAM,GAAG,eAAe,SAAS;AAAA,IACnC,CAAC;AAAA,EACH;AAEA,EAAAA,WAAU,UAAU,eAAe,SAAU,aAAa;AACxD,eAAW,YAAY,SAAS,GAAG,mBAAmB,WAAW,CAAC;AAElE,SAAK,YAAY,aAAa;AAE9B,SAAK,UAAU,aAAa;AAAA,EAC9B;AAEA,EAAAA,WAAU,UAAU,SAAS,SAAU,SAAS,KAAK;AACnD,SAAK,eAAe,KAAK,YAAY,OAAO;AAC5C,SAAK,aAAa,KAAK,UAAU,OAAO;AAAA,EAC1C;AAEA,EAAAA,WAAU,OAAO;AACjB,SAAOA;AACT,EAAE,aAAS;AAEX,IAAO,oBAAQ;;;ACxQf,SAAS,gBAAgB,IAAI;AAC3B,SAAO,SAAS;AAClB;AAEA,IAAI,QAEJ,WAAY;AACV,WAASG,OAAM,UAAU;AACvB,SAAK,OAAO;AACZ,SAAK,QAAQ,CAAC;AACd,SAAK,QAAQ,CAAC;AACd,SAAK,YAAY,CAAC;AAMlB,SAAK,YAAY,CAAC;AAClB,SAAK,YAAY,YAAY;AAAA,EAC/B;AAMA,EAAAA,OAAM,UAAU,aAAa,WAAY;AACvC,WAAO,KAAK;AAAA,EACd;AAEA;AAKA,EAAAA,OAAM,UAAU,UAAU,SAAU,IAAI,WAAW;AACjD,SAAK,MAAM,OAAO,KAAK,YAAY,KAAK;AACxC,QAAI,WAAW,KAAK;AAEpB,QAAI,SAAS,gBAAgB,EAAE,IAAI;AACjC,UAAI,MAAuC;AACzC,gBAAQ,MAAM,uCAAuC;AAAA,MACvD;AAEA;AAAA,IACF;AAEA,QAAI,OAAO,IAAI,UAAU,IAAI,SAAS;AACtC,SAAK,YAAY;AACjB,SAAK,MAAM,KAAK,IAAI;AACpB,aAAS,gBAAgB,EAAE,KAAK;AAChC,WAAO;AAAA,EACT;AAEA;AAKA,EAAAA,OAAM,UAAU,iBAAiB,SAAU,WAAW;AACpD,QAAI,SAAS,KAAK,KAAK,YAAY,SAAS;AAC5C,WAAO,KAAK,MAAM;AAAA,EACpB;AAEA;AAKA,EAAAA,OAAM,UAAU,cAAc,SAAU,IAAI;AAC1C,WAAO,KAAK,UAAU,gBAAgB,EAAE;AAAA,EAC1C;AAEA;AAKA,EAAAA,OAAM,UAAU,UAAU,SAAU,IAAI,IAAI,WAAW;AACrD,QAAI,WAAW,KAAK;AACpB,QAAI,WAAW,KAAK;AAEpB,QAAW,SAAS,EAAE,GAAG;AACvB,WAAK,KAAK,MAAM;AAAA,IAClB;AAEA,QAAW,SAAS,EAAE,GAAG;AACvB,WAAK,KAAK,MAAM;AAAA,IAClB;AAEA,QAAI,EAAE,cAAc,YAAY;AAC9B,WAAK,SAAS,gBAAgB,EAAE;AAAA,IAClC;AAEA,QAAI,EAAE,cAAc,YAAY;AAC9B,WAAK,SAAS,gBAAgB,EAAE;AAAA,IAClC;AAEA,QAAI,CAAC,MAAM,CAAC,IAAI;AACd;AAAA,IACF;AAEA,QAAI,MAAM,GAAG,KAAK,MAAM,GAAG;AAC3B,QAAI,OAAO,IAAI,UAAU,IAAI,IAAI,SAAS;AAC1C,SAAK,YAAY;AAEjB,QAAI,KAAK,WAAW;AAClB,SAAG,SAAS,KAAK,IAAI;AACrB,SAAG,QAAQ,KAAK,IAAI;AAAA,IACtB;AAEA,OAAG,MAAM,KAAK,IAAI;AAElB,QAAI,OAAO,IAAI;AACb,SAAG,MAAM,KAAK,IAAI;AAAA,IACpB;AAEA,SAAK,MAAM,KAAK,IAAI;AACpB,aAAS,OAAO;AAChB,WAAO;AAAA,EACT;AAEA;AAKA,EAAAA,OAAM,UAAU,iBAAiB,SAAU,WAAW;AACpD,QAAI,SAAS,KAAK,SAAS,YAAY,SAAS;AAChD,WAAO,KAAK,MAAM;AAAA,EACpB;AAEA;AAKA,EAAAA,OAAM,UAAU,UAAU,SAAU,IAAI,IAAI;AAC1C,QAAI,cAAc,WAAW;AAC3B,WAAK,GAAG;AAAA,IACV;AAEA,QAAI,cAAc,WAAW;AAC3B,WAAK,GAAG;AAAA,IACV;AAEA,QAAI,WAAW,KAAK;AAEpB,QAAI,KAAK,WAAW;AAClB,aAAO,SAAS,KAAK,MAAM;AAAA,IAC7B,OAAO;AACL,aAAO,SAAS,KAAK,MAAM,OAAO,SAAS,KAAK,MAAM;AAAA,IACxD;AAAA,EACF;AAEA;AAKA,EAAAA,OAAM,UAAU,WAAW,SAAU,IAAI,SAAS;AAChD,QAAI,QAAQ,KAAK;AACjB,QAAIC,OAAM,MAAM;AAEhB,aAAS,IAAI,GAAG,IAAIA,MAAK,KAAK;AAC5B,UAAI,MAAM,GAAG,aAAa,GAAG;AAC3B,WAAG,KAAK,SAAS,MAAM,IAAI,CAAC;AAAA,MAC9B;AAAA,IACF;AAAA,EACF;AAEA;AAKA,EAAAD,OAAM,UAAU,WAAW,SAAU,IAAI,SAAS;AAChD,QAAI,QAAQ,KAAK;AACjB,QAAIC,OAAM,MAAM;AAEhB,aAAS,IAAI,GAAG,IAAIA,MAAK,KAAK;AAC5B,UAAI,MAAM,GAAG,aAAa,KAAK,MAAM,GAAG,MAAM,aAAa,KAAK,MAAM,GAAG,MAAM,aAAa,GAAG;AAC7F,WAAG,KAAK,SAAS,MAAM,IAAI,CAAC;AAAA,MAC9B;AAAA,IACF;AAAA,EACF;AAEA;AAMA,EAAAD,OAAM,UAAU,uBAAuB,SAAU,IAAI,WAAW,WAAW,SAAS;AAClF,QAAI,EAAE,qBAAqB,YAAY;AACrC,kBAAY,KAAK,UAAU,gBAAgB,SAAS;AAAA,IACtD;AAEA,QAAI,CAAC,WAAW;AACd;AAAA,IACF;AAEA,QAAI,WAAW,cAAc,QAAQ,aAAa,cAAc,OAAO,YAAY;AAEnF,aAAS,IAAI,GAAG,IAAI,KAAK,MAAM,QAAQ,KAAK;AAC1C,WAAK,MAAM,GAAG,YAAY;AAAA,IAC5B;AAEA,QAAI,GAAG,KAAK,SAAS,WAAW,IAAI,GAAG;AACrC;AAAA,IACF;AAEA,QAAI,QAAQ,CAAC,SAAS;AAEtB,WAAO,MAAM,QAAQ;AACnB,UAAI,cAAc,MAAM,MAAM;AAC9B,UAAI,QAAQ,YAAY;AAExB,eAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACrC,YAAI,IAAI,MAAM;AACd,YAAI,YAAY,EAAE,UAAU,cAAc,EAAE,QAAQ,EAAE;AAEtD,YAAI,CAAC,UAAU,WAAW;AACxB,cAAI,GAAG,KAAK,SAAS,WAAW,WAAW,GAAG;AAE5C;AAAA,UACF;AAEA,gBAAM,KAAK,SAAS;AACpB,oBAAU,YAAY;AAAA,QACxB;AAAA,MACF;AAAA,IACF;AAAA,EACF;AAEA;AAOA,EAAAA,OAAM,UAAU,SAAS,WAAY;AACnC,QAAI,OAAO,KAAK;AAChB,QAAI,WAAW,KAAK;AACpB,QAAI,QAAQ,KAAK;AACjB,QAAI,QAAQ,KAAK;AAEjB,aAAS,IAAI,GAAGC,OAAM,MAAM,QAAQ,IAAIA,MAAK,KAAK;AAChD,YAAM,GAAG,YAAY;AAAA,IACvB;AAEA,aAAS,IAAI,GAAGA,OAAM,KAAK,MAAM,GAAG,IAAIA,MAAK,KAAK;AAChD,YAAM,KAAK,YAAY,CAAC,GAAG,YAAY;AAAA,IACzC;AAEA,aAAS,WAAW,SAAU,KAAK;AACjC,UAAI,OAAO,MAAM,SAAS,YAAY,GAAG;AACzC,aAAO,KAAK,MAAM,aAAa,KAAK,KAAK,MAAM,aAAa;AAAA,IAC9D,CAAC;AAED,aAAS,IAAI,GAAGA,OAAM,MAAM,QAAQ,IAAIA,MAAK,KAAK;AAChD,YAAM,GAAG,YAAY;AAAA,IACvB;AAEA,aAAS,IAAI,GAAGA,OAAM,SAAS,MAAM,GAAG,IAAIA,MAAK,KAAK;AACpD,YAAM,SAAS,YAAY,CAAC,GAAG,YAAY;AAAA,IAC7C;AAAA,EACF;AAEA;AAKA,EAAAD,OAAM,UAAU,QAAQ,WAAY;AAClC,QAAI,QAAQ,IAAIA,OAAM,KAAK,SAAS;AACpC,QAAI,QAAQ,KAAK;AACjB,QAAI,QAAQ,KAAK;AAEjB,aAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACrC,YAAM,QAAQ,MAAM,GAAG,IAAI,MAAM,GAAG,SAAS;AAAA,IAC/C;AAEA,aAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACrC,UAAI,IAAI,MAAM;AACd,YAAM,QAAQ,EAAE,MAAM,IAAI,EAAE,MAAM,IAAI,EAAE,SAAS;AAAA,IACnD;AAEA,WAAO;AAAA,EACT;AAEA;AACA,SAAOA;AACT,EAAE;AAEF,IAAI,YAEJ,WAAY;AACV,WAASE,WAAU,IAAI,WAAW;AAChC,SAAK,UAAU,CAAC;AAChB,SAAK,WAAW,CAAC;AACjB,SAAK,QAAQ,CAAC;AACd,SAAK,YAAY;AACjB,SAAK,KAAK,MAAM,OAAO,KAAK;AAC5B,SAAK,YAAY,aAAa,OAAO,KAAK;AAAA,EAC5C;AAMA,EAAAA,WAAU,UAAU,SAAS,WAAY;AACvC,WAAO,KAAK,MAAM;AAAA,EACpB;AAMA,EAAAA,WAAU,UAAU,WAAW,WAAY;AACzC,WAAO,KAAK,QAAQ;AAAA,EACtB;AAMA,EAAAA,WAAU,UAAU,YAAY,WAAY;AAC1C,WAAO,KAAK,SAAS;AAAA,EACvB;AAEA,EAAAA,WAAU,UAAU,WAAW,SAAU,MAAM;AAC7C,QAAI,KAAK,YAAY,GAAG;AACtB;AAAA,IACF;AAEA,QAAI,QAAQ,KAAK;AACjB,QAAI,YAAY,MAAM,KAAK,aAAa,KAAK,SAAS;AACtD,WAAO,UAAU,SAAS,IAAI;AAAA,EAChC;AAEA,EAAAA,WAAU,UAAU,yBAAyB,WAAY;AACvD,QAAI,cAAc;AAAA,MAChB,MAAM,CAAC;AAAA,MACP,MAAM,CAAC;AAAA,IACT;AAEA,aAAS,IAAI,GAAG,IAAI,KAAK,MAAM,QAAQ,KAAK;AAC1C,UAAI,eAAe,KAAK,MAAM;AAE9B,UAAI,aAAa,YAAY,GAAG;AAC9B;AAAA,MACF;AAEA,kBAAY,KAAK,KAAK,aAAa,SAAS;AAC5C,kBAAY,KAAK,KAAK,aAAa,MAAM,WAAW,aAAa,MAAM,SAAS;AAAA,IAClF;AAEA,WAAO;AAAA,EACT;AAEA,SAAOA;AACT,EAAE;AAEF,IAAI,YAEJ,WAAY;AACV,WAASC,WAAU,IAAI,IAAI,WAAW;AACpC,SAAK,YAAY;AACjB,SAAK,QAAQ;AACb,SAAK,QAAQ;AACb,SAAK,YAAY,aAAa,OAAO,KAAK;AAAA,EAC5C;AAGA,EAAAA,WAAU,UAAU,WAAW,SAAU,MAAM;AAC7C,QAAI,KAAK,YAAY,GAAG;AACtB;AAAA,IACF;AAEA,QAAI,QAAQ,KAAK;AACjB,QAAI,YAAY,MAAM,SAAS,aAAa,KAAK,SAAS;AAC1D,WAAO,UAAU,SAAS,IAAI;AAAA,EAChC;AAEA,EAAAA,WAAU,UAAU,yBAAyB,WAAY;AACvD,WAAO;AAAA,MACL,MAAM,CAAC,KAAK,SAAS;AAAA,MACrB,MAAM,CAAC,KAAK,MAAM,WAAW,KAAK,MAAM,SAAS;AAAA,IACnD;AAAA,EACF;AAEA,SAAOA;AACT,EAAE;AAEF,SAAS,0BAA0B,UAAU,UAAU;AACrD,SAAO;AAAA,IAIL,UAAU,SAAU,WAAW;AAC7B,UAAI,OAAO,KAAK,UAAU;AAC1B,aAAO,KAAK,SAAS,EAAE,IAAI,KAAK,kBAAkB,aAAa,OAAO,GAAG,KAAK,SAAS;AAAA,IACzF;AAAA,IAEA,WAAW,SAAU,KAAK,OAAO;AAC/B,WAAK,aAAa,KAAK,KAAK,UAAU,UAAU,cAAc,KAAK,WAAW,KAAK,KAAK;AAAA,IAC1F;AAAA,IACA,WAAW,SAAU,KAAK;AACxB,aAAO,KAAK,UAAU,UAAU,cAAc,KAAK,WAAW,GAAG;AAAA,IACnE;AAAA,IACA,WAAW,SAAUC,SAAQ,OAAO;AAClC,WAAK,aAAa,KAAK,KAAK,UAAU,UAAU,cAAc,KAAK,WAAWA,SAAQ,KAAK;AAAA,IAC7F;AAAA,IACA,WAAW,WAAY;AACrB,aAAO,KAAK,UAAU,UAAU,cAAc,KAAK,SAAS;AAAA,IAC9D;AAAA,IACA,cAAc,WAAY;AACxB,aAAO,KAAK,UAAU,UAAU,iBAAiB,KAAK,SAAS;AAAA,IACjE;AAAA,IACA,aAAa,WAAY;AACvB,aAAO,KAAK,UAAU,UAAU,YAAY,KAAK,SAAS;AAAA,IAC5D;AAAA,EACF;AACF;AAKO,MAAM,WAAW,0BAA0B,aAAa,MAAM,CAAC;AAC/D,MAAM,WAAW,0BAA0B,aAAa,UAAU,CAAC;AAC1E,IAAO,gBAAQ;;;ACzaA,SAAR,wBAAyC,OAAO,OAAO,aAAa,UAAU,YAAY;AAG/F,MAAI,QAAQ,IAAI,cAAM,QAAQ;AAE9B,WAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACrC,UAAM,QAAe;AAAA,MACrB,MAAM,GAAG;AAAA,MAAI,MAAM,GAAG;AAAA,MAAM;AAAA,IAAC,GAAG,CAAC;AAAA,EACnC;AAEA,MAAI,eAAe,CAAC;AACpB,MAAI,aAAa,CAAC;AAClB,MAAI,YAAY;AAEhB,WAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACrC,QAAI,OAAO,MAAM;AACjB,QAAI,SAAS,KAAK;AAClB,QAAI,SAAS,KAAK;AAElB,QAAI,MAAM,QAAQ,QAAQ,QAAQ,SAAS,GAAG;AAC5C,iBAAW,KAAK,IAAI;AACpB,mBAAa,KAAY,SAAS,oBAAoB,KAAK,IAAI,IAAI,GAAG,SAAS,QAAQ,MAAM,CAAC;AAC9F;AAAA,IACF;AAAA,EACF;AAEA,MAAI,WAAW,YAAY,IAAI,kBAAkB;AACjD,MAAI;AAEJ,MAAI,aAAa,iBAAiB,aAAa,SAAS;AACtD,eAAW,yBAAiB,OAAO,WAAW;AAAA,EAChD,OAAO;AACL,QAAI,eAAe,yBAAiB,IAAI,QAAQ;AAChD,QAAI,kBAAkB,eAAe,aAAa,cAAc,CAAC,IAAI,CAAC;AAItE,QAAW,QAAQ,iBAAiB,OAAO,IAAI,GAAG;AAChD,sBAAgB,OAAO,CAAC,OAAO,CAAC;AAAA,IAClC;AAEA,QAAI,aAAa,wBAAwB,OAAO;AAAA,MAC9C;AAAA,MACA,cAAc,YAAY,UAAU;AAAA,IACtC,CAAC,EAAE;AACH,eAAW,IAAI,mBAAW,YAAY,WAAW;AACjD,aAAS,SAAS,KAAK;AAAA,EACzB;AAEA,MAAI,WAAW,IAAI,mBAAW,CAAC,OAAO,GAAG,WAAW;AACpD,WAAS,SAAS,YAAY,YAAY;AAC1C,gBAAc,WAAW,UAAU,QAAQ;AAC3C,yBAAe;AAAA,IACb,UAAU;AAAA,IACV,QAAQ;AAAA,IACR,YAAY;AAAA,IACZ,OAAO;AAAA,MACL,MAAM;AAAA,MACN,MAAM;AAAA,IACR;AAAA,IACA,WAAW;AAAA,MACT,MAAM;AAAA,MACN,MAAM;AAAA,IACR;AAAA,EACF,CAAC;AAED,QAAM,OAAO;AACb,SAAO;AACT;;;AChEA,IAAI,mBAEJ,SAAU,QAAQ;AAChB,YAAUC,mBAAkB,MAAM;AAElC,WAASA,oBAAmB;AAC1B,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,kBAAiB;AAC9B,UAAM,kBAAkB;AACxB,WAAO;AAAA,EACT;AAEA,EAAAA,kBAAiB,UAAU,OAAO,SAAU,QAAQ;AAClD,WAAO,UAAU,KAAK,MAAM,MAAM,SAAS;AAE3C,QAAI,OAAO;AAEX,aAAS,oBAAoB;AAC3B,aAAO,KAAK;AAAA,IACd;AAGA,SAAK,uBAAuB,IAAI,6BAAqB,mBAAmB,iBAAiB;AACzF,SAAK,kBAAkB,OAAO,SAAS,OAAO,KAAK;AAEnD,SAAK,sBAAsB;AAAA,EAC7B;AAEA,EAAAA,kBAAiB,UAAU,cAAc,SAAU,QAAQ;AACzD,WAAO,UAAU,YAAY,MAAM,MAAM,SAAS;AAElD,SAAK,kBAAkB,OAAO,SAAS,OAAO,KAAK;AAEnD,SAAK,sBAAsB;AAAA,EAC7B;AAEA,EAAAA,kBAAiB,UAAU,uBAAuB,SAAU,QAAQ;AAClE,WAAO,UAAU,qBAAqB,MAAM,MAAM,SAAS;AAE3D,oBAAgB,QAAQ,aAAa,CAAC,MAAM,CAAC;AAAA,EAC/C;AAEA,EAAAA,kBAAiB,UAAU,iBAAiB,SAAU,QAAQ,SAAS;AACrE,QAAI,QAAQ,OAAO,SAAS,OAAO,SAAS,CAAC;AAC7C,QAAI,QAAQ,OAAO,QAAQ,OAAO,SAAS,CAAC;AAC5C,QAAI,OAAO;AAEX,QAAI,SAAS,OAAO;AAElB,wBAAkB,IAAI;AACtB,UAAI,QAAQ,wBAAwB,OAAO,OAAO,MAAM,MAAM,UAAU;AACxE,MAAO,KAAK,MAAM,OAAO,SAAU,MAAM;AACvC,kCAA0B,KAAK,OAAO,KAAK,OAAO,MAAM,KAAK,SAAS;AAAA,MACxE,GAAG,IAAI;AACP,aAAO,MAAM;AAAA,IACf;AAEA,aAAS,WAAW,UAAU,UAAU;AAEtC,eAAS,WAAW,gBAAgB,SAAU,OAAO;AACnD,YAAI,mBAAmB,KAAK;AAC5B,YAAI,cAAc,MAAM,WAAW,UAAU;AAC7C,YAAI,gBAAgB,iBAAiB;AAErC,YAAI,eAAe;AACjB,wBAAc,cAAc,MAAM;AAClC,gBAAM,cAAc;AAAA,QACtB;AAEA,eAAO;AAAA,MACT,CAAC;AAED,UAAI,cAAc,cAAM,UAAU;AAElC,eAAS,YAAY,MAAM,aAAa;AACtC,YAAI,QAAQ,YAAY,KAAK,MAAM,MAAM,WAAW;AACpD,cAAM,oBAAoB;AAC1B,eAAO;AAAA,MACT;AAEA,eAAS,WAAW,gBAAgB,SAAU,OAAO;AACnD,cAAM,oBAAoB;AAC1B,cAAM,WAAW;AACjB,eAAO;AAAA,MACT,CAAC;AAED,eAAS,kBAAkB,SAAS;AAClC,YAAI,YAAY,QAAQ,OAAO,WAAW,QAAQ,OAAO,UAAU;AACjE,cAAI,aAAa,QAAQ,MAAM;AAE/B,cAAI,QAAQ,OAAO,SAAS;AAC1B,uBAAW,KAAK;AAAA,UAClB,WAAW,QAAQ,OAAO,SAAS;AACjC,uBAAW,KAAK;AAAA,UAClB;AAEA,iBAAO;AAAA,QACT;AAEA,eAAO;AAAA,MACT;AAAA,IACF;AAAA,EACF;AAEA,EAAAA,kBAAiB,UAAU,WAAW,WAAY;AAChD,WAAO,KAAK,QAAQ,EAAE;AAAA,EACxB;AAEA,EAAAA,kBAAiB,UAAU,cAAc,WAAY;AACnD,WAAO,KAAK,SAAS,EAAE;AAAA,EACzB;AAEA,EAAAA,kBAAiB,UAAU,oBAAoB,WAAY;AACzD,WAAO,KAAK;AAAA,EACd;AAEA,EAAAA,kBAAiB,UAAU,gBAAgB,SAAU,WAAW,gBAAgB,UAAU;AACxF,QAAI,aAAa,QAAQ;AACvB,UAAI,WAAW,KAAK,QAAQ;AAC5B,UAAI,SAAS,KAAK,cAAc,WAAW,QAAQ;AACnD,UAAI,OAAO,SAAS,MAAM,eAAe,SAAS;AAClD,UAAI,aAAa,SAAS,QAAQ,KAAK,MAAM,SAAS;AACtD,UAAI,aAAa,SAAS,QAAQ,KAAK,MAAM,SAAS;AACtD,UAAI,UAAU,CAAC;AACf,oBAAc,QAAQ,QAAQ,KAAK,UAAU;AAC7C,oBAAc,QAAQ,QAAQ,KAAK,UAAU;AAC7C,aAAO,oBAAoB,aAAa;AAAA,QACtC,MAAM,QAAQ,KAAK,KAAK;AAAA,QACxB,OAAO,OAAO;AAAA,QACd,SAAS,OAAO,SAAS;AAAA,MAC3B,CAAC;AAAA,IACH;AAGA,QAAI,aAAa,2BAA2B;AAAA,MAC1C,QAAQ;AAAA,MACR;AAAA,MACA;AAAA,IACF,CAAC;AACD,WAAO;AAAA,EACT;AAEA,EAAAA,kBAAiB,UAAU,wBAAwB,WAAY;AAC7D,QAAI,aAAoB,IAAI,KAAK,OAAO,cAAc,CAAC,GAAG,SAAU,UAAU;AAE5E,aAAO,SAAS,SAAS,OAAO,WAAkB,OAAO;AAAA,QACvD,OAAO;AAAA,MACT,GAAG,QAAQ;AAAA,IACb,CAAC;AACD,QAAI,iBAAiB,IAAI,mBAAW,CAAC,OAAO,GAAG,IAAI;AACnD,mBAAe,SAAS,UAAU;AAClC,SAAK,kBAAkB;AACvB,SAAK,oBAAoB,eAAe,SAAS,SAAU,KAAK;AAC9D,aAAO,eAAe,aAAa,GAAG;AAAA,IACxC,CAAC;AAAA,EACH;AAEA,EAAAA,kBAAiB,UAAU,UAAU,SAAU,MAAM;AACnD,SAAK,OAAO,OAAO;AAAA,EACrB;AAEA,EAAAA,kBAAiB,UAAU,YAAY,SAAUC,SAAQ;AACvD,SAAK,OAAO,SAASA;AAAA,EACvB;AAEA,EAAAD,kBAAiB,UAAU,qBAAqB,WAAY;AAC1D,WAAO,OAAO,UAAU,mBAAmB,KAAK,IAAI,KACjD,EAAE,KAAK,IAAI,QAAQ,MAAM,WAAW,KAAK,IAAI,CAAC,SAAS,iBAAiB,CAAC;AAAA,EAC9E;AAEA,EAAAA,kBAAiB,OAAO;AACxB,EAAAA,kBAAiB,eAAe,CAAC,QAAQ,SAAS,OAAO,cAAc,UAAU;AACjF,EAAAA,kBAAiB,gBAAgB;AAAA,IAE/B,GAAG;AAAA,IACH,kBAAkB;AAAA,IAMlB,iBAAiB;AAAA,IACjB,QAAQ;AAAA,IAER,UAAU;AAAA,MACR,aAAa;AAAA,IACf;AAAA,IAEA,OAAO;AAAA,MACL,YAAY;AAAA,MAEZ,WAAW,CAAC,GAAG,EAAE;AAAA,MACjB,SAAS;AAAA,MAET,UAAU;AAAA,MAEV,YAAY;AAAA,MACZ,iBAAiB;AAAA,IACnB;AAAA,IACA,MAAM;AAAA,IACN,KAAK;AAAA,IAKL,QAAQ;AAAA,IACR,YAAY;AAAA,IACZ,YAAY,CAAC,QAAQ,MAAM;AAAA,IAC3B,gBAAgB;AAAA,IAChB,WAAW;AAAA,MACT,UAAU;AAAA,MACV,UAAU;AAAA,IACZ;AAAA,IACA,WAAW;AAAA,IACX,MAAM;AAAA,IAEN,QAAQ;AAAA,IACR,MAAM;AAAA,IAEN,gBAAgB;AAAA,IAUhB,OAAO;AAAA,MACL,MAAM;AAAA,MACN,WAAW;AAAA,IACb;AAAA,IACA,WAAW,CAAC;AAAA,IACZ,WAAW;AAAA,MACT,OAAO;AAAA,MACP,OAAO;AAAA,MACP,SAAS;AAAA,IACX;AAAA,IACA,UAAU;AAAA,MACR,OAAO;AAAA,MACP,OAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AAAA,IACA,QAAQ;AAAA,MACN,WAAW;AAAA,QACT,aAAa;AAAA,MACf;AAAA,IACF;AAAA,EACF;AACA,SAAOA;AACT,EAAE,cAAW;AAEb,IAAO,sBAAQ;;;AC/Pf,IAAI,aAAa;AAAA,EACf,MAAM;AAAA,EACN,OAAO;AAAA,EACP,QAAQ;AACV;AACO,SAASE,UAAQ,WAAW;AACjC,YAAU,kBAAkB,iBAAS;AACrC,YAAU,oBAAoB,mBAAgB;AAC9C,YAAU,kBAAkB,cAAc;AAC1C,YAAU,eAAe,cAAc;AACvC,YAAU,eAAe,eAAU;AACnC,YAAU,eAAe,iBAAY;AACrC,YAAU,eAAe,UAAU,SAAS,OAAO,mBAAmB,mBAAc;AACpF,YAAU,eAAe,gBAAW;AACpC,YAAU,yBAAyB,aAAa;AAAA,IAC9C,YAAY,aAAK;AAAA,IACjB,QAAQ;AAAA,EACV,CAAC;AAED,YAAU,eAAe;AAAA,IACvB,MAAM;AAAA,IACN,OAAO;AAAA,IACP,QAAQ;AAAA,EACV,GAAG,IAAI;AACP,YAAU,eAAe;AAAA,IACvB,MAAM;AAAA,IACN,OAAO;AAAA,IACP,QAAQ;AAAA,EACV,GAAG,IAAI;AAEP,YAAU,eAAe,YAAY,SAAU,SAAS,SAAS,KAAK;AACpE,YAAQ,cAAc;AAAA,MACpB,UAAU;AAAA,MACV,OAAO;AAAA,IACT,GAAG,SAAU,aAAa;AACxB,UAAI,WAAW,YAAY;AAC3B,UAAI,MAAM,oBAAoB,UAAU,SAAS,QAAW,GAAG;AAC/D,kBAAY,aAAa,YAAY,UAAU,IAAI,MAAM;AACzD,kBAAY,WAAW,YAAY,QAAQ,IAAI,IAAI;AAAA,IACrD,CAAC;AAAA,EACH,CAAC;AACH;;;AClDA,IAAI,eAEJ,WAAY;AACV,WAASC,gBAAe;AACtB,SAAK,QAAQ;AACb,SAAK,QAAQ;AACb,SAAK,IAAI;AACT,SAAK,IAAI;AACT,SAAK,IAAI;AAAA,EACX;AAEA,SAAOA;AACT,EAAE;AAEF,IAAI,cAEJ,SAAU,QAAQ;AAChB,YAAUC,cAAa,MAAM;AAE7B,WAASA,aAAY,MAAM;AACzB,QAAI,QAAQ,OAAO,KAAK,MAAM,IAAI,KAAK;AAEvC,UAAM,OAAO;AACb,WAAO;AAAA,EACT;AAEA,EAAAA,aAAY,UAAU,kBAAkB,WAAY;AAClD,WAAO,IAAI,aAAa;AAAA,EAC1B;AAEA,EAAAA,aAAY,UAAU,YAAY,SAAU,KAAK,OAAO;AACtD,QAAI,UAAU,KAAK;AACnB,QAAI,UAAU,KAAK;AACnB,QAAI,IAAI,MAAM;AACd,QAAI,QAAQ,MAAM;AAClB,QAAI,QAAQ,MAAM;AAClB,QAAI,IAAI,MAAM,IAAI,QAAQ,KAAK,IAAI,SAAS,SAAS,IAAI,IAAI,IAAI;AACjE,QAAI,IAAI,MAAM,IAAI,QAAQ,KAAK,IAAI,SAAS,SAAS,IAAI,IAAI,IAAI;AACjE,YAAQ,MAAM,QAAQ,KAAK,KAAK;AAChC,QAAI,OAAO,GAAG,CAAC;AACf,QAAI,OAAO,MAAM,IAAI,QAAQ,KAAK,IAAI,OAAO,MAAM,IAAI,QAAQ,KAAK,IAAI,KAAK;AAC7E,QAAI,OAAO,MAAM,IAAI,QAAQ,MAAM,KAAK,IAAI,GAAG,MAAM,IAAI,QAAQ,MAAM,KAAK,IAAI,CAAC;AACjF,QAAI,OAAO,MAAM,IAAI,QAAQ,KAAK,IAAI,OAAO,MAAM,IAAI,QAAQ,KAAK,IAAI,KAAK;AAC7E,QAAI,OAAO,GAAG,CAAC;AAAA,EACjB;AAEA,SAAOA;AACT,EAAE,YAAI;AAEN,IAAO,sBAAQ;;;ACtCf,SAAS,cAAc,aAAa,KAAK;AACvC,MAAIC,UAAS,YAAY,IAAI,QAAQ;AACrC,MAAI,QAAQ,IAAI,SAAS;AACzB,MAAI,SAAS,IAAI,UAAU;AAC3B,MAAI,OAAO,KAAK,IAAI,OAAO,MAAM;AACjC,MAAI,KAAKC,cAAaD,QAAO,IAAI,IAAI,SAAS,CAAC;AAC/C,MAAI,KAAKC,cAAaD,QAAO,IAAI,IAAI,UAAU,CAAC;AAChD,MAAI,IAAIC,cAAa,YAAY,IAAI,QAAQ,GAAG,OAAO,CAAC;AACxD,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,EACF;AACF;AAEA,SAAS,YAAY,OAAO,gBAAgB;AAC1C,MAAI,QAAQ,SAAS,OAAO,KAAK,QAAQ;AAEzC,MAAI,gBAAgB;AAClB,QAAI,SAAS,cAAc,GAAG;AAC5B,cAAQ,eAAe,QAAQ,WAAW,KAAK;AAAA,IACjD,WAAW,WAAW,cAAc,GAAG;AACrC,cAAQ,eAAe,KAAK;AAAA,IAC9B;AAAA,EACF;AAEA,SAAO;AACT;AAEA,IAAI,YAEJ,SAAU,QAAQ;AAChB,YAAUC,YAAW,MAAM;AAE3B,WAASA,aAAY;AACnB,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,WAAU;AACvB,WAAO;AAAA,EACT;AAEA,EAAAA,WAAU,UAAU,SAAS,SAAU,aAAa,SAAS,KAAK;AAChE,SAAK,MAAM,UAAU;AACrB,QAAI,YAAY,YAAY,IAAI,CAAC,YAAY,aAAa,OAAO,CAAC;AAClE,QAAI,UAAU,cAAc,aAAa,GAAG;AAE5C,SAAK,YAAY,aAAa,SAAS,KAAK,WAAW,OAAO;AAE9D,SAAK,QAAQ,YAAY,QAAQ;AAAA,EACnC;AAEA,EAAAA,WAAU,UAAU,UAAU,WAAY;AAAA,EAAC;AAE3C,EAAAA,WAAU,UAAU,cAAc,SAAU,aAAa,SAAS,KAAK,WAAW,SAAS;AACzF,QAAI,QAAQ,KAAK;AACjB,QAAI,YAAY,YAAY,IAAI,WAAW;AAC3C,QAAI,aAAa,CAAC,YAAY,IAAI,YAAY,IAAI,MAAM,KAAK;AAC7D,QAAI,WAAW,CAAC,YAAY,IAAI,UAAU,IAAI,MAAM,KAAK;AACzD,QAAI,gBAAgB,YAAY,SAAS,UAAU;AACnD,QAAI,WAAW,cAAc,IAAI,UAAU;AAC3C,QAAI,WAAW,WAAW,kBAAkB;AAC5C,QAAI,WAAW,cAAc,IAAI,MAAM;AACvC,QAAI,iBAAiB,cAAc,SAAS,WAAW;AACvD,QAAI,gBAAgB,eAAe,IAAI,OAAO;AAC9C,QAAI,SAAS,CAAC,YAAY,QAAQ;AAClC,uBAAmB,QAAQ,CAAC,SAAS;AACrC,iBAAa,OAAO;AACpB,eAAW,OAAO;AAClB,QAAI,iBAAiB,WAAW;AAChC,QAAI,eAAe;AACnB,QAAI,UAAU,CAAC;AAEf,aAAS,IAAI,GAAG,YAAY,IAAI,UAAU,QAAQ,KAAK;AAErD,UAAI,UAAU,KAAK,IAAI,KAAK,IAAI,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC;AACtD,iBAAW,aAAa,iBAAiB;AACzC,UAAI,SAAS,IAAI,SAAS;AAAA,QACxB,OAAO;AAAA,UACL,YAAY;AAAA,UACZ;AAAA,UACA,IAAI,QAAQ;AAAA,UACZ,IAAI,QAAQ;AAAA,UACZ;AAAA,UACA,IAAI,QAAQ,IAAI;AAAA,UAChB,GAAG,QAAQ;AAAA,QACb;AAAA,QACA,QAAQ;AAAA,MACV,CAAC;AACD,aAAO,SAAS;AAAA,QACd,MAAM,UAAU,GAAG;AAAA,MACrB,CAAC;AACD,aAAO,SAAS,eAAe;AAAA,QAE/B,CAAC,SAAS,OAAO;AAAA,MAAC,CAAC;AACnB,cAAQ,KAAK,MAAM;AACnB,qBAAe;AAAA,IACjB;AAEA,YAAQ,QAAQ;AAChB,SAAK,SAAS,SAAUC,SAAQ;AAC9B,aAAO,MAAM,IAAIA,OAAM;AAAA,IACzB,CAAC;AAED,QAAI,WAAW,SAAUC,UAAS;AAEhC,UAAIA,YAAW,GAAG;AAChB,eAAO,UAAU,GAAG;AAAA,MACtB;AAEA,UAAIC;AAEJ,WAAKA,KAAI,GAAGA,KAAI,UAAU,QAAQA,MAAK;AACrC,YAAI,UAAUA,IAAG,MAAMD,aAAYC,OAAM,IAAI,IAAI,UAAUA,KAAI,GAAG,MAAMD,UAAS;AAC/E,iBAAO,UAAUC,IAAG;AAAA,QACtB;AAAA,MACF;AAGA,aAAO,UAAUA,KAAI,GAAG;AAAA,IAC1B;AAEA,SAAK,aAAa,aAAa,SAAS,KAAK,UAAU,SAAS,YAAY,UAAU,WAAW,aAAa;AAE9G,SAAK,sBAAsB,aAAa,SAAS,KAAK,UAAU,OAAO;AAEvE,SAAK,cAAc,aAAa,OAAO;AAEvC,SAAK,eAAe,aAAa,SAAS,KAAK,UAAU,SAAS,YAAY,UAAU,WAAW,aAAa;AAAA,EAClH;AAEA,EAAAH,WAAU,UAAU,eAAe,SAAU,aAAa,SAAS,KAAK,UAAU,SAAS,YAAY,UAAU,WAAW,eAAe;AACzI,QAAI,QAAQ,KAAK;AACjB,QAAI,KAAK,QAAQ;AACjB,QAAI,KAAK,QAAQ;AACjB,QAAI,IAAI,QAAQ;AAChB,QAAI,SAAS,CAAC,YAAY,IAAI,KAAK;AACnC,QAAI,SAAS,CAAC,YAAY,IAAI,KAAK;AACnC,QAAI,iBAAiB,YAAY,SAAS,WAAW;AACrD,QAAI,YAAY,YAAY,SAAS,UAAU;AAC/C,QAAI,aAAa,YAAY,SAAS,WAAW;AACjD,QAAI,cAAc,YAAY,IAAI,aAAa;AAC/C,QAAI,iBAAiB,UAAU,IAAI,aAAa;AAChD,QAAI,eAAeD,cAAa,eAAe,IAAI,QAAQ,GAAG,CAAC;AAC/D,QAAI,UAAUA,cAAa,UAAU,IAAI,QAAQ,GAAG,CAAC;AACrD,QAAI,QAAQ;AACZ,QAAI,QAAQ,WAAW,cAAc;AACrC,QAAI,UAAU,OAAO;AACrB,QAAI,iBAAiB,eAAe,SAAS,WAAW,EAAE,aAAa;AACvE,QAAI,gBAAgB,UAAU,SAAS,WAAW,EAAE,aAAa;AACjE,QAAI,oBAAoB,eAAe,IAAI,UAAU;AACrD,QAAI;AACJ,QAAI;AAEJ,aAAS,IAAI,GAAG,KAAK,aAAa,KAAK;AACrC,cAAQ,KAAK,IAAI,KAAK;AACtB,cAAQ,KAAK,IAAI,KAAK;AAEtB,UAAI,eAAe,IAAI,MAAM,GAAG;AAC9B,YAAI,WAAW,oBAAoB,oBAAoB,gBAAgB;AACvE,YAAI,YAAY,IAAY,aAAK;AAAA,UAC/B,OAAO;AAAA,YACL,IAAI,SAAS,IAAI,YAAY;AAAA,YAC7B,IAAI,SAAS,IAAI,YAAY;AAAA,YAC7B,IAAI,SAAS,IAAI,eAAe,YAAY;AAAA,YAC5C,IAAI,SAAS,IAAI,eAAe,YAAY;AAAA,UAC9C;AAAA,UACA,OAAO;AAAA,UACP,QAAQ;AAAA,QACV,CAAC;AAED,YAAI,eAAe,WAAW,QAAQ;AACpC,oBAAU,SAAS;AAAA,YACjB,QAAQ,SAAS,IAAI,WAAW;AAAA,UAClC,CAAC;AAAA,QACH;AAEA,cAAM,IAAI,SAAS;AAAA,MACrB;AAGA,UAAI,WAAW,IAAI,MAAM,GAAG;AAC1B,YAAI,WAAW,WAAW,IAAI,UAAU,IAAI;AAC5C,YAAI,QAAQ,YAAY,MAAM,IAAI,eAAe,SAAS,UAAU,MAAM,GAAG,WAAW,IAAI,WAAW,CAAC;AACxG,YAAI,YAAY,SAAS,IAAI,WAAW;AACxC,YAAI,aAAa,SAAS,IAAI,eAAe,YAAY;AACzD,YAAI,aAAa,SAAS,IAAI,eAAe,YAAY;AACzD,YAAI,aAAa,WAAW,IAAI,QAAQ;AACxC,YAAI,SAAS;AAEb,YAAI,eAAe,UAAU;AAC3B,mBAAS,CAAC,QAAQ,IAAI,KAAK;AAE3B,cAAI,SAAS,KAAK,KAAK,GAAG;AACxB,sBAAU,KAAK;AAAA,UACjB;AAAA,QACF,WAAW,eAAe,cAAc;AACtC,mBAAS,CAAC,QAAQ,KAAK,KAAK;AAAA,QAC9B,WAAW,SAAS,UAAU,GAAG;AAC/B,mBAAS,aAAa,KAAK,KAAK;AAAA,QAClC;AAEA,YAAI,WAAW,GAAG;AAChB,gBAAM,IAAI,IAAY,aAAK;AAAA,YACzB,OAAO,gBAAgB,YAAY;AAAA,cACjC,MAAM;AAAA,cACN,GAAG;AAAA,cACH,GAAG;AAAA,cACH,eAAe,QAAQ,OAAO,QAAQ,QAAQ,MAAM,WAAW;AAAA,cAC/D,OAAO,QAAQ,OAAO,SAAS,QAAQ,MAAM,UAAU;AAAA,YACzD,GAAG;AAAA,cACD,cAAc;AAAA,YAChB,CAAC;AAAA,YACD,QAAQ;AAAA,UACV,CAAC,CAAC;AAAA,QACJ,OAAO;AACL,gBAAM,IAAI,IAAY,aAAK;AAAA,YACzB,OAAO,gBAAgB,YAAY;AAAA,cACjC,MAAM;AAAA,cACN,GAAG;AAAA,cACH,GAAG;AAAA,cACH,eAAe;AAAA,cACf,OAAO;AAAA,YACT,GAAG;AAAA,cACD,cAAc;AAAA,YAChB,CAAC;AAAA,YACD,QAAQ;AAAA,YACR,SAAS;AAAA,YACT,SAAS;AAAA,YACT,UAAU;AAAA,UACZ,CAAC,CAAC;AAAA,QACJ;AAAA,MACF;AAGA,UAAI,UAAU,IAAI,MAAM,KAAK,MAAM,aAAa;AAC9C,YAAI,WAAW,UAAU,IAAI,UAAU;AACvC,mBAAW,WAAW,WAAW,gBAAgB;AAEjD,iBAAS,IAAI,GAAG,KAAK,gBAAgB,KAAK;AACxC,kBAAQ,KAAK,IAAI,KAAK;AACtB,kBAAQ,KAAK,IAAI,KAAK;AACtB,cAAI,WAAW,IAAY,aAAK;AAAA,YAC9B,OAAO;AAAA,cACL,IAAI,SAAS,IAAI,YAAY;AAAA,cAC7B,IAAI,SAAS,IAAI,YAAY;AAAA,cAC7B,IAAI,SAAS,IAAI,UAAU,YAAY;AAAA,cACvC,IAAI,SAAS,IAAI,UAAU,YAAY;AAAA,YACzC;AAAA,YACA,QAAQ;AAAA,YACR,OAAO;AAAA,UACT,CAAC;AAED,cAAI,cAAc,WAAW,QAAQ;AACnC,qBAAS,SAAS;AAAA,cAChB,QAAQ,UAAU,IAAI,IAAI,kBAAkB,WAAW;AAAA,YACzD,CAAC;AAAA,UACH;AAEA,gBAAM,IAAI,QAAQ;AAClB,mBAAS;AAAA,QACX;AAEA,iBAAS;AAAA,MACX,OAAO;AACL,iBAAS;AAAA,MACX;AAAA,IACF;AAAA,EACF;AAEA,EAAAC,WAAU,UAAU,iBAAiB,SAAU,aAAa,SAAS,KAAK,UAAU,SAAS,YAAY,UAAU,WAAW,eAAe;AAC3I,QAAI,QAAQ,KAAK;AACjB,QAAI,UAAU,KAAK;AACnB,QAAI,kBAAkB,KAAK;AAC3B,QAAI,eAAe,CAAC;AACpB,QAAI,cAAc,YAAY,IAAI,CAAC,WAAW,MAAM,CAAC;AACrD,QAAI,gBAAgB,YAAY,SAAS,UAAU;AACnD,QAAI,eAAe,cAAc,IAAI,MAAM;AAC3C,QAAI,OAAO,YAAY,QAAQ;AAC/B,QAAI,WAAW,KAAK,aAAa,OAAO;AACxC,QAAI,SAAS,CAAC,YAAY,IAAI,KAAK;AACnC,QAAI,SAAS,CAAC,YAAY,IAAI,KAAK;AACnC,QAAI,cAAc,CAAC,QAAQ,MAAM;AACjC,QAAI,cAAc,CAAC,YAAY,QAAQ;AAEvC,aAAS,cAAc,KAAK,OAAO;AACjC,UAAI,YAAY,KAAK,aAAa,GAAG;AACrC,UAAI,eAAe,UAAU,SAAS,SAAS;AAC/C,UAAI,eAAeD,cAAa,aAAa,IAAI,OAAO,GAAG,QAAQ,CAAC;AACpE,UAAI,gBAAgBA,cAAa,aAAa,IAAI,QAAQ,GAAG,QAAQ,CAAC;AACtE,UAAI,aAAa,YAAY,IAAI,CAAC,WAAW,MAAM,CAAC;AACpD,UAAI,gBAAgB,aAAa,IAAI,cAAc;AACnD,UAAI,iBAAiBA,cAAa,cAAc,IAAI,QAAQ,CAAC;AAC7D,UAAI,iBAAiBA,cAAa,cAAc,IAAI,QAAQ,CAAC;AAC7D,UAAI,oBAAoB,aAAa,IAAI,YAAY;AACrD,UAAI;AAEJ,UAAI,YAAY;AACd,kBAAU,aAAa,YAAY,iBAAiB,eAAe,GAAG,iBAAiB,eAAe,cAAc,eAAe,MAAM,iBAAiB;AAAA,MAC5J,OAAO;AACL,kBAAU,IAAI,oBAAY;AAAA,UACxB,OAAO;AAAA,YACL,OAAO,CAAC,KAAK,KAAK;AAAA,YAClB,OAAO;AAAA,YACP,GAAG;AAAA,YACH,GAAG;AAAA,YACH,GAAG;AAAA,UACL;AAAA,QACF,CAAC;AAAA,MACH;AAEA,cAAQ,WAAW,EAAE,QAAQ,KAAK,KAAK;AACvC,cAAQ,IAAI,QAAQ;AACpB,cAAQ,IAAI,QAAQ;AACpB,aAAO;AAAA,IACT;AAEA,aAAS,eAAe,KAAKK,WAAU;AACrC,UAAI,WAAW,cAAc,IAAI,UAAU;AAC3C,UAAI,eAAe,WAAW,kBAAkB;AAChD,UAAI,YAAY,cAAc,IAAI,SAAS;AAC3C,UAAI,gBAAgB,YAAY,cAAc,IAAI,OAAO,IAAI,gBAAgB,KAAK,MAAM;AACxF,UAAI,KAAK,YAAY,QAAQ,IAAI,gBAAgB,QAAQ,KAAK,MAAM,KAAK;AACzE,UAAI,IAAI,YAAY,QAAQ,IAAI,QAAQ,IAAI,MAAM;AAClD,UAAI,WAAW,IAAI,aAAa;AAAA,QAC9B,OAAO;AAAA,UACL;AAAA,UACA,UAAUA;AAAA,UACV,IAAI,QAAQ;AAAA,UACZ,IAAI,QAAQ;AAAA,UACZ;AAAA,UACA;AAAA,UACA;AAAA,QACF;AAAA,MACF,CAAC;AACD,oBAAc,SAAS,KAAK,SAAS,KAAK,IAAI,UAAU,GAAG,IAAI;AAC/D,aAAO;AAAA,IACT;AAEA,QAAI,gBAAgB,aAAa;AAC/B,WAAK,KAAK,OAAO,EAAE,IAAI,SAAU,KAAK;AACpC,YAAI,MAAM,KAAK,IAAI,UAAU,GAAG;AAEhC,YAAI,aAAa;AACf,cAAI,UAAU,cAAc,KAAK,UAAU;AAE3C,UAAQ,UAAU,SAAS;AAAA,YACzB,UAAU,GAAG,MAAM,CAAC,GAAG,IAAI,YAAY,KAAK,UAAU,KAAK,aAAa,aAAa,IAAI,KAAK,KAAK,KAAK;AAAA,UAC1G,GAAG,WAAW;AACd,gBAAM,IAAI,OAAO;AACjB,eAAK,iBAAiB,KAAK,OAAO;AAAA,QACpC;AAEA,YAAI,cAAc;AAChB,cAAI,WAAW,eAAe,KAAK,UAAU;AAC7C,cAAI,SAAS,cAAc,IAAI,MAAM;AACrC,UAAQ,UAAU,UAAU;AAAA,YAC1B,OAAO;AAAA,cACL,UAAU,UAAU,KAAK,aAAa,aAAa,MAAM;AAAA,YAC3D;AAAA,UACF,GAAG,WAAW;AACd,gBAAM,IAAI,QAAQ;AAGlB,0BAAgB,YAAY,aAAa,KAAK,UAAU,KAAK,QAAQ;AACrE,uBAAa,OAAO;AAAA,QACtB;AAAA,MACF,CAAC,EAAE,OAAO,SAAU,QAAQ,QAAQ;AAClC,YAAI,MAAM,KAAK,IAAI,UAAU,MAAM;AAEnC,YAAI,aAAa;AACf,cAAI,kBAAkB,QAAQ,iBAAiB,MAAM;AACrD,cAAI,iBAAiB,kBAAkB,gBAAgB,WAAW;AAClE,cAAI,UAAU,cAAc,QAAQ,cAAc;AAClD,kBAAQ,WAAW;AACnB,UAAQ,YAAY,SAAS;AAAA,YAC3B,UAAU,GAAG,MAAM,CAAC,GAAG,IAAI,YAAY,KAAK,UAAU,KAAK,aAAa,aAAa,IAAI,KAAK,KAAK,KAAK;AAAA,UAC1G,GAAG,WAAW;AACd,gBAAM,IAAI,OAAO;AACjB,eAAK,iBAAiB,QAAQ,OAAO;AAAA,QACvC;AAEA,YAAI,cAAc;AAChB,cAAI,mBAAmB,gBAAgB;AACvC,cAAI,mBAAmB,mBAAmB,iBAAiB,MAAM,WAAW;AAC5E,cAAI,WAAW,eAAe,QAAQ,gBAAgB;AACtD,cAAI,SAAS,cAAc,IAAI,MAAM;AACrC,UAAQ,YAAY,UAAU;AAAA,YAC5B,OAAO;AAAA,cACL,UAAU,UAAU,KAAK,aAAa,aAAa,MAAM;AAAA,YAC3D;AAAA,UACF,GAAG,WAAW;AACd,gBAAM,IAAI,QAAQ;AAGlB,0BAAgB,YAAY,aAAa,KAAK,UAAU,QAAQ,QAAQ;AACxE,uBAAa,UAAU;AAAA,QACzB;AAAA,MACF,CAAC,EAAE,QAAQ;AACX,WAAK,KAAK,SAAU,KAAK;AACvB,YAAI,YAAY,KAAK,aAAa,GAAG;AACrC,YAAI,gBAAgB,UAAU,SAAS,UAAU;AACjD,YAAI,QAAQ,cAAc,IAAI,OAAO;AACrC,YAAI,YAAY,cAAc,IAAI,WAAW;AAC7C,YAAI,mBAAmB,cAAc,IAAI,UAAU;AAEnD,YAAI,aAAa;AACf,cAAI,UAAU,KAAK,iBAAiB,GAAG;AACvC,cAAI,cAAc,KAAK,cAAc,KAAK,OAAO;AACjD,cAAI,cAAc,YAAY;AAE9B,cAAI,mBAAmB,eAAS;AAC9B,gBAAI,YAAY,QAAQ;AACxB,oBAAQ,SAAS,OAAO;AAAA,cACtB,OAAO,UAAU;AAAA,cACjB,GAAG,UAAU;AAAA,cACb,GAAG,UAAU;AAAA,cACb,OAAO,UAAU;AAAA,cACjB,QAAQ,UAAU;AAAA,YACpB,GAAG,WAAW,CAAC;AAAA,UACjB,OAAO;AACL,oBAAQ,SAAS,WAAW;AAC5B,oBAAQ,SAAS,aAAa,QAAQ,SAAS,WAAW;AAAA,UAC5D;AAEA,kBAAQ,SAAS,UAAU,SAAS,CAAC,WAAW,WAAW,CAAC,EAAE,aAAa,CAAC;AAE5E,cAAI,QAAQ,MAAM,SAAS,QAAQ;AACjC,oBAAQ,SAAS,QAAQ,SAAS,UAAU,KAAK,IAAI,UAAU,GAAG,GAAG,aAAa,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,CAAC;AAAA,UAClG;AAEA,kBAAQ,iBAAiB;AACzB,mCAAyB,SAAS,SAAS;AAC3C,8BAAoB,SAAS,OAAO,WAAW,gBAAgB;AAAA,QACjE;AAEA,YAAI,cAAc;AAChB,cAAI,WAAW,aAAa;AAC5B,mBAAS,SAAS,KAAK,cAAc,KAAK,OAAO,CAAC;AAClD,mBAAS,SAAS,UAAU,SAAS,CAAC,YAAY,WAAW,CAAC,EAAE,aAAa,CAAC;AAC9E,mBAAS,iBAAiB;AAC1B,mCAAyB,UAAU,SAAS;AAC5C,8BAAoB,UAAU,OAAO,WAAW,gBAAgB;AAAA,QAClE;AAAA,MACF,CAAC;AACD,WAAK,eAAe;AAAA,IACtB;AAAA,EACF;AAEA,EAAAJ,WAAU,UAAU,gBAAgB,SAAU,aAAa,SAAS;AAClE,QAAI,cAAc,YAAY,SAAS,QAAQ;AAC/C,QAAI,aAAa,YAAY,IAAI,MAAM;AAEvC,QAAI,YAAY;AACd,UAAI,aAAa,YAAY,IAAI,MAAM;AACvC,UAAI,aAAa,YAAY,IAAI,MAAM;AACvC,UAAI,eAAe,YAAY,IAAI,cAAc;AACjD,UAAI,mBAAmB,YAAY,IAAI,YAAY;AACnD,UAAI,SAAS,aAAa,YAAY,QAAQ,KAAK,aAAa,IAAID,cAAa,aAAa,IAAI,QAAQ,CAAC,GAAG,QAAQ,KAAK,aAAa,IAAIA,cAAa,aAAa,IAAI,QAAQ,CAAC,GAAG,YAAY,YAAY,MAAM,gBAAgB;AACpO,aAAO,KAAK,YAAY,IAAI,WAAW,IAAI,IAAI;AAC/C,aAAO,SAAS,YAAY,SAAS,WAAW,EAAE,aAAa,CAAC;AAChE,WAAK,MAAM,IAAI,MAAM;AAAA,IACvB;AAAA,EACF;AAEA,EAAAC,WAAU,UAAU,wBAAwB,SAAU,aAAa,SAAS,KAAK,UAAU,SAAS;AAClG,QAAI,QAAQ;AAEZ,QAAI,OAAO,YAAY,QAAQ;AAC/B,QAAI,WAAW,KAAK,aAAa,OAAO;AACxC,QAAI,SAAS,CAAC,YAAY,IAAI,KAAK;AACnC,QAAI,SAAS,CAAC,YAAY,IAAI,KAAK;AACnC,QAAI,eAAe,IAAY,cAAM;AACrC,QAAI,cAAc,CAAC;AACnB,QAAI,eAAe,CAAC;AACpB,QAAI,eAAe,YAAY,mBAAmB;AAClD,QAAI,mBAAmB,YAAY,IAAI,CAAC,WAAW,WAAW,CAAC;AAC/D,SAAK,KAAK,KAAK,KAAK,EAAE,IAAI,SAAU,KAAK;AACvC,kBAAY,OAAO,IAAY,aAAK;AAAA,QAClC,QAAQ;AAAA,MACV,CAAC;AACD,mBAAa,OAAO,IAAY,aAAK;AAAA,QACnC,QAAQ;AAAA,MACV,CAAC;AAAA,IACH,CAAC,EAAE,OAAO,SAAU,KAAK,QAAQ;AAC/B,kBAAY,OAAO,MAAM,UAAU;AACnC,mBAAa,OAAO,MAAM,WAAW;AAAA,IACvC,CAAC,EAAE,QAAQ;AACX,SAAK,KAAK,SAAU,KAAK;AACvB,UAAI,YAAY,KAAK,aAAa,GAAG;AACrC,UAAI,QAAQ,KAAK,IAAI,UAAU,GAAG;AAClC,UAAI,YAAY,IAAY,cAAM;AAClC,UAAI,YAAY,SAAS,UAAU,OAAO,CAAC,QAAQ,MAAM,GAAG,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC;AACzE,UAAI,iBAAiB,UAAU,SAAS,OAAO;AAE/C,UAAI,eAAe,IAAI,MAAM,GAAG;AAC9B,YAAI,oBAAoB,eAAe,IAAI,cAAc;AACzD,YAAI,SAAS,QAAQ,KAAKD,cAAa,kBAAkB,IAAI,QAAQ,CAAC;AACtE,YAAI,SAAS,QAAQ,KAAKA,cAAa,kBAAkB,IAAI,QAAQ,CAAC;AACtE,YAAI,UAAU,YAAY;AAC1B,gBAAQ,KAAK;AAAA,UACX,IAAI,mBAAmB,IAAI;AAAA,UAC3B,OAAO,gBAAgB,gBAAgB;AAAA,YACrC,GAAG;AAAA,YACH,GAAG;AAAA,YACH,MAAM,KAAK,QAAQ,GAAG;AAAA,YACtB,OAAO;AAAA,YACP,eAAe;AAAA,UACjB,GAAG;AAAA,YACD,cAAc;AAAA,UAChB,CAAC;AAAA,QACH,CAAC;AACD,kBAAU,IAAI,OAAO;AAAA,MACvB;AAEA,UAAI,kBAAkB,UAAU,SAAS,QAAQ;AAEjD,UAAI,gBAAgB,IAAI,MAAM,GAAG;AAC/B,YAAI,qBAAqB,gBAAgB,IAAI,cAAc;AAC3D,YAAI,UAAU,QAAQ,KAAKA,cAAa,mBAAmB,IAAI,QAAQ,CAAC;AACxE,YAAI,UAAU,QAAQ,KAAKA,cAAa,mBAAmB,IAAI,QAAQ,CAAC;AACxE,YAAI,QAAQA,cAAa,gBAAgB,IAAI,OAAO,GAAG,QAAQ,CAAC;AAChE,YAAI,SAASA,cAAa,gBAAgB,IAAI,QAAQ,GAAG,QAAQ,CAAC;AAClE,YAAI,cAAc,YAAY,IAAI,CAAC,YAAY,MAAM,CAAC,IAAI,KAAK,cAAc,KAAK,OAAO,EAAE,OAAO;AAClG,YAAI,UAAU,aAAa;AAC3B,YAAI,cAAc,gBAAgB,IAAI,WAAW;AACjD,gBAAQ,KAAK;AAAA,UACX,IAAI,mBAAmB,IAAI;AAAA,UAC3B,OAAO,gBAAgB,iBAAiB;AAAA,YACtC,GAAG;AAAA,YACH,GAAG;AAAA,YACH,MAAM,YAAY,OAAO,WAAW;AAAA,YACpC,OAAO,MAAM,KAAK,IAAI,OAAO;AAAA,YAC7B,QAAQ,MAAM,MAAM,IAAI,OAAO;AAAA,YAC/B,OAAO;AAAA,YACP,eAAe;AAAA,UACjB,GAAG;AAAA,YACD,cAAc;AAAA,UAChB,CAAC;AAAA,QACH,CAAC;AACD,+BAAuB,SAAS;AAAA,UAC9B,QAAQ;AAAA,QACV,GAAG,OAAO,SAAUM,QAAO;AACzB,iBAAO,YAAYA,QAAO,WAAW;AAAA,QACvC,CAAC;AACD,wBAAgB,kBAAkB,SAAS,KAAK,MAAM,aAAa;AAAA,UACjE,mBAAmB,SAAU,gBAAgB,QAAQ,UAAU,eAAe,KAAK,cAAc;AAC/F,mBAAO,YAAY,eAAe,aAAa,oBAAoB,OAAO,WAAW;AAAA,UACvF;AAAA,QACF,CAAC;AACD,kBAAU,IAAI,OAAO;AAAA,MACvB;AAEA,mBAAa,IAAI,SAAS;AAAA,IAC5B,CAAC;AACD,SAAK,MAAM,IAAI,YAAY;AAC3B,SAAK,YAAY;AACjB,SAAK,aAAa;AAAA,EACpB;AAEA,EAAAL,WAAU,OAAO;AACjB,SAAOA;AACT,EAAE,aAAS;AAEX,IAAO,oBAAQ;;;AC7jBf,IAAI,mBAEJ,SAAU,QAAQ;AAChB,YAAUM,mBAAkB,MAAM;AAElC,WAASA,oBAAmB;AAC1B,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,kBAAiB;AAC9B,UAAM,wBAAwB;AAC9B,WAAO;AAAA,EACT;AAEA,EAAAA,kBAAiB,UAAU,iBAAiB,SAAU,QAAQ,SAAS;AACrE,WAAO,uBAAuB,MAAM,CAAC,OAAO,CAAC;AAAA,EAC/C;AAEA,EAAAA,kBAAiB,OAAO;AACxB,EAAAA,kBAAiB,gBAAgB;AAAA,IAE/B,GAAG;AAAA,IACH,SAAS;AAAA,IAET,QAAQ,CAAC,OAAO,KAAK;AAAA,IACrB,iBAAiB;AAAA,IACjB,QAAQ;AAAA,IACR,YAAY;AAAA,IACZ,UAAU;AAAA,IACV,WAAW;AAAA,IAEX,KAAK;AAAA,IAEL,KAAK;AAAA,IAEL,aAAa;AAAA,IAEb,UAAU;AAAA,MAER,MAAM;AAAA,MACN,UAAU;AAAA,MACV,WAAW;AAAA,QACT,OAAO,CAAC,CAAC,GAAG,SAAS,CAAC;AAAA,QACtB,OAAO;AAAA,MACT;AAAA,IACF;AAAA,IAEA,UAAU;AAAA,MAER,MAAM;AAAA,MACN,SAAS;AAAA,MACT,OAAO;AAAA,MACP,UAAU;AAAA,MACV,MAAM;AAAA,IACR;AAAA,IAEA,WAAW;AAAA,MAET,MAAM;AAAA,MAEN,QAAQ;AAAA,MACR,UAAU;AAAA,MAEV,WAAW;AAAA,QACT,OAAO;AAAA,QACP,OAAO;AAAA,QACP,MAAM;AAAA,MACR;AAAA,IACF;AAAA,IAEA,UAAU;AAAA,MAER,MAAM;AAAA,MAEN,aAAa;AAAA,MAEb,QAAQ;AAAA,MACR,UAAU;AAAA,MAEV,WAAW;AAAA,QACT,OAAO;AAAA,QACP,OAAO;AAAA,QACP,MAAM;AAAA,MACR;AAAA,IACF;AAAA,IACA,WAAW;AAAA,MACT,MAAM;AAAA,MACN,UAAU;AAAA,MAEV,OAAO;AAAA,MACP,UAAU;AAAA,MACV,QAAQ;AAAA,IACV;AAAA,IACA,SAAS;AAAA,MACP,MAAM;AAAA,MACN,cAAc,CAAC,GAAG,CAAC;AAAA,MACnB,MAAM;AAAA,MACN,WAAW;AAAA,MACX,QAAQ;AAAA,MACR,OAAO;AAAA,MACP,YAAY;AAAA,IACd;AAAA,IACA,QAAQ;AAAA,MACN,MAAM;AAAA,MACN,WAAW;AAAA,MACX,MAAM;AAAA,MACN,MAAM;AAAA,MACN,cAAc,CAAC,GAAG,CAAC;AAAA,MACnB,YAAY;AAAA,MACZ,WAAW;AAAA,QACT,OAAO;AAAA,QACP,aAAa;AAAA,QACb,aAAa;AAAA,MACf;AAAA,IACF;AAAA,IACA,OAAO;AAAA,MACL,MAAM;AAAA,MAEN,cAAc,CAAC,GAAG,KAAK;AAAA,MAEvB,OAAO;AAAA,MACP,UAAU;AAAA,MACV,gBAAgB;AAAA,IAClB;AAAA,IACA,QAAQ;AAAA,MACN,MAAM;AAAA,MACN,iBAAiB;AAAA,MACjB,aAAa;AAAA,MACb,aAAa;AAAA,MACb,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,SAAS,CAAC,GAAG,EAAE;AAAA,MAEf,cAAc,CAAC,GAAG,KAAK;AAAA,MAGvB,OAAO;AAAA,MACP,UAAU;AAAA,MACV,YAAY;AAAA,MACZ,YAAY;AAAA,MACZ,gBAAgB;AAAA,IAClB;AAAA,EACF;AACA,SAAOA;AACT,EAAE,cAAW;AAEb,IAAO,sBAAQ;;;ACnJR,SAASC,UAAQ,WAAW;AACjC,YAAU,kBAAkB,iBAAS;AACrC,YAAU,oBAAoB,mBAAgB;AAChD;;;ACEA,IAAI,oBAAoB,CAAC,aAAa,SAAS;AAK/C,IAAI,cAEJ,SAAU,QAAQ;AAChB,YAAUC,cAAa,MAAM;AAE7B,WAASA,aAAY,MAAM,KAAK;AAC9B,QAAI,QAAQ,OAAO,KAAK,IAAI,KAAK;AAEjC,QAAI,UAAU;AACd,QAAI,YAAY,IAAY,iBAAS;AACrC,QAAI,OAAO,IAAY,aAAK;AAC5B,YAAQ,eAAe,IAAI;AAE3B,UAAM,iBAAiB,SAAS;AAEhC,UAAM,WAAW,MAAM,KAAK,IAAI;AAEhC,WAAO;AAAA,EACT;AAEA,EAAAA,aAAY,UAAU,aAAa,SAAU,MAAM,KAAK,aAAa;AACnE,QAAI,UAAU;AACd,QAAI,cAAc,KAAK;AACvB,QAAI,YAAY,KAAK,aAAa,GAAG;AACrC,QAAIC,UAAS,KAAK,cAAc,GAAG;AACnC,QAAI,gBAAgB,UAAU,SAAS,UAAU;AACjD,QAAI,UAAU,UAAU,IAAI,iBAAiB;AAC7C,cAAU,WAAW,OAAO,IAAI;AAEhC,QAAI,CAAC,aAAa;AAChB,mBAAa,OAAO;AAAA,IACtB;AAGA,YAAQ,SAAS,KAAK,cAAc,KAAK,OAAO,CAAC;AACjD,YAAQ,MAAM,WAAW;AAEzB,QAAI,aAAa;AACf,cAAQ,SAAS;AAAA,QACf,QAAQA,QAAO;AAAA,MACjB,CAAC;AACD,cAAQ,MAAM,UAAU;AACxB,MAAQ,UAAU,SAAS;AAAA,QACzB,OAAO;AAAA,UACL;AAAA,QACF;AAAA,MACF,GAAG,aAAa,GAAG;AAAA,IACrB,OAAO;AACL,MAAQ,YAAY,SAAS;AAAA,QAC3B,OAAO;AAAA,UACL;AAAA,QACF;AAAA,QACA,OAAO;AAAA,UACL,QAAQA,QAAO;AAAA,QACjB;AAAA,MACF,GAAG,aAAa,GAAG;AAAA,IACrB;AAEA,6BAAyB,SAAS,SAAS;AAE3C,SAAK,aAAa,MAAM,GAAG;AAE3B,wBAAoB,MAAM,cAAc,IAAI,OAAO,GAAG,cAAc,IAAI,WAAW,GAAG,cAAc,IAAI,UAAU,CAAC;AAAA,EACrH;AAEA,EAAAD,aAAY,UAAU,eAAe,SAAU,MAAM,KAAK;AACxD,QAAI,UAAU;AACd,QAAI,YAAY,KAAK,iBAAiB;AACtC,QAAI,YAAY,QAAQ,eAAe;AACvC,QAAI,cAAc,KAAK;AACvB,QAAI,YAAY,KAAK,aAAa,GAAG;AACrC,QAAIC,UAAS,KAAK,cAAc,GAAG;AACnC,QAAIC,eAAcD,QAAO;AACzB,QAAI,QAAQ,KAAK,cAAc,KAAK,OAAO;AAC3C,QAAI,cAAc,MAAM;AACxB;AAAA,MACA;AAAA,MAAW,qBAAqB,SAAS;AAAA,MAAG;AAAA,QAC1C,cAAc,KAAK;AAAA,QACnB,gBAAgB;AAAA,QAChB,gBAAgB,MAAM;AAAA,QACtB,aAAa,KAAK,QAAQ,GAAG;AAAA,MAC/B;AAAA,MAAG;AAAA,QACD,QAAQ;AAAA,UACN,OAAOC,aAAY;AAAA,UACnB,eAAeA,aAAY;AAAA,QAC7B;AAAA,MACF;AAAA,IAAC;AACD,YAAQ,cAAc;AAAA,MACpB,OAAO;AAAA,MACP,QAAQ,CAAC,CAACA,aAAY;AAAA,MACtB,cAAc;AAAA,MAEd,aAAa;AAAA,IACf,CAAC;AACD,QAAI,aAAaA,aAAY;AAC7B,cAAU,SAAS;AAAA,MACjB,QAAQ;AAAA,IACV,CAAC;AACD,YAAQ,sBAAsB;AAAA,MAC5B,QAAQ,aAAa,IAAY,cAAM,WAAW,GAAG,IAAI,WAAW,GAAG,EAAE,IAAI;AAAA,IAC/E;AAGA,IAAQ,YAAY,WAAW;AAAA,MAC7B,OAAO;AAAA,QACL,GAAGA,aAAY;AAAA,QACf,GAAGA,aAAY;AAAA,MACjB;AAAA,IACF,GAAG,aAAa,GAAG;AACnB,cAAU,KAAK;AAAA,MACb,UAAUA,aAAY;AAAA,MACtB,SAASA,aAAY;AAAA,MACrB,SAASA,aAAY;AAAA,MACrB,IAAI;AAAA,IACN,CAAC;AACD,sBAAkB,SAAS,yBAAyB,SAAS,GAAG;AAAA,MAE9D,QAAQ;AAAA,IACV,CAAC;AAAA,EACH;AAEA,SAAOF;AACT,EAAU,eAAO;AAEjB,IAAI,aAEJ,SAAU,QAAQ;AAChB,YAAUG,aAAY,MAAM;AAE5B,WAASA,cAAa;AACpB,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,YAAW;AACxB,UAAM,wBAAwB;AAC9B,WAAO;AAAA,EACT;AAEA,EAAAA,YAAW,UAAU,SAAS,SAAU,aAAa,SAAS,KAAK;AACjE,QAAI,OAAO,YAAY,QAAQ;AAC/B,QAAI,UAAU,KAAK;AACnB,QAAI,QAAQ,KAAK;AACjB,SAAK,KAAK,OAAO,EAAE,IAAI,SAAU,KAAK;AACpC,UAAI,cAAc,IAAI,YAAY,MAAM,GAAG;AAC3C,WAAK,iBAAiB,KAAK,WAAW;AACtC,YAAM,IAAI,WAAW;AAAA,IACvB,CAAC,EAAE,OAAO,SAAU,QAAQ,QAAQ;AAClC,UAAI,QAAQ,QAAQ,iBAAiB,MAAM;AAC3C,YAAM,WAAW,MAAM,MAAM;AAC7B,YAAM,IAAI,KAAK;AACf,WAAK,iBAAiB,QAAQ,KAAK;AAAA,IACrC,CAAC,EAAE,OAAO,SAAU,KAAK;AACvB,UAAI,QAAQ,QAAQ,iBAAiB,GAAG;AACxC,MAAQ,yBAAyB,OAAO,aAAa,GAAG;AAAA,IAC1D,CAAC,EAAE,QAAQ;AACX,SAAK,QAAQ;AAAA,EACf;AAEA,EAAAA,YAAW,UAAU,SAAS,WAAY;AACxC,SAAK,MAAM,UAAU;AACrB,SAAK,QAAQ;AAAA,EACf;AAEA,EAAAA,YAAW,UAAU,UAAU,WAAY;AAAA,EAAC;AAE5C,EAAAA,YAAW,OAAO;AAClB,SAAOA;AACT,EAAE,aAAS;AAEX,IAAO,qBAAQ;;;AC5Kf,IAAI,oBAEJ,SAAU,QAAQ;AAChB,YAAUC,oBAAmB,MAAM;AAEnC,WAASA,qBAAoB;AAC3B,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,mBAAkB;AAC/B,WAAO;AAAA,EACT;AAEA,EAAAA,mBAAkB,UAAU,OAAO,SAAU,QAAQ;AACnD,WAAO,UAAU,KAAK,MAAM,MAAM,SAAS;AAI3C,SAAK,uBAAuB,IAAI,6BAA4B,KAAK,KAAK,SAAS,IAAI,GAAU,KAAK,KAAK,YAAY,IAAI,CAAC;AAExH,SAAK,kBAAkB,MAAM;AAAA,EAC/B;AAEA,EAAAA,mBAAkB,UAAU,iBAAiB,SAAU,QAAQ,SAAS;AACtE,WAAO,uBAAuB,MAAM;AAAA,MAClC,iBAAiB,CAAC,OAAO;AAAA,MACzB,iBAAwB,MAAM,8BAA8B,IAAI;AAAA,IAClE,CAAC;AAAA,EACH;AAEA,EAAAA,mBAAkB,UAAU,oBAAoB,SAAU,QAAQ;AAEhE,oBAAgB,QAAQ,aAAa,CAAC,MAAM,CAAC;AAC7C,QAAI,qBAAqB,OAAO;AAChC,QAAI,uBAAuB,OAAO,SAAS;AAE3C,uBAAmB,OAAO,mBAAmB,QAAQ,OAAO,MAAM;AAClE,yBAAqB,OAAO,qBAAqB,QAAQ,OAAO,SAAS,MAAM;AAAA,EACjF;AAGA,EAAAA,mBAAkB,UAAU,gBAAgB,SAAU,WAAW;AAC/D,QAAI,OAAO,KAAK,QAAQ;AAExB,QAAI,SAAS,OAAO,UAAU,cAAc,KAAK,MAAM,SAAS;AAEhE,QAAI,WAAW,KAAK,aAAa,OAAO;AACxC,QAAIC,OAAM,KAAK,OAAO,QAAQ;AAE9B,WAAO,UAAU,CAACA,OAAM,IAAI,EAAE,KAAK,IAAI,UAAU,SAAS,IAAIA,OAAM,KAAK,QAAQ,CAAC;AAClF,WAAO,MAAM,KAAK,SAAS;AAC3B,WAAO;AAAA,EACT;AAEA,EAAAD,mBAAkB,OAAO;AACzB,EAAAA,mBAAkB,gBAAgB;AAAA,IAEhC,GAAG;AAAA,IACH,iBAAiB;AAAA,IACjB,SAAS;AAAA,IACT,MAAM;AAAA,IACN,KAAK;AAAA,IACL,OAAO;AAAA,IACP,QAAQ;AAAA,IAMR,SAAS;AAAA,IACT,SAAS;AAAA,IACT,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,KAAK;AAAA,IACL,aAAa;AAAA,IACb,OAAO;AAAA,MACL,MAAM;AAAA,MACN,UAAU;AAAA,IAEZ;AAAA,IACA,WAAW;AAAA,MACT,MAAM;AAAA,MACN,QAAQ;AAAA,MACR,WAAW;AAAA,QAET,OAAO;AAAA,MACT;AAAA,IACF;AAAA,IACA,WAAW;AAAA,MAET,aAAa;AAAA,MACb,aAAa;AAAA,IACf;AAAA,IACA,UAAU;AAAA,MACR,OAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AAAA,IACA,QAAQ;AAAA,MACN,WAAW;AAAA,QACT,aAAa;AAAA,MACf;AAAA,IACF;AAAA,EACF;AACA,SAAOA;AACT,EAAE,cAAW;AAEb,IAAO,uBAAQ;;;AC9Gf,SAASE,aAAY,aAAa,KAAK;AACrC,SAAc,cAAc,YAAY,mBAAmB,GAAG;AAAA,IAC5D,OAAO,IAAI,SAAS;AAAA,IACpB,QAAQ,IAAI,UAAU;AAAA,EACxB,CAAC;AACH;AAEA,SAAS,iBAAiB,MAAMC,OAAM;AACpC,MAAI,WAAW,KAAK,aAAa,OAAO;AACxC,MAAI,WAAW,KAAK,SAAS,UAAU,SAAU,KAAK;AACpD,WAAO;AAAA,EACT,CAAC;AACD,MAAI,UAAU,CAAC;AACf,MAAI,cAAcA,UAAS;AAE3B,WAAS,IAAI,GAAGC,OAAM,KAAK,MAAM,GAAG,IAAIA,MAAK,KAAK;AAChD,YAAQ,KAAK;AAAA,EACf;AAGA,MAAI,WAAWD,KAAI,GAAG;AACpB,YAAQ,KAAKA,KAAI;AAAA,EACnB,WAAWA,UAAS,QAAQ;AAC1B,YAAQ,KAAK,SAAU,GAAG,GAAG;AAC3B,aAAO,cAAc,SAAS,KAAK,SAAS,KAAK,SAAS,KAAK,SAAS;AAAA,IAC1E,CAAC;AAAA,EACH;AAEA,SAAO;AACT;AAEA,SAAS,YAAY,MAAM;AACzB,MAAI,cAAc,KAAK;AACvB,MAAI,SAAS,YAAY,IAAI,QAAQ;AACrC,OAAK,KAAK,SAAU,KAAK;AACvB,QAAI,YAAY,KAAK,aAAa,GAAG;AACrC,QAAI,aAAa,UAAU,SAAS,OAAO;AAC3C,QAAI,gBAAgB,WAAW,IAAI,UAAU;AAC7C,QAAI,iBAAiB,UAAU,SAAS,WAAW;AACnD,QAAIE,UAAS,KAAK,cAAc,GAAG;AACnC,QAAI,SAASA,QAAO;AACpB,QAAI,gBAAgB,kBAAkB,WAAW,kBAAkB,YAAY,kBAAkB,YAAY,kBAAkB,gBAAgB,kBAAkB;AACjK,QAAI;AACJ,QAAI;AACJ,QAAI;AACJ,QAAI;AAEJ,QAAI,eAAe;AACjB,UAAI,kBAAkB,cAAc;AAClC,iBAAS,OAAO,GAAG,KAAK,OAAO,GAAG,MAAM,IAAI;AAC5C,iBAAS,OAAO,GAAG,KAAK,OAAO,GAAG,MAAM;AACxC,oBAAY;AAAA,MACd,WAAW,kBAAkB,eAAe;AAC1C,iBAAS,OAAO,GAAG,KAAK,OAAO,GAAG,MAAM,IAAI;AAC5C,iBAAS,OAAO,GAAG,KAAK,OAAO,GAAG,MAAM;AACxC,oBAAY;AAAA,MACd,OAAO;AACL,iBAAS,OAAO,GAAG,KAAK,OAAO,GAAG,KAAK,OAAO,GAAG,KAAK,OAAO,GAAG,MAAM;AACtE,iBAAS,OAAO,GAAG,KAAK,OAAO,GAAG,KAAK,OAAO,GAAG,KAAK,OAAO,GAAG,MAAM;AACtE,oBAAY;AAAA,MACd;AAEA,mBAAa,CAAC,CAAC,OAAO,KAAK,GAAG,CAAC,OAAO,KAAK,CAAC;AAAA,IAC9C,OAAO;AACL,UAAI,KAAK;AACT,UAAI,KAAK;AACT,UAAI,KAAK;AACT,UAAI,KAAK;AACT,UAAI,eAAe,eAAe,IAAI,QAAQ;AAE9C,UAAI,MAAuC;AACzC,YAAI,WAAW,cAAc,CAAC,OAAO,QAAQ,EAAE,QAAQ,aAAa,IAAI,IAAI;AAC1E,0BAAgB;AAChB,kBAAQ,KAAK,kFAAkF;AAAA,QACjG;AAEA,YAAI,WAAW,gBAAgB,CAAC,QAAQ,OAAO,EAAE,QAAQ,aAAa,IAAI,IAAI;AAC5E,0BAAgB;AAChB,kBAAQ,KAAK,oFAAoF;AAAA,QACnG;AAAA,MACF;AAEA,UAAI,kBAAkB,QAAQ;AAE5B,cAAM,OAAO,GAAG,KAAK,OAAO,GAAG,MAAM;AACrC,cAAM,OAAO,GAAG,KAAK,OAAO,GAAG,MAAM;AACrC,aAAK,KAAK;AACV,gBAAQ,KAAK;AACb,oBAAY;AAAA,MACd,WAAW,kBAAkB,SAAS;AAEpC,cAAM,OAAO,GAAG,KAAK,OAAO,GAAG,MAAM;AACrC,cAAM,OAAO,GAAG,KAAK,OAAO,GAAG,MAAM;AACrC,aAAK,KAAK;AACV,gBAAQ,KAAK;AACb,oBAAY;AAAA,MACd,WAAW,kBAAkB,OAAO;AAElC,cAAM,OAAO,GAAG,KAAK,OAAO,GAAG,MAAM;AACrC,cAAM,OAAO,GAAG,KAAK,OAAO,GAAG,MAAM;AACrC,aAAK,KAAK;AACV,gBAAQ,KAAK;AACb,oBAAY;AAAA,MACd,WAAW,kBAAkB,UAAU;AAErC,cAAM,OAAO,GAAG,KAAK,OAAO,GAAG,MAAM;AACrC,cAAM,OAAO,GAAG,KAAK,OAAO,GAAG,MAAM;AACrC,aAAK,KAAK;AACV,gBAAQ,KAAK;AACb,oBAAY;AAAA,MACd,WAAW,kBAAkB,YAAY;AAEvC,aAAK,WAAW,eAAe,OAAO,GAAG,KAAK,OAAO,GAAG;AACxD,aAAK,WAAW,eAAe,OAAO,GAAG,KAAK,OAAO,GAAG;AAExD,YAAI,WAAW,cAAc;AAC3B,eAAK,KAAK;AACV,kBAAQ,KAAK;AACb,sBAAY;AAAA,QACd,OAAO;AACL,eAAK,KAAK;AACV,kBAAQ,KAAK;AACb,sBAAY;AAAA,QACd;AAAA,MACF,WAAW,kBAAkB,eAAe;AAE1C,aAAK,OAAO,GAAG;AACf,aAAK,OAAO,GAAG;AAEf,YAAI,WAAW,cAAc;AAC3B,eAAK,KAAK;AACV,kBAAQ,KAAK;AACb,sBAAY;AAAA,QACd,OAAO;AACL,eAAK,KAAK;AACV,kBAAQ,KAAK;AACb,sBAAY;AAAA,QACd;AAAA,MACF,WAAW,kBAAkB,WAAW;AAEtC,aAAK,OAAO,GAAG;AACf,aAAK,WAAW,eAAe,OAAO,GAAG,KAAK,OAAO,GAAG;AAExD,YAAI,WAAW,cAAc;AAC3B,eAAK,KAAK;AACV,kBAAQ,KAAK;AACb,sBAAY;AAAA,QACd,OAAO;AACL,eAAK,KAAK;AACV,kBAAQ,KAAK;AACb,sBAAY;AAAA,QACd;AAAA,MACF,WAAW,kBAAkB,cAAc;AAEzC,aAAK,WAAW,eAAe,OAAO,GAAG,KAAK,OAAO,GAAG;AACxD,aAAK,WAAW,eAAe,OAAO,GAAG,KAAK,OAAO,GAAG;AAExD,YAAI,WAAW,cAAc;AAC3B,eAAK,KAAK;AACV,kBAAQ,KAAK;AACb,sBAAY;AAAA,QACd,OAAO;AACL,eAAK,KAAK;AACV,kBAAQ,KAAK;AACb,sBAAY;AAAA,QACd;AAAA,MACF,OAAO;AAEL,cAAM,OAAO,GAAG,KAAK,OAAO,GAAG,MAAM;AACrC,cAAM,OAAO,GAAG,KAAK,OAAO,GAAG,MAAM;AAErC,YAAI,WAAW,cAAc;AAC3B,eAAK,KAAK;AACV,kBAAQ,KAAK;AACb,sBAAY;AAAA,QACd,OAAO;AACL,eAAK,KAAK;AACV,kBAAQ,KAAK;AACb,sBAAY;AAAA,QACd;AAAA,MACF;AAEA,UAAI,WAAW,cAAc;AAC3B,aAAK;AACL,gBAAQ;AAAA,MACV,OAAO;AACL,aAAK;AACL,gBAAQ;AAAA,MACV;AAEA,mBAAa,CAAC,CAAC,IAAI,EAAE,GAAG,CAAC,IAAI,EAAE,CAAC;AAAA,IAClC;AAEA,IAAAA,QAAO,QAAQ;AAAA,MACb;AAAA,MACA,GAAG;AAAA,MACH,GAAG;AAAA,MACH,eAAe;AAAA,MACf;AAAA,MACA,QAAQ;AAAA,IACV;AAAA,EACF,CAAC;AACH;AAEe,SAAR,aAA8B,SAAS,KAAK;AACjD,UAAQ,iBAAiB,UAAU,SAAU,aAAa;AACxD,QAAI,OAAO,YAAY,QAAQ;AAC/B,QAAI,WAAW,KAAK,aAAa,OAAO;AACxC,QAAIF,QAAO,YAAY,IAAI,MAAM;AACjC,QAAI,WAAWD,aAAY,aAAa,GAAG;AAC3C,QAAI,SAAS,YAAY,IAAI,QAAQ;AACrC,QAAI,YAAY,SAAS;AACzB,QAAI,aAAa,SAAS;AAC1B,QAAI,UAAU,iBAAiB,MAAMC,KAAI;AACzC,QAAI,IAAI,SAAS;AACjB,QAAI,IAAI,SAAS;AACjB,QAAI,aAAa,WAAW,eAAe,CAACG,cAAa,YAAY,IAAI,SAAS,GAAG,UAAU,GAAGA,cAAa,YAAY,IAAI,SAAS,GAAG,UAAU,CAAC,IAAI,CAACA,cAAa,YAAY,IAAI,SAAS,GAAG,SAAS,GAAGA,cAAa,YAAY,IAAI,SAAS,GAAG,SAAS,CAAC;AACnQ,QAAI,aAAa,KAAK,cAAc,QAAQ;AAC5C,QAAI,MAAM,YAAY,IAAI,KAAK;AAC/B,QAAI,MAAM,YAAY,IAAI,KAAK;AAE/B,QAAI,OAAO,MAAM;AACf,YAAM,KAAK,IAAI,WAAW,IAAI,CAAC;AAAA,IACjC;AAEA,QAAI,OAAO,MAAM;AACf,YAAM,WAAW;AAAA,IACnB;AAEA,QAAI,cAAc,YAAY,IAAI,aAAa;AAC/C,QAAI,MAAM,YAAY,IAAI,KAAK;AAC/B,QAAI,WAAW,WAAW,eAAe,YAAY;AACrD,QAAI,YAAY,WAAW,OAAO,KAAK,MAAM,IAAI,MAAM,KAAK,MAAM;AAElE,QAAI,gBAAgB,SAAUC,MAAK,QAAQ;AAEzC,UAAI,WAAW,cAAc;AAC3B,YAAI,QAAQ,KAAK,IAAI,UAAUA,IAAG,KAAK;AACvC,YAAI,aAAa,UAAU,OAAO,CAAC,KAAK,GAAG,GAAG,YAAY,IAAI;AAC9D,YAAI,KAAK;AAET,gBAAQ,aAAa;AAAA,UACnB,KAAK;AACH,iBAAK;AACL;AAAA,UAEF,KAAK;AACH,iBAAK,KAAK,aAAa,cAAc;AACrC;AAAA,UAEF,KAAK;AACH,iBAAK,KAAK,aAAa;AACvB;AAAA,QACJ;AAEA,eAAO,CAAC,CAAC,QAAQ,EAAE,GAAG,CAAC,QAAQ,KAAK,UAAU,CAAC;AAAA,MACjD;AAEA,UAAI,MAAM,KAAK,IAAI,UAAUA,IAAG,KAAK;AACrC,UAAI,YAAY,UAAU,KAAK,CAAC,KAAK,GAAG,GAAG,YAAY,IAAI;AAC3D,UAAI;AAEJ,cAAQ,aAAa;AAAA,QACnB,KAAK;AACH,eAAK;AACL;AAAA,QAEF,KAAK;AACH,eAAK,KAAK,YAAY,aAAa;AACnC;AAAA,QAEF,KAAK;AACH,eAAK,IAAI,YAAY;AACrB;AAAA,MACJ;AAEA,aAAO,CAAC,CAAC,IAAI,MAAM,GAAG,CAAC,KAAK,WAAW,MAAM,CAAC;AAAA,IAChD;AAEA,QAAIJ,UAAS,aAAa;AAExB,iBAAW,CAAC;AACZ,YAAM,CAAC;AAEP,UAAI,WAAW,cAAc;AAC3B,aAAK;AAAA,MACP,OAAO;AACL,aAAK;AAAA,MACP;AAEA,gBAAU,QAAQ,QAAQ;AAAA,IAC5B;AAEA,aAAS,IAAI,GAAG,IAAI,QAAQ,QAAQ,KAAK;AACvC,UAAI,MAAM,QAAQ;AAClB,UAAI,UAAU,QAAQ,IAAI;AAC1B,UAAI,YAAY,KAAK,aAAa,GAAG;AAErC,UAAI,WAAW,cAAc;AAC3B,YAAI,QAAQ,UAAU,IAAI,CAAC,aAAa,OAAO,CAAC;AAEhD,YAAI,SAAS,MAAM;AACjB,kBAAQ;AAAA,QACV,OAAO;AACL,kBAAQG,cAAa,OAAO,SAAS;AAErC,cAAIH,UAAS,aAAa;AACxB,oBAAQ,CAAC;AAAA,UACX;AAAA,QACF;AAEA,YAAI,QAAQ,cAAc,KAAK,CAAC;AAChC,YAAI,MAAM,cAAc,SAAS,IAAI,KAAK;AAC1C,aAAK,QAAQ;AACb,aAAK,cAAc,KAAK;AAAA,UACtB,QAAQ,MAAM,OAAO,IAAI,MAAM,EAAE,QAAQ,CAAC;AAAA,QAC5C,CAAC;AAAA,MACH,OAAO;AACL,YAAI,SAAS,UAAU,IAAI,CAAC,aAAa,QAAQ,CAAC;AAElD,YAAI,UAAU,MAAM;AAClB,mBAAS;AAAA,QACX,OAAO;AACL,mBAASG,cAAa,QAAQ,UAAU;AAExC,cAAIH,UAAS,aAAa;AACxB,qBAAS,CAAC;AAAA,UACZ;AAAA,QACF;AAEA,YAAI,QAAQ,cAAc,KAAK,CAAC;AAChC,YAAI,MAAM,cAAc,SAAS,IAAI,MAAM;AAC3C,aAAK,SAAS;AACd,aAAK,cAAc,KAAK;AAAA,UACtB,QAAQ,MAAM,OAAO,IAAI,MAAM,EAAE,QAAQ,CAAC;AAAA,QAC5C,CAAC;AAAA,MACH;AAAA,IACF;AAEA,gBAAY,IAAI;AAAA,EAClB,CAAC;AACH;;;ACrVO,SAASK,UAAQ,WAAW;AACjC,YAAU,kBAAkB,kBAAU;AACtC,YAAU,oBAAoB,oBAAiB;AAC/C,YAAU,eAAe,YAAY;AACrC,YAAU,kBAAkB,WAAW,QAAQ,CAAC;AAClD;;;ACFA,IAAI,iBAAiB;AAErB,IAAI,eAEJ,SAAU,QAAQ;AAChB,YAAUC,eAAc,MAAM;AAE9B,WAASA,gBAAe;AACtB,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,cAAa;AAC1B,UAAM,aAAa,IAAY,cAAM;AACrC,UAAM,eAAe;AACrB,WAAO;AAAA,EACT;AAEA,EAAAA,cAAa,UAAU,OAAO,WAAY;AACxC,SAAK,MAAM,IAAI,KAAK,UAAU;AAAA,EAChC;AAMA,EAAAA,cAAa,UAAU,SAAS,SAAU,aAAa,SAAS,KAAK,SAAS;AAE5E,SAAK,kBAAkB;AACvB,QAAI,YAAY,KAAK;AACrB,QAAI,OAAO,YAAY,QAAQ;AAC/B,QAAI,UAAU,KAAK;AACnB,QAAI,WAAW,YAAY;AAC3B,QAAI,aAAa,SAAS;AAC1B,QAAI,cAAc,gBAAgB,WAAW;AAC7C,SAAK,KAAK,OAAO,EAAE,IAAI,GAAG,EAAE,OAAO,MAAM,EAAE,OAAO,MAAM,EAAE,QAAQ;AAElE,aAAS,IAAI,cAAc;AACzB,UAAI,OAAO,MAAM,MAAM,WAAW,cAAc,YAAY,QAAQ;AACpE,qBAAe,MAAM,MAAM,cAAc,WAAW;AAAA,IACtD;AAEA,aAAS,OAAO,cAAc,cAAc;AAC1C,UAAI,OAAO,QAAQ,iBAAiB,YAAY;AAChD,UAAI,SAAS,iBAAiB,MAAM,cAAc,YAAY,QAAQ;AACtE,WAAK,iBAAiB,cAAc,IAAI;AACxC,MAAQ,YAAY,MAAM;AAAA,QACxB,OAAO;AAAA,UACL;AAAA,QACF;AAAA,MACF,GAAG,aAAa,YAAY;AAC5B,mBAAa,IAAI;AACjB,qBAAe,MAAM,MAAM,cAAc,WAAW;AAAA,IACtD;AAEA,aAAS,OAAO,cAAc;AAC5B,UAAI,OAAO,QAAQ,iBAAiB,YAAY;AAChD,gBAAU,OAAO,IAAI;AAAA,IACvB;AAGA,QAAI,CAAC,KAAK,cAAc;AACtB,WAAK,eAAe;AACpB,UAAI,WAAW,oBAAoB,UAAU,aAAa,WAAY;AAEpE,mBAAW,WAAY;AACrB,oBAAU,eAAe;AAAA,QAC3B,CAAC;AAAA,MACH,CAAC;AACD,gBAAU,YAAY,QAAQ;AAAA,IAChC;AAEA,SAAK,QAAQ;AAAA,EACf;AAEA,EAAAA,cAAa,UAAU,2BAA2B,SAAU,aAAa,SAAS,KAAK;AACrF,SAAK,eAAe;AACpB,SAAK,QAAQ;AAEb,SAAK,WAAW,UAAU;AAAA,EAC5B;AAEA,EAAAA,cAAa,UAAU,oBAAoB,SAAU,YAAY,aAAa,SAAS;AACrF,QAAI,OAAO,YAAY,QAAQ;AAC/B,QAAI,WAAW,YAAY;AAC3B,QAAI,aAAa,SAAS;AAC1B,QAAI,cAAc,gBAAgB,WAAW;AAC7C,QAAI,iBAAiB,KAAK,kBAAkB,CAAC;AAE7C,aAAS,YAAY,WAAW,OAAO,YAAY,WAAW,KAAK,aAAa;AAC9E,UAAI,OAAO,MAAM,MAAM,KAAK,YAAY,WAAW,YAAY,QAAQ;AACvE,WAAK,cAAc;AACnB,qBAAe,MAAM,MAAM,WAAW,WAAW;AACjD,qBAAe,KAAK,IAAI;AAAA,IAC1B;AAAA,EACF;AAEA,EAAAA,cAAa,UAAU,SAAS,WAAY;AAC1C,SAAK,cAAc,KAAK,WAAW,UAAU;AAC7C,SAAK,QAAQ;AAAA,EACf;AAEA,EAAAA,cAAa,OAAO;AACpB,SAAOA;AACT,EAAE,aAAS;AAEX,SAAS,oBAAoB,UAAU,aAAa,IAAI;AACtD,MAAI,gBAAgB,SAAS;AAC7B,MAAI,OAAO,SAAS,QAAQ;AAC5B,MAAI,SAAS,IAAY,aAAK;AAAA,IAC5B,OAAO;AAAA,MACL,GAAG,KAAK;AAAA,MACR,GAAG,KAAK;AAAA,MACR,OAAO,KAAK;AAAA,MACZ,QAAQ,KAAK;AAAA,IACf;AAAA,EACF,CAAC;AACD,MAAI,MAAM,cAAc,IAAI,QAAQ,MAAM,eAAe,UAAU;AACnE,SAAO,SAAS,KAAK,CAAC;AACtB,EAAQ,UAAU,QAAQ;AAAA,IACxB,OAAO;AAAA,MACL,OAAO,KAAK;AAAA,MACZ,QAAQ,KAAK;AAAA,IACf;AAAA,EACF,GAAG,aAAa,EAAE;AAClB,SAAO;AACT;AAEA,SAAS,iBAAiB,MAAM,WAAW,YAAY,UAAU;AAC/D,MAAI,SAAS,CAAC;AAEd,WAAS,IAAI,GAAG,IAAI,WAAW,QAAQ,KAAK;AAC1C,QAAI,UAAU,WAAW;AACzB,QAAI,QAAQ,KAAK,IAAI,KAAK,aAAa,OAAO,GAAG,SAAS;AAE1D,QAAI,CAAC,aAAa,OAAO,SAAS,QAAQ,OAAO,EAAE,IAAI,GAAG;AACxD,aAAO,KAAK,SAAS,YAAY,OAAO,OAAO,CAAC;AAAA,IAClD;AAAA,EACF;AAEA,SAAO;AACT;AAEA,SAAS,MAAM,MAAM,WAAW,WAAW,YAAY,UAAU;AAC/D,MAAI,SAAS,iBAAiB,MAAM,WAAW,YAAY,QAAQ;AACnE,MAAI,OAAO,IAAY,iBAAS;AAAA,IAC9B,OAAO;AAAA,MACL;AAAA,IACF;AAAA,IAEA,IAAI;AAAA,EACN,CAAC;AACD,YAAU,IAAI,IAAI;AAClB,OAAK,iBAAiB,WAAW,IAAI;AACrC,SAAO;AACT;AAEA,SAAS,gBAAgB,aAAa;AACpC,MAAI,SAAS,YAAY,IAAI,UAAU,IAAI;AAC3C,aAAW,SAAS,SAAS;AAC7B,WAAS,gBAAgB,MAAM;AAC/B,QAAM,MAAM,MAAM,SAAS;AAC3B,SAAO;AAAA,IACL;AAAA,EACF;AACF;AAEA,SAAS,eAAe,IAAI,MAAM,WAAW,aAAa;AACxD,KAAG,SAAS,KAAK,cAAc,WAAW,OAAO,CAAC;AAClD,KAAG,MAAM,OAAO;AAChB,KAAG,SAAS,UAAU,YAAY,MAAM;AACxC,MAAI,YAAY,KAAK,aAAa,SAAS;AAC3C,MAAI,gBAAgB,UAAU,SAAS,UAAU;AACjD,2BAAyB,IAAI,WAAW,WAAW;AACnD,sBAAoB,IAAI,cAAc,IAAI,OAAO,GAAG,cAAc,IAAI,WAAW,GAAG,cAAc,IAAI,UAAU,CAAC;AACnH;AAqBA,SAAS,aAAa,KAAK,UAAU;AACnC,SAAO,aAAa,aAAa,OAAO,OAAO,OAAO,QAAQ,MAAM,GAAG;AACzE;AAEA,IAAO,uBAAQ;;;ACxMf,IAAI,sBAEJ,SAAU,QAAQ;AAChB,YAAUC,sBAAqB,MAAM;AAErC,WAASA,uBAAsB;AAC7B,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,qBAAoB;AACjC,UAAM,wBAAwB;AAC9B,UAAM,iBAAiB;AACvB,WAAO;AAAA,EACT;AAEA,EAAAA,qBAAoB,UAAU,iBAAiB,SAAU,QAAQ,SAAS;AACxE,WAAO,yBAAiB,MAAM,MAAM;AAAA,MAClC,oBAAoB,KAAK,mBAAmB,MAAM,IAAI;AAAA,IACxD,CAAC;AAAA,EACH;AAQA,EAAAA,qBAAoB,UAAU,6BAA6B,SAAU,aAAa;AAChF,QAAI,WAAW,KAAK;AACpB,QAAI,OAAO,KAAK,QAAQ;AACxB,QAAI,UAAU,CAAC;AACf,aAAS,gBAAgB,MAAM,SAAU,gBAAgB,WAAW;AAClE,UAAI,gBAAgB,gBAAgB;AAClC,gBAAQ,KAAK,KAAK,YAAY,SAAS,CAAC;AAAA,MAC1C;AAAA,IACF,CAAC;AACD,WAAO;AAAA,EACT;AAEA,EAAAA,qBAAoB,OAAO;AAC3B,EAAAA,qBAAoB,eAAe,CAAC,UAAU;AAC9C,EAAAA,qBAAoB,gBAAgB;AAAA,IAElC,GAAG;AAAA,IACH,kBAAkB;AAAA,IAClB,eAAe;AAAA,IACf,OAAO;AAAA,MACL,MAAM;AAAA,IACR;AAAA,IACA,iBAAiB;AAAA,IACjB,eAAe;AAAA,IACf,WAAW;AAAA,MACT,OAAO;AAAA,MACP,SAAS;AAAA,MACT,MAAM;AAAA,IACR;AAAA,IACA,UAAU;AAAA,MACR,OAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AAAA,IACA,aAAa;AAAA,IACb,QAAQ;AAAA,IACR,iBAAiB;AAAA,EACnB;AACA,SAAOA;AACT,EAAE,cAAW;AAEb,SAAS,kBAAkB,aAAa;AAOtC,MAAI,gBAAgB,YAAY,QAAQ,aAAa,YAAY,YAAY,IAAI,eAAe,CAAC;AAEjG,MAAI,CAAC,eAAe;AAClB;AAAA,EACF;AAEA,MAAI,eAAe,CAAC;AACpB,OAAK,cAAc,YAAY,SAAU,SAAS;AAChD,QAAI,eAAe,uBAAuB,OAAO;AACjD,iBAAa,WAAW;AAAA,EAC1B,CAAC;AACD,SAAO;AACT;AAEA,SAAS,uBAAuB,SAAS;AACvC,SAAO,CAAC,QAAQ,QAAQ,OAAO,EAAE;AACnC;AAEA,IAAO,yBAAQ;;;ACjGf,IAAIC,qBAAoB,CAAC,aAAa,SAAS;AAC/C,IAAI,iBAAiB;AAAA,EACnB,YAAY;AAAA,EACZ,OAAO,SAAU,aAAa,SAAS;AACrC,QAAI,WAAW,YAAY;AAC3B,QAAI,aAAa;AAAA,MACf,QAAQ,YAAY,IAAI,CAAC,aAAa,SAAS,CAAC;AAAA,MAChD,QAAQ,YAAY,IAAI,eAAe;AAAA,MACvC,UAAU,YAAY,IAAI,iBAAiB;AAAA,IAC7C;AACA,WAAO;AAAA,MACL,UAAU,SAAU,QAAQ,MAAM;AAChC,iBAAS,gBAAgB,MAAM,SAAU,aAAa,WAAW;AAC/D,cAAI,UAAU,WAAW;AAEzB,cAAI,gBAAgB,YAAY,KAAK,eAAe;AAClD,gBAAI,cAAc,KAAK,aAAa,SAAS,EAAE,IAAIA,oBAAmB,IAAI;AAC1E,2BAAe,SAAS,UAAU;AAAA,UACpC;AAEA,cAAI,cAAc,KAAK,uBAAuB,WAAW,OAAO;AAChE,sBAAY,UAAU;AAAA,QACxB,GAAG,OAAO,OAAO,OAAO,GAAG;AAAA,MAC7B;AAAA,IACF;AAAA,EACF;AACF;AACA,IAAO,yBAAQ;;;ACtBR,SAASC,UAAQ,WAAW;AACjC,MAAIA,QAAwB;AAC5B,YAAU,kBAAkB,oBAAY;AACxC,YAAU,oBAAoB,sBAAmB;AACjD,YAAU,eAAe,UAAU,SAAS,OAAO,OAAO,sBAAc;AAC1E;;;ACFA,IAAI,kBAEJ,WAAY;AACV,WAASC,mBAAkB;AACzB,SAAK,KAAK;AACV,SAAK,KAAK;AACV,SAAK,KAAK;AACV,SAAK,KAAK;AACV,SAAK,OAAO;AACZ,SAAK,OAAO;AACZ,SAAK,OAAO;AACZ,SAAK,OAAO;AACZ,SAAK,SAAS;AAAA,EAChB;AAEA,SAAOA;AACT,EAAE;AAEF,IAAI,aAEJ,SAAU,QAAQ;AAChB,YAAUC,aAAY,MAAM;AAE5B,WAASA,YAAW,MAAM;AACxB,WAAO,OAAO,KAAK,MAAM,IAAI,KAAK;AAAA,EACpC;AAEA,EAAAA,YAAW,UAAU,kBAAkB,WAAY;AACjD,WAAO,IAAI,gBAAgB;AAAA,EAC7B;AAEA,EAAAA,YAAW,UAAU,YAAY,SAAU,KAAK,OAAO;AACrD,QAAI,SAAS,MAAM;AACnB,QAAI,OAAO,MAAM,IAAI,MAAM,EAAE;AAC7B,QAAI,cAAc,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,IAAI,MAAM,EAAE;AAEpF,QAAI,MAAM,WAAW,YAAY;AAC/B,UAAI,OAAO,MAAM,KAAK,QAAQ,MAAM,EAAE;AACtC,UAAI,cAAc,MAAM,OAAO,QAAQ,MAAM,MAAM,MAAM,OAAO,QAAQ,MAAM,MAAM,MAAM,KAAK,QAAQ,MAAM,EAAE;AAAA,IACjH,OAAO;AACL,UAAI,OAAO,MAAM,IAAI,MAAM,KAAK,MAAM;AACtC,UAAI,cAAc,MAAM,MAAM,MAAM,OAAO,QAAQ,MAAM,MAAM,MAAM,OAAO,QAAQ,MAAM,IAAI,MAAM,KAAK,MAAM;AAAA,IACjH;AAEA,QAAI,UAAU;AAAA,EAChB;AAEA,EAAAA,YAAW,UAAU,YAAY,WAAY;AAC3C,kBAAc,IAAI;AAAA,EACpB;AAEA,EAAAA,YAAW,UAAU,WAAW,WAAY;AAC1C,kBAAc,IAAI;AAAA,EACpB;AAEA,SAAOA;AACT,EAAU,YAAI;AAEd,IAAI,aAEJ,SAAU,QAAQ;AAChB,YAAUC,aAAY,MAAM;AAE5B,WAASA,cAAa;AACpB,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,YAAW;AACxB,UAAM,0BAA0B;AAChC,WAAO;AAAA,EACT;AAEA,EAAAA,YAAW,UAAU,SAAS,SAAU,aAAa,SAAS,KAAK;AACjE,QAAI,aAAa;AACjB,QAAI,QAAQ,YAAY,SAAS;AACjC,QAAI,QAAQ,KAAK;AACjB,QAAI,aAAa,YAAY;AAE7B,QAAI,QAAQ,WAAW;AAEvB,QAAI,SAAS,WAAW;AACxB,QAAI,WAAW,YAAY,QAAQ;AACnC,QAAI,WAAW,YAAY,QAAQ,MAAM;AACzC,QAAI,SAAS,YAAY,IAAI,QAAQ;AACrC,SAAK,SAAS;AACd,UAAM,UAAU;AAChB,UAAM,IAAI,WAAW;AACrB,UAAM,IAAI,WAAW;AAErB,UAAM,SAAS,SAAU,MAAM;AAC7B,UAAI,QAAQ,IAAI,WAAW;AAC3B,UAAI,SAAS,UAAU,KAAK;AAC5B,aAAO,YAAY,KAAK;AACxB,aAAO,cAAc,YAAY;AACjC,aAAO,WAAW;AAClB,UAAI,YAAY,KAAK,SAAS;AAC9B,UAAI,iBAAiB,UAAU,SAAS,WAAW;AACnD,UAAI,YAAY,eAAe,IAAI,WAAW;AAC9C,UAAI,WAAW,KAAK,MAAM,UAAU;AACpC,UAAI,aAAa,KAAK,MAAM,SAAS;AACrC,UAAI,SAAS,WAAW,IAAI,QAAQ;AACpC,UAAI,SAAS,WAAW,IAAI,QAAQ;AACpC,UAAI,WAAW,KAAK,MAAM,UAAU;AACpC,UAAI,aAAa,KAAK,MAAM,SAAS;AACrC,UAAI,SAAS,WAAW,IAAI,QAAQ;AACpC,UAAI,SAAS,WAAW,IAAI,QAAQ;AACpC,UAAI,aAAa,KAAK,UAAU;AAChC,UAAI;AACJ,UAAI;AACJ,UAAI;AACJ,UAAI;AACJ,UAAI;AACJ,UAAI;AACJ,UAAI;AACJ,UAAI;AACJ,YAAM,MAAM,SAAS,KAAK,IAAI,GAAG,WAAW,EAAE;AAC9C,YAAM,MAAM,SAAS;AAErB,UAAI,WAAW,YAAY;AACzB,cAAM,UAAU,OAAO,SAAS,QAAQ,SAAS,KAAK,WAAW;AACjE,cAAM,UAAU,OAAO,SAAS,SAAS,SAAS,KAAK,SAAS;AAChE,cAAM,UAAU,OAAO,SAAS,QAAQ,SAAS,KAAK,WAAW;AACjE,aAAK,UAAU,OAAO,SAAS,SAAS,SAAS;AACjD,eAAO;AACP,eAAO,MAAM,IAAI,aAAa,KAAK;AACnC,eAAO;AACP,eAAO,KAAK,YAAY,MAAM,IAAI;AAAA,MACpC,OAAO;AACL,cAAM,UAAU,OAAO,SAAS,QAAQ,SAAS,KAAK,SAAS;AAC/D,cAAM,UAAU,OAAO,SAAS,SAAS,SAAS,KAAK,WAAW;AAClE,aAAK,UAAU,OAAO,SAAS,QAAQ,SAAS;AAChD,cAAM,UAAU,OAAO,SAAS,SAAS,SAAS,KAAK,WAAW;AAClE,eAAO,MAAM,IAAI,aAAa,KAAK;AACnC,eAAO;AACP,eAAO,KAAK,YAAY,MAAM,IAAI;AAClC,eAAO;AAAA,MACT;AAEA,YAAM,SAAS;AAAA,QACb;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF,CAAC;AACD,YAAM,SAAS,eAAe,aAAa,CAAC;AAE5C,cAAQ,MAAM,MAAM,MAAM;AAAA,QACxB,KAAK;AACH,gBAAM,MAAM,OAAO,KAAK,MAAM,UAAU,OAAO;AAC/C,gBAAM,MAAM,QAAQ,KAAK,MAAM,UAAU,OAAO,EAAE;AAClD;AAAA,QAEF,KAAK;AACH,gBAAM,MAAM,OAAO,KAAK,MAAM,UAAU,OAAO;AAC/C,gBAAM,MAAM,QAAQ,KAAK,MAAM,UAAU,OAAO,EAAE;AAClD;AAAA,QAEF,KAAK;AACH,cAAI,cAAc,KAAK,MAAM,UAAU,OAAO;AAC9C,cAAI,cAAc,KAAK,MAAM,UAAU,OAAO;AAE9C,cAAI,SAAS,WAAW,KAAK,SAAS,WAAW,GAAG;AAClD,kBAAM,MAAM,OAAO,IAAY,uBAAe,GAAG,GAAG,EAAE,WAAW,eAAe,EAAE,WAAW,aAAa,CAAC;AAAA,cACzG,OAAO;AAAA,cACP,QAAQ;AAAA,YACV,GAAG;AAAA,cACD,OAAO;AAAA,cACP,QAAQ;AAAA,YACV,CAAC,CAAC;AAAA,UACJ;AAAA,MAEJ;AAEA,oBAAc,OAAO,qBAAqB,WAAW,WAAW,GAAG;AAAA,QACjE,cAAc;AAAA,QACd,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK,UAAU,IAAI,OAAO;AAAA,MACzC,CAAC;AACD,YAAM,cAAc;AAAA,QAClB,UAAU;AAAA,MACZ,CAAC;AACD,UAAI,gBAAgB,UAAU,SAAS,UAAU;AACjD,+BAAyB,OAAO,WAAW,aAAa,SAAU,OAAO;AACvE,eAAO,MAAM,aAAa;AAAA,MAC5B,CAAC;AACD,YAAM,IAAI,KAAK;AACf,eAAS,iBAAiB,KAAK,WAAW,KAAK;AAC/C,UAAI,QAAQ,cAAc,IAAI,OAAO;AACrC,0BAAoB,OAAO,UAAU,cAAc,KAAK,uBAAuB,IAAI,OAAO,cAAc,IAAI,WAAW,GAAG,cAAc,IAAI,UAAU,CAAC;AACvJ,gBAAU,KAAK,EAAE,WAAW;AAAA,IAC9B,CAAC;AAED,UAAM,SAAS,SAAU,MAAM;AAC7B,UAAIC,UAAS,KAAK,UAAU;AAC5B,UAAI,YAAY,KAAK,SAAS;AAC9B,UAAI,QAAQ,UAAU,IAAI,QAAQ;AAClC,UAAI,QAAQ,UAAU,IAAI,QAAQ;AAClC,UAAI,gBAAgB,UAAU,SAAS,UAAU;AACjD,UAAI,OAAO,IAAY,aAAK;AAAA,QAC1B,OAAO;AAAA,UACL,GAAG,SAAS,OAAO,QAAQ,QAAQA,QAAO;AAAA,UAC1C,GAAG,SAAS,OAAO,QAAQ,SAASA,QAAO;AAAA,UAC3C,OAAOA,QAAO;AAAA,UACd,QAAQA,QAAO;AAAA,QACjB;AAAA,QACA,OAAO,UAAU,SAAS,WAAW,EAAE,aAAa;AAAA,QACpD,IAAI;AAAA,MACN,CAAC;AACD,oBAAc,MAAM,qBAAqB,SAAS,GAAG;AAAA,QACnD,cAAc;AAAA,QACd,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,MACpB,CAAC;AACD,WAAK,wBAAwB;AAC7B,WAAK,SAAS,QAAQ,KAAK,UAAU,OAAO,CAAC;AAC7C,WAAK,SAAS,SAAS,KAAK,UAAU,OAAO,EAAE,KAAK;AACpD,+BAAyB,MAAM,SAAS;AACxC,YAAM,IAAI,IAAI;AACd,eAAS,iBAAiB,KAAK,WAAW,IAAI;AAC9C,gBAAU,IAAI,EAAE,WAAW;AAC3B,UAAI,QAAQ,cAAc,IAAI,OAAO;AACrC,0BAAoB,MAAM,UAAU,cAAc,KAAK,uBAAuB,IAAI,OAAO,cAAc,IAAI,WAAW,GAAG,cAAc,IAAI,UAAU,CAAC;AAAA,IACxJ,CAAC;AACD,aAAS,kBAAkB,SAAU,IAAI,WAAW;AAClD,UAAI,YAAY,SAAS,aAAa,SAAS;AAE/C,UAAI,UAAU,IAAI,WAAW,GAAG;AAC9B,WAAG,QAAQ,SAAU,IAAI,IAAI;AAC3B,qBAAW,0BAA0B;AACrC,eAAK,MAAM,KAAK;AAChB,eAAK,MAAM,KAAK;AAChB,eAAK,MAAM;AACX,cAAI,eAAe;AAAA,YACjB,MAAM;AAAA,YACN,UAAU,YAAY;AAAA,YACtB,WAAW,SAAS,YAAY,SAAS;AAAA,YACzC,QAAQ,KAAK,MAAM,IAAI;AAAA,YACvB,QAAQ,KAAK,MAAM,IAAI;AAAA,UACzB,CAAC;AAAA,QACH;AAEA,WAAG,YAAY,WAAY;AACzB,qBAAW,0BAA0B;AAAA,QACvC;AAEA,WAAG,YAAY;AACf,WAAG,SAAS;AAAA,MACd;AAAA,IACF,CAAC;AAED,QAAI,CAAC,KAAK,SAAS,YAAY,mBAAmB,GAAG;AACnD,YAAM,YAAYC,qBAAoB,MAAM,gBAAgB,GAAG,aAAa,WAAY;AACtF,cAAM,eAAe;AAAA,MACvB,CAAC,CAAC;AAAA,IACJ;AAEA,SAAK,QAAQ,YAAY,QAAQ;AAAA,EACnC;AAEA,EAAAF,YAAW,UAAU,UAAU,WAAY;AAAA,EAAC;AAE5C,EAAAA,YAAW,OAAO;AAClB,SAAOA;AACT,EAAE,aAAS;AAGX,SAASE,qBAAoB,MAAM,aAAa,IAAI;AAClD,MAAI,SAAS,IAAY,aAAK;AAAA,IAC5B,OAAO;AAAA,MACL,GAAG,KAAK,IAAI;AAAA,MACZ,GAAG,KAAK,IAAI;AAAA,MACZ,OAAO;AAAA,MACP,QAAQ,KAAK,SAAS;AAAA,IACxB;AAAA,EACF,CAAC;AACD,EAAQ,UAAU,QAAQ;AAAA,IACxB,OAAO;AAAA,MACL,OAAO,KAAK,QAAQ;AAAA,IACtB;AAAA,EACF,GAAG,aAAa,EAAE;AAClB,SAAO;AACT;AAEA,IAAO,qBAAQ;;;AChSf,IAAI,oBAEJ,SAAU,QAAQ;AAChB,YAAUC,oBAAmB,MAAM;AAEnC,WAASA,qBAAoB;AAC3B,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,mBAAkB;AAC/B,WAAO;AAAA,EACT;AAMA,EAAAA,mBAAkB,UAAU,iBAAiB,SAAU,QAAQ,SAAS;AACtE,QAAI,QAAQ,OAAO,SAAS,OAAO;AACnC,QAAI,QAAQ,OAAO,QAAQ,OAAO;AAClC,QAAI,SAAS,OAAO;AACpB,SAAK,cAAc,CAAC;AACpB,QAAI,cAAc,KAAK;AAEvB,aAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACtC,UAAI,OAAO,GAAG,SAAS,QAAQ,OAAO,GAAG,SAAS,GAAG;AACnD,oBAAY,OAAO,GAAG,SAAS,IAAI,cAAM,OAAO,IAAI,MAAM,OAAO;AAAA,MACnE,OAAO;AACL,YAAI,MAAuC;AACzC,gBAAM,IAAI,MAAM,2DAA2D;AAAA,QAC7E;AAAA,MACF;AAAA,IACF;AAEA,QAAI,SAAS,OAAO;AAClB,UAAI,QAAQ,wBAAwB,OAAO,OAAO,MAAM,MAAM,UAAU;AACxE,aAAO,MAAM;AAAA,IACf;AAEA,aAAS,WAAW,UAAU,UAAU;AACtC,eAAS,WAAW,gBAAgB,SAAU,OAAO,KAAK;AACxD,YAAI,cAAc,MAAM;AACxB,YAAIC,UAAS,YAAY,QAAQ,EAAE,cAAc,GAAG;AAEpD,YAAIA,SAAQ;AACV,cAAI,YAAYA,QAAO;AACvB,cAAI,aAAa,YAAY,YAAY;AAEzC,cAAI,YAAY;AACd,kBAAM,cAAc;AAAA,UACtB;AAAA,QACF;AAEA,eAAO;AAAA,MACT,CAAC;AACD,eAAS,WAAW,gBAAgB,SAAU,OAAO,KAAK;AACxD,YAAI,cAAc,MAAM;AACxB,YAAI,OAAO,YAAY,SAAS,EAAE,eAAe,GAAG;AACpD,YAAIA,UAAS,KAAK,MAAM,UAAU;AAElC,YAAIA,SAAQ;AACV,cAAI,QAAQA,QAAO;AACnB,cAAI,aAAa,YAAY,YAAY;AAEzC,cAAI,YAAY;AACd,kBAAM,cAAc;AAAA,UACtB;AAAA,QACF;AAEA,eAAO;AAAA,MACT,CAAC;AAAA,IACH;AAAA,EACF;AAEA,EAAAD,mBAAkB,UAAU,kBAAkB,SAAU,WAAW,eAAe;AAChF,QAAI,QAAQ,KAAK,OAAO,QAAQ,KAAK,OAAO;AAC5C,QAAI,WAAW,MAAM;AACrB,aAAS,SAAS,cAAc;AAChC,aAAS,SAAS,cAAc;AAAA,EAClC;AAQA,EAAAA,mBAAkB,UAAU,WAAW,WAAY;AACjD,WAAO,KAAK,QAAQ,EAAE;AAAA,EACxB;AAQA,EAAAA,mBAAkB,UAAU,cAAc,WAAY;AACpD,WAAO,KAAK,SAAS,EAAE;AAAA,EACzB;AAEA,EAAAA,mBAAkB,UAAU,gBAAgB,SAAU,WAAW,gBAAgB,UAAU;AACzF,aAAS,QAAQ,KAAK;AACpB,aAAO,MAAM,GAAG,KAAK,OAAO;AAAA,IAC9B;AAGA,QAAI,aAAa,QAAQ;AACvB,UAAI,SAAS,KAAK,cAAc,WAAW,QAAQ;AACnD,UAAI,aAAa,OAAO;AACxB,UAAI,YAAY,OAAO;AACvB,UAAI,WAAW,WAAW,SAAS,SAAS,WAAW;AACvD,aAAO,oBAAoB,aAAa;AAAA,QACtC,MAAM;AAAA,QACN,OAAO;AAAA,QACP,SAAS,QAAQ,SAAS;AAAA,MAC5B,CAAC;AAAA,IACH,OACK;AACD,UAAI,OAAO,KAAK,SAAS,EAAE,eAAe,SAAS;AACnD,UAAI,QAAQ,KAAK,UAAU,EAAE;AAC7B,UAAI,SAAS,KAAK,cAAc,WAAW,QAAQ,EAAE,KAAK;AAC1D,aAAO,oBAAoB,aAAa;AAAA,QACtC,MAAM,UAAU,OAAO,SAAS,KAAK;AAAA,QACrC;AAAA,QACA,SAAS,QAAQ,KAAK;AAAA,MACxB,CAAC;AAAA,IACH;AAAA,EACJ;AAEA,EAAAA,mBAAkB,UAAU,gBAAgB,WAAY;AAAA,EAAC;AAGzD,EAAAA,mBAAkB,UAAU,gBAAgB,SAAU,WAAW,UAAU;AACzE,QAAI,SAAS,OAAO,UAAU,cAAc,KAAK,MAAM,WAAW,QAAQ;AAE1E,QAAI,OAAO,SAAS,QAAQ,aAAa,QAAQ;AAC/C,UAAI,OAAO,KAAK,SAAS,EAAE,eAAe,SAAS;AACnD,UAAI,YAAY,KAAK,UAAU,EAAE;AACjC,aAAO,QAAQ;AAAA,IACjB;AAEA,WAAO;AAAA,EACT;AAEA,EAAAA,mBAAkB,OAAO;AACzB,EAAAA,mBAAkB,gBAAgB;AAAA,IAEhC,GAAG;AAAA,IACH,kBAAkB;AAAA,IAClB,MAAM;AAAA,IACN,KAAK;AAAA,IACL,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,QAAQ;AAAA,IACR,WAAW;AAAA,IACX,SAAS;AAAA,IACT,WAAW;AAAA,IACX,kBAAkB;AAAA,IAClB,OAAO;AAAA,MACL,MAAM;AAAA,MACN,UAAU;AAAA,MACV,UAAU;AAAA,IACZ;AAAA,IACA,WAAW;AAAA,MACT,MAAM;AAAA,MACN,UAAU;AAAA,IACZ;AAAA,IACA,QAAQ,CAAC;AAAA,IACT,WAAW;AAAA,IACX,WAAW;AAAA,MACT,OAAO;AAAA,MACP,SAAS;AAAA,MACT,WAAW;AAAA,IACb;AAAA,IACA,UAAU;AAAA,MACR,OAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,MACA,WAAW;AAAA,QACT,SAAS;AAAA,MACX;AAAA,IACF;AAAA,IACA,QAAQ;AAAA,MACN,WAAW;AAAA,QACT,aAAa;AAAA,MACf;AAAA,IACF;AAAA,IACA,iBAAiB;AAAA,IACjB,mBAAmB;AAAA,EACrB;AACA,SAAOA;AACT,EAAE,cAAW;AAEb,IAAO,uBAAQ;;;ACpMA,SAAR,aAA8B,SAAS,KAAK;AACjD,UAAQ,iBAAiB,UAAU,SAAU,aAAa;AACxD,QAAI,YAAY,YAAY,IAAI,WAAW;AAC3C,QAAI,UAAU,YAAY,IAAI,SAAS;AACvC,QAAI,aAAaE,aAAY,aAAa,GAAG;AAC7C,gBAAY,aAAa;AACzB,QAAI,QAAQ,WAAW;AACvB,QAAI,SAAS,WAAW;AACxB,QAAI,QAAQ,YAAY,SAAS;AACjC,QAAI,QAAQ,MAAM;AAClB,QAAI,QAAQ,MAAM;AAClB,sBAAkB,KAAK;AACvB,QAAI,gBAAuB,OAAO,OAAO,SAAU,MAAM;AACvD,aAAO,KAAK,UAAU,EAAE,UAAU;AAAA,IACpC,CAAC;AACD,QAAI,aAAa,cAAc,WAAW,IAAI,IAAI,YAAY,IAAI,kBAAkB;AACpF,QAAI,SAAS,YAAY,IAAI,QAAQ;AACrC,QAAI,YAAY,YAAY,IAAI,WAAW;AAC3C,iBAAa,OAAO,OAAO,WAAW,SAAS,OAAO,QAAQ,YAAY,QAAQ,SAAS;AAAA,EAC7F,CAAC;AACH;AAKA,SAASA,aAAY,aAAa,KAAK;AACrC,SAAc,cAAc,YAAY,mBAAmB,GAAG;AAAA,IAC5D,OAAO,IAAI,SAAS;AAAA,IACpB,QAAQ,IAAI,UAAU;AAAA,EACxB,CAAC;AACH;AAEA,SAAS,aAAa,OAAO,OAAO,WAAW,SAAS,OAAO,QAAQ,YAAY,QAAQ,WAAW;AACpG,sBAAoB,OAAO,OAAO,WAAW,OAAO,QAAQ,QAAQ,SAAS;AAC7E,oBAAkB,OAAO,OAAO,QAAQ,OAAO,SAAS,YAAY,MAAM;AAC1E,oBAAkB,OAAO,MAAM;AACjC;AAMA,SAAS,kBAAkB,OAAO;AAChC,EAAO,KAAK,OAAO,SAAU,MAAM;AACjC,QAAI,SAAS,IAAI,KAAK,UAAU,YAAY;AAC5C,QAAI,SAAS,IAAI,KAAK,SAAS,YAAY;AAC3C,QAAI,eAAe,KAAK,SAAS,KAAK;AACtC,QAAI,QAAQ,KAAK,IAAI,QAAQ,QAAQ,YAAY;AACjD,SAAK,UAAU;AAAA,MACb;AAAA,IACF,GAAG,IAAI;AAAA,EACT,CAAC;AACH;AASA,SAAS,oBAAoB,OAAO,OAAO,WAAW,OAAO,QAAQ,QAAQ,WAAW;AAGtF,MAAI,cAAc,CAAC;AAEnB,MAAI,cAAc,CAAC;AAEnB,MAAI,gBAAgB,CAAC;AACrB,MAAI,iBAAiB,CAAC;AACtB,MAAI,IAAI;AAER,WAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACrC,gBAAY,KAAK;AAAA,EACnB;AAEA,WAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACrC,gBAAY,KAAK,MAAM,GAAG,QAAQ;AAElC,QAAI,YAAY,OAAO,GAAG;AACxB,oBAAc,KAAK,MAAM,EAAE;AAAA,IAC7B;AAAA,EACF;AAEA,MAAI,eAAe;AAInB,SAAO,cAAc,QAAQ;AAC3B,aAAS,MAAM,GAAG,MAAM,cAAc,QAAQ,OAAO;AACnD,UAAI,OAAO,cAAc;AACzB,UAAI,OAAO,KAAK,UAAU,KAAK,eAAe,KAAK,SAAS;AAC5D,UAAI,cAAc,KAAK,SAAS,QAAQ,KAAK,SAAS;AAEtD,UAAI,eAAe,KAAK,QAAQ,cAAc;AAC5C,uBAAe,KAAK;AAAA,MACtB;AAEA,WAAK,UAAU;AAAA,QACb,OAAO,cAAc,KAAK,QAAQ;AAAA,MACpC,GAAG,IAAI;AACP,iBAAW,aAAa,KAAK,UAAU;AAAA,QACrC,IAAI;AAAA,MACN,GAAG,IAAI,IAAI,KAAK,UAAU;AAAA,QACxB,IAAI;AAAA,MACN,GAAG,IAAI;AAEP,eAAS,UAAU,GAAG,UAAU,KAAK,SAAS,QAAQ,WAAW;AAC/D,YAAI,OAAO,KAAK,SAAS;AACzB,YAAI,YAAY,MAAM,QAAQ,IAAI;AAClC,oBAAY,aAAa;AACzB,YAAI,aAAa,KAAK;AACtB,YAAI,YAAY,MAAM,QAAQ,UAAU;AAExC,YAAI,EAAE,YAAY,eAAe,KAAK,eAAe,QAAQ,UAAU,IAAI,GAAG;AAC5E,yBAAe,KAAK,UAAU;AAAA,QAChC;AAAA,MACF;AAAA,IACF;AAEA,MAAE;AACF,oBAAgB;AAChB,qBAAiB,CAAC;AAAA,EACpB;AAEA,WAAS,IAAI,GAAG,IAAI,YAAY,QAAQ,KAAK;AAC3C,QAAI,YAAY,OAAO,GAAG;AACxB,YAAM,IAAI,MAAM,+CAA+C;AAAA,IACjE;AAAA,EACF;AAEA,MAAI,WAAW,eAAe,IAAI,IAAI,eAAe,IAAI;AAEzD,MAAI,aAAa,cAAc,QAAQ;AACrC,4BAAwB,OAAO,WAAW,QAAQ,QAAQ;AAAA,EAC5D;AAEA,MAAI,KAAK,WAAW,cAAc,SAAS,aAAa,YAAY,QAAQ,aAAa;AACzF,oBAAkB,OAAO,IAAI,MAAM;AACrC;AAEA,SAAS,YAAY,MAAM;AACzB,MAAI,OAAO,KAAK,UAAU,KAAK,eAAe,KAAK,SAAS;AAC5D,SAAO,KAAK,SAAS,QAAQ,KAAK,SAAS;AAC7C;AAEA,SAAS,wBAAwB,OAAO,WAAW,QAAQ,UAAU;AACnE,MAAI,cAAc,SAAS;AACzB,QAAI,iBAAiB,CAAC;AACtB,QAAI,cAAc;AAClB,QAAI,aAAa;AAEjB,WAAO,YAAY,QAAQ;AACzB,eAAS,IAAI,GAAG,IAAI,YAAY,QAAQ,KAAK;AAC3C,YAAI,OAAO,YAAY;AACvB,aAAK,UAAU;AAAA,UACb,cAAc;AAAA,QAChB,GAAG,IAAI;AAEP,iBAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,QAAQ,KAAK;AAC5C,cAAI,OAAO,KAAK,QAAQ;AAExB,cAAI,eAAe,QAAQ,KAAK,KAAK,IAAI,GAAG;AAC1C,2BAAe,KAAK,KAAK,KAAK;AAAA,UAChC;AAAA,QACF;AAAA,MACF;AAEA,oBAAc;AACd,uBAAiB,CAAC;AAClB,QAAE;AAAA,IACJ;AAEA,IAAO,KAAK,OAAO,SAAUC,OAAM;AACjC,UAAI,CAAC,YAAYA,KAAI,GAAG;AACtB,QAAAA,MAAK,UAAU;AAAA,UACb,OAAO,KAAK,IAAI,GAAG,WAAWA,MAAK,UAAU,EAAE,YAAY;AAAA,QAC7D,GAAG,IAAI;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH,WAAW,cAAc,WAAW;AAClC,mBAAe,OAAO,QAAQ;AAAA,EAChC;AACF;AAUA,SAAS,eAAe,OAAO,UAAU;AACvC,EAAO,KAAK,OAAO,SAAU,MAAM;AACjC,QAAI,CAAC,YAAY,IAAI,KAAK,CAAC,KAAK,SAAS,QAAQ;AAC/C,WAAK,UAAU;AAAA,QACb,OAAO;AAAA,MACT,GAAG,IAAI;AAAA,IACT;AAAA,EACF,CAAC;AACH;AASA,SAAS,kBAAkB,OAAO,IAAI,QAAQ;AAC5C,EAAO,KAAK,OAAO,SAAU,MAAM;AACjC,QAAI,YAAY,KAAK,UAAU,EAAE,QAAQ;AACzC,eAAW,aAAa,KAAK,UAAU;AAAA,MACrC,GAAG;AAAA,IACL,GAAG,IAAI,IAAI,KAAK,UAAU;AAAA,MACxB,GAAG;AAAA,IACL,GAAG,IAAI;AAAA,EACT,CAAC;AACH;AAaA,SAAS,kBAAkB,OAAO,OAAO,QAAQ,OAAO,SAAS,YAAY,QAAQ;AACnF,MAAI,iBAAiB,sBAAsB,OAAO,MAAM;AACxD,sBAAoB,gBAAgB,OAAO,QAAQ,OAAO,SAAS,MAAM;AACzE,oBAAkB,gBAAgB,SAAS,QAAQ,OAAO,MAAM;AAEhE,WAAS,QAAQ,GAAG,aAAa,GAAG,cAAc;AAGhD,aAAS;AACT,qBAAiB,gBAAgB,OAAO,MAAM;AAC9C,sBAAkB,gBAAgB,SAAS,QAAQ,OAAO,MAAM;AAChE,qBAAiB,gBAAgB,OAAO,MAAM;AAC9C,sBAAkB,gBAAgB,SAAS,QAAQ,OAAO,MAAM;AAAA,EAClE;AACF;AAEA,SAAS,sBAAsB,OAAO,QAAQ;AAC5C,MAAI,iBAAiB,CAAC;AACtB,MAAI,UAAU,WAAW,aAAa,MAAM;AAC5C,MAAI,cAAc,UAAU,OAAO,SAAU,MAAM;AACjD,WAAO,KAAK,UAAU,EAAE;AAAA,EAC1B,CAAC;AACD,cAAY,KAAK,KAAK,SAAU,GAAG,GAAG;AACpC,WAAO,IAAI;AAAA,EACb,CAAC;AACD,EAAO,KAAK,YAAY,MAAM,SAAU,KAAK;AAC3C,mBAAe,KAAK,YAAY,QAAQ,IAAI,GAAG,CAAC;AAAA,EAClD,CAAC;AACD,SAAO;AACT;AAMA,SAAS,oBAAoB,gBAAgB,OAAO,QAAQ,OAAO,SAAS,QAAQ;AAClF,MAAI,QAAQ;AACZ,EAAO,KAAK,gBAAgB,SAAU,OAAO;AAC3C,QAAI,IAAI,MAAM;AACd,QAAIC,OAAM;AACV,IAAO,KAAK,OAAO,SAAU,MAAM;AACjC,MAAAA,QAAO,KAAK,UAAU,EAAE;AAAA,IAC1B,CAAC;AACD,QAAI,KAAK,WAAW,cAAc,SAAS,IAAI,KAAK,WAAWA,QAAO,UAAU,IAAI,KAAK,WAAWA;AAEpG,QAAI,KAAK,OAAO;AACd,cAAQ;AAAA,IACV;AAAA,EACF,CAAC;AACD,EAAO,KAAK,gBAAgB,SAAU,OAAO;AAC3C,IAAO,KAAK,OAAO,SAAU,MAAM,GAAG;AACpC,UAAI,SAAS,KAAK,UAAU,EAAE,QAAQ;AAEtC,UAAI,WAAW,YAAY;AACzB,aAAK,UAAU;AAAA,UACb,GAAG;AAAA,QACL,GAAG,IAAI;AACP,aAAK,UAAU;AAAA,UACb,IAAI;AAAA,QACN,GAAG,IAAI;AAAA,MACT,OAAO;AACL,aAAK,UAAU;AAAA,UACb,GAAG;AAAA,QACL,GAAG,IAAI;AACP,aAAK,UAAU;AAAA,UACb,IAAI;AAAA,QACN,GAAG,IAAI;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH,CAAC;AACD,EAAO,KAAK,OAAO,SAAU,MAAM;AACjC,QAAI,SAAS,CAAC,KAAK,SAAS,IAAI;AAChC,SAAK,UAAU;AAAA,MACb,IAAI;AAAA,IACN,GAAG,IAAI;AAAA,EACT,CAAC;AACH;AAMA,SAAS,kBAAkB,gBAAgB,SAAS,QAAQ,OAAO,QAAQ;AACzE,MAAI,UAAU,WAAW,aAAa,MAAM;AAC5C,EAAO,KAAK,gBAAgB,SAAU,OAAO;AAC3C,UAAM,KAAK,SAAU,GAAG,GAAG;AACzB,aAAO,EAAE,UAAU,EAAE,WAAW,EAAE,UAAU,EAAE;AAAA,IAChD,CAAC;AACD,QAAI;AACJ,QAAI;AACJ,QAAI;AACJ,QAAI,KAAK;AACT,QAAI,IAAI,MAAM;AACd,QAAI,aAAa,WAAW,aAAa,OAAO;AAEhD,aAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAC1B,aAAO,MAAM;AACb,WAAK,KAAK,KAAK,UAAU,EAAE;AAE3B,UAAI,KAAK,GAAG;AACV,gBAAQ,KAAK,UAAU,EAAE,WAAW;AACpC,mBAAW,aAAa,KAAK,UAAU;AAAA,UACrC,GAAG;AAAA,QACL,GAAG,IAAI,IAAI,KAAK,UAAU;AAAA,UACxB,GAAG;AAAA,QACL,GAAG,IAAI;AAAA,MACT;AAEA,WAAK,KAAK,UAAU,EAAE,WAAW,KAAK,UAAU,EAAE,cAAc;AAAA,IAClE;AAEA,QAAI,YAAY,WAAW,aAAa,QAAQ;AAEhD,SAAK,KAAK,UAAU;AAEpB,QAAI,KAAK,GAAG;AACV,cAAQ,KAAK,UAAU,EAAE,WAAW;AACpC,iBAAW,aAAa,KAAK,UAAU;AAAA,QACrC,GAAG;AAAA,MACL,GAAG,IAAI,IAAI,KAAK,UAAU;AAAA,QACxB,GAAG;AAAA,MACL,GAAG,IAAI;AACP,WAAK;AAEL,eAAS,IAAI,IAAI,GAAG,KAAK,GAAG,EAAE,GAAG;AAC/B,eAAO,MAAM;AACb,aAAK,KAAK,UAAU,EAAE,WAAW,KAAK,UAAU,EAAE,cAAc,UAAU;AAE1E,YAAI,KAAK,GAAG;AACV,kBAAQ,KAAK,UAAU,EAAE,WAAW;AACpC,qBAAW,aAAa,KAAK,UAAU;AAAA,YACrC,GAAG;AAAA,UACL,GAAG,IAAI,IAAI,KAAK,UAAU;AAAA,YACxB,GAAG;AAAA,UACL,GAAG,IAAI;AAAA,QACT;AAEA,aAAK,KAAK,UAAU,EAAE;AAAA,MACxB;AAAA,IACF;AAAA,EACF,CAAC;AACH;AAQA,SAAS,iBAAiB,gBAAgB,OAAO,QAAQ;AACvD,EAAO,KAAK,eAAe,MAAM,EAAE,QAAQ,GAAG,SAAU,OAAO;AAC7D,IAAO,KAAK,OAAO,SAAU,MAAM;AACjC,UAAI,KAAK,SAAS,QAAQ;AACxB,YAAI,IAAI,IAAI,KAAK,UAAU,gBAAgB,MAAM,IAAI,IAAI,KAAK,UAAU,YAAY;AAEpF,YAAI,MAAM,CAAC,GAAG;AACZ,cAAIC,OAAM,KAAK,SAAS;AACxB,cAAIA,OAAM,IAAI,KAAK,UAAU,cAAc,MAAM,IAAIA,OAAM;AAAA,QAC7D;AAEA,YAAI,WAAW,YAAY;AACzB,cAAI,QAAQ,KAAK,UAAU,EAAE,KAAK,IAAI,OAAO,MAAM,MAAM,KAAK;AAC9D,eAAK,UAAU;AAAA,YACb,GAAG;AAAA,UACL,GAAG,IAAI;AAAA,QACT,OAAO;AACL,cAAI,QAAQ,KAAK,UAAU,EAAE,KAAK,IAAI,OAAO,MAAM,MAAM,KAAK;AAC9D,eAAK,UAAU;AAAA,YACb,GAAG;AAAA,UACL,GAAG,IAAI;AAAA,QACT;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACH,CAAC;AACH;AAEA,SAAS,eAAe,MAAM,QAAQ;AACpC,SAAO,OAAO,KAAK,OAAO,MAAM,IAAI,KAAK,SAAS;AACpD;AAEA,SAAS,aAAa,MAAM,QAAQ;AAClC,SAAO,OAAO,KAAK,OAAO,MAAM;AAClC;AAEA,SAAS,eAAe,MAAM,QAAQ;AACpC,SAAO,OAAO,KAAK,OAAO,MAAM,IAAI,KAAK,SAAS;AACpD;AAEA,SAAS,aAAa,MAAM,QAAQ;AAClC,SAAO,OAAO,KAAK,OAAO,MAAM;AAClC;AAEA,SAAS,OAAO,MAAM,QAAQ;AAC5B,SAAO,WAAW,aAAa,KAAK,UAAU,EAAE,IAAI,KAAK,UAAU,EAAE,KAAK,IAAI,KAAK,UAAU,EAAE,IAAI,KAAK,UAAU,EAAE,KAAK;AAC3H;AAEA,SAAS,aAAa,MAAM;AAC1B,SAAO,KAAK,SAAS;AACvB;AAEA,SAAS,IAAI,OAAO,IAAI,QAAQ;AAC9B,MAAID,OAAM;AACV,MAAIC,OAAM,MAAM;AAChB,MAAI,IAAI;AAER,SAAO,EAAE,IAAIA,MAAK;AAChB,QAAI,QAAQ,CAAC,GAAG,MAAM,IAAI,MAAM;AAEhC,QAAI,CAAC,MAAM,KAAK,GAAG;AACjB,MAAAD,QAAO;AAAA,IACT;AAAA,EACF;AAEA,SAAOA;AACT;AAMA,SAAS,iBAAiB,gBAAgB,OAAO,QAAQ;AACvD,EAAO,KAAK,gBAAgB,SAAU,OAAO;AAC3C,IAAO,KAAK,OAAO,SAAU,MAAM;AACjC,UAAI,KAAK,QAAQ,QAAQ;AACvB,YAAI,IAAI,IAAI,KAAK,SAAS,gBAAgB,MAAM,IAAI,IAAI,KAAK,SAAS,YAAY;AAElF,YAAI,MAAM,CAAC,GAAG;AACZ,cAAIC,OAAM,KAAK,QAAQ;AACvB,cAAIA,OAAM,IAAI,KAAK,SAAS,cAAc,MAAM,IAAIA,OAAM;AAAA,QAC5D;AAEA,YAAI,WAAW,YAAY;AACzB,cAAI,QAAQ,KAAK,UAAU,EAAE,KAAK,IAAI,OAAO,MAAM,MAAM,KAAK;AAC9D,eAAK,UAAU;AAAA,YACb,GAAG;AAAA,UACL,GAAG,IAAI;AAAA,QACT,OAAO;AACL,cAAI,QAAQ,KAAK,UAAU,EAAE,KAAK,IAAI,OAAO,MAAM,MAAM,KAAK;AAC9D,eAAK,UAAU;AAAA,YACb,GAAG;AAAA,UACL,GAAG,IAAI;AAAA,QACT;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACH,CAAC;AACH;AAMA,SAAS,kBAAkB,OAAO,QAAQ;AACxC,MAAI,UAAU,WAAW,aAAa,MAAM;AAC5C,EAAO,KAAK,OAAO,SAAU,MAAM;AACjC,SAAK,SAAS,KAAK,SAAU,GAAG,GAAG;AACjC,aAAO,EAAE,MAAM,UAAU,EAAE,WAAW,EAAE,MAAM,UAAU,EAAE;AAAA,IAC5D,CAAC;AACD,SAAK,QAAQ,KAAK,SAAU,GAAG,GAAG;AAChC,aAAO,EAAE,MAAM,UAAU,EAAE,WAAW,EAAE,MAAM,UAAU,EAAE;AAAA,IAC5D,CAAC;AAAA,EACH,CAAC;AACD,EAAO,KAAK,OAAO,SAAU,MAAM;AACjC,QAAI,KAAK;AACT,QAAI,KAAK;AACT,IAAO,KAAK,KAAK,UAAU,SAAU,MAAM;AACzC,WAAK,UAAU;AAAA,QACb;AAAA,MACF,GAAG,IAAI;AACP,YAAM,KAAK,UAAU,EAAE;AAAA,IACzB,CAAC;AACD,IAAO,KAAK,KAAK,SAAS,SAAU,MAAM;AACxC,WAAK,UAAU;AAAA,QACb;AAAA,MACF,GAAG,IAAI;AACP,YAAM,KAAK,UAAU,EAAE;AAAA,IACzB,CAAC;AAAA,EACH,CAAC;AACH;;;AC9fe,SAAR,aAA8B,SAAS;AAC5C,UAAQ,iBAAiB,UAAU,SAAU,aAAa;AACxD,QAAI,QAAQ,YAAY,SAAS;AACjC,QAAI,QAAQ,MAAM;AAClB,QAAI,QAAQ,MAAM;AAElB,QAAI,MAAM,QAAQ;AAChB,UAAI,aAAa;AACjB,UAAI,aAAa;AACjB,MAAO,KAAK,OAAO,SAAU,MAAM;AACjC,YAAI,YAAY,KAAK,UAAU,EAAE;AAEjC,YAAI,YAAY,YAAY;AAC1B,uBAAa;AAAA,QACf;AAEA,YAAI,YAAY,YAAY;AAC1B,uBAAa;AAAA,QACf;AAAA,MACF,CAAC;AACD,MAAO,KAAK,OAAO,SAAU,MAAM;AACjC,YAAI,UAAU,IAAI,sBAAc;AAAA,UAC9B,MAAM;AAAA,UACN,eAAe;AAAA,UACf,YAAY,CAAC,YAAY,UAAU;AAAA,UACnC,QAAQ,YAAY,IAAI,OAAO;AAAA,QACjC,CAAC;AACD,YAAI,kBAAkB,QAAQ,iBAAiB,KAAK,UAAU,EAAE,KAAK;AACrE,YAAI,cAAc,KAAK,SAAS,EAAE,IAAI,CAAC,aAAa,OAAO,CAAC;AAE5D,YAAI,eAAe,MAAM;AACvB,eAAK,UAAU,SAAS,WAAW;AACnC,eAAK,UAAU,SAAS;AAAA,YACtB,MAAM;AAAA,UACR,CAAC;AAAA,QACH,OAAO;AACL,eAAK,UAAU,SAAS,eAAe;AACvC,eAAK,UAAU,SAAS;AAAA,YACtB,MAAM;AAAA,UACR,CAAC;AAAA,QACH;AAAA,MACF,CAAC;AAAA,IACH;AAEA,QAAI,MAAM,QAAQ;AAChB,MAAO,KAAK,OAAO,SAAU,MAAM;AACjC,YAAI,YAAY,KAAK,SAAS,EAAE,IAAI,WAAW;AAC/C,aAAK,UAAU,SAAS,SAAS;AAAA,MACnC,CAAC;AAAA,IACH;AAAA,EACF,CAAC;AACH;;;ACjDO,SAASC,UAAQ,WAAW;AACjC,YAAU,kBAAkB,kBAAU;AACtC,YAAU,oBAAoB,oBAAiB;AAC/C,YAAU,eAAe,YAAY;AACrC,YAAU,eAAe,YAAY;AACrC,YAAU,eAAe;AAAA,IACvB,MAAM;AAAA,IACN,OAAO;AAAA,IAEP,QAAQ;AAAA,EACV,GAAG,SAAU,SAAS,SAAS;AAC7B,YAAQ,cAAc;AAAA,MACpB,UAAU;AAAA,MACV,SAAS;AAAA,MACT,OAAO;AAAA,IACT,GAAG,SAAU,aAAa;AACxB,kBAAY,gBAAgB,QAAQ,WAAW,CAAC,QAAQ,QAAQ,QAAQ,MAAM,CAAC;AAAA,IACjF,CAAC;AAAA,EACH,CAAC;AACH;;;AClBA,IAAI,wBAEJ,WAAY;AACV,WAASC,yBAAwB;AAAA,EAAC;AAMlC,EAAAA,uBAAsB,UAAU,iBAAiB,SAAU,QAAQ,SAAS;AAI1E,QAAI;AACJ,QAAI,aAAa,QAAQ,aAAa,SAAS,KAAK,IAAI,YAAY,CAAC;AACrE,QAAI,aAAa,QAAQ,aAAa,SAAS,KAAK,IAAI,YAAY,CAAC;AACrE,QAAI,YAAY,WAAW,IAAI,MAAM;AACrC,QAAI,YAAY,WAAW,IAAI,MAAM;AACrC,QAAI;AAGJ,QAAI,cAAc,YAAY;AAC5B,aAAO,SAAS;AAChB,oBAAc,WAAW,eAAe;AACxC,mBAAa;AAAA,IACf,WAAW,cAAc,YAAY;AACnC,aAAO,SAAS;AAChB,oBAAc,WAAW,eAAe;AACxC,mBAAa;AAAA,IACf,OAAO;AACL,aAAO,SAAS,OAAO,UAAU;AAAA,IACnC;AAEA,QAAI,YAAY,CAAC,KAAK,GAAG;AACzB,QAAI,mBAAmB,OAAO,WAAW,eAAe,IAAI;AAC5D,QAAI,cAAc,KAAK,eAAe,UAAU;AAChD,QAAI,eAAe,UAAU,IAAI;AACjC,QAAI,aAAa,CAAC,YAAY,UAAU;AACxC,QAAI,eAAe,WAAW,kBAAkB,IAAI,MAAM;AAC1D,QAAI,gBAAgB,WAAW,IAAI,kBAAkB,IAAI,MAAM;AAC/D,QAAI,OAAO,OAAO;AAGlB,QAAI,QAAQ,YAAY;AACtB,UAAI,kBAAkB,CAAC;AACvB,MAAO,KAAK,MAAM,SAAU,MAAM,OAAO;AACvC,YAAI;AAEJ,YAAW,QAAQ,IAAI,GAAG;AACxB,oBAAU,KAAK,MAAM;AAErB,eAAK,QAAQ,KAAK;AAAA,QACpB,WAAkB,QAAQ,KAAK,KAAK,GAAG;AACrC,oBAAiB,OAAO,CAAC,GAAG,IAAI;AAChC,kBAAQ,QAAQ,QAAQ,MAAM,MAAM;AAEpC,eAAK,MAAM,QAAQ,KAAK;AAAA,QAC1B,OAAO;AACL,oBAAU;AAAA,QACZ;AAEA,wBAAgB,KAAK,OAAO;AAAA,MAC9B,CAAC;AACD,aAAO,OAAO;AAAA,IAChB;AAEA,QAAI,yBAAyB,KAAK;AAClC,QAAI,kBAAkB,CAAC;AAAA,MACrB,MAAM;AAAA,MACN,MAAM,uBAAuB,YAAY;AAAA,MACzC;AAAA,MACA,WAAW;AAAA,QACT,SAAS;AAAA,QACT,UAAU;AAAA,MACZ;AAAA,MACA,SAAS,CAAC,MAAM;AAAA,IAClB,GAAG;AAAA,MACD,MAAM;AAAA,MACN,MAAM,uBAAuB,aAAa;AAAA,MAC1C,SAAS,uBAAuB,MAAM;AAAA,IACxC,CAAC;AACD,WAAO,uBAAuB,MAAM;AAAA,MAClC;AAAA,MACA,iBAAiB,uBAAuB,SAAS;AAAA,MACjD,iBAAwB,MAAM,iCAAiC,iBAAiB,IAAI;AAAA,IACtF,CAAC;AAAA,EACH;AAOA,EAAAA,uBAAsB,UAAU,cAAc,WAAY;AACxD,QAAI,MAAM,KAAK;AACf,WAAO,KAAK,QAAQ,aAAa,MAAM,QAAQ,KAAK,IAAI,MAAM,WAAW,CAAC,EAAE;AAAA,EAC9E;AAEA,SAAOA;AACT,EAAE;;;ACnGF,IAAI,qBAEJ,SAAU,QAAQ;AAChB,YAAUC,qBAAoB,MAAM;AAEpC,WAASA,sBAAqB;AAC5B,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,oBAAmB;AAUhC,UAAM,yBAAyB,CAAC;AAAA,MAC9B,MAAM;AAAA,MACN,gBAAgB;AAAA,IAClB,GAAG;AAAA,MACD,MAAM;AAAA,MACN,gBAAgB;AAAA,IAClB,GAAG;AAAA,MACD,MAAM;AAAA,MACN,gBAAgB;AAAA,IAClB,GAAG;AAAA,MACD,MAAM;AAAA,MACN,gBAAgB;AAAA,IAClB,GAAG;AAAA,MACD,MAAM;AAAA,MACN,gBAAgB;AAAA,IAClB,CAAC;AACD,UAAM,iBAAiB;AACvB,WAAO;AAAA,EACT;AAEA,EAAAA,oBAAmB,OAAO;AAC1B,EAAAA,oBAAmB,eAAe,CAAC,SAAS,SAAS,MAAM;AAC3D,EAAAA,oBAAmB,gBAAgB;AAAA,IAEjC,GAAG;AAAA,IACH,kBAAkB;AAAA,IAClB,iBAAiB;AAAA,IACjB,QAAQ;AAAA,IACR,UAAU,CAAC,GAAG,EAAE;AAAA,IAChB,WAAW;AAAA,MACT,OAAO;AAAA,MACP,aAAa;AAAA,IACf;AAAA,IACA,UAAU;AAAA,MACR,OAAO;AAAA,MACP,WAAW;AAAA,QACT,aAAa;AAAA,QACb,YAAY;AAAA,QACZ,eAAe;AAAA,QACf,eAAe;AAAA,QACf,aAAa;AAAA,MACf;AAAA,IACF;AAAA,IACA,mBAAmB;AAAA,EACrB;AACA,SAAOA;AACT,EAAE,cAAW;AAEb,MAAM,oBAAoB,uBAAuB,IAAI;AACrD,IAAO,wBAAQ;;;AChEf,IAAI,cAEJ,SAAU,QAAQ;AAChB,YAAUC,cAAa,MAAM;AAE7B,WAASA,eAAc;AACrB,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,aAAY;AACzB,WAAO;AAAA,EACT;AAEA,EAAAA,aAAY,UAAU,SAAS,SAAU,aAAa,SAAS,KAAK;AAClE,QAAI,OAAO,YAAY,QAAQ;AAC/B,QAAI,QAAQ,KAAK;AACjB,QAAI,UAAU,KAAK;AAGnB,QAAI,CAAC,KAAK,OAAO;AACf,YAAM,UAAU;AAAA,IAClB;AAEA,QAAI,WAAW,YAAY,IAAI,QAAQ,MAAM,eAAe,IAAI;AAChE,SAAK,KAAK,OAAO,EAAE,IAAI,SAAU,QAAQ;AACvC,UAAI,KAAK,SAAS,MAAM,GAAG;AACzB,YAAI,aAAa,KAAK,cAAc,MAAM;AAC1C,YAAI,WAAW,gBAAgB,YAAY,MAAM,QAAQ,UAAU,IAAI;AACvE,aAAK,iBAAiB,QAAQ,QAAQ;AACtC,cAAM,IAAI,QAAQ;AAAA,MACpB;AAAA,IACF,CAAC,EAAE,OAAO,SAAU,QAAQ,QAAQ;AAClC,UAAI,WAAW,QAAQ,iBAAiB,MAAM;AAE9C,UAAI,CAAC,KAAK,SAAS,MAAM,GAAG;AAC1B,cAAM,OAAO,QAAQ;AACrB;AAAA,MACF;AAEA,UAAI,aAAa,KAAK,cAAc,MAAM;AAE1C,UAAI,CAAC,UAAU;AACb,mBAAW,gBAAgB,YAAY,MAAM,QAAQ,QAAQ;AAAA,MAC/D,OAAO;AACL,qBAAa,QAAQ;AACrB,4BAAoB,YAAY,UAAU,MAAM,MAAM;AAAA,MACxD;AAEA,YAAM,IAAI,QAAQ;AAClB,WAAK,iBAAiB,QAAQ,QAAQ;AAAA,IACxC,CAAC,EAAE,OAAO,SAAU,QAAQ;AAC1B,UAAI,KAAK,QAAQ,iBAAiB,MAAM;AACxC,YAAM,MAAM,OAAO,EAAE;AAAA,IACvB,CAAC,EAAE,QAAQ;AACX,SAAK,QAAQ;AAAA,EACf;AAEA,EAAAA,aAAY,UAAU,SAAS,SAAU,SAAS;AAChD,QAAI,QAAQ,KAAK;AACjB,QAAI,OAAO,KAAK;AAChB,SAAK,QAAQ;AACb,YAAQ,KAAK,kBAAkB,SAAU,IAAI;AAC3C,YAAM,MAAM,OAAO,EAAE;AAAA,IACvB,CAAC;AAAA,EACH;AAEA,EAAAA,aAAY,OAAO;AACnB,SAAOA;AACT,EAAE,aAAS;AAEX,IAAI,eAEJ,WAAY;AACV,WAASC,gBAAe;AAAA,EAAC;AAEzB,SAAOA;AACT,EAAE;AAEF,IAAI,UAEJ,SAAU,QAAQ;AAChB,YAAUC,UAAS,MAAM;AAEzB,WAASA,SAAQ,MAAM;AACrB,QAAI,QAAQ,OAAO,KAAK,MAAM,IAAI,KAAK;AAEvC,UAAM,OAAO;AACb,WAAO;AAAA,EACT;AAEA,EAAAA,SAAQ,UAAU,kBAAkB,WAAY;AAC9C,WAAO,IAAI,aAAa;AAAA,EAC1B;AAEA,EAAAA,SAAQ,UAAU,YAAY,SAAU,KAAK,OAAO;AAClD,QAAI,OAAO,MAAM;AACjB,QAAI,IAAI;AACR,QAAI,OAAO,KAAK,GAAG,IAAI,KAAK,GAAG,EAAE;AACjC;AAEA,WAAO,IAAI,GAAG,KAAK;AACjB,UAAI,OAAO,KAAK,GAAG,IAAI,KAAK,GAAG,EAAE;AAAA,IACnC;AAEA,QAAI,UAAU;AAEd,WAAO,IAAI,KAAK,QAAQ,KAAK;AAC3B,UAAI,OAAO,KAAK,GAAG,IAAI,KAAK,GAAG,EAAE;AACjC;AACA,UAAI,OAAO,KAAK,GAAG,IAAI,KAAK,GAAG,EAAE;AAAA,IACnC;AAAA,EACF;AAEA,SAAOA;AACT,EAAE,YAAI;AAEN,SAAS,gBAAgB,YAAY,MAAM,WAAW,UAAU,QAAQ;AACtE,MAAI,OAAO,WAAW;AACtB,MAAI,KAAK,IAAI,QAAQ;AAAA,IACnB,OAAO;AAAA,MACL,QAAQ,SAAS,UAAU,MAAM,UAAU,UAAU,IAAI;AAAA,IAC3D;AAAA,EACF,CAAC;AACD,sBAAoB,YAAY,IAAI,MAAM,WAAW,MAAM;AAC3D,SAAO;AACT;AAEA,SAAS,oBAAoB,YAAY,IAAI,MAAM,WAAW,QAAQ;AACpE,MAAI,cAAc,KAAK;AACvB,MAAI,eAAe,gBAAQ,SAAS,cAAc;AAClD,eAAa,IAAI;AAAA,IACf,OAAO;AAAA,MACL,QAAQ,WAAW;AAAA,IACrB;AAAA,EACF,GAAG,aAAa,SAAS;AACzB,KAAG,SAAS,KAAK,cAAc,WAAW,OAAO,CAAC;AAClD,KAAG,MAAM,gBAAgB;AACzB,KAAG,KAAK;AACR,MAAI,YAAY,KAAK,aAAa,SAAS;AAC3C,MAAI,gBAAgB,UAAU,SAAS,UAAU;AACjD,2BAAyB,IAAI,SAAS;AACtC,sBAAoB,IAAI,cAAc,IAAI,OAAO,GAAG,cAAc,IAAI,WAAW,GAAG,cAAc,IAAI,UAAU,CAAC;AACnH;AAEA,SAAS,UAAU,QAAQ,KAAK,YAAY;AAC1C,SAAc,IAAI,QAAQ,SAAU,OAAO;AACzC,YAAQ,MAAM,MAAM;AACpB,UAAM,OAAO,WAAW;AACxB,WAAO;AAAA,EACT,CAAC;AACH;AAEA,IAAO,sBAAQ;;;AC7Jf,IAAIC,QAAc;AACH,SAAR,cAA+B,SAAS;AAC7C,MAAI,cAAc,kBAAkB,OAAO;AAC3C,EAAAA,MAAK,aAAa,SAAU,WAAW;AACrC,QAAI,eAAe,UAAU;AAE7B,QAAI,CAAC,aAAa,QAAQ;AACxB;AAAA,IACF;AAEA,kBAAc,SAAS;AACvB,IAAAA,MAAK,cAAc,SAAU,aAAa,KAAK;AAC7C,yBAAmB,aAAa,UAAU,cAAc,MAAM,UAAU,aAAa,IAAI;AAAA,IAC3F,CAAC;AAAA,EACH,CAAC;AACH;AAKA,SAAS,kBAAkB,SAAS;AAClC,MAAI,SAAS,CAAC;AACd,MAAI,WAAW,CAAC;AAChB,UAAQ,iBAAiB,WAAW,SAAU,aAAa;AACzD,QAAI,WAAW,YAAY,YAAY;AACvC,QAAI,MAAa,QAAQ,UAAU,QAAQ;AAE3C,QAAI,MAAM,GAAG;AACX,YAAM,SAAS;AACf,eAAS,OAAO;AAChB,aAAO,OAAO;AAAA,QACZ,MAAM;AAAA,QACN,cAAc,CAAC;AAAA,MACjB;AAAA,IACF;AAEA,WAAO,KAAK,aAAa,KAAK,WAAW;AAAA,EAC3C,CAAC;AACD,SAAO;AACT;AAMA,SAAS,cAAc,WAAW;AAChC,MAAI,WAAW,UAAU;AACzB,MAAI,eAAe,UAAU;AAC7B,MAAI,cAAc,aAAa;AAC/B,MAAI,eAAe,UAAU,eAAe,CAAC;AAC7C,MAAI,gBAAgB,UAAU,gBAAgB,CAAC;AAC/C,MAAI,YAAY,CAAC;AACjB,MAAI;AAEJ,MAAI,SAAS,SAAS,YAAY;AAChC,gBAAY,SAAS,aAAa;AAAA,EACpC,OAAO;AACL,QAAI,iBAAiB;AACrB,IAAAA,MAAK,cAAc,SAAU,aAAa;AACxC,uBAAiB,KAAK,IAAI,gBAAgB,YAAY,QAAQ,EAAE,MAAM,CAAC;AAAA,IACzE,CAAC;AACD,QAAI,SAAS,SAAS,UAAU;AAChC,gBAAY,KAAK,IAAI,OAAO,KAAK,OAAO,EAAE,IAAI;AAAA,EAChD;AAEA,EAAAA,MAAK,cAAc,SAAU,aAAa;AACxC,QAAI,gBAAgB,YAAY,IAAI,UAAU;AAE9C,QAAI,CAAQ,QAAQ,aAAa,GAAG;AAClC,sBAAgB,CAAC,eAAe,aAAa;AAAA,IAC/C;AAEA,cAAU,KAAK,CAACC,cAAa,cAAc,IAAI,SAAS,KAAK,GAAGA,cAAa,cAAc,IAAI,SAAS,KAAK,CAAC,CAAC;AAAA,EACjH,CAAC;AACD,MAAI,iBAAiB,YAAY,MAAM;AACvC,MAAI,SAAS,iBAAiB,cAAc;AAC5C,MAAI,YAAY,iBAAiB,UAAU,cAAc,MAAM;AAC/D,MAAI,OAAO,WAAW,IAAI,iBAAiB;AAC3C,EAAAD,MAAK,cAAc,SAAU,aAAa,KAAK;AAC7C,kBAAc,KAAK,IAAI;AACvB,YAAQ,SAAS;AACjB,iBAAa,KAAK,KAAK,IAAI,KAAK,IAAI,UAAU,UAAU,KAAK,EAAE,GAAG,UAAU,KAAK,EAAE,CAAC;AAAA,EACtF,CAAC;AACH;AAMA,SAAS,mBAAmB,aAAa,QAAQ,UAAU;AACzD,MAAI,WAAW,YAAY;AAC3B,MAAI,OAAO,YAAY,QAAQ;AAC/B,MAAI,YAAY,WAAW;AAC3B,MAAI,UAAU,YAAY,IAAI,QAAQ,MAAM,eAAe,IAAI;AAC/D,MAAI,UAAU,IAAI;AAClB,MAAI,YAAY,CAAC,KAAK,GAAG;AACzB,MAAI,OAAO,KAAK,aAAa,UAAU,QAAQ;AAC/C,MAAI,QAAQ,KAAK,iBAAiB,UAAU,QAAQ;AAEpD,MAAI,QAAQ,QAAQ,MAAM,SAAS,GAAG;AACpC;AAAA,EACF;AAEA,WAAS,YAAY,GAAG,YAAY,KAAK,MAAM,GAAG,aAAa;AAC7D,QAAI,aAAa,KAAK,IAAI,MAAM,SAAS;AACzC,QAAI,SAAS,SAAS,YAAY,MAAM,IAAI,SAAS;AACrD,QAAI,OAAO,SAAS,YAAY,MAAM,IAAI,SAAS;AACnD,QAAI,OAAO,SAAS,YAAY,MAAM,IAAI,SAAS;AACnD,QAAI,OAAO,SAAS,YAAY,MAAM,IAAI,SAAS;AACnD,QAAI,OAAO,SAAS,YAAY,MAAM,IAAI,SAAS;AACnD,QAAI,OAAO,CAAC;AACZ,eAAW,MAAM,MAAM,KAAK;AAC5B,eAAW,MAAM,MAAM,IAAI;AAC3B,SAAK,KAAK,MAAM,MAAM,MAAM,IAAI;AAChC,eAAW,MAAM,IAAI;AACrB,eAAW,MAAM,IAAI;AACrB,eAAW,MAAM,MAAM;AACvB,SAAK,cAAc,WAAW;AAAA,MAC5B,cAAc,OAAO;AAAA,MACrB;AAAA,IACF,CAAC;AAAA,EACH;AAEA,WAAS,SAASE,aAAY,KAAKC,YAAW;AAC5C,QAAI,MAAM,KAAK,IAAI,KAAKA,UAAS;AACjC,QAAI,IAAI,CAAC;AACT,MAAE,WAAWD;AACb,MAAE,WAAW;AACb,QAAI;AAEJ,QAAI,MAAMA,WAAU,KAAK,MAAM,GAAG,GAAG;AACnC,cAAQ,CAAC,KAAK,GAAG;AAAA,IACnB,OAAO;AACL,cAAQ,SAAS,YAAY,CAAC;AAC9B,YAAM,YAAY;AAAA,IACpB;AAEA,WAAO;AAAA,EACT;AAEA,WAAS,WAAWE,OAAM,OAAO,OAAO;AACtC,QAAI,SAAS,MAAM,MAAM;AACzB,QAAI,SAAS,MAAM,MAAM;AACzB,WAAO,YAAY;AACnB,WAAO,YAAY;AACnB,YAAQA,MAAK,KAAK,QAAQ,MAAM,IAAIA,MAAK,KAAK,QAAQ,MAAM;AAAA,EAC9D;AAEA,WAAS,WAAWA,OAAM,WAAW;AACnC,QAAI,OAAO,UAAU,MAAM;AAC3B,QAAI,KAAK,UAAU,MAAM;AACzB,SAAK,YAAY;AACjB,OAAG,YAAY;AACf,IAAAA,MAAK,KAAK,MAAM,EAAE;AAAA,EACpB;AACF;;;ACzIe,SAAR,mBAAoC,SAAS,KAAK;AACvD,QAAM,OAAO,CAAC;AACd,MAAI,UAAU,CAAC;AACf,MAAI,WAAW,CAAC;AAChB,MAAI,WAAW,IAAI;AACnB,MAAI,aAAa,aAAa,UAAU,aAAa;AAErD,WAAS,IAAI,GAAG,IAAI,QAAQ,QAAQ,KAAK;AACvC,QAAI,UAAU,IAAI,QAAQ,GAAG,MAAM,CAAC;AACpC,QAAI,KAAK,SAAS,SAAS,IAAI;AAC/B,QAAI,KAAK,SAAS,SAAS,GAAG;AAC9B,QAAI,KAAK,SAAS,SAAS,IAAI;AAC/B,QAAI,MAAM,QAAQ;AAClB,QAAI,MAAM,QAAQ,QAAQ,SAAS;AACnC,QAAI,SAAS,YAAY,OAAO,MAAM,aAAa,KAAK;AACxD,QAAI,MAAM,aAAa,MAAM,KAAK,IAAI,KAAK,KAAK,KAAK;AACrD,QAAI,OAAO,aAAa,MAAM,KAAK,IAAI,KAAK,KAAK,KAAK;AACtD,QAAI,oBAAoB,IAAI;AAC5B,QAAI,WAAW,WAAW,iBAAiB,IAAI,kBAAkB;AAAA,MAC/D,OAAO;AAAA,IACT,CAAC,IAAI,SAAS,iBAAiB,IAAI,kBAAkB,QAAQ,WAAW,IAAI,EAAE,IAAI,IAAI;AACtF,YAAQ,KAAK,CAAC,UAAU,KAAK,IAAI,IAAI,IAAI,IAAI,CAAC;AAE9C,aAAS,IAAI,GAAG,IAAI,QAAQ,QAAQ,KAAK;AACvC,UAAI,WAAW,QAAQ;AAEvB,UAAI,WAAW,OAAO,WAAW,MAAM;AACrC,YAAI,UAAU,CAAC,UAAU,QAAQ;AACjC,iBAAS,KAAK,OAAO;AAAA,MACvB;AAAA,IACF;AAAA,EACF;AAEA,SAAO;AAAA,IACL;AAAA,IACA;AAAA,EACF;AACF;;;ACtDO,IAAI,mBAAmB;AAAA,EAC5B,MAAM;AAAA,EACN,WAAW,SAAS,UAAU,QAAQ;AACpC,QAAI,WAAW,OAAO;AAEtB,QAAI,SAAS,iBAAiB,0BAA0B;AACtD,UAAI,SAAS;AAEb,UAAI,MAAuC;AACzC,iBAAS,cAAc,8EAA8E;AAAA,MACvG;AAEA,iBAAW,MAAM;AAAA,IACnB;AAEA,QAAI,SAAS,mBAAmB,SAAS,WAAW,GAAG,OAAO,MAAM;AACpE,WAAO,CAAC;AAAA,MACN,YAAY,CAAC,YAAY,OAAO,MAAM,MAAM,MAAM,MAAM;AAAA,MACxD,MAAM,OAAO;AAAA,IACf,GAAG;AAAA,MACD,MAAM,OAAO;AAAA,IACf,CAAC;AAAA,EACH;AACF;;;ACtBO,SAASC,UAAQ,WAAW;AACjC,YAAU,oBAAoB,qBAAkB;AAChD,YAAU,kBAAkB,mBAAW;AACvC,YAAU,eAAe,aAAa;AACtC,YAAU,kBAAkB,gBAAgB;AAC9C;;;ACDA,IAAI,aAAa,CAAC,SAAS,aAAa;AAExC,IAAI,kBAEJ,SAAU,QAAQ;AAChB,YAAUC,kBAAiB,MAAM;AAEjC,WAASA,mBAAkB;AACzB,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,iBAAgB;AAC7B,WAAO;AAAA,EACT;AAEA,EAAAA,iBAAgB,UAAU,SAAS,SAAU,aAAa,SAAS,KAAK;AAEtE,SAAK,MAAM,eAAe;AAE1B,SAAK,kBAAkB;AAEvB,SAAK,gBAAgB,WAAW;AAEhC,SAAK,eAAe,KAAK,aAAa,WAAW,IAAI,KAAK,cAAc,WAAW;AAAA,EACrF;AAEA,EAAAA,iBAAgB,UAAU,2BAA2B,SAAU,aAAa,SAAS,KAAK;AACxF,SAAK,OAAO;AAEZ,SAAK,gBAAgB,WAAW;AAAA,EAClC;AAEA,EAAAA,iBAAgB,UAAU,oBAAoB,SAAU,QAAQ,aAAa,SAAS,KAAK;AACzF,SAAK,kBAAkB,CAAC;AACxB,SAAK,eAAe,KAAK,wBAAwB,QAAQ,WAAW,IAAI,KAAK,yBAAyB,QAAQ,WAAW;AAAA,EAC3H;AAEA,EAAAA,iBAAgB,UAAU,eAAe,SAAU,IAAI;AACrD,IAAQ,iBAAiB,KAAK,mBAAmB,KAAK,OAAO,EAAE;AAAA,EACjE;AAEA,EAAAA,iBAAgB,UAAU,kBAAkB,SAAU,aAAa;AACjE,QAAI,cAAc,YAAY,gBAAgB;AAE9C,QAAI,KAAK,gBAAgB,QAAQ,gBAAgB,KAAK,cAAc;AAClE,WAAK,eAAe;AAEpB,WAAK,OAAO;AAAA,IACd;AAAA,EACF;AAEA,EAAAA,iBAAgB,UAAU,gBAAgB,SAAU,aAAa;AAC/D,QAAI,OAAO,YAAY,QAAQ;AAC/B,QAAI,UAAU,KAAK;AACnB,QAAI,QAAQ,KAAK;AACjB,QAAI,cAAc,KAAK,UAAU,aAAa;AAC9C,QAAI,YAAY,YAAY,IAAI,QAAQ,IAAI;AAC5C,QAAI,QAAQ,YAAY;AACxB,QAAI,WAAW,MAAM,WAAW,MAAM,QAAQ;AAG9C,QAAI,CAAC,KAAK,OAAO;AACf,YAAM,UAAU;AAAA,IAClB;AAEA,SAAK,KAAK,OAAO,EAAE,IAAI,SAAU,QAAQ;AACvC,UAAI,KAAK,SAAS,MAAM,GAAG;AACzB,YAAI,aAAa,KAAK,cAAc,MAAM;AAE1C,YAAI,aAAa,mBAAmB,UAAU,UAAU,GAAG;AACzD;AAAA,QACF;AAEA,YAAI,KAAKC,iBAAgB,YAAY,QAAQ,IAAI;AACjD,QAAQ,UAAU,IAAI;AAAA,UACpB,OAAO;AAAA,YACL,QAAQ,WAAW;AAAA,UACrB;AAAA,QACF,GAAG,aAAa,MAAM;AACtB,qBAAa,IAAI,MAAM,QAAQ,WAAW;AAC1C,cAAM,IAAI,EAAE;AACZ,aAAK,iBAAiB,QAAQ,EAAE;AAAA,MAClC;AAAA,IACF,CAAC,EAAE,OAAO,SAAU,QAAQ,QAAQ;AAClC,UAAI,KAAK,QAAQ,iBAAiB,MAAM;AAExC,UAAI,CAAC,KAAK,SAAS,MAAM,GAAG;AAC1B,cAAM,OAAO,EAAE;AACf;AAAA,MACF;AAEA,UAAI,aAAa,KAAK,cAAc,MAAM;AAE1C,UAAI,aAAa,mBAAmB,UAAU,UAAU,GAAG;AACzD,cAAM,OAAO,EAAE;AACf;AAAA,MACF;AAEA,UAAI,CAAC,IAAI;AACP,aAAKA,iBAAgB,YAAY,MAAM;AAAA,MACzC,OAAO;AACL,QAAQ,YAAY,IAAI;AAAA,UACtB,OAAO;AAAA,YACL,QAAQ,WAAW;AAAA,UACrB;AAAA,QACF,GAAG,aAAa,MAAM;AACtB,qBAAa,EAAE;AAAA,MACjB;AAEA,mBAAa,IAAI,MAAM,QAAQ,WAAW;AAC1C,YAAM,IAAI,EAAE;AACZ,WAAK,iBAAiB,QAAQ,EAAE;AAAA,IAClC,CAAC,EAAE,OAAO,SAAU,QAAQ;AAC1B,UAAI,KAAK,QAAQ,iBAAiB,MAAM;AACxC,YAAM,MAAM,OAAO,EAAE;AAAA,IACvB,CAAC,EAAE,QAAQ;AACX,SAAK,QAAQ;AAAA,EACf;AAEA,EAAAD,iBAAgB,UAAU,eAAe,SAAU,aAAa;AAC9D,SAAK,OAAO;AAEZ,IAAAE,aAAY,aAAa,KAAK,KAAK;AACnC,QAAI,WAAW,YAAY,IAAI,QAAQ,IAAI,IAAI,eAAe,YAAY,kBAAkB,OAAO,WAAW,IAAI;AAElH,QAAI,UAAU;AACZ,WAAK,MAAM,YAAY,QAAQ;AAAA,IACjC,OAAO;AACL,WAAK,MAAM,eAAe;AAAA,IAC5B;AAAA,EACF;AAEA,EAAAF,iBAAgB,UAAU,2BAA2B,SAAU,QAAQ,aAAa;AAClF,QAAI,OAAO,YAAY,QAAQ;AAC/B,QAAI,cAAc,KAAK,UAAU,aAAa;AAC9C,QAAI;AAEJ,YAAQ,YAAY,OAAO,KAAK,MAAM,MAAM;AAC1C,UAAI,aAAa,KAAK,cAAc,SAAS;AAC7C,UAAI,KAAKC,iBAAgB,YAAY,SAAS;AAC9C,mBAAa,IAAI,MAAM,WAAW,WAAW;AAC7C,SAAG,cAAc;AACjB,WAAK,MAAM,IAAI,EAAE;AAEjB,WAAK,gBAAgB,KAAK,EAAE;AAAA,IAC9B;AAAA,EACF;AAEA,EAAAD,iBAAgB,UAAU,0BAA0B,SAAU,QAAQ,aAAa;AACjF,IAAAE,aAAY,aAAa,KAAK,OAAO,KAAK,iBAAiB,IAAI;AAAA,EACjE;AAEA,EAAAF,iBAAgB,UAAU,SAAS,SAAU,SAAS;AACpD,SAAK,OAAO;AAAA,EACd;AAEA,EAAAA,iBAAgB,UAAU,SAAS,WAAY;AAC7C,SAAK,MAAM,UAAU;AACrB,SAAK,QAAQ;AAAA,EACf;AAEA,EAAAA,iBAAgB,OAAO;AACvB,SAAOA;AACT,EAAE,aAAS;AAEX,IAAI,qBAEJ,WAAY;AACV,WAASG,sBAAqB;AAAA,EAAC;AAE/B,SAAOA;AACT,EAAE;AAEF,IAAI,gBAEJ,SAAU,QAAQ;AAChB,YAAUC,gBAAe,MAAM;AAE/B,WAASA,eAAc,MAAM;AAC3B,QAAI,QAAQ,OAAO,KAAK,MAAM,IAAI,KAAK;AAEvC,UAAM,OAAO;AACb,WAAO;AAAA,EACT;AAEA,EAAAA,eAAc,UAAU,kBAAkB,WAAY;AACpD,WAAO,IAAI,mBAAmB;AAAA,EAChC;AAEA,EAAAA,eAAc,UAAU,YAAY,SAAU,KAAK,OAAO;AACxD,QAAI,OAAO,MAAM;AAEjB,QAAI,KAAK,aAAa;AACpB,UAAI,OAAO,KAAK,GAAG,IAAI,KAAK,GAAG,EAAE;AACjC,UAAI,OAAO,KAAK,GAAG,IAAI,KAAK,GAAG,EAAE;AAAA,IACnC,OAAO;AACL,UAAI,OAAO,KAAK,GAAG,IAAI,KAAK,GAAG,EAAE;AACjC,UAAI,OAAO,KAAK,GAAG,IAAI,KAAK,GAAG,EAAE;AACjC,UAAI,OAAO,KAAK,GAAG,IAAI,KAAK,GAAG,EAAE;AACjC,UAAI,OAAO,KAAK,GAAG,IAAI,KAAK,GAAG,EAAE;AACjC,UAAI,UAAU;AACd,UAAI,OAAO,KAAK,GAAG,IAAI,KAAK,GAAG,EAAE;AACjC,UAAI,OAAO,KAAK,GAAG,IAAI,KAAK,GAAG,EAAE;AACjC,UAAI,OAAO,KAAK,GAAG,IAAI,KAAK,GAAG,EAAE;AACjC,UAAI,OAAO,KAAK,GAAG,IAAI,KAAK,GAAG,EAAE;AAAA,IACnC;AAAA,EACF;AAEA,SAAOA;AACT,EAAE,YAAI;AAEN,SAASH,iBAAgB,YAAY,WAAW,QAAQ;AACtD,MAAI,OAAO,WAAW;AACtB,SAAO,IAAI,cAAc;AAAA,IACvB,OAAO;AAAA,MACL,QAAQ,SAASI,WAAU,MAAM,UAAU,IAAI;AAAA,IACjD;AAAA,IACA,IAAI;AAAA,EACN,CAAC;AACH;AAEA,SAAS,mBAAmB,UAAU,YAAY;AAChD,MAAI,UAAU;AAEd,WAAS,IAAI,GAAG,IAAI,WAAW,KAAK,QAAQ,KAAK;AAE/C,QAAI,SAAS,QAAQ,WAAW,KAAK,GAAG,IAAI,WAAW,KAAK,GAAG,EAAE,GAAG;AAClE,gBAAU;AACV;AAAA,IACF;AAAA,EACF;AAEA,SAAO;AACT;AAEA,SAAS,aAAa,IAAI,MAAM,WAAW,aAAa;AACtD,MAAI,YAAY,KAAK,aAAa,SAAS;AAC3C,KAAG,SAAS,KAAK,cAAc,WAAW,OAAO,CAAC;AAClD,KAAG,MAAM,gBAAgB;AACzB,KAAG,cAAc;AACjB,2BAAyB,IAAI,SAAS;AACxC;AAEA,SAASA,WAAU,QAAQ,YAAY;AACrC,SAAc,IAAI,QAAQ,SAAU,OAAO;AACzC,YAAQ,MAAM,MAAM;AACpB,UAAM,KAAK,WAAW;AACtB,WAAO;AAAA,EACT,CAAC;AACH;AAEA,IAAI,oBAEJ,WAAY;AACV,WAASC,qBAAoB;AAAA,EAAC;AAE9B,SAAOA;AACT,EAAE;AAEF,IAAI,eAEJ,SAAU,QAAQ;AAChB,YAAUC,eAAc,MAAM;AAE9B,WAASA,cAAa,MAAM;AAC1B,QAAI,QAAQ,OAAO,KAAK,MAAM,IAAI,KAAK;AAEvC,UAAM,OAAO;AACb,WAAO;AAAA,EACT;AAEA,EAAAA,cAAa,UAAU,kBAAkB,WAAY;AACnD,WAAO,IAAI,kBAAkB;AAAA,EAC/B;AAEA,EAAAA,cAAa,UAAU,YAAY,SAAU,KAAK,OAAO;AAGvD,QAAI,SAAS,MAAM;AAEnB,aAAS,IAAI,GAAG,IAAI,OAAO,UAAS;AAClC,UAAI,KAAK,WAAW,OAAO,MAAM;AAC/B,YAAI,IAAI,OAAO;AACf,YAAI,OAAO,GAAG,OAAO,IAAI;AACzB,YAAI,OAAO,GAAG,OAAO,IAAI;AAAA,MAC3B,OAAO;AACL,aAAK;AAAA,MACP;AAAA,IACF;AAAA,EACF;AAEA,SAAOA;AACT,EAAE,YAAI;AAEN,SAASL,aAAY,aAAa,OAAO,gBAAgB,aAAa;AACpE,MAAI,OAAO,YAAY,QAAQ;AAC/B,MAAI,cAAc,KAAK,UAAU,aAAa;AAC9C,MAAI,MAAM,IAAI,aAAa;AAAA,IACzB,OAAO;AAAA,MACL,QAAQ;AAAA,IACV;AAAA,IACA,QAAQ;AAAA,IACR,qBAAqB;AAAA,EACvB,CAAC;AACD,QAAM,IAAI,GAAG;AACb,MAAI,MAAM,IAAI,aAAa;AAAA,IACzB,OAAO;AAAA,MACL,QAAQ;AAAA,IACV;AAAA,IACA,QAAQ;AAAA,IACR,qBAAqB;AAAA,EACvB,CAAC;AACD,QAAM,IAAI,GAAG;AACb,MAAI,SAAS,IAAI,aAAa;AAAA,IAC5B,OAAO;AAAA,MACL,QAAQ;AAAA,IACV;AAAA,IACA,QAAQ;AAAA,IACR,qBAAqB;AAAA,EACvB,CAAC;AACD,QAAM,IAAI,MAAM;AAChB,gBAAc,GAAG,KAAK,aAAa,IAAI;AACvC,gBAAc,IAAI,KAAK,aAAa,IAAI;AACxC,gBAAc,GAAG,QAAQ,aAAa,IAAI;AAE1C,MAAI,aAAa;AACf,QAAI,cAAc;AAClB,QAAI,cAAc;AAAA,EACpB;AAEA,MAAI,gBAAgB;AAClB,mBAAe,KAAK,KAAK,GAAG;AAAA,EAC9B;AACF;AAEA,SAAS,cAAc,MAAM,IAAI,aAAa,MAAM;AAElD,MAAI,cAAc,YAAY,IAAI,CAAC,aAAa,OAAO,IAAI,gBAAgB,cAAc,CAAC,KACvF,YAAY,IAAI,CAAC,aAAa,OAAO,IAAI,UAAU,QAAQ,CAAC;AAE/D,MAAI,SAAS,GAAG;AACd,kBAAc,YAAY,IAAI,CAAC,aAAa,iBAAiB,CAAC;AAAA,EAChE;AAIA,MAAI,YAAY,YAAY,SAAS,WAAW,EAAE,aAAa,UAAU;AACzE,KAAG,SAAS,SAAS;AACrB,KAAG,MAAM,OAAO;AAChB,KAAG,MAAM,SAAS;AACpB;AAEA,IAAO,0BAAQ;;;AClWf,IAAI,yBAEJ,SAAU,QAAQ;AAChB,YAAUM,yBAAwB,MAAM;AAExC,WAASA,0BAAyB;AAChC,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,wBAAuB;AACpC,UAAM,yBAAyB,CAAC;AAAA,MAC9B,MAAM;AAAA,MACN,gBAAgB;AAAA,IAClB,GAAG;AAAA,MACD,MAAM;AAAA,MACN,gBAAgB;AAAA,IAClB,GAAG;AAAA,MACD,MAAM;AAAA,MACN,gBAAgB;AAAA,IAClB,GAAG;AAAA,MACD,MAAM;AAAA,MACN,gBAAgB;AAAA,IAClB,CAAC;AACD,WAAO;AAAA,EACT;AAOA,EAAAA,wBAAuB,UAAU,eAAe,WAAY;AAC1D,WAAO;AAAA,EACT;AAEA,EAAAA,wBAAuB,UAAU,gBAAgB,SAAU,WAAW,MAAM,WAAW;AACrF,QAAI,aAAa,KAAK,cAAc,SAAS;AAC7C,WAAO,cAAc,UAAU,KAAK,WAAW,SAAS;AAAA,EAC1D;AAEA,EAAAA,wBAAuB,OAAO;AAC9B,EAAAA,wBAAuB,eAAe,CAAC,SAAS,SAAS,MAAM;AAC/D,EAAAA,wBAAuB,gBAAgB;AAAA,IAErC,GAAG;AAAA,IACH,kBAAkB;AAAA,IAClB,iBAAiB;AAAA,IAGjB,QAAQ;AAAA,IACR,MAAM;AAAA,IACN,WAAW;AAAA,MACT,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,aAAa;AAAA,MACb,cAAc;AAAA,MACd,iBAAiB;AAAA,MAGjB,aAAa;AAAA,IACf;AAAA,IACA,UAAU;AAAA,MACR,OAAO;AAAA,MACP,WAAW;AAAA,QACT,aAAa;AAAA,MACf;AAAA,IACF;AAAA,IACA,aAAa;AAAA,IACb,aAAa;AAAA,IACb,UAAU;AAAA,IACV,OAAO;AAAA,IACP,gBAAgB;AAAA,IAChB,aAAa;AAAA,IACb,sBAAsB;AAAA,IACtB,sBAAsB;AAAA,IACtB,iBAAiB;AAAA,IACjB,mBAAmB;AAAA,EACrB;AACA,SAAOA;AACT,EAAE,cAAW;AAEb,MAAM,wBAAwB,uBAAuB,IAAI;AACzD,IAAO,4BAAQ;;;ACrFA,SAAR,wBAAyC,QAAQ;AACtD,MAAI,CAAC,UAAU,CAAQ,QAAQ,OAAO,MAAM,GAAG;AAC7C;AAAA,EACF;AAGA,EAAO,KAAK,OAAO,QAAQ,SAAU,YAAY;AAC/C,QAAW,SAAS,UAAU,KAAK,WAAW,SAAS,KAAK;AAC1D,iBAAW,OAAO;AAAA,IACpB;AAAA,EACF,CAAC;AACH;;;ACVA,IAAI,2BAA2B,CAAC,aAAa,aAAa;AAC1D,IAAI,2BAA2B,CAAC,aAAa,cAAc;AAC3D,IAAI,uBAAuB,CAAC,aAAa,iBAAiB;AAC1D,IAAI,qBAAqB,CAAC,aAAa,OAAO;AAC9C,IAAI,qBAAqB,CAAC,aAAa,QAAQ;AAC/C,IAAI,oBAAoB;AAAA,EACtB,YAAY;AAAA,EACZ,MAAM,oBAAoB;AAAA,EAE1B,kBAAkB;AAAA,EAClB,OAAO,SAAU,aAAa,SAAS;AACrC,aAAS,SAAS,MAAM,OAAO;AAC7B,aAAO,MAAM,IAAI,OAAO,IAAI,qBAAqB,kBAAkB;AAAA,IACrE;AAEA,aAAS,eAAe,MAAM,OAAO;AACnC,aAAO,MAAM,IAAI,SAAS,IAAI,uBAAuB,OAAO,IAAI,2BAA2B,wBAAwB;AAAA,IACrH;AAGA,QAAI,QAAQ,iBAAiB,WAAW,GAAG;AACzC;AAAA,IACF;AAEA,QAAI,gBAAgB,YAAY,gBAAgB;AAChD,WAAO,CAAC,iBAAiB;AAAA,MACvB,UAAU,SAAU,QAAQ,MAAM;AAChC,YAAI;AAEJ,gBAAQ,YAAY,OAAO,KAAK,MAAM,MAAM;AAC1C,cAAI,YAAY,KAAK,aAAa,SAAS;AAC3C,cAAI,OAAO,KAAK,cAAc,SAAS,EAAE;AACzC,cAAI,QAAQ,UAAU,aAAa;AACnC,gBAAM,OAAO,SAAS,MAAM,SAAS;AACrC,gBAAM,SAAS,eAAe,MAAM,SAAS,KAAK,MAAM;AACxD,cAAI,cAAc,KAAK,uBAAuB,WAAW,OAAO;AAChE,iBAAO,aAAa,KAAK;AAAA,QAC3B;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;AACA,IAAO,4BAAQ;;;ACvCf,IAAI,oBAAoB;AAAA,EACtB,YAAY;AAAA,EACZ,MAAM,oBAAoB;AAAA,EAC1B,OAAO,SAAU,aAAa;AAC5B,QAAI,WAAW,YAAY;AAC3B,QAAI,OAAO,YAAY,QAAQ;AAC/B,QAAI,cAAc,qBAAqB,aAAa,IAAI;AACxD,QAAI,UAAU;AACd,QAAI,UAAU;AACd,QAAI,YAAY,CAAC,KAAK,GAAG;AACzB,QAAI,QAAQ,KAAK,kBAAkB,KAAK,aAAa,UAAU,QAAQ,CAAC;AACxE,QAAI,SAAS,IAAI,KAAK,iBAAiB,UAAU,QAAQ,GAAG,KAAK,mBAAmB,IAAI;AACxF,QAAI,WAAW,OAAO;AACtB,QAAI,YAAY,OAAO;AACvB,QAAI,aAAa,OAAO;AACxB,QAAI,cAAc,OAAO;AACzB,SAAK,UAAU;AAAA,MACb;AAAA,MAEA,aAAa,eAAe;AAAA,IAC9B,CAAC;AAED,QAAI,QAAQ,KAAK,OAAO,SAAS,GAAG;AAClC;AAAA,IACF;AAEA,WAAO;AAAA,MACL,UAAU,YAAY,gBAAgB,QAAQ,gBAAgB;AAAA,IAChE;AAEA,aAAS,eAAe,QAAQC,OAAM;AACpC,UAAI;AACJ,UAAI,QAAQA,MAAK,SAAS;AAE1B,cAAQ,YAAY,OAAO,KAAK,MAAM,MAAM;AAC1C,YAAI,aAAa,MAAM,IAAI,OAAO,SAAS;AAC3C,YAAI,UAAU,MAAM,IAAI,UAAU,SAAS;AAC3C,YAAI,WAAW,MAAM,IAAI,WAAW,SAAS;AAC7C,YAAI,YAAY,MAAM,IAAI,YAAY,SAAS;AAC/C,YAAI,aAAa,MAAM,IAAI,aAAa,SAAS;AACjD,YAAI,QAAQ,KAAK,IAAI,SAAS,QAAQ;AACtC,YAAI,SAAS,KAAK,IAAI,SAAS,QAAQ;AACvC,YAAI,aAAa,SAAS,OAAO,UAAU;AAC3C,YAAI,cAAc,SAAS,QAAQ,UAAU;AAC7C,YAAI,cAAc,SAAS,WAAW,UAAU;AAChD,YAAI,eAAe,SAAS,YAAY,UAAU;AAClD,YAAI,OAAO,CAAC;AACZ,mBAAW,MAAM,aAAa,CAAC;AAC/B,mBAAW,MAAM,YAAY,CAAC;AAC9B,aAAK,KAAK,sBAAsB,YAAY,GAAG,sBAAsB,WAAW,GAAG,sBAAsB,WAAW,GAAG,sBAAsB,UAAU,CAAC;AACxJ,YAAI,YAAYA,MAAK,aAAa,SAAS;AAC3C,YAAI,eAAe,CAAC,CAAC,UAAU,IAAI,CAAC,aAAa,iBAAiB,CAAC;AACnE,QAAAA,MAAK,cAAc,WAAW;AAAA,UAC5B,MAAM,QAAQ,OAAO,WAAW,SAAS,UAAU,WAAW,YAAY;AAAA,UAC1E,cAAc,UAAU,WAAW,YAAY,WAAW,WAAW;AAAA,UACrE;AAAA,UACA,WAAW,cAAc,WAAW,YAAY,UAAU;AAAA,QAC5D,CAAC;AAAA,MACH;AAEA,eAAS,SAAS,KAAKC,aAAY;AACjC,YAAI,IAAI,CAAC;AACT,UAAE,WAAWA;AACb,UAAE,WAAW;AACb,eAAO,MAAMA,WAAU,KAAK,MAAM,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI,SAAS,YAAY,CAAC;AAAA,MAC9E;AAEA,eAAS,WAAWC,OAAM,OAAO,OAAO;AACtC,YAAI,SAAS,MAAM,MAAM;AACzB,YAAI,SAAS,MAAM,MAAM;AACzB,eAAO,WAAW,iBAAiB,OAAO,WAAW,cAAc,GAAG,GAAG,KAAK;AAC9E,eAAO,WAAW,iBAAiB,OAAO,WAAW,cAAc,GAAG,GAAG,IAAI;AAC7E,gBAAQA,MAAK,KAAK,QAAQ,MAAM,IAAIA,MAAK,KAAK,QAAQ,MAAM;AAAA,MAC9D;AAEA,eAAS,cAAcC,YAAWC,aAAYH,aAAY;AACxD,YAAI,OAAO,SAASE,YAAWF,WAAU;AACzC,YAAI,OAAO,SAASG,aAAYH,WAAU;AAC1C,aAAK,YAAY,cAAc;AAC/B,aAAK,YAAY,cAAc;AAC/B,eAAO;AAAA,UACL,GAAG,KAAK;AAAA,UACR,GAAG,KAAK;AAAA,UACR,OAAO,UAAU,cAAc,KAAK,KAAK,KAAK;AAAA,UAC9C,QAAQ,UAAU,KAAK,KAAK,KAAK,KAAK;AAAA,QACxC;AAAA,MACF;AAEA,eAAS,sBAAsB,OAAO;AACpC,cAAM,WAAW,iBAAiB,MAAM,UAAU,CAAC;AACnD,eAAO;AAAA,MACT;AAAA,IACF;AAEA,aAAS,cAAc,QAAQD,OAAM;AAEnC,UAAI,SAAS,mBAAmB,OAAO,QAAQ,CAAC;AAChD,UAAI,SAAS;AACb,UAAI;AACJ,UAAI,QAAQ,CAAC;AACb,UAAI,SAAS,CAAC;AACd,UAAI;AACJ,UAAI,QAAQA,MAAK,SAAS;AAC1B,UAAI,eAAe,CAAC,CAAC,YAAY,IAAI,CAAC,aAAa,iBAAiB,CAAC;AAErE,cAAQ,YAAY,OAAO,KAAK,MAAM,MAAM;AAC1C,YAAI,aAAa,MAAM,IAAI,OAAO,SAAS;AAC3C,YAAI,UAAU,MAAM,IAAI,UAAU,SAAS;AAC3C,YAAI,WAAW,MAAM,IAAI,WAAW,SAAS;AAC7C,YAAI,YAAY,MAAM,IAAI,YAAY,SAAS;AAC/C,YAAI,aAAa,MAAM,IAAI,aAAa,SAAS;AAEjD,YAAI,MAAM,UAAU,KAAK,MAAM,SAAS,KAAK,MAAM,UAAU,GAAG;AAC9D,iBAAO,YAAY;AACnB,oBAAU;AACV;AAAA,QACF;AAEA,eAAO,YAAY,QAAQ,OAAO,WAAW,SAAS,UAAU,WAAW,YAAY;AACvF,cAAM,WAAW;AACjB,cAAM,WAAW;AACjB,gBAAQ,SAAS,YAAY,OAAO,MAAM,MAAM;AAChD,eAAO,YAAY,QAAQ,MAAM,KAAK;AACtC,eAAO,YAAY,QAAQ,MAAM,KAAK;AACtC,cAAM,WAAW;AACjB,gBAAQ,SAAS,YAAY,OAAO,MAAM,MAAM;AAChD,eAAO,YAAY,QAAQ,MAAM,KAAK;AAAA,MACxC;AAEA,MAAAA,MAAK,UAAU,eAAe,MAAM;AAAA,IACtC;AAAA,EACF;AACF;AASA,SAAS,QAAQ,OAAO,WAAW,SAAS,UAAU,WAAW,cAAc;AAC7E,MAAI;AAEJ,MAAI,UAAU,UAAU;AACtB,WAAO;AAAA,EACT,WAAW,UAAU,UAAU;AAC7B,WAAO;AAAA,EACT,OAAO;AACL,WAAO,eACL,IAAI,YAAY,IAChB,MAAM,IAAI,WAAW,YAAY,CAAC,KAAK,WAAW,IAAI,KACxD;AAAA,EACF;AAEA,SAAO;AACT;AAEA,SAAS,qBAAqB,aAAa,MAAM;AAC/C,MAAI,WAAW,YAAY,YAAY;AACvC,MAAI;AACJ,MAAI,YAAY,SAAS,SAAS,aAAa,SAAS,aAAa,KAAK,SAAS,SAAS,UAAU,GAAG,KAAK,IAAI,OAAO,KAAK,OAAO,EAAE,IAAI,KAAK,MAAM;AACtJ,MAAI,cAAcK,cAAa,UAAU,YAAY,IAAI,aAAa,GAAG,SAAS,GAAG,SAAS;AAC9F,MAAI,cAAcA,cAAa,UAAU,YAAY,IAAI,aAAa,GAAG,CAAC,GAAG,SAAS;AACtF,MAAI,WAAW,YAAY,IAAI,UAAU;AACzC,SAAO,YAAY,OAAOA,cAAa,UAAU,SAAS,IACxD,KAAK,IAAI,KAAK,IAAI,YAAY,GAAG,WAAW,GAAG,WAAW;AAC9D;AAEA,IAAO,4BAAQ;;;ACzKR,SAASC,UAAQ,WAAW;AACjC,YAAU,kBAAkB,uBAAe;AAC3C,YAAU,oBAAoB,yBAAsB;AACpD,YAAU,qBAAqB,uBAAY;AAC3C,YAAU,eAAe,yBAAiB;AAC1C,YAAU,eAAe,yBAAiB;AAC5C;;;ACLA,SAAS,iBAAiB,aAAa,WAAW;AAChD,MAAI,QAAQ,UAAU,qBAAqB,UAAU;AACrD,cAAY,UAAU,SAAU,YAAY;AAC1C,eAAW,KAAK;AAAA,MACd,GAAG,UAAU;AAAA,MACb,QAAQ,UAAU;AAAA,MAClB,OAAO;AAAA,QACL,QAAQ,UAAU,cAAc,WAAW,QAAQ;AAAA,QACnD,MAAM,UAAU,cAAc,SAAS,QAAQ;AAAA,MACjD;AAAA,IACF,CAAC;AAAA,EACH,CAAC;AACH;AAEA,IAAI,eAEJ,SAAU,QAAQ;AAChB,YAAUC,eAAc,MAAM;AAE9B,WAASA,cAAa,MAAM,KAAK;AAC/B,QAAI,QAAQ,OAAO,KAAK,IAAI,KAAK;AAEjC,QAAI,SAAS,IAAI,eAAU,MAAM,GAAG;AACpC,QAAI,cAAc,IAAI,cAAM;AAE5B,UAAM,IAAI,MAAM;AAEhB,UAAM,IAAI,WAAW;AAErB,UAAM,WAAW,MAAM,GAAG;AAE1B,WAAO;AAAA,EACT;AAEA,EAAAA,cAAa,UAAU,sBAAsB,WAAY;AACvD,SAAK,QAAQ,CAAC,EAAE,UAAU;AAAA,EAC5B;AAEA,EAAAA,cAAa,UAAU,uBAAuB,SAAU,WAAW;AACjE,QAAI,aAAa,UAAU;AAC3B,QAAI,QAAQ,UAAU;AACtB,QAAI,eAAe,UAAU;AAC7B,QAAI,cAAc,KAAK,QAAQ,CAAC;AAEhC,aAAS,IAAI,GAAG,IAAI,cAAc,KAAK;AAIrC,UAAI,aAAa,aAAa,YAAY,IAAI,IAAI,GAAG,GAAG,KAAK;AAC7D,iBAAW,KAAK;AAAA,QACd,OAAO;AAAA,UACL,eAAe;AAAA,QACjB;AAAA,QACA,IAAI;AAAA,QACJ,QAAQ;AAAA,QACR,QAAQ;AAAA,QACR,QAAQ;AAAA,MACV,CAAC;AACD,UAAI,QAAQ,CAAC,IAAI,eAAe,UAAU,SAAS,UAAU;AAC7D,iBAAW,QAAQ,IAAI,IAAI,EAAE,KAAK,UAAU,QAAQ;AAAA,QAClD,QAAQ,UAAU,cAAc;AAAA,QAChC,QAAQ,UAAU,cAAc;AAAA,MAClC,CAAC,EAAE,MAAM,KAAK,EAAE,MAAM;AACtB,iBAAW,aAAa,IAAI,EAAE,KAAK,UAAU,QAAQ;AAAA,QACnD,SAAS;AAAA,MACX,CAAC,EAAE,MAAM,KAAK,EAAE,MAAM;AACtB,kBAAY,IAAI,UAAU;AAAA,IAC5B;AAEA,qBAAiB,aAAa,SAAS;AAAA,EACzC;AAMA,EAAAA,cAAa,UAAU,wBAAwB,SAAU,WAAW;AAClE,QAAI,eAAe,KAAK;AACxB,QAAI,cAAc,KAAK,QAAQ,CAAC;AAEhC,QAAI,kBAAkB,CAAC,cAAc,UAAU,eAAe,cAAc;AAE5E,aAAS,IAAI,GAAG,IAAI,gBAAgB,QAAQ,KAAK;AAC/C,UAAI,WAAW,gBAAgB;AAE/B,UAAI,aAAa,cAAc,UAAU,WAAW;AAClD,aAAK,oBAAoB;AACzB,aAAK,qBAAqB,SAAS;AACnC;AAAA,MACF;AAAA,IACF;AAEA,qBAAiB,aAAa,SAAS;AAAA,EACzC;AAMA,EAAAA,cAAa,UAAU,YAAY,WAAY;AAC7C,kBAAc,IAAI;AAAA,EACpB;AAMA,EAAAA,cAAa,UAAU,WAAW,WAAY;AAC5C,kBAAc,IAAI;AAAA,EACpB;AAEA,EAAAA,cAAa,UAAU,gBAAgB,WAAY;AACjD,QAAI,SAAS,KAAK,QAAQ,CAAC;AAC3B,WAAO,UAAU,OAAO,cAAc;AAAA,EACxC;AAMA,EAAAA,cAAa,UAAU,aAAa,SAAU,MAAM,KAAK;AACvD,QAAI,QAAQ;AAEZ,QAAI,cAAc,KAAK;AACvB,SAAK,QAAQ,CAAC,EAAE,WAAW,MAAM,GAAG;AACpC,QAAI,cAAc,KAAK,QAAQ,CAAC;AAChC,QAAI,YAAY,KAAK,aAAa,GAAG;AACrC,QAAI,aAAa,KAAK,cAAc,KAAK,QAAQ;AACjD,QAAI,aAAa,oBAAoB,KAAK,cAAc,KAAK,YAAY,CAAC;AAC1E,QAAI,cAAc,KAAK,cAAc,KAAK,OAAO;AACjD,QAAI,QAAQ,eAAe,YAAY;AACvC,QAAI,gBAAgB,UAAU,SAAS,UAAU;AACjD,gBAAY,SAAS,UAAU;AAC/B,gBAAY,SAAS,SAAU,YAAY;AACzC,iBAAW,SAAS,QAAQ,KAAK;AAAA,IACnC,CAAC;AACD,QAAI,eAAe,sBAAsB,KAAK,cAAc,KAAK,cAAc,GAAG,UAAU;AAE5F,QAAI,cAAc;AAChB,kBAAY,IAAI,aAAa;AAC7B,kBAAY,IAAI,aAAa;AAAA,IAC/B;AAEA,QAAI,eAAe,KAAK,cAAc,KAAK,cAAc;AACzD,gBAAY,YAAY,gBAAgB,KAAK,KAAK,KAAK,OAAO;AAC9D,QAAI,YAAY,CAAC;AACjB,cAAU,eAAe,YAAY,IAAI,cAAc;AACvD,cAAU,cAAc,UAAU,IAAI,CAAC,gBAAgB,OAAO,CAAC;AAC/D,cAAU,YAAY,UAAU,IAAI,CAAC,gBAAgB,WAAW,CAAC;AACjE,cAAU,SAAS,UAAU,IAAI,CAAC,gBAAgB,QAAQ,CAAC,IAAI;AAC/D,cAAU,eAAe,MAAM,KAAK,MAAM;AAC1C,cAAU,IAAI,YAAY,WAAW,GAAG,KAAK;AAC7C,cAAU,SAAS,YAAY,WAAW,QAAQ,KAAK;AACvD,cAAU,aAAa;AACvB,cAAU,QAAQ;AAClB,cAAU,oBAAoB,UAAU,IAAI,CAAC,gBAAgB,OAAO,CAAC;AACrE,cAAU,eAAe,UAAU,IAAI,CAAC,gBAAgB,QAAQ,CAAC;AAEjE,QAAI,UAAU,iBAAiB,UAAU;AACvC,WAAK,aAAa,KAAK,sBAAsB,SAAS,IAAI,KAAK,qBAAqB,SAAS;AAC7F,WAAK,aAAa;AAAA,IACpB,OAAO;AAEL,WAAK,aAAa;AAClB,WAAK,oBAAoB;AAEzB,WAAK,qBAAqB,SAAU,SAAS;AAC3C,YAAI,YAAY,YAAY;AAC1B,cAAI,UAAU,iBAAiB,UAAU;AACvC,kBAAM,qBAAqB,SAAS;AAAA,UACtC;AAAA,QACF,WAAW,YAAY,UAAU;AAC/B,cAAI,UAAU,iBAAiB,UAAU;AACvC,kBAAM,oBAAoB;AAAA,UAC5B;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAEA,SAAK,aAAa;AAClB,wBAAoB,MAAM,cAAc,IAAI,OAAO,GAAG,cAAc,IAAI,WAAW,GAAG,cAAc,IAAI,UAAU,CAAC;AAAA,EACrH;AAEA;AAEA,EAAAA,cAAa,UAAU,UAAU,SAAU,IAAI;AAC7C,UAAM,GAAG;AAAA,EACX;AAEA;AACA,SAAOA;AACT,EAAE,aAAK;AAEP,IAAO,uBAAQ;;;AChMf,IAAI,oBAEJ,SAAU,QAAQ;AAChB,YAAUC,oBAAmB,MAAM;AAEnC,WAASA,qBAAoB;AAC3B,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,mBAAkB;AAC/B,WAAO;AAAA,EACT;AAEA,EAAAA,mBAAkB,UAAU,OAAO,WAAY;AAC7C,SAAK,cAAc,IAAI,mBAAW,oBAAY;AAAA,EAChD;AAEA,EAAAA,mBAAkB,UAAU,SAAS,SAAU,aAAa,SAAS,KAAK;AACxE,QAAI,OAAO,YAAY,QAAQ;AAC/B,QAAI,mBAAmB,KAAK;AAC5B,qBAAiB,WAAW,MAAM;AAAA,MAChC,WAAW,KAAK,cAAc,WAAW;AAAA,IAC3C,CAAC;AACD,SAAK,MAAM,IAAI,iBAAiB,KAAK;AAAA,EACvC;AAEA,EAAAA,mBAAkB,UAAU,gBAAgB,SAAU,aAAa;AACjE,QAAI,WAAW,YAAY;AAC3B,QAAI,WAAW,YAAY,SAAS,WAAW,SAAS,QAAQ;AAChE,WAAO,YAAY,IAAI,QAAQ,IAAI,IAAI,WAAW;AAAA,EACpD;AAEA,EAAAA,mBAAkB,UAAU,kBAAkB,SAAU,aAAa,SAAS,KAAK;AACjF,QAAI,OAAO,YAAY,QAAQ;AAC/B,SAAK,MAAM,MAAM;AACjB,QAAI,MAAM,aAAa,EAAE,EAAE,MAAM,aAAa,SAAS,GAAG;AAE1D,QAAI,IAAI,UAAU;AAChB,UAAI,SAAS;AAAA,QACX,OAAO;AAAA,QACP,KAAK,KAAK,MAAM;AAAA,QAChB,OAAO,KAAK,MAAM;AAAA,MACpB,GAAG,IAAI;AAAA,IACT;AAEA,SAAK,YAAY,aAAa;AAAA,EAChC;AAEA,EAAAA,mBAAkB,UAAU,wBAAwB,SAAU,aAAa;AACzE,QAAI,WAAW,YAAY;AAE3B,QAAI,YAAY,SAAS,kBAAkB;AACzC,WAAK,MAAM,YAAmBC,OAAM,SAAS,iBAAiB,CAAC;AAC/D,WAAK,MAAM,mBAAmB;AAAA,IAChC;AAAA,EACF;AAEA,EAAAD,mBAAkB,UAAU,SAAS,SAAU,SAAS,KAAK;AAC3D,SAAK,eAAe,KAAK,YAAY,OAAO,IAAI;AAAA,EAClD;AAEA,EAAAA,mBAAkB,OAAO;AACzB,SAAOA;AACT,EAAE,aAAS;AAEX,IAAO,4BAAQ;;;ACnEf,IAAI,2BAEJ,SAAU,QAAQ;AAChB,YAAUE,2BAA0B,MAAM;AAE1C,WAASA,4BAA2B;AAClC,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,0BAAyB;AACtC,UAAM,kBAAkB;AACxB,WAAO;AAAA,EACT;AAEA,EAAAA,0BAAyB,UAAU,iBAAiB,SAAU,QAAQ,SAAS;AAC7E,WAAO,yBAAiB,MAAM,MAAM;AAAA,MAClC,oBAAoB;AAAA,IACtB,CAAC;AAAA,EACH;AAEA,EAAAA,0BAAyB,UAAU,gBAAgB,SAAU,WAAW,MAAM,WAAW;AACvF,WAAO,UAAU,MAAM,KAAK,cAAc,SAAS,CAAC;AAAA,EACtD;AAEA,EAAAA,0BAAyB,OAAO;AAChC,EAAAA,0BAAyB,eAAe,CAAC,QAAQ,OAAO;AACxD,EAAAA,0BAAyB,gBAAgB;AAAA,IACvC,kBAAkB;AAAA,IAElB,GAAG;AAAA,IACH,iBAAiB;AAAA,IACjB,YAAY;AAAA,IACZ,aAAa;AAAA,IAEb,cAAc;AAAA,IACd,MAAM;AAAA,IAEN,cAAc;AAAA,MACZ,QAAQ;AAAA,MAER,OAAO;AAAA,MAEP,WAAW;AAAA,MAEX,QAAQ;AAAA,IACV;AAAA,IACA,qBAAqB;AAAA,MACnB,aAAa;AAAA,IACf;AAAA,IASA,YAAY;AAAA,EAMd;AACA,SAAOA;AACT,EAAE,cAAW;AAEb,IAAO,8BAAQ;;;ACnER,SAASC,UAAQ,WAAW;AACjC,YAAU,kBAAkB,yBAAiB;AAC7C,YAAU,oBAAoB,2BAAwB;AACtD,YAAU,eAAe,aAAa,eAAe,CAAC;AACxD;;;ACKA,IAAI,aAEJ,SAAU,QAAQ;AAChB,YAAUC,aAAY,MAAM;AAE5B,WAASA,YAAW,UAAU,KAAK,aAAa;AAC9C,QAAI,QAAQ,OAAO,KAAK,IAAI,KAAK;AAEjC,UAAM,IAAI,MAAM,WAAW,UAAU,KAAK,WAAW,CAAC;AAEtD,UAAM,oBAAoB,UAAU,GAAG;AAEvC,WAAO;AAAA,EACT;AAEA,EAAAA,YAAW,UAAU,aAAa,SAAU,UAAU,KAAK,aAAa;AACtE,WAAO,IAAIC,cAAK,UAAU,KAAK,WAAW;AAAA,EAC5C;AAEA,EAAAD,YAAW,UAAU,sBAAsB,SAAU,UAAU,KAAK;AAClE,QAAI,YAAY,SAAS,aAAa,GAAG;AACzC,QAAI,cAAc,UAAU,SAAS,QAAQ;AAC7C,QAAI,OAAO,YAAY,IAAI,YAAY;AACvC,QAAI,aAAa,YAAY,IAAI,QAAQ;AAEzC,QAAI,CAAQ,QAAQ,IAAI,GAAG;AACzB,aAAO,CAAC,MAAM,IAAI;AAAA,IACpB;AAEA,QAAI,YAAY,SAAS,cAAc,KAAK,OAAO;AACnD,QAAI,QAAQ,YAAY,IAAI,OAAO,KAAK,aAAa,UAAU;AAC/D,QAAI,SAAS,KAAK,QAAQ,CAAC;AAE3B,QAAI,KAAK,gBAAgB,YAAY;AAEnC,WAAK,OAAO,MAAM;AAClB,eAAS,aAAa,YAAY,MAAM,MAAM,GAAG,GAAG,KAAK;AACzD,aAAO,KAAK;AACZ,aAAO,UAAU;AACjB,WAAK,IAAI,MAAM;AAAA,IACjB;AAGA,QAAI,CAAC,QAAQ;AACX;AAAA,IACF;AAGA,WAAO,SAAS,eAAe,KAAK;AACpC,WAAO,SAAS,YAAY,aAAa,CAAC,OAAO,CAAC,CAAC;AACnD,WAAO,SAAS,KAAK;AACrB,WAAO,SAAS,KAAK;AACrB,WAAO,SAAS,KAAK;AACrB,SAAK,cAAc;AACnB,SAAK,eAAe;AAEpB,SAAK,uBAAuB,UAAU,aAAa,GAAG;AAAA,EACxD;AAEA,EAAAA,YAAW,UAAU,yBAAyB,SAAU,UAAU,aAAa,KAAK;AAClF,QAAI,SAAS,KAAK,QAAQ,CAAC;AAE3B,QAAI,CAAC,QAAQ;AACX;AAAA,IACF;AAEA,QAAI,SAAS,SAAS,cAAc,GAAG;AACvC,QAAI,SAAS,YAAY,IAAI,QAAQ,IAAI;AACzC,QAAI,OAAO,YAAY,IAAI,MAAM;AACjC,QAAI,YAAY,YAAY,IAAI,WAAW;AAC3C,QAAI,gBAAgB,YAAY,IAAI,eAAe;AACnD,QAAI,YAAmB,SAAS,YAAY,IAAI,OAAO,GAAG,SAAUE,MAAK;AACvE,aAAOA,OAAM,SAAS,MAAM,IAAI,SAAS;AAAA,IAC3C,CAAC;AAED,WAAO,SAAS;AAEhB,SAAK,uBAAuB,QAAQ,MAAM;AAE1C,QAAI,gBAAgB,GAAG;AACrB,eAAS,KAAK,eAAe,MAAM,IAAI,gBAAgB;AAAA,IACzD;AAEA,QAAI,WAAW,KAAK,WAAW,SAAS,KAAK,SAAS,cAAc,KAAK,YAAY;AACnF,aAAO,cAAc;AACrB,UAAI,WAAW;AAEf,UAAW,WAAW,SAAS,GAAG;AAChC,mBAAW,UAAU,GAAG;AAAA,MAC1B,OAAO;AACL,mBAAW;AAAA,MACb;AAEA,UAAI,OAAO,MAAM,GAAG;AAClB,mBAAW,CAAC,SAAS,OAAO;AAAA,MAC9B;AAEA,WAAK,eAAe,QAAQ,QAAQ,UAAU,MAAM,SAAS;AAAA,IAC/D;AAEA,SAAK,UAAU;AACf,SAAK,QAAQ;AACb,SAAK,aAAa;AAAA,EACpB;AAEA,EAAAF,YAAW,UAAU,iBAAiB,SAAU,QAAQ,QAAQ,UAAU,MAAM,WAAW;AACzF,QAAI,SAAS,GAAG;AACd,aAAO,MAAM;AACb,UAAI,SAAS;AACb,UAAI,WAAW,OAAO,QAAQ,IAAI,IAAI,EAAE,KAAK,YAAY,SAAS,IAAI,QAAQ;AAAA,QAC5E,KAAK,YAAY,IAAI;AAAA,MACvB,CAAC,EAAE,MAAM,QAAQ,EAAE,OAAO,WAAY;AACpC,eAAO,sBAAsB,MAAM;AAAA,MACrC,CAAC;AAED,UAAI,CAAC,MAAM;AACT,iBAAS,KAAK,WAAY;AACxB,iBAAO,OAAO,MAAM;AAAA,QACtB,CAAC;AAAA,MACH;AAEA,eAAS,MAAM;AAAA,IACjB;AAAA,EACF;AAEA,EAAAA,YAAW,UAAU,iBAAiB,SAAU,QAAQ;AAEtD,WAAY,KAAK,OAAO,MAAM,OAAO,KAAK,IAAS,KAAK,OAAO,OAAO,OAAO,IAAI;AAAA,EACnF;AAEA,EAAAA,YAAW,UAAU,yBAAyB,SAAU,QAAQ,QAAQ;AACtE,WAAO,OAAO,OAAO;AACrB,WAAO,OAAO,OAAO;AACrB,WAAO,QAAQ,OAAO,MAAM,EAAE,OAAO,GAAG,KAAK,OAAO,GAAG,MAAM,IAAI,OAAO,GAAG,KAAK,OAAO,GAAG,MAAM,CAAC;AAAA,EACnG;AAEA,EAAAA,YAAW,UAAU,aAAa,SAAU,UAAU,KAAK,aAAa;AACtE,SAAK,QAAQ,CAAC,EAAE,WAAW,UAAU,KAAK,WAAW;AAErD,SAAK,oBAAoB,UAAU,GAAG;AAAA,EACxC;AAEA,EAAAA,YAAW,UAAU,wBAAwB,SAAU,QAAQ;AAC7D,QAAI,KAAK,OAAO;AAChB,QAAI,KAAK,OAAO;AAChB,QAAI,MAAM,OAAO;AACjB,QAAI,IAAI,OAAO,MAAM,IAAI,OAAO,MAAM,IAAI,OAAO;AACjD,QAAI,MAAM,CAAC,OAAO,GAAG,OAAO,CAAC;AAC7B,QAAI,UAAU,IAAI,MAAM;AACxB,QAAIG,eAAwB;AAC5B,QAAIC,yBAAkC;AACtC,QAAI,KAAKD,aAAY,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,CAAC;AAC5C,QAAI,KAAKA,aAAY,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,CAAC;AAE5C,QAAI,KAAK,OAAO,MAAM,IAAIC,uBAAsB,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,CAAC,IAAIA,uBAAsB,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,IAAI,CAAC;AAC5H,QAAI,KAAK,OAAO,MAAM,IAAIA,uBAAsB,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,CAAC,IAAIA,uBAAsB,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,IAAI,CAAC;AAC5H,WAAO,WAAW,CAAC,KAAK,MAAM,IAAI,EAAE,IAAI,KAAK,KAAK;AAElD,QAAI,KAAK,gBAAgB,UAAU,KAAK,gBAAgB,UAAU,KAAK,gBAAgB,aAAa;AAClG,UAAI,OAAO,YAAY,UAAa,OAAO,UAAU,OAAO,KAAK;AAC/D,eAAO,SAAc,KAAK,SAAS,GAAG,IAAI;AAE1C,YAAI,MAAM,GAAG;AACX,cAAI,KAAK,QAAQ,MAAM,IAAI,KAAK,QAAQ,MAAM;AAC9C,cAAI,KAAK,QAAQ,MAAM,IAAI,KAAK,QAAQ,MAAM;AAAA,QAChD;AAAA,MACF,WAAW,OAAO,YAAY,GAAG;AAE/B,eAAO,SAAS,IAAS,KAAK,IAAI,GAAG;AAAA,MACvC,OAAO;AACL,eAAO,SAAS,KAAK,aAAa;AAAA,MACpC;AAAA,IACF;AAEA,WAAO,UAAU,OAAO;AACxB,WAAO,SAAS;AAChB,WAAO,IAAI,IAAI;AACf,WAAO,IAAI,IAAI;AAAA,EACjB;AAEA,EAAAJ,YAAW,UAAU,eAAe,SAAU,UAAU,KAAK;AAC3D,SAAK,QAAQ,CAAC,EAAE,aAAa,UAAU,GAAG;AAC1C,QAAI,cAAc,SAAS,aAAa,GAAG,EAAE,SAAS,QAAQ;AAE9D,SAAK,uBAAuB,UAAU,aAAa,GAAG;AAAA,EACxD;AAEA,SAAOA;AACT,EAAU,aAAK;AAEf,IAAO,qBAAQ;;;ACtMf,IAAI,WAEJ,SAAU,QAAQ;AAChB,YAAUK,WAAU,MAAM;AAE1B,WAASA,UAAS,UAAU,KAAK,aAAa;AAC5C,QAAI,QAAQ,OAAO,KAAK,IAAI,KAAK;AAEjC,UAAM,gBAAgB,UAAU,KAAK,WAAW;AAEhD,WAAO;AAAA,EACT;AAEA,EAAAA,UAAS,UAAU,kBAAkB,SAAU,UAAU,KAAK,aAAa;AAEzE,QAAI,SAAS,SAAS,cAAc,GAAG;AACvC,QAAI,OAAO,IAAY,iBAAS;AAAA,MAC9B,OAAO;AAAA,QACL;AAAA,MACF;AAAA,IACF,CAAC;AACD,SAAK,IAAI,IAAI;AAEb,SAAK,iBAAiB,UAAU,KAAK,WAAW;AAAA,EAClD;AAEA;AAEA,EAAAA,UAAS,UAAU,aAAa,SAAU,UAAU,KAAK,aAAa;AACpE,QAAI,cAAc,SAAS;AAC3B,QAAI,OAAO,KAAK,QAAQ,CAAC;AACzB,QAAI,SAAS;AAAA,MACX,OAAO;AAAA,QACL,QAAQ,SAAS,cAAc,GAAG;AAAA,MACpC;AAAA,IACF;AACA,IAAQ,YAAY,MAAM,QAAQ,aAAa,GAAG;AAElD,SAAK,iBAAiB,UAAU,KAAK,WAAW;AAAA,EAClD;AAEA;AAEA,EAAAA,UAAS,UAAU,mBAAmB,SAAU,UAAU,KAAK,aAAa;AAC1E,QAAI,OAAO,KAAK,QAAQ,CAAC;AACzB,QAAI,YAAY,SAAS,aAAa,GAAG;AACzC,QAAI,oBAAoB,eAAe,YAAY;AACnD,QAAI,QAAQ,eAAe,YAAY;AACvC,QAAI,YAAY,eAAe,YAAY;AAC3C,QAAI,mBAAmB,eAAe,YAAY;AAElD,QAAI,CAAC,eAAe,SAAS,eAAe;AAC1C,UAAI,gBAAgB,UAAU,SAAS,UAAU;AACjD,0BAAoB,cAAc,SAAS,WAAW,EAAE,aAAa;AACrE,yBAAmB,cAAc,IAAI,UAAU;AAC/C,cAAQ,cAAc,IAAI,OAAO;AACjC,kBAAY,cAAc,IAAI,WAAW;AAAA,IAC3C;AAEA,SAAK,SAAS,SAAS,cAAc,KAAK,OAAO,CAAC;AAClD,SAAK,MAAM,OAAO;AAClB,SAAK,MAAM,gBAAgB;AAC3B,QAAI,oBAAoB,KAAK,YAAY,UAAU;AACnD,sBAAkB,QAAQ;AAC1B,wBAAoB,MAAM,OAAO,WAAW,gBAAgB;AAAA,EAC9D;AAEA;AAEA,EAAAA,UAAS,UAAU,eAAe,SAAU,UAAU,KAAK;AACzD,QAAI,WAAW,KAAK,QAAQ,CAAC;AAC7B,aAAS,SAAS,UAAU,SAAS,cAAc,GAAG,CAAC;AAAA,EACzD;AAEA;AACA,SAAOA;AACT,EAAU,aAAK;AAEf,IAAOC,oBAAQ;;;AC7Ef,IAAI,iBAEJ,SAAU,QAAQ;AAChB,YAAUC,iBAAgB,MAAM;AAEhC,WAASA,kBAAiB;AACxB,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,aAAa;AACnB,UAAM,oBAAoB;AAC1B,WAAO;AAAA,EACT;AAGA,EAAAA,gBAAe,UAAU,aAAa,SAAU,UAAU,KAAK,aAAa;AAC1E,WAAO,IAAIC,kBAAS,UAAU,KAAK,WAAW;AAAA,EAChD;AAEA;AAEA,EAAAD,gBAAe,UAAU,yBAAyB,SAAU,QAAQ,QAAQ;AAC1E,SAAK,UAAU;AACf,QAAI,YAAY,CAAC,CAAC;AAClB,QAAIE,OAAM;AAEV,aAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACtC,UAAI,KAAK,OAAO,IAAI;AACpB,UAAI,KAAK,OAAO;AAChB,MAAAA,QAAY,KAAK,IAAI,EAAE;AACvB,gBAAU,KAAKA,IAAG;AAAA,IACpB;AAEA,QAAIA,SAAQ,GAAG;AACb,WAAK,UAAU;AACf;AAAA,IACF;AAEA,aAAS,IAAI,GAAG,IAAI,UAAU,QAAQ,KAAK;AACzC,gBAAU,MAAMA;AAAA,IAClB;AAEA,SAAK,WAAW;AAChB,SAAK,UAAUA;AAAA,EACjB;AAEA;AAEA,EAAAF,gBAAe,UAAU,iBAAiB,WAAY;AACpD,WAAO,KAAK;AAAA,EACd;AAEA;AAEA,EAAAA,gBAAe,UAAU,wBAAwB,SAAU,QAAQ;AACjE,QAAI,IAAI,OAAO,MAAM,IAAI,OAAO,MAAM,IAAI,OAAO;AACjD,QAAI,SAAS,KAAK;AAClB,QAAI,UAAU,KAAK;AACnB,QAAIE,OAAM,OAAO;AAEjB,QAAI,CAAC,SAAS;AAEZ;AAAA,IACF;AAEA,QAAI,YAAY,KAAK;AACrB,QAAI;AAEJ,QAAI,IAAI,KAAK,mBAAmB;AAG9B,UAAI,QAAQ,KAAK,IAAI,YAAY,GAAGA,OAAM,CAAC;AAE3C,WAAK,QAAQ,OAAO,SAAS,GAAG,SAAS;AACvC,YAAI,QAAQ,UAAU,GAAG;AACvB;AAAA,QACF;AAAA,MACF;AAGA,cAAQ,KAAK,IAAI,OAAOA,OAAM,CAAC;AAAA,IACjC,OAAO;AACL,WAAK,QAAQ,WAAW,QAAQA,MAAK,SAAS;AAC5C,YAAI,QAAQ,SAAS,GAAG;AACtB;AAAA,QACF;AAAA,MACF;AAEA,cAAQ,KAAK,IAAI,QAAQ,GAAGA,OAAM,CAAC;AAAA,IACrC;AAEA,QAAI,KAAK,IAAI,QAAQ,WAAW,QAAQ,QAAQ,KAAK,QAAQ;AAC7D,QAAI,KAAK,OAAO;AAChB,QAAI,KAAK,OAAO,QAAQ;AACxB,WAAO,IAAI,GAAG,MAAM,IAAI,KAAK,IAAI,GAAG;AACpC,WAAO,IAAI,GAAG,MAAM,IAAI,KAAK,IAAI,GAAG;AACpC,QAAI,KAAK,OAAO,MAAM,IAAI,GAAG,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG;AACrD,QAAI,KAAK,OAAO,MAAM,IAAI,GAAG,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG;AACrD,WAAO,WAAW,CAAC,KAAK,MAAM,IAAI,EAAE,IAAI,KAAK,KAAK;AAClD,SAAK,aAAa;AAClB,SAAK,oBAAoB;AACzB,WAAO,SAAS;AAAA,EAClB;AAEA;AACA,SAAOF;AACT,EAAE,kBAAU;AAEZ,IAAO,yBAAQ;;;ACzGf,IAAI,sBAEJ,WAAY;AACV,WAASG,uBAAsB;AAC7B,SAAK,WAAW;AAChB,SAAK,YAAY;AACjB,SAAK,OAAO,CAAC;AAAA,EACf;AAEA,SAAOA;AACT,EAAE;AAEF,IAAI,iBAEJ,SAAU,QAAQ;AAChB,YAAUC,iBAAgB,MAAM;AAEhC,WAASA,gBAAe,MAAM;AAC5B,QAAI,QAAQ,OAAO,KAAK,MAAM,IAAI,KAAK;AAEvC,UAAM,OAAO;AACb,UAAM,eAAe;AACrB,WAAO;AAAA,EACT;AAEA,EAAAA,gBAAe,UAAU,QAAQ,WAAY;AAC3C,SAAK,WAAW;AAChB,SAAK,OAAO;AAAA,EACd;AAEA,EAAAA,gBAAe,UAAU,kBAAkB,WAAY;AACrD,WAAO;AAAA,MACL,QAAQ;AAAA,MACR,MAAM;AAAA,IACR;AAAA,EACF;AAEA,EAAAA,gBAAe,UAAU,kBAAkB,WAAY;AACrD,WAAO,IAAI,oBAAoB;AAAA,EACjC;AAEA,EAAAA,gBAAe,UAAU,YAAY,SAAU,KAAK,OAAO;AACzD,QAAI,OAAO,MAAM;AACjB,QAAI,YAAY,MAAM;AACtB,QAAI;AAEJ,QAAI,MAAM,UAAU;AAClB,WAAK,IAAI,KAAK,MAAM,IAAI,KAAK,UAAS;AACpC,YAAI,QAAQ,KAAK;AAEjB,YAAI,QAAQ,GAAG;AACb,cAAI,OAAO,KAAK,MAAM,KAAK,IAAI;AAE/B,mBAAS,IAAI,GAAG,IAAI,OAAO,KAAK;AAC9B,gBAAI,OAAO,KAAK,MAAM,KAAK,IAAI;AAAA,UACjC;AAAA,QACF;AAAA,MACF;AAAA,IACF,OAAO;AACL,WAAK,IAAI,KAAK,MAAM,IAAI,KAAK,UAAS;AACpC,YAAI,KAAK,KAAK;AACd,YAAI,KAAK,KAAK;AACd,YAAI,KAAK,KAAK;AACd,YAAI,KAAK,KAAK;AACd,YAAI,OAAO,IAAI,EAAE;AAEjB,YAAI,YAAY,GAAG;AACjB,cAAI,MAAM,KAAK,MAAM,KAAK,KAAK,MAAM;AACrC,cAAI,MAAM,KAAK,MAAM,KAAK,KAAK,MAAM;AACrC,cAAI,iBAAiB,IAAI,IAAI,IAAI,EAAE;AAAA,QACrC,OAAO;AACL,cAAI,OAAO,IAAI,EAAE;AAAA,QACnB;AAAA,MACF;AAAA,IACF;AAEA,QAAI,KAAK,aAAa;AACpB,WAAK,OAAO;AACZ,WAAK,WAAW;AAAA,IAClB;AAAA,EACF;AAEA,EAAAA,gBAAe,UAAU,gBAAgB,SAAU,GAAG,GAAG;AACvD,QAAI,QAAQ,KAAK;AACjB,QAAI,OAAO,MAAM;AACjB,QAAI,YAAY,MAAM;AACtB,QAAI,YAAY,KAAK,MAAM;AAE3B,QAAI,MAAM,UAAU;AAClB,UAAI,YAAY;AAEhB,eAAS,IAAI,GAAG,IAAI,KAAK,UAAS;AAChC,YAAI,QAAQ,KAAK;AAEjB,YAAI,QAAQ,GAAG;AACb,cAAI,KAAK,KAAK;AACd,cAAI,KAAK,KAAK;AAEd,mBAAS,IAAI,GAAG,IAAI,OAAO,KAAK;AAC9B,gBAAI,KAAK,KAAK;AACd,gBAAI,KAAK,KAAK;AAEd,gBAAgB,cAAc,IAAI,IAAI,IAAI,IAAI,WAAW,GAAG,CAAC,GAAG;AAC9D,qBAAO;AAAA,YACT;AAAA,UACF;AAAA,QACF;AAEA;AAAA,MACF;AAAA,IACF,OAAO;AACL,UAAI,YAAY;AAEhB,eAAS,IAAI,GAAG,IAAI,KAAK,UAAS;AAChC,YAAI,KAAK,KAAK;AACd,YAAI,KAAK,KAAK;AACd,YAAI,KAAK,KAAK;AACd,YAAI,KAAK,KAAK;AAEd,YAAI,YAAY,GAAG;AACjB,cAAI,MAAM,KAAK,MAAM,KAAK,KAAK,MAAM;AACrC,cAAI,MAAM,KAAK,MAAM,KAAK,KAAK,MAAM;AAErC,cAAqBC,eAAc,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,WAAW,GAAG,CAAC,GAAG;AAC3E,mBAAO;AAAA,UACT;AAAA,QACF,OAAO;AACL,cAAgB,cAAc,IAAI,IAAI,IAAI,IAAI,WAAW,GAAG,CAAC,GAAG;AAC9D,mBAAO;AAAA,UACT;AAAA,QACF;AAEA;AAAA,MACF;AAAA,IACF;AAEA,WAAO;AAAA,EACT;AAEA,EAAAD,gBAAe,UAAU,UAAU,SAAU,GAAG,GAAG;AACjD,QAAI,WAAW,KAAK,sBAAsB,GAAG,CAAC;AAC9C,QAAI,OAAO,KAAK,gBAAgB;AAChC,QAAI,SAAS;AACb,QAAI,SAAS;AAEb,QAAI,KAAK,QAAQ,GAAG,CAAC,GAAG;AAEtB,UAAI,UAAU,KAAK,eAAe,KAAK,cAAc,GAAG,CAAC;AACzD,aAAO,WAAW;AAAA,IACpB;AAEA,SAAK,eAAe;AACpB,WAAO;AAAA,EACT;AAEA,EAAAA,gBAAe,UAAU,kBAAkB,WAAY;AAErD,QAAI,OAAO,KAAK;AAEhB,QAAI,CAAC,MAAM;AACT,UAAI,QAAQ,KAAK;AACjB,UAAI,SAAS,MAAM;AACnB,UAAI,OAAO;AACX,UAAI,OAAO;AACX,UAAI,OAAO;AACX,UAAI,OAAO;AAEX,eAAS,IAAI,GAAG,IAAI,OAAO,UAAS;AAClC,YAAI,IAAI,OAAO;AACf,YAAI,IAAI,OAAO;AACf,eAAO,KAAK,IAAI,GAAG,IAAI;AACvB,eAAO,KAAK,IAAI,GAAG,IAAI;AACvB,eAAO,KAAK,IAAI,GAAG,IAAI;AACvB,eAAO,KAAK,IAAI,GAAG,IAAI;AAAA,MACzB;AAEA,aAAO,KAAK,QAAQ,IAAY,qBAAa,MAAM,MAAM,MAAM,IAAI;AAAA,IACrE;AAEA,WAAO;AAAA,EACT;AAEA,SAAOA;AACT,EAAU,YAAI;AAEd,IAAI,gBAEJ,WAAY;AACV,WAASE,iBAAgB;AACvB,SAAK,QAAQ,IAAY,cAAM;AAAA,EACjC;AAMA,EAAAA,eAAc,UAAU,aAAa,SAAU,MAAM;AACnD,SAAK,OAAO;AAEZ,QAAI,SAAS,KAAK,QAAQ;AAE1B,WAAO,SAAS;AAAA,MACd,MAAM,KAAK,UAAU,aAAa;AAAA,IACpC,CAAC;AAED,SAAK,WAAW,QAAQ,IAAI;AAAA,EAC9B;AAEA;AAKA,EAAAA,eAAc,UAAU,2BAA2B,SAAU,MAAM;AACjE,SAAK,MAAM,UAAU;AAErB,SAAK,OAAO;AAAA,EACd;AAEA;AAKA,EAAAA,eAAc,UAAU,oBAAoB,SAAU,YAAY,MAAM;AACtE,QAAI,YAAY,KAAK,UAAU;AAC/B,QAAI,aAAa,KAAK,UAAU,aAAa;AAC7C,QAAI,UAAU,aAAa,UAAU,MAAM;AAG3C,QAAI,WAAW,QAAQ,SAAS,KAAK;AACnC,UAAI,SAAS,QAAQ;AACrB,UAAI,UAAU,IAAI,aAAa,SAAS,WAAW,MAAM;AAEzD,cAAQ,IAAI,OAAO;AACnB,cAAQ,IAAI,YAAY,MAAM;AAC9B,gBAAU,SAAS;AAAA,QACjB,MAAM;AAAA,MACR,CAAC;AAAA,IACH,OAAO;AAEL,WAAK,YAAY,CAAC;AAElB,UAAI,SAAS,KAAK,QAAQ;AAE1B,aAAO,cAAc;AACrB,aAAO,SAAS;AAAA,QACd,MAAM;AAAA,MACR,CAAC;AAED,WAAK,WAAW,QAAQ,IAAI;AAE5B,aAAO,eAAe,WAAW;AAAA,IACnC;AAAA,EACF;AAMA,EAAAA,eAAc,UAAU,SAAS,WAAY;AAC3C,SAAK,OAAO;AAAA,EACd;AAEA,EAAAA,eAAc,UAAU,eAAe,SAAU,IAAI;AACnD,SAAK,UAAU,MAAM,GAAG,KAAK,UAAU,EAAE;AAAA,EAC3C;AAEA,EAAAA,eAAc,UAAU,UAAU,WAAY;AAC5C,QAAI,SAAS,IAAI,eAAe;AAAA,MAC9B,QAAQ;AAAA,MACR,qBAAqB;AAAA,IACvB,CAAC;AAED,SAAK,UAAU,KAAK,MAAM;AAE1B,SAAK,MAAM,IAAI,MAAM;AACrB,WAAO;AAAA,EACT;AAEA,EAAAA,eAAc,UAAU,aAAa,SAAU,QAAQ,MAAM,eAAe;AAC1E,QAAI,YAAY,KAAK;AACrB,WAAO,SAAS;AAAA,MACd,UAAU,UAAU,IAAI,UAAU;AAAA,MAClC,WAAW,UAAU,IAAI,CAAC,aAAa,WAAW,CAAC;AAAA,IACrD,CAAC;AACD,WAAO,SAAS,UAAU,SAAS,WAAW,EAAE,aAAa,CAAC;AAC9D,WAAO,MAAM,gBAAgB;AAC7B,QAAI,QAAQ,KAAK,UAAU,OAAO;AAElC,QAAI,SAAS,MAAM,QAAQ;AACzB,aAAO,SAAS,UAAU,MAAM,MAAM;AAAA,IACxC;AAEA,WAAO,SAAS,QAAQ,IAAI;AAC5B,QAAI,SAAS,UAAU,MAAM;AAG7B,WAAO,cAAc,UAAU;AAC/B,WAAO,GAAG,aAAa,SAAU,GAAG;AAClC,aAAO,YAAY;AACnB,UAAI,YAAY,OAAO;AAEvB,UAAI,YAAY,GAAG;AAEjB,eAAO,YAAY,YAAY,OAAO;AAAA,MACxC;AAAA,IACF,CAAC;AAAA,EACH;AAEA;AAEA,EAAAA,eAAc,UAAU,SAAS,WAAY;AAC3C,SAAK,YAAY,CAAC;AAClB,SAAK,MAAM,UAAU;AAAA,EACvB;AAEA;AACA,SAAOA;AACT,EAAE;AAEF,IAAO,wBAAQ;;;ACpUf,IAAI,cAAc;AAAA,EAChB,YAAY;AAAA,EACZ,MAAM,oBAAoB;AAAA,EAC1B,OAAO,SAAU,aAAa;AAC5B,QAAI,WAAW,YAAY;AAE3B,QAAI,CAAC,UAAU;AACb,UAAI,MAAuC;AACzC,cAAM,iDAAiD;AAAA,MACzD;AAEA;AAAA,IACF;AAEA,QAAI,aAAa,YAAY,IAAI,UAAU;AAC3C,QAAI,UAAU,YAAY,gBAAgB;AAC1C,WAAO;AAAA,MACL,UAAU,SAAU,QAAQ,UAAU;AACpC,YAAI,aAAa,CAAC;AAElB,YAAI,SAAS;AACX,cAAI,SAAS;AACb,cAAI,WAAW,OAAO,MAAM,OAAO;AAEnC,cAAI,YAAY;AACd,gBAAI,mBAAmB;AAEvB,qBAAS,IAAI,OAAO,OAAO,IAAI,OAAO,KAAK,KAAK;AAC9C,kCAAoB,YAAY,mBAAmB,CAAC;AAAA,YACtD;AAEA,qBAAS,IAAI,aAAa,WAAW,mBAAmB,CAAC;AAAA,UAC3D,OAAO;AACL,qBAAS,IAAI,aAAa,WAAW,CAAC;AAAA,UACxC;AAEA,cAAI,SAAS;AACb,cAAI,KAAK,CAAC;AAEV,mBAAS,IAAI,OAAO,OAAO,IAAI,OAAO,KAAK,KAAK;AAC9C,gBAAIC,OAAM,YAAY,cAAc,GAAG,UAAU;AAEjD,gBAAI,YAAY;AACd,qBAAO,YAAYA;AAAA,YACrB;AAEA,qBAAS,IAAI,GAAG,IAAIA,MAAK,KAAK;AAC5B,mBAAK,SAAS,YAAY,WAAW,IAAI,OAAO,EAAE;AAClD,qBAAO,YAAY,GAAG;AACtB,qBAAO,YAAY,GAAG;AAAA,YACxB;AAAA,UACF;AAEA,mBAAS,UAAU,eAAe,MAAM;AAAA,QAC1C,OAAO;AACL,mBAAS,IAAI,OAAO,OAAO,IAAI,OAAO,KAAK,KAAK;AAC9C,gBAAI,YAAY,SAAS,aAAa,CAAC;AACvC,gBAAIA,OAAM,YAAY,cAAc,GAAG,UAAU;AACjD,gBAAI,MAAM,CAAC;AAEX,gBAAI,YAAY;AACd,uBAAS,IAAI,GAAG,IAAIA,MAAK,KAAK;AAC5B,oBAAI,KAAK,SAAS,YAAY,WAAW,EAAE,CAAC;AAAA,cAC9C;AAAA,YACF,OAAO;AACL,kBAAI,KAAK,SAAS,YAAY,WAAW,EAAE;AAC3C,kBAAI,KAAK,SAAS,YAAY,WAAW,EAAE;AAC3C,kBAAI,YAAY,UAAU,IAAI,CAAC,aAAa,WAAW,CAAC;AAExD,kBAAI,CAAC,WAAW;AACd,oBAAI,KAAK,EAAE,IAAI,GAAG,KAAK,IAAI,GAAG,MAAM,KAAK,IAAI,GAAG,KAAK,IAAI,GAAG,MAAM,YAAY,IAAI,GAAG,KAAK,IAAI,GAAG,MAAM,KAAK,IAAI,GAAG,KAAK,IAAI,GAAG,MAAM,SAAS;AAAA,cAChJ;AAAA,YACF;AAEA,qBAAS,cAAc,GAAG,GAAG;AAAA,UAC/B;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;AACA,IAAO,sBAAQ;;;AC1Ef,IAAI,YAEJ,SAAU,QAAQ;AAChB,YAAUC,YAAW,MAAM;AAE3B,WAASA,aAAY;AACnB,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,WAAU;AACvB,WAAO;AAAA,EACT;AAEA,EAAAA,WAAU,UAAU,SAAS,SAAU,aAAa,SAAS,KAAK;AAChE,QAAI,OAAO,YAAY,QAAQ;AAE/B,QAAI,WAAW,KAAK,gBAAgB,MAAM,WAAW;AAErD,QAAI,SAAS,YAAY,IAAI,QAAQ;AACrC,QAAI,cAAc,YAAY,IAAI,CAAC,UAAU,aAAa,CAAC;AAC3D,QAAI,KAAK,IAAI,MAAM;AAInB,QAAI,QAAQ,GAAG,QAAQ,QAAQ,MAAM;AAErC,QAAI,CAAC,OAAO;AACV,SAAG,QAAQ,SAAS,MAAM,EAAE,MAAM,IAAI;AAAA,IACxC;AAGA,QAAI,KAAK,eAAe,QAAQ,CAAC,OAAO;AACtC,SAAG,YAAY,KAAK,aAAa;AAAA,QAC/B,YAAY;AAAA,MACd,CAAC;AAAA,IACH;AAEA,QAAI,KAAK,YAAY,WAAW,KAAK,cAAc,GAAG;AACpD,UAAI,CAAC,OAAO;AACV,WAAG,YAAY,QAAQ;AAAA,UACrB,YAAY;AAAA,UACZ,gBAAgB,KAAK,IAAI,KAAK,IAAI,cAAc,KAAK,KAAK,CAAC,GAAG,CAAC;AAAA,QACjE,CAAC;AAAA,MACH,WAAW,MAAuC;AAChD,gBAAQ,KAAK,yDAA0D;AAAA,MACzE;AAAA,IACF;AAEA,aAAS,WAAW,IAAI;AACxB,QAAI,WAAW,YAAY,IAAI,QAAQ,IAAI,KAAK,eAAe,YAAY,kBAAkB,OAAO,WAAW;AAE/G,QAAI,UAAU;AACZ,WAAK,MAAM,YAAY,QAAQ;AAAA,IACjC,OAAO;AACL,WAAK,MAAM,eAAe;AAAA,IAC5B;AAEA,SAAK,cAAc;AACnB,SAAK,YAAY;AAAA,EACnB;AAEA,EAAAA,WAAU,UAAU,2BAA2B,SAAU,aAAa,SAAS,KAAK;AAClF,QAAI,OAAO,YAAY,QAAQ;AAE/B,QAAI,WAAW,KAAK,gBAAgB,MAAM,WAAW;AAErD,aAAS,yBAAyB,IAAI;AAEtC,SAAK,YAAY,GAAG;AAEpB,SAAK,YAAY;AAAA,EACnB;AAEA,EAAAA,WAAU,UAAU,oBAAoB,SAAU,YAAY,aAAa,SAAS;AAClF,SAAK,UAAU,kBAAkB,YAAY,YAAY,QAAQ,CAAC;AAElE,SAAK,YAAY,WAAW,QAAQ,YAAY,QAAQ,EAAE,MAAM;AAAA,EAClE;AAEA,EAAAA,WAAU,UAAU,eAAe,SAAU,IAAI;AAC/C,SAAK,aAAa,KAAK,UAAU,aAAa,EAAE;AAAA,EAClD;AAEA,EAAAA,WAAU,UAAU,kBAAkB,SAAU,aAAa,SAAS,KAAK;AACzE,QAAI,OAAO,YAAY,QAAQ;AAC/B,QAAI,kBAAkB,YAAY;AAElC,QAAI,CAAC,KAAK,aAAa,gBAAgB,SAAS,gBAAgB,mBAAmB;AAEjF,aAAO;AAAA,QACL,QAAQ;AAAA,MACV;AAAA,IACF,OAAO;AAGL,UAAI,MAAM,oBAAY,MAAM,aAAa,SAAS,GAAG;AAErD,UAAI,IAAI,UAAU;AAChB,YAAI,SAAS;AAAA,UACX,OAAO;AAAA,UACP,KAAK,KAAK,MAAM;AAAA,UAChB,OAAO,KAAK,MAAM;AAAA,QACpB,GAAG,IAAI;AAAA,MACT;AAGA,WAAK,UAAU,aAAa;AAE5B,WAAK,YAAY,GAAG;AAAA,IACtB;AAAA,EACF;AAEA,EAAAA,WAAU,UAAU,kBAAkB,SAAU,MAAM,aAAa;AACjE,QAAI,WAAW,KAAK;AAEpB,QAAI,YAAY,KAAK,YAAY,WAAW;AAE5C,QAAI,aAAa,CAAC,CAAC,YAAY,IAAI,UAAU;AAC7C,QAAI,kBAAkB,YAAY;AAClC,QAAI,cAAc,gBAAgB;AAElC,QAAI,MAAuC;AACzC,UAAI,aAAa,aAAa;AAC5B,gBAAQ,KAAK,gCAAgC;AAAA,MAC/C;AAAA,IACF;AAEA,QAAI,CAAC,YAAY,cAAc,KAAK,aAAa,eAAe,KAAK,eAAe,gBAAgB,KAAK,cAAc;AACrH,UAAI,UAAU;AACZ,iBAAS,OAAO;AAAA,MAClB;AAEA,iBAAW,KAAK,YAAY,cAAc,IAAI,sBAAc,IAAI,IAAI,iBAAS,aAAa,YAAY,yBAAiBC,oBAAW,YAAY,qBAAaC,aAAI;AAC/J,WAAK,YAAY;AACjB,WAAK,cAAc;AACnB,WAAK,eAAe;AAAA,IACtB;AAEA,SAAK,MAAM,IAAI,SAAS,KAAK;AAC7B,WAAO;AAAA,EACT;AAEA,EAAAF,WAAU,UAAU,cAAc,SAAU,aAAa;AACvD,WAAO,CAAC,CAAC,YAAY,IAAI,CAAC,UAAU,MAAM,CAAC;AAAA,EAC7C;AAEA,EAAAA,WAAU,UAAU,cAAc,SAAU,KAAK;AAE/C,QAAI,KAAK,IAAI,MAAM;AACnB,QAAI,QAAQ,GAAG,QAAQ,QAAQ,MAAM;AAErC,QAAI,CAAC,SAAS,KAAK,eAAe,MAAM;AACtC,SAAG,QAAQ,SAAS,KAAK,WAAW,EAAE,MAAM,IAAI;AAAA,IAClD;AAAA,EACF;AAEA,EAAAA,WAAU,UAAU,SAAS,SAAU,SAAS,KAAK;AACnD,SAAK,aAAa,KAAK,UAAU,OAAO;AACxC,SAAK,YAAY;AAEjB,SAAK,YAAY,GAAG;AAAA,EACtB;AAEA,EAAAA,WAAU,UAAU,UAAU,SAAU,SAAS,KAAK;AACpD,SAAK,OAAO,SAAS,GAAG;AAAA,EAC1B;AAEA,EAAAA,WAAU,OAAO;AACjB,SAAOA;AACT,EAAE,aAAS;AAEX,IAAO,oBAAQ;;;AC7Kf,IAAI,YAAY,OAAO,gBAAgB,cAAc,QAAQ;AAC7D,IAAI,aAAa,OAAO,iBAAiB,cAAc,QAAQ;AAE/D,SAAS,UAAU,WAAW;AAC5B,MAAI,OAAO,UAAU;AAErB,MAAI,QAAQ,KAAK,MAAM,KAAK,GAAG,MAAM,KAAK,GAAG,GAAG,OAAO;AACrD,QAAI,MAAuC;AACzC,cAAQ,KAAK,uEAA4E;AAAA,IAC3F;AAEA,cAAU,OAAO,IAAI,MAAM,SAAU,SAAS;AAC5C,UAAI,SAAS,CAAC,QAAQ,GAAG,OAAO,QAAQ,GAAG,KAAK;AAChD,UAAI,SAAS;AAAA,QACX;AAAA,MACF;AAEA,UAAI,QAAQ,GAAG,MAAM;AACnB,eAAO,WAAW,QAAQ,GAAG;AAAA,MAC/B;AAEA,UAAI,QAAQ,GAAG,MAAM;AACnB,eAAO,SAAS,QAAQ,GAAG;AAAA,MAC7B;AAEA,aAAO,SAAS,CAAC,QAAQ,QAAQ,IAAI,QAAQ,EAAE,CAAC;AAAA,IAClD,CAAC;AAAA,EACH;AACF;AAEA,IAAI,mBAEJ,SAAU,QAAQ;AAChB,YAAUG,mBAAkB,MAAM;AAElC,WAASA,oBAAmB;AAC1B,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,kBAAiB;AAC9B,UAAM,wBAAwB;AAC9B,UAAM,iBAAiB;AACvB,WAAO;AAAA,EACT;AAEA,EAAAA,kBAAiB,UAAU,OAAO,SAAU,QAAQ;AAElD,WAAO,OAAO,OAAO,QAAQ,CAAC;AAE9B,cAAU,MAAM;AAEhB,QAAI,SAAS,KAAK,wBAAwB,OAAO,IAAI;AAErD,SAAK,cAAc,OAAO;AAC1B,SAAK,oBAAoB,OAAO;AAEhC,QAAI,OAAO,YAAY;AACrB,aAAO,OAAO,IAAI,aAAa,OAAO,KAAK;AAAA,IAC7C;AAEA,WAAO,UAAU,KAAK,MAAM,MAAM,SAAS;AAAA,EAC7C;AAEA,EAAAA,kBAAiB,UAAU,cAAc,SAAU,QAAQ;AACzD,cAAU,MAAM;AAEhB,QAAI,OAAO,MAAM;AAEf,UAAI,SAAS,KAAK,wBAAwB,OAAO,IAAI;AAErD,WAAK,cAAc,OAAO;AAC1B,WAAK,oBAAoB,OAAO;AAEhC,UAAI,OAAO,YAAY;AACrB,eAAO,OAAO,IAAI,aAAa,OAAO,KAAK;AAAA,MAC7C;AAAA,IACF;AAEA,WAAO,UAAU,YAAY,MAAM,MAAM,SAAS;AAAA,EACpD;AAEA,EAAAA,kBAAiB,UAAU,aAAa,SAAU,QAAQ;AACxD,QAAI,SAAS,KAAK,wBAAwB,OAAO,IAAI;AAErD,QAAI,OAAO,YAAY;AACrB,UAAI,CAAC,KAAK,aAAa;AACrB,aAAK,cAAc,OAAO;AAC1B,aAAK,oBAAoB,OAAO;AAAA,MAClC,OAAO;AACL,aAAK,cAAc,YAAY,KAAK,aAAa,OAAO,UAAU;AAClE,aAAK,oBAAoB,YAAY,KAAK,mBAAmB,OAAO,gBAAgB;AAAA,MACtF;AAEA,aAAO,OAAO,IAAI,aAAa,OAAO,KAAK;AAAA,IAC7C;AAEA,SAAK,WAAW,EAAE,WAAW,OAAO,IAAI;AAAA,EAC1C;AAEA,EAAAA,kBAAiB,UAAU,0BAA0B,SAAU,KAAK;AAClE,QAAI,YAAY,KAAK,QAAQ,EAAE,aAAa,GAAG;AAC/C,QAAI,SAAS,UAAU,kBAAkB,QAAQ,UAAU,SAAS,UAAU,WAAW,QAAQ;AAEjG,QAAI,MAAuC;AACzC,UAAI,EAAE,kBAAkB,SAAS,OAAO,SAAS,KAAK,OAAO,cAAc,QAAQ;AACjF,cAAM,IAAI,MAAM,oBAAoB,KAAK,UAAU,MAAM,IAAI,iDAAiD;AAAA,MAChH;AAAA,IACF;AAEA,WAAO;AAAA,EACT;AAEA,EAAAA,kBAAiB,UAAU,qBAAqB,SAAU,KAAK;AAC7D,QAAI,KAAK,mBAAmB;AAC1B,aAAO,KAAK,kBAAkB,MAAM,IAAI;AAAA,IAC1C,OAAO;AACL,aAAO,KAAK,wBAAwB,GAAG,EAAE;AAAA,IAC3C;AAAA,EACF;AAEA,EAAAA,kBAAiB,UAAU,gBAAgB,SAAU,KAAK,KAAK;AAC7D,QAAI,KAAK,mBAAmB;AAC1B,UAAI,SAAS,KAAK,kBAAkB,MAAM;AAC1C,UAAIC,OAAM,KAAK,kBAAkB,MAAM,IAAI;AAE3C,eAAS,IAAI,GAAG,IAAIA,MAAK,KAAK;AAC5B,YAAI,KAAK,IAAI,MAAM,CAAC;AACpB,YAAI,GAAG,KAAK,KAAK,YAAY,SAAS,IAAI;AAC1C,YAAI,GAAG,KAAK,KAAK,YAAY,SAAS,IAAI,IAAI;AAAA,MAChD;AAEA,aAAOA;AAAA,IACT,OAAO;AACL,UAAI,SAAS,KAAK,wBAAwB,GAAG;AAE7C,eAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACtC,YAAI,KAAK,IAAI,MAAM,CAAC;AACpB,YAAI,GAAG,KAAK,OAAO,GAAG;AACtB,YAAI,GAAG,KAAK,OAAO,GAAG;AAAA,MACxB;AAEA,aAAO,OAAO;AAAA,IAChB;AAAA,EACF;AAEA,EAAAD,kBAAiB,UAAU,0BAA0B,SAAU,MAAM;AACnE,QAAI,cAAc;AAElB,QAAI,KAAK,aAAa;AACpB,oBAAc,KAAK,YAAY;AAAA,IACjC;AAIA,QAAI,SAAS,KAAK,EAAE,GAAG;AACrB,UAAIC,OAAM,KAAK;AAEf,UAAI,4BAA4B,IAAI,UAAUA,IAAG;AACjD,UAAI,gBAAgB,IAAI,WAAWA,IAAG;AACtC,UAAI,eAAe;AACnB,UAAI,eAAe;AACnB,UAAI,YAAY;AAEhB,eAAS,IAAI,GAAG,IAAIA,QAAM;AACxB;AACA,YAAI,QAAQ,KAAK;AAEjB,kCAA0B,kBAAkB,eAAe;AAE3D,kCAA0B,kBAAkB;AAE5C,iBAAS,IAAI,GAAG,IAAI,OAAO,KAAK;AAC9B,cAAI,IAAI,KAAK;AACb,cAAI,IAAI,KAAK;AACb,wBAAc,kBAAkB;AAChC,wBAAc,kBAAkB;AAEhC,cAAI,IAAIA,MAAK;AACX,gBAAI,MAAuC;AACzC,oBAAM,IAAI,MAAM,sBAAsB;AAAA,YACxC;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAEA,aAAO;AAAA,QACL,kBAAkB,IAAI,YAAY,0BAA0B,QAAQ,GAAG,YAAY;AAAA,QACnF,YAAY;AAAA,QACZ,OAAO;AAAA,MACT;AAAA,IACF;AAEA,WAAO;AAAA,MACL,kBAAkB;AAAA,MAClB,YAAY;AAAA,MACZ,OAAO,KAAK;AAAA,IACd;AAAA,EACF;AAEA,EAAAD,kBAAiB,UAAU,iBAAiB,SAAU,QAAQ,SAAS;AACrE,QAAI,MAAuC;AACzC,UAAI,WAAW,yBAAiB,IAAI,OAAO,gBAAgB;AAE3D,UAAI,CAAC,UAAU;AACb,cAAM,IAAI,MAAM,+BAA+B,OAAO,gBAAgB;AAAA,MACxE;AAAA,IACF;AAEA,QAAI,WAAW,IAAI,mBAAW,CAAC,OAAO,GAAG,IAAI;AAC7C,aAAS,gBAAgB;AACzB,aAAS,SAAS,OAAO,MAAM,CAAC,GAAG,SAAU,UAAU,SAAS,WAAW,UAAU;AAEnF,UAAI,oBAAoB,OAAO;AAC7B,eAAO;AAAA,MACT,OAAO;AACL,iBAAS,gBAAgB;AACzB,YAAI,QAAQ,SAAS;AAErB,YAAI,SAAS,MAAM;AACjB,iBAAO,iBAAiB,QAAQ,MAAM,YAAY;AAAA,QACpD;AAAA,MACF;AAAA,IACF,CAAC;AACD,WAAO;AAAA,EACT;AAEA,EAAAA,kBAAiB,UAAU,gBAAgB,SAAU,WAAW,gBAAgB,UAAU;AACxF,QAAI,OAAO,KAAK,QAAQ;AACxB,QAAI,YAAY,KAAK,aAAa,SAAS;AAC3C,QAAI,OAAO,UAAU,IAAI,MAAM;AAE/B,QAAI,MAAM;AACR,aAAO;AAAA,IACT;AAEA,QAAI,WAAW,UAAU,IAAI,UAAU;AACvC,QAAI,SAAS,UAAU,IAAI,QAAQ;AACnC,QAAI,UAAU,CAAC;AACf,gBAAY,QAAQ,QAAQ,KAAK,QAAQ;AACzC,cAAU,QAAQ,QAAQ,KAAK,MAAM;AACrC,WAAO,oBAAoB,aAAa;AAAA,MACtC,MAAM,QAAQ,KAAK,KAAK;AAAA,IAC1B,CAAC;AAAA,EACH;AAEA,EAAAA,kBAAiB,UAAU,qBAAqB,WAAY;AAC1D,WAAO,CAAC,CAAC,KAAK,IAAI,CAAC,UAAU,MAAM,CAAC;AAAA,EACtC;AAEA,EAAAA,kBAAiB,UAAU,iBAAiB,WAAY;AACtD,QAAI,cAAc,KAAK,OAAO;AAE9B,QAAI,eAAe,MAAM;AACvB,aAAO,KAAK,OAAO,QAAQ,MAAM,KAAK,IAAI,aAAa;AAAA,IACzD;AAEA,WAAO;AAAA,EACT;AAEA,EAAAA,kBAAiB,UAAU,0BAA0B,WAAY;AAC/D,QAAI,uBAAuB,KAAK,OAAO;AAEvC,QAAI,wBAAwB,MAAM;AAChC,aAAO,KAAK,OAAO,QAAQ,MAAM,KAAK,IAAI,sBAAsB;AAAA,IAClE;AAEA,WAAO;AAAA,EACT;AAEA,EAAAA,kBAAiB,UAAU,eAAe,WAAY;AACpD,QAAI,cAAc,KAAK,SAAS,QAAQ;AACxC,QAAI,cAAc,YAAY,IAAI,aAAa;AAC/C,WAAO,KAAK,QAAQ,EAAE,MAAM,IAAI,KAAK,wBAAwB,IAC3D,KAAK,KAAK,YAAY,IAAI,MAAM,KAAK,cAAc,IAAI,cAAc,KAAK;AAAA,EAC9E;AAEA,EAAAA,kBAAiB,OAAO;AACxB,EAAAA,kBAAiB,eAAe,CAAC,QAAQ,SAAS,OAAO,UAAU;AACnE,EAAAA,kBAAiB,gBAAgB;AAAA,IAC/B,kBAAkB;AAAA,IAElB,GAAG;AAAA,IACH,iBAAiB;AAAA,IAEjB,YAAY;AAAA,IACZ,YAAY;AAAA,IACZ,QAAQ,CAAC,QAAQ,MAAM;AAAA,IACvB,YAAY,CAAC,IAAI,EAAE;AAAA,IAEnB,UAAU;AAAA,IACV,QAAQ;AAAA,MACN,MAAM;AAAA,MACN,QAAQ;AAAA,MACR,eAAe;AAAA,MACf,QAAQ;AAAA,MACR,YAAY;AAAA,MACZ,MAAM;AAAA,MACN,aAAa;AAAA,IACf;AAAA,IACA,OAAO;AAAA,IAEP,gBAAgB;AAAA,IAChB,UAAU;AAAA,IACV,MAAM;AAAA,IACN,OAAO;AAAA,MACL,MAAM;AAAA,MACN,UAAU;AAAA,IAGZ;AAAA,IACA,WAAW;AAAA,MACT,SAAS;AAAA,IACX;AAAA,EACF;AACA,SAAOA;AACT,EAAE,cAAW;AAEb,IAAO,sBAAQ;;;ACpUf,SAASE,WAAU,GAAG;AACpB,MAAI,EAAE,aAAa,QAAQ;AACzB,QAAI,CAAC,GAAG,CAAC;AAAA,EACX;AAEA,SAAO;AACT;AAEA,IAAI,cAAc;AAAA,EAChB,YAAY;AAAA,EACZ,OAAO,SAAU,aAAa;AAC5B,QAAI,aAAaA,WAAU,YAAY,IAAI,QAAQ,CAAC;AACpD,QAAI,aAAaA,WAAU,YAAY,IAAI,YAAY,CAAC;AACxD,QAAI,OAAO,YAAY,QAAQ;AAC/B,SAAK,UAAU,cAAc,cAAc,WAAW,EAAE;AACxD,SAAK,UAAU,YAAY,cAAc,WAAW,EAAE;AACtD,SAAK,UAAU,kBAAkB,cAAc,WAAW,EAAE;AAC5D,SAAK,UAAU,gBAAgB,cAAc,WAAW,EAAE;AAE1D,aAAS,SAASC,OAAM,KAAK;AAC3B,UAAI,YAAYA,MAAK,aAAa,GAAG;AACrC,UAAIC,cAAaF,WAAU,UAAU,WAAW,UAAU,IAAI,CAAC;AAC/D,UAAIG,cAAaH,WAAU,UAAU,WAAW,cAAc,IAAI,CAAC;AACnE,MAAAE,YAAW,MAAMD,MAAK,cAAc,KAAK,cAAcC,YAAW,EAAE;AACpE,MAAAA,YAAW,MAAMD,MAAK,cAAc,KAAK,YAAYC,YAAW,EAAE;AAClE,MAAAC,YAAW,MAAMF,MAAK,cAAc,KAAK,kBAAkBE,YAAW,EAAE;AACxE,MAAAA,YAAW,MAAMF,MAAK,cAAc,KAAK,gBAAgBE,YAAW,EAAE;AAAA,IACxE;AAEA,WAAO;AAAA,MACL,UAAU,KAAK,gBAAgB,WAAW;AAAA,IAC5C;AAAA,EACF;AACF;AACA,IAAO,sBAAQ;;;AC9BR,SAASC,UAAQ,WAAW;AACjC,YAAU,kBAAkB,iBAAS;AACrC,YAAU,oBAAoB,mBAAgB;AAC9C,YAAU,eAAe,mBAAW;AACpC,YAAU,eAAe,mBAAW;AACtC;;;ACNA,IAAI,kBAAkB;AAEtB,IAAI,eAEJ,WAAY;AACV,WAASC,gBAAe;AACtB,SAAK,WAAW;AAChB,SAAK,YAAY;AACjB,SAAK,aAAa;AAClB,SAAK,aAAa;AAClB,SAAK,kBAAkB;AAAA,MACrB,SAAS;AAAA,MACT,YAAY;AAAA,IACd;AACA,QAAI,SAAS,YAAY,aAAa;AACtC,SAAK,SAAS;AAAA,EAChB;AASA,EAAAA,cAAa,UAAU,SAAS,SAAU,MAAM,OAAO,QAAQC,YAAW,WAAW,WAAW;AAC9F,QAAI,QAAQ,KAAK,UAAU;AAE3B,QAAI,kBAAkB,KAAK,aAAa,WAAW,SAAS;AAE5D,QAAI,qBAAqB,KAAK,aAAa,WAAW,YAAY;AAElE,QAAI,IAAI,KAAK,YAAY,KAAK;AAC9B,QAAI,SAAS,KAAK;AAClB,QAAI,MAAM,OAAO,WAAW,IAAI;AAChC,QAAIC,OAAM,KAAK;AACf,WAAO,QAAQ;AACf,WAAO,SAAS;AAEhB,aAAS,IAAI,GAAG,IAAIA,MAAK,EAAE,GAAG;AAC5B,UAAI,IAAI,KAAK;AACb,UAAI,IAAI,EAAE;AACV,UAAI,IAAI,EAAE;AACV,UAAI,QAAQ,EAAE;AAEd,UAAI,QAAQD,WAAU,KAAK;AAE3B,UAAI,cAAc;AAClB,UAAI,UAAU,OAAO,IAAI,GAAG,IAAI,CAAC;AAAA,IACnC;AAEA,QAAI,CAAC,OAAO,SAAS,CAAC,OAAO,QAAQ;AAGnC,aAAO;AAAA,IACT;AAGA,QAAI,YAAY,IAAI,aAAa,GAAG,GAAG,OAAO,OAAO,OAAO,MAAM;AAClE,QAAI,SAAS,UAAU;AACvB,QAAI,SAAS;AACb,QAAI,WAAW,OAAO;AACtB,QAAI,aAAa,KAAK;AACtB,QAAI,aAAa,KAAK;AACtB,QAAI,cAAc,aAAa;AAE/B,WAAO,SAAS,UAAU;AACxB,UAAI,QAAQ,OAAO,SAAS,KAAK;AACjC,UAAI,iBAAiB,KAAK,MAAM,SAAS,kBAAkB,EAAE,IAAI;AAEjE,UAAI,QAAQ,GAAG;AACb,YAAI,WAAW,UAAU,KAAK,IAAI,kBAAkB;AAEpD,gBAAQ,MAAM,QAAQ,QAAQ,cAAc;AAC5C,eAAO,YAAY,SAAS;AAC5B,eAAO,YAAY,SAAS,iBAAiB;AAC7C,eAAO,YAAY,SAAS,iBAAiB;AAC7C,eAAO,YAAY,SAAS,iBAAiB,KAAK,QAAQ;AAAA,MAC5D,OAAO;AACL,kBAAU;AAAA,MACZ;AAAA,IACF;AAEA,QAAI,aAAa,WAAW,GAAG,CAAC;AAChC,WAAO;AAAA,EACT;AAMA,EAAAD,cAAa,UAAU,YAAY,WAAY;AAC7C,QAAI,cAAc,KAAK,iBAAiB,KAAK,eAAe,YAAY,aAAa;AAErF,QAAI,IAAI,KAAK,YAAY,KAAK;AAC9B,QAAI,IAAI,IAAI;AACZ,gBAAY,QAAQ;AACpB,gBAAY,SAAS;AACrB,QAAI,MAAM,YAAY,WAAW,IAAI;AACrC,QAAI,UAAU,GAAG,GAAG,GAAG,CAAC;AAIxB,QAAI,gBAAgB;AACpB,QAAI,aAAa,KAAK;AAGtB,QAAI,cAAc;AAElB,QAAI,UAAU;AACd,QAAI,IAAI,CAAC,GAAG,GAAG,KAAK,WAAW,GAAG,KAAK,KAAK,GAAG,IAAI;AACnD,QAAI,UAAU;AACd,QAAI,KAAK;AACT,WAAO;AAAA,EACT;AAOA,EAAAA,cAAa,UAAU,eAAe,SAAU,WAAW,OAAO;AAChE,QAAI,iBAAiB,KAAK;AAC1B,QAAI,oBAAoB,eAAe,WAAW,eAAe,SAAS,IAAI,kBAAkB,MAAM,CAAC;AACvG,QAAI,QAAQ,CAAC,GAAG,GAAG,GAAG,CAAC;AACvB,QAAI,MAAM;AAEV,aAAS,IAAI,GAAG,IAAI,KAAK,KAAK;AAC5B,gBAAU,OAAO,IAAI,KAAK,MAAM,KAAK;AACrC,wBAAkB,SAAS,MAAM;AACjC,wBAAkB,SAAS,MAAM;AACjC,wBAAkB,SAAS,MAAM;AACjC,wBAAkB,SAAS,MAAM;AAAA,IACnC;AAEA,WAAO;AAAA,EACT;AAEA,SAAOA;AACT,EAAE;AAEF,IAAO,uBAAQ;;;ACvIf,SAAS,sBAAsB,YAAY,WAAW,UAAU;AAC9D,MAAI,WAAW,WAAW,KAAK,WAAW;AAC1C,cAAmB,IAAI,WAAW,SAAU,OAAO;AACjD,WAAO;AAAA,MACL,UAAU,EAAE,MAAM,SAAS,KAAK,WAAW,MAAM,WAAW,MAAM,SAAS,KAAK,WAAW,MAAM,QAAQ;AAAA,IAC3G;AAAA,EACF,CAAC;AACD,MAAIG,OAAM,UAAU;AACpB,MAAI,YAAY;AAChB,SAAO,SAAU,KAAK;AACpB,QAAI;AAEJ,SAAK,IAAI,WAAW,IAAIA,MAAK,KAAK;AAChC,UAAI,WAAW,UAAU,GAAG;AAE5B,UAAI,SAAS,MAAM,OAAO,OAAO,SAAS,IAAI;AAC5C,oBAAY;AACZ;AAAA,MACF;AAAA,IACF;AAEA,QAAI,MAAMA,MAAK;AAEb,WAAK,IAAI,YAAY,GAAG,KAAK,GAAG,KAAK;AACnC,YAAI,WAAW,UAAU,GAAG;AAE5B,YAAI,SAAS,MAAM,OAAO,OAAO,SAAS,IAAI;AAC5C,sBAAY;AACZ;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAEA,WAAO,KAAK,KAAK,IAAIA,QAAO,SAAS;AAAA,EACvC;AACF;AAEA,SAAS,uBAAuB,YAAY,OAAO;AACjD,MAAI,WAAW,WAAW,KAAK,WAAW;AAC1C,UAAQ,EAAE,MAAM,KAAK,WAAW,MAAM,WAAW,MAAM,KAAK,WAAW,MAAM,QAAQ;AACrF,SAAO,SAAU,KAAK;AACpB,WAAO,OAAO,MAAM,MAAM,OAAO,MAAM;AAAA,EACzC;AACF;AAEA,SAAS,cAAc,UAAU;AAC/B,MAAI,aAAa,SAAS;AAE1B,SAAO,WAAW,OAAO,SAAS,WAAW,OAAO;AACtD;AAEA,IAAI,cAEJ,SAAU,QAAQ;AAChB,YAAUC,cAAa,MAAM;AAE7B,WAASA,eAAc;AACrB,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,aAAY;AACzB,WAAO;AAAA,EACT;AAEA,EAAAA,aAAY,UAAU,SAAS,SAAU,aAAa,SAAS,KAAK;AAClE,QAAI;AACJ,YAAQ,cAAc,aAAa,SAAU,WAAW;AACtD,gBAAU,iBAAiB,SAAU,cAAc;AACjD,YAAI,iBAAiB,aAAa;AAChC,kCAAwB;AAAA,QAC1B;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AAED,QAAI,MAAuC;AACzC,UAAI,CAAC,uBAAuB;AAC1B,cAAM,IAAI,MAAM,iCAAiC;AAAA,MACnD;AAAA,IACF;AAGA,SAAK,kBAAkB;AACvB,SAAK,MAAM,UAAU;AACrB,QAAI,WAAW,YAAY;AAE3B,QAAI,SAAS,SAAS,iBAAiB,SAAS,SAAS,YAAY;AACnE,WAAK,8BAA8B,aAAa,KAAK,GAAG,YAAY,QAAQ,EAAE,MAAM,CAAC;AAAA,IACvF,WAAW,cAAc,QAAQ,GAAG;AAClC,WAAK,aAAa,UAAU,aAAa,uBAAuB,GAAG;AAAA,IACrE;AAAA,EACF;AAEA,EAAAA,aAAY,UAAU,2BAA2B,SAAU,aAAa,SAAS,KAAK;AACpF,SAAK,MAAM,UAAU;AAAA,EACvB;AAEA,EAAAA,aAAY,UAAU,oBAAoB,SAAU,QAAQ,aAAa,SAAS,KAAK;AACrF,QAAI,WAAW,YAAY;AAE3B,QAAI,UAAU;AAEZ,UAAI,cAAc,QAAQ,GAAG;AAC3B,aAAK,OAAO,aAAa,SAAS,GAAG;AAAA,MACvC,OAAO;AACL,aAAK,kBAAkB,CAAC;AAExB,aAAK,8BAA8B,aAAa,KAAK,OAAO,OAAO,OAAO,KAAK,IAAI;AAAA,MACrF;AAAA,IACF;AAAA,EACF;AAEA,EAAAA,aAAY,UAAU,eAAe,SAAU,IAAI;AACjD,IAAQ,iBAAiB,KAAK,mBAAmB,KAAK,OAAO,EAAE;AAAA,EACjE;AAEA,EAAAA,aAAY,UAAU,gCAAgC,SAAU,aAAa,KAAK,OAAO,KAAK,aAAa;AACzG,QAAI,WAAW,YAAY;AAC3B,QAAI,gBAAgB,uBAAuB,UAAU,aAAa;AAClE,QAAI;AACJ,QAAI;AACJ,QAAI;AACJ,QAAI;AAEJ,QAAI,eAAe;AACjB,UAAI,QAAQ,SAAS,QAAQ,GAAG;AAChC,UAAI,QAAQ,SAAS,QAAQ,GAAG;AAEhC,UAAI,MAAuC;AACzC,YAAI,EAAE,MAAM,SAAS,cAAc,MAAM,SAAS,aAAa;AAC7D,gBAAM,IAAI,MAAM,kDAAkD;AAAA,QACpE;AAEA,YAAI,EAAE,MAAM,UAAU,MAAM,SAAS;AACnC,gBAAM,IAAI,MAAM,+DAA+D;AAAA,QACjF;AAAA,MACF;AAGA,cAAQ,MAAM,aAAa,IAAI;AAC/B,eAAS,MAAM,aAAa,IAAI;AAChC,oBAAc,MAAM,MAAM,UAAU;AACpC,oBAAc,MAAM,MAAM,UAAU;AAAA,IACtC;AAEA,QAAI,QAAQ,KAAK;AACjB,QAAI,OAAO,YAAY,QAAQ;AAC/B,QAAI,gBAAgB,YAAY,SAAS,CAAC,YAAY,WAAW,CAAC,EAAE,aAAa;AACjF,QAAI,YAAY,YAAY,SAAS,CAAC,QAAQ,WAAW,CAAC,EAAE,aAAa;AACzE,QAAI,cAAc,YAAY,SAAS,CAAC,UAAU,WAAW,CAAC,EAAE,aAAa;AAC7E,QAAI,eAAe,YAAY,IAAI,CAAC,aAAa,cAAc,CAAC;AAChE,QAAI,oBAAoB,qBAAqB,WAAW;AACxD,QAAI,gBAAgB,YAAY,SAAS,UAAU;AACnD,QAAI,QAAQ,cAAc,IAAI,OAAO;AACrC,QAAI,YAAY,cAAc,IAAI,WAAW;AAC7C,QAAI,mBAAmB,cAAc,IAAI,UAAU;AACnD,QAAI,WAAW,gBAAgB,CAAC,KAAK,aAAa,GAAG,GAAG,KAAK,aAAa,GAAG,GAAG,KAAK,aAAa,OAAO,CAAC,IAAI,CAAC,KAAK,aAAa,MAAM,GAAG,KAAK,aAAa,OAAO,CAAC;AAEpK,aAAS,MAAM,OAAO,MAAM,KAAK,OAAO;AACtC,UAAI,OAAO;AACX,UAAI,QAAQ,KAAK,cAAc,KAAK,OAAO;AAE3C,UAAI,eAAe;AACjB,YAAI,WAAW,KAAK,IAAI,SAAS,IAAI,GAAG;AACxC,YAAI,WAAW,KAAK,IAAI,SAAS,IAAI,GAAG;AAExC,YAAI,MAAM,KAAK,IAAI,SAAS,IAAI,GAAG,CAAC,KAAK,MAAM,QAAQ,KAAK,MAAM,QAAQ,KAAK,WAAW,YAAY,MAAM,WAAW,YAAY,MAAM,WAAW,YAAY,MAAM,WAAW,YAAY,IAAI;AAC/L;AAAA,QACF;AAEA,YAAI,QAAQ,SAAS,YAAY,CAAC,UAAU,QAAQ,CAAC;AACrD,eAAO,IAAY,aAAK;AAAA,UACtB,OAAO;AAAA,YACL,GAAG,MAAM,KAAK,QAAQ;AAAA,YACtB,GAAG,MAAM,KAAK,SAAS;AAAA,YACvB;AAAA,YACA;AAAA,UACF;AAAA,UACA;AAAA,QACF,CAAC;AAAA,MACH,OAAO;AAEL,YAAI,MAAM,KAAK,IAAI,SAAS,IAAI,GAAG,CAAC,GAAG;AACrC;AAAA,QACF;AAEA,eAAO,IAAY,aAAK;AAAA,UACtB,IAAI;AAAA,UACJ,OAAO,SAAS,WAAW,CAAC,KAAK,IAAI,SAAS,IAAI,GAAG,CAAC,CAAC,EAAE;AAAA,UACzD;AAAA,QACF,CAAC;AAAA,MACH;AAGA,UAAI,KAAK,eAAe;AACtB,YAAI,YAAY,KAAK,aAAa,GAAG;AACrC,YAAI,kBAAkB,UAAU,SAAS,UAAU;AACnD,wBAAgB,gBAAgB,SAAS,WAAW,EAAE,aAAa;AACnE,oBAAY,UAAU,SAAS,CAAC,QAAQ,WAAW,CAAC,EAAE,aAAa;AACnE,sBAAc,UAAU,SAAS,CAAC,UAAU,WAAW,CAAC,EAAE,aAAa;AAMvE,uBAAe,UAAU,IAAI,CAAC,aAAa,cAAc,CAAC;AAC1D,gBAAQ,gBAAgB,IAAI,OAAO;AACnC,oBAAY,gBAAgB,IAAI,WAAW;AAC3C,2BAAmB,gBAAgB,IAAI,UAAU;AACjD,4BAAoB,qBAAqB,SAAS;AAAA,MACpD;AAEA,WAAK,MAAM,IAAI;AACf,UAAI,WAAW,YAAY,YAAY,GAAG;AAC1C,UAAI,cAAc;AAElB,UAAI,YAAY,SAAS,MAAM,MAAM;AACnC,sBAAc,SAAS,KAAK;AAAA,MAC9B;AAEA,oBAAc,MAAM,mBAAmB;AAAA,QACrC,cAAc;AAAA,QACd,gBAAgB;AAAA,QAChB,gBAAgB,MAAM;AAAA,QACtB;AAAA,MACF,CAAC;AACD,WAAK,YAAY,UAAU,EAAE,QAAQ;AACrC,WAAK,YAAY,MAAM,EAAE,QAAQ;AACjC,WAAK,YAAY,QAAQ,EAAE,QAAQ;AACnC,0BAAoB,MAAM,OAAO,WAAW,gBAAgB;AAC5D,WAAK,cAAc;AAEnB,UAAI,aAAa;AAEf,aAAK,OAAO,SAAS,aAAa;AAAA,MACpC;AAEA,YAAM,IAAI,IAAI;AACd,WAAK,iBAAiB,KAAK,IAAI;AAE/B,UAAI,KAAK,iBAAiB;AACxB,aAAK,gBAAgB,KAAK,IAAI;AAAA,MAChC;AAAA,IACF;AAAA,EACF;AAEA,EAAAA,aAAY,UAAU,eAAe,SAAU,KAAK,aAAa,gBAAgB,KAAK;AACpF,QAAI,iBAAiB,eAAe,cAAc;AAClD,QAAI,oBAAoB,eAAe,cAAc;AAIrD,QAAI,OAAO,YAAY,QAAQ;AAC/B,QAAI,UAAU,KAAK,YAAY,KAAK,YAAY,IAAI,qBAAa;AACjE,YAAQ,WAAW,YAAY,IAAI,UAAU;AAC7C,YAAQ,YAAY,YAAY,IAAI,WAAW;AAC/C,YAAQ,aAAa,YAAY,IAAI,YAAY;AACjD,YAAQ,aAAa,YAAY,IAAI,YAAY;AACjD,QAAI,OAAO,IAAI,YAAY,EAAE,MAAM;AACnC,QAAI,gBAAgB,IAAI,iBAAiB;AACzC,SAAK,eAAe,aAAa;AAEjC,QAAI,IAAI,KAAK,IAAI,KAAK,GAAG,CAAC;AAC1B,QAAI,IAAI,KAAK,IAAI,KAAK,GAAG,CAAC;AAC1B,QAAI,KAAK,KAAK,IAAI,KAAK,QAAQ,KAAK,GAAG,IAAI,SAAS,CAAC;AACrD,QAAI,KAAK,KAAK,IAAI,KAAK,SAAS,KAAK,GAAG,IAAI,UAAU,CAAC;AACvD,QAAI,QAAQ,KAAK;AACjB,QAAI,SAAS,KAAK;AAClB,QAAI,OAAO,CAAC,KAAK,aAAa,KAAK,GAAG,KAAK,aAAa,KAAK,GAAG,KAAK,aAAa,OAAO,CAAC;AAC1F,QAAI,SAAS,KAAK,SAAS,MAAM,SAAU,KAAK,KAAK,OAAO;AAC1D,UAAI,KAAK,IAAI,YAAY,CAAC,KAAK,GAAG,CAAC;AACnC,SAAG,MAAM;AACT,SAAG,MAAM;AACT,SAAG,KAAK,KAAK;AACb,aAAO;AAAA,IACT,CAAC;AACD,QAAI,aAAa,eAAe,UAAU;AAC1C,QAAI,YAAY,eAAe,SAAS,yBAAyB,uBAAuB,YAAY,eAAe,OAAO,KAAK,IAAI,sBAAsB,YAAY,eAAe,aAAa,GAAG,eAAe,OAAO,QAAQ;AAClO,YAAQ,OAAO,QAAQ,OAAO,QAAQ,eAAe,MAAM,cAAc,GAAG;AAAA,MAC1E,SAAS,eAAe,MAAM,eAAe;AAAA,MAC7C,YAAY,kBAAkB,MAAM,eAAe;AAAA,IACrD,GAAG,SAAS;AACZ,QAAI,MAAM,IAAY,cAAM;AAAA,MAC1B,OAAO;AAAA,QACL;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,OAAO,QAAQ;AAAA,MACjB;AAAA,MACA,QAAQ;AAAA,IACV,CAAC;AACD,SAAK,MAAM,IAAI,GAAG;AAAA,EACpB;AAEA,EAAAA,aAAY,OAAO;AACnB,SAAOA;AACT,EAAE,aAAS;AAEX,IAAO,sBAAQ;;;AC7Sf,IAAI,qBAEJ,SAAU,QAAQ;AAChB,YAAUC,qBAAoB,MAAM;AAEpC,WAASA,sBAAqB;AAC5B,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,oBAAmB;AAChC,WAAO;AAAA,EACT;AAEA,EAAAA,oBAAmB,UAAU,iBAAiB,SAAU,QAAQ,SAAS;AACvE,WAAO,yBAAiB,MAAM,MAAM;AAAA,MAClC,eAAe;AAAA,IACjB,CAAC;AAAA,EACH;AAEA,EAAAA,oBAAmB,UAAU,qBAAqB,WAAY;AAC5D,QAAI,kBAAkB,yBAAiB,IAAI,KAAK,IAAI,kBAAkB,CAAC;AAEvE,QAAI,mBAAmB,gBAAgB,YAAY;AACjD,aAAO,gBAAgB,WAAW,OAAO,SAAS,gBAAgB,WAAW,OAAO;AAAA,IACtF;AAAA,EACF;AAEA,EAAAA,oBAAmB,OAAO;AAC1B,EAAAA,oBAAmB,eAAe,CAAC,QAAQ,OAAO,UAAU;AAC5D,EAAAA,oBAAmB,gBAAgB;AAAA,IACjC,kBAAkB;AAAA,IAElB,GAAG;AAAA,IAKH,UAAU;AAAA,IACV,UAAU;AAAA,IACV,WAAW;AAAA,IACX,YAAY;AAAA,IACZ,YAAY;AAAA,IACZ,QAAQ;AAAA,MACN,WAAW;AAAA,QACT,aAAa;AAAA,MACf;AAAA,IACF;AAAA,EACF;AACA,SAAOA;AACT,EAAE,cAAW;AAEb,IAAO,wBAAQ;;;ACrDR,SAASC,UAAQ,WAAW;AACjC,YAAU,kBAAkB,mBAAW;AACvC,YAAU,oBAAoB,qBAAkB;AAClD;;;ACMA,IAAI,yBAAyB,CAAC,aAAa,aAAa;AAExD,IAAI,eAAe,CAAC;AAAA,EAClB,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,OAAO;AAAA,EACP,SAAS,CAAC,QAAQ,OAAO;AAC3B,GAAG;AAAA,EACD,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,OAAO;AAAA,EACP,SAAS,CAAC,OAAO,QAAQ;AAC3B,CAAC;AACD,IAAI,mBAAmB,IAAY,eAAO;AAE1C,IAAI,mBAEJ,SAAU,QAAQ;AAChB,YAAUC,mBAAkB,MAAM;AAElC,WAASA,oBAAmB;AAC1B,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,kBAAiB;AAC9B,WAAO;AAAA,EACT;AAEA,EAAAA,kBAAiB,UAAU,SAAS,SAAU,aAAa,SAAS,KAAK;AACvE,QAAI,QAAQ,KAAK;AACjB,QAAI,OAAO,YAAY,QAAQ;AAC/B,QAAI,UAAU,KAAK;AACnB,QAAI,YAAY,YAAY;AAC5B,QAAI,WAAW,UAAU,YAAY;AACrC,QAAI,eAAe,SAAS,aAAa;AACzC,QAAI,eAAe,UAAU,OAAO,QAAQ;AAC5C,QAAI,MAAM;AAAA,MACR,QAAQ;AAAA,QACN,OAAO,IAAI,SAAS;AAAA,QACpB,QAAQ,IAAI,UAAU;AAAA,MACxB;AAAA,MACA;AAAA,MACA,UAAU;AAAA,MACV,gBAAgB,CAAC,CAAC,aAAa,GAAG,aAAa,IAAI,aAAa,KAAK,GAAG,CAAC,aAAa,GAAG,aAAa,IAAI,aAAa,MAAM,CAAC;AAAA,MAC9H;AAAA,MACA,UAAU,aAAa,CAAC;AAAA,MACxB,aAAa,aAAa,IAAI,CAAC;AAAA,IACjC;AACA,SAAK,KAAK,OAAO,EAAE,IAAI,SAAU,WAAW;AAC1C,UAAI,CAAC,KAAK,SAAS,SAAS,GAAG;AAC7B;AAAA,MACF;AAEA,UAAI,YAAY,aAAa,MAAM,SAAS;AAC5C,UAAI,aAAa,cAAc,MAAM,WAAW,WAAW,GAAG;AAC9D,UAAI,MAAM,UAAU,MAAM,KAAK,UAAU;AACzC,WAAK,iBAAiB,WAAW,GAAG;AACpC,YAAM,IAAI,GAAG;AACb,mBAAa,KAAK,KAAK,UAAU;AAAA,IACnC,CAAC,EAAE,OAAO,SAAU,UAAU,UAAU;AACtC,UAAI,MAAM,QAAQ,iBAAiB,QAAQ;AAE3C,UAAI,CAAC,KAAK,SAAS,QAAQ,GAAG;AAC5B,cAAM,OAAO,GAAG;AAChB;AAAA,MACF;AAEA,UAAI,YAAY,aAAa,MAAM,QAAQ;AAC3C,UAAI,aAAa,cAAc,MAAM,UAAU,WAAW,GAAG;AAC7D,UAAI,oBAAoB,YAAY,MAAM,UAAU;AAEpD,UAAI,OAAO,sBAAsB,IAAI,qBAAqB;AACxD,cAAM,OAAO,GAAG;AAChB,aAAK,iBAAiB,UAAU,IAAI;AACpC,cAAM;AAAA,MACR;AAEA,UAAI,KAAK;AACP,kBAAU,KAAK,KAAK,UAAU;AAAA,MAChC,OAAO;AACL,cAAM,UAAU,MAAM,KAAK,YAAY,IAAI;AAAA,MAC7C;AAEA,WAAK,iBAAiB,UAAU,GAAG;AACnC,UAAI,wBAAwB;AAE5B,YAAM,IAAI,GAAG;AACb,mBAAa,KAAK,KAAK,UAAU;AAAA,IACnC,CAAC,EAAE,OAAO,SAAU,WAAW;AAC7B,UAAI,MAAM,QAAQ,iBAAiB,SAAS;AAC5C,aAAO,UAAU,SAAS,WAAW,IAAI,sBAAsB,gBAAgB,GAAG;AAAA,IACpF,CAAC,EAAE,QAAQ;AACX,SAAK,QAAQ;AACb,WAAO,KAAK;AAAA,EACd;AAEA,EAAAA,kBAAiB,UAAU,SAAS,SAAU,SAAS,KAAK;AAC1D,QAAI,QAAQ,KAAK;AACjB,QAAI,OAAO,KAAK;AAEhB,QAAI,QAAQ,IAAI,WAAW,GAAG;AAC5B,UAAI,MAAM;AACR,aAAK,kBAAkB,SAAU,KAAK;AACpC,oBAAU,MAAM,UAAU,GAAG,EAAE,WAAW,SAAS,GAAG;AAAA,QACxD,CAAC;AAAA,MACH;AAAA,IACF,OAAO;AACL,YAAM,UAAU;AAAA,IAClB;AAAA,EACF;AAEA,EAAAA,kBAAiB,OAAO;AACxB,SAAOA;AACT,EAAE,aAAS;AAGX,SAAS,cAAc,MAAM,WAAW,WAAW,KAAK;AACtD,MAAIC,UAAS,KAAK,cAAc,SAAS;AACzC,MAAI,eAAe,UAAU,IAAI,cAAc;AAC/C,MAAI,aAAa,UAAU,IAAI,YAAY;AAC3C,MAAI,iBAAiB,UAAU,IAAI,gBAAgB,KAAK;AACxD,MAAI,eAAe,UAAU,IAAI,cAAc;AAC/C,MAAI,YAAY,gBAAgB,KAAK,KAAK,KAAK,OAAO;AACtD,MAAI,oBAAoB,UAAU,IAAI,mBAAmB,KAAK;AAC9D,MAAIC,sBAAqB,UAAU,mBAAmB;AACtD,MAAI,aAAa;AAAA,IACf;AAAA,IACA,QAAQD;AAAA,IACR;AAAA,IACA,YAAY,KAAK,cAAc,WAAW,QAAQ,KAAK;AAAA,IACvD,OAAO,KAAK,cAAc,WAAW,OAAO;AAAA,IAC5C;AAAA,IACA;AAAA,IACA,uBAAuB,UAAU,IAAI,uBAAuB;AAAA,IAC5D;AAAA,IACA;AAAA,IACA,gBAAgBC,sBAAqB,YAAY;AAAA,IACjD,YAAYA,uBAAsB,UAAU,IAAI,CAAC,YAAY,OAAO,CAAC;AAAA,IACrE,IAAI,UAAU,WAAW,KAAK,IAAI,KAAK;AAAA,EACzC;AACA,mBAAiB,WAAW,cAAcD,SAAQ,KAAK,UAAU;AACjE,oBAAkB,MAAM,WAAWA,SAAQ,cAAc,YAAY,WAAW,gBAAgB,WAAW,QAAQ,mBAAmB,KAAK,UAAU;AACrJ,mBAAiB,WAAW,WAAW,aAAa,UAAU,KAAK,UAAU;AAC7E,MAAI,aAAa,WAAW;AAC5B,MAAI,eAAe,sBAAsB,UAAU,IAAI,cAAc,GAAG,UAAU;AAClF,oBAAkB,WAAW,YAAYA,SAAQ,cAAc,YAAY,cAAc,gBAAgB,WAAW,gBAAgB,WAAW,gBAAgB,WAAW,iBAAiB,KAAK,UAAU;AAC1M,SAAO;AACT;AAGA,SAAS,iBAAiB,WAAW,cAAcA,SAAQ,KAAK,kBAAkB;AAChF,MAAI,WAAW,IAAI;AACnB,MAAI,qBAAqB,UAAU,IAAI,oBAAoB;AAC3D,MAAI,YAAY,IAAI,SAAS,aAAa,IAAI,SAAS,YAAY,CAAC;AACpE,MAAI,SAAS,UAAU,cAAc,UAAU,YAAY,CAAC,CAAC;AAC7D,MAAI,YAAY,IAAI,EAAEA,QAAO,SAAS,OAAO;AAC7C,MAAI;AAEJ,MAAW,QAAQ,kBAAkB,GAAG;AACtC,QAAI,uBAAuB,CAAC,qBAAqB,WAAW,mBAAmB,EAAE,IAAI,QAAQ,qBAAqB,WAAW,mBAAmB,EAAE,IAAI,MAAM;AAC5J,yBAAqB,KAAK,qBAAqB,MAAM,qBAAqB,QAAQ;AAClF,qBAAiB,qBAAqB;AAAA,EACxC,WAAW,sBAAsB,MAAM;AACrC,qBAAiB,qBAAqB,WAAW,kBAAkB,IAAI;AAAA,EACzE,WAAW,cAAc;AACvB,qBAAiB,IAAI,eAAe,SAAS,OAAO,aAAa;AAAA,EACnE,OAAO;AACL,qBAAiBA,QAAO,SAAS;AAAA,EACnC;AAEA,mBAAiB,iBAAiB;AAElC,MAAI,cAAc;AAChB,qBAAiB,kBAAkBA,QAAO,SAAS;AAAA,EACrD;AAIA,mBAAiB,SAAS,iBAAiB,IAAI,IAAI;AACrD;AAEA,SAAS,qBAAqB,MAAM,OAAO;AACzC,SAAO,KAAK,cAAc,KAAK,YAAY,KAAK,MAAM,MAAM,KAAK,CAAC,CAAC;AACrE;AAGA,SAAS,kBAAkB,MAAM,WAAWA,SAAQ,cAAc,YAAY,gBAAgB,QAAQ,mBAAmB,KAAK,kBAAkB;AAC9I,MAAI,WAAW,IAAI;AACnB,MAAI,cAAc,IAAI;AACtB,MAAI,eAAe,KAAK,IAAIA,QAAO,YAAY,GAAG;AAClD,MAAI,aAAa,KAAK,cAAc,WAAW,YAAY;AAC3D,MAAI;AAEJ,MAAW,QAAQ,UAAU,GAAG;AAC9B,uBAAmB,WAAW,MAAM;AAAA,EACtC,OAAO;AACL,QAAI,cAAc,MAAM;AAEtB,yBAAmB,CAAC,QAAQ,MAAM;AAAA,IACpC,OAAO;AACL,yBAAmB,CAAC,YAAY,UAAU;AAAA,IAC5C;AAAA,EACF;AAMA,mBAAiB,YAAY,SAASE,cAAa,iBAAiB,YAAY,QAAQ,YAAY;AACpG,mBAAiB,SAAS,SAASA,cAAa,iBAAiB,SAAS,QAAQ,eAAe,eAAe,KAAK,IAAI,cAAc,CAAC;AACxI,mBAAiB,aAAa;AAE9B,MAAI,cAAc,iBAAiB,cAAc,CAAC,iBAAiB,KAAK,mBAAmB,iBAAiB,KAAK,iBAAiB;AAElI,cAAY,SAAS,WAAW,IAAI,eAAe,KAAK,KAAK;AAC/D;AAEA,SAAS,iBAAiB,WAAW,aAAa,UAAU,KAAK,kBAAkB;AAIjF,MAAI,iBAAiB,UAAU,IAAI,sBAAsB,KAAK;AAE9D,MAAI,gBAAgB;AAClB,qBAAiB,KAAK;AAAA,MACpB,QAAQ,YAAY;AAAA,MACpB,QAAQ,YAAY;AAAA,MACpB;AAAA,IACF,CAAC;AACD,qBAAiB,gBAAgB;AACjC,sBAAkB,iBAAiB,aAAa;AAChD,sBAAkB,YAAY,IAAI,SAAS;AAAA,EAC7C;AAEA,mBAAiB,iBAAiB,kBAAkB;AACtD;AAEA,SAAS,kBAAkB,WAAW,YAAYF,SAAQ,cAAc,YAAY,cAAc,gBAAgB,gBAAgB,gBAAgB,iBAAiB,KAAK,kBAAkB;AACxL,MAAI,cAAc,IAAI;AACtB,MAAI,WAAW,IAAI;AACnB,MAAI,SAAS,iBAAiB;AAC9B,MAAI,aAAa,KAAK,IAAI,WAAW,SAAS,SAAS,gBAAgB,CAAC;AACxE,MAAI,UAAU;AAId,MAAI,cAAc;AAChB,QAAI,oBAAoB,KAAK,IAAI,cAAc;AAC/C,QAAI,eAAsB,SAAS,UAAU,IAAI,cAAc,GAAG,KAAK,IAAI;AAC3E,QAAI,YAAY;AAEhB,QAAI,aAAa,YAAY,GAAG,MAAM,aAAa,SAAS,GAAG;AAC7D,kBAAY;AACZ,qBAAe,aAAa,MAAM,GAAG,aAAa,SAAS,CAAC;AAAA,IAC9D;AAEA,QAAI,sBAAsBE,cAAa,cAAc,WAAW,SAAS,MAAM;AAC/E,QAAI,iBAAiB,KAAK,IAAI,aAAa,sBAAsB,GAAG,CAAC;AAGrE,QAAI,SAAS,YAAY,IAAI,sBAAsB;AAGnD,QAAI,kBAAkB,UAAU,YAAY;AAC5C,QAAI,cAAc,kBAAkB,eAAe,YAAY,oBAAoB,UAAU,cAAc;AAG3G,QAAI,QAAQ,oBAAoB,cAAc;AAC9C,0BAAsB,QAAQ,KAAK,YAAY,cAAc,KAAK,IAAI,cAAc,GAAG,CAAC;AACxF,qBAAiB,aAAa,sBAAsB;AACpD,aAAS,YAAY,IAAI,sBAAsB;AAE/C,QAAI,CAAC,mBAAmB,iBAAiB,SAAS;AAChD,oBAAc,kBAAkB,YAAY,KAAK,IAAI,eAAe,IAAI,UAAU,cAAc,IAAI;AAAA,IACtG;AAEA,cAAU,cAAc,iBAAiB;AACzC,qBAAiB,cAAc;AAC/B,qBAAiB,eAAe;AAAA,EAClC;AAEA,MAAI,UAAU,UAAU,UAAU;AAClC,MAAI,eAAe,iBAAiB,eAAe,CAAC;AACpD,eAAa,YAAY,SAASF,QAAO,YAAY,MAAM;AAC3D,eAAa,SAAS,SAAS,mBAAmB,UAAU,UAAU,mBAAmB,QAAQ,iBAAiB,UAAU,iBAAiB;AAE7I,MAAI,cAAc;AAChB,iBAAa,MAAM,aAAa;AAChC,iBAAa,MAAM,aAAa;AAAA,EAClC;AAEA,MAAI,iBAAiB,iBAAiB,iBAAiB,CAAC;AACxD,iBAAe,YAAY,SAASA,QAAO,YAAY;AACvD,iBAAe,SAAS,SAASA,QAAO,SAAS;AACjD,MAAI,eAAe,iBAAiB,eAAsB,OAAO,CAAC,GAAGA,OAAM;AAC3E,eAAa,SAAS,MAAM,SAAS,KAAK,IAAI,KAAK,IAAIA,QAAO,SAAS,GAAG,GAAG,KAAK,IAAI,aAAa,SAAS,SAAS,OAAO,CAAC;AAC7H,eAAa,YAAY,MAAMA,QAAO,YAAY;AAClD,MAAI,YAAY,iBAAiB,YAAY,CAAC;AAE9C,YAAU,YAAY,MAAM,CAACA,QAAO,YAAY;AAChD,YAAU,YAAY,MAAM,IAAI,OAAO,YAAY;AACnD,YAAU,SAAS,MAAM;AACzB,YAAU,SAAS,MAAMA,QAAO,SAAS;AAC3C;AAEA,SAAS,WAAW,YAAY;AAC9B,MAAI,oBAAoB,WAAW;AACnC,MAAI,OAAO;AAAA,IACX,WAAW;AAAA,IAAY,CAAC,oBAAoB;AAAA,IAAG,CAAC,oBAAoB;AAAA,IAAG;AAAA,IAAmB;AAAA,EAAiB;AAC3G,OAAK,KAAK;AAAA,IACR,SAAS;AAAA,EACX,CAAC;AACD,OAAK,SAAS,WAAW,KAAK,SAAS;AAAA,IACrC,eAAe;AAAA,EACjB,CAAC;AACD,SAAO;AACT;AAEA,SAAS,4BAA4B,KAAK,KAAK,YAAY,UAAU;AACnE,MAAI,SAAS,IAAI;AACjB,MAAI,aAAa,WAAW;AAC5B,MAAI,iBAAiB,WAAW;AAChC,MAAI,eAAe,WAAW;AAC9B,MAAI,WAAW,IAAI;AACnB,MAAI,cAAc,WAAW,eAAe;AAC5C,MAAI,QAAQ;AACZ,MAAI,OAAO,WAAW,IAAI,SAAS,SAAS,iBAAiB,WAAW,eAAe;AACvF,WAAS,KAAK,SAAUG,OAAM;AAC5B,IAAAA,MAAK,4BAA4B;AACjC,IAAAA,MAAK,yBAAyB;AAE9B,QAAI,QAAQ,aAAa;AACvB,iBAAWA,OAAM,MAAM,WAAW,KAAK,GAAG,YAAY,QAAQ;AAAA,IAChE,OAAO;AACL,iBAAWA,OAAM,MAAM;AAAA,QACrB,QAAQ;AAAA,QACR,QAAQ;AAAA,MACV,GAAG,YAAY,UAAU,WAAY;AACnC,eAAO,OAAOA,KAAI;AAAA,MACpB,CAAC;AAAA,IACH;AAGA;AAAA,EACF,CAAC;AAED,SAAO,QAAQ,aAAa,SAAS;AACnC,QAAI,OAAO,WAAW,UAAU;AAChC,SAAK,4BAA4B;AACjC,SAAK,yBAAyB;AAC9B,WAAO,IAAI,IAAI;AACf,QAAI,SAAS,WAAW,KAAK;AAC7B,eAAW,MAAM;AAAA,MACf,GAAG,OAAO;AAAA,MACV,GAAG,OAAO;AAAA,MACV,QAAQ;AAAA,MACR,QAAQ;AAAA,IACV,GAAG;AAAA,MACD,QAAQ,OAAO;AAAA,MACf,QAAQ,OAAO;AAAA,MACf,UAAU,OAAO;AAAA,IACnB,GAAG,YAAY,QAAQ;AAAA,EACzB;AAEA,WAAS,WAAWC,QAAO;AACzB,QAAIC,YAAW,aAAa,MAAM;AAGlC,QAAI,SAAS,WAAW;AACxB,QAAI,IAAID;AAER,QAAI,WAAW,0BAA0B,UAAU,SAAS,IAAI,SAAS,GAAG;AAC1E,UAAI,cAAc,IAAIA;AAAA,IACxB;AAEA,IAAAC,UAAS,SAAS,SAAS,QAAQ,IAAI,cAAc,IAAI,OAAO,aAAa,SAAS;AACtF,WAAO;AAAA,MACL,GAAGA,UAAS;AAAA,MACZ,GAAGA,UAAS;AAAA,MACZ,QAAQ,WAAW,YAAY;AAAA,MAC/B,QAAQ,WAAW,YAAY;AAAA,MAC/B,UAAU,WAAW;AAAA,IACvB;AAAA,EACF;AACF;AAEA,SAAS,2BAA2B,KAAK,KAAK,YAAY,UAAU;AAClE,MAAI,SAAS,IAAI;AACjB,MAAI,WAAW,IAAI;AAEnB,MAAI,CAAC,UAAU;AACb,eAAW,IAAI,sBAAsB,WAAW,UAAU;AAC1D,WAAO,IAAI,QAAQ;AACnB,eAAW,UAAU;AAAA,MACnB,GAAG,WAAW,aAAa;AAAA,MAC3B,GAAG,WAAW,aAAa;AAAA,MAC3B,QAAQ;AAAA,MACR,QAAQ;AAAA,MACR,UAAU,WAAW;AAAA,IACvB,GAAG;AAAA,MACD,QAAQ,WAAW,YAAY;AAAA,MAC/B,QAAQ,WAAW,YAAY;AAAA,IACjC,GAAG,YAAY,QAAQ;AAAA,EACzB,OAAO;AACL,eAAW,UAAU,MAAM;AAAA,MACzB,GAAG,WAAW,aAAa;AAAA,MAC3B,GAAG,WAAW,aAAa;AAAA,MAC3B,QAAQ,WAAW,YAAY;AAAA,MAC/B,QAAQ,WAAW,YAAY;AAAA,MAC/B,UAAU,WAAW;AAAA,IACvB,GAAG,YAAY,QAAQ;AAAA,EACzB;AACF;AAGA,SAAS,sBAAsB,KAAK,YAAY,UAAU;AACxD,MAAI,YAAmB,OAAO,CAAC,GAAG,WAAW,YAAY;AACzD,MAAI,UAAU,IAAI;AAElB,MAAI,CAAC,SAAS;AACZ,cAAU,IAAI,qBAAqB,IAAY,aAAK;AAAA,MAClD,IAAI;AAAA,MACJ,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,OAAO;AAAA,QACL,QAAQ;AAAA,QACR,MAAM;AAAA,QACN,WAAW;AAAA,MACb;AAAA,IACF,CAAC;AACD,YAAQ,kBAAkB;AAC1B,QAAI,IAAI,OAAO;AAAA,EACjB,OAAO;AACL,eAAW,SAAS,MAAM;AAAA,MACxB,OAAO;AAAA,IACT,GAAG,YAAY,QAAQ;AAAA,EACzB;AACF;AAEA,SAAS,mBAAmB,KAAK,KAAK,YAAY,UAAU;AAE1D,MAAI,WAAW,YAAY;AACzB,QAAI,WAAW,IAAI;AACnB,QAAI,YAAmB,OAAO,CAAC,GAAG,WAAW,SAAS;AACtD,QAAI,WAAW,IAAI;AACnB,QAAI,iBAAiB,WAAW;AAChC,QAAI,YAAY,WAAW;AAE3B,QAAI,UAAU;AACZ,MAAQ,YAAY,UAAU;AAAA,QAC5B,OAAO;AAAA,MACT,GAAG,gBAAgB,SAAS;AAAA,IAC9B,OAAO;AACL,gBAAU,SAAS,MAAM;AACzB,iBAAW,IAAY,aAAK;AAAA,QAC1B,OAAO;AAAA,MACT,CAAC;AAED,UAAI,kBAAkB,YAAY,QAAQ;AAE1C,UAAI,sBAAsB;AAC1B,UAAI,SAAS,CAAC;AACd,aAAO,SAAS,MAAM,WAAW,UAAU,SAAS;AACpD,sBAAQ,WAAW,gBAAgB,aAAa,UAAU;AAAA,QACxD,OAAO;AAAA,MACT,GAAG,gBAAgB,SAAS;AAAA,IAC9B;AAAA,EACF;AACF;AAEA,SAAS,aAAa,MAAM,WAAW;AACrC,MAAI,YAAY,KAAK,aAAa,SAAS;AAC3C,YAAU,0BAA0B;AACpC,YAAU,qBAAqB;AAC/B,SAAO;AACT;AAEA,SAAS,wBAAwB,MAAM;AAErC,SAAO;AAAA,IACL,OAAO,KAAK;AAAA,IACZ,OAAO,KAAK;AAAA,EACd;AACF;AAEA,SAAS,qBAAqB;AAE5B,SAAO,KAAK,YAAY,mBAAmB,KAAK,CAAC,CAAC,KAAK,WAAW,WAAW;AAC/E;AAEA,SAAS,UAAU,MAAM,KAAK,YAAY,UAAU;AAElD,MAAI,MAAM,IAAY,cAAM;AAE5B,MAAI,SAAS,IAAY,cAAM;AAC/B,MAAI,IAAI,MAAM;AACd,MAAI,oBAAoB;AACxB,SAAO,IAAI,WAAW,eAAe;AACrC,SAAO,IAAI,WAAW,eAAe;AAErC,MAAI,WAAW,cAAc;AAC3B,gCAA4B,KAAK,KAAK,UAAU;AAAA,EAClD,OAAO;AACL,+BAA2B,KAAK,KAAK,UAAU;AAAA,EACjD;AAEA,wBAAsB,KAAK,YAAY,QAAQ;AAC/C,qBAAmB,KAAK,KAAK,YAAY,QAAQ;AACjD,MAAI,sBAAsB,YAAY,MAAM,UAAU;AACtD,MAAI,wBAAwB;AAC5B,SAAO;AACT;AAEA,SAAS,UAAU,KAAK,KAAK,YAAY;AACvC,MAAI,iBAAiB,WAAW;AAChC,MAAI,YAAY,WAAW;AAC3B,MAAI,SAAS,IAAI;AACjB,EAAQ,YAAY,QAAQ;AAAA,IAC1B,GAAG,WAAW,eAAe;AAAA,IAC7B,GAAG,WAAW,eAAe;AAAA,EAC/B,GAAG,gBAAgB,SAAS;AAE5B,MAAI,WAAW,cAAc;AAC3B,gCAA4B,KAAK,KAAK,YAAY,IAAI;AAAA,EACxD,OAAO;AACL,+BAA2B,KAAK,KAAK,YAAY,IAAI;AAAA,EACvD;AAEA,wBAAsB,KAAK,YAAY,IAAI;AAC3C,qBAAmB,KAAK,KAAK,YAAY,IAAI;AAC/C;AAEA,SAAS,UAAU,MAAM,WAAW,gBAAgB,KAAK;AAEvD,MAAI,YAAY,IAAI;AACpB,eAAa,UAAU,kBAAkB;AACzC,MAAI,QAAQ,CAAC;AACb,WAAS,KAAK,SAAU,MAAM;AAC5B,UAAM,KAAK,IAAI;AAAA,EACjB,CAAC;AACD,MAAI,uBAAuB,MAAM,KAAK,IAAI,mBAAmB;AAE7D,MAAI,wBAAwB,iBAAiB;AAC7C,EAAO,KAAK,OAAO,SAAU,MAAM;AACjC,IAAQ,cAAc,MAAM;AAAA,MAC1B,QAAQ;AAAA,MACR,QAAQ;AAAA,IACV,GAAG,gBAAgB,WAAW,WAAY;AACxC,UAAI,UAAU,IAAI,OAAO,OAAO,GAAG;AAAA,IACrC,CAAC;AAAA,EACH,CAAC;AACD,OAAK,iBAAiB,WAAW,IAAI;AACvC;AAEA,SAAS,YAAY,MAAM,YAAY;AACrC,SAAO,CAAC,KAAK,cAAc,WAAW,WAAW,QAAQ,KAAK,QAAQ,CAAC,CAAC,WAAW,cAAc,CAAC,CAAC,WAAW,UAAU,EAAE,KAAK,GAAG;AACpI;AAEA,SAAS,SAAS,KAAK,IAAI,SAAS;AAElC,EAAO,KAAK,IAAI,kBAAkB,SAAS,GAAG,SAAU,IAAI;AAC1D,WAAO,IAAI,sBAAsB,GAAG,KAAK,SAAS,EAAE;AAAA,EACtD,CAAC;AACH;AAEA,SAAS,WAAW,IAAI,gBAAgB,gBAAgB,YAAY,UAAU,IAAI;AAChF,oBAAkB,GAAG,KAAK,cAAc;AAExC,MAAI,WAAW,cAAc,CAAC,UAAU;AACtC,sBAAkB,GAAG,KAAK,cAAc;AAAA,EAC1C,OAAO;AACL,sBAAkB,gBAAQ,WAAW,gBAAgB,aAAa,IAAI,gBAAgB,WAAW,gBAAgB,WAAW,WAAW,EAAE;AAAA,EAC3I;AACF;AAEA,SAAS,aAAa,KAAK,KAAK,YAAY;AAC1C,MAAI,YAAY,WAAW;AAC3B,MAAI,YAAY,WAAW;AAG3B,MAAI,gBAAgB,UAAU,SAAS,UAAU;AACjD,MAAI,gBAAgB,cAAc,SAAS,WAAW,EAAE,aAAa;AACrE,MAAI,YAAY,UAAU,SAAS,CAAC,QAAQ,WAAW,CAAC,EAAE,aAAa;AACvE,MAAI,cAAc,UAAU,SAAS,CAAC,UAAU,WAAW,CAAC,EAAE,aAAa;AAC3E,MAAI,cAAc,UAAU,WAAW,QAAQ;AAC/C,MAAI,QAAQ,cAAc,IAAI,OAAO;AACrC,MAAI,YAAY,cAAc,IAAI,WAAW;AAC7C,MAAI,aAAa,cAAc,IAAI,OAAO;AAC1C,WAAS,KAAK,SAAU,MAAM;AAC5B,QAAI,gBAAgB,eAAS;AAC3B,UAAI,YAAY,KAAK;AACrB,WAAK,SAAgB,OAAO;AAAA,QAE1B,OAAO,UAAU;AAAA,QACjB,GAAG,UAAU;AAAA,QACb,GAAG,UAAU;AAAA,QACb,OAAO,UAAU;AAAA,QACjB,QAAQ,UAAU;AAAA,MACpB,GAAG,WAAW,KAAK,CAAC;AAAA,IACtB,OAAO;AACL,WAAK,SAAS,WAAW,KAAK;AAAA,IAChC;AAEA,QAAI,gBAAgB,KAAK,YAAY,UAAU;AAC/C,kBAAc,QAAQ;AAEtB,QAAI,YAAY;AAEd,oBAAc,SAAS,KAAK,SAAS;AACrC,oBAAc,SAAS,KAAK,SAAS;AAAA,IACvC;AAEA,SAAK,YAAY,MAAM,EAAE,QAAQ;AACjC,SAAK,YAAY,QAAQ,EAAE,QAAQ;AACnC,oBAAgB,KAAK,SAAS;AAC9B,SAAK,KAAK,WAAW;AAAA,EACvB,CAAC;AACD,MAAI,qBAAqB,IAAI,SAAS,QAAQ,EAAE,WAAW,iBAAiB;AAC5E,MAAI,UAAU,IAAI;AAClB,gBAAc,SAAS,qBAAqB,SAAS,GAAG;AAAA,IACtD,cAAc,IAAI;AAAA,IAClB,gBAAgB;AAAA,IAChB,aAAa,gBAAgB,IAAI,YAAY,QAAQ,GAAG,SAAS;AAAA,IACjE,cAAc,WAAW,MAAM;AAAA,IAC/B,gBAAgB,WAAW,MAAM;AAAA,IACjC,wBAAwB;AAAA,EAC1B,CAAC;AACD,sBAAoB,KAAK,OAAO,WAAW,cAAc,IAAI,UAAU,CAAC;AAC1E;AAEA,SAAS,WAAW,OAAO;AACzB,MAAI,eAAe,KAAK,MAAM,KAAK;AAEnC,SAAO,KAAK,IAAI,QAAQ,YAAY,IAAI,OAAO,eAAe,KAAK,KAAK,KAAK;AAC/E;AAEA,IAAO,2BAAQ;;;ACloBf,IAAI,0BAEJ,SAAU,QAAQ;AAChB,YAAUC,0BAAyB,MAAM;AAEzC,WAASA,2BAA0B;AACjC,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,yBAAwB;AACrC,UAAM,kBAAkB;AACxB,UAAM,gBAAgB;AACtB,WAAO;AAAA,EACT;AAEA,EAAAA,yBAAwB,UAAU,iBAAiB,SAAU,QAAQ;AAEnE,WAAO,QAAQ;AACf,WAAO,OAAO,UAAU,eAAe,MAAM,MAAM,SAAS;AAAA,EAC9D;AAEA,EAAAA,yBAAwB,OAAO;AAC/B,EAAAA,yBAAwB,eAAe,CAAC,MAAM;AAC9C,EAAAA,yBAAwB,gBAAgB,qBAAqB,sBAAmB,eAAe;AAAA,IAC7F,QAAQ;AAAA,IACR,YAAY;AAAA,IACZ,cAAc;AAAA,IACd,gBAAgB;AAAA,IAChB,cAAc;AAAA,IACd,cAAc;AAAA,IACd,cAAc;AAAA,IACd,uBAAuB;AAAA,IACvB,YAAY;AAAA,IACZ,oBAAoB;AAAA,IACpB,mBAAmB;AAAA,IACnB,QAAQ;AAAA,IAGR,aAAa;AAAA,IACb,UAAU;AAAA,MAGR,OAAO;AAAA,IACT;AAAA,IACA,QAAQ;AAAA,MACN,WAAW;AAAA,QACT,aAAa;AAAA,MACf;AAAA,IACF;AAAA,EACF,CAAC;AACD,SAAOA;AACT,EAAE,qBAAkB;AAEpB,IAAO,6BAAQ;;;ACpDR,SAASC,UAAQ,WAAW;AACjC,YAAU,kBAAkB,wBAAgB;AAC5C,YAAU,oBAAoB,0BAAuB;AACrD,YAAU,eAAe,UAAU,SAAS,OAAO,QAAQ,MAAM,QAAQ,cAAc,CAAC;AAExF,YAAU,eAAe,UAAU,SAAS,OAAO,oBAAoB,wBAAwB,cAAc,CAAC;AAChH;;;ACAA,IAAI,iBAEJ,SAAU,QAAQ;AAChB,YAAUC,iBAAgB,MAAM;AAEhC,WAASA,kBAAiB;AACxB,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,gBAAe;AAC5B,UAAM,UAAU,CAAC;AACjB,WAAO;AAAA,EACT;AAEA,EAAAA,gBAAe,UAAU,SAAS,SAAU,aAAa,SAAS,KAAK;AACrE,QAAI,OAAO,YAAY,QAAQ;AAC/B,QAAI,OAAO;AACX,QAAI,QAAQ,KAAK;AACjB,QAAI,eAAe,YAAY,eAAe;AAC9C,QAAI,aAAa,KAAK,UAAU,YAAY;AAC5C,QAAI,OAAO,WAAW;AACtB,QAAI,cAAc,WAAW;AAC7B,UAAM,IAAI;AACV,UAAM,IAAI,KAAK,IAAI,YAAY;AAE/B,aAAS,UAAU,MAAM;AACvB,aAAO,KAAK;AAAA,IACd;AAEA,QAAI,aAAa,IAAI,mBAAW,KAAK,iBAAiB,CAAC,GAAG,cAAc,WAAW,SAAS;AAC5F,QAAI,kBAAkB,CAAC;AACvB,eAAW,IAAI,KAAKC,UAAS,MAAM,KAAK,CAAC,EAAE,OAAO,KAAKA,UAAS,MAAM,QAAQ,CAAC,EAAE,OAAO,KAAKA,UAAS,MAAM,QAAQ,CAAC,EAAE,QAAQ;AAE/H,aAASA,SAAQ,QAAQ,KAAK,QAAQ;AACpC,UAAI,kBAAkB,KAAK;AAE3B,UAAI,WAAW,UAAU;AACvB,cAAM,OAAO,gBAAgB,IAAI;AACjC;AAAA,MACF;AAEA,UAAI,UAAU,CAAC;AACf,UAAI,UAAU,CAAC;AACf,UAAI;AACJ,UAAI,UAAU,aAAa,KAAK;AAChC,UAAI,IAAI;AAER,aAAO,IAAI,QAAQ,QAAQ,KAAK;AAC9B,YAAIC,UAAS,KAAK,cAAc,QAAQ,EAAE;AAC1C,YAAI,IAAIA,QAAO;AACf,YAAI,KAAKA,QAAO;AAChB,YAAI,IAAIA,QAAO;AACf,gBAAQ,KAAK,GAAG,EAAE;AAClB,gBAAQ,KAAK,GAAG,KAAK,CAAC;AACtB,gBAAQ,KAAK,cAAc,QAAQ,IAAI,OAAO;AAAA,MAChD;AAEA,UAAI;AACJ,UAAI,aAAa,KAAK,cAAc,QAAQ,EAAE;AAC9C,UAAI,aAAa,YAAY,SAAS,OAAO;AAC7C,UAAI,SAAS,WAAW,IAAI,QAAQ;AACpC,UAAI,gBAAgB,YAAY,SAAS,UAAU;AAEnD,UAAI,WAAW,OAAO;AACpB,YAAI,aAAa,gBAAgB,OAAO,IAAY,cAAM;AAC1D,kBAAU,IAAI,UAAU;AAAA,UACtB,OAAO;AAAA,YACL,QAAQ;AAAA,YACR,iBAAiB;AAAA,YACjB,QAAQ;AAAA,YACR,iBAAiB;AAAA,YACjB,kBAAkB;AAAA,UACpB;AAAA,UACA,IAAI;AAAA,QACN,CAAC;AACD,mBAAW,IAAI,OAAO;AACtB,cAAM,IAAI,UAAU;AAEpB,YAAI,YAAY,mBAAmB,GAAG;AACpC,kBAAQ,YAAYC,qBAAoB,QAAQ,gBAAgB,GAAG,aAAa,WAAY;AAC1F,oBAAQ,eAAe;AAAA,UACzB,CAAC,CAAC;AAAA,QACJ;AAAA,MACF,OAAO;AACL,YAAI,aAAa,gBAAgB;AACjC,kBAAU,WAAW,QAAQ,CAAC;AAC9B,cAAM,IAAI,UAAU;AACpB,wBAAgB,OAAO;AACvB,QAAQ,YAAY,SAAS;AAAA,UAC3B,OAAO;AAAA,YACL,QAAQ;AAAA,YACR,iBAAiB;AAAA,UACnB;AAAA,QACF,GAAG,WAAW;AACd,qBAAa,OAAO;AAAA,MACtB;AAEA,oBAAc,SAAS,qBAAqB,WAAW,GAAG;AAAA,QACxD,gBAAgB,QAAQ,IAAI;AAAA,QAC5B,aAAa,KAAK,QAAQ,QAAQ,IAAI,EAAE;AAAA,QACxC,cAAc,MAAM;AAAA,MACtB,GAAG;AAAA,QACD,QAAQ;AAAA,UACN,eAAe;AAAA,QAEjB;AAAA,MACF,CAAC;AACD,cAAQ,cAAc;AAAA,QACpB,UAAU;AAAA,QACV,OAAO;AAAA,MACT,CAAC;AACD,UAAI,UAAU,QAAQ,eAAe;AAErC,UAAI,SAAS;AACX,gBAAQ,IAAI,WAAW,IAAI;AAC3B,gBAAQ,IAAI,WAAW,KAAK,WAAW,IAAI;AAAA,MAC7C;AAEA,cAAQ,SAAS,KAAK;AACtB,WAAK,iBAAiB,KAAK,OAAO;AAClC,+BAAyB,SAAS,WAAW;AAC7C,0BAAoB,SAAS,cAAc,IAAI,OAAO,GAAG,cAAc,IAAI,WAAW,GAAG,cAAc,IAAI,UAAU,CAAC;AAAA,IACxH;AAEA,SAAK,gBAAgB;AACrB,SAAK,UAAU;AAAA,EACjB;AAEA,EAAAH,gBAAe,OAAO;AACtB,SAAOA;AACT,EAAE,aAAS;AAIX,SAASI,qBAAoB,MAAM,aAAa,IAAI;AAClD,MAAI,SAAS,IAAY,aAAK;AAAA,IAC5B,OAAO;AAAA,MACL,GAAG,KAAK,IAAI;AAAA,MACZ,GAAG,KAAK,IAAI;AAAA,MACZ,OAAO;AAAA,MACP,QAAQ,KAAK,SAAS;AAAA,IACxB;AAAA,EACF,CAAC;AACD,EAAQ,UAAU,QAAQ;AAAA,IACxB,OAAO;AAAA,MACL,GAAG,KAAK,IAAI;AAAA,MACZ,OAAO,KAAK,QAAQ;AAAA,MACpB,QAAQ,KAAK,SAAS;AAAA,IACxB;AAAA,EACF,GAAG,aAAa,EAAE;AAClB,SAAO;AACT;AAEA,IAAO,yBAAQ;;;ACzJf,IAAI,kBAAkB;AAEtB,IAAI,wBAEJ,SAAU,QAAQ;AAChB,YAAUC,wBAAuB,MAAM;AAEvC,WAASA,yBAAwB;AAC/B,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,uBAAsB;AACnC,WAAO;AAAA,EACT;AAMA,EAAAA,uBAAsB,UAAU,OAAO,SAAU,QAAQ;AAEvD,WAAO,UAAU,KAAK,MAAM,MAAM,SAAS;AAK3C,SAAK,uBAAuB,IAAI,6BAA4B,KAAK,KAAK,SAAS,IAAI,GAAU,KAAK,KAAK,YAAY,IAAI,CAAC;AAAA,EAC1H;AASA,EAAAA,uBAAsB,UAAU,UAAU,SAAU,MAAM;AACxD,QAAI,gBAAgB,KAAK;AASzB,QAAI,gBAAgB,CAAC;AAErB,QAAI,cAAc,UAAU,MAAM,SAAU,MAAM;AAChD,UAAI,CAAC,cAAc,eAAe,KAAK,KAAK,EAAE,GAAG;AAC/C,sBAAc,KAAK,KAAK,MAAM;AAAA,MAChC;AAEA,aAAO,KAAK;AAAA,IACd,CAAC;AACD,QAAI,YAAY,CAAC;AACjB,gBAAY,QAAQ,KAAK,SAAU,OAAO,KAAK;AAC7C,gBAAU,KAAK;AAAA,QACb,MAAM;AAAA,QACN,UAAU;AAAA,MACZ,CAAC;AAAA,IACH,CAAC;AACD,QAAI,WAAW,UAAU;AAEzB,aAAS,IAAI,GAAG,IAAI,UAAU,EAAE,GAAG;AACjC,UAAI,SAAS,UAAU,GAAG;AAE1B,eAAS,IAAI,GAAG,IAAI,UAAU,GAAG,SAAS,QAAQ,EAAE,GAAG;AACrD,YAAI,YAAY,UAAU,GAAG,SAAS,GAAG,KAAK;AAC9C,sBAAc,aAAa;AAAA,MAC7B;AAEA,eAAS,aAAa,eAAe;AACnC,YAAI,cAAc,eAAe,SAAS,KAAK,cAAc,eAAe,GAAG;AAC7E,wBAAc,aAAa;AAC3B,eAAK,iBAAiB,CAAC,WAAW,GAAG,MAAM;AAC3C;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAEA,WAAO;AAAA,EACT;AAQA,EAAAA,uBAAsB,UAAU,iBAAiB,SAAU,QAAQ,SAAS;AAC1E,QAAI,kBAAkB,KAAK,uBAAuB,cAAc,gBAAgB,EAAE,OAAO;AACzF,QAAI,WAAW,gBAAgB,IAAI,MAAM;AAEzC,QAAI,aAAoB,OAAO,OAAO,MAAM,SAAU,UAAU;AAC9D,aAAO,SAAS,OAAO;AAAA,IACzB,CAAC;AAED,QAAI,OAAO,KAAK,QAAQ,cAAc,CAAC,CAAC;AACxC,QAAI,WAAW,CAAC;AAChB,QAAI,UAAU,KAAK,UAAiB,cAAc;AAClD,QAAI,QAAQ;AAEZ,aAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,EAAE,GAAG;AACpC,eAAS,KAAK,KAAK,GAAG,gBAAgB;AAEtC,UAAI,CAAC,QAAQ,IAAI,KAAK,GAAG,gBAAgB,GAAG;AAC1C,gBAAQ,IAAI,KAAK,GAAG,kBAAkB,KAAK;AAC3C;AAAA,MACF;AAAA,IACF;AAEA,QAAI,aAAa,wBAAwB,MAAM;AAAA,MAC7C,iBAAiB,CAAC,QAAQ;AAAA,MAC1B,kBAAkB,CAAC;AAAA,QACjB,MAAM;AAAA,QACN,MAAM,uBAAuB,QAAQ;AAAA,MACvC,GAAG;AAAA,QACD,MAAM;AAAA,QACN,MAAM;AAAA,MACR,GAAG;AAAA,QACD,MAAM;AAAA,QACN,MAAM;AAAA,MACR,CAAC;AAAA,MACD,cAAc;AAAA,QACZ,QAAQ;AAAA,QACR,OAAO;AAAA,QACP,UAAU;AAAA,MACZ;AAAA,IACF,CAAC,EAAE;AACH,QAAI,OAAO,IAAI,mBAAW,YAAY,IAAI;AAC1C,SAAK,SAAS,IAAI;AAClB,WAAO;AAAA,EACT;AAOA,EAAAA,uBAAsB,UAAU,iBAAiB,WAAY;AAC3D,QAAI,OAAO,KAAK,QAAQ;AACxB,QAAI,WAAW,KAAK,MAAM;AAC1B,QAAI,WAAW,CAAC;AAEhB,aAAS,IAAI,GAAG,IAAI,UAAU,EAAE,GAAG;AACjC,eAAS,KAAK;AAAA,IAChB;AAEA,QAAI,UAAU,KAAK,aAAa,QAAQ;AAExC,QAAI,cAAc,UAAU,UAAU,SAAU,OAAO;AACrD,aAAO,KAAK,IAAI,QAAQ,KAAK;AAAA,IAC/B,CAAC;AACD,QAAI,cAAc,CAAC;AACnB,gBAAY,QAAQ,KAAK,SAAU,OAAO,KAAK;AAC7C,YAAM,KAAK,SAAU,QAAQ,QAAQ;AACnC,eAAO,KAAK,IAAI,SAAS,MAAM,IAAI,KAAK,IAAI,SAAS,MAAM;AAAA,MAC7D,CAAC;AACD,kBAAY,KAAK;AAAA,QACf,MAAM;AAAA,QACN,SAAS;AAAA,MACX,CAAC;AAAA,IACH,CAAC;AACD,WAAO;AAAA,EACT;AAMA,EAAAA,uBAAsB,UAAU,qBAAqB,SAAU,KAAK,OAAO,UAAU;AACnF,QAAI,CAAQ,QAAQ,GAAG,GAAG;AACxB,YAAM,MAAM,CAAC,GAAG,IAAI,CAAC;AAAA,IACvB;AAEA,QAAI,OAAO,KAAK,QAAQ;AACxB,QAAI,cAAc,KAAK,eAAe;AACtC,QAAI,UAAU,CAAC;AACf,QAAI,WAAW,YAAY;AAC3B,QAAI;AAEJ,aAAS,IAAI,GAAG,IAAI,UAAU,EAAE,GAAG;AACjC,UAAI,UAAU,OAAO;AACrB,UAAI,aAAa;AACjB,UAAI,WAAW,YAAY,GAAG,QAAQ;AAEtC,eAAS,IAAI,GAAG,IAAI,UAAU,EAAE,GAAG;AACjC,YAAI,WAAW,KAAK,IAAI,IAAI,IAAI,YAAY,GAAG,QAAQ,EAAE;AACzD,YAAIC,QAAO,KAAK,IAAI,WAAW,KAAK;AAEpC,YAAIA,SAAQ,SAAS;AACnB,yBAAe;AACf,oBAAUA;AACV,uBAAa,YAAY,GAAG,QAAQ;AAAA,QACtC;AAAA,MACF;AAEA,cAAQ,KAAK,UAAU;AAAA,IACzB;AAEA,WAAO;AAAA,MACL,aAAa;AAAA,MACb;AAAA,IACF;AAAA,EACF;AAEA,EAAAD,uBAAsB,UAAU,gBAAgB,SAAU,WAAW,gBAAgB,UAAU;AAC7F,QAAI,OAAO,KAAK,QAAQ;AACxB,QAAI,OAAO,KAAK,QAAQ,SAAS;AACjC,QAAI,QAAQ,KAAK,IAAI,KAAK,aAAa,OAAO,GAAG,SAAS;AAC1D,WAAO,oBAAoB,aAAa;AAAA,MACtC;AAAA,MACA;AAAA,IACF,CAAC;AAAA,EACH;AAEA,EAAAA,uBAAsB,OAAO;AAC7B,EAAAA,uBAAsB,eAAe,CAAC,YAAY;AAClD,EAAAA,uBAAsB,gBAAgB;AAAA,IAEpC,GAAG;AAAA,IACH,SAAS;AAAA,IACT,kBAAkB;AAAA,IAElB,aAAa,CAAC,OAAO,KAAK;AAAA,IAE1B,iBAAiB;AAAA,IACjB,iBAAiB;AAAA,IACjB,OAAO;AAAA,MACL,QAAQ;AAAA,MACR,MAAM;AAAA,MACN,UAAU;AAAA,MACV,UAAU;AAAA,IACZ;AAAA,IACA,UAAU;AAAA,MACR,OAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AAAA,EACF;AACA,SAAOA;AACT,EAAE,cAAW;AAEb,IAAO,2BAAQ;;;AC1PA,SAAR,iBAAkC,SAAS,KAAK;AACrD,UAAQ,iBAAiB,cAAc,SAAU,aAAa;AAC5D,QAAI,OAAO,YAAY,QAAQ;AAC/B,QAAI,SAAS,YAAY;AACzB,QAAI,aAAa,CAAC;AAElB,QAAI,OAAO,OAAO,QAAQ;AAC1B,eAAW,OAAO;AAClB,QAAI,cAAc,YAAY,IAAI,aAAa;AAC/C,QAAI,OAAO,OAAO,QAAQ;AAC1B,eAAW,cAAc;AAEzB,QAAI,KAAK,WAAW,cAAc;AAChC,kBAAY,KAAgBE,cAAa,YAAY,IAAI,KAAK,MAAM;AACpE,kBAAY,KAAgBA,cAAa,YAAY,IAAI,KAAK,MAAM;AACpE,UAAI,SAAS,KAAK,SAAS,YAAY,KAAK,YAAY;AACxD,yBAAmB,MAAM,aAAa,MAAM;AAAA,IAC9C,OAAO;AACL,kBAAY,KAAgBA,cAAa,YAAY,IAAI,KAAK,KAAK;AACnE,kBAAY,KAAgBA,cAAa,YAAY,IAAI,KAAK,KAAK;AACnE,UAAI,QAAQ,KAAK,QAAQ,YAAY,KAAK,YAAY;AACtD,yBAAmB,MAAM,aAAa,KAAK;AAAA,IAC7C;AAEA,SAAK,UAAU,cAAc,UAAU;AAAA,EACzC,CAAC;AACH;AASA,SAAS,mBAAmB,MAAM,aAAa,QAAQ;AACrD,MAAI,CAAC,KAAK,MAAM,GAAG;AACjB;AAAA,EACF;AAEA,MAAI,WAAW,YAAY;AAE3B,MAAI,cAAc,YAAY,eAAe;AAE7C,MAAI,UAAU,KAAK,aAAa,QAAQ;AACxC,MAAI,WAAW,KAAK,aAAa,OAAO;AACxC,MAAI,cAAqB,IAAI,aAAa,SAAU,aAAa;AAC/D,WAAc,IAAI,YAAY,SAAS,SAAU,KAAK;AACpD,UAAI,KAAK,SAAS,YAAY,KAAK,IAAI,SAAS,GAAG,CAAC;AACpD,SAAG,KAAK,KAAK,IAAI,UAAU,GAAG;AAC9B,aAAO;AAAA,IACT,CAAC;AAAA,EACH,CAAC;AACD,MAAI,OAAO,gBAAgB,WAAW;AACtC,MAAI,WAAW,KAAK;AACpB,MAAI,KAAK,SAAS,KAAK;AAEvB,MAAI,IAAI,YAAY;AACpB,MAAI,IAAI,YAAY,GAAG,QAAQ;AAC/B,MAAI;AAEJ,WAAS,IAAI,GAAG,IAAI,GAAG,EAAE,GAAG;AAC1B,aAAS,SAAS,KAAK;AACvB,SAAK,cAAc,YAAY,GAAG,QAAQ,IAAI;AAAA,MAC5C,YAAY;AAAA,MACZ,GAAG,YAAY,GAAG,GAAG;AAAA,MACrB,IAAI;AAAA,MACJ,GAAG,YAAY,GAAG,GAAG,KAAK;AAAA,IAC5B,CAAC;AAED,aAAS,IAAI,GAAG,IAAI,GAAG,EAAE,GAAG;AAC1B,gBAAU,YAAY,IAAI,GAAG,GAAG,KAAK;AACrC,WAAK,cAAc,YAAY,GAAG,QAAQ,IAAI;AAAA,QAC5C,YAAY;AAAA,QACZ,GAAG,YAAY,GAAG,GAAG;AAAA,QACrB,IAAI;AAAA,QACJ,GAAG,YAAY,GAAG,GAAG,KAAK;AAAA,MAC5B,CAAC;AAAA,IACH;AAAA,EACF;AACF;AASA,SAAS,gBAAgB,MAAM;AAC7B,MAAI,WAAW,KAAK;AACpB,MAAI,WAAW,KAAK,GAAG;AACvB,MAAI,OAAO,CAAC;AACZ,MAAI,KAAK,CAAC;AACV,MAAI,MAAM;AAEV,WAAS,IAAI,GAAG,IAAI,UAAU,EAAE,GAAG;AACjC,QAAI,OAAO;AAEX,aAAS,IAAI,GAAG,IAAI,UAAU,EAAE,GAAG;AACjC,cAAQ,KAAK,GAAG,GAAG;AAAA,IACrB;AAEA,QAAI,OAAO,KAAK;AACd,YAAM;AAAA,IACR;AAEA,SAAK,KAAK,IAAI;AAAA,EAChB;AAEA,WAAS,IAAI,GAAG,IAAI,UAAU,EAAE,GAAG;AACjC,OAAG,MAAM,MAAM,KAAK,MAAM;AAAA,EAC5B;AAEA,QAAM;AAEN,WAAS,IAAI,GAAG,IAAI,UAAU,EAAE,GAAG;AACjC,QAAIC,OAAM,KAAK,KAAK,GAAG;AAEvB,QAAIA,OAAM,KAAK;AACb,YAAMA;AAAA,IACR;AAAA,EACF;AAEA,SAAO;AAAA,IACL;AAAA,IACA;AAAA,EACF;AACF;;;AChJO,SAASC,UAAQ,WAAW;AACjC,YAAU,kBAAkB,sBAAc;AAC1C,YAAU,oBAAoB,wBAAqB;AACnD,YAAU,eAAe,gBAAgB;AACzC,YAAU,kBAAkB,WAAW,YAAY,CAAC;AACtD;;;ACmBA,IAAI,mBAAmB;AACvB,IAAI,iBAAiB;AAKrB,IAAI,gBAEJ,SAAU,QAAQ;AAChB,YAAUC,gBAAe,MAAM;AAE/B,WAASA,eAAc,MAAM,aAAa,SAAS,KAAK;AACtD,QAAI,QAAQ,OAAO,KAAK,IAAI,KAAK;AAEjC,UAAM,KAAK;AACX,UAAM,aAAa;AAAA,MACjB,QAAQ;AAAA,IACV;AACA,cAAU,KAAK,EAAE,cAAc,YAAY;AAC3C,QAAI,OAAO,IAAY,aAAK;AAAA,MAC1B,IAAI;AAAA,MACJ,QAAQ,KAAK,SAAS,EAAE,IAAI,CAAC,SAAS,QAAQ,CAAC;AAAA,IACjD,CAAC;AAED,UAAM,eAAe,IAAI;AAEzB,UAAM,WAAW,MAAM,MAAM,aAAa,SAAS,GAAG;AAEtD,WAAO;AAAA,EACT;AAEA,EAAAA,eAAc,UAAU,aAAa,SAAU,aAAa,MAC5D,aAAa,SAAS,KAAK;AACzB,SAAK,OAAO;AACZ,SAAK,QAAQ;AACb,kBAAc,eAAe,KAAK;AAClC,cAAU,WAAW,KAAK;AAC1B,QAAI,SAAS;AACb,cAAU,MAAM,EAAE,YAAY,KAAK;AACnC,QAAI,YAAY,KAAK,SAAS;AAC9B,QAAI,gBAAgB,UAAU,SAAS,UAAU;AACjD,QAAIC,UAAS,KAAK,UAAU;AAC5B,QAAI,cAAqB,OAAO,CAAC,GAAGA,OAAM;AAC1C,gBAAY,QAAQ;AACpB,QAAI,cAAc,KAAK,UAAU,OAAO;AACxC,gBAAY,WAAW;AACvB,QAAI,QAAQ,KAAK,UAAU,OAAO;AAElC,QAAI,OAAO;AACT,kBAAY,QAAQ,+BAA+B,OAAO,GAAG;AAAA,IAC/D;AAEA,QAAI,eAAe,sBAAsB,UAAU,SAAS,WAAW,GAAG,aAAa,IAAI;AAC3F,IAAO,OAAO,aAAa,YAAY;AACvC,IAAO,KAAK,gBAAgB,SAAU,WAAW;AAC/C,UAAI,QAAQ,OAAO,YAAY,SAAS;AACxC,UAAI,iBAAiB,UAAU,SAAS,CAAC,WAAW,WAAW,CAAC;AAChE,YAAM,QAAQ,eAAe,aAAa;AAE1C,UAAIC,gBAAe,sBAAsB,gBAAgB,WAAW;AAEpE,UAAIA,eAAc;AAChB,cAAM,QAAQA;AAAA,MAChB;AAAA,IACF,CAAC;AAED,QAAI,aAAa;AACf,aAAO,SAAS,WAAW;AAC3B,aAAO,MAAM,IAAID,QAAO;AACxB,MAAQ,UAAU,QAAQ;AAAA,QACxB,OAAO;AAAA,UACL,GAAGA,QAAO;AAAA,QACZ;AAAA,MACF,GAAG,aAAa,KAAK,SAAS;AAAA,IAChC,OAAO;AAGL,MAAQ,YAAY,QAAQ;AAAA,QAC1B,OAAO;AAAA,MACT,GAAG,WAAW;AACd,mBAAa,MAAM;AAAA,IACrB;AAEA,WAAO,SAAS,WAAW;AAE3B,SAAK,aAAa,WAAW;AAE7B,QAAI,cAAc,UAAU,WAAW,QAAQ;AAC/C,mBAAe,OAAO,KAAK,UAAU,WAAW;AAChD,SAAK,eAAe,eAAe,KAAK;AACxC,SAAK,WAAW,WAAW,KAAK;AAChC,QAAI,QAAQ,cAAc,IAAI,OAAO;AACrC,QAAI,iBAAiB,UAAU,aAAa,KAAK,oBAAoB,IAAI,UAAU,eAAe,KAAK,qBAAqB,IAAI;AAChI,wBAAoB,MAAM,gBAAgB,cAAc,IAAI,WAAW,GAAG,cAAc,IAAI,UAAU,CAAC;AAAA,EACzG;AAEA,EAAAD,eAAc,UAAU,eAAe,SAAU,aAAa;AAC5D,QAAI,QAAQ;AAEZ,QAAI,YAAY,KAAK,KAAK,SAAS;AACnC,QAAI,mBAAmB,UAAU,SAAS,OAAO;AACjD,QAAIC,UAAS,KAAK,KAAK,UAAU;AACjC,QAAI,QAAQA,QAAO,WAAWA,QAAO;AACrC,QAAI,YAAYA,QAAO,aAAaA,QAAO,YAAY;AACvD,QAAI,KAAK,KAAK,IAAI,QAAQ;AAC1B,QAAI,KAAK,KAAK,IAAI,QAAQ;AAC1B,QAAI,SAAS;AACb,QAAI,QAAQ,OAAO,eAAe;AAClC,QAAI,YAAY,KAAK,KAAK;AAC1B,QAAI,gBAAgB,iBAAiB,IAAI,UAAU,IAAI,MAAM,KAAK;AAClE,QAAI,gBAAgB,iBAAiB,IAAI,MAAM,KAAK,EAAE,iBAAiB,QAAQ,KAAK,IAAI,KAAK,IAAI;AACjG,UAAM,SAAS,CAAC;AAEhB,IAAO,KAAK,gBAAgB,SAAU,WAAW;AAC/C,UAAI,kBAAkB,cAAc,WAAW,UAAU,SAAS,OAAO,IAAI,UAAU,SAAS,CAAC,WAAW,OAAO,CAAC;AACpH,UAAI,WAAW,cAAc;AAC7B,UAAI,QAAQ,WAAW,QAAQ,MAAM,YAAY,SAAS;AAC1D,UAAI,OAAO,YAAY,kBAAkB,WAAW,SAAS;AAE7D,UAAI,UAAU;AACZ,eAAO,QAAQ,MAAM,KAAK;AAAA,MAC5B;AAEA,YAAM,QAAQ,gBAAgB,iBAAiB,CAAC,GAAG,MAAM,cAAc,UAAU,IAAI;AAErF,UAAI,MAAM;AACR,cAAM,MAAM,OAAO;AAAA,MACrB;AAGA,UAAI,UAAU,gBAAgB,IAAI,MAAM;AAExC,UAAI,WAAW,QAAQ,CAAC,UAAU;AAChC,cAAM,SAAS,CAAC;AAAA,MAClB;AAEA,UAAI,gBAAgB,aAAa,iBAAiB,UAAU;AAC5D,UAAI,cAAc,WAAW,SAAS,OAAO,OAAO;AACpD,UAAI,aAAa,YAAY,MAAM;AACnC,kBAAY,aAAa;AAAA,QACvB,aAAa,gBAAgB,IAAI,OAAO,MAAM,YAAY,aAAa;AAAA,QACvE,QAAQ,kBAAkB;AAAA,MAC5B;AACA,UAAI;AACJ,UAAI,eAAe,aAAa,iBAAiB,UAAU,KAAK;AAChE,UAAI,YAAY,aAAa,iBAAiB,OAAO;AAErD,UAAI,kBAAkB,WAAW;AAC/B,YAAIA,QAAO,IAAI;AACf,oBAAY,WAAW,KAAK,KAAK,IAAI,UAAU;AAAA,MACjD,OAAO;AACL,YAAI,CAAC,aAAa,cAAc,UAAU;AAExC,cAAI,UAAU,IAAI,KAAK,MAAMA,QAAO,OAAO,GAAG;AAC5C,gBAAI;AAAA,UACN,OAAO;AACL,iBAAKA,QAAO,IAAIA,QAAO,MAAM;AAAA,UAC/B;AAEA,sBAAY;AAAA,QACd,WAAW,cAAc,QAAQ;AAC/B,cAAIA,QAAO,KAAK;AAEhB,cAAI,WAAW,KAAK,KAAK,GAAG;AAC1B,wBAAY;AAAA,UACd;AAAA,QACF,WAAW,cAAc,SAAS;AAChC,cAAIA,QAAO,IAAI;AAEf,cAAI,WAAW,KAAK,KAAK,GAAG;AAC1B,wBAAY;AAAA,UACd;AAAA,QACF;AAAA,MACF;AAEA,YAAM,MAAM,QAAQ;AACpB,YAAM,MAAM,gBAAgB,aAAa,iBAAiB,eAAe,KAAK;AAC9E,YAAM,IAAI,IAAI,KAAKA,QAAO;AAC1B,YAAM,IAAI,IAAI,KAAKA,QAAO;AAC1B,UAAI,aAAa,aAAa,iBAAiB,QAAQ;AACvD,UAAI,SAAS;AAEb,UAAI,eAAe,UAAU;AAC3B,iBAAS,gBAAgB,CAAC,QAAQ;AAElC,YAAI,SAAS,KAAK,KAAK,KAAK,SAAS,KAAK,KAAK,KAAK;AAClD,oBAAU,KAAK;AAAA,QACjB;AAAA,MACF,WAAW,eAAe,cAAc;AACtC,iBAAS,KAAK,KAAK,IAAI;AAEvB,YAAI,SAAS,KAAK,KAAK,GAAG;AACxB,oBAAU,KAAK;AAAA,QACjB,WAAW,SAAS,CAAC,KAAK,KAAK,GAAG;AAChC,oBAAU,KAAK;AAAA,QACjB;AAAA,MACF,WAAkB,SAAS,UAAU,GAAG;AACtC,iBAAS,aAAa,KAAK,KAAK;AAAA,MAClC;AAEA,YAAM,WAAW;AAAA,IACnB,CAAC;AAED,aAAS,aAAa,OAAO,MAAM;AACjC,UAAI,YAAY,MAAM,IAAI,IAAI;AAE9B,UAAI,aAAa,MAAM;AACrB,eAAO,iBAAiB,IAAI,IAAI;AAAA,MAClC;AAEA,aAAO;AAAA,IACT;AAEA,UAAM,WAAW;AAAA,EACnB;AAEA,SAAOD;AACT,EAAU,cAAM;AAEhB,IAAO,wBAAQ;;;AClOR,IAAI,sBAAsB;AACjC,IAAI,mBAAmB;AACvB,IAAI,qBAAqB;AAClB,SAAS,sBAAsB,WAAW;AAC/C,YAAU,eAAe;AAAA,IACvB,MAAM;AAAA,IACN,QAAQ;AAAA,EACV,GAAG,SAAU,SAAS,SAAS;AAC7B,YAAQ,cAAc;AAAA,MACpB,UAAU;AAAA,MACV,SAAS;AAAA,MACT,OAAO;AAAA,IACT,GAAG,gBAAgB;AAEnB,aAAS,iBAAiB,OAAO,OAAO;AACtC,UAAI,aAAa,mBAAmB,SAAS,CAAC,mBAAmB,GAAG,KAAK;AAEzE,UAAI,YAAY;AACd,YAAI,iBAAiB,MAAM,YAAY;AAEvC,YAAI,gBAAgB;AAClB,kBAAQ,YAAY,cAAc,gBAAgB,WAAW,IAAI,IAAI,WAAW;AAAA,QAClF;AAEA,cAAM,cAAc,WAAW,IAAI;AAAA,MACrC;AAAA,IACF;AAAA,EACF,CAAC;AACD,YAAU,eAAe;AAAA,IACvB,MAAM;AAAA,IACN,QAAQ;AAAA,EACV,GAAG,SAAU,SAAS,SAAS,KAAK;AAElC,cAAU,OAAO,CAAC,GAAG,OAAO;AAC5B,YAAQ,cAAc;AAAA,MACpB,UAAU;AAAA,MACV,SAAS;AAAA,MACT,OAAO;AAAA,IACT,GAAG,eAAe;AAElB,aAAS,gBAAgB,OAAO;AAC9B,UAAI,aAAa,mBAAmB,SAAS,CAAC,gBAAgB,GAAG,KAAK;AAEtE,UAAI,YAAY;AACd,gBAAQ,YAAY,WAAW,KAAK;AAAA,MACtC;AAAA,IACF;AAEA,QAAI,MAAuC;AACzC,0BAAoB,qBAAqB,WAAW;AAAA,IACtD;AAGA,QAAI,eAAe,OAAO,SAAS;AAAA,MACjC,MAAM;AAAA,IACR,CAAC,CAAC;AAAA,EACJ,CAAC;AACD,YAAU,eAAe;AAAA,IACvB,MAAM;AAAA,IACN,QAAQ;AAAA,EACV,GAAG,SAAU,SAAS,SAAS,KAAK;AAClC,cAAU,OAAO,CAAC,GAAG,OAAO;AAE5B,QAAI,MAAuC;AACzC,0BAAoB,uBAAuB,UAAU;AAAA,IACvD;AAEA,QAAI,eAAe,OAAO,SAAS;AAAA,MACjC,MAAM;AAAA,IACR,CAAC,CAAC;AAAA,EACJ,CAAC;AACH;;;AClEA,IAAI,eAEJ,SAAU,QAAQ;AAChB,YAAUG,eAAc,MAAM;AAE9B,WAASA,gBAAe;AACtB,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,cAAa;AAC1B,WAAO;AAAA,EACT;AAEA,EAAAA,cAAa,UAAU,SAAS,SAAU,aAAa,SAAS,KAChE,SAAS;AACP,QAAI,OAAO;AACX,SAAK,cAAc;AACnB,SAAK,MAAM;AACX,SAAK,UAAU;AACf,QAAI,OAAO,YAAY,QAAQ;AAC/B,QAAI,cAAc,KAAK,KAAK;AAC5B,QAAI,UAAU,YAAY,YAAY;AACtC,QAAI,QAAQ,KAAK;AACjB,QAAI,yBAAyB,YAAY,IAAI,wBAAwB;AACrE,QAAI,cAAc,CAAC;AACnB,YAAQ,SAAS,SAAU,MAAM;AAC/B,kBAAY,KAAK,IAAI;AAAA,IACvB,CAAC;AACD,QAAI,cAAc,KAAK,gBAAgB,CAAC;AACxC,eAAW,aAAa,WAAW;AACnC,iBAAa,aAAa,OAAO;AAEjC,SAAK,YAAY;AAEjB,SAAK,eAAe;AAEpB,aAAS,WAAWC,cAAaC,cAAa;AAC5C,UAAID,aAAY,WAAW,KAAKC,aAAY,WAAW,GAAG;AACxD;AAAA,MACF;AAEA,UAAI,mBAAWA,cAAaD,cAAaE,SAAQA,OAAM,EAAE,IAAI,WAAW,EAAE,OAAO,WAAW,EAAE,OAAc,MAAM,aAAa,IAAI,CAAC,EAAE,QAAQ;AAE9I,eAASA,QAAO,MAAM;AACpB,eAAO,KAAK,MAAM;AAAA,MACpB;AAEA,eAAS,YAAY,QAAQ,QAAQ;AACnC,YAAI,UAAU,UAAU,OAAO,OAAOF,aAAY;AAClD,YAAI,UAAU,UAAU,OAAO,OAAOC,aAAY;AAClD,qBAAa,SAAS,OAAO;AAAA,MAC/B;AAAA,IACF;AAEA,aAAS,aAAa,SAAS,SAAS;AACtC,UAAI,CAAC,0BAA0B,WAAW,CAAC,QAAQ,SAAS,GAAG;AAE7D,kBAAU;AAAA,MACZ;AAEA,UAAI,YAAY,eAAe,YAAY,aAAa;AACtD,YAAI,WAAW,QAAQ,OAAO;AAC5B,cAAI,SAAS;AAEX,oBAAQ,MAAM,WAAW,OAAO,SAAS,aAAa,SAAS,GAAG;AAElE,iBAAK,iBAAiB,QAAQ,WAAW,QAAQ,KAAK;AAAA,UACxD,OAAO;AAEL,YAAAE,YAAW,OAAO;AAAA,UACpB;AAAA,QACF,WAAW,SAAS;AAElB,cAAI,QAAQ,IAAI,sBAAc,SAAS,aAAa,SAAS,GAAG;AAChE,gBAAM,IAAI,KAAK;AAEf,eAAK,iBAAiB,QAAQ,WAAW,KAAK;AAAA,QAChD;AAAA,MACF;AAAA,IACF;AAEA,aAASA,YAAW,MAAM;AACxB,UAAI,CAAC,MAAM;AACT;AAAA,MACF;AAEA,UAAI,KAAK,OAAO;AACd,cAAM,OAAO,KAAK,KAAK;AACvB,aAAK,QAAQ;AAAA,MACf;AAAA,IACF;AAEA,aAAS,aAAaC,cAAa,UAAU;AAC3C,UAAI,SAAS,QAAQ,GAAG;AAEtB,YAAI,KAAK,cAAc;AAErB,eAAK,aAAa,WAAW,OAAOA,cAAa,aAAa,SAAS,GAAG;AAAA,QAC5E,OAAO;AAEL,eAAK,eAAe,IAAI,sBAAcA,cAAa,aAAa,SAAS,GAAG;AAC5E,gBAAM,IAAI,KAAK,YAAY;AAAA,QAC7B;AAGA,iBAAS,MAAM,IAAI,OAAO;AAC1B,aAAK,aAAa,GAAG,SAAS,SAAU,GAAG;AACzC,eAAK,YAAY,SAAS,UAAU;AAAA,QACtC,CAAC;AAAA,MACH,WAAW,KAAK,cAAc;AAE5B,cAAM,OAAO,KAAK,YAAY;AAC9B,aAAK,eAAe;AAAA,MACtB;AAAA,IACF;AAAA,EACF;AAMA,EAAAL,cAAa,UAAU,cAAc,WAAY;AAC/C,QAAI,QAAQ;AAEZ,SAAK,MAAM,IAAI,OAAO;AACtB,SAAK,MAAM,GAAG,SAAS,SAAU,GAAG;AAClC,UAAI,cAAc;AAElB,UAAI,WAAW,MAAM,YAAY,YAAY;AAE7C,eAAS,SAAS,SAAU,MAAM;AAChC,YAAI,CAAC,eAAe,KAAK,SAAS,KAAK,UAAU,EAAE,QAAQ;AACzD,cAAI,YAAY,KAAK,SAAS,EAAE,IAAI,WAAW;AAE/C,cAAI,cAAc,cAAc;AAC9B,kBAAM,YAAY,IAAI;AAAA,UACxB,WAAW,cAAc,QAAQ;AAC/B,gBAAI,YAAY,KAAK,SAAS;AAC9B,gBAAI,OAAO,UAAU,IAAI,MAAM;AAE/B,gBAAI,MAAM;AACR,kBAAI,aAAa,UAAU,IAAI,UAAU,IAAI,KAAK;AAClD,yBAAW,MAAM,UAAU;AAAA,YAC7B;AAAA,UACF;AAEA,wBAAc;AAAA,QAChB;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AAAA,EACH;AAMA,EAAAA,cAAa,UAAU,cAAc,SAAU,MAAM;AACnD,QAAI,SAAS,KAAK,YAAY,YAAY,GAAG;AAC3C,WAAK,IAAI,eAAe;AAAA,QACtB,MAAM;AAAA,QACN,MAAM,KAAK;AAAA,QACX,UAAU,KAAK,YAAY;AAAA,QAC3B,YAAY;AAAA,MACd,CAAC;AAAA,IACH;AAAA,EACF;AAMA,EAAAA,cAAa,UAAU,eAAe,SAAU,OAAO,aAAa;AAClE,QAAI,WAAW,YAAY,QAAQ;AACnC,QAAI,aAAa,SAAS,cAAc,CAAC;AAEzC,QAAI,YAAY;AACd,UAAI,KAAK,MAAM,KAAK,WAAW;AAC/B,UAAI,KAAK,MAAM,KAAK,WAAW;AAC/B,UAAI,SAAS,KAAK,KAAK,KAAK,KAAK,KAAK,EAAE;AACxC,aAAO,UAAU,WAAW,KAAK,UAAU,WAAW;AAAA,IACxD;AAAA,EACF;AAEA,EAAAA,cAAa,OAAO;AACpB,SAAOA;AACT,EAAE,aAAS;AAEX,IAAO,uBAAQ;;;AC1Lf,IAAI,sBAEJ,SAAU,QAAQ;AAChB,YAAUM,sBAAqB,MAAM;AAErC,WAASA,uBAAsB;AAC7B,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,qBAAoB;AACjC,UAAM,oBAAoB;AAC1B,WAAO;AAAA,EACT;AAEA,EAAAA,qBAAoB,UAAU,iBAAiB,SAAU,QAAQ,SAAS;AAExE,QAAI,OAAO;AAAA,MACT,MAAM,OAAO;AAAA,MACb,UAAU,OAAO;AAAA,IACnB;AACA,IAAAC,mBAAkB,IAAI;AACtB,QAAI,cAAc,KAAK,eAAsB,IAAI,OAAO,UAAU,CAAC,GAAG,SAAU,aAAa;AAC3F,aAAO,IAAI,cAAM,aAAa,MAAM,OAAO;AAAA,IAC7C,GAAG,IAAI;AAIP,QAAI,OAAO,aAAK,WAAW,MAAM,MAAM,UAAU;AAEjD,aAAS,WAAW,UAAU;AAC5B,eAAS,WAAW,gBAAgB,SAAU,OAAO,KAAK;AACxD,YAAI,OAAO,KAAK,mBAAmB,GAAG;AACtC,YAAI,aAAa,YAAY,KAAK;AAClC,uBAAe,MAAM,cAAc;AACnC,eAAO;AAAA,MACT,CAAC;AAAA,IACH;AAEA,WAAO,KAAK;AAAA,EACd;AAEA,EAAAD,qBAAoB,UAAU,gBAAgB,WAAY;AACxD,SAAK,cAAc;AAAA,EACrB;AAMA,EAAAA,qBAAoB,UAAU,gBAAgB,SAAU,WAAW;AACjE,QAAI,SAAS,OAAO,UAAU,cAAc,MAAM,MAAM,SAAS;AAEjE,QAAI,OAAO,KAAK,QAAQ,EAAE,KAAK,mBAAmB,SAAS;AAC3D,WAAO,eAAe,iBAAiB,MAAM,IAAI;AACjD,WAAO;AAAA,EACT;AAEA,EAAAA,qBAAoB,UAAU,gBAAgB,SAAU,MAAM;AAC5D,WAAO,KAAK,gBAAgB,KAAK,aAAa,KAAK;AAAA,EACrD;AAEA,EAAAA,qBAAoB,UAAU,cAAc,WAAY;AACtD,WAAO,KAAK;AAAA,EACd;AAEA,EAAAA,qBAAoB,UAAU,gBAAgB,SAAU,UAAU;AAChE,eAAW,KAAK,YAAY,WAAW,WAAW,KAAK;AACvD,QAAI,OAAO,KAAK,WAAW,EAAE,KAAK;AAElC,QAAI,CAAC,YAAY,aAAa,QAAQ,CAAC,KAAK,SAAS,QAAQ,GAAG;AAC9D,WAAK,YAAY;AAAA,IACnB;AAAA,EACF;AAEA,EAAAA,qBAAoB,UAAU,kBAAkB,WAAY;AAC1D,2BAAuB,IAAI;AAAA,EAC7B;AAEA,EAAAA,qBAAoB,OAAO;AAC3B,EAAAA,qBAAoB,gBAAgB;AAAA,IAElC,GAAG;AAAA,IAEH,QAAQ,CAAC,OAAO,KAAK;AAAA,IACrB,QAAQ,CAAC,GAAG,KAAK;AAAA,IAEjB,WAAW;AAAA,IACX,YAAY;AAAA,IAEZ,UAAU;AAAA,IAEV,kBAAkB;AAAA,IAElB,WAAW;AAAA,IACX,wBAAwB;AAAA,IACxB,OAAO;AAAA,MAEL,QAAQ;AAAA,MACR,MAAM;AAAA,MACN,SAAS;AAAA,MAGT,OAAO;AAAA,MACP,UAAU;AAAA,MACV,UAAU;AAAA,MACV,QAAQ;AAAA,IACV;AAAA,IACA,WAAW;AAAA,MACT,aAAa;AAAA,MACb,aAAa;AAAA,MACb,YAAY;AAAA,MACZ,YAAY;AAAA,MACZ,aAAa;AAAA,MACb,eAAe;AAAA,MACf,eAAe;AAAA,MACf,SAAS;AAAA,IACX;AAAA,IACA,UAAU;AAAA,MACR,OAAO;AAAA,IACT;AAAA,IACA,MAAM;AAAA,MACJ,WAAW;AAAA,QACT,SAAS;AAAA,MACX;AAAA,MACA,OAAO;AAAA,QACL,SAAS;AAAA,MACX;AAAA,IACF;AAAA,IAEA,eAAe;AAAA,IACf,mBAAmB;AAAA,IACnB,yBAAyB;AAAA,IACzB,MAAM,CAAC;AAAA,IAaP,MAAM;AAAA,EACR;AACA,SAAOA;AACT,EAAE,cAAW;AAEb,SAASC,mBAAkB,UAAU;AAInC,MAAIC,OAAM;AACV,EAAO,KAAK,SAAS,UAAU,SAAU,OAAO;AAC9C,IAAAD,mBAAkB,KAAK;AACvB,QAAI,aAAa,MAAM;AAEvB,IAAO,QAAQ,UAAU,MAAM,aAAa,WAAW;AACvD,IAAAC,QAAO;AAAA,EACT,CAAC;AACD,MAAI,YAAY,SAAS;AAEzB,MAAW,QAAQ,SAAS,GAAG;AAC7B,gBAAY,UAAU;AAAA,EACxB;AAEA,MAAI,aAAa,QAAQ,MAAM,SAAS,GAAG;AACzC,gBAAYA;AAAA,EACd;AAGA,MAAI,YAAY,GAAG;AACjB,gBAAY;AAAA,EACd;AAEA,EAAO,QAAQ,SAAS,KAAK,IAAI,SAAS,MAAM,KAAK,YAAY,SAAS,QAAQ;AACpF;AAEA,IAAO,yBAAQ;;;ACxLf,IAAIC,UAAS,KAAK,KAAK;AACR,SAAR,eAAgC,YAAY,SAAS,KAAK;AAC/D,UAAQ,iBAAiB,YAAY,SAAU,aAAa;AAC1D,QAAIC,UAAS,YAAY,IAAI,QAAQ;AACrC,QAAI,SAAS,YAAY,IAAI,QAAQ;AAErC,QAAI,CAAQ,QAAQ,MAAM,GAAG;AAC3B,eAAS,CAAC,GAAG,MAAM;AAAA,IACrB;AAEA,QAAI,CAAQ,QAAQA,OAAM,GAAG;AAC3B,MAAAA,UAAS,CAACA,SAAQA,OAAM;AAAA,IAC1B;AAEA,QAAI,QAAQ,IAAI,SAAS;AACzB,QAAI,SAAS,IAAI,UAAU;AAC3B,QAAI,OAAO,KAAK,IAAI,OAAO,MAAM;AACjC,QAAI,KAAKC,cAAaD,QAAO,IAAI,KAAK;AACtC,QAAI,KAAKC,cAAaD,QAAO,IAAI,MAAM;AACvC,QAAI,KAAKC,cAAa,OAAO,IAAI,OAAO,CAAC;AACzC,QAAI,IAAIA,cAAa,OAAO,IAAI,OAAO,CAAC;AACxC,QAAI,aAAa,CAAC,YAAY,IAAI,YAAY,IAAIF;AAClD,QAAI,WAAW,YAAY,IAAI,UAAU,IAAIA;AAC7C,QAAI,cAAc,YAAY,QAAQ,EAAE,KAAK;AAC7C,QAAI,WAAW,YAAY,YAAY;AACvC,QAAI,YAAY,SAAS;AACzB,QAAIG,QAAO,YAAY,IAAI,MAAM;AAEjC,QAAIA,SAAQ,MAAM;AAChB,MAAAC,cAAa,UAAUD,KAAI;AAAA,IAC7B;AAEA,QAAI,iBAAiB;AACrB,IAAO,KAAK,SAAS,UAAU,SAAU,OAAO;AAC9C,OAAC,MAAM,MAAM,SAAS,CAAC,KAAK;AAAA,IAC9B,CAAC;AACD,QAAIE,OAAM,SAAS,SAAS;AAE5B,QAAI,aAAa,KAAK,MAAMA,QAAO,kBAAkB;AACrD,QAAI,mBAAmB,SAAS,QAAQ;AACxC,QAAI,SAAS,SAAS,UAAU,mBAAmB,KAAK;AACxD,QAAI,aAAa,IAAI,OAAO,UAAU;AACtC,QAAI,YAAY,YAAY,IAAI,WAAW;AAC3C,QAAI,mBAAmB,YAAY,IAAI,kBAAkB;AAIzD,QAAI,MAAM,YAAY,IAAI;AAM1B,QAAIC,cAAa,SAAU,MAAMC,aAAY;AAC3C,UAAI,CAAC,MAAM;AACT;AAAA,MACF;AAEA,UAAI,WAAWA;AAEf,UAAI,SAAS,aAAa;AAExB,YAAI,QAAQ,KAAK,SAAS;AAC1B,YAAIC,SAAQH,SAAQ,KAAK,mBAAmB,aAAa,QAAQ;AAEjE,YAAIG,SAAQ,UAAU;AACpB,UAAAA,SAAQ;AAAA,QACV;AAKA,mBAAWD,cAAa,MAAMC;AAC9B,YAAI,QAAQ,KAAK,QAAQ,aAAa,mBAAmB,KAAK;AAC9D,YAAIC,UAAS,KAAK,YAAY;AAC9B,YAAIC,QAAO,KAAK,aAAa,QAAQ;AACrC,YAAI,aAAa,YAAY,cAAc,IAAI;AAE/C,YAAI,YAAY;AACd,cAAI,OAAO,WAAW,IAAI,MAAM,IAAI;AACpC,cAAI,MAAM,WAAW,IAAI,KAAK,IAAI;AAClC,cAAI,WAAW,WAAW,IAAI,UAAU,IAAI;AAE5C,cAAI,YAAY,MAAM;AACpB,mBAAO,SAAS;AAChB,kBAAM,SAAS;AAAA,UACjB;AAEA,kBAAQ,SAASD,UAASP,cAAa,MAAM,OAAO,CAAC;AACrD,iBAAO,SAASQ,QAAOR,cAAa,KAAK,OAAO,CAAC;AAAA,QACnD;AAEA,aAAK,UAAU;AAAA,UACb,OAAOM;AAAA,UACP,YAAYD;AAAA,UACZ;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA,IAAIE;AAAA,UACJ,GAAGC;AAAA,QACL,CAAC;AAAA,MACH;AAGA,UAAI,KAAK,YAAY,KAAK,SAAS,QAAQ;AAEzC,YAAI,iBAAiB;AACrB,QAAO,KAAK,KAAK,UAAU,SAAUC,OAAM;AACzC,4BAAkBL,YAAWK,OAAMJ,cAAa,cAAc;AAAA,QAChE,CAAC;AAAA,MACH;AAEA,aAAO,WAAWA;AAAA,IACpB;AAGA,QAAI,kBAAkB;AACpB,UAAI,SAAS;AACb,UAAI,OAAO,KAAK;AAChB,UAAI,QAAQ,KAAK,KAAK;AACtB,kBAAY,UAAU;AAAA,QACpB;AAAA,QACA;AAAA,QACA,UAAU,aAAa;AAAA,QACvB;AAAA,QACA;AAAA,QACA;AAAA,QACA,IAAI;AAAA,QACJ,GAAG;AAAA,MACL,CAAC;AAAA,IACH;AAEA,IAAAD,YAAW,UAAU,UAAU;AAAA,EACjC,CAAC;AACH;AAKA,SAASF,cAAa,MAAM,WAAW;AACrC,MAAI,WAAW,KAAK,YAAY,CAAC;AACjC,OAAK,WAAWD,MAAK,UAAU,SAAS;AAExC,MAAI,SAAS,QAAQ;AACnB,IAAO,KAAK,KAAK,UAAU,SAAU,OAAO;AAC1C,MAAAC,cAAa,OAAO,SAAS;AAAA,IAC/B,CAAC;AAAA,EACH;AACF;AAUA,SAASD,MAAK,UAAU,WAAW;AACjC,MAAW,WAAW,SAAS,GAAG;AAChC,QAAI,cAAqB,IAAI,UAAU,SAAU,OAAO,KAAK;AAC3D,UAAI,QAAQ,MAAM,SAAS;AAC3B,aAAO;AAAA,QACL,QAAQ;AAAA,UACN,OAAO,MAAM;AAAA,UACb,QAAQ,MAAM;AAAA,UACd,WAAW,MAAM;AAAA,UACjB,UAAU,WAAY;AACpB,mBAAO;AAAA,UACT;AAAA,QACF;AAAA,QACA,OAAO;AAAA,MACT;AAAA,IACF,CAAC;AACD,gBAAY,KAAK,SAAU,GAAG,GAAG;AAC/B,aAAO,UAAU,EAAE,QAAQ,EAAE,MAAM;AAAA,IACrC,CAAC;AACD,WAAc,IAAI,aAAa,SAAU,QAAQ;AAC/C,aAAO,SAAS,OAAO;AAAA,IACzB,CAAC;AAAA,EACH,OAAO;AACL,QAAI,UAAU,cAAc;AAC5B,WAAO,SAAS,KAAK,SAAU,GAAG,GAAG;AACnC,UAAI,QAAQ,EAAE,SAAS,IAAI,EAAE,SAAS,MAAM,UAAU,IAAI;AAC1D,aAAO,SAAS,KAAK,EAAE,YAAY,EAAE,cAAc,UAAU,KAAK,KAAK;AAAA,IACzE,CAAC;AAAA,EACH;AACF;;;AC7Le,SAAR,eAAgC,SAAS;AAC9C,MAAI,eAAe,CAAC;AAEpB,WAAS,UAAU,MAAM,aAAa,YAAY;AAEhD,QAAI,UAAU;AAEd,WAAO,WAAW,QAAQ,QAAQ,GAAG;AACnC,gBAAU,QAAQ;AAAA,IACpB;AAEA,QAAI,QAAQ,YAAY,oBAAoB,QAAQ,QAAQ,QAAQ,YAAY,IAAI,YAAY;AAEhG,QAAI,KAAK,QAAQ,KAAK,SAAS,KAAK,GAAG;AAErC,cAAQ,KAAK,QAAQ,KAAK,QAAQ,MAAM,aAAa,KAAK,GAAG;AAAA,IAC/D;AAEA,WAAO;AAAA,EACT;AAEA,UAAQ,iBAAiB,YAAY,SAAU,aAAa;AAC1D,QAAI,OAAO,YAAY,QAAQ;AAC/B,QAAI,OAAO,KAAK;AAChB,SAAK,SAAS,SAAU,MAAM;AAC5B,UAAI,QAAQ,KAAK,SAAS;AAC1B,UAAI,QAAQ,MAAM,SAAS,WAAW,EAAE,aAAa;AAErD,UAAI,CAAC,MAAM,MAAM;AACf,cAAM,OAAO,UAAU,MAAM,aAAa,KAAK,KAAK,MAAM;AAAA,MAC5D;AAEA,UAAI,cAAc,KAAK,uBAAuB,KAAK,WAAW,OAAO;AACrE,aAAO,aAAa,KAAK;AAAA,IAC3B,CAAC;AAAA,EACH,CAAC;AACH;;;AC/BO,SAASS,UAAQ,WAAW;AACjC,YAAU,kBAAkB,oBAAY;AACxC,YAAU,oBAAoB,sBAAmB;AACjD,YAAU,eAAe,MAAM,gBAAgB,UAAU,CAAC;AAC1D,YAAU,kBAAkB,MAAM,YAAY,UAAU,CAAC;AACzD,YAAU,eAAe,cAAc;AACvC,wBAAsB,SAAS;AACjC;;;ACRO,IAAI,oBAAoB;AAAA,EAC7B,OAAO;AAAA,EACP,aAAa;AACf;AACO,IAAI,yBAAyB;AAAA,EAClC,QAAQ;AAAA,EACR,YAAY;AAAA,EACZ,kBAAkB;AAAA,EAClB,YAAY;AAAA,EACZ,YAAY;AAAA,EACZ,OAAO;AAAA,EACP,OAAO;AACT;AAEO,IAAI,mBAAmB,UAAU;AAExC,IAAI,oBAEJ,SAAU,QAAQ;AAChB,YAAUC,oBAAmB,MAAM;AAEnC,WAASA,qBAAoB;AAC3B,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,mBAAkB;AAC/B,WAAO;AAAA,EACT;AAEA,EAAAA,mBAAkB,UAAU,gBAAgB,WAAY;AACtD,SAAK,gBAAgB,KAAK,IAAI,UAAU,IAAI;AAC5C,SAAK,WAAW,KAAK,IAAI,KAAK,IAAI;AAAA,EACpC;AAEA,EAAAA,mBAAkB,UAAU,iBAAiB,SAAU,QAAQ,SAAS;AACtE,WAAO,yBAAiB,MAAM,IAAI;AAAA,EACpC;AAEA,EAAAA,mBAAkB,UAAU,gBAAgB,SAAU,WAAW,UAAU,IAAI;AAC7E,QAAI,SAAS,OAAO,UAAU,cAAc,KAAK,MAAM,WAAW,QAAQ;AAE1E,WAAO,OAAO,OAAO,iBAAiB,EAAE,EAAE;AAC1C,WAAO;AAAA,EACT;AAEA,EAAAA,mBAAkB,OAAO;AACzB,EAAAA,mBAAkB,eAAe,CAAC,QAAQ,SAAS,OAAO,cAAc,UAAU;AAClF,EAAAA,mBAAkB,gBAAgB;AAAA,IAChC,kBAAkB;AAAA,IAElB,GAAG;AAAA,IACH,iBAAiB;AAAA,IAIjB,MAAM;AAAA,EAQR;AACA,SAAOA;AACT,EAAE,cAAW;AAEb,IAAO,uBAAQ;;;ACtEf,SAAS,gBAAgB,UAAU,UAAU;AAE3C,aAAW,YAAY,CAAC,GAAG,CAAC;AAC5B,SAAc,IAAI,CAAC,KAAK,GAAG,GAAG,SAAU,KAAK,QAAQ;AACnD,QAAI,OAAO,KAAK,QAAQ,GAAG;AAC3B,QAAI,MAAM,SAAS;AACnB,QAAI,WAAW,SAAS,UAAU;AAClC,WAAO,KAAK,SAAS,aAAa,KAAK,aAAa,IAAI,KAAK,IAAI,KAAK,YAAY,MAAM,QAAQ,IAAI,KAAK,YAAY,MAAM,QAAQ,CAAC;AAAA,EACtI,GAAG,IAAI;AACT;AAEe,SAAR,uBAAwC,UAAU;AACvD,MAAI,OAAO,SAAS,OAAO,QAAQ;AACnC,SAAO;AAAA,IACL,UAAU;AAAA,MAER,MAAM;AAAA,MACN,GAAG,KAAK;AAAA,MACR,GAAG,KAAK;AAAA,MACR,OAAO,KAAK;AAAA,MACZ,QAAQ,KAAK;AAAA,IACf;AAAA,IACA,KAAK;AAAA,MACH,OAAO,SAAU,MAAM;AAErB,eAAO,SAAS,YAAY,IAAI;AAAA,MAClC;AAAA,MACA,MAAa,KAAK,iBAAiB,QAAQ;AAAA,IAC7C;AAAA,EACF;AACF;;;AC9BA,SAASC,iBAAgB,UAAU,UAAU;AAC3C,aAAW,YAAY,CAAC,GAAG,CAAC;AAC5B,SAAc,IAAI,CAAC,GAAG,CAAC,GAAG,SAAU,QAAQ;AAC1C,QAAI,MAAM,SAAS;AACnB,QAAI,WAAW,SAAS,UAAU;AAClC,QAAI,KAAK,CAAC;AACV,QAAI,KAAK,CAAC;AACV,OAAG,UAAU,MAAM;AACnB,OAAG,UAAU,MAAM;AACnB,OAAG,IAAI,UAAU,GAAG,IAAI,UAAU,SAAS,IAAI;AAC/C,WAAO,KAAK,IAAI,KAAK,YAAY,EAAE,EAAE,UAAU,KAAK,YAAY,EAAE,EAAE,OAAO;AAAA,EAC7E,GAAG,IAAI;AACT;AAEe,SAAR,iBAAkC,UAAU;AACjD,MAAI,OAAO,SAAS,gBAAgB;AACpC,SAAO;AAAA,IACL,UAAU;AAAA,MACR,MAAM;AAAA,MACN,GAAG,KAAK;AAAA,MACR,GAAG,KAAK;AAAA,MACR,OAAO,KAAK;AAAA,MACZ,QAAQ,KAAK;AAAA,MACb,MAAM,SAAS,QAAQ;AAAA,IACzB;AAAA,IACA,KAAK;AAAA,MACH,OAAO,SAAU,MAAM;AAIrB,eAAO,SAAS,YAAY,IAAI;AAAA,MAClC;AAAA,MACA,MAAa,KAAKA,kBAAiB,QAAQ;AAAA,IAC7C;AAAA,EACF;AACF;;;ACnCA,SAASC,iBAAgB,UAAU,UAAU;AAE3C,MAAI,OAAO,KAAK,QAAQ;AACxB,MAAI,MAAM,oBAAoB,QAAQ,SAAS,KAAK;AACpD,MAAI,YAAY,oBAAoB,QAAQ,SAAS,KAAK,YAAY;AACtE,SAAO,KAAK,SAAS,aAAa,KAAK,aAAa,IAAI,KAAK,IAAI,KAAK,YAAY,MAAM,QAAQ,IAAI,KAAK,YAAY,MAAM,QAAQ,CAAC;AACtI;AAEe,SAAR,oBAAqC,UAAU;AACpD,MAAI,OAAO,SAAS,QAAQ;AAC5B,SAAO;AAAA,IACL,UAAU;AAAA,MACR,MAAM;AAAA,MACN,GAAG,KAAK;AAAA,MACR,GAAG,KAAK;AAAA,MACR,OAAO,KAAK;AAAA,MACZ,QAAQ,KAAK;AAAA,IACf;AAAA,IACA,KAAK;AAAA,MACH,OAAO,SAAU,KAAK;AAEpB,eAAO,SAAS,YAAY,GAAG;AAAA,MACjC;AAAA,MACA,MAAM,KAAKA,kBAAiB,QAAQ;AAAA,IACtC;AAAA,EACF;AACF;;;AC1BA,SAASC,iBAAgB,UAAU,UAAU;AAE3C,aAAW,YAAY,CAAC,GAAG,CAAC;AAC5B,SAAc,IAAI,CAAC,UAAU,OAAO,GAAG,SAAU,KAAK,QAAQ;AAC5D,QAAI,aAAa,QAAQ,MAAM;AAE/B,QAAI,OAAO,KAAK,YAAY;AAC5B,QAAI,MAAM,SAAS;AACnB,QAAI,WAAW,SAAS,UAAU;AAClC,QAAI,SAAS,KAAK,SAAS,aAAa,KAAK,aAAa,IAAI,KAAK,IAAI,KAAK,YAAY,MAAM,QAAQ,IAAI,KAAK,YAAY,MAAM,QAAQ,CAAC;AAE1I,QAAI,QAAQ,SAAS;AACnB,eAAS,SAAS,KAAK,KAAK;AAAA,IAC9B;AAEA,WAAO;AAAA,EACT,GAAG,IAAI;AACT;AAEe,SAAR,mBAAoC,UAAU;AACnD,MAAI,aAAa,SAAS,cAAc;AACxC,MAAI,YAAY,SAAS,aAAa;AACtC,MAAI,SAAS,WAAW,UAAU;AAClC,SAAO,KAAK,OAAO,MAAM,OAAO,QAAQ;AACxC,SAAO;AAAA,IACL,UAAU;AAAA,MACR,MAAM;AAAA,MACN,IAAI,SAAS;AAAA,MACb,IAAI,SAAS;AAAA,MACb,GAAG,OAAO;AAAA,MACV,IAAI,OAAO;AAAA,IACb;AAAA,IACA,KAAK;AAAA,MACH,OAAO,SAAU,MAAM;AACrB,YAAIC,UAAS,WAAW,aAAa,KAAK,EAAE;AAC5C,YAAI,QAAQ,UAAU,YAAY,KAAK,EAAE;AACzC,YAAI,QAAQ,SAAS,aAAa,CAACA,SAAQ,KAAK,CAAC;AACjD,cAAM,KAAKA,SAAQ,QAAQ,KAAK,KAAK,GAAG;AACxC,eAAO;AAAA,MACT;AAAA,MACA,MAAa,KAAKD,kBAAiB,QAAQ;AAAA,IAC7C;AAAA,EACF;AACF;;;AC7Ce,SAAR,sBAAuC,UAAU;AACtD,MAAI,OAAO,SAAS,QAAQ;AAC5B,MAAI,YAAY,SAAS,aAAa;AACtC,SAAO;AAAA,IACL,UAAU;AAAA,MACR,MAAM;AAAA,MACN,GAAG,KAAK;AAAA,MACR,GAAG,KAAK;AAAA,MACR,OAAO,KAAK;AAAA,MACZ,QAAQ,KAAK;AAAA,MACb,WAAW,SAAS,aAAa;AAAA,MACjC,YAAY,SAAS,cAAc;AAAA,MACnC,WAAW;AAAA,QACT,OAAO,UAAU;AAAA,QACjB,KAAK,UAAU;AAAA,QACf,OAAO,UAAU;AAAA,QACjB,UAAU,UAAU;AAAA,MACtB;AAAA,IACF;AAAA,IACA,KAAK;AAAA,MACH,OAAO,SAAU,MAAM,OAAO;AAC5B,eAAO,SAAS,YAAY,MAAM,KAAK;AAAA,MACzC;AAAA,IACF;AAAA,EACF;AACF;;;ACHA,IAAI,WAAW;AACf,IAAI,SAAS;AACb,IAAI,OAAO;AACX,IAAI,SAAS;AACb,IAAI,SAAS,CAAC,QAAQ,UAAU,MAAM,MAAM;AAC5C,IAAI,kBAAkB;AAAA,EACpB,QAAQ,CAAC,WAAW;AAAA,EACpB,UAAU,CAAC,UAAU,WAAW;AAAA,EAChC,MAAM,CAAC,MAAM,WAAW;AAAA,EACxB,QAAQ,CAAC,QAAQ,WAAW;AAC9B;AACA,IAAI,aAAa;AAAA,EACf,QAAQ,CAAC,OAAO;AAAA,EAChB,UAAU,CAAC,UAAU,OAAO;AAAA,EAC5B,MAAM,CAAC,MAAM,OAAO;AAAA,EACpB,QAAQ,CAAC,QAAQ,OAAO;AAC1B;AACA,IAAI,qBAAqB,CAAC,KAAK,GAAG;AAGlC,IAAI,oBAAoB;AACxB,IAAI,oBAAoB;AAAA,EACtB,QAAQ,CAAC;AAAA,EACT,UAAU,CAAC;AAAA,EACX,MAAM,CAAC;AAAA,EACP,QAAQ,CAAC;AACX;AAaA,IAAI,iBAAiB;AAAA,EACnB,aAAa;AAAA,EACb,KAAK;AAAA,EACL,QAAQ;AAAA,EACR,OAAO;AAAA,EACP,UAAU;AACZ;AAEA,SAAS,OAAO,IAAI;AAClB,SAAO,cAA0B;AACnC;AAEA,SAAS,cAAc,IAAI;AACzB,SAAO,cAAc;AACvB;AAEA,SAAS,YAAY,UAAU,UAAU;AACvC,WAAS,cAAc,QAAQ;AAE/B,MAAI,cAAc,QAAQ,KAAK,cAAc,QAAQ,GAAG;AACtD,aAAS,SAAS,SAAS,KAAK;AAChC,aAAS,IAAI,SAAS;AACtB,aAAS,KAAK,SAAS;AACvB,aAAS,SAAS,SAAS;AAC3B,aAAS,YAAY,SAAS;AAC9B,aAAS,SAAS,SAAS;AAE3B,QAAI,OAAO,QAAQ,KAAK,OAAO,QAAQ,GAAG;AACxC,eAAS,SAAS,SAAS,KAAK;AAAA,IAClC;AAAA,EACF;AACF;AAEA,IAAI,kBAEJ,SAAU,QAAQ;AAChB,YAAUE,kBAAiB,MAAM;AAEjC,WAASA,mBAAkB;AACzB,QAAI,QAAQ,WAAW,QAAQ,OAAO,MAAM,MAAM,SAAS,KAAK;AAEhE,UAAM,OAAOA,iBAAgB;AAC7B,WAAO;AAAA,EACT;AAEA,EAAAA,iBAAgB,UAAU,SAAS,SAAU,cAAc,SAAS,KAAK,SAAS;AAEhF,SAAK,kBAAkB;AACvB,QAAI,UAAU,KAAK;AACnB,QAAI,OAAO,aAAa,QAAQ;AAChC,QAAI,QAAQ,KAAK;AACjB,QAAI,aAAa,eAAe,cAAc,MAAM,SAAS,GAAG;AAEhE,QAAI,CAAC,SAAS;AAGZ,YAAM,UAAU;AAAA,IAClB;AAEA,SAAK,KAAK,OAAO,EAAE,IAAI,SAAU,QAAQ;AACvC,yBAAmB,KAAK,MAAM,QAAQ,WAAW,QAAQ,OAAO,GAAG,cAAc,OAAO,IAAI;AAAA,IAC9F,CAAC,EAAE,OAAO,SAAU,QAAQ;AAC1B,UAAI,KAAK,QAAQ,iBAAiB,MAAM;AACxC,YAAM,qBAAqB,IAAI,iBAAiB,EAAE,EAAE,QAAQ,YAAY;AAAA,IAC1E,CAAC,EAAE,OAAO,SAAU,QAAQ,QAAQ;AAClC,UAAI,QAAQ,QAAQ,iBAAiB,MAAM;AAC3C,yBAAmB,KAAK,OAAO,QAAQ,WAAW,QAAQ,OAAO,GAAG,cAAc,OAAO,IAAI;AAAA,IAC/F,CAAC,EAAE,QAAQ;AAEX,QAAI,WAAW,aAAa,IAAI,QAAQ,IAAI,IAAI,eAAe,aAAa,kBAAkB,OAAO,YAAY,IAAI;AAErH,QAAI,UAAU;AACZ,YAAM,YAAY,QAAQ;AAAA,IAC5B,OAAO;AACL,YAAM,eAAe;AAAA,IACvB;AAEA,SAAK,QAAQ;AAAA,EACf;AAEA,EAAAA,iBAAgB,UAAU,2BAA2B,SAAU,cAAc,SAAS,KAAK;AACzF,SAAK,MAAM,UAAU;AACrB,SAAK,QAAQ;AAAA,EACf;AAEA,EAAAA,iBAAgB,UAAU,oBAAoB,SAAU,QAAQ,cAAc,SAAS,KAAK,SAAS;AACnG,QAAI,OAAO,aAAa,QAAQ;AAChC,QAAI,aAAa,eAAe,cAAc,MAAM,SAAS,GAAG;AAChE,QAAI,iBAAiB,KAAK,kBAAkB,CAAC;AAE7C,aAAS,4BAA4BC,KAAI;AACvC,UAAI,CAACA,IAAG,SAAS;AACf,QAAAA,IAAG,cAAc;AACjB,QAAAA,IAAG,YAAY,UAAU,EAAE,aAAa;AAAA,MAC1C;AAAA,IACF;AAEA,aAAS,MAAM,OAAO,OAAO,MAAM,OAAO,KAAK,OAAO;AACpD,UAAI,KAAK,mBAAmB,MAAM,MAAM,KAAK,WAAW,KAAK,OAAO,GAAG,cAAc,KAAK,OAAO,IAAI;AAErG,UAAI,IAAI;AACN,WAAG,SAAS,2BAA2B;AACvC,uBAAe,KAAK,EAAE;AAAA,MACxB;AAAA,IACF;AAAA,EACF;AAEA,EAAAD,iBAAgB,UAAU,eAAe,SAAU,IAAI;AACrD,IAAY,iBAAiB,KAAK,mBAAmB,KAAK,OAAO,EAAE;AAAA,EACrE;AAEA,EAAAA,iBAAgB,UAAU,wBAAwB,SAAU,WAAW,OAAO,UAAU,aAAa;AACnG,QAAI,cAAc,MAAM;AAExB,QAAI,eAAe,QAAQ,SAAS,SAAS,aAAa;AACxD,aAAO;AAAA,IACT;AAIA,YAAQ,WAAW,SAAS,gBAAgB,SAAS,WAAW,aAAa,KAAK,OAAO;AACvF,UAAI,SAAS,SAAS,aAAa;AACjC,eAAO;AAAA,MACT;AAAA,IACF;AAEA,WAAO;AAAA,EACT;AAEA,EAAAA,iBAAgB,OAAO;AACvB,SAAOA;AACT,EAAE,aAAS;AAEX,IAAO,qBAAQ;AAEf,SAAS,SAAS,UAAU;AAC1B,MAAI,cAAc,SAAS;AAC3B,MAAI;AAGJ,MAAI,gBAAgB,QAAQ;AAC1B,QAAI,QAAQ,SAAS;AAErB,QAAI,WAAW,MAAM,SAAS,QAAQ,MAAM,UAAU,OAAO;AAAA,MAC3D,GAAG,MAAM,KAAK;AAAA,MACd,GAAG,MAAM,KAAK;AAAA,MACd,OAAO,MAAM;AAAA,MACb,QAAQ,MAAM;AAAA,IAChB,IAAI;AACJ,QAAI,WAAW,YAAY,KAAK;AAEhC,SAAiB,SAAS,UAAU,MAAM,UAAU,MAAM,UAAU,QAAQ;AAC5E,qBAAiB,EAAE,EAAE,iBAAiB;AAAA,EACxC,WAAW,gBAAgB,SAAS;AAClC,SAAK,IAAgB,cAAM,CAAC,CAAC;AAC7B,qBAAiB,EAAE,EAAE,kBAAkB,SAAS,MAAM;AAAA,EACxD,WAAW,gBAAgB,QAAQ;AACjC,SAAK,IAAgB,aAAK,CAAC,CAAC;AAAA,EAC9B,WAAW,gBAAgB,SAAS;AAClC,SAAK,IAAgB,cAAM;AAAA,EAC7B,WAAW,gBAAgB,gBAAgB;AACzC,UAAM,IAAI,MAAM,sCAAsC;AAAA,EACxD,OAAO;AACL,QAAI,MAAkB,cAAc,WAAW;AAE/C,QAAI,CAAC,KAAK;AACR,UAAI,SAAS;AAEb,UAAI,MAAuC;AACzC,iBAAS,mBAAmB,cAAc;AAAA,MAC5C;AAEA,iBAAW,MAAM;AAAA,IACnB;AAEA,SAAK,IAAI,IAAI;AAAA,EACf;AAEA,mBAAiB,EAAE,EAAE,oBAAoB;AACzC,KAAG,OAAO,SAAS;AAInB,KAAG,iBAAiB;AACpB,KAAG,eAAe;AAClB,SAAO;AACT;AAEA,SAAS,eACT,KAAK,IAAI,WAAW,UAAU,gBAAgB,aAAa,QAAQ;AAEjE,0CAAwC,EAAE;AAC1C,MAAI,WAAW,kBAAkB,eAAe,OAAO;AAEvD,MAAI,UAAU;AAGZ,OAAG,cAAc,QAAQ;AAAA,EAC3B;AAGA,MAAI,YAAY,SAAS,cAAc,MAAM;AAC3C,aAAS,aAAa;AAAA,EACxB;AAGA,MAAI,WAAW,YAAY,SAAS;AAEpC,MAAI,UAAU;AACZ,QAAI,GAAG,SAAS,QAAQ;AACtB,UAAI,kBAAkB;AAEtB,aAAO,iBAAiB,UAAU,MAAM,gBAAgB,OAAO,gBAAgB;AAC/E,aAAO,iBAAiB,YAAY,MAAM,gBAAgB,SAAS,gBAAgB;AAAA,IACrF;AAEA,QAAI,eAAe;AACnB,QAAI,WAAW,OAAO,EAAE,IAAI,SAAS,QAAQ;AAE7C,QAAI,OAAO,UAAU;AACnB,eAAS,QAAQ;AACjB,qBAAe,+BAA+B,UAAU,GAAG;AAAA,IAC7D;AAGA,aAAS,iBAAiB;AAAA,EAC5B;AAEA,MAAI,cAAc,EAAE,GAAG;AACrB,QAAI,UAAU;AACZ,UAAI,eAAe,SAAS;AAE5B,UAAI,cAAc;AAChB,iBAAS,QAAQ;AAAA,MACnB;AAAA,IACF;AAAA,EACF;AAEA,wBAAsB,IAAI,UAAU,aAAa;AAAA,IAC/C;AAAA,IACA;AAAA,IACA,YAAY;AAAA,EACd,CAAC;AACD,yBAAuB,IAAI,SAAS,mBAAmB,WAAW;AACpE;AAEA,SAAS,gBAAgB,OAAO,IAAI,YAAY,UAAU,gBAAgB;AACxE,MAAI,gBAAgB,GAAG,UAAU,OAAO;AACxC,MAAI,WAAW,kBAAkB,eAAe,OAAO;AAEvD,MAAI,eAAe;AAEjB,QAAI,WAAW,cAAc,YAAY,KAAK;AAE9C,QAAI,aAAa,OAAO;AACtB,UAAI,wBAAwB,cAAc,SAAS,KAAK;AAExD,UAAI,uBAAuB;AACzB,8BAAsB,QAAQ;AAAA,MAChC;AAAA,IACF,OAAO;AAEL,eAAS,QAAQ,YAAY;AAAA,IAC/B;AAMA,QAAI,UAAU;AACZ,eAAS,aAAa;AAAA,IACxB;AAEA,yBAAqB,aAAa;AAAA,EACpC;AACF;AAEA,SAAS,QAAQ,IAAI,UAAU,aAAa;AAE1C,MAAI,GAAG,SAAS;AACd;AAAA,EACF;AAEA,MAAI,gBAAgB;AACpB,MAAI,WAAW,YAAY;AAC3B,MAAI,gBAAgB,YAAY;AAEhC,gBAAc,IAAI;AAClB,gBAAc,SAAS;AAEvB,MAAI,QAAQ,SAAS;AACrB,WAAS,SAAS,cAAc,KAAK,SAAS;AAE9C,WAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACtC,wBAAoB,eAAe,UAAU,OAAO,EAAE;AAAA,EACxD;AACF;AAEA,SAAS,oBAAoB,eAAe,UAAU,OAAO;AAC3D,MAAI,WAAW,UAAU;AACzB,MAAI,aAAa,WAAW,WAAW,oBAAoB,UAAU,KAAK;AAC1E,MAAI,QAAQ,aAAa,WAAW,KAAK;AACzC,MAAI;AAEJ,MAAI,SAAS,MAAM;AAEjB,eAAW,WAAW,gBAAgB,cAAc,YAAY,KAAK;AACrE,aAAS,KAAK,SAAS;AAAA,EACzB;AACF;AAEA,SAAS,eAAe,cAAc,MAAM,SAAS,KAAK;AACxD,MAAI,aAAa,aAAa,IAAI,YAAY;AAC9C,MAAI,WAAW,aAAa;AAC5B,MAAI,gBAAgB,CAAC;AAErB,MAAI,UAAU;AACZ,QAAI,MAAuC;AACzC,aAAO,YAAY,4BAA4B;AAC/C,aAAO,SAAS,kBAAkB,eAAe,SAAS,OAAO,+CAA+C;AAAA,IAClH;AAGA,oBAAgB,SAAS,iBAAiB,SAAS,eAAe,QAAQ,IAAI,eAAe,SAAS,MAAM,QAAQ;AAAA,EACtH;AAEA,MAAI,UAAU,SAAS;AAAA,IACrB,UAAU,IAAI;AAAA,IACd,WAAW,IAAI;AAAA,IACf,OAAO,IAAI;AAAA,IACX,qBAAqB,IAAI;AAAA,IACzB;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,GAAG,cAAc,OAAO,CAAC,CAAC;AAC1B,MAAI,aAAa;AAAA,IAIf,SAAS,CAAC;AAAA,IACV,UAAU,aAAa;AAAA,IACvB,YAAY,aAAa;AAAA,IACzB,aAAa,aAAa;AAAA,IAC1B,UAAU,cAAc;AAAA,IACxB,kBAAkB,KAAK,MAAM;AAAA,IAC7B,QAAQ,cAAc,aAAa,QAAQ,CAAC;AAAA,EAC9C;AAKA,MAAI;AACJ,MAAI;AACJ,MAAI,sBAAsB,CAAC;AAC3B,MAAI,kBAAkB,CAAC;AACvB,MAAI,wBAAwB,CAAC;AAC7B,MAAI,oBAAoB,CAAC;AAEzB,WAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACtC,QAAI,YAAY,OAAO;AACvB,0BAAsB,aAAa,aAAa,SAAS,gBAAgB,UAAU;AACnF,sBAAkB,aAAa,aAAa,SAAS,WAAW,UAAU;AAAA,EAC5E;AAEA,WAASE,cAAa,iBAAiB;AACrC,WAAO,oBAAoB,sBAAsB,kBAAkB,gBAAgB,KAAK,aAAa,eAAe,KAAK,KAAK,aAAa,eAAe;AAAA,EAC5J;AAEA,WAAS,kBAAkB,iBAAiB,OAAO;AACjD,WAAO,CAAC,KAAK,gBAAgB,sBAAsB,SAAS,oBAAoB,sBAAsB,oBAAoB,WAAW,oBAAoB,SAASA,cAAa,eAAe,EAAE,SAAS,gBAAgB,MAAM,KAAKA,cAAa,eAAe,EAAE,SAAS,gBAAgB,MAAM;AAAA,EACnS;AAEA,WAAS,cAAc,iBAAiB,OAAO;AAC7C,WAAO,CAAC,KAAK,gBAAgB,kBAAkB,SAAS,oBAAoB,sBAAsB,gBAAgB,WAAW,gBAAgB,SAASA,cAAa,eAAe,EAAE,SAAS,WAAW,MAAM,KAAKA,cAAa,eAAe,EAAE,SAAS,WAAW,MAAM;AAAA,EAC7Q;AAEA,SAAO,SAAU,iBAAiB,SAAS;AACzC,0BAAsB;AACtB,oBAAgB;AAChB,0BAAsB,CAAC;AACvB,sBAAkB,CAAC;AACnB,WAAO,cAAc,WAAW,SAAS;AAAA,MACvC;AAAA,MACA,WAAW,KAAK,YAAY,eAAe;AAAA,MAE3C,YAAY,UAAU,QAAQ,OAAO;AAAA,IACvC,GAAG,UAAU,GAAG,OAAO;AAAA,EACzB;AAOA,WAAS,MAAM,KAAK,iBAAiB;AACnC,uBAAmB,SAAS,kBAAkB;AAC9C,WAAO,KAAK,SAAS,EAAE,IAAI,KAAK,kBAAkB,OAAO,CAAC,GAAG,eAAe;AAAA,EAC9E;AAQA,WAAS,gBAAgB,KAAK,iBAAiB;AAC7C,uBAAmB,SAAS,kBAAkB;AAC9C,UAAM,OAAO;AACb,QAAI,UAAU,KAAK,iBAAiB,GAAG;AAEvC,QAAI,CAAC,SAAS;AACZ,UAAI,WAAW,KAAK,kBAAkB,GAAG;AACzC,aAAO,YAAY,IAAI,KAAK,SAAS,EAAE,IAAI,UAAU,eAAe,IAAI;AAAA,IAC1E;AAEA,QAAI,MAAM,KAAK,IAAI,QAAQ,MAAM,eAAe;AAChD,QAAI,cAAc,WAAW,QAAQ;AACrC,WAAO,cAAc,YAAY,WAAW,OAAO;AAAA,EACrD;AAsBA,WAAS,MAAM,WAAW,iBAAiB;AACzC,QAAI,MAAuC;AACzC,qBAAe,aAAa,8CAA8C;AAAA,IAC5E;AAEA,uBAAmB,SAAS,kBAAkB;AAC9C,QAAIC,SAAQ,KAAK,cAAc,iBAAiB,OAAO;AACvD,QAAI,cAAcA,UAASA,OAAM;AACjC,QAAI,UAAUA,UAASA,OAAM;AAC7B,QAAI,YAAY,kBAAkB,iBAAiB,MAAM,EAAE,aAAa;AACxE,mBAAe,SAAS,UAAU,OAAO;AACzC,eAAW,SAAS,UAAU,UAAU;AACxC,QAAI,MAAM;AAAA,MACR,cAAc,SAAS,WAAW,IAAI,cAAc;AAAA,IACtD;AACA,QAAI,aAAa,cAAc,iBAAiB,MAAM;AAItD,QAAI,YAA6B,gBAAgB,YAAY,MAAM,KAAK,OAAO,IAAI;AACnF,cAAU,OAAO,WAAW,WAAW,MAAM,IAAI,UAAU,aAAa,kBAAkB,iBAAiB,MAAM,GAAG,gBAAgB,MAAM,eAAe,CAAC,IAAI;AAC9J,QAAI,aAA8B,iBAAiB,YAAY,KAAK,KAAK;AACzE,sBAAkB,WAAW,SAAS;AACtC,gBAAY,iCAAiC,WAAW,WAAW,UAAU;AAC7E,iBAAa,oBAAoB,WAAW,SAAS;AACrD,cAAU,SAAS;AACnB,WAAO;AAAA,EACT;AAQA,WAAS,cAAc,WAAW,iBAAiB;AACjD,QAAI,MAAuC;AACzC,qBAAe,qBAAqB,8CAA8C;AAAA,IACpF;AAEA,uBAAmB,SAAS,kBAAkB;AAC9C,QAAI,YAAY,kBAAkB,iBAAiB,QAAQ,EAAE,aAAa;AAC1E,QAAI,aAAa,cAAc,iBAAiB,QAAQ;AACxD,QAAI,YAA6B,gBAAgB,YAAY,MAAM,MAAM,MAAM,IAAI;AACnF,cAAU,OAAO,WAAW,WAAW,MAAM,IAAI,UAAU,aAAa,kBAAkB,iBAAiB,QAAQ,GAAG,aAAa,kBAAkB,iBAAiB,MAAM,GAAG,gBAAgB,MAAM,eAAe,CAAC,IAAI;AACzN,QAAI,aAA8B,iBAAiB,YAAY,MAAM,IAAI;AACzE,sBAAkB,WAAW,SAAS;AACtC,gBAAY,iCAAiC,WAAW,WAAW,UAAU;AAC7E,iBAAa,oBAAoB,WAAW,SAAS;AACrD,cAAU,SAAS;AACnB,WAAO;AAAA,EACT;AAEA,WAAS,oBAAoB,WAAW,OAAO;AAC7C,aAAS,OAAO,OAAO;AACrB,UAAI,OAAO,OAAO,GAAG,GAAG;AACtB,kBAAU,OAAO,MAAM;AAAA,MACzB;AAAA,IACF;AAAA,EACF;AAEA,WAAS,kBAAkB,OAAO,WAAW;AAI3C,QAAI,OAAO;AACT,YAAM,aAAa,UAAU,WAAW,MAAM;AAC9C,YAAM,iBAAiB,UAAU,eAAe,MAAM;AAAA,IACxD;AAAA,EACF;AAOA,WAAS,OAAO,YAAY,iBAAiB;AAC3C,uBAAmB,SAAS,kBAAkB;AAE9C,QAAI,OAAO,mBAAmB,UAAU,GAAG;AACzC,UAAI,UAAU,KAAK,cAAc,iBAAiB,OAAO;AACzD,aAAO,UAAU,QAAQ,kBAAkB,eAAe;AAAA,IAC5D;AAIA,QAAI,OAAO,wBAAwB,UAAU,GAAG;AAC9C,aAAO,KAAK,cAAc,iBAAiB,UAAU;AAAA,IACvD;AAAA,EACF;AAOA,WAAS,UAAU,KAAK;AACtB,QAAI,SAAS,SAAS,eAAe;AACnC,UAAI,WAAW,SAAS,YAAY;AACpC,aAAO,gBAAgB,SAAS;AAAA,QAC9B,MAAM;AAAA,MACR,GAAG,GAAG,CAAC;AAAA,IACT;AAAA,EACF;AAMA,WAAS,uBAAuB;AAC9B,WAAO,QAAQ,wBAAwB;AAAA,EACzC;AAOA,WAAS,KAAK,KAAK;AACjB,WAAwB,QAAQ,KAAK,OAAO;AAAA,EAC9C;AACF;AAEA,SAAS,cAAc,MAAM;AAC3B,MAAI,YAAY,CAAC;AACjB,OAAK,KAAK,YAAY,SAAU,SAAS;AACvC,QAAI,UAAU,KAAK,iBAAiB,OAAO;AAE3C,QAAI,CAAC,QAAQ,cAAc;AACzB,UAAI,WAAW,QAAQ;AACvB,UAAI,WAAW,UAAU,YAAY,UAAU,aAAa,CAAC;AAC7D,eAAS,QAAQ,iBAAiB,KAAK,kBAAkB,OAAO;AAAA,IAClE;AAAA,EACF,CAAC;AACD,SAAO;AACT;AAEA,SAAS,mBAAmB,KAAK,UAAU,WAAW,UAAU,aAAa,OAAO,MAAM;AAQxF,MAAI,CAAC,UAAU;AACb,UAAM,OAAO,QAAQ;AACrB;AAAA,EACF;AAEA,MAAI,KAAK,mBAAmB,KAAK,UAAU,WAAW,UAAU,aAAa,KAAK;AAClF,QAAM,KAAK,iBAAiB,WAAW,EAAE;AACzC,QAAM,oBAAoB,IAAI,SAAS,OAAO,SAAS,WAAW,SAAS,gBAAgB;AAC3F,SAAO;AACT;AAEA,SAAS,mBAAmB,KAAK,UAAU,WAAW,UAAU,aAAa,OAAO;AAClF,MAAI,MAAuC;AACzC,WAAO,UAAU,mDAAmD;AAAA,EACtE;AAEA,MAAI,kBAAkB;AACtB,MAAI,QAAQ;AAEZ,MAAI,YAAY,mBAAmB,UAAU,UAAU,WAAW,GAMhE;AAEA,sBAAkB,QAAQ,MAAM,YAAY,GAAG,QAAQ;AACvD,eAAW;AAAA,EACb;AAEA,MAAI,SAAS,CAAC;AACd,MAAI,KAAK;AAET,MAAI,CAAC,IAAI;AACP,SAAK,SAAS,QAAQ;AAEtB,QAAI,OAAO;AACT,kBAAY,OAAO,EAAE;AAAA,IACvB;AAAA,EACF,OAAO;AAIL,OAAG,YAAY;AAAA,EACjB;AAGA,MAAI,SAAS,UAAU,OAAO;AAC5B,OAAG,kBAAkB;AAAA,EACvB,WAAW,GAAG,iBAAiB;AAC7B,OAAG,kBAAkB;AAAA,EACvB;AAEA,oBAAkB,OAAO,MAAM,kBAAkB,OAAO,SAAS,kBAAkB,SAAS,MAAM,kBAAkB,SAAS,SAAS,kBAAkB,KAAK,MAAM,kBAAkB,KAAK,SAAS,kBAAkB,OAAO,MAAM,kBAAkB,OAAO,SAAS;AACpQ,oBAAkB,WAAW;AAC7B,6BAA2B,IAAI,WAAW,UAAU,aAAa,QAAQ,iBAAiB;AAC1F,2BAAyB,IAAI,WAAW,UAAU,aAAa,MAAM;AACrE,iBAAe,KAAK,IAAI,WAAW,UAAU,mBAAmB,aAAa,MAAM;AAInF,SAAO,UAAU,MAAM,MAAM,iBAAiB,EAAE,EAAE,OAAO,SAAS;AAElE,WAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACtC,QAAI,YAAY,OAAO;AAEvB,QAAI,cAAc,QAAQ;AACxB,UAAI,gBAAgB,oBAAoB,UAAU,SAAS;AAC3D,UAAI,gBAAgB,2BAA2B,UAAU,eAAe,SAAS;AACjF,sBAAgB,WAAW,IAAI,eAAe,eAAe,iBAAiB;AAAA,IAChF;AAAA,EACF;AAEA,UAAQ,IAAI,UAAU,WAAW;AAEjC,MAAI,SAAS,SAAS,SAAS;AAC7B,kBAAc,KAAK,IAAI,WAAW,UAAU,WAAW;AAAA,EACzD;AAEA,MAAI,mBAAmB,GAAG;AACxB,UAAM,UAAU,IAAI,eAAe;AAAA,EACrC,OAAO;AACL,UAAM,IAAI,EAAE;AAAA,EACd;AAEA,SAAO;AACT;AAGA,SAAS,mBAAmB,IAAI,UAAU,aAAa;AACrD,MAAI,UAAU,iBAAiB,EAAE;AACjC,MAAI,eAAe,SAAS;AAC5B,MAAI,gBAAgB,SAAS;AAC7B,MAAI,gBAAgB,SAAS;AAC7B,SAEE,YAAY,6BAA6B,KACtC,gBAAgB,QAAQ,iBAAiB,QAAQ,qBAAqB,iBAAiB,UAAU,eAAe,aAAa,KAAK,YAAY,aAAa,MAAM,QAAQ,kBAAkB,iBAAiB,WAAW,OAAO,eAAe,OAAO,KAAK,cAAc,UAAU,QAAQ;AAOhS;AAEA,SAAS,yBAAyB,IAAI,WAAW,UAAU,aAAa,QAAQ;AAI9E,MAAI,cAAc,SAAS;AAE3B,MAAI,gBAAgB,OAAO;AACzB,QAAI,MAAM,GAAG,YAAY,GAAG;AAC1B,SAAG,eAAe;AAAA,IACpB;AAAA,EACF,WAAW,aAAa;AACtB,QAAI,WAAW,GAAG,YAAY;AAE9B,QAAI,YAAY,mBAAmB,UAAU,aAAa,WAAW,GAAG;AACtE,iBAAW;AAAA,IACb;AAEA,QAAI,CAAC,UAAU;AACb,iBAAW,SAAS,WAAW;AAE/B,UAAI,MAAuC;AACzC,eAAO,OAAO,QAAQ,GAAG,oEAAoE,SAAS,OAAO,GAAG;AAAA,MAClH;AAEA,SAAG,YAAY,QAAQ;AAAA,IACzB;AAEA,mBAAe,MAAM,UAAU,WAAW,aAAa,MAAM,aAAa,MAAM;AAAA,EAClF;AAEF;AAEA,SAAS,2BAA2B,IAAI,WAAW,UAAU,aAAa,QAAQ,gBAAgB;AAEhG,MAAI,GAAG,SAAS;AACd;AAAA,EACF;AAGA,gBAAc,UAAU,MAAM,cAAc;AAC5C,gBAAc,UAAU,UAAU,cAAc;AAOhD,MAAI,iBAAiB,eAAe,OAAO;AAC3C,MAAI,mBAAmB,eAAe,SAAS;AAC/C,MAAI,eAAe,eAAe,KAAK;AACvC,MAAI,iBAAiB,eAAe,OAAO;AAE3C,MAAI,kBAAkB,QAAQ,oBAAoB,QAAQ,kBAAkB,QAAQ,gBAAgB,MAAM;AACxG,QAAI,cAAc,GAAG,eAAe;AAEpC,QAAI,mBAAmB,OAAO;AAC5B,qBAAe,GAAG,kBAAkB;AAAA,IACtC,OAAO;AACL,uBAAiB,eAAe,OAAO,SAAS,kBAAkB;AAAA,QAChE,MAAM;AAAA,MACR;AAEA,UAAI,CAAC,aAAa;AAChB,sBAAc,SAAS,cAAc;AACrC,WAAG,eAAe,WAAW;AAAA,MAC/B,OAAO;AAGL,oBAAY,YAAY;AAAA,MAC1B;AAEA,qBAAe,MAAM,aAAa,WAAW,gBAAgB,MAAM,aAAa,MAAM;AACtF,UAAI,oBAAoB,kBAAkB,eAAe;AAEzD,eAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACtC,YAAI,YAAY,OAAO;AAEvB,YAAI,cAAc,QAAQ;AACxB,cAAI,qBAAqB,eAAe,WAAW;AACnD,0BAAgB,WAAW,aAAa,oBAAoB,2BAA2B,gBAAgB,oBAAoB,SAAS,GAAG,IAAI;AAAA,QAC7I;AAAA,MACF;AAEA,0BAAoB,YAAY,MAAM,IAAI,YAAY,WAAW;AAAA,IACnE;AAAA,EACF;AACF;AAEA,SAAS,cAAc,UAAU,OAAO,gBAAgB;AACtD,MAAI,WAAW,CAAC,QAAQ,WAAW,oBAAoB,UAAU,KAAK;AACtE,MAAI,WAAW,CAAC,QAAQ,SAAS,QAAQ,2BAA2B,UAAU,UAAU,QAAQ;AAChG,MAAI,SAAS,SAAS;AACtB,MAAI,QAAQ,WAAW,SAAS,aAAa;AAC7C,MAAI,iBAAiB,SAAS;AAC9B,MAAI,WAAW,CAAC,iBAAiB,OAAO,CAAC,QAAQ,iBAAiB,oBAAoB,gBAAgB,KAAK;AAE3G,MAAI,aAEJ,eAAe,YAAY,qBAAqB,UAAU,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC,QAAQ,IAAI;AACvF,mBAAe,WAAW;AAC1B,QAAI,gBAAgB,8BAA8B,UAAU,QAAQ,CAAC,KAAK;AAI1E,QAAI,CAAC,SAAS,cAAc,YAAY;AACtC,cAAQ,cAAc;AAAA,IACxB;AAEA,QAAI,CAAC,YAAY,cAAc,aAAa;AAC1C,iBAAW,cAAc;AAAA,IAC3B;AAAA,EACF;AAEA,MAAI,CAAC,SAAS,UAAU;AACtB,QAAI,mBAAmB;AAEvB,KAAC,iBAAiB,SAAS,iBAAiB,OAAO;AAEnD,QAAI,MAAuC;AAEzC,aAAO,iBAAiB,SAAS,QAAQ,iCAAiC;AAAA,IAC5E;AAAA,EACF;AAEA,MAAI,OAAO,CAAC,QAAQ,eAAe,SAAS,eAAe;AAC3D,OAAK,MAAM;AACX,OAAK,SAAS;AAChB;AAEA,SAAS,oBAAoB,UAAU,OAAO;AAC5C,SAAO,CAAC,QAAQ,WAAW,WAAW,SAAS,SAAS;AAC1D;AAEA,SAAS,2BAA2B,mBAAmB,aAAa,OAAO;AACzE,MAAI,QAAQ,eAAe,YAAY;AAEvC,MAAI,SAAS,QAAQ,UAAU,YAAY,mBAAmB;AAC5D,YAAQ,kBAAkB;AAAA,EAC5B;AAEA,SAAO;AACT;AAsBA,SAAS,cAAc,KAAK,IAAI,WAAW,UAAU,aAAa;AAChE,MAAI,cAAc,SAAS;AAC3B,MAAI,SAAS,cAAc,YAAY,SAAS;AAChD,MAAIC,iBAAgB,SAAS;AAE7B,MAAI,SAASA,mBAAkB,YAAY,SAAS;AACpD,MAAI,WAAWA,mBAAkB;AAEjC,MAAI,CAAC,UAAU,CAAC,UAAU,CAAC,UAAU;AACnC;AAAA,EACF;AAEA,MAAI,QAAQ;AACV,sBAAkB;AAAA,MAChB;AAAA,MACA,aAAa,GAAG,SAAS,KAAK,CAAC;AAAA,MAC/B,aAAa,eAAe,CAAC;AAAA,MAC7B;AAAA,MACA;AAAA,MACA,OAAO;AAAA,IACT,CAAC;AACD;AAAA,EACF;AAEA,cAAY,GAAG,UAAU;AAGzB,MAAI,QAAQ;AAEZ,SAAO,QAAQ,QAAQ,SAAS;AAC9B,QAAI,WAAW,YAAY;AAC3B,QAAI,WAAW,GAAG,QAAQ,KAAK;AAE/B,QAAI,UAAU;AACZ,UAAI,SAAS,UAAU,MAAM;AAG3B,iBAAS,SAAS;AAAA,MACpB;AAEA,yBAAmB,KAAK,UAAU,WAAW,UAAU,aAAa,EAAE;AAAA,IACxE,OAAO;AACL,UAAI,MAAuC;AACzC,eAAO,UAAU,4GAAiH;AAAA,MACpI;AAMA,eAAS,SAAS;AAAA,IACpB;AAAA,EACF;AAEA,WAAS,IAAI,GAAG,WAAW,IAAI,GAAG,KAAK,OAAO,KAAK;AACjD,QAAI,QAAQ,GAAG,QAAQ,CAAC;AACxB,yBAAqB,IAAI,OAAO,WAAW;AAAA,EAC7C;AACF;AAEA,SAAS,qBAAqB,OAAO,OAAO,aAAa;AAIvD,WAAS,qBAAqB,OAAO,iBAAiB,KAAK,EAAE,QAAQ,WAAW;AAClF;AAEA,SAAS,kBAAkB,SAAS;AAClC,MAAI,mBAAW,QAAQ,aAAa,QAAQ,aAAa,QAAQ,QAAQ,OAAO,EAAE,IAAI,gBAAgB,EAAE,OAAO,gBAAgB,EAAE,OAAO,aAAa,EAAE,QAAQ;AACjK;AAEA,SAAS,OAAO,MAAM,KAAK;AACzB,MAAI,OAAO,QAAQ,KAAK;AACxB,SAAO,QAAQ,OAAO,OAAO,oBAAoB;AACnD;AAEA,SAAS,iBAAiB,UAAU,UAAU;AAC5C,MAAI,UAAU,KAAK;AACnB,MAAI,cAAc,YAAY,OAAO,QAAQ,YAAY,YAAY;AACrE,MAAI,QAAQ,YAAY,OAAO,QAAQ,YAAY,YAAY;AAC/D,qBAAmB,QAAQ,KAAK,OAAO,QAAQ,WAAW,aAAa,QAAQ,aAAa,QAAQ,KAAK;AAC3G;AAEA,SAAS,cAAc,UAAU;AAC/B,MAAI,UAAU,KAAK;AACnB,MAAI,QAAQ,QAAQ,YAAY;AAChC,WAAS,qBAAqB,OAAO,iBAAiB,KAAK,EAAE,QAAQ,QAAQ,WAAW;AAC1F;AAMA,SAAS,YAAY,OAAO;AAE1B,SAAO,UAAU,MAAM,YAAY,MAAM;AAC3C;AAEA,SAAS,eAAe,OAAO;AAC7B,SAAO,UAAU,OAAO,OAAO,UAAU,KAAK,OAAO,OAAO,GAAG;AACjE;;;AC3/BO,SAASC,UAAQ,WAAW;AACjC,YAAU,kBAAkB,kBAAe;AAC3C,YAAU,oBAAoB,oBAAiB;AACjD;",
  "names": ["LineSeriesModel", "len", "ECPolylineShape", "ECPolyline", "len", "ECPolygonShape", "ECPolygon", "len", "len", "isPointNull", "LineView", "dataIndex", "i", "el", "data", "sum", "install", "BaseBarSeriesModel", "BarSeriesModel", "SausageShape", "SausagePath", "PI2", "opts", "mathMax", "mathMin", "BarView", "layout", "scale", "len", "isRadial", "position", "LagePathShape", "LargePath", "install", "center", "parsePercent", "sum", "RADIAN", "i", "dx", "len", "layout", "dist", "label", "labelLine", "parsePercent", "linePoints", "PI", "selectState", "PiePiece", "layout", "PieView", "LegendVisualProvider", "PieSeriesModel", "install", "ScatterSeriesModel", "LargeSymbolPathShape", "LargeSymbolPath", "LargeSymbolDraw", "len", "ScatterView", "install", "RadarView", "createSymbol", "data", "RadarSeriesModel", "len", "install", "MapView", "layout", "MapSeries", "len", "center", "sum", "len", "data", "layout", "install", "separation", "getViewRect", "TreeEdgeShape", "TreePath", "parsePercent", "TreeView", "layout", "center", "TreeNode", "len", "layout", "Tree", "len", "TreeSeriesModel", "center", "separation", "getViewRect", "layout", "separation", "install", "TreemapSeriesModel", "sum", "Breadcrumb", "AnimationWrap", "len", "inner", "TreemapView", "getKey", "willDeleteEls", "group", "bg", "content", "thisLayout", "depth", "inner", "mathMax", "mathMin", "each", "parsePercent", "each", "mathMax", "mathMin", "len", "sum", "scale", "layout", "install", "normalize", "symbolType", "symbolSize", "len", "keys", "clone", "layout", "scale", "clone", "sum", "scaleAndAdd", "center", "create", "clone", "i", "n", "edges", "getViewRect", "quadraticAt", "center", "scale", "quadraticSubdivide", "clone", "GraphView", "forceLayout", "layout", "Graph", "len", "GraphNode", "GraphEdge", "layout", "GraphSeriesModel", "center", "install", "PointerShape", "PointerPath", "center", "parsePercent", "GaugeView", "sector", "percent", "i", "endAngle", "value", "GaugeSeriesModel", "install", "FunnelPiece", "layout", "labelLayout", "FunnelView", "FunnelSeriesModel", "sum", "getViewRect", "sort", "len", "layout", "parsePercent", "idx", "install", "ParallelView", "ParallelSeriesModel", "opacityAccessPath", "install", "SankeyPathShape", "SankeyPath", "SankeyView", "layout", "createGridClipShape", "SankeySeriesModel", "layout", "getViewRect", "node", "sum", "len", "install", "WhiskerBoxCommonMixin", "BoxplotSeriesModel", "BoxplotView", "BoxPathShape", "BoxPath", "each", "parsePercent", "axisDimVal", "dataIndex", "ends", "install", "CandlestickView", "createNormalBox", "createLarge", "NormalBoxPathShape", "NormalBoxPath", "transInit", "LargeBoxPathShape", "LargeBoxPath", "CandlestickSeriesModel", "data", "axisDimVal", "ends", "lowestVal", "highestVal", "parsePercent", "install", "EffectSymbol", "EffectScatterView", "clone", "EffectScatterSeriesModel", "install", "EffectLine", "Line_default", "idx", "quadraticAt", "quadraticDerivativeAt", "Polyline", "Polyline_default", "EffectPolyline", "Polyline_default", "len", "LargeLinesPathShape", "LargeLinesPath", "containStroke", "LargeLineDraw", "len", "LinesView", "Polyline_default", "Line_default", "LinesSeriesModel", "len", "normalize", "data", "symbolType", "symbolSize", "install", "HeatmapLayer", "normalize", "len", "len", "HeatmapView", "HeatmapSeriesModel", "install", "PictorialBarView", "layout", "isAnimationEnabled", "parsePercent", "path", "index", "position", "PictorialBarSeriesModel", "install", "ThemeRiverView", "process", "layout", "createGridClipShape", "createGridClipShape", "ThemeRiverSeriesModel", "dist", "parsePercent", "sum", "install", "SunburstPiece", "layout", "cornerRadius", "SunburstView", "newChildren", "oldChildren", "getKey", "removeNode", "virtualRoot", "SunburstSeriesModel", "completeTreeValue", "sum", "RADIAN", "center", "parsePercent", "sort", "initChildren", "sum", "renderNode", "startAngle", "angle", "rStart", "rEnd", "node", "install", "CustomSeriesModel", "dataToCoordSize", "dataToCoordSize", "dataToCoordSize", "radius", "CustomChartView", "el", "getItemModel", "style", "mergeChildren", "install"]
}
