var _e=(e,n,_)=>new Promise((c,v)=>{var y=r=>{try{s(_.next(r))}catch(d){v(d)}},t=r=>{try{s(_.throw(r))}catch(d){v(d)}},s=r=>r.done?c(r.value):Promise.resolve(r.value).then(y,t);s((_=_.apply(e,n)).next())});import{a as Q,B as ae,_ as O,e as h,o as U,f as P,a3 as te,ah as ke,m as z,h as a,i,j as l,ai as Le,c as f,p as so,q as ao,k as M,S as se,ay as Re,n as x,G as Ie,r as K,H as ve,az as w,O as De,T as H,u as W,t as le,l as m,g as o,M as we,L as lo,a0 as io,s as ro,Q as uo,aA as Ue,Z as ze,a1 as qe,aB as ye,aC as fe,aD as Fe,R as Ve,U as Te,P as Qe,a2 as re,aE as co,ax as po,D as Oe,aj as vo,aF as mo,V as _o,Y as yo,aG as ge,aH as me,$ as fo,aI as Co,ag as ko,w as Ro,v as go,X as je,A as ho,aJ as We,a7 as He,I as bo}from"./index.4f7b3b56.js";import{c as $o,b as pe,P as Pe,t as Ce,d as he,C as Ge,W as Je,S as Ze,R as Xe,l as Ke}from"./tryParseAmount.a87c7b21.js";import{T as Ee}from"./TokenLogo.789e5823.js";import{D as de}from"./index.3f305ae3.js";const Io=Q({components:{Button:ae},emits:["change"],props:{tabs:{type:Array},current:{type:Number}},setup(e,{emit:n}){return{onChange:c=>{n("change",c)}}}});const To={class:"l0k-swap-pair-modal-tabs"};function wo(e,n,_,c,v,y){const t=h("Button");return U(),P("div",To,[(U(!0),P(te,null,ke(e.tabs,s=>(U(),z(t,{class:Le(["l0k-swap-pair-modal-tab",{active:s.value===e.current}]),style:{border:"1px solid #D5532A","background-color":"#111524",color:"#D5532A"},key:s.value,type:s.value===e.current?"primary":"text",size:"small",onClick:r=>e.onChange(s.value)},{default:a(()=>[i(l(s.label),1)]),_:2},1032,["class","type","onClick"]))),128))])}const Uo=O(Io,[["render",wo]]);function xe(e){const n=f(()=>{var v;return(v=e.value)==null?void 0:v.address}),_=so(n),c=ao(_,"totalSupply");return f(()=>{var v;return c.state.loading?null:e.value&&((v=c.state.data)==null?void 0:v[0])?new M.exports.TokenAmount(e.value,se.uint256ToBN(c.state.data[0]).toString()):void 0})}function eo(){const e=Re();return f(()=>e.$state)}function Eo(e,n){const{state:{account:_}}=x(),c=eo(),v=f(()=>c.value.independentField),y=f(()=>c.value.typedValue),t=f(()=>c.value.otherTypedValue),s=Ie(y,150),r=Ie(t,150),d=f(()=>v.value===w.CURRENCY_A?w.CURRENCY_B:w.CURRENCY_A),R=f(()=>{var Y,L;return{[w.CURRENCY_A]:(Y=e.value)!=null?Y:void 0,[w.CURRENCY_B]:(L=n.value)!=null?L:void 0}}),C=$o(e,n),T=f(()=>{var Y;return(Y=C.value)==null?void 0:Y[0]}),k=f(()=>{var Y;return(Y=C.value)==null?void 0:Y[1]}),b=f(()=>{var Y;return(Y=k.value)==null?void 0:Y.liquidityToken}),g=xe(b),p=f(()=>T.value===Pe.NOT_EXISTS||Boolean(g.value&&M.exports.JSBI.equal(g.value.raw,M.exports.ZERO))),u=[pe(_,e),pe(_,n)],$=f(()=>({[w.CURRENCY_A]:u[0].value,[w.CURRENCY_B]:u[1].value})),S=f(()=>Ce(s.value,R.value[v.value])),F=f(()=>{if(p.value)return r.value&&R.value[d.value]?Ce(r.value,R.value[d.value]):void 0;if(S.value){const[Y,L]=[e.value,n.value];return Y&&L&&S.value&&k.value?d.value===w.CURRENCY_B?k.value.priceOf(Y).quote(S.value):k.value.priceOf(L).quote(S.value):void 0}}),D=f(()=>({[w.CURRENCY_A]:v.value===w.CURRENCY_A?S.value:F.value,[w.CURRENCY_B]:v.value===w.CURRENCY_A?F.value:S.value})),G=f(()=>{if(p.value){const{[w.CURRENCY_A]:Y,[w.CURRENCY_B]:L}=D.value;return Y&&L?new M.exports.Price(Y.token,L.token,Y.raw,L.raw):void 0}return k.value&&e.value?k.value.priceOf(e.value):void 0}),V=f(()=>{const{[w.CURRENCY_A]:Y,[w.CURRENCY_B]:L}=D.value;if(k.value&&g.value&&Y&&L)try{return k.value.getLiquidityMinted(g.value,Y,L)}catch(N){return}if(p.value&&Y&&L){const N=new M.exports.Pair(new M.exports.TokenAmount(Y.token,"0"),new M.exports.TokenAmount(L.token,"0"));try{return N.getLiquidityMinted(new M.exports.TokenAmount(N.liquidityToken,"0"),Y,L)}catch(B){return}}}),ee=f(()=>{if(V.value&&g.value)return new M.exports.Percent(V.value.raw,g.value.add(V.value).raw)}),q=K();return ve([_,T,R,D,V],()=>{var N,B,J,j,Z,X,oe,ue,be,$e;q.value=void 0,_.value||(q.value="Connect Wallet"),T.value===Pe.INVALID&&(q.value=(N=q.value)!=null?N:"Invalid pair"),(!R.value[w.CURRENCY_A]||!R.value[w.CURRENCY_B])&&(q.value=(B=q.value)!=null?B:"Select a token"),(!D.value[w.CURRENCY_A]||!D.value[w.CURRENCY_B])&&(q.value=(J=q.value)!=null?J:"Enter an amount");const{[w.CURRENCY_A]:Y,[w.CURRENCY_B]:L}=D.value;Y&&((Z=(j=$.value)==null?void 0:j[w.CURRENCY_A])==null?void 0:Z.lessThan(Y))&&(q.value=`Insufficient ${(X=R.value[w.CURRENCY_A])==null?void 0:X.symbol} balance`),L&&((ue=(oe=$.value)==null?void 0:oe[w.CURRENCY_B])==null?void 0:ue.lessThan(L))&&(q.value=`Insufficient ${(be=R.value[w.CURRENCY_B])==null?void 0:be.symbol} balance`),V.value||(q.value=($e=q.value)!=null?$e:"Insufficient input amount")}),{dependentField:d,currencies:R,pair:k,pairState:T,currencyBalances:$,parsedAmounts:D,price:G,noLiquidity:p,liquidityMinted:V,poolTokenPercentage:ee,error:q,totalSupply:g}}function No(e){const n=Re();return{onFieldAInput:v=>{n.typeInput({field:w.CURRENCY_A,typedValue:v,noLiquidity:e.value===!0})},onFieldBInput:v=>{n.typeInput({field:w.CURRENCY_B,typedValue:v,noLiquidity:e.value===!0})}}}function oo(e,n,_){return f(()=>{var c,v,y;return _.value&&n.value?"100":(y=(c=e.value)!=null&&c.lessThan(De)?"<0.01":(v=e.value)==null?void 0:v.toFixed(2))!=null?y:"0"})}const Ao=Q({props:{noLiquidity:Boolean,currencies:{type:Object},poolTokenPercentage:{type:Object},price:{type:Object}},components:{Text:H},setup(e){const{t:n}=W(),{currencies:_,noLiquidity:c,price:v,poolTokenPercentage:y}=le(e),t=f(()=>{var r,d,R,C,T,k,b,g;return[`${(d=(r=_.value)==null?void 0:r[w.CURRENCY_B])==null?void 0:d.symbol} per ${(C=(R=_.value)==null?void 0:R[w.CURRENCY_A])==null?void 0:C.symbol}`,`${(k=(T=_.value)==null?void 0:T[w.CURRENCY_A])==null?void 0:k.symbol} per ${(g=(b=_.value)==null?void 0:b[w.CURRENCY_B])==null?void 0:g.symbol}`]}),s=oo(y,v,c);return{Field:w,labels:t,poolTokenPercentageLabel:s,t:n}}});const So={class:"pool-price-bar"},Yo={class:"column"},Bo={class:"column"},Mo={class:"column"};function qo(e,n,_,c,v,y){const t=h("Text");return U(),P("div",So,[m("div",Yo,[o(t,{size:"small"},{default:a(()=>{var s,r;return[i(l((r=(s=e.price)==null?void 0:s.toSignificant(6))!=null?r:"-"),1)]}),_:1}),o(t,{size:"small",color:"description-text"},{default:a(()=>[i(l(e.labels[0]),1)]),_:1})]),m("div",Bo,[o(t,{size:"small"},{default:a(()=>{var s,r,d;return[i(l((d=(r=(s=e.price)==null?void 0:s.invert())==null?void 0:r.toSignificant(6))!=null?d:"-"),1)]}),_:1}),o(t,{size:"small",color:"description-text"},{default:a(()=>[i(l(e.labels[1]),1)]),_:1})]),m("div",Mo,[o(t,{size:"small"},{default:a(()=>[i(l(e.poolTokenPercentageLabel)+"%",1)]),_:1}),o(t,{size:"small",color:"description-text"},{default:a(()=>[i(l(e.t("add_liquidity.share_of_pool")),1)]),_:1})])])}const Po=O(Ao,[["render",qo]]),Lo=Q({props:{show:{default:!1,type:Boolean},price:{type:Object},currencies:{type:Object},parsedAmounts:{type:Object},poolTokenPercentage:{type:Object},liquidity:Object,noLiquidity:Boolean},components:{Modal:we,Text:H,Button:ae,TokenLogo:Ee,DoubleLogo:de},emits:["dismiss","mint"],setup(e,{emit:n}){const{show:_,currencies:c,liquidity:v,parsedAmounts:y,poolTokenPercentage:t,price:s,noLiquidity:r}=le(e),{t:d}=W(),R=he(),C=oo(t,s,r);return{showModal:f({get:()=>_.value,set(b){b||n("dismiss")}}),Field:w,liquidity:v,slippage:R,currencies:c,parsedAmounts:y,poolTokenPercentageLabel:C,t:d,onConfirm:()=>{n("mint")}}}});const Do={class:"l0k-swap-confirm-mint-modal"},zo={class:"liquidity"},Fo={class:"card"},Vo={class:"cell"},Qo={class:"value"},Oo={class:"cell"},jo={class:"value"},Wo={class:"cell"},Ho={class:"value"},Go={class:"rates"},Jo={class:"cell"},Zo={class:"value"},Xo={class:"confirm"};function Ko(e,n,_,c,v,y){const t=h("Text"),s=h("DoubleLogo"),r=h("TokenLogo"),d=h("Button"),R=h("Modal");return U(),z(R,{modelValue:e.showModal,"onUpdate:modelValue":n[0]||(n[0]=C=>e.showModal=C),top:160,title:e.t("add_liquidity.confirm_title")},{default:a(()=>{var C,T,k,b;return[m("div",Do,[m("div",zo,[o(t,{bold:"",size:"large"},{default:a(()=>{var g,p;return[i(l((p=(g=e.liquidity)==null?void 0:g.toSignificant())!=null?p:"-"),1)]}),_:1}),o(s,{class:"logos",token0:(C=e.currencies)==null?void 0:C[e.Field.CURRENCY_A],token1:(T=e.currencies)==null?void 0:T[e.Field.CURRENCY_B]},null,8,["token0","token1"])]),o(t,{color:"secondary-text"},{default:a(()=>{var g,p,u,$;return[i(l(e.t("add_liquidity.pool_token",{tokens:`${(p=(g=e.currencies)==null?void 0:g[e.Field.CURRENCY_A])==null?void 0:p.symbol}/${($=(u=e.currencies)==null?void 0:u[e.Field.CURRENCY_B])==null?void 0:$.symbol}`})),1)]}),_:1}),o(t,{class:"tips",color:"secondary-text",size:"mini"},{default:a(()=>[i(l(e.t("add_liquidity.confirm_tips",{slippage:e.slippage/100})),1)]),_:1}),m("div",Fo,[m("div",Vo,[o(t,{class:"label",size:"small"},{default:a(()=>{var g,p;return[i(l(e.t("add_liquidity.deposited",{token:(p=(g=e.currencies)==null?void 0:g[e.Field.CURRENCY_A])==null?void 0:p.symbol})),1)]}),_:1}),m("div",Qo,[o(r,{token:(k=e.currencies)==null?void 0:k[e.Field.CURRENCY_A],size:20},null,8,["token"]),o(t,{size:"small",color:"description-text"},{default:a(()=>{var g,p;return[i(l((p=(g=e.parsedAmounts)==null?void 0:g[e.Field.CURRENCY_A])==null?void 0:p.toSignificant()),1)]}),_:1})])]),m("div",Oo,[o(t,{class:"label",size:"small"},{default:a(()=>{var g,p;return[i(l(e.t("add_liquidity.deposited",{token:(p=(g=e.currencies)==null?void 0:g[e.Field.CURRENCY_B])==null?void 0:p.symbol})),1)]}),_:1}),m("div",jo,[o(r,{token:(b=e.currencies)==null?void 0:b[e.Field.CURRENCY_B],size:20},null,8,["token"]),o(t,{size:"small",color:"description-text"},{default:a(()=>{var g,p;return[i(l((p=(g=e.parsedAmounts)==null?void 0:g[e.Field.CURRENCY_B])==null?void 0:p.toSignificant()),1)]}),_:1})])]),m("div",Wo,[o(t,{class:"label",size:"small"},{default:a(()=>[i(l(e.t("add_liquidity.rates")),1)]),_:1}),m("div",Ho,[m("div",Go,[o(t,{size:"small",color:"description-text"},{default:a(()=>{var g,p,u,$,S;return[i(l(`1 ${(p=(g=e.currencies)==null?void 0:g[e.Field.CURRENCY_A])==null?void 0:p.symbol} = ${(u=e.price)==null?void 0:u.toSignificant(6)} ${(S=($=e.currencies)==null?void 0:$[e.Field.CURRENCY_B])==null?void 0:S.symbol}`),1)]}),_:1}),o(t,{size:"small",color:"description-text"},{default:a(()=>{var g,p,u,$,S,F;return[i(l(`1 ${(p=(g=e.currencies)==null?void 0:g[e.Field.CURRENCY_B])==null?void 0:p.symbol} = ${($=(u=e.price)==null?void 0:u.invert())==null?void 0:$.toSignificant(6)}${(F=(S=e.currencies)==null?void 0:S[e.Field.CURRENCY_A])==null?void 0:F.symbol}`),1)]}),_:1})])])]),m("div",Jo,[o(t,{class:"label",size:"small"},{default:a(()=>[i(l(e.t("add_liquidity.share_of_pool")),1)]),_:1}),m("div",Zo,[o(t,{size:"small",color:"description-text"},{default:a(()=>[i(l(e.poolTokenPercentageLabel)+"%",1)]),_:1})])])]),m("div",Xo,[o(d,{type:"primary",bold:"",onClick:e.onConfirm},{default:a(()=>[i(l(e.t("add_liquidity.confirm")),1)]),_:1},8,["onClick"])])])]}),_:1},8,["modelValue","title"])}const xo=O(Lo,[["render",Ko]]),en={data:void 0,loading:!1,error:void 0};function no(e,n,_){const{state:{library:c}}=x(),{addTransaction:v}=lo(),y=io(en);return{state:y,reset:()=>{y.data=void 0,y.loading=!1,y.error=void 0},execute:C=>_e(this,[C],function*({args:r,overrides:d,metadata:R}){if(!e.value)throw new Error("execute: contract is undefined");const T=ro(c.value);if(!uo(T))throw new Error("execute: library not a AccountInterface");if(_&&r&&!y.loading)try{y.loading=!0;const k=e.value.map((g,p)=>({contractAddress:g,entrypoint:_[p],calldata:r[p]})),b=yield T.execute(k,n,d);return y.data=b.transaction_hash,v({status:b.code,transactionHash:b.transaction_hash,metadata:R}),b}catch(k){const b=k instanceof Error?k.message:String(k);y.error=b,console.log(b)}finally{y.loading=!1}})}}const on=Q({components:{CurrencyInputPanel:Ge,AddIcon:Ue,Button:ae,Text:H,PoolPriceBar:Po,ConfirmModal:xo,WaittingModal:Je,ScuccessModal:Ze,RejectedModal:Xe},setup(){const e=Re(),n=eo(),_=f(()=>n.value.tokenA),c=f(()=>n.value.tokenB),v=K(!1),y=K(!1),t=K(),s=ze(),{state:{chainId:r,account:d}}=x(),{t:R}=W(),{noLiquidity:C,dependentField:T,parsedAmounts:k,currencyBalances:b,currencies:g,totalSupply:p,poolTokenPercentage:u,price:$,error:S,pair:F,liquidityMinted:D}=Eo(_,c),{onFieldAInput:G,onFieldBInput:V}=No(C),ee=he(),q=f(()=>r.value&&Ve[r.value]),Y=f(()=>{const{[w.CURRENCY_A]:E,[w.CURRENCY_B]:A}=g.value;return(E==null?void 0:E.address)&&(A==null?void 0:A.address)&&q.value?[E==null?void 0:E.address,A==null?void 0:A.address,q.value]:void 0}),{state:L,execute:N,reset:B}=no(Y,[Te,Te,Ke],["approve","approve","addLiquidity"]),J=f(()=>!!L.error&&L.error.includes("User abort")),j=f(()=>{var ie,ce;const{typedValue:E,independentField:A,otherTypedValue:ne}=n.value;return{[A]:E,[T.value]:C.value?ne:(ce=(ie=k.value[T.value])==null?void 0:ie.toSignificant(6))!=null?ce:""}}),Z=f(()=>C.value?R("add_liquidity.no_liquidity"):p.value===null?R("loading"):p.value?p.value.toSignificant():"-"),X=f(()=>{var ne;const{[w.CURRENCY_A]:E,[w.CURRENCY_B]:A}=k.value;return`Supplying ${E==null?void 0:E.toSignificant(3)} ${E==null?void 0:E.token.symbol} & ${A==null?void 0:A.toSignificant(3)} ${A==null?void 0:A.token.symbol} for ${(ne=D.value)==null?void 0:ne.toSignificant(3)} LP`});return{tokenA:_,tokenB:c,Field:w,account:d,LPTotalSupply:Z,currencies:g,formattedAmounts:j,currencyBalances:b,noLiquidity:C,poolTokenPercentage:u,price:$,error:S,pair:F,liquidityMinted:D,showConfirm:v,parsedAmounts:k,summary:X,attemptingTxn:y,txHash:t,showRejectedModal:J,t:R,onFieldAInput:G,onFieldBInput:V,handleCurrencyASelect:E=>{e.selectToken({tokenA:E})},handleCurrencyBSelect:E=>{e.selectToken({tokenB:E})},onDeposit:()=>{v.value=!0},onMint:()=>_e(this,null,function*(){var Me;B(),v.value=!1,y.value=!0;const{[w.CURRENCY_A]:E,[w.CURRENCY_B]:A}=k.value;if(!E||!A||!q.value||!d.value)return;const ne=se.bnToUint256(E.raw.toString()),ie=se.bnToUint256(A.raw.toString()),ce=se.bnToUint256(ye(fe(E,C.value?0:ee.value)[0].toString())),Ye=se.bnToUint256(ye(fe(A,C.value?0:ee.value)[0].toString())),Be=yield N({args:[[q.value,ne.low,ne.high],[q.value,ie.low,ie.high],[E.token.address,A.token.address,ne.low,ne.high,ie.low,ie.high,ce.low,ce.high,Ye.low,Ye.high,d.value,Fe(Qe)]],metadata:{message:`Supplying ${E==null?void 0:E.toSignificant(3)} ${E==null?void 0:E.token.symbol} & ${A==null?void 0:A.toSignificant(3)} ${A==null?void 0:A.token.symbol} for ${(Me=D.value)==null?void 0:Me.toSignificant(3)} LP`}});y.value=!1,Be&&(t.value=Be.transaction_hash)}),onReset:()=>{t.value&&(G(""),V("")),v.value=!1,y.value=!1,t.value=void 0,B()},openWalletModal:s,onCurrencyAMax:E=>{const A=qe(E);A&&G(A.toExact())},onCurrencyBMax:E=>{const A=qe(E);A&&V(A.toExact())}}}});const nn={class:"l0k-swap-add-liquidity"},tn={class:"l0k-swap-add-content"},sn={class:"add-wrap"};function an(e,n,_,c,v,y){const t=h("CurrencyInputPanel"),s=h("AddIcon"),r=h("Text"),d=h("PoolPriceBar"),R=h("Button"),C=h("ConfirmModal"),T=h("WaittingModal"),k=h("ScuccessModal"),b=h("RejectedModal");return U(),P(te,null,[m("div",nn,[m("div",tn,[o(t,{value:e.formattedAmounts[e.Field.CURRENCY_A],token:e.currencies[e.Field.CURRENCY_A],currencyBalance:e.currencyBalances[e.Field.CURRENCY_A],otherToken:e.currencies[e.Field.CURRENCY_B],onTokenSelect:e.handleCurrencyASelect,onInput:e.onFieldAInput,onMax:e.onCurrencyAMax},null,8,["value","token","currencyBalance","otherToken","onTokenSelect","onInput","onMax"]),m("div",sn,[o(s,{color:"minor",width:"12px"})]),o(t,{value:e.formattedAmounts[e.Field.CURRENCY_B],token:e.currencies[e.Field.CURRENCY_B],otherToken:e.currencies[e.Field.CURRENCY_A],currencyBalance:e.currencyBalances[e.Field.CURRENCY_B],onTokenSelect:e.handleCurrencyBSelect,onInput:e.onFieldBInput,onMax:e.onCurrencyBMax},null,8,["value","token","otherToken","currencyBalance","onTokenSelect","onInput","onMax"]),o(r,{class:"liquidity",color:"description-text",size:"mini"},{default:a(()=>[i(l(e.t("add_liquidity.liquidity",{value:e.LPTotalSupply})),1)]),_:1}),e.noLiquidity?(U(),z(r,{key:0,color:"description-text",size:"mini"},{default:a(()=>[i(l(e.t("add_liquidity.no_liquidity_tips")),1)]),_:1})):re("",!0),e.tokenA&&e.tokenB?(U(),z(d,{key:1,class:"pool-price-bar",currencies:e.currencies,noLiquidity:e.noLiquidity,poolTokenPercentage:e.poolTokenPercentage,price:e.price},null,8,["currencies","noLiquidity","poolTokenPercentage","price"])):re("",!0),e.account?(U(),z(R,{key:3,class:"deposit",disabled:!!e.error,size:"large",type:"primary",bold:"",onClick:e.onDeposit},{default:a(()=>[i(l(e.error?e.error:e.t("add_liquidity.deposit")),1)]),_:1},8,["disabled","onClick"])):(U(),z(R,{key:2,class:"deposit",type:"primary",size:"large",bold:"",onClick:e.openWalletModal},{default:a(()=>[i(l(e.t("connect")),1)]),_:1},8,["onClick"])),o(r,{class:"desc",size:"mini",color:"description-text"},{default:a(()=>[i(" Add liquidity to a pre-existing liquidity pair. The ratio of tokens you add depends on the market value of the pair. ")]),_:1})])]),o(C,{show:e.showConfirm,price:e.price,liquidity:e.liquidityMinted,currencies:e.currencies,parsedAmounts:e.parsedAmounts,noLiquidity:e.noLiquidity,onDismiss:n[0]||(n[0]=g=>e.showConfirm=!1),"pool-token-percentage":e.poolTokenPercentage,onMint:e.onMint},null,8,["show","price","liquidity","currencies","parsedAmounts","noLiquidity","pool-token-percentage","onMint"]),o(T,{show:e.attemptingTxn,desc:e.summary,onDismiss:n[1]||(n[1]=g=>e.attemptingTxn=!1)},null,8,["show","desc"]),o(k,{show:!!e.txHash,tx:e.txHash,onDismiss:e.onReset},null,8,["show","tx","onDismiss"]),o(b,{show:e.showRejectedModal,onDismiss:e.onReset},null,8,["show","onDismiss"])],64)}const ln=O(on,[["render",an]]);var I=(e=>(e.LIQUIDITY="LIQUIDITY",e.CURRENCY_A="CURRENCY_A",e.CURRENCY_B="CURRENCY_B",e.LIQUIDITY_PERCENT="LIQUIDITY_PERCENT",e))(I||{});const to=co("burn",{state:()=>({independentField:I.LIQUIDITY_PERCENT,typedValue:"0"}),actions:{typeInput({field:e,typedValue:n}){this.independentField=e,this.typedValue=po(n.toString())}}});function Ne(){const e=to();return f(()=>e.$state)}function Ae(e){const{state:{account:n}}=x(),_=Ne(),c=f(()=>_.value.independentField),v=f(()=>_.value.typedValue),y=Ie(v,150),t=f(()=>{var u;return(u=e.value)==null?void 0:u.liquidityToken}),s=pe(n!=null?n:void 0,t),r=f(()=>{var u,$;return{[I.CURRENCY_A]:(u=e.value)==null?void 0:u.token0,[I.CURRENCY_B]:($=e.value)==null?void 0:$.token1,[I.LIQUIDITY]:t.value}}),d=xe(t),R=f(()=>{const u=r.value[I.CURRENCY_A];return e.value&&d.value&&s.value&&u&&M.exports.JSBI.greaterThanOrEqual(d.value.raw,s.value.raw)?new M.exports.TokenAmount(u,e.value.getLiquidityValue(u,d.value,s.value,!1).raw):void 0}),C=f(()=>{const u=r.value[I.CURRENCY_B];return e.value&&d.value&&s.value&&u&&M.exports.JSBI.greaterThanOrEqual(d.value.raw,s.value.raw)?new M.exports.TokenAmount(u,e.value.getLiquidityValue(u,d.value,s.value,!1).raw):void 0}),T=f(()=>({[I.CURRENCY_A]:R.value,[I.CURRENCY_B]:C.value})),k=f(()=>{var u;if(c.value===I.LIQUIDITY_PERCENT)return new M.exports.Percent(v.value,"100");if(c.value===I.LIQUIDITY){if(((u=e.value)==null?void 0:u.liquidityToken)&&s.value){const $=Ce(y.value,e.value.liquidityToken);if($&&s.value&&!$.greaterThan(s.value))return new M.exports.Percent($.raw,s.value.raw)}}else if(r.value[c.value]){const $=Ce(y.value,r.value[c.value]),S=T.value[c.value];if($&&S&&!$.greaterThan(S))return new M.exports.Percent($.raw,S.raw)}return new M.exports.Percent("0","100")}),b=f(()=>{const u=r.value[I.CURRENCY_A],$=r.value[I.CURRENCY_B];return{[I.LIQUIDITY_PERCENT]:k.value,[I.LIQUIDITY]:s.value&&k.value&&k.value.greaterThan("0")?new M.exports.TokenAmount(s.value.token,k.value.multiply(s.value.raw).quotient):void 0,[I.CURRENCY_A]:u&&k.value&&k.value.greaterThan("0")&&R.value?new M.exports.TokenAmount(u,k.value.multiply(R.value.raw).quotient):void 0,[I.CURRENCY_B]:$&&k.value&&k.value.greaterThan("0")&&C.value?new M.exports.TokenAmount($,k.value.multiply(C.value.raw).quotient):void 0}}),g=f(()=>{if(s.value&&d.value)return new M.exports.Percent(s.value.raw,d.value.raw)}),p=K();return ve([n,b],()=>{var u;p.value=void 0,n.value||(p.value="Connect Wallet"),(!b.value[I.LIQUIDITY]||!b.value[I.CURRENCY_A]||!b.value[I.CURRENCY_B])&&(p.value=(u=p.value)!=null?u:"Enter an amount")}),{parsedAmounts:b,error:p,userLiquidity:s,poolShare:g,tokens:r,liquidityValueA:R,liquidityValueB:C}}function Se(){const e=to();return{onUserInput:(_,c)=>{e.typeInput({field:_,typedValue:c})}}}const rn=Q({props:{show:{default:!1,type:Boolean},parsedAmounts:{type:Object},prices:{type:Array},pair:{type:Object}},components:{Modal:we,Text:H,Button:ae,TokenLogo:Ee,DoubleLogo:de,AddIcon:Ue},emits:["dismiss","burn"],setup(e,{emit:n}){const{show:_,parsedAmounts:c}=le(e),{t:v}=W(),y=he();return{showModal:f({get:()=>_.value,set(r){r||n("dismiss")}}),Field:I,slippage:y,parsedAmounts:c,t:v,onConfirm:()=>{n("burn")}}}});const un={class:"l0k-swap-confirm-burn-modal"},dn={class:"output"},cn={class:"token"},pn={class:"output"},vn={class:"token"},mn={class:"card"},_n={class:"cell"},yn={class:"value"},fn={class:"cell"},Cn={class:"price"},kn={class:"confirm"};function Rn(e,n,_,c,v,y){const t=h("Text"),s=h("TokenLogo"),r=h("AddIcon"),d=h("DoubleLogo"),R=h("Button"),C=h("Modal");return U(),z(C,{modelValue:e.showModal,"onUpdate:modelValue":n[0]||(n[0]=T=>e.showModal=T),top:160,title:e.t("remove_liquidity.confirm_title")},{default:a(()=>{var T,k,b,g;return[m("div",un,[m("div",dn,[o(t,{bold:"",size:"large"},{default:a(()=>{var p,u,$;return[i(l(($=(u=(p=e.parsedAmounts)==null?void 0:p[e.Field.CURRENCY_A])==null?void 0:u.toSignificant())!=null?$:"-"),1)]}),_:1}),m("div",cn,[o(s,{token:(T=e.pair)==null?void 0:T.token0},null,8,["token"]),o(t,{bold:""},{default:a(()=>{var p;return[i(l((p=e.pair)==null?void 0:p.token0.symbol),1)]}),_:1})])]),o(r,{width:"10px",color:"minor"}),m("div",pn,[o(t,{bold:"",size:"large"},{default:a(()=>{var p,u,$;return[i(l(($=(u=(p=e.parsedAmounts)==null?void 0:p[e.Field.CURRENCY_B])==null?void 0:u.toSignificant())!=null?$:"-"),1)]}),_:1}),m("div",vn,[o(s,{token:(k=e.pair)==null?void 0:k.token1},null,8,["token"]),o(t,{bold:""},{default:a(()=>{var p;return[i(l((p=e.pair)==null?void 0:p.token1.symbol),1)]}),_:1})])]),o(t,{class:"tips",color:"secondary-text",size:"mini"},{default:a(()=>[i(l(e.t("remove_liquidity.confirm_tips",{slippage:e.slippage/100})),1)]),_:1}),m("div",mn,[m("div",_n,[o(t,{class:"label",size:"small"},{default:a(()=>{var p,u;return[i(l(e.t("remove_liquidity.burned",{token:`${(p=e.pair)==null?void 0:p.token0.symbol}/${(u=e.pair)==null?void 0:u.token1.symbol}`})),1)]}),_:1}),m("div",yn,[o(d,{token0:(b=e.pair)==null?void 0:b.token0,token1:(g=e.pair)==null?void 0:g.token1,size:20},null,8,["token0","token1"]),o(t,{class:"liquidity",size:"small",color:"description-text"},{default:a(()=>{var p,u;return[i(l((u=(p=e.parsedAmounts)==null?void 0:p[e.Field.CURRENCY_A])==null?void 0:u.toSignificant()),1)]}),_:1})])]),m("div",fn,[o(t,{class:"label",size:"small"},{default:a(()=>[i(l(e.t("remove_liquidity.price")),1)]),_:1}),m("div",Cn,[o(t,{size:"mini",color:"description-text"},{default:a(()=>{var p;return[i(l((p=e.prices)==null?void 0:p[0]),1)]}),_:1}),o(t,{size:"mini",color:"description-text"},{default:a(()=>{var p;return[i(l((p=e.prices)==null?void 0:p[1]),1)]}),_:1})])])]),m("div",kn,[o(R,{type:"primary",bold:"",onClick:e.onConfirm},{default:a(()=>[i(l(e.t("remove_liquidity.confirm")),1)]),_:1},8,["onClick"])])])]}),_:1},8,["modelValue","title"])}const gn=O(rn,[["render",Rn]]),hn=Q({props:{pair:{type:Object}},components:{CurrencyInputPanel:Ge,DoubleLogo:de,DownIcon:Oe,AddIcon:Ue,Text:H},emits:["simple"],setup(e,{emit:n}){const{t:_}=W(),{pair:c}=le(e),v=Ne(),y=f(()=>v.value.independentField),t=f(()=>v.value.typedValue),{state:{account:s}}=x(),r=f(()=>{var $;return($=c.value)==null?void 0:$.token0}),d=f(()=>{var $;return($=c.value)==null?void 0:$.token1}),R=pe(s,r),C=pe(s,d),{parsedAmounts:T,userLiquidity:k}=Ae(c),b=f(()=>{var $,S,F,D,G,V,ee,q;return{[I.LIQUIDITY_PERCENT]:y.value===I.LIQUIDITY_PERCENT?t.value:(S=($=T.value[I.LIQUIDITY_PERCENT])==null?void 0:$.toSignificant(6))!=null?S:"",[I.LIQUIDITY]:y.value===I.LIQUIDITY?t.value:(D=(F=T.value[I.LIQUIDITY])==null?void 0:F.toSignificant(6))!=null?D:"",[I.CURRENCY_A]:y.value===I.CURRENCY_A?t.value:(V=(G=T.value[I.CURRENCY_A])==null?void 0:G.toSignificant(6))!=null?V:"",[I.CURRENCY_B]:y.value===I.CURRENCY_B?t.value:(q=(ee=T.value[I.CURRENCY_B])==null?void 0:ee.toSignificant(6))!=null?q:""}}),{onUserInput:g}=Se();return{Field:I,formattedAmounts:b,userLiquidity:k,token0Balance:R,token1Balance:C,onUserInput:g,onMax:$=>{$&&!$.equalTo(M.exports.ZERO)&&g(I.LIQUIDITY,$.toExact())},onSimpleClick:()=>{n("simple")},t:_}}});const bn={class:"detailed-remove"},$n={class:"remove-amount"},In={class:"icon-wrap"},Tn={class:"icon-wrap"};function wn(e,n,_,c,v,y){var C,T,k;const t=h("Text"),s=h("DoubleLogo"),r=h("CurrencyInputPanel"),d=h("DownIcon"),R=h("AddIcon");return U(),P("div",bn,[m("div",$n,[o(t,{size:"small"},{default:a(()=>[i(l(e.t("remove_liquidity.remove_amount")),1)]),_:1}),o(t,{bold:"",size:"large"},{default:a(()=>{var b;return[i(l((b=e.formattedAmounts[e.Field.LIQUIDITY_PERCENT])!=null?b:"-")+"%",1)]}),_:1}),o(t,{class:"simple",color:"blue",size:"small",onClick:e.onSimpleClick},{default:a(()=>[i(l(e.t("remove_liquidity.simple")),1)]),_:1},8,["onClick"])]),o(r,{selector:!1,size:"small",token:(C=e.pair)==null?void 0:C.liquidityToken,value:e.formattedAmounts[e.Field.LIQUIDITY],currencyBalance:e.userLiquidity,onInput:n[0]||(n[0]=b=>e.onUserInput(e.Field.LIQUIDITY,b)),onMax:e.onMax},{token:a(()=>{var b,g;return[o(s,{token0:(b=e.pair)==null?void 0:b.token0,token1:(g=e.pair)==null?void 0:g.token1},null,8,["token0","token1"]),o(t,{class:"symbol",bold:""},{default:a(()=>{var p,u;return[i(l(((p=e.pair)==null?void 0:p.token0.symbol)+"-"+((u=e.pair)==null?void 0:u.token1.symbol)),1)]}),_:1})]}),_:1},8,["token","value","currencyBalance","onMax"]),m("div",In,[o(d,{width:"10px",color:"minor"})]),o(r,{size:"small",selector:!1,token:(T=e.pair)==null?void 0:T.token0,currencyBalance:e.token0Balance,value:e.formattedAmounts[e.Field.CURRENCY_A],onInput:n[1]||(n[1]=b=>e.onUserInput(e.Field.CURRENCY_A,b))},null,8,["token","currencyBalance","value"]),m("div",Tn,[o(R,{width:"10px",color:"minor"})]),o(r,{size:"small",selector:!1,token:(k=e.pair)==null?void 0:k.token1,currencyBalance:e.token1Balance,value:e.formattedAmounts[e.Field.CURRENCY_B],onInput:n[2]||(n[2]=b=>e.onUserInput(e.Field.CURRENCY_B,b))},null,8,["token","currencyBalance","value"])])}const Un=O(hn,[["render",wn]]),En=Q({props:{pair:{type:Object}},components:{Text:H,DownIcon:Oe,TokenLogo:Ee},emits:["detailed"],setup(e,{emit:n}){const{t:_}=W(),{pair:c}=le(e),v=Ne(),y=f(()=>v.value.independentField),t=f(()=>v.value.typedValue),{parsedAmounts:s,tokens:r}=Ae(c),{onUserInput:d}=Se(),R=f(()=>{var b,g,p,u,$,S,F,D;return{[I.LIQUIDITY_PERCENT]:y.value===I.LIQUIDITY_PERCENT?t.value:(g=(b=s.value[I.LIQUIDITY_PERCENT])==null?void 0:b.toSignificant(6))!=null?g:"",[I.LIQUIDITY]:y.value===I.LIQUIDITY?t.value:(u=(p=s.value[I.LIQUIDITY])==null?void 0:p.toSignificant(6))!=null?u:"",[I.CURRENCY_A]:y.value===I.CURRENCY_A?t.value:(S=($=s.value[I.CURRENCY_A])==null?void 0:$.toSignificant(6))!=null?S:"-",[I.CURRENCY_B]:y.value===I.CURRENCY_B?t.value:(D=(F=s.value[I.CURRENCY_B])==null?void 0:F.toSignificant(6))!=null?D:"-"}});return{pair:c,formattedAmounts:R,Field:I,tokens:r,t:_,onDetailedClick:()=>{n("detailed")},onRange:b=>{const g=b.target;d(I.LIQUIDITY_PERCENT,g.value)},onRangeClick:b=>{d(I.LIQUIDITY_PERCENT,b.toString())}}}});const Nn={class:"simple-remove"},An={class:"remove-amount"},Sn=["value"],Yn={class:"ranges"},Bn=["onClick"],Mn={class:"icon-wrap"},qn={class:"amounts"},Pn={class:"amount"},Ln={class:"token"},Dn={class:"amount"},zn={class:"token"};function Fn(e,n,_,c,v,y){var d,R;const t=h("Text"),s=h("DownIcon"),r=h("TokenLogo");return U(),P("div",Nn,[m("div",An,[o(t,{size:"small"},{default:a(()=>[i(l(e.t("remove_liquidity.remove_amount")),1)]),_:1}),o(t,{bold:"",size:"large"},{default:a(()=>{var C;return[i(l((C=e.formattedAmounts[e.Field.LIQUIDITY_PERCENT])!=null?C:"-")+"%",1)]}),_:1}),m("input",{class:"range",value:e.formattedAmounts[e.Field.LIQUIDITY_PERCENT],type:"range",min:"0",max:"100",step:"1",onChange:n[0]||(n[0]=(...C)=>e.onRange&&e.onRange(...C))},null,40,Sn),m("div",Yn,[(U(),P(te,null,ke([0,25,50,75,100],C=>m("span",{key:C,onClick:T=>e.onRangeClick(C)},l(C)+"% ",9,Bn)),64))]),o(t,{class:"detailed",color:"blue",size:"small",onClick:e.onDetailedClick},{default:a(()=>[i(l(e.t("remove_liquidity.detailed")),1)]),_:1},8,["onClick"])]),m("div",Mn,[o(s,{width:"10px",color:"minor"})]),m("div",qn,[m("div",Pn,[o(t,{bold:"",size:"large"},{default:a(()=>[i(l(e.formattedAmounts[e.Field.CURRENCY_A]),1)]),_:1}),m("div",Ln,[o(r,{class:"logo",token:(d=e.tokens)==null?void 0:d[e.Field.CURRENCY_A]},null,8,["token"]),o(t,{bold:""},{default:a(()=>{var C;return[i(l((C=e.tokens[e.Field.CURRENCY_A])==null?void 0:C.symbol),1)]}),_:1})])]),m("div",Dn,[o(t,{bold:"",size:"large"},{default:a(()=>{var C;return[i(l((C=e.formattedAmounts[e.Field.CURRENCY_B])!=null?C:"-"),1)]}),_:1}),m("div",zn,[o(r,{class:"logo",token:(R=e.tokens)==null?void 0:R[e.Field.CURRENCY_B]},null,8,["token"]),o(t,{bold:""},{default:a(()=>{var C,T;return[i(l((T=(C=e.tokens)==null?void 0:C[e.Field.CURRENCY_B])==null?void 0:T.symbol),1)]}),_:1})])])])])}const Vn=O(En,[["render",Fn]]),Qn=Q({props:{pair:{type:Object}},components:{Text:H,Button:ae,ConfirmModal:gn,WaittingModal:Je,ScuccessModal:Ze,RejectedModal:Xe,DetailedRemove:Un,SimpleRemove:Vn,DoubleLogo:de},setup(e){const{pair:n}=le(e),{t:_}=W(),{state:{account:c,chainId:v}}=x(),{onUserInput:y}=Se(),t=ze(),s=K("simple"),r=K(!1),d=K(),R=he(),{parsedAmounts:C,userLiquidity:T,error:k,poolShare:b,liquidityValueA:g,liquidityValueB:p}=Ae(n),u=f(()=>v.value&&Ve[v.value]),$=f(()=>{var B;const N=(B=n.value)==null?void 0:B.liquidityToken.address;return N&&u.value?[N,u.value]:void 0}),{state:S,execute:F,reset:D}=no($,[Te,Ke],["approve","removeLiquidity"]),G=f(()=>!!S.error&&S.error.includes("User abort")),V=f(()=>{const{[I.CURRENCY_A]:N,[I.CURRENCY_B]:B}=C.value;return`Removing ${N==null?void 0:N.toSignificant(3)} ${N==null?void 0:N.token.symbol} and ${B==null?void 0:B.toSignificant(3)} ${B==null?void 0:B.token.symbol} `}),ee=f(()=>{var N,B,J,j,Z,X,oe,ue;return[`1 ${(N=n.value)==null?void 0:N.token0.symbol} = ${(B=n.value)==null?void 0:B.token0Price.toSignificant(6)} ${(j=(J=n.value)==null?void 0:J.token1)==null?void 0:j.symbol}`,`1 ${(Z=n.value)==null?void 0:Z.token1.symbol} = ${(X=n.value)==null?void 0:X.token1Price.toSignificant(6)} ${(ue=(oe=n.value)==null?void 0:oe.token0)==null?void 0:ue.symbol}`]});return{pair:n,Field:I,account:c,error:k,userLiquidity:T,prices:ee,poolShare:b,ONE_BIPS:De,liquidityValueA:g,liquidityValueB:p,showConfirm:r,parsedAmounts:C,executeState:S,summary:V,showRejectedModal:G,txHash:d,model:s,t:_,onUserInput:y,openWalletModal:t,onApprove:()=>{r.value=!0},onBurn:()=>_e(this,null,function*(){r.value=!1,D();const{[I.CURRENCY_A]:N,[I.CURRENCY_B]:B,[I.LIQUIDITY]:J}=C.value;if(!N||!B||!J||!u.value||!c.value)return;const j=se.bnToUint256(J.raw.toString()),Z=se.bnToUint256(ye(fe(N,R.value)[0].toString())),X=se.bnToUint256(ye(fe(B,R.value)[0].toString())),oe=yield F({args:[[u.value,j.low,j.high],[N.token.address,B.token.address,j.low,j.high,Z.low,Z.high,X.low,X.high,c.value,Fe(Qe)]],metadata:{message:`Removing ${N==null?void 0:N.toSignificant(3)} ${N==null?void 0:N.token.symbol} and ${B==null?void 0:B.toSignificant(3)} ${B==null?void 0:B.token.symbol} `}});oe&&(d.value=oe.transaction_hash)}),onReset:()=>{d.value&&y(I.LIQUIDITY,""),r.value=!1,d.value=void 0,D()}}}});const On={class:"l0k-swap-remove-liquidity"},jn={class:"content"},Wn={class:"price-wrap"},Hn={class:"price"},Gn={class:"position"},Jn={class:"cell LP"},Zn={class:"label"},Xn={class:"cell"},Kn={class:"cell"},xn={class:"cell"},et={class:"btns-wrapper"},ot={class:"btns"};function nt(e,n,_,c,v,y){var g,p;const t=h("Text"),s=h("DetailedRemove"),r=h("SimpleRemove"),d=h("DoubleLogo"),R=h("Button"),C=h("ConfirmModal"),T=h("WaittingModal"),k=h("RejectedModal"),b=h("ScuccessModal");return U(),P(te,null,[m("div",On,[m("div",jn,[o(t,{class:"tips",color:"description-text",size:"small"},{default:a(()=>[i(l(e.t("remove_liquidity.tips")),1)]),_:1}),e.model==="detailed"?(U(),z(s,{key:0,pair:e.pair,onSimple:n[0]||(n[0]=u=>e.model="simple")},null,8,["pair"])):re("",!0),e.model==="simple"?(U(),z(r,{key:1,pair:e.pair,onDetailed:n[1]||(n[1]=u=>e.model="detailed")},null,8,["pair"])):re("",!0),m("div",Wn,[o(t,{size:"mini"},{default:a(()=>[i(l(e.t("remove_liquidity.price")),1)]),_:1}),m("div",Hn,[o(t,{size:"mini",color:"description-text"},{default:a(()=>[i(l(e.prices[0]),1)]),_:1}),o(t,{size:"mini",color:"description-text"},{default:a(()=>[i(l(e.prices[1]),1)]),_:1})])]),m("div",Gn,[o(t,{size:"small"},{default:a(()=>[i(l(e.t("remove_liquidity.your_position")),1)]),_:1}),m("div",Jn,[m("div",Zn,[o(d,{token0:(g=e.pair)==null?void 0:g.token0,token1:(p=e.pair)==null?void 0:p.token1},null,8,["token0","token1"]),o(t,{class:"symbols",bold:"",size:"md"},{default:a(()=>{var u,$;return[i(l(((u=e.pair)==null?void 0:u.token0.symbol)+"-"+(($=e.pair)==null?void 0:$.token1.symbol)),1)]}),_:1})]),o(t,{class:"value",bold:"",size:"md"},{default:a(()=>{var u;return[i(l((u=e.userLiquidity)==null?void 0:u.toSignificant()),1)]}),_:1})]),m("div",Xn,[o(t,{class:"label",size:"small"},{default:a(()=>[i(l(e.t("remove_liquidity.pool_share")),1)]),_:1}),o(t,{class:"value",size:"small",color:"description-text"},{default:a(()=>{var u,$,S;return[i(l((S=(u=e.poolShare)!=null&&u.lessThan(e.ONE_BIPS)?"<0.01":($=e.poolShare)==null?void 0:$.toFixed(2))!=null?S:"0")+" % ",1)]}),_:1})]),m("div",Kn,[o(t,{class:"label",size:"small"},{default:a(()=>{var u;return[i(l((u=e.pair)==null?void 0:u.token0.symbol),1)]}),_:1}),o(t,{class:"value",size:"small",color:"description-text"},{default:a(()=>{var u;return[i(l((u=e.liquidityValueA)==null?void 0:u.toSignificant()),1)]}),_:1})]),m("div",xn,[o(t,{class:"label",size:"small"},{default:a(()=>{var u;return[i(l((u=e.pair)==null?void 0:u.token1.symbol),1)]}),_:1}),o(t,{class:"value",size:"small",color:"description-text"},{default:a(()=>{var u;return[i(l((u=e.liquidityValueB)==null?void 0:u.toSignificant()),1)]}),_:1})])])]),m("div",et,[m("div",ot,[e.account?(U(),z(R,{key:1,class:"approve",disabled:!!e.error,size:"large",bold:"",type:"primary",onClick:e.onApprove},{default:a(()=>[i(l(e.error?e.error:e.t("remove_liquidity.approve")),1)]),_:1},8,["disabled","onClick"])):(U(),z(R,{key:0,class:"approve",type:"primary",size:"large",bold:"",onClick:e.openWalletModal},{default:a(()=>[i(l(e.t("connect")),1)]),_:1},8,["onClick"]))])])]),o(C,{show:e.showConfirm,parsedAmounts:e.parsedAmounts,prices:e.prices,pair:e.pair,onDismiss:n[2]||(n[2]=u=>e.showConfirm=!1),onBurn:e.onBurn},null,8,["show","parsedAmounts","prices","pair","onBurn"]),o(T,{show:e.executeState.loading,desc:e.summary,onDismiss:e.onReset},null,8,["show","desc","onDismiss"]),o(k,{show:e.showRejectedModal,onDismiss:e.onReset},null,8,["show","onDismiss"]),o(b,{show:!!e.txHash,tx:e.txHash,onDismiss:e.onReset},null,8,["show","tx","onDismiss"])],64)}const tt=O(Qn,[["render",nt],["__scopeId","data-v-785769a6"]]),st=Q({components:{Modal:we,ModalHeader:vo,BackIcon:mo,SettingIcon:_o,Tabs:Uo,AddLiquidity:ln,RemoveLiquidity:tt},setup(){const{t:e}=W(),n=yo(),_=ge(),c=me(),v=Re(),y=fo(),t=f(()=>c.addLiquidityPair),s=f(()=>c.removeLiquidityPair);ve([t],()=>{var k,b;t.value&&v.selectToken({tokenA:(k=t.value)==null?void 0:k.token0,tokenB:(b=t.value)==null?void 0:b.token1})});const r=f({get:()=>c.show,set(k){c.togglePoolModal(k)}}),d=f(()=>c.tabs),R=f(()=>c.currentNav);return{showModal:r,tabs:d,currentNav:R,removeLiquidityPair:s,isMobile:_,Actions:Co,onSetting:()=>{n.toggleSlippageToleranceSettingsModal(!0),y.updateCurrentSet("liquidity")},onChange:k=>{c.updateNav(k)},t:e}}});const at={class:"l0k-swap-pair-modal"},lt={key:0},it={key:1};function rt(e,n,_,c,v,y){const t=h("BackIcon"),s=h("Tabs"),r=h("SettingIcon"),d=h("ModalHeader"),R=h("AddLiquidity"),C=h("RemoveLiquidity"),T=h("Modal");return U(),z(T,{modelValue:e.showModal,"onUpdate:modelValue":n[1]||(n[1]=k=>e.showModal=k),top:e.currentNav===e.Actions.BURN?"80px":e.isMobile?"30%":"140px"},{header:a(()=>[o(d,null,{left:a(()=>[o(t,{class:"l0k-swap-pair-modal-icon",onClick:n[0]||(n[0]=k=>e.showModal=!1)})]),right:a(()=>[o(r,{class:"l0k-swap-pair-modal-icon",onClick:e.onSetting},null,8,["onClick"])]),default:a(()=>[o(s,{tabs:e.tabs,current:e.currentNav,onChange:e.onChange},null,8,["tabs","current","onChange"])]),_:1})]),default:a(()=>{var k;return[m("div",at,[e.currentNav===e.Actions.MINT?(U(),P("div",lt,[o(R)])):re("",!0),e.currentNav===e.Actions.BURN?(U(),P("div",it,[o(C,{pair:(k=e.removeLiquidityPair)!=null?k:void 0},null,8,["pair"])])):re("",!0)])]}),_:1},8,["modelValue","top"])}const ut=O(st,[["render",rt],["__scopeId","data-v-67dc7865"]]),dt=Q({props:{data:{required:!0,type:Object}},components:{DoubleLogo:de,ArrowDownIcon:ko,Text:H,Button:ae},setup(e){const{data:n}=le(e),_=me(),{t:c}=W(),v=K(!1),y=f(()=>{const{pair:r,totalSupply:d,balance:R}=n.value,{token0:C,token1:T}=r;return[new M.exports.TokenAmount(C,r.getLiquidityValue(C,d,R,!1).raw),new M.exports.TokenAmount(T,r.getLiquidityValue(T,d,R,!1).raw)]});return{shwoMore:v,liquidityValues:y,t:c,onAdd:()=>{_.addLiquidityFromMyPool(n.value.pair)},onRemove:()=>{_.withdraw(n.value.pair)}}}});const ct={class:"pair-wrapper"},pt={class:"pair"},vt={class:"manage"},mt={class:"position-wrapper"},_t={class:"position"},yt={class:"cell"},ft={class:"cell"},Ct={class:"cell"},kt={class:"cell"},Rt={class:"btns"};function gt(e,n,_,c,v,y){const t=h("DoubleLogo"),s=h("Text"),r=h("ArrowDownIcon"),d=h("Button");return U(),P("div",ct,[m("div",{class:"overview",onClick:n[0]||(n[0]=R=>e.shwoMore=!e.shwoMore)},[m("div",pt,[o(t,{token0:e.data.pair.token0,token1:e.data.pair.token1,size:20},null,8,["token0","token1"]),o(s,{class:"symbol",size:"small",color:"secondary-text"},{default:a(()=>[i(l(e.data.pair.token0.symbol)+"-"+l(e.data.pair.token1.symbol),1)]),_:1})]),m("div",vt,[o(s,{size:"small",color:"blue"},{default:a(()=>[i(l(e.t("pool.manage")),1)]),_:1}),o(r,{class:Le(["arrow",{show:e.shwoMore}]),color:"blue",width:"11px"},null,8,["class"])])]),Ro(m("div",mt,[m("div",_t,[m("div",yt,[o(s,{class:"label",size:"small"},{default:a(()=>[i(l(e.t("pool.total_pool_tokens")),1)]),_:1}),o(s,{size:"small",color:"description-text"},{default:a(()=>[i(l(e.data.balance.toSignificant()),1)]),_:1})]),m("div",ft,[o(s,{class:"label",size:"small"},{default:a(()=>[i(l(e.t("pool.pooled",{symbol:e.data.pair.token0.symbol})),1)]),_:1}),o(s,{size:"small",color:"description-text"},{default:a(()=>[i(l(e.liquidityValues[0].toSignificant()),1)]),_:1})]),m("div",Ct,[o(s,{class:"label",size:"small"},{default:a(()=>[i(l(e.t("pool.pooled",{symbol:e.data.pair.token1.symbol})),1)]),_:1}),o(s,{size:"small",color:"description-text"},{default:a(()=>[i(l(e.liquidityValues[1].toSignificant()),1)]),_:1})]),m("div",kt,[o(s,{class:"label",size:"small"},{default:a(()=>[i(l(e.t("pool.your_pool_share")),1)]),_:1}),o(s,{size:"small",color:"description-text"},{default:a(()=>[i(l(e.data.poolShareView)+"%",1)]),_:1})]),m("div",Rt,[o(d,{size:"small",type:"primary",onClick:e.onAdd},{default:a(()=>[i(l(e.t("pool.add_liquidity")),1)]),_:1},8,["onClick"]),o(d,{size:"small",type:"secondary",onClick:e.onRemove},{default:a(()=>[i(l(e.t("pool.withdraw")),1)]),_:1},8,["onClick"])])])],512),[[go,e.shwoMore]])])}const ht=O(dt,[["render",gt],["__scopeId","data-v-9b6400a3"]]),bt=Q({props:{userPairs:{type:Array},loading:{type:Boolean}},components:{Text:H,Button:ae,LoadingIcon:je,MyPoolItem:ht},setup(){const{t:e}=W(),{state:{account:n}}=x(),_=ge(),c=me();return{isMobile:_,account:n,t:e,onDeposit:()=>{c.newPosition()}}}});const $t={class:"my-pools-wrapper"},It={key:0,class:"tips-wrap"},Tt={key:1,class:"loading"},wt={key:1,class:"my-pools"};function Ut(e,n,_,c,v,y){const t=h("Text"),s=h("LoadingIcon"),r=h("Button"),d=h("MyPoolItem");return U(),P("div",$t,[!e.account||e.loading||!e.userPairs||!e.userPairs.length?(U(),P("div",It,[e.account?e.loading?(U(),P("div",Tt,[o(s)])):(U(),P(te,{key:2},[o(t,{class:"tips",color:"description-text"},{default:a(()=>[i(l(e.t("pool.tips2")),1)]),_:1}),o(r,{class:"deposit",plain:"",bold:"",onClick:e.onDeposit},{default:a(()=>[i(l(e.t("pool.deposit")),1)]),_:1},8,["onClick"])],64)):(U(),z(t,{key:0,class:"tips",color:"description-text"},{default:a(()=>[i(l(e.t("pool.tips")),1)]),_:1}))])):(U(),P("div",wt,[(U(!0),P(te,null,ke(e.userPairs,R=>(U(),z(d,{key:R.pair.liquidityToken.address,data:R},null,8,["data"]))),128))]))])}const Et=O(bt,[["render",Ut]]),Nt=Q({props:{pairs:{type:Array},loading:{type:Boolean}},components:{Text:H,DoubleLogo:de,LoadingIcon:je},setup(e){const{pairs:n}=le(e),{t:_}=W(),c=me(),v=ge(),y=f(()=>{var s;return ho.exports.cloneDeep((s=n.value)!=null?s:[]).sort((r,d)=>d.liquidity-r.liquidity)});return{t:_,onGet:s=>{c.addLiquidity(s.pair)},sortedPairs:y,isMobile:v}}});const At={class:"pools-wrapper"},St={class:"pools-head"},Yt={class:"pools"},Bt={class:"tokens"},Mt={key:0,class:"loading"};function qt(e,n,_,c,v,y){const t=h("Text"),s=h("DoubleLogo"),r=h("LoadingIcon");return U(),P("div",At,[m("div",St,[o(t,{class:"name",size:"small"},{default:a(()=>[i(l(e.t("pool.name")),1)]),_:1}),o(t,{class:"liquidity",size:"small"},{default:a(()=>[i(l(e.t("pool.liquidity")),1)]),_:1}),o(t,{class:"add",size:"small"},{default:a(()=>[i(l(e.t("pool.add")),1)]),_:1})]),m("div",Yt,[(U(!0),P(te,null,ke(e.sortedPairs,d=>(U(),P("div",{class:"pair",key:d.pairAddress},[m("div",Bt,[o(s,{token0:d.token0,token1:d.token1,size:20,coverage:e.isMobile},null,8,["token0","token1","coverage"]),o(t,{class:"symbol",size:e.isMobile?"mini":"small",color:"secondary-text"},{default:a(()=>[i(l(d.token0.symbol)+" - "+l(d.token1.symbol),1)]),_:2},1032,["size"])]),o(t,{class:"liquidity",size:e.isMobile?"mini":"small",color:"secondary-text"},{default:a(()=>[i("$ "+l(d.liquidity.toFixed(2)),1)]),_:2},1032,["size"]),o(t,{class:"get",size:e.isMobile?"mini":"small",color:"blue",onClick:R=>e.onGet(d)},{default:a(()=>[i(l(e.t("pool.get")),1)]),_:2},1032,["size","onClick"])]))),128)),e.loading&&!e.sortedPairs.length?(U(),P("div",Mt,[o(r)])):re("",!0)])])}const Pt=O(Nt,[["render",qt]]);function Lt(){const e=We(),{state:{chainId:n}}=x();return He(()=>{n.value&&e.getAllPairs(n.value)}),ve([n],()=>{n.value&&e.getAllPairs(n.value)}),[f(()=>e.$state.pairs),f(()=>e.$state.loadingPools)]}function Dt(e){const n=We(),_=f(()=>n.$state.userPools),{state:{chainId:c,account:v}}=x(),y=()=>{e.value.length&&v.value&&c.value&&n.getUserPairs(c.value,v.value)};return ve([e,v],y),He(y),[_,f(()=>n.$state.loadingUserPools)]}const zt=Q({components:{Text:H,Button:ae,PoolModal:ut,Pools:Pt,MyPools:Et},setup(){const{t:e}=W(),{state:{chainId:n}}=x(),_=ge(),c=me(),[v,y]=Lt(),[t,s]=Dt(v),r=K("pools"),d=f(()=>bo(n.value));return{isMobile:_,isSupportChain:d,currentNav:r,pairs:v,userPairs:t,loadingUserPairs:s,loadingPairs:y,onNewPosition:()=>{c.newPosition()},t:e}}});const Ft={class:"l0k-swap-pool-wrapper"},Vt={class:"head"},Qt={class:"tabs"};function Ot(e,n,_,c,v,y){const t=h("Text"),s=h("Button"),r=h("Pools"),d=h("MyPools"),R=h("PoolModal");return U(),P(te,null,[m("div",Ft,[e.isSupportChain?(U(),P(te,{key:1},[m("div",Vt,[o(t,{bold:""},{default:a(()=>[i(l(e.t("pool.title")),1)]),_:1}),m("div",Qt,[o(s,{class:"pools",size:"small",style:{border:"1px solid #D5532A","background-color":"#111524",color:"#D5532A","border-radius":"5px"},type:"secondary",disabled:e.currentNav==="pools",onClick:n[0]||(n[0]=C=>e.currentNav="pools")},{default:a(()=>[i(l(e.t("pool.pools")),1)]),_:1},8,["disabled"]),o(s,{class:"my-pools",size:"small",style:{border:"1px solid #D5532A","background-color":"#111524",color:"#D5532A","border-radius":"5px"},type:"secondary",disabled:e.currentNav==="my-pools",onClick:n[1]||(n[1]=C=>e.currentNav="my-pools")},{default:a(()=>[i(l(e.t("pool.my_pools")),1)]),_:1},8,["disabled"])]),o(s,{size:"small",type:"primary",onClick:e.onNewPosition,style:{border:"1px solid #D5532A","background-color":"#1d2237",color:"#D5532A","border-radius":"5px"}},{default:a(()=>[i(l(e.isMobile?"+":e.t("pool.new_position")),1)]),_:1},8,["onClick"])]),e.currentNav==="pools"?(U(),z(r,{key:0,pairs:e.pairs,loading:e.loadingPairs},null,8,["pairs","loading"])):(U(),z(d,{key:1,userPairs:e.userPairs,loading:e.loadingUserPairs},null,8,["userPairs","loading"]))],64)):(U(),z(t,{key:0,class:"wrong-network",bold:""},{default:a(()=>[i(" Wrong Network ")]),_:1}))]),o(R)],64)}const xt=O(zt,[["render",Ot],["__scopeId","data-v-74f94446"]]);export{xt as default};
